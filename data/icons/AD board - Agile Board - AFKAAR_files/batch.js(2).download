;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(firstDayOfWeek,dateStr,todayDateStr,onSelected,onClose){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=onSelected||null;this.onClose=onClose||null;this.dragging=false;this.hidden=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT["DEF_DATE_FORMAT"];this.ttDateFormat=Calendar._TT["TT_DATE_FORMAT"];this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof firstDayOfWeek=="number"?firstDayOfWeek:Calendar._FD;this.showsOtherMonths=false;this.dateStr=dateStr;this.todayDateStr=todayDateStr;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined"){Calendar._SDN_len=3}var ar=new Array();for(var i=8;i>0;){ar[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len)}Calendar._SDN=ar;if(typeof Calendar._SMN_len=="undefined"){Calendar._SMN_len=3}ar=new Array();for(var i=12;i>0;){ar[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len)}Calendar._SMN=ar}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_ie6=(Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent));Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(el){var coords=jQuery(el).offset();coords.x=coords.left;coords.y=coords.top;return coords};Calendar.isRelated=function(el,evt){var related=evt.relatedTarget;if(!related){var type=evt.type;if(type=="mouseover"){related=evt.fromElement}else{if(type=="mouseout"){related=evt.toElement}}}while(related){if(related==el){return true}related=related.parentNode}return false};Calendar.removeClass=function(el,className){if(!(el&&el.className)){return }var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;){if(cls[--i]!=className){ar[ar.length]=cls[i]}}el.className=ar.join(" ")};Calendar.addClass=function(el,className){Calendar.removeClass(el,className);el.className+=" "+className};Calendar.getElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.currentTarget;while(f.nodeType!=1||/^div$/i.test(f.tagName)){f=f.parentNode}return f};Calendar.getTargetElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.target;while(f.nodeType!=1){f=f.parentNode}return f};Calendar.stopEvent=function(ev){if(!ev){ev=window.event}if(ev.stopPropagation){ev.preventDefault();ev.stopPropagation()}else{ev.cancelBubble=true;ev.returnValue=false}return false};Calendar.addEvent=function(el,evname,func){if(el.attachEvent){el.attachEvent("on"+evname,func)}else{if(el.addEventListener){el.addEventListener(evname,func,true)}else{el["on"+evname]=func}}};Calendar.removeEvent=function(el,evname,func){if(el.detachEvent){el.detachEvent("on"+evname,func)}else{if(el.removeEventListener){el.removeEventListener(evname,func,true)}else{el["on"+evname]=null}}};Calendar.createElement=function(type,parent){var el=null;if(document.createElementNS){el=document.createElementNS("http://www.w3.org/1999/xhtml",type)}else{el=document.createElement(type)}if(typeof parent!="undefined"){parent.appendChild(el)}return el};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true)}}};Calendar.findMonth=function(el){if(typeof el.month!="undefined"){return el}else{if(typeof el.parentNode.month!="undefined"){return el.parentNode}}return null};Calendar.findYear=function(el){if(typeof el.year!="undefined"){return el}else{if(typeof el.parentNode.year!="undefined"){return el.parentNode}}return null};Calendar.showMonthsCombo=function(){var cal=Calendar._C;if(!cal){return false}var cal=cal;var cd=cal.activeDiv;var mc=cal.monthsCombo;if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite")}if(cal.activeMonth){Calendar.removeClass(cal.activeMonth,"active")}var mon=cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];Calendar.addClass(mon,"active");cal.activeMonth=mon;var s=mc.style;s.display="block";if(cd.navtype<0){s.left=cd.offsetLeft+"px"}else{var mcw=mc.offsetWidth;if(typeof mcw=="undefined"){mcw=50}s.left=(cd.offsetLeft+cd.offsetWidth-mcw)+"px"}s.top=(cd.offsetTop+cd.offsetHeight)+"px"};Calendar.showYearsCombo=function(fwd){var cal=Calendar._C;if(!cal){return false}var cal=cal;var cd=cal.activeDiv;var yc=cal.yearsCombo;if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite")}if(cal.activeYear){Calendar.removeClass(cal.activeYear,"active")}cal.activeYear=null;var Y=cal.date.getFullYear()+(fwd?1:-1);var yr=yc.firstChild;var show=false;for(var i=12;i>0;--i){if(Y>=cal.minYear&&Y<=cal.maxYear){yr.innerHTML=Y;yr.year=Y;yr.style.display="block";show=true}else{yr.style.display="none"}yr=yr.nextSibling;Y+=fwd?cal.yearStep:-cal.yearStep}if(show){var s=yc.style;s.display="block";if(cd.navtype<0){s.left=cd.offsetLeft+"px"}else{var ycw=yc.offsetWidth;if(typeof ycw=="undefined"){ycw=50}s.left=(cd.offsetLeft+cd.offsetWidth-ycw)+"px"}s.top=(cd.offsetTop+cd.offsetHeight)+"px"}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false}if(cal.timeout){clearTimeout(cal.timeout)}var el=cal.activeDiv;if(!el){return false}var target=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,"active");if(target==el||target.parentNode==el){Calendar.cellClick(el,ev)}var mon=Calendar.findMonth(target);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler()}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler()}}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev)}};Calendar.tableMouseOver=function(ev){var cal=Calendar._C;if(!cal){return }var el=cal.activeDiv;var target=Calendar.getTargetElement(ev);if(target==el||target.parentNode==el){Calendar.addClass(el,"hilite active");Calendar.addClass(el.parentNode,"rowhilite")}else{if(typeof el.navtype=="undefined"||(el.navtype!=50&&(el.navtype==0||Math.abs(el.navtype)>2))){Calendar.removeClass(el,"active")}Calendar.removeClass(el,"hilite");Calendar.removeClass(el.parentNode,"rowhilite")}ev||(ev=window.event);if(el.navtype==50&&target!=el){var pos=Calendar.getAbsolutePos(el);var w=el.offsetWidth;var x=ev.clientX;var dx;var decrease=true;if(x>pos.x+w){dx=x-pos.x-w;decrease=false}else{dx=pos.x-x}if(dx<0){dx=0}var range=el._range;var current=el._current;var count=Math.floor(dx/10)%range.length;for(var i=range.length;--i>=0;){if(range[i]==current){break}}while(count-->0){if(decrease){if(--i<0){i=range.length-1}}else{if(++i>=range.length){i=0}}}var newval=range[i];el.innerHTML=newval;cal.onUpdateTime()}var mon=Calendar.findMonth(target);if(mon){if(mon.month!=cal.date.getMonth()){if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite")}Calendar.addClass(mon,"hilite");cal.hilitedMonth=mon}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite")}}}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite")}var year=Calendar.findYear(target);if(year){if(year.year!=cal.date.getFullYear()){if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite")}Calendar.addClass(year,"hilite");cal.hilitedYear=year}else{if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite")}}}else{if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite")}}}return Calendar.stopEvent(ev)};Calendar.tableMouseDown=function(ev){if(Calendar.getTargetElement(ev)==Calendar.getElement(ev)){return Calendar.stopEvent(ev)}};Calendar.calDragIt=function(ev){var cal=Calendar._C;if(!(cal&&cal.dragging)){return false}var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft}else{posX=ev.pageX;posY=ev.pageY}var st=cal.element.style;st.left=(posX-cal.xOffs)+"px";st.top=(posY-cal.yOffs)+"px";return Calendar.stopEvent(ev)};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false}cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev)}};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false}var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300){with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver)}else{addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver)}addClass(el,"hilite active");addEvent(document,"mouseup",tableMouseUp)}}else{if(cal.isPopup){cal._dragStart(ev)}}if(el.navtype==-1||el.navtype==1){if(cal.timeout){clearTimeout(cal.timeout)}cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)}else{if(el.navtype==-2||el.navtype==2){if(cal.timeout){clearTimeout(cal.timeout)}cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)}else{cal.timeout=null}}return Calendar.stopEvent(ev)};Calendar.dayMouseDblClick=function(ev){Calendar.cellClick(Calendar.getElement(ev),ev||window.event);if(Calendar.is_ie){document.selection.empty()}};Calendar.dayMouseOver=function(ev){var el=Calendar.getElement(ev);if(Calendar.isRelated(el,ev)||Calendar._C||el.disabled){return false}if(el.ttip){if(el.ttip.substr(0,1)=="_"){el.ttip=el.caldate.print(el.calendar.ttDateFormat)+el.ttip.substr(1)}el.calendar.tooltips.innerHTML=el.ttip}if(el.navtype!=300){Calendar.addClass(el,"hilite");if(el.caldate){Calendar.addClass(el.parentNode,"rowhilite")}}return Calendar.stopEvent(ev)};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled){return false}removeClass(el,"hilite");if(el.caldate){removeClass(el.parentNode,"rowhilite")}if(el.calendar){el.calendar.tooltips.innerHTML=_TT["SEL_DATE"]}return stopEvent(ev)}};Calendar.cellClick=function(el,ev){var cal=el.calendar;var closing=false;var newdate=false;var date=null;if(typeof el.navtype=="undefined"){if(cal.currentDateEl){Calendar.removeClass(cal.currentDateEl,"selected");Calendar.addClass(el,"selected");closing=(cal.currentDateEl==el);if(!closing){cal.currentDateEl=el}}cal.date.setDateOnly(el.caldate);date=cal.date;var other_month=!(cal.dateClicked=!el.otherMonth);if(!other_month&&!cal.currentDateEl){cal._toggleMultipleDate(new Date(date))}else{newdate=!el.disabled}if(other_month){cal._init(cal.firstDayOfWeek,date)}}else{if(el.navtype==200){Calendar.removeClass(el,"hilite");cal.callCloseHandler();return }date=new Date(cal.date);if(el.navtype==0){if(cal.todayDateStr){date=new Date(cal.todayDateStr)}else{date.setDateOnly(new Date())}}cal.dateClicked=false;var year=date.getFullYear();var mon=date.getMonth();function setMonth(m){var day=date.getDate();var max=date.getMonthDays(m);if(day>max){date.setDate(max)}date.setMonth(m)}switch(el.navtype){case 400:Calendar.removeClass(el,"hilite");var text=Calendar._TT["ABOUT"];if(typeof text!="undefined"){text+=cal.showsTime?Calendar._TT["ABOUT_TIME"]:""}else{text="Help and about box text is not translated into this language.\n"+"If you know this language and you feel generous please update\n"+'the corresponding file in "lang" subdir to match calendar-en.js\n'+"and send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\n"+"Thank you!\n"+"http://dynarch.com/mishoo/calendar.epl\n"}alert(text);return ;case -2:if(year>cal.minYear){date.setFullYear(year-1)}break;case -1:if(mon>0){setMonth(mon-1)}else{if(year-->cal.minYear){date.setFullYear(year);setMonth(11)}}break;case 1:if(mon<11){setMonth(mon+1)}else{if(year<cal.maxYear){date.setFullYear(year+1);setMonth(0)}}break;case 2:if(year<cal.maxYear){date.setFullYear(year+1)}break;case 100:cal.setFirstDayOfWeek(el.fdow);return ;case 50:var range=el._range;var current=el.innerHTML;for(var i=range.length;--i>=0;){if(range[i]==current){break}}if(ev&&ev.shiftKey){if(--i<0){i=range.length-1}}else{if(++i>=range.length){i=0}}var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();return ;case 0:if((typeof cal.getDateStatus=="function")&&cal.getDateStatus(date,date.getFullYear(),date.getMonth(),date.getDate())){return false}break}if(!date.equalsTo(cal.date)){cal.setDate(date);newdate=true}else{if(el.navtype==0){newdate=closing=true}}}if(newdate){ev&&cal.callHandler()}if(closing){Calendar.removeClass(el,"hilite");ev&&cal.callCloseHandler()}};Calendar.prototype.create=function(_par){var parent=null;if(!_par){parent=document.getElementsByTagName("body")[0];this.isPopup=true}else{parent=_par;this.isPopup=false}if(this.dateStr){this.date=new Date(this.dateStr)}if(!this.date||isNaN(this.date)){this.date=new Date()}var table=Calendar.createElement("table");this.table=table;table.cellSpacing=0;table.cellPadding=0;table.calendar=this;Calendar.addEvent(table,"mousedown",Calendar.tableMouseDown);var div=Calendar.createElement("div");this.element=div;div.className="calendar";if(this.isPopup){div.style.position="absolute";div.style.display="none"}div.appendChild(table);var thead=Calendar.createElement("thead",table);var cell=null;var row=null;var cal=this;var hh=function(text,cs,navtype){cell=Calendar.createElement("td",row);cell.colSpan=cs;cell.className="button";if(navtype!=0&&Math.abs(navtype)<=2){cell.className+=" nav"}Calendar._add_evs(cell);cell.calendar=cal;cell.navtype=navtype;cell.innerHTML="<div unselectable='on'>"+text+"</div>";return cell};row=Calendar.createElement("tr",thead);var title_length=6;(this.isPopup)&&--title_length;(this.weekNumbers)&&++title_length;hh("?",1,400).ttip=Calendar._TT["INFO"];this.title=hh("",title_length,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT["DRAG_TO_MOVE"];this.title.style.cursor="move";hh("&#x00d7;",1,200).ttip=Calendar._TT["CLOSE"]}row=Calendar.createElement("tr",thead);row.className="headrow";this._nav_py=hh("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT["PREV_YEAR"];this._nav_pm=hh("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT["PREV_MONTH"];this._nav_now=hh(Calendar._TT["TODAY"],this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT["GO_TODAY"];this._nav_nm=hh("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT["NEXT_MONTH"];this._nav_ny=hh("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT["NEXT_YEAR"];row=Calendar.createElement("tr",thead);row.className="daynames";if(this.weekNumbers){cell=Calendar.createElement("td",row);cell.className="name wn";cell.innerHTML=Calendar._TT["WK"]}for(var i=7;i>0;--i){cell=Calendar.createElement("td",row);if(!i){cell.navtype=100;cell.calendar=this;Calendar._add_evs(cell)}}this.firstdayname=(this.weekNumbers)?row.firstChild.nextSibling:row.firstChild;this._displayWeekdays();var tbody=Calendar.createElement("tbody",table);this.tbody=tbody;for(i=6;i>0;--i){row=Calendar.createElement("tr",tbody);if(this.weekNumbers){cell=Calendar.createElement("td",row)}for(var j=7;j>0;--j){cell=Calendar.createElement("td",row);cell.calendar=this;Calendar._add_evs(cell)}}if(this.showsTime){row=Calendar.createElement("tr",tbody);row.className="time";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;cell.innerHTML=Calendar._TT["TIME"]||"&nbsp;";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=this.weekNumbers?4:3;(function(){function makeTimePart(className,init,range_start,range_end){var part=Calendar.createElement("span",cell);part.className=className;part.innerHTML=init;part.calendar=cal;part.ttip=Calendar._TT["TIME_PART"];part.navtype=50;part._range=[];if(typeof range_start!="number"){part._range=range_start}else{for(var i=range_start;i<=range_end;++i){var txt;if(i<10&&range_end>=10){txt="0"+i}else{txt=""+i}part._range[part._range.length]=txt}}Calendar._add_evs(part);return part}var hrs=cal.date.getHours();var mins=cal.date.getMinutes();var t12=!cal.time24;var pm=(hrs>12);if(t12&&pm){hrs-=12}var H=makeTimePart("hour",hrs,t12?1:0,t12?12:23);var span=Calendar.createElement("span",cell);span.innerHTML=":";span.className="colon";var M=makeTimePart("minute",mins,0,59);var AP=null;cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;if(t12){AP=makeTimePart("ampm",pm?Calendar._TT["PM"]:Calendar._TT["AM"],[Calendar._TT["am"],Calendar._TT["pm"]])}else{cell.innerHTML="&nbsp;"}cal.onSetTime=function(){var pm,hrs=this.date.getHours(),mins=this.date.getMinutes();if(t12){pm=(hrs>=12);if(pm){hrs-=12}if(hrs==0){hrs=12}AP.innerHTML=pm?Calendar._TT["pm"]:Calendar._TT["am"]}H.innerHTML=(hrs<10)?("0"+hrs):hrs;M.innerHTML=(mins<10)?("0"+mins):mins};cal.onUpdateTime=function(){var date=this.date;var h=parseInt(H.innerHTML,10);if(t12){if(new RegExp(Calendar._TT["pm"],"i").test(AP.innerHTML)&&h<12){h+=12}else{if(new RegExp(Calendar._TT["am"],"i").test(AP.innerHTML)&&h==12){h=0}}}var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();date.setHours(h);date.setMinutes(parseInt(M.innerHTML,10));date.setFullYear(y);date.setMonth(m);date.setDate(d);this.dateClicked=false;this.callHandler()}})()}else{this.onSetTime=this.onUpdateTime=function(){}}var tfoot=Calendar.createElement("tfoot",table);row=Calendar.createElement("tr",tfoot);row.className="footrow";cell=hh(Calendar._TT["SEL_DATE"],this.weekNumbers?8:7,300);cell.className="ttip";if(this.isPopup){cell.ttip=Calendar._TT["DRAG_TO_MOVE"];cell.style.cursor="move"}this.tooltips=cell;div=Calendar.createElement("div",this.element);this.monthsCombo=div;div.className="combo";for(i=0;i<Calendar._MN.length;++i){var mn=Calendar.createElement("div");mn.className=Calendar.is_ie?"label-IEfix":"label";mn.month=i;mn.innerHTML=Calendar._SMN[i];div.appendChild(mn)}div=Calendar.createElement("div",this.element);this.yearsCombo=div;div.className="combo";for(i=12;i>0;--i){var yr=Calendar.createElement("div");yr.className=Calendar.is_ie?"label-IEfix":"label";div.appendChild(yr)}this._init(this.firstDayOfWeek,this.date);parent.appendChild(this.element);Calendar.addEvent(this.element,"mousedown",function(ev){ev.preventDefault?ev.preventDefault():ev.returnValue=false})};Calendar._upkeyEvent=function(e){if(e.keyCode===27){window.setTimeout(function(){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple){return false}else{cal.callCloseHandler()}},0)}};Calendar._keyEvent=function(ev){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple){return false}var act=(Calendar.is_ie||ev.type=="keydown"),K=ev.keyCode;if(ev.ctrlKey){switch(K){case 37:act&&Calendar.cellClick(cal._nav_pm);break;case 38:act&&Calendar.cellClick(cal._nav_py);break;case 39:act&&Calendar.cellClick(cal._nav_nm);break;case 40:act&&Calendar.cellClick(cal._nav_ny);break}}else{switch(K){case 32:Calendar.cellClick(cal._nav_now);break;case 37:case 38:case 39:case 40:if(act){var prev,x,y,ne,el,step;prev=K==37||K==38;step=(K==37||K==39)?1:7;function setVars(){el=cal.currentDateEl;var p=el.pos;x=p&15;y=p>>4;ne=cal.ar_days[y][x]}setVars();function prevMonth(){var date=new Date(cal.date);date.setDate(date.getDate()-step);cal.setDate(date)}function nextMonth(){var date=new Date(cal.date);date.setDate(date.getDate()+step);cal.setDate(date)}while(1){switch(K){case 37:if(--x>=0){ne=cal.ar_days[y][x]}else{x=6;K=38;continue}break;case 38:if(--y>=0){ne=cal.ar_days[y][x]}else{prevMonth();setVars()}break;case 39:if(++x<7){ne=cal.ar_days[y][x]}else{x=0;K=40;continue}break;case 40:if(++y<cal.ar_days.length){ne=cal.ar_days[y][x]}else{nextMonth();setVars()}break}break}if(ne){if(!ne.disabled){Calendar.cellClick(ne)}else{if(prev){prevMonth()}else{nextMonth()}}}}break;case 13:if(act){Calendar.cellClick(cal.currentDateEl,ev)}break}}return Calendar.stopEvent(ev)};Calendar.prototype._init=function(firstDayOfWeek,seedDate){var date=new Date(seedDate);date.setHours(13);var today=new Date(),TY=today.getFullYear(),TM=today.getMonth(),TD=today.getDate();this.table.style.visibility="hidden";var year=date.getFullYear();if(year<this.minYear){year=this.minYear;date.setFullYear(year)}else{if(year>this.maxYear){year=this.maxYear;date.setFullYear(year)}}this.firstDayOfWeek=firstDayOfWeek;var month=date.getMonth();var mday=date.getDate();var no_days=date.getMonthDays();date.setDate(1);var day1=(date.getDay()-this.firstDayOfWeek)%7;if(day1<0){day1+=7}date.setDate(-day1);date.setDate(date.getDate()+1);var row=this.tbody.firstChild;var MN=Calendar._SMN[month];var ar_days=this.ar_days=new Array();var weekend=Calendar._TT["WEEKEND"];var dates=this.multiple?(this.datesCells={}):null;for(var i=0;i<6;++i,row=row.nextSibling){var cell=row.firstChild;if(this.weekNumbers){cell.className="day wn";var monthStartDate=date;if(month==0&&i==0&&Date.useISO8601WeekNumbers==false){monthStartDate=new Date(year,month,1)}cell.innerHTML=monthStartDate.getWeekNumber(this.firstDayOfWeek);cell=cell.nextSibling}row.className="daysrow";var hasdays=false,iday,dpos=ar_days[i]=[];for(var j=0;j<7;++j,cell=cell.nextSibling,date.setDate(iday+1)){iday=date.getDate();var wday=date.getDay();cell.className="day day-"+iday;cell.pos=i<<4|j;dpos[j]=cell;var current_month=(date.getMonth()==month);if(!current_month){if(this.showsOtherMonths){cell.className+=" othermonth";cell.otherMonth=true}else{cell.className="emptycell";cell.innerHTML="&nbsp;";cell.disabled=true;continue}}else{cell.otherMonth=false;hasdays=true}cell.disabled=false;cell.innerHTML=this.getDateText?this.getDateText(date,iday):iday;if(dates){dates[date.print("%Y%m%d")]=cell}if(this.getDateStatus){var status=this.getDateStatus(date,year,month,iday);if(this.getDateToolTip){var toolTip=this.getDateToolTip(date,year,month,iday);if(toolTip){cell.title=toolTip}}if(status===true){cell.className+=" disabled";cell.disabled=true}else{if(/disabled/i.test(status)){cell.disabled=true}cell.className+=" "+status}}if(!cell.disabled){cell.caldate=new Date(date);cell.ttip="_";if(!this.multiple&&current_month&&iday==mday&&this.hiliteToday){cell.className+=" selected";this.currentDateEl=cell}if(date.getFullYear()==TY&&date.getMonth()==TM&&iday==TD){cell.className+=" today";cell.ttip+=Calendar._TT["PART_TODAY"]}if(weekend.indexOf(wday.toString())!=-1){cell.className+=cell.otherMonth?" oweekend":" weekend"}}}if(!(hasdays||this.showsOtherMonths)){row.className="emptyrow"}}this.date=new Date(seedDate);this.onSetTime();this.title.innerHTML=Calendar._MN[month]+", "+year;this.table.style.visibility="visible";this._initMultipleDates()};Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var i in this.multiple){var cell=this.datesCells[i];var d=this.multiple[i];if(!d){continue}if(cell){cell.className+=" selected"}}}};Calendar.prototype._toggleMultipleDate=function(date){if(this.multiple){var ds=date.print("%Y%m%d");var cell=this.datesCells[ds];if(cell){var d=this.multiple[ds];if(!d){Calendar.addClass(cell,"selected");this.multiple[ds]=date}else{Calendar.removeClass(cell,"selected");delete this.multiple[ds]}}}};Calendar.prototype.setDateToolTipHandler=function(unaryFunction){this.getDateToolTip=unaryFunction};Calendar.prototype.setDate=function(date){if(!date.equalsTo(this.date)){this._init(this.firstDayOfWeek,date)}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(firstDayOfWeek){this._init(firstDayOfWeek,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(unaryFunction){this.getDateStatus=unaryFunction};Calendar.prototype.setRange=function(a,z){this.minYear=a;this.maxYear=z};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat))}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this)}};Calendar.prototype.destroy=function(){var el=this.element.parentNode;el.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(new_parent){var el=this.element;el.parentNode.removeChild(el);new_parent.appendChild(el)};Calendar._checkCalendar=function(ev){var calendar=window._dynarch_popupCalendar;if(!calendar){return false}var el=Calendar.is_ie?Calendar.getElement(ev):Calendar.getTargetElement(ev);for(;el!=null&&el!=calendar.element;el=el.parentNode){}if(el==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(ev)}};Calendar.prototype.show=function(){if(this.params.inputField.disabled){return }var rows=this.table.getElementsByTagName("tr");for(var i=rows.length;i>0;){var row=rows[--i];Calendar.removeClass(row,"rowhilite");var cells=row.getElementsByTagName("td");for(var j=cells.length;j>0;){var cell=cells[--j];Calendar.removeClass(cell,"hilite");Calendar.removeClass(cell,"active")}}Calendar.current=this;this.element.style.display="block";this.element.className+=" active";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keyup",Calendar._upkeyEvent);Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)}};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent);Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)}Calendar.current=null;this.element.style.display="none";this.element.className=this.element.className.replace(/active/gi,"");this.hidden=true};Calendar.prototype.showAt=function(x,y){var s=this.element.style;s.left=x+"px";s.top=y+"px";this.show()};Calendar.prototype.showAtElement=function(el,opts){var self=this;var p=Calendar.getAbsolutePos(el);if(!opts||typeof opts!="string"){this.showAt(p.x,p.y+el.offsetHeight);return true}function fixPosition(box){if(box.x<0){box.x=0}if(box.y<0){box.y=0}var cp=document.createElement("div");var s=cp.style;s.position="absolute";s.right=s.bottom=s.width=s.height="0px";document.body.appendChild(cp);var br=Calendar.getAbsolutePos(cp);document.body.removeChild(cp);br.y+=jQuery(window).scrollTop();br.x+=jQuery(window).scrollLeft();var tmp=box.x+box.width-br.x;if(tmp>0){box.x-=tmp}tmp=box.y+box.height-br.y;if(tmp>0){box.y-=tmp}}this.element.style.display="block";Calendar.continuation_for_the_khtml_browser=function(){var w=jQuery(self.element).outerWidth();var h=jQuery(self.element).outerHeight();self.element.style.display="none";var valign=opts.substr(0,1);var halign="l";if(opts.length>1){halign=opts.substr(1,1)}switch(valign){case"T":p.y-=h;break;case"B":p.y+=jQuery(el).outerHeight();break;case"C":p.y+=(jQuery(el).outerHeight()-h)/2;break;case"t":p.y+=jQuery(el).outerHeight()-h;break;case"b":break}switch(halign){case"L":p.x-=w;break;case"R":p.x+=jQuery(el).outerWidth();break;case"C":p.x+=(jQuery(el).outerWidth()-w)/2;break;case"l":p.x+=jQuery(el).outerWidth()-w;break;case"r":break}p.width=w;p.height=h+40;self.monthsCombo.style.display="none";fixPosition(p);self.showAt(p.x,p.y)};Calendar.continuation_for_the_khtml_browser()};Calendar.prototype.setDateFormat=function(str){this.dateFormat=str};Calendar.prototype.setTtDateFormat=function(str){this.ttDateFormat=str};Calendar.prototype.parseDate=function(str,fmt){if(!fmt){fmt=this.dateFormat}this.setDate(Date.parseDate(str,fmt))};Calendar.prototype._displayWeekdays=function(){var fdow=this.firstDayOfWeek;var cell=this.firstdayname;var weekend=Calendar._TT["WEEKEND"];for(var i=0;i<7;++i){cell.className="day name";var realday=(i+fdow)%7;if(i){cell.ttip=Calendar._TT["DAY_FIRST"].replace("%s",Calendar._DN[realday]);cell.navtype=100;cell.calendar=this;cell.fdow=realday;Calendar._add_evs(cell)}if(weekend.indexOf(realday.toString())!=-1){Calendar.addClass(cell,"weekend")}cell.innerHTML=Calendar._SDN[(i+fdow)%7];cell=cell.nextSibling}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};Calendar.prototype._dragStart=function(ev){if(this.dragging){return }this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX}var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd)}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date._multisplit=function(s,seps){if(s==null){return null}if(seps==null){seps=""}var arr=[];var len=s.length;var token="";var inWord=false;for(i=0;i<len;i++){var c=s.charAt(i);if(seps.indexOf(c)==-1){inWord=true;token+=c}else{if(inWord){arr[arr.length]=token;token="";inWord=false}}}if(token.length>0){arr[arr.length]=token}if(arr.length==0){arr[arr.length]=""}return arr};Date._parseNonDateFormatChars=function(s){var magicChars="aAbBCdeHIJklmMnpPRSstUWVuwyY%";var nonMagicChars="";var len=s.length;var inMagic=false;for(i=0;i<len;i++){var c=s.charAt(i);if(c=="%"){var peekc="";if(i+1<len){peekc=s.charAt(i+1)}i=i+1;if(peekc.length>0&&magicChars.indexOf(peekc)!=-1){continue}else{if(nonMagicChars.indexOf(c)==-1){nonMagicChars+=c}if(peekc.length>0&&nonMagicChars.indexOf(peekc)==-1){nonMagicChars+=peekc}}}else{if(nonMagicChars.indexOf(c)==-1){nonMagicChars+=c}}}return nonMagicChars};Date.parseDate=function(str,fmt){var today=new Date();var y=0;var m=-1;var d=0;var seps=Date._parseNonDateFormatChars(fmt);var a=Date._multisplit(str,seps);var b=fmt.match(/%./g);var i=0,j=0;var hr=0;var min=0;for(i=0;i<a.length;++i){if(!a[i]){continue}switch(b[i]){case"%d":case"%e":d=parseInt(a[i],10);break;case"%m":m=parseInt(a[i],10)-1;break;case"%Y":case"%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case"%b":case"%B":var monthName=a[i].toLowerCase();var found=false;if(b[i]=="%b"){for(j=0;j<12;++j){if(Calendar._SMN[j].substr(0,monthName.length).toLowerCase()==monthName){m=j;found=true;break}}}if(!found){for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,monthName.length).toLowerCase()==monthName){m=j;break}}}break;case"%H":case"%I":case"%k":case"%l":hr=parseInt(a[i],10);break;case"%P":case"%p":if(/pm/i.test(a[i])&&hr<12){hr+=12}else{if(/am/i.test(a[i])&&hr>=12){hr-=12}}break;case"%M":min=parseInt(a[i],10);break;case"%R":var hrMinString=a[i];var hrMinSeparator=hrMinString.indexOf(":");var hrString=hrMinString.substring(0,hrMinSeparator);var minString=hrMinSeparator==-1?0:hrMinString.substring(hrMinSeparator+1);hr=parseInt(hrString,10);min=parseInt(minString,10);break}}if(isNaN(y)){y=today.getFullYear()}if(isNaN(m)){m=today.getMonth()}if(isNaN(d)){d=today.getDate()}if(isNaN(hr)){hr=today.getHours()}if(isNaN(min)){min=today.getMinutes()}if(y!=0&&m!=-1&&d!=0){return new Date(y,m,d,hr,min,0)}y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;break}}if(t!=-1){if(m!=-1){d=m+1}m=t}}else{if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1}else{if(parseInt(a[i],10)>31&&y==0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000)}else{if(d==0){d=a[i]}}}}}if(y==0){y=today.getFullYear()}if(m!=-1&&d!=0){return new Date(y,m,d,hr,min,0)}return today};Date.prototype.getMonthDays=function(month){var year=this.getFullYear();if(typeof month=="undefined"){month=this.getMonth()}if(((0==(year%4))&&((0!=(year%100))||(0==(year%400))))&&month==1){return 29}else{return Date._MD[month]}};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0);var then=new Date(this.getFullYear(),0,0,13,0,0);var time=now-then;return Math.floor(time/Date.DAY)};Date.prototype.getWeekNumber=function(startOfWeek){if(Date.useISO8601WeekNumbers){return this.getISO8601WeekNumber()}else{return this.getSimpleWeekNumber(startOfWeek)}};Date.prototype.getISO8601WeekNumber=function(){function gregdaynumber(year,month,day){y=year;m=month;if(month<3){y=y-1}if(month<3){m=m+12}return Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+day-62}function isocalendar1(date){year=date.getFullYear();month=date.getMonth();day=date.getDate();wday=date.getDay();weekday=((wday+6)%7)+1;isoyear=year;d0=gregdaynumber(year,1,0);weekday0=((d0+4)%7)+1;d=gregdaynumber(year,month+1,day);isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7);if((month==11)&&((day-weekday)>27)){isoweeknr=1;isoyear=isoyear+1}if((month==0)&&((weekday-day)>3)){d0=gregdaynumber(year-1,1,0);weekday0=((d0+4)%7)+1;isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7);isoyear=isoyear-1}return isoweeknr}return isocalendar1(this)};Date.prototype.getSimpleWeekNumber=function(startOfWeek){function OddWkNo1(D,d1,d2){var Yr=D.getFullYear(),Jan1=new Date(Yr,0,1),Q;Q=Math.round((D-Jan1)/86400000);if(d1!=null){Q-=(7+d1-Jan1.getDay())%7}if(d2!=null){Q+=d2}return[Yr,1+Q/7|0,1+(7+Q)%7]}return OddWkNo1(this,startOfWeek?startOfWeek:6,6)[1]};Date.prototype.equalsTo=function(date){return((this.getFullYear()==date.getFullYear())&&(this.getMonth()==date.getMonth())&&(this.getDate()==date.getDate())&&(this.getHours()==date.getHours())&&(this.getMinutes()==date.getMinutes()))};Date.prototype.setDateOnly=function(date){var tmp=new Date(date);this.setDate(1);this.setFullYear(tmp.getFullYear());this.setMonth(tmp.getMonth());this.setDate(tmp.getDate())};Date.prototype.print=function(str){var m=this.getMonth();var d=this.getDate();var y=this.getFullYear();var wn=this.getWeekNumber();var w=this.getDay();var s={};var hr=this.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=this.getDayOfYear();if(ir==0){ir=12}var min=this.getMinutes();var sec=this.getSeconds();s["%a"]=Calendar._SDN[w];s["%A"]=Calendar._DN[w];s["%b"]=Calendar._SMN[m];s["%B"]=Calendar._MN[m];s["%C"]=1+Math.floor(y/100);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(hr<10)?("0"+hr):hr;s["%I"]=(ir<10)?("0"+ir):ir;s["%j"]=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;s["%k"]=hr;s["%l"]=ir;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(min<10)?("0"+min):min;s["%n"]="\n";s["%p"]=pm?Calendar._TT["PM"]:Calendar._TT["AM"];s["%P"]=pm?Calendar._TT["PM"]:Calendar._TT["AM"];s["%R"]=s["%k"]+":"+s["%M"];s["%s"]=Math.floor(this.getTime()/1000);s["%S"]=(sec<10)?("0"+sec):sec;s["%t"]="\t";s["%U"]=s["%W"]=s["%V"]=(wn<10)?("0"+wn):wn;s["%u"]=w+1;s["%w"]=w;s["%y"]=(""+y).slice(-2);s["%Y"]=y;s["%%"]="%";var re=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml){return str.replace(re,function(par){return s[par]||par})}var a=str.match(re);for(var i=0;i<a.length;i++){var tmp=s[a[i]];if(tmp){re=new RegExp(a[i],"g");str=str.replace(re,tmp)}}return str};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(y){var d=new Date(this);d.__msh_oldSetFullYear(y);if(d.getMonth()!=this.getMonth()){this.setDate(28)}this.__msh_oldSetFullYear(y)};window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.setup.js' */
Calendar.setup=function(params){params=params||{};function param_default(pname,def){if(typeof params[pname]=="undefined"){params[pname]=def}}param_default("inputField",null);param_default("context",null);param_default("displayArea",null);param_default("button",null);param_default("eventName","click");param_default("ifFormat","%Y/%m/%d");param_default("daFormat","%Y/%m/%d");param_default("singleClick",true);param_default("disableFunc",null);param_default("dateStatusFunc",params["disableFunc"]);param_default("dateText",null);param_default("firstDay",null);param_default("align","Br");param_default("range",[1900,2999]);param_default("weekNumbers",true);param_default("useISO8601WeekNumbers",false);param_default("flat",null);param_default("flatCallback",null);param_default("onSelect",null);param_default("onClose",null);param_default("onUpdate",null);param_default("date",null);param_default("todayDate",null);param_default("showsTime",false);param_default("timeFormat","24");param_default("electric",true);param_default("step",1);param_default("position",null);param_default("cache",false);param_default("showOthers",false);param_default("multiple",null);var i,item;var unwrap=["context","inputField","button","displayArea"];for(i in unwrap){item=unwrap[i];if(params[item] instanceof jQuery){params[item]=params[item][0]}}var tmp=["inputField","displayArea","button"];for(i in tmp){item=tmp[i];if(typeof params[item]==="string"){var escapedSelector="#"+params[item].escapejQuerySelector();var el=jQuery(params.context||document.body).find(escapedSelector);params[item]=el[0]}}if(!(params.flat||params.multiple||params.inputField||params.displayArea||params.button)){AJS.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}if(params.firstDay&&params.firstDay!==null){params.firstDay=+params.firstDay}function onSelect(cal){var p=cal.params;var update=(cal.dateClicked||p.electric);if(update&&p.inputField){p.inputField.value=cal.date.print(p.ifFormat);jQuery(p.inputField).change()}if(update&&p.displayArea){p.displayArea.innerHTML=cal.date.print(p.daFormat)}if(update&&typeof p.onUpdate=="function"){p.onUpdate(cal)}if(update&&p.flat){if(typeof p.flatCallback=="function"){p.flatCallback(cal)}}if(p.singleClick==="true"){p.singleClick=true}else{if(p.singleClick==="false"){p.singleClick=false}}if(update&&p.singleClick&&cal.dateClicked){cal.callCloseHandler()}}if(params.flat!=null){if(typeof params.flat=="string"){params.flat=document.getElementById(params.flat)}if(!params.flat){AJS.log("Calendar.setup:\n  Flat specified but can't find parent.");return false}var cal=new Calendar(params.firstDay,params.date,params.todayDate,params.onSelect||onSelect);cal.showsOtherMonths=params.showOthers;cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.params=params;cal.weekNumbers=params.weekNumbers;cal.setRange(params.range[0],params.range[1]);cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;if(params.ifFormat){cal.setDateFormat(params.ifFormat)}if(params.inputField&&typeof params.inputField.value=="string"){cal.parseDate(params.inputField.value)}cal.create(params.flat);cal.show();return false}var triggerEl=params.button||params.displayArea||params.inputField;jQuery(triggerEl).bind(params.eventName,function(e){e.preventDefault();createCalendar()});if(params.inputField){enhanceInputField()}function createCalendar(){if(Calendar._UNSUPPORTED===true){alert("The JIRA Calendar does not currently support your language.");return }var dateEl=params.inputField||params.displayArea;var dateFmt=params.inputField?params.ifFormat:params.daFormat;var mustCreate=false;var cal=window.calendar;if(cal){cal.hide()}if(dateEl){if(dateEl.value||dateEl.innerHTML){params.date=Date.parseDate(dateEl.value||dateEl.innerHTML,dateFmt)}}if(!(cal&&params.cache)){window.calendar=cal=new Calendar(params.firstDay,params.date,params.todayDate,params.onSelect||onSelect,params.onClose||function(cal){cal.hide()});cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.weekNumbers=params.weekNumbers;Date.useISO8601WeekNumbers=params.useISO8601WeekNumbers;if(params.useISO8601WeekNumbers){cal.firstDayOfWeek=1}mustCreate=true}else{if(params.date){cal.setDate(params.date)}cal.hide()}if(params.multiple){cal.multiple={};for(var i=params.multiple.length;--i>=0;){var d=params.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d}}cal.showsOtherMonths=params.showOthers;cal.yearStep=params.step;cal.setRange(params.range[0],params.range[1]);cal.params=params;cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;cal.setDateFormat(dateFmt);if(mustCreate){cal.create()}cal.refresh();if(!params.position){cal.showAtElement(params.button||params.displayArea||params.inputField,params.align)}else{cal.showAt(params.position[0],params.position[1])}return false}function enhanceInputField(){var $inputField=jQuery(params.inputField);if(params.button){jQuery(params.button).mousedown(function(e){e.preventDefault();if(!$inputField.is(":focus")&&$inputField.is(":enabled")){$inputField.focus()}})}$inputField.keydown(function(e){var cal=window.calendar;if(e.keyCode===40){if(!cal||cal.hidden){setTimeout(function(){createCalendar()},1)}}})}return cal};;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
JIRA.Dropdown=(function(){var instances=[];return{addInstance:function(){instances.push(this)},hideInstances:function(){var that=this;jQuery(instances).each(function(){if(that!==this){this.hideDropdown()}})},getHash:function(){if(!this.hash){this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}}return this.hash},displayDropdown:function(){if(JIRA.Dropdown.current===this){return }this.hideInstances();JIRA.Dropdown.current=this;this.dropdown.css({display:"block"});this.displayed=true;var dd=this.dropdown;if(window.top.JIRA&&!window.top.JIRA.Dialog.current){setTimeout(function(){var win=jQuery(window);var minScrollTop=dd.offset().top+dd.prop("offsetHeight")-win.height()+10;if(win.scrollTop()<minScrollTop){jQuery("html,body").animate({scrollTop:minScrollTop},300,"linear")}},100)}},hideDropdown:function(){if(this.displayed===false){return }JIRA.Dropdown.current=null;this.dropdown.css({display:"none"});this.displayed=false},init:function(trigger,dropdown){var that=this;this.addInstance(this);this.dropdown=jQuery(dropdown);this.dropdown.css({display:"none"});jQuery(document).keydown(function(e){if(e.keyCode===9){that.hideDropdown()}});if(trigger.target){jQuery.aop.before(trigger,function(){if(!that.displayed){that.displayDropdown()}})}else{that.dropdown.css("top",jQuery(trigger).outerHeight()+"px");trigger.click(function(e){if(!that.displayed){that.displayDropdown();e.stopPropagation()}else{that.hideDropdown()}e.preventDefault()})}jQuery(document.body).click(function(){if(that.displayed){that.hideDropdown()}})}}})();JIRA.Dropdown.Standard=function(trigger,dropdown){var that=begetObject(JIRA.Dropdown);that.init(trigger,dropdown);return that};JIRA.Dropdown.AutoComplete=function(trigger,dropdown){var that=begetObject(JIRA.Dropdown);that.init=function(trigger,dropdown){this.addInstance(this);this.dropdown=jQuery(dropdown).click(function(e){e.stopPropagation()});this.dropdown.css({display:"none"});if(trigger.target){jQuery.aop.before(trigger,function(){if(!that.displayed){that.displayDropdown()}})}else{trigger.click(function(e){if(!that.displayed){that.displayDropdown();e.stopPropagation()}})}jQuery(document.body).click(function(){if(that.displayed){that.hideDropdown()}})};that.init(trigger,dropdown);return that};AJS.namespace("jira.widget.dropdown",null,JIRA.Dropdown);;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/objects","jquery"],function(SmartAjax,Objects,jQuery){return function(){var inFocus;var delay=function(callback,l){if(delay.t){clearTimeout(delay.t);delay.t=undefined}delay.t=setTimeout(callback,l*1000)};var INVALID_KEYS={9:true,13:true,14:true,25:true,27:true,38:true,40:true,224:true};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=true},enable:function(){this.disabled=false},set:function(options){for(var name in options){if(options.hasOwnProperty(name)){this[name]=options[name]}}},completeField:function(value){if(value){this.field.val(value).focus();this.field.trigger("change")}},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(options){var that=this,requestParams=Objects.copyObject(options);if(this.pendingRequest){this.pendingRequest.abort()}requestParams.complete=function(){that.pendingRequest=null};requestParams.error=function(xhr){if(!xhr.aborted&&xhr.status!==0&&options.error){options.error.apply(this,arguments)}};return this.pendingRequest=SmartAjax.makeRequest(requestParams)},addSuggestionControls:function(suggestionNodes){var that=this;var evaluateIndex=function(idx,max){var minBoundary=(that.autoSelectFirst===false)?-1:0;if(that.allowArrowCarousel){if(idx>max){return minBoundary}else{if(idx<minBoundary){return max}else{return idx}}}else{if(idx>max){return max}else{if(idx<minBoundary){that.responseContainer.scrollTop(0);return minBoundary}else{return idx}}}};var setActive=function(idx){if(that.selectedIndex!==undefined&&that.selectedIndex>-1){that.suggestionNodes[that.selectedIndex][0].removeClass("active")}that.selectedIndex=evaluateIndex(idx,that.suggestionNodes.length-1);if(that.selectedIndex>-1){that.suggestionNodes[that.selectedIndex][0].addClass("active")}};var evaluateIfActive=function(){return that.suggestionNodes&&that.suggestionNodes[that.selectedIndex]&&that.suggestionNodes[that.selectedIndex][0].hasClass("active")};var keyPressHandler=function(e){if(that.responseContainer.is(":visible")){if(e.keyCode===13){if(evaluateIfActive()&&!that.pendingRequest){that.completeField(that.suggestionNodes[that.selectedIndex][1])}e.preventDefault();e.stopPropagation()}}};var keyboardNavigateHandler=function(e){if(that.responseContainer.is(":visible")){if(that.field[0]!==document.activeElement){that.field.focus()}if(e.keyCode===40){setActive(that.selectedIndex+1);if(that.selectedIndex>=0){var containerHeight=that.responseContainer.height();var bottom=that.suggestionNodes[that.selectedIndex][0].position().top+that.suggestionNodes[that.selectedIndex][0].outerHeight();if(bottom-containerHeight>0){that.responseContainer.scrollTop(that.responseContainer.scrollTop()+bottom-containerHeight+2)}}else{that.responseContainer.scrollTop(0)}e.preventDefault()}else{if(e.keyCode===38){setActive(that.selectedIndex-1);if(that.selectedIndex>=0){var top=that.suggestionNodes[that.selectedIndex][0].position().top;if(top<0){that.responseContainer.scrollTop(that.responseContainer.scrollTop()+top-2)}}e.preventDefault()}else{if(e.keyCode===9){if(evaluateIfActive()){that.completeField(that.suggestionNodes[that.selectedIndex][1]);e.preventDefault()}else{that.dropdownController.hideDropdown()}}}}}};if(suggestionNodes.length){this.selectedIndex=0;this.suggestionNodes=suggestionNodes;for(var i=0;i<that.suggestionNodes.length;i++){var eventData={instance:this,index:i};this.suggestionNodes[i][0].bind("mouseover",eventData,activate).bind("mouseout",eventData,deactivate).bind("click",eventData,complete)}if(!this.keyboardHandlerBinded){jQuery(this.field).keypress(keyPressHandler);jQuery(this.field).keydown(keyboardNavigateHandler);this.keyboardHandlerBinded=true}if(that.autoSelectFirst===false){setActive(-1)}else{setActive(0)}inFocus=this}function activate(event){if(that.dropdownController.displayed){setActive(event.data.index)}}function deactivate(event){if(event.data.index===0){that.selectedIndex=-1}jQuery(this).removeClass("active")}function complete(event){that.completeField(that.suggestionNodes[event.data.index][1])}},clearResponseContainer:function(){this.responseContainer.empty();this.suggestionNodes=undefined},delay:delay,buildResponseContainer:function(){var inputParent=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=jQuery(document.createElement("div"));this.responseContainer.addClass("suggestions");this.positionResponseContainer();this.responseContainer.appendTo(inputParent)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:(function(){function callback(){if(!this.responseContainer){this.buildResponseContainer()}this.dispatcher(this.field.val())}return function(e){if(this.field.val().length>=this.minQueryLength){if(!(e.keyCode in INVALID_KEYS)||(this.responseContainer&&!this.responseContainer.is(":visible")&&(e.keyCode===38||e.keyCode===40))){callback.call(this)}}return e}})(),addMultiSelectAdvice:function(delim){var that=this;var alertUserValueAlreadyExists=function(val){if(!alertUserValueAlreadyExists.isAlerting){alertUserValueAlreadyExists.isAlerting=true;var userAlert=jQuery(document.createElement("div")).css({"float":"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+val+"</em>").appendTo(that.field.parent()).show("fast",function(){that.delay(function(){userAlert.hide("fast",function(){userAlert.remove();alertUserValueAlreadyExists.isAlerting=false})},4)})}};jQuery.aop.before({target:this,method:"dispatcher"},function(innvocation){var val=this.field.val();innvocation[0]=jQuery.trim(val.slice(val.lastIndexOf(delim)+1));return innvocation});jQuery.aop.before({target:this,method:"completeField"},function(args){var valueToAdd=args[0],untrimmedVals=this.field.val().split(delim);var trimmedVals=jQuery(untrimmedVals).map(function(){return jQuery.trim(this)}).get();if(!this.allowDuplicates&&new RegExp("(?:^|[\\s"+delim+"])"+valueToAdd+"\\s*"+delim).test(this.field.val())){alertUserValueAlreadyExists(valueToAdd);trimmedVals[trimmedVals.length-1]=""}else{trimmedVals[trimmedVals.length-1]=valueToAdd;trimmedVals[trimmedVals.length]=""}args[0]=trimmedVals.join(delim.replace(/([^\s]$)/,"$1 "));return args})},addDropdownAdvice:function(){var that=this;jQuery.aop.after({target:this,method:"buildResponseContainer"},function(args){this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer);jQuery.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")});return args});jQuery.aop.after({target:this,method:"renderSuggestions"},function(args){if(args&&args.length>0){this.dropdownController.displayDropdown();if(this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight){this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"})}else{if(this.maxHeight){this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""})}}this.dropdownController.dropdown.addClass("dropdown-ready")}else{this.dropdownController.hideDropdown()}return args});jQuery.aop.after({target:this,method:"completeField"},function(args){this.dropdownController.hideDropdown();return args});jQuery.aop.after({target:this,method:"keyUpHandler"},function(e){if((!(this.field.val().length>=this.minQueryLength)||e.keyCode===27)&&this.dropdownController&&this.dropdownController.displayed){this.dropdownController.hideDropdown();if(e.keyCode===27){e.stopPropagation()}}return e})},init:function(options){var that=this;this.set(options);this.field=this.field||jQuery("#"+this.fieldID);this.field.attr("autocomplete","off").keyup(function(e){if(!that.disabled){that.keyUpHandler(e)}}).keydown(function(e){var ESC_KEY=27;if(e.keyCode===ESC_KEY&&that.responseContainer&&that.responseContainer.is(":visible")){e.preventDefault()}}).click(function(e){if(inFocus===that){e.stopPropagation()}}).blur(function(){if(that.pendingRequest){that.pendingRequest.abort()}});this.addDropdownAdvice();if(options.delimChar){this.addMultiSelectAdvice(options.delimChar)}}}}()});AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete"));AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(AutoComplete,Objects){return function(){var that=Objects.begetObject(AutoComplete);that.dispatcher=function(reqFieldVal){var that=this;if(reqFieldVal.length<this.minQueryLength){return }if(!this.getSavedResponse(reqFieldVal)){this.delay(function(){var params=that.getAjaxParams();params.data.query=reqFieldVal;params.success=function(data){that.saveResponse(reqFieldVal,data);that.responseContainer.scrollTop(0);that.renderSuggestions(data)};that._makeRequest(params)},that.queryDelay)}else{that.renderSuggestions(that.getSavedResponse(reqFieldVal));that.responseContainer.scrollTop(0)}};that.getAjaxParams=function(){};that.getSavedResponse=function(val){if(!this.requested){this.requested={}}return this.requested[val]};that.saveResponse=function(val,response){if(typeof val==="string"&&typeof response==="object"){if(!this.requested){this.requested={}}this.requested[val]=response}};return that}()});AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete"));AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/autocomplete/rest-autocomplete","jira/util/objects","jquery"],function(RESTAutoComplete,Objects,jQuery){var IssueAutoComplete=function(options){var that=Objects.begetObject(RESTAutoComplete);that.getAjaxParams=function(){return{url:contextPath+"/rest/api/2/issue/picker",data:options.ajaxData,dataType:"json",type:"GET"}};that.renderSuggestions=function(response){var resultsContainer,suggestionNodes=[];this.clearResponseContainer();if(response&&response.sections&&response.sections.length>0){resultsContainer=jQuery("<ul/>").appendTo(this.responseContainer);jQuery(response.sections).each(function(){var section=this;var subSection=jQuery("<div/>").attr("id",options.fieldID+"_s_"+section.id).addClass("yag").text(section.label);if(section.sub){subSection.append(jQuery("<span/>").addClass("yagt").text("("+section.sub+")"))}resultsContainer.append(jQuery("<li/>").append(subSection).mouseover(function(){jQuery(this).addClass("active")}).mouseout(function(){jQuery(this).removeClass("active")}));if(section.msg){var msg=jQuery("<div/>").attr("id",options.fieldID+"_i_"+section.id+"_n").addClass("yad").text(section.msg);resultsContainer.append(jQuery("<li/>").append(msg).mouseover(function(){jQuery(this).addClass("active")}).mouseout(function(){jQuery(this).removeClass("active")}))}if(section.issues&&section.issues.length>0){jQuery(section.issues).each(function(){var imgUrl;if(/^http/.test(this.img)){imgUrl=this.img}else{imgUrl=contextPath+this.img}var issueNode=jQuery("<li/>").append(jQuery("<div/>").attr("id",options.fieldID+"_i_"+section.id+"_"+this.key).addClass("yad").append(jQuery("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(jQuery("<tr/>").append(jQuery("<td/>").append(jQuery("<img/>").attr("src",imgUrl))).append(jQuery("<td/>").append(jQuery("<div/>").addClass("yak").html(this.keyHtml))).append(jQuery("<td/>").css("width","100%").html(this.summary)))));resultsContainer.append(issueNode);suggestionNodes.push([issueNode,this.key])})}});that.addSuggestionControls(suggestionNodes);return suggestionNodes}};options.minQueryLength=1;options.queryDelay=0.25;that.init(options);return that};IssueAutoComplete.init=function(){jQuery("fieldset.issue-picker-params").each(function(){var params=JIRA.parseOptionsFromFieldset(jQuery(this)),$container=jQuery("#"+params.fieldId+"-container").add("#"+params.fieldName+"_container");$container.find("a.popup-trigger").click(function(e){var url=contextPath+"/secure/popups/IssuePicker.jspa?";url+="currentIssue="+params.currentIssueKey+"&";url+="singleSelectOnly="+params.singleSelectOnly+"&";url+="showSubTasks="+params.showSubTasks+"&";url+="showSubTasksParent="+params.showSubTaskParent;if(params.currentProjectId&&params.currentProjectId!==""){url+="&selectedProjectId="+params.currentProjectId}JIRA.IssuePicker.callback=function(keysMap){var $formElement,keys=[];keysMap=JSON.parse(keysMap);if(params.fieldId&&keys){$formElement=jQuery("#"+params.fieldId);if($formElement){jQuery.each(keysMap,function(){keys.push(this.value)});$formElement.val(keys.join(", "))}}};var vWinUsers=window.open(url,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");vWinUsers.opener=self;vWinUsers.focus();e.preventDefault()});if(!params.fieldId){params.fieldId=params.fieldName}if(params.issuePickerEnabled===true){IssueAutoComplete({fieldID:params.fieldId,delimChar:params.singleSelectOnly===true?undefined:",",ajaxData:params})}})};return IssueAutoComplete});AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete"));AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","jquery"],function(RESTAutoComplete,parseOptionsFromFieldset,Browser,Elements,Objects,jQuery){var UserAutoComplete=function(options){var that=Objects.begetObject(RESTAutoComplete);that.getAjaxParams=function(){return{url:contextPath+"/rest/api/1.0/users/picker",data:{fieldName:options.fieldID,fieldConfigId:options.fieldConfigID,projectId:options.projectId},dataType:"json",type:"GET"}};function fieldsFormHasBeenSubmitted(field){var submitting=false,form=field.closest("form");if(form.length&&form.hasClass("submitting")){submitting=true}return submitting}that.renderSuggestions=function(response){if(fieldsFormHasBeenSubmitted(this.field)||!Browser.isSelenium()&&!Elements.elementIsFocused(this.field)){return false}var resultsContainer,suggestionNodes=[];this.clearResponseContainer();if(response&&response.users&&response.users.length>0){resultsContainer=jQuery("<ul/>").appendTo(this.responseContainer);jQuery(response.users).each(function(){suggestionNodes.push([jQuery("<li/>").html(this.html).appendTo(resultsContainer),this.name])})}if(response.footer){this.responseContainer.append(jQuery("<div/>").addClass("yui-ac-ft").html(response.footer).css("display","block"))}if(suggestionNodes.length>0){that.addSuggestionControls(suggestionNodes);jQuery(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:true})}return suggestionNodes};options.minQueryLength=2;options.queryDelay=0.25;that.init(options);return that};UserAutoComplete.init=function(parent){jQuery("fieldset.user-picker-params",parent).each(function(){var params=parseOptionsFromFieldset(jQuery(this)),field=(params.fieldId||params.fieldName),$container=jQuery("#"+field+"_container");$container.find("a.popup-trigger").click(function(e){var url=contextPath,vWinUsers;e.preventDefault();if(!params.formName){params.formName=$container.find("#"+field).parents("form").attr("name")}if(params.actionToOpen){url=url+params.actionToOpen}else{url=url+"/secure/popups/UserPickerBrowser.jspa"}url+="?formName="+params.formName+"&";url+="multiSelect="+params.multiSelect+"&";url+="decorator=popup&";url+="element="+field;if(params.fieldConfigId){url+="&fieldConfigId="+params.fieldConfigId}if(params.projectId){if(jQuery.isArray(params.projectId)){for(var projectId in params.projectId){url+="&projectId="+projectId}}else{url+="&projectId="+params.projectId}}vWinUsers=window.open(url,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");vWinUsers.opener=self;vWinUsers.focus()});if(params.userPickerEnabled===true){UserAutoComplete({field:parent?parent.find("#"+field):null,fieldID:field,fieldConfigID:params.fieldConfigId,projectId:params.projectId,delimChar:params.multiSelect===false?undefined:",",ajaxData:{fieldName:params.fieldName}})}})};return UserAutoComplete});AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete"));AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
(function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){JIRA.UserAutoComplete.init(context);JIRA.IssueAutoComplete.init(context)}});JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){AJS.$("fieldset.user-searcher-params",context).each(function(){var params=JIRA.parseOptionsFromFieldset(AJS.$(this)),$container=AJS.$("#"+params.fieldId+"_container",context);if(params.userPickerEnabled===true){var autocompleter=JIRA.UserAutoComplete({fieldID:params.fieldId,delimChar:params.multiSelect===true?",":undefined,ajaxData:{fieldName:params.fieldName}})}var setupFields=function(related){var field=AJS.$("#"+params.fieldId,context);var userImage=AJS.$("#"+params.fieldId+"Image",context);var groupImage=AJS.$("#"+params.fieldId+"GroupImage",context);var fieldDesc=AJS.$("#"+params.fieldId+"_desc",context);if(related==="select.list.none"){field.val("").attr("disabled","true");userImage.hide();groupImage.hide();fieldDesc.hide()}else{field.removeAttr("disabled");if(related==="select.list.group"){userImage.hide();groupImage.show();if(params.userPickerEnabled===true){autocompleter.disable();fieldDesc.hide()}}else{userImage.show();groupImage.hide();if(params.userPickerEnabled===true){autocompleter.enable();fieldDesc.show()}}}};AJS.$("#"+params.userSelect,context).change(function(){var related=AJS.$(this).find("option:selected").attr("rel");setupFields(related)}).find("option:selected").each(function(){setupFields(AJS.$(this).attr("rel"))});$container.find("a.user-popup-trigger").click(function(e){var url=contextPath+"/secure/popups/UserPickerBrowser.jspa?";url+="formName="+params.formName+"&";url+="multiSelect="+params.multiSelect+"&";url+="decorator=popup&";url+="element="+params.fieldId;var vWinUsers=window.open(url,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");vWinUsers.opener=self;vWinUsers.focus();e.preventDefault()});$container.find("a.group-popup-trigger").click(function(e){var url=contextPath+"/secure/popups/GroupPickerBrowser.jspa?";url+="formName="+params.formName+"&";url+="multiSelect="+params.multiSelect+"&";url+="decorator=popup&";url+="element="+params.fieldId;var vWinUsers=window.open(url,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");vWinUsers.opener=self;vWinUsers.focus();e.preventDefault()})})}})})();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function($,skate){skate("group-label-lozenge",{type:skate.type.CLASSNAME,attached:function(element){$(element).tooltip({gravity:"w",html:true})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.soy' */
// This file was automatically generated from group-label-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.groupLabelLozenge = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge({text: opt_data.label.text, title: opt_data.label.title, isSubtle: true, extraClasses: 'group-label-lozenge'});
};
if (goog.DEBUG) {
  JIRA.Templates.groupLabelLozenge.soyTemplateName = 'JIRA.Templates.groupLabelLozenge';
}
;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function($){$(function(){$(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:false})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
JIRA.GroupPickerUtil={formatResponseWithLabels:function(data){return JIRA.GroupPickerUtil.formatResponse(data,true)},formatResponse:function(data,showLabels){var ret=[];var template=showLabels?JIRA.Templates.GroupPickerUtil.formatResponseWithLabels:JIRA.Templates.GroupPickerUtil.formatResponse;AJS.$(data).each(function(i,suggestions){var groupDescriptor=new AJS.GroupDescriptor({weight:i,label:suggestions.header});AJS.$(suggestions.groups).each(function(){groupDescriptor.addItem(new AJS.ItemDescriptor({value:this.name,label:this.name,title:this.name,html:template(this),highlighted:true}))});ret.push(groupDescriptor)});return ret}};;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/groupPickerUtil.soy' */
// This file was automatically generated from groupPickerUtil.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.GroupPickerUtil.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.GroupPickerUtil == 'undefined') { JIRA.Templates.GroupPickerUtil = {}; }


JIRA.Templates.GroupPickerUtil.formatResponseWithLabels = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(opt_data, {showLabels: true}));
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponseWithLabels.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponseWithLabels';
}


JIRA.Templates.GroupPickerUtil.formatResponse = function(opt_data, opt_ignored) {
  var output = '<div class="group-suggestion-item"><span class="group-suggestion-item__name">' + soy.$$filterNoAutoescape(opt_data.html) + '</span>';
  if (opt_data.showLabels) {
    output += '<span class="group-suggestion-item__labels group-labels-lozenges">';
    var labelList13 = opt_data.labels;
    var labelListLen13 = labelList13.length;
    for (var labelIndex13 = 0; labelIndex13 < labelListLen13; labelIndex13++) {
      var labelData13 = labelList13[labelIndex13];
      output += JIRA.Templates.groupLabelLozenge({label: labelData13}) + ' ';
    }
    output += '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponse.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponse';
}
;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
(function(){function initMultiGroupPickers(ctx){ctx.find(".js-default-multi-group-picker").each(function(){var $el=jQuery(this);var showLabels=$el.data("show-labels")===true;var userName=$el.data("user-name");new AJS.MultiSelect({element:this,itemAttrDisplayed:"label",showDropdownButton:false,ajaxOptions:{data:function(query){return{userName:userName,query:query,exclude:$el.val()}},url:contextPath+"/rest/api/2/groups/picker",query:true,formatResponse:showLabels?JIRA.GroupPickerUtil.formatResponseWithLabels:JIRA.GroupPickerUtil.formatResponse}})})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initMultiGroupPickers(context)}})})();;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
(function(){var SingleSelect=require("jira/ajs/select/single-select");function initSingleGroupPickers(ctx){ctx.find(".js-default-single-group-picker").each(function(){var $el=jQuery(this);var $emptyValue=$el.find("option[data-empty]");var showLabels=$el.data("show-labels")===true;var userName=$el.data("user-name");new SingleSelect({element:this,itemAttrDisplayed:"label",revertOnInvalid:true,ajaxOptions:{data:function(query){return{userName:userName,query:query,exclude:$el.val()}},url:contextPath+"/rest/api/2/groups/picker",query:true,formatResponse:function(data){var formattedData=JIRA.GroupPickerUtil.formatResponse(data,showLabels);if($emptyValue.length&&$el.val()!==""){formattedData.unshift(new AJS.ItemDescriptor({value:"",label:$emptyValue.text(),highlighted:true}))}return formattedData}}})})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initSingleGroupPickers(context)}})})();;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
(function($){JIRA.UserPickerUtil={formatResponse:function(data){var ret=[];$(data).each(function(i,suggestions){var groupDescriptor=new AJS.GroupDescriptor({weight:i,label:suggestions.footer});$(suggestions.users).each(function(){groupDescriptor.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:false,highlighted:true}))});ret.push(groupDescriptor)});return ret}}})(AJS.$);;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
(function($){function createSingleUserPickers(ctx){var restPath="/rest/api/1.0/users/picker";$(".js-default-user-picker",ctx).each(function(){var $this=$(this);if($this.data("aui-ss")){return }var data={showAvatar:true},inputText=$this.data("inputValue");new AJS.SingleSelect({element:$this,submitInputVal:true,showDropdownButton:!!$this.data("show-dropdown-button"),errorMessage:AJS.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+restPath,query:true,data:data,formatResponse:JIRA.UserPickerUtil.formatResponse},inputText:inputText})})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){createSingleUserPickers(context)}})})(AJS.$);;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
AJS.NoBrowseUserNamePicker=AJS.MultiSelect.extend({_getDefaultOptions:function(){return AJS.$.extend(true,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:false,removeOnUnSelect:true,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(smartAjaxResult){if(smartAjaxResult.status===404){this.showErrorMessage()}else{this._super()}},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var instance=this;if(AJS.$.trim(this.$field.val())===""){this.hideErrorMessage()}else{jQuery.ajax({url:contextPath+"/rest/api/2/user",data:{username:AJS.$.trim(instance.getQueryVal())},success:function(user){instance.hideErrorMessage();instance.$field.val("");instance.addItem(new AJS.ItemDescriptor({label:user.displayName,value:user.name}))},error:function(){instance.showErrorMessage()}})}},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage();this.handleFreeInput()},handleFreeInput:function(){var value=AJS.$.trim(this.$field.val());if(value!==""){this.addItem({value:value,label:value});this.model.$element.trigger("change")}this.$field.val("")},keys:{"Return":function(event){event.preventDefault();this.validateAndAdd()},"Spacebar":function(event){event.preventDefault();this.validateAndAdd()}}});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
(function(){function initMultiUserPicker(ctx){ctx.find(".js-default-multi-user-picker").each(function(){var $el=jQuery(this);if(AJS.params.currentUserCanBrowseUsers){new AJS.MultiSelect({element:this,itemAttrDisplayed:"label",showDropdownButton:false,removeOnUnSelect:true,submitInputVal:true,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:true,data:function(query){return{showAvatar:true,query:query,exclude:$el.val()}},formatResponse:JIRA.UserPickerUtil.formatResponse}})}else{new AJS.NoBrowseUserNamePicker({element:this})}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initMultiUserPicker(context)}})})();;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
(function($){$.fn.ieImitationPlaceholder=function(){if($.browser.msie){var form=this,fields=form.find("[placeholder]");fields.focus(clearTextIfUnchanged);fields.blur(setTextFromPlaceholder);form.submit(clearAllIfUnchanged);fields.each(setTextFromPlaceholder);function setTextFromPlaceholder(){var field=$(this);if(field.val()===""){field.val(field.attr("placeholder"));field.addClass("input-placeholder")}}function clearTextIfUnchanged(){var field=$(this);if(field.val()===field.attr("placeholder")){field.val("");field.removeClass("input-placeholder")}}function clearAllIfUnchanged(){fields.each(clearTextIfUnchanged)}}}})(AJS.$);;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
JIRA.ProjectIssueTypeSelect=Class.extend({init:function(options){var val,instance=this;this.$project=options.project;this.issueTypeSelect=options.issueTypeSelect;this.$projectIssueTypesSchemes=options.projectIssueTypesSchemes;this.$issueTypeSchemeIssueDefaults=options.issueTypeSchemeIssueDefaults;this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html());this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]");if(instance.$project.length>0){val=instance.$project.val();instance.setIssueTypeScheme(instance.getIssueTypeSchemeForProject(val));this.$project.change(function(){var val=instance.$project.val();instance.setIssueTypeScheme(instance.getIssueTypeSchemeForProject(val))})}},getIssueTypeSchemeForProject:function(projectId){return this.projectIssueTypeSchemes[projectId]},getDefaultIssueTypeForScheme:function(issueTypeSchemeId){return this.issueTypesSchemeDefaults[issueTypeSchemeId]},setIssueTypeScheme:function(issueTypeSchemeId){var selectedIssueType=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(issueTypeSchemeId);if(!this.issueTypeSelect.model.setSelected(selectedIssueType,false)){this.setDefaultIssueType(issueTypeSchemeId)}this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(issueTypeSchemeId){var defaultIssueType=this.getDefaultIssueTypeForScheme(issueTypeSchemeId),descriptor=this.issueTypeSelect.model.getDescriptor(defaultIssueType);if(!descriptor){descriptor=this.issueTypeSelect.model.getAllDescriptors()[0]}this.issueTypeSelect.setSelection(descriptor,false)}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
(function(){var SuggestionCollectionModel=require("jira/ajs/select/suggestion-collection-model");function findProjectAndIssueTypeSelectAndConvertToPicker(ctx){var $ctx=ctx||jQuery("body");$ctx.find(".issuetype-field").each(function(index){var $project=$ctx.find(".project-field, .project-field-readonly"),$issueTypeSelect=jQuery(this),$projectIssueTypes=$ctx.find("#"+$issueTypeSelect.attr("id")+"-projects"),$defaultProjectIssueTypes=$ctx.find("#"+$issueTypeSelect.attr("id")+"-defaults"),issueTypeSelect=new AJS.SingleSelect({element:$issueTypeSelect,revertOnInvalid:true,model:SuggestionCollectionModel});issueTypeSelect.model.remove("");if($project.length>0){new JIRA.ProjectIssueTypeSelect({project:$project.eq(index),issueTypeSelect:issueTypeSelect,projectIssueTypesSchemes:$projectIssueTypes,issueTypeSchemeIssueDefaults:$defaultProjectIssueTypes})}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){findProjectAndIssueTypeSelectAndConvertToPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initIssueTypePickers.js' */
(function(){function createissueTypePicker(context){context.find(".issuetype-field").each(function(){var $select=jQuery(this);$select.bind("reset",function(){$select.find("option[value='']").remove()}).trigger("reset");new AJS.SingleSelect({element:this,revertOnInvalid:true})})}})();;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
(function(){var ScrollableSingleSelect=require("jira/ajs/select/scrollable-single-select");var SuggestionCollectionModel=require("jira/ajs/select/suggestion-collection-model");function createProjectPicker(context){context.find(".project-field").each(function(){new ScrollableSingleSelect({element:this,revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:SuggestionCollectionModel})})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){createProjectPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/field-templates.soy' */
// This file was automatically generated from field-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }


JIRA.Templates.Fields.username = function(opt_data, opt_ignored) {
  return '' + ((opt_data.escape) ? soy.$$escapeHtml(opt_data.displayName) : soy.$$filterNoAutoescape(opt_data.displayName));
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.username.soyTemplateName = 'JIRA.Templates.Fields.username';
}


JIRA.Templates.Fields.recipientUsername = function(opt_data, opt_ignored) {
  return '<li data-username="' + soy.$$escapeHtml(opt_data.username) + '" title=' + soy.$$escapeHtml(opt_data.username) + '><span><span class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '"><img alt="" src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + JIRA.Templates.Fields.username(opt_data) + '"><span title="' + JIRA.Templates.Fields.username(opt_data) + '">' + JIRA.Templates.Fields.username(opt_data) + '</span></span>' + ((! opt_data.readOnly) ? '<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml(AJS.format("Remove watcher: {0}",opt_data.username)) + '</span></button>' : '') + '</span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientUsername.soyTemplateName = 'JIRA.Templates.Fields.recipientUsername';
}


JIRA.Templates.Fields.recipientEmail = function(opt_data, opt_ignored) {
  return '<li data-email="' + soy.$$escapeHtml(opt_data.email) + '" title=' + soy.$$escapeHtml(opt_data.email) + '><span><img src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + soy.$$escapeHtml(opt_data.email) + '"><span title="' + soy.$$escapeHtml(opt_data.email) + '">' + soy.$$escapeHtml(opt_data.email) + '</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientEmail.soyTemplateName = 'JIRA.Templates.Fields.recipientEmail';
}
;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/IssuePicker.js' */
define("jira/field/issue-picker",["jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jquery"],function(MultiSelect,GroupDescriptor,ItemDescriptor,jQuery){var IssuePicker=MultiSelect.extend({_formatResponse:function(response){var ret=[],canonicalBaseUrl=(function(){var uri=parseUri(window.location);return uri.protocol+"://"+uri.authority})();if(response&&response.sections){jQuery(response.sections).each(function(i,section){var groupDescriptor=new GroupDescriptor({weight:i,label:section.label,description:section.sub});if(section.issues&&section.issues.length>0){jQuery(section.issues).each(function(){groupDescriptor.addItem(new ItemDescriptor({highlighted:true,value:this.key,label:this.key+" - "+this.summaryText,icon:this.img?canonicalBaseUrl+contextPath+this.img:null,html:this.keyHtml+" - "+this.summary}))})}ret.push(groupDescriptor)})}return ret},_getDefaultOptions:function(){return jQuery.extend(true,this._super(),{ajaxOptions:{formatResponse:this._formatResponse}})},_launchPopup:function(){function getWithDefault(value,def){if(value==null){return def}else{return value}}var url,urlParam,vWinUsers,options,instance=this;IssuePicker.callback=function(items){if(typeof items==="string"){items=JSON.parse(items)}instance._addMultipleItems(items,true);instance.$field.focus()};options=this.options.ajaxOptions.data;url=contextPath+"/secure/popups/IssuePicker.jspa?";urlParam={singleSelectOnly:"false",decorator:"popup",currentIssue:options.currentIssueKey||"",showSubTasks:getWithDefault(options.showSubTasks,false),showSubTasksParent:getWithDefault(options.showSubTaskParent,false)};if(options.currentProjectId){urlParam["currentProjectId"]=options.currentProjectId}url+=jQuery.param(urlParam);vWinUsers=window.open(url,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width="+this.options.popupWidth+",height="+this.options.popupHeight+",scrollbars=yes,resizable");vWinUsers.opener=self;vWinUsers.focus()},_createFurniture:function(disabled){var $popupLink;this._super(disabled);$popupLink=this._render("popupLink");this._assignEvents("popupLink",$popupLink);this.$container.addClass("jira-issue-picker");this.$container.addClass("hasIcon");this.$container.after($popupLink)},handleFreeInput:function(){var values=this.$field.val().toUpperCase().match(/\S+/g);if(values){this._addMultipleItems(jQuery.map(values,function(value){return{value:value,label:value}}))}this.$field.val("")},_events:{popupLink:{click:function(e){this._launchPopup();e.preventDefault()}}},_renders:{popupLink:function(){return jQuery("<a class='issue-picker-popup' />").attr({href:"#",title:this.options.popupLinkMessage}).text(""+this.options.popupLinkMessage+"")}}});IssuePicker.callback=null;return IssuePicker});AJS.namespace("jira.issuepicker",null,require("jira/field/issue-picker"));AJS.namespace("AJS.IssuePicker",null,require("jira/field/issue-picker"));AJS.namespace("JIRA.IssuePicker",null,require("jira/field/issue-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jquery"],function(MultiSelect,GroupDescriptor,ItemDescriptor,jQuery){return MultiSelect.extend({_getDefaultOptions:function(){return jQuery.extend(true,this._super(),{ajaxOptions:{url:contextPath+"/includes/js/ajs/layer/labeldata.js",query:true,formatResponse:this._formatResponse},removeDuplicates:true,removeOnUnSelect:true,userEnteredOptionsMsg:"New Label"})},isValidItem:function(itemValue){return !/\s/.test(itemValue)},_handleServerSuggestions:function(data){if(data&&data.token){if(jQuery.trim(this.$field.val())!==data.token){return }}this._super(data)},_handleSpace:function(){if(jQuery.trim(this.$field.val())!==""){if(this.handleFreeInput()){this.hideSuggestions()}}},keys:{"Spacebar":function(event){this._handleSpace();event.preventDefault()}},_formatResponse:function(data){var optgroup=new GroupDescriptor({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});if(data&&data.suggestions){jQuery.each(data.suggestions,function(){optgroup.addItem(new ItemDescriptor({value:this.label,label:this.label,html:this.html,highlighted:true}))})}return[optgroup]},handleFreeInput:function(){var values=jQuery.trim(this.$field.val()).match(/\S+/g);if(values){for(var value,i=0;value=values[i];i++){this.addItem({value:value,label:value})}this.model.$element.trigger("change")}this.$field.val("")}})});AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker"));AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
(function($){JIRA.MultiUserListPicker=AJS.MultiSelect.extend({init:function(options){var restPath="/rest/api/1.0/users/picker";function formatResponse(response){var ret=[];$(response).each(function(i,suggestions){var groupDescriptor=new AJS.GroupDescriptor({weight:i,label:suggestions.footer});$(suggestions.users).each(function(){groupDescriptor.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:false,highlighted:true}))});ret.push(groupDescriptor)});return ret}$.extend(options,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:false,removeOnUnSelect:true,ajaxOptions:{url:contextPath+restPath,query:true,data:{showAvatar:true},formatResponse:formatResponse},suggestionsHandler:AJS.UserListSuggestHandler,itemGroup:new AJS.Group(),itemBuilder:function(descriptor){return new JIRA.MultiUserListPicker.Item({descriptor:descriptor,container:this.$selectedItemsContainer})}});this._super(options)},_createFurniture:function(disabled){this._super(disabled);if(this.options.description){this._render("description",this.options.description).insertAfter(this.$field)}},updateItemsIndent:$.noop,_renders:{selectedItemsWrapper:function(){return $('<div class="recipients"></div>')},selectedItemsContainer:function(){return $("<ol />")},description:function(description){return $("<div />").addClass("description").text(description)}}})}(AJS.$));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
JIRA.MultiUserListPicker.Item=AJS.Control.extend({init:function(options){this._setOptions(options);this.$lozenge=this._render("item");this.$removeButton=this.$lozenge.find(".remove-recipient");this._assignEvents("instance",this);this._assignEvents("lozenge",this.$lozenge);this._assignEvents("removeButton",this.$removeButton);this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{"item":function(){var descriptor=this.options.descriptor;var data;if(descriptor.noExactMatch()!==true){data={escape:false,username:descriptor.value(),icon:descriptor.icon(),displayName:AJS.escapeHtml(descriptor.label())};return AJS.$(JIRA.Templates.Fields.recipientUsername(data))}else{data={email:descriptor.value(),icon:AJS.Meta.get("default-avatar-url")};return AJS.$(JIRA.Templates.Fields.recipientEmail(data))}}},_events:{"instance":{"remove":function(){this.$lozenge.remove()}},"removeButton":{"click":function(e){e.stopPropagation();this.trigger("remove")}}}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
(function(){function initCascadingSelect(el){AJS.$(el||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){var $container=AJS.$(this),parent=$container.find(".cascadingselect-parent"),parentOptions=parent.find("option"),oldClass="",child=$container.find(".cascadingselect-child"),childOptions=child.find("option"),selectedChild=child.find(":selected");function update(){var placeholder,currentClass=parent.find("option:selected").attr("class");if(currentClass!==oldClass){placeholder=jQuery("<span />").insertAfter(child);child.detach();child.find("option").each(function(i,elem){elem.parentNode.removeChild(this)});child.insertAfter(placeholder);placeholder.remove();childOptions.filter("."+parent.find("option:selected").attr("class")).appendTo(child);if(selectedChild.hasClass(parent.find("option:selected").attr("class"))){child.val(selectedChild.val())}else{child.val(child.find("option:first").val())}oldClass=currentClass}}parent.bind("cascadingSelectChanged",update).change(function(){AJS.$(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initCascadingSelect(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
(function(){JIRA.ComponentPicker=AJS.MultiSelect.extend({init:function(options){this._super(options);this.suggestionsHandler=new AJS.OnlyNewItemsSuggestHandler(this.options,this.model)},_getDefaultOptions:function(opts){var canCreate=false;if(opts&&opts.element){canCreate=AJS.$(opts.element).data("create-permission")}if(canCreate){return AJS.$.extend(true,this._super(),{userEnteredOptionsMsg:"New Component"})}else{return this._super(opts)}},_selectionHandler:function(selected,e){var allExistingDescriptors=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors());var selectedDescriptor=selected.data("descriptor");var existingDescriptor=_.find(allExistingDescriptors,function(descriptor){return descriptor.label()===selectedDescriptor.label()});if(!existingDescriptor){selectedDescriptor.properties.value="nv_"+selectedDescriptor.value();JIRA.trigger("Issue.Component.new.selected",[selectedDescriptor.value()])}this._super(selected,e)}});function createPicker($selectField){new JIRA.ComponentPicker({element:$selectField,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:true})}function locateSelect(parent){var $parent=AJS.$(parent),$selectField;if($parent.is("select")){$selectField=$parent}else{$selectField=$parent.find("select")}return $selectField}var DEFAULT_SELECTORS=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];function findComponentSelectAndConvertToPicker(context,selector){selector=selector||DEFAULT_SELECTORS.join(", ");AJS.$(selector,context).each(function(){var $selectField=locateSelect(this);if($selectField.length){createPicker($selectField)}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){findComponentSelectAndConvertToPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
(function(){function createPicker($selectField){new AJS.MultiSelect({element:$selectField,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:true,expandAllResults:true})}function locateSelect(parent){var $parent=AJS.$(parent),$selectField;if($parent.is("select")){$selectField=$parent}else{$selectField=$parent.find("select")}return $selectField}var DEFAULT_SELECTORS=["div.aui-field-multiselectpicker.frother-control-renderer"];function findComponentSelectAndConvertToPicker(context,selector){selector=selector||DEFAULT_SELECTORS.join(", ");AJS.$(selector,context).each(function(){var $selectField=locateSelect(this);if($selectField.length){createPicker($selectField)}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){findComponentSelectAndConvertToPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
(function(){function initDatePicker(el){AJS.$(el||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){var $container=AJS.$(this),field=$container.find("input:text"),defaultCheckbox=$container.find("#useCurrentDate"),params=JIRA.parseOptionsFromFieldset($container.find("fieldset.datepicker-params"));params.context=el;Calendar.setup(params);function toggleField(){field.prop("disabled",defaultCheckbox.is(":checked"))}if(defaultCheckbox.length){toggleField();defaultCheckbox.click(toggleField)}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initDatePicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
(function(){function initLegacyGroupPicker(el){AJS.$(el||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){var $container=AJS.$(this),trigger=$container.find("a.grouppicker-trigger"),url=trigger.attr("href");function openGroupPickerWindow(e){e.preventDefault();window.open(url,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}trigger.click(openGroupPickerWindow)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initLegacyGroupPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
(function(){var IssuePicker=require("jira/field/issue-picker");var Events=require("jira/util/events");var Types=require("jira/util/events/types");var Reasons=require("jira/util/events/reasons");var $=require("jquery");function initIssuePicker(el){$(el||document.body).find(".aui-field-issuepicker").each(function(){new IssuePicker({element:$(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:true})})}Events.bind(Types.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==Reasons.panelRefreshed){initIssuePicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","jquery","exports"],function(LabelPicker,parseOptionsFromFieldset,$,exports){exports.createPicker=function($fieldset,context){var opts=parseOptionsFromFieldset($fieldset),$select=$("#"+opts.id,context),issueId=opts.issueId,data={};if(/customfield_\d/.test(opts.id)){data.customFieldId=parseInt(opts.id.replace("customfield_",""),10)}new LabelPicker({element:$select,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels"+(issueId?"/"+issueId:"")+"/suggest",data:data}})}});(function(){var LabelPickerFactory=require("jira/field/label-picker-factory");var Events=require("jira/util/events");var Types=require("jira/util/events/types");var Reasons=require("jira/util/events/reasons");var $=require("jquery");var FIELDSET_SELECTOR="fieldset.labelpicker-params";function locateFieldset(parent){var $parent=$(parent),$fieldset;if($parent.is(FIELDSET_SELECTOR)){$fieldset=$parent}else{$fieldset=$parent.find(FIELDSET_SELECTOR)}return $fieldset}function findLabelsFieldsetAndConvertToPicker(context,selector){selector=selector||".aui-field-labelpicker";$(selector,context).each(function(){var $fieldset=locateFieldset(this);if($fieldset.length>0){LabelPickerFactory.createPicker($fieldset,context)}})}Events.bind(Types.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==Reasons.panelRefreshed){findLabelsFieldsetAndConvertToPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
(function(){JIRA.VersionPicker=AJS.MultiSelect.extend({init:function(options){this._super(options);this.suggestionsHandler=new AJS.OnlyNewItemsSuggestHandler(this.options,this.model)},_getDefaultOptions:function(opts){var canCreate=false;if(opts&&opts.element){canCreate=AJS.$(opts.element).data("create-permission")}if(canCreate){return AJS.$.extend(true,this._super(),{userEnteredOptionsMsg:"New Version"})}else{return this._super(opts)}},_selectionHandler:function(selected,e){var allExistingVersionDescriptors=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors());var selectedDescriptor=selected.data("descriptor");var existingVersion=_.find(allExistingVersionDescriptors,function(descriptor){return descriptor.label()===selectedDescriptor.label()});if(!existingVersion){selectedDescriptor.properties.value="nv_"+selectedDescriptor.value();JIRA.trigger("Issue.Version.new.selected",[selectedDescriptor.value()])}this._super(selected,e)}});function createPicker($selectField){new JIRA.VersionPicker({element:$selectField,itemAttrDisplayed:"label",removeOnUnSelect:false,submitInputVal:true,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:true})}function locateSelect(parent){var $parent=AJS.$(parent),$selectField;if($parent.is("select")){$selectField=$parent}else{$selectField=$parent.find("select")}return $selectField}function findVersionSelectAndConvertToPicker(context,selector){selector=selector||".aui-field-versionspicker.frother-control-renderer";AJS.$(selector,context).each(function(){var $selectField=locateSelect(this);if($selectField.length){createPicker($selectField)}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){findVersionSelectAndConvertToPicker(context)}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
(function(){var skate=require("jira/skate");var SecurityLevelSelect=require("jira/ajs/select/security-level-select");var wikiPreview=require("jira/wikipreview/wiki-preview");skate("jira-wikifield",{type:skate.type.CLASSNAME,created:function(el){var prefs={fieldId:el.getAttribute("field-id"),trigger:el.querySelector(".wiki-preview").id,issueKey:el.getAttribute("issue-key"),rendererType:el.getAttribute("renderer-type")};wikiPreview(prefs,el).init()}});skate("security-level",{type:skate.type.CLASSNAME,created:function(el){var commentLevel=el.querySelector("#commentLevel");if(commentLevel){new SecurityLevelSelect(commentLevel)}}})})();;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
(function($){JIRA.Events.VALIDATE_TIMETRACKING="validateTimeTracking";function toggleTimeTrackingContainer(context,activate){var $logWorkContainer=$(context).find("#worklog-logworkcontainer"),$timeTrackingContainer=$(context).find("#worklog-timetrackingcontainer"),$logWorkCheckbox=$(context).find("#log-work-activate");if(activate){$logWorkContainer.removeClass("hidden");$timeTrackingContainer.addClass("hidden");$logWorkCheckbox.prop("checked",true)}else{$logWorkContainer.addClass("hidden");$timeTrackingContainer.removeClass("hidden");$logWorkCheckbox.prop("checked",false)}}function applyLogworkControls(context){$("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",context).attr("disabled","disabled");$("#log-work-adjust-estimate-"+$("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",context).val()+"-value",context).removeAttr("disabled");$("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",context).change(function(){$("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",context).attr("disabled","disabled");$("#log-work-adjust-estimate-"+$(this).val()+"-value",context).removeAttr("disabled")});$("#delete-log-work-adjust-estimate-new-value").change(function(){$("#delete-log-work-adjust-estimate-new").prop("checked",true)});$("#delete-log-work-adjust-estimate-manual-value").change(function(){$("#delete-log-work-adjust-estimate-manual").prop("checked",true)});$(context).find("#log-work-activate").change(function(){toggleTimeTrackingContainer(context,$(this).is(":checked"))})}JIRA.bind(JIRA.Events.VALIDATE_TIMETRACKING,function(e,context){toggleTimeTrackingContainer(context,true)});JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){applyLogworkControls(context)}})})(AJS.$);;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
(function($){function createPriorityPicker(context){context.find("select#priority").each(function(i,el){new AJS.SingleSelect({element:el,revertOnInvalid:true})})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){createPriorityPicker(context)}})})(AJS.$);;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
(function(){var Events=require("jira/util/events");var Types=require("jira/util/events/types");var Reasons=require("jira/util/events/reasons");require("jira/jquery/plugins/attachment/inline-attach");function createInlineAttach(context){context.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}Events.bind(Types.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==Reasons.panelRefreshed){createInlineAttach(context)}})})();;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/quickform.soy' */
// This file was automatically generated from quickform.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.QuickForm.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.QuickForm == 'undefined') { JIRA.Templates.QuickForm = {}; }


JIRA.Templates.QuickForm.field = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(opt_data.editHtml);
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.field.soyTemplateName = 'JIRA.Templates.QuickForm.field';
}


JIRA.Templates.QuickForm.fieldPicker = function(opt_data, opt_ignored) {
  return '<div class="qf-picker"><div class="qf-picker-header"><dl><dt>' + soy.$$escapeHtml("Show Fields:") + '</dt>' + ((opt_data.isConfigurable) ? '<dd><a class="qf-unconfigurable" href="#">' + soy.$$escapeHtml("All") + '</a></dd><dd>' + soy.$$escapeHtml("Custom") + '</dd>' : '<dd>' + soy.$$escapeHtml("All") + '</dd><dd><a class="qf-configurable" href="#">' + soy.$$escapeHtml("Custom") + '</a></dd>') + '</dl></div><div class="qf-picker-content ' + ((! opt_data.isConfigurable) ? 'qf-picker-unconfigurable' : '') + '"></div><div class="qf-picker-footer"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.fieldPicker.soyTemplateName = 'JIRA.Templates.QuickForm.fieldPicker';
}


JIRA.Templates.QuickForm.configurablePickerButton = function(opt_data, opt_ignored) {
  return '<a title="' + soy.$$escapeHtml(opt_data.label) + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldId) + '" class="qf-picker-button' + ((opt_data.isActive) ? ' qf-active' : '') + '" href="#">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.configurablePickerButton.soyTemplateName = 'JIRA.Templates.QuickForm.configurablePickerButton';
}


JIRA.Templates.QuickForm.unconfigurablePickerButton = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.label) + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldId) + '" class="qf-picker-button' + ((opt_data.isActive) ? ' qf-active' : '') + '" href="#">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.unconfigurablePickerButton.soyTemplateName = 'JIRA.Templates.QuickForm.unconfigurablePickerButton';
}


JIRA.Templates.QuickForm.errorMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.error({closeable: 'true', content: opt_data.message});
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.errorMessage.soyTemplateName = 'JIRA.Templates.QuickForm.errorMessage';
}
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/issue.soy' */
// This file was automatically generated from issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }


JIRA.Templates.Issue.editIssueError = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Edit Issue") + '</h2><div class="form-body">' + soy.$$filterNoAutoescape(opt_data.errorHtml) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.editIssueError.soyTemplateName = 'JIRA.Templates.Issue.editIssueError';
}


JIRA.Templates.Issue.editIssueForm = function(opt_data, opt_ignored) {
  return '<form action="#" name="jiraform" class="aui"><h2>' + ((opt_data.showFieldConfigurationToolBar) ? JIRA.Templates.Issue.fieldConfigurationToolbar(null) : '') + soy.$$filterNoAutoescape(opt_data.title) + '</h2><div class="form-body"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.issueId) + '" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" /><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '" /><div class="content">' + ((opt_data.fieldsHtml) ? soy.$$filterNoAutoescape(opt_data.fieldsHtml) : '') + ((opt_data.commentField) ? soy.$$filterNoAutoescape(opt_data.commentField.editHtml) : '') + '<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.modifierKey)) + '" class="button" id="edit-issue-submit" name="Edit" type="submit" value="' + soy.$$escapeHtml("Update") + '" /><a href="#" accesskey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.modifierKey)) + '" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.editIssueForm.soyTemplateName = 'JIRA.Templates.Issue.editIssueForm';
}


JIRA.Templates.Issue.fieldConfigurationToolbar = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'qf-form-operations', content: '' + aui.toolbar2.item({item: 'secondary', content: '' + aui.buttons.button({text: ' ' + soy.$$escapeHtml("Configure Fields"), id: 'qf-field-picker-trigger', extraClasses: 'toolbar-trigger', iconText: "Configure Fields", iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-configure'})})});
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.fieldConfigurationToolbar.soyTemplateName = 'JIRA.Templates.Issue.fieldConfigurationToolbar';
}


JIRA.Templates.Issue.issueFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.hasTabs) {
    output += '<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';
    var tabList64 = opt_data.tabs;
    var tabListLen64 = tabList64.length;
    for (var tabIndex64 = 0; tabIndex64 < tabListLen64; tabIndex64++) {
      var tabData64 = tabList64[tabIndex64];
      output += (tabData64) ? '<li class="menu-item ' + ((tabData64.isFirst) ? 'first active-tab' : '') + ' "><a href="#tab-' + soy.$$escapeHtml(tabData64.position) + '" ><strong>' + soy.$$escapeHtml(tabData64.label) + '</strong></a></li>' : '';
    }
    output += '</ul>';
    var tabList78 = opt_data.tabs;
    var tabListLen78 = tabList78.length;
    for (var tabIndex78 = 0; tabIndex78 < tabListLen78; tabIndex78++) {
      var tabData78 = tabList78[tabIndex78];
      if (tabData78) {
        output += '<div class="tabs-pane ' + ((tabData78.isFirst) ? 'active-pane' : '') + '" id="tab-' + soy.$$escapeHtml(tabData78.position) + '">';
        var fieldList88 = tabData78.fields;
        var fieldListLen88 = fieldList88.length;
        for (var fieldIndex88 = 0; fieldIndex88 < fieldListLen88; fieldIndex88++) {
          var fieldData88 = fieldList88[fieldIndex88];
          output += (fieldData88.editHtml) ? soy.$$filterNoAutoescape(fieldData88.editHtml) : '';
        }
        output += '</div>';
      }
    }
    output += '</div>';
  } else {
    var fieldList98 = opt_data.fields;
    var fieldListLen98 = fieldList98.length;
    for (var fieldIndex98 = 0; fieldIndex98 < fieldListLen98; fieldIndex98++) {
      var fieldData98 = fieldList98[fieldIndex98];
      output += (fieldData98.editHtml) ? soy.$$filterNoAutoescape(fieldData98.editHtml) : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.issueFields.soyTemplateName = 'JIRA.Templates.Issue.issueFields';
}


JIRA.Templates.Issue.createIssueForm = function(opt_data, opt_ignored) {
  var output = '<form name="jiraform" action="#" class="aui"><h2>' + ((opt_data.showFieldConfigurationToolBar) ? JIRA.Templates.Issue.fieldConfigurationToolbar(null) : '') + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body">';
  if (opt_data.issueSetupFields) {
    output += '<div class="issue-setup-fields">';
    var fieldList114 = opt_data.issueSetupFields;
    var fieldListLen114 = fieldList114.length;
    for (var fieldIndex114 = 0; fieldIndex114 < fieldListLen114; fieldIndex114++) {
      var fieldData114 = fieldList114[fieldIndex114];
      output += '<div class="qf-field qf-field-' + soy.$$escapeHtml(fieldData114.id) + ' qf-required" data-field-id="' + soy.$$escapeHtml(fieldData114.id) + '">' + soy.$$filterNoAutoescape(fieldData114.editHtml) + '</div>';
    }
    output += '</div>';
  }
  output += ((opt_data.parentIssueId) ? '<input type="hidden" name="parentIssueId" value="' + soy.$$escapeHtml(opt_data.parentIssueId) + '" />' : '') + '<input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" /><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '" /><div class="content">' + ((opt_data.fieldsHtml) ? soy.$$filterNoAutoescape(opt_data.fieldsHtml) : '') + '<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">' + ((! opt_data.disallowCreateAnother) ? '<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox" ' + ((opt_data.multipleMode) ? 'checked="checked"' : '') + ' />' + soy.$$escapeHtml("Create another") + '</label>' : '') + '<input accesskey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.modifierKey)) + '" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="' + soy.$$escapeHtml("Create") + '" /><a href="#" accesskey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.modifierKey)) + '" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.createIssueForm.soyTemplateName = 'JIRA.Templates.Issue.createIssueForm';
}


JIRA.Templates.Issue.createIssueError = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Create Issue") + '</h2><div class="form-footer">' + soy.$$filterNoAutoescape(opt_data.errorHtml) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.createIssueError.soyTemplateName = 'JIRA.Templates.Issue.createIssueError';
}


JIRA.Templates.Issue.undealtErrors = function(opt_data, opt_ignored) {
  var output = '<div>' + soy.$$escapeHtml("There were some errors when trying to create this issue") + '</div><ul>';
  var errorList173 = opt_data.errors;
  var errorListLen173 = errorList173.length;
  for (var errorIndex173 = 0; errorIndex173 < errorListLen173; errorIndex173++) {
    var errorData173 = errorList173[errorIndex173];
    output += '<li>' + soy.$$escapeHtml(errorData173) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.undealtErrors.soyTemplateName = 'JIRA.Templates.Issue.undealtErrors';
}
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(b){var a=function(e,c,d){b(this).trigger(e,c);if(d&&this.globalEventNamespaces){b.each(this.globalEventNamespaces,function(g,f){b(document).trigger(f+"."+e,c)})}return this};return{triggerEvent:a}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(a,b){return b.extend(a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(a,b){return b.extend(a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(b,f,c){var e=JIRA.Issues;var d=function(j){var k=b.current,i=k.$activeTrigger;if(i){return i.attr(j)}};var g=function(){var i=d("data-issueKey");if(!i&&f.getIssueKey()){i=f.getIssueKey()}if(!i&&c.getSelectedIssueKey()){i=c.getSelectedIssueKey()}if(!i&&e){i=e.Api.getSelectedIssueKey()}return i};var h=function(j){var i=g();if(!i){return j}return j+" : "+i};var a=function(){return e||c.isNavigator()||d("data-issueKey")};return{getActionIssueKey:g,getAttrFromActiveTrigger:d,getIssueActionTitle:h,shouldShowIssueKeyInTitle:a}});AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey);AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger);AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle);AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(c,e,b,k){var a=function(q){var o,n,m,p=q.closest(".tabs-pane");if(p.length){n=p.closest(".aui-tabs");o=p.attr("id");m=n.find("a[href='#"+o+"']");m.click()}};var h=function(n,m){return l("error",n,m,false)};var g=function(o,p){var n,m=[];k.each(p,function(r,u){var t,q,s=o.find(":input[name='"+r+"']").last();if(s.length===1){if(!n){n=s}q=k("<div class='error' />").attr("data-field",r).text(u);t=s.closest(".field-group, .group");t.find(".error").remove();t.append(q)}else{if(s.length===0){m.push(u)}}});if(m.length>0){h(o,c.undealtErrors({errors:m}))}a(o.find(".error:first"));if(n){n.focus()}};var l=function(m,o,n,q){var p=o.find(".aui-message-context");if(!p.length){p=k("<div class='aui-message-context' />");p.prependTo(o.find(".form-body"))}p.empty();b[m](p,{shadowed:false,closeable:q,body:n})};var j=function(n,m){return l("success",n,m,true)};var i=function(n){var m=k(n);return{html:m.not("script"),scripts:m.filter("script")}};var d=function(m){if(k.isFunction(m)){return m}else{return function(){return m}}};var f=function(){e.get("keyboard-accesskey-modifier")};return{activateTabWithChild:a,applyErrorMessageToForm:h,applyErrorsToForm:g,applyMessageToForm:l,applySuccessMessageToForm:j,getModifierKey:f,extractScripts:i,makePropertyFunc:d}});AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild);AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm);AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm);AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm);AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm);AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts);AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(b,e,d,a,c,f){return e.extend({init:function(g){this.descriptor=g;this.$element=f("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var g=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){g.$element.animate({backgroundColor:"#fff"},function(){g.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(h){var g;this.active=true;this.$element.addClass("qf-field-active").show();this.$element.find("textarea").trigger("refreshInputHeight");if(!h){g=this.render();this.$element.append(g.scripts);this.focus();a.trigger(c.NEW_CONTENT_ADDED,[this.$element]);this.$element.scrollIntoView();this.triggerEvent("activated")}},hasVisibilityFeature:function(){return !!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return !!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(g){this.render();this.active=false;this.$element.removeClass("qf-field-active").hide();if(!g){this.triggerEvent("disabled")}},render:function(){var h=d.field(this.descriptor),g=b.extractScripts(h);this.$element.html(g.html).addClass("qf-field").data("model",this);return{element:this.$element,scripts:g.scripts}}})});AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery"],function(a,c,b,d,e){return a.extend({init:function(f){this.userFieldsResource=f.userFieldsResource;this.fieldsResource=f.fieldsResource;this.retainedFields=[];this._hasRetainFeature=false;this._hasVisibilityFeature=true},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(f){if(this._hasRetainFeature){this.removeFieldToRetainValue(f);this.retainedFields.push(f)}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(g){if(this._hasRetainFeature){var f=e.inArray(g,this.retainedFields);if(f!=-1){this.retainedFields.splice(f,1)}}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature){return this.retainedFields}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},hasRetainedValue:function(f){if(this._hasRetainFeature){return e.inArray(f.id,this.retainedFields)!==-1}else{throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},refresh:function(h){var f=this,g=e.Deferred(),i;if(h){i=h+"&retainValues=true"}d.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,success:function(j){f._update(j)},complete:function(k,l,j){if(j.successful){g.resolveWith(f,arguments)}else{f.triggerEvent("serverError",[j]);g.rejectWith(f,[j])}}});return g.promise()},_update:function(f){this.atlToken=f.atl_token;this.formToken=f.formToken;this.fields=f.fields;this.sortedTabs=f.sortedTabs;this.userPreferences=f.userPreferences},setFields:function(f){this.fields=f},getConfigurableFields:function(){return this.getFields()},getFields:function(){var f=this,g=e.Deferred();if(!this.fields){this.refresh().done(function(){g.resolve(f.fields)})}else{g.resolve(f.fields)}return g.promise()},_mungeTabs:function(g){var f=0,h=[];e.each(g,function(j,k){f++;if(k.tab){if(!h[k.tab.position]){h[k.tab.position]=b.copyObject(k.tab)}if(k.tab.position===0){h[k.tab.position].isFirst=true}if(!h[k.tab.position].fields){h[k.tab.position].fields=[]}h[k.tab.position].fields.push(b.copyObject(k))}});return h},getTabs:function(){var f=this,g=e.Deferred();this.getFields().done(function(h){var i=f._mungeTabs(h);g.resolve(i)});return g.promise()},getSortedTabs:function(){var f=e.Deferred();if(!this.sortedTabs){this.refresh().done(function(){f.resolve(this.sortedTabs)})}else{f.resolve(this.sortedTabs)}return f.promise()},getUserFields:function(){var f=this,g=e.Deferred();if(!this.userPreferences){this.refresh().done(function(){g.resolve(f.userPreferences.fields)})}else{g.resolve(f.userPreferences.fields)}return g.promise()},setUserFields:function(f){var g={};g.fields=f;return this.updateUserPrefs(g)},hasRetainFeature:function(){return !!this._hasRetainFeature},hasVisibilityFeature:function(){return !!this._hasVisibilityFeature},getUseConfigurableForm:function(){var f=this,g=e.Deferred();if(!this.userPreferences){this.refresh().done(function(){g.resolve(f.userPreferences.useQuickForm)}).fail(function(){g.reject()})}else{g.resolve(f.userPreferences.useQuickForm)}return g.promise()},setUseConfigurableForm:function(f){var g={};g.useQuickForm=f;return this.updateUserPrefs(g)},updateUserPrefs:function(h){var g=e.Deferred(),f=this;if(c.get("remote-user")===""){g.done();return g.promise()}if(!this.userPreferences){g.reject();return g.promise()}if(!h.fields){h.fields=this.userPreferences.fields}if(typeof h.showWelcomeScreen==="undefined"){h.showWelcomeScreen=this.userPreferences.showWelcomeScreen}if(typeof h.useQuickForm==="undefined"){h.useQuickForm=this.userPreferences.useQuickForm}return d.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(h),dataType:"json",contentType:"application/json",complete:function(j,k,i){if(i.successful){f.userPreferences=h}else{f.triggerEvent("serverError",[i])}}})}})});AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","underscore","jquery"],function(a,c,b,d){return a.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{};this.userFieldsResource=c()+"/rest/quickedit/1.0/userpreferences/create";this._hasRetainFeature=true;this._hasVisibilityFeature=true;this.retainedFields=[];this.dirtyFields=[];this.initIssueType=e.issueType;this.initProjectId=e.projectId;this.parentIssueId=e.parentIssueId;this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS;if(e.nonRetainedFields){this.nonRetainedFields=b.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS)}},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,f=d.Deferred(),g=[];this.getUserFields().done(function(h){d.each(h,function(k,j){g.push(j)});e.getRequiredFields().done(function(i){d.each(i,function(k,j){if(d.inArray(j.id,g)===-1){g.push(j.id)}});f.resolve(g)})});return f.promise()},hasVisibilityFeature:function(e){return !e.required},getFieldsResource:function(){var e=c()+"/secure/QuickCreateIssue!default.jspa?decorator=none";if(this.parentIssueId){return e+"&parentIssueId="+this.parentIssueId}if(this.initIssueType){e=e+"&issuetype="+this.initIssueType;delete this.initIssueType}if(this.initProjectId){e=e+"&pid="+this.initProjectId;delete this.initProjectId}return e},addFieldToRetainValue:function(h,f){var e=!b.contains(this.nonRetainedFields,h);var g=h.match(/^filetoconvert/)!==null;if(e||g||f){this._super(h)}},getRequiredFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.required){f.push(j)}});e.resolve(f)});return e.promise()},getConfigurableFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.id!=="project"&&j.id!=="issuetype"){f.push(j)}});e.resolve(f)});return e.promise()},getIssueSetupFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.id==="project"||j.id==="issuetype"){f.push(j)}});e.resolve(f)});return e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e);if(!this.fieldIsDirty(e)){this.dirtyFields.push(e)}},fieldIsDirty:function(e){return b.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){if(this.isCustomFieldId(e)){return e.match(this.CUSTOMFIELD_PATTERN)[1]}else{return e}},normalizeFieldParam:function(e,f){if(e=="filetoconvert"){return e+"-"+f}else{if(this.isCustomFieldId(e)){return this.normalizeCustomFieldId(e)}else{if(this.isTimetrackingFieldId(e)){return"timetracking"}else{return e}}}}})});AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(a,b,c){return a.extend({getUnconfigurableTabs:function(){var d=this,e=c.Deferred();d.getTabs().done(function(g){var f=g.slice(0);f[0].fields=f[0].fields.slice(0);c.each(f[0].fields,function(h,j){if(j.id==="comment"){f[0].fields.splice(h,1);return false}});e.resolve(f)});return e.promise()},getCommentField:function(){var d=c.Deferred();this.getFields().done(function(e){c.each(e,function(f,g){if(g.id==="comment"){d.resolve(g)}});d.reject()});return d.promise()}})});AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(b,a){return function(c){return new b({fieldsResource:a()+"/secure/QuickEditIssue!default.jspa?issueId="+c+"&decorator=none",userFieldsResource:a()+"/rest/quickedit/1.0/userpreferences/edit"})}});AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","underscore","jquery"],function(c,a,b,g,h,e,f,i){var d=AJS.escapeHTML;return b.extend({init:function(j){this.form=j},handleSubmitSuccess:function(m){function l(n,p,o){var q='<a href="'+o+'">'+n+" - "+d(p)+"</a>";return AJS.format("Issue {0} has been successfully created",q)}var j=this,k=this.form.$element.find("#summary").val();m.summary=k;this.form.triggerEvent("submitted",[m,this]);this.form.triggerEvent("issueCreated",[m,this],true);if(j.form.model.isInMultipleMode()){this.form.render().done(function(){var n=l(m.issueKey,k,contextPath+"/browse/"+m.issueKey);c.applySuccessMessageToForm(j.form.getForm(),n)})}else{this.form.triggerEvent("sessionComplete")}},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},serializeForToggle:function(l){if(!this.form.model.hasRetainFeature()){return this.form.getForm().serialize()}var n=this.form.model.prevActiveFields||[];var t=this.form.getForm().serializeArray();var p=function(u){return this.form.model.normalizeFieldParam(u.name,u.value)}.bind(this);var m=this.form.getActiveFieldIds();var o=i.grep(t,function(u){return i.inArray(p(u),m)!==-1});var j=i.grep(n,function(u){return i.inArray(p(u),m)===-1});var k=i.map(j,function(u){return p(u)});var r=i.merge(o,j);var q=i.merge(m,k);this.form.model.prevActiveFields=i.extend(true,[],r);if(l){q=this.executeProjectChangedSecuritySettingAction(q)}q=q.filter(function(u){return !this.form.model.isCustomFieldId(u)||this.form.model.fieldIsDirty(u)}.bind(this));var s=i.merge([{name:"retainValues",value:true}],r);i.each(t,function(u,v){if(v.name==="pid"||v.name==="issuetype"){s.push(v)}});s.push({name:"toggle",value:true});i.each(q,function(u,v){s.push({name:"fieldsToRetain",value:v})});s.push({name:"formToken",value:this.form.model.getFormToken()});return i.param(s)},executeProjectChangedSecuritySettingAction:function(j){return f.reject(j,function(k){return k==="security"})},prepareFieldsToRetain:function(j,k){i.each(j,function(l,m){k.push({name:"fieldsToRetain",value:m})});return k},setIssueType:function(){var j=this,k=this.serializeForToggle();this.form.invalidateFieldsCache();this.form.disable();this.form.render(k).done(function(){j.form.enable()})},setProjectId:function(){var j=this,k=this.serializeForToggle(true);this.form.invalidateFieldsCache();this.form.disable();this.form.render(k).done(function(){j.form.enable()})},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){if(this.form.isDirty){this.form.getForm().addClass(g.ClassNames.BY_DEFAULT)}},decorate:function(){var j=this;this.getProjectField().change(function(){j.saveFormDirtyStatus();h.trigger("dialogBeforeContentChange",["projectId",this.value,e.current.options.id]);j.setProjectId(this.value)});this.getIssueTypeField().change(function(){j.saveFormDirtyStatus();h.trigger("dialogBeforeContentChange",["issueType",this.value,e.current.options.id]);j.setIssueType(this.value)});this.getCreateAnotherCheckbox().change(function(){j.form.model.setIsMultipleMode(this.checked)})},decorateFields:function(){var j=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){if(j.form.model.isCustomFieldId(this.name)){j.form.model.markFieldAsDirty(this.name)}})},sendQuickEditAnalyticsEvent:function(l){var j=l.instance;var k=l.name;var o;var n;var m=j.model.fields.map(function(p){return{id:p.id,required:p.required}});if(l.field){n={id:l.field.descriptor.id,required:l.field.descriptor.required}}j.model.getActiveFieldIds().then(function(p){o=m.filter(function(q){return p.some(function(r){return r===q.id})});AJS.trigger("analyticsEvent",{name:k,data:{allFieldsShown:l.allFieldsShown,field:JSON.stringify(n),allFields:JSON.stringify(m),displayedFields:l.allFieldsShown?JSON.stringify(m):JSON.stringify(o)}})})}})});AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(d,b,a,c,g,j,k,i,l,h){var f=AJS.extractBodyFromResponse;var e=AJS.log;return b.extend({submit:function(){var m=this;m.getForm().addClass("submitting");this.triggerEvent("submitting",[],true);return a.makeRequest({url:this.getAction(),type:"POST",beforeSend:function(){m.disable()},data:this.serialize(),complete:function(s,t,o){var q=o.data;m.getForm().find(".aui-message-context").remove();m.enable();m.getForm().find(".error").remove();if(o.successful){m.performAnalytics();if(q&&q.fields){m.invalidateFieldsCache();m.model.setFields(q.fields)}if(typeof q==="string"){var r=l(f(q));var p=r.find("#atl_token").val();if(p){m.model.atlToken=p;m.getForm().find('input[name="atl_token"]').val(p)}var n=new c({offsetTarget:"body",content:r});n._handleServerSuccess=function(){if(n.prev){n.prev._removeStackState();n.prev._resetWindowTitle();n._removeStackState()}n.hide();m.triggerEvent("sessionComplete",[],true);m.handleSubmitSuccess()};n._handleServerError=function(u){n.hide();m.handleSubmitError(u)};n.show()}else{m.handleSubmitSuccess(o.data)}}else{m.handleSubmitError(s)}m.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable");this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable");this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(o){var m=this,n=this.getForm().serialize();if(this.model.isInMultipleMode&&this.model.isInMultipleMode()){n=n+"&multipleMode=true"}if(this.model.hasRetainFeature()){this.model.clearRetainedFields();l.each(this.getActiveFieldIds(),function(q,p){m.model.addFieldToRetainValue(p,o)});l.each(this.model.getFieldsWithRetainedValues(),function(p,q){n=n+"&fieldsToRetain="+q})}return n},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted");i.reloadViaWindowLocation()},performAnalytics:function(){var m=function(p,q){var o="***** Analytics log ["+p+"]";if(q){o+="["+JSON.stringify(q)+"]"}e(o);if(AJS.EventQueue){AJS.EventQueue.push({name:p,properties:q||{}})}};var n=function(q){var o={};var r=h.filter(q,function(s){return !h.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],s.name)});var p=h.filter(r,function(s){return s.value!=""});h.each(p,function(t){var s=t.name;if(!h.has(o,s)){o[s]=[]}o[s].push(t.value)});return o};this.previousAnalytics=(function(w,A){var r=n(w);var y=h.keys(r);var s=h.keys(A.data);var v=h.difference(y,s);var z=h.difference(s,y);var x=h.intersection(s,y);var p=h.filter(x,function(B){return h.isEqual(A.data[B],r[B])});var o=h.difference(x,p);var u=A.count+1;var t=(g.current.options.id==="edit-issue-dialog");var q={"atlassian.numCreates":u,"edit.form":t};h.each(v,function(B){q[B]="added"});h.each(z,function(B){q[B]="removed"});h.each(p,function(B){q[B]="same"});h.each(o,function(B){q[B]="changed"});m("quick.create.fields",q);return{data:r,count:u}})(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(m){d.applyErrorMessageToForm(this.getForm(),[m])},handleSubmitError:function(r){var m=this;var s;if(!r.responseText){var o=a.SmartAjaxResult(r,undefined,r.statusText,"",false,undefined);var n=a.buildSimpleErrorContent(o);m.addErrorMessage(n)}else{try{s=JSON.parse(r.responseText)}catch(q){}if(s){if(s.errorMessages&&s.errorMessages.length){d.applyErrorMessageToForm(this.getForm(),s.errorMessages[0])}if(s&&s.errors&&r.status===400){if(this.getFieldById){l.each(s.errors,function(t){if(/^timetracking/.test(t)){m.getFieldById("timetracking").done(function(u){k.trigger(j.VALIDATE_TIMETRACKING,[m.$element]);u.activate(true)})}else{if(/^worklog/.test(t)){m.getFieldById("worklog").done(function(u){k.trigger(j.VALIDATE_TIMETRACKING,[m.$element]);u.activate(true)})}else{m.getFieldById(t).done(function(u){u.activate(true)})}}})}d.applyErrorsToForm(this.getForm(),s.errors);this.triggerEvent("validationError",[this,s.errors],true)}var p=m.$element.find(".error");if(p.length){p[0].scrollIntoView(false)}}}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(m){var n=[];if(!m){return n}var p=m.split("&");for(var o=0;o<p.length;o++){var q=p[o].split("=");if(q[0]=="filetoconvert"){n.push(q[1])}}return n},_setActiveAttachments:function(n){var m=this.$element.find("input[name=filetoconvert]");m.each(function(){var p=l(this);var o=h.contains(n,p.attr("value"));p.prop("checked",o)})},render:function(o){var n=l.Deferred(),m=this;var p=m._getActiveAttachments(o);if(o){this.invalidateFieldsCache();this.model.refresh(o).done(function(){m._render().done(function(r,q){m.triggerEvent("rendered",[m.$element]);n.resolveWith(m,[m.$element,q])})})}else{m._render().done(function(r,q){m.triggerEvent("rendered",[m.$element]);n.resolveWith(m,[m.$element,q])})}n.always(function(){m._setActiveAttachments(p)});return n.promise()}})});AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(a,c,b,d){return a.extend({getFields:function(){var f=d.Deferred(),e=this;if(!this.fields){this.fields=[];this.model.getConfigurableFields().done(function(g){d.each(g,function(h,k){var j=e.createField(k);e.fields.push(j)});f.resolveWith(e,[e.fields])})}else{f.resolveWith(this,[this.fields])}return f.promise()},getActiveFieldIds:function(){var f=[],e=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");d.each(e,function(j,k){var h=d(k);var g=h.data("model");var l=h.data("field-id")||g&&g.getId();if(l!=null){f.push(l)}if(l==="attachment"){h.find("input[name=filetoconvert]").each(function(){f.push(this.id)})}});return f},createField:function(h){h.hasVisibilityFeature=this.model.hasVisibilityFeature(h);if(this.model.hasRetainFeature(h)){h.hasRetainFeature=true;h.retainValue=this.model.hasRetainedValue(h)}var e=this,g=new c(h),f=new b(e);if(h.hasVisibilityFeature){g.bind("activated",function(){e.model.setUserFields(e.getActiveFieldIds());g.highlight();e.triggerEvent("QuickForm.fieldAdded",[g]);f.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",field:g,instance:e})}).bind("disabled",function(){e.model.setUserFields(e.getActiveFieldIds());e.triggerEvent("QuickForm.fieldRemoved",[g]);f.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",field:g,instance:e})})}return g},getFieldById:function(g){var e=this,f=d.Deferred();this.getFields().done(function(h){d.each(h,function(j,k){if(k.getId()===g){f.resolveWith(e,[k])}});f.rejectWith(e,[])});return f.promise()},hasNoVisibleFields:function(){var e=d.Deferred();e.resolve(this.getActiveFieldIds().length===0);return e.promise()},renderFormContents:function(){var g=d.Deferred(),f=d(),e=this;e.getFields().done(function(i){var h=e.reorderFieldsToRender(i);e.model.getActiveFieldIds().done(function(j){d.each(h,function(){var k=this.render();f=f.add(k.scripts);e.getFormContent().append(k.element)});d.each(j,function(l,k){d.each(h,function(){if(this.getId()===k){this.activate(true)}})});d.each(h,function(){if(!this.isActive()){this.disable(true)}});e.hasNoVisibleFields().done(function(l){if(l===true){for(var k=0;k<3;k++){if(h[k]){h[k].activate(true)}}}g.resolveWith(this,[e.$element,f])})})});return g.promise()},reorderFieldsToRender:function(e){return e}})});AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery"],function(a,b,c){return a.extend({getFieldsHtml:function(){var d=this,e=c.Deferred(),f={};this.model.getTabs().done(function(g){if(g.length===1){f.fields=g[0].fields}else{f.tabs=g;f.hasTabs=true}e.resolveWith(d,[b.issueFields(f)])});return e.promise()},getActiveFieldIds:function(){var e=[];this.model.getFields().done(function(f){c.each(f,function(g,h){e.push(h.id)})});if(e.indexOf("attachment")){var d=this.$element.find("input[name=filetoconvert]").map(function(f,g){return g.id}).toArray();e.push.apply(e,d)}return e},getFields:function(){var e=c.Deferred(),d=this;if(!this.fields){this.fields=[];this.model.getFields().done(function(f){c.each(f,function(g,j){var h=d.createField(j);d.fields.push(h)});e.resolveWith(d,[d.fields])})}else{e.resolveWith(this,[this.fields])}return e.promise()}})});AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(d,c,e,a,g,b,f){return d.extend({init:function(h){this.model=h.model;this.helper=new c(this);this.globalEventNamespaces=h.globalEventNamespaces||[];this.issueId=h.issueId;this.title=h.title;this._serialization={};this.action=b()+"/secure/QuickCreateIssue.jspa?decorator=none";this.$element=f("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(h){return this.helper.handleSubmitSuccess(h)},_render:function(){var i=f.Deferred(),h=this;h.model.getIssueSetupFields().done(function(k){var j=e.createIssueForm({issueSetupFields:k,atlToken:h.model.getAtlToken(),formToken:h.model.getFormToken(),isConfigurable:true,title:h.title,parentIssueId:h.model.getParentIssueId(),multipleMode:h.model.isInMultipleMode(),showFieldConfigurationToolBar:!g.isAnonymous(),modifierKey:a.getModifierKey()});h.$element.html(j);h.helper.decorate();h.renderFormContents().done(function(m,l){h.helper.decorateFields();i.resolveWith(h,[h.$element,l])});h.bind("QuickForm.fieldAdded",function(){h.helper.decorateFields()})});return i.promise()}})});AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(c,a,d,f,b,e){return c.extend({init:function(g){this.model=g.model;this.globalEventNamespaces=g.globalEventNamespaces||[];this.issueId=g.issueId;this.title=g.title;this.action=b()+"/secure/QuickEditIssue.jspa?issueId="+g.issueId+"&decorator=none";this.$element=e("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(g){this.triggerEvent("submitted",[g]);this.triggerEvent("issueEdited",[g],true);this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var g=e.Deferred(),h=this.getActiveFieldIds();this.model.getUserFields().done(function(i){if(i.length===1&&i[0]==="comment"){g.resolve(false)}else{if(h.length===0||(h.length===1&&h[0]==="comment")){g.resolve(true)}else{g.resolve(false)}}});return g.promise()},_render:function(){var h=e.Deferred(),g=this,i=d.editIssueForm({issueId:this.issueId,title:this.title,atlToken:g.model.getAtlToken(),formToken:g.model.getFormToken(),isConfigurable:true,modifierKey:a.getModifierKey(),showFieldConfigurationToolBar:!f.isAnonymous()});this.$element.html(i);g.renderFormContents().done(function(k,j){g.getFieldById("comment").done(function(l){g.getFormContent().append(l.$element)});h.resolveWith(g,[g.$element,j])});return h.promise()}})});AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(b,a){return b.extend({init:function(d){var c=this;this.field=d.field;this.field.bind("disabled",function(){c.$element.removeClass("qf-active")}).bind("activated",function(){c.$element.addClass("qf-active")})},toggle:function(){if(this.field.isActive()){this.field.disable()}else{this.field.activate()}},getId:function(){return this.field.getId()},render:function(){this.$element=jQuery(a.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()}));this._assignEvents("button",this.$element);return this.$element},_events:{button:{click:function(c){this.toggle();c.preventDefault()}}}})});AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(b,a,c){return b.extend({init:function(d){this.descriptor=d},render:function(){this.$element=c(a.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:true}));return this.$element}})});AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(a,e,b,d,c,f){return d.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(g){this.isConfigurable=false;if(g!==true){this.hideCallback=function(){this.remove()};this.inlineDialog.hide();this.triggerEvent("switchedToAll")}},setForm:function(g){this.form=g},switchToCustom:function(g){this.isConfigurable=true;if(g!==true){this.hideCallback=function(){this.remove()};this.inlineDialog.hide();this.triggerEvent("switchedToCustom")}},hideCallback:function(){},bindInlineDialog:function(){var h=this;var g=this.getInlineDialogTrigger();function i(l,j,k){h.render().done(function(m){if(l.find(".qf-picker").length===0){l.html(m);l.click(function(q){q.stopPropagation()})}var p=g.offset().top-f(window).scrollTop();var o=f(window).height();var n=o-p-110;l.find(".qf-picker-content").css("maxHeight",n);k()})}if(this.inlineDialog){this.inlineDialog.remove()}this.inlineDialog=c(g,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){g.parent().addClass("active")},hideCallback:function(){g.parent().removeClass("active")},nobind:true});g.click(function(j){if(f("#inline-dialog-"+h.INLINE_DIALOG_ID).is(":visible")){h.inlineDialog.hide()}else{h.inlineDialog.show()}});return this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(h){var g=this;var i=f('<ul class="qf-picker-buttons" />').appendTo(this.$content);f.each(h,function(k,l){var m;var j;if(g.isConfigurable){g.form.getFieldById(l.id).done(function(o){if(o&&o.hasVisibilityFeature()){var p=f("<li />").appendTo(i);var n=new a({field:o});n.render().appendTo(p);g.buttons.push(n)}})}else{j=new e(l);m=f("<li />").appendTo(i);j.render().appendTo(m)}});if(i.children().length===0){i.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")}},renderContents:function(){var g=this;var h=f.Deferred();this.form.model.getSortedTabs().done(function(i){if(i.length===1){g.renderButtons(i[0].fields)}else{f.each(i,function(j,k){if(k.fields.length>0){f("<h4><span></span></h4>").appendTo(g.$content).find("span").text(k.label);g.renderButtons(k.fields)}})}h.resolveWith(g,[g.$element])});return h.promise()},show:function(){this.inlineDialog.show()},render:function(){this.$element=f(b.fieldPicker({isConfigurable:this.isConfigurable}));this.$content=this.$element.find(".qf-picker-content");this._assignEvents("switchToCustom",this.$element.find(".qf-configurable"));this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable"));return this.renderContents()},_events:{switchToCustom:{click:function(g){this.switchToCustom();g.preventDefault()}},switchToAll:{click:function(g){this.switchToAll();g.preventDefault()}}}})});AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(i,c,a,e,b,g,j,f,d,h){return a.extend({init:function(k){this.$element=h("<div />").addClass("qf-container");this.options=c.makePropertyFunc(k);this.fieldPicker=new i();this.successData=[];this.helper=new e(this)},decorateRenderers:function(){var k=this;if(!this.fieldPicker.decorated){this.fieldPicker.bind("switchedToAll",function(){k.unconfigurableForm.render(k.currentView.serialize(true)).done(function(){k.fieldPicker.show()});k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.all",allFieldsShown:true,instance:k})});this.fieldPicker.bind("switchedToCustom",function(){k.configurableForm.render(k.currentView.serialize(true)).done(function(){k.fieldPicker.show()});k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.custom",allFieldsShown:false,instance:k})});this.fieldPicker.decorated=true}if(!this.configurableForm.decorated){this.configurableForm.bind("rendered",function(m,l){k.currentView=k.configurableForm;k.fieldPicker.switchToCustom(true);k.fieldPicker.setForm(k.configurableForm);k.fieldPicker.bindInlineDialog();k.applyGlobalDecorator(l);k.model.setUseConfigurableForm(true);k.triggerEvent("configurableFormRendered")});this.configurableForm.bind("submitted",function(m,l){k.successData.push(l);k.triggerEvent("configurableFormSubmitted");k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:false,instance:k})});this.configurableForm.decorated=true}if(!this.unconfigurableForm.decorated){this.unconfigurableForm.bind("rendered",function(m,l){k.fieldPicker.switchToAll(true);k.fieldPicker.setForm(k.unconfigurableForm);k.fieldPicker.bindInlineDialog();k.currentView=k.unconfigurableForm;k.applyGlobalDecorator(l);k.model.setUseConfigurableForm(false);k.triggerEvent("unconfigurableFormRendered")});this.unconfigurableForm.bind("submitted",function(m,l){k.successData.push(l);k.triggerEvent("unconfigurableFormSubmitted");k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:true,instance:k})});this.unconfigurableForm.decorated=true}},applyGlobalDecorator:function(m){function l(){if(k.currentView.setInitialFocus){k.currentView.setInitialFocus()}}var k=this;m.detach();this.$element.html(m);this.triggerEvent("contentRefreshed",[this.$element]);if(j.isIE()){window.setTimeout(l,0)}else{l()}},asDialog:function(m){m=h.extend(true,{},m);var k=this;var n;var l=!!m.modeless;this.dialog=n=new b({id:m.id,trigger:m.trigger,windowTitle:(m.windowTitle!==undefined?m.windowTitle:!l),width:(l)?g.WIDTH_PRESETS.medium:g.WIDTH_PRESETS.large,defineResources:function(){this.requireContext("jira.create.issue")},content:function(o){k.render().done(function(){o(k.$element)});k.triggerEvent("dialogShown")},submitHandler:function(p,o){p.preventDefault();k.currentView.submit().then(o,o)},stacked:true,modeless:l});if(m.id==="edit-issue-dialog"){h(this.dialog).on("beforeShow",function(o){if(!f.getIssueKey()&&!d.isRowSelected()){o.preventDefault()}})}this.dialog._focusFirstField=function(){b.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])};this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){n.hide()});this.configurableForm.bind("sessionComplete",function(){n.hide()})}).bind("contentRefreshed",function(){n.notifyOfNewContent()});n.bind("Dialog.hide",function(){if(k.successData.length){k.triggerEvent("sessionComplete",[k.successData],true);k.successData=[]}});k.$element.ajaxStart(function(){n.showFooterLoadingIndicator()}).ajaxStop(function(){n.hideFooterLoadingIndicator()});n.getQuickForm=function(){return k};n.dirtyFormWarning();return n},lazyInit:function(){var k=this;var l=this.options.call(this);this.model=l.model;this.errorHandler=l.errorHandler;this.globalEventNamespaces=l.globalEventNamespaces;this.configurableForm=l.configurableForm;this.unconfigurableForm=l.unconfigurableForm;this.sessionComplete=l.sessionComplete;this.model.clearRetainedFields();this.configurableForm.invalidateFieldsCache();this.model.bind("serverError",function(n,m){k.$element.html(k.errorHandler.render(m));k.triggerEvent("contentRefreshed",[this.$element])});this.triggerEvent("initialized");this.decorateRenderers()},render:function(){var k=this;var l=h.Deferred();this.lazyInit();k.model.getUseConfigurableForm().done(function(m){if(m===true){k.configurableForm.render().done(function(o,n){l.resolveWith(k,[k.$element]);k.$element.append(n)})}else{k.unconfigurableForm.render().done(function(o,n){l.resolveWith(k,[k.$element,n]);k.$element.append(n)})}}).fail(function(){l.resolveWith(k,[k.$element])});return l.promise()}})});AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(c,a,b){return c.extend({getErrorMessageFromSmartAjax:function(d){var f,g;if(d.hasData&&d.status!==401){try{g=JSON.parse(d.data);if(g.errorMessages&&g.errorMessages.length>0){f=a.errorMessage({message:g.errorMessages[0]})}else{f=b.buildDialogErrorContent(d,true).html()}}catch(h){f=b.buildDialogErrorContent(d,true).html()}}else{f=b.buildDialogErrorContent(d,true).html()}return f},render:function(e){var d=this.getErrorMessageFromSmartAjax(e);return this._render(d)}})});AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(c,a,b){return c.extend({_render:function(d){return b(a.createIssueError({errorHtml:d}))}})});AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(c,a,b){return c.extend({_render:function(d){return b(a.editIssueError({errorHtml:d}))}})});AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(g,c,d,a,f,b,e){return g.extend({init:function(h){this._serialization={};this.globalEventNamespaces=h.globalEventNamespaces||[];this.model=h.model;this.helper=new c(this);this.title=h.title;this.action=b()+"/secure/QuickCreateIssue.jspa?decorator=none";this.$element=e("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(h){this.helper.handleSubmitSuccess(h)},_render:function(){var i=e.Deferred(),h=this;this.getFieldsHtml().done(function(j){h.model.getIssueSetupFields().done(function(m){var l=d.createIssueForm({issueSetupFields:m,fieldsHtml:j,parentIssueId:h.model.getParentIssueId(),atlToken:h.model.getAtlToken(),formToken:h.model.getFormToken(),title:h.title,multipleMode:h.model.isInMultipleMode(),showFieldConfigurationToolBar:!f.isAnonymous(),modifierKey:a.getModifierKey()}),k=a.extractScripts(l);h.$element.empty().append(k.html);h.helper.restoreFormDirtyStatus();h.helper.decorate();h.helper.decorateFields();i.resolveWith(h,[h.$element,k.scripts])})});return i.promise()}})});AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(f,a,c,e,b,d){return f.extend({init:function(g){this.globalEventNamespaces=g.globalEventNamespaces||[];this.model=g.model;this.issueId=g.issueId;this.title=g.title;this.action=b()+"/secure/QuickEditIssue.jspa?issueId="+g.issueId+"&decorator=none";this.$element=d("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var g=this,h=d.Deferred(),i={};this.model.getUnconfigurableTabs().done(function(j){if(j.length===1){i.fields=j[0].fields}else{i.tabs=j;i.hasTabs=true}h.resolveWith(g,[c.issueFields(i)])});return h.promise()},handleSubmitSuccess:function(g){this.triggerEvent("submitted",[g]);this.triggerEvent("issueEdited",[g],true);this.triggerEvent("sessionComplete")},_render:function(){var h=d.Deferred(),g=this;this.getFieldsHtml().done(function(i){var j={fieldsHtml:i,title:g.title,issueId:g.issueId,atlToken:g.model.getAtlToken(),formToken:g.model.getFormToken(),modifierKey:a.getModifierKey(),showFieldConfigurationToolBar:!e.isAnonymous()};this.model.getCommentField().then(function(m){var l,k;j.commentField=m;l=c.editIssueForm(j);k=a.extractScripts(l);g.$element.html(k.html);h.resolveWith(g,[g.$element,k.scripts])},function(){var l=c.editIssueForm(j),k=a.extractScripts(l);g.$element.html(k.html);h.resolveWith(g,[g.$element,k.scripts])})});return h.promise()}})});AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,d,c,b,a){return function(f){f=f||{};return new e(function(){f.globalEventNamespaces=f.globalEventNamespaces||["QuickCreateIssue"];var j="Create Issue",g=new a({projectId:f.pid,issueType:f.issueType}),i=new d({model:g,title:j,globalEventNamespaces:f.globalEventNamespaces}),h=new c({model:g,title:j,globalEventNamespaces:f.globalEventNamespaces});return{globalEventNamespaces:f.globalEventNamespaces,model:g,errorHandler:new b(),configurableForm:i,unconfigurableForm:h}})}});AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(d,e,f,b,a,g,h,c){function j(k){return k.parentIssueId||h.getIssueId()||c.getSelectedIssueId()}return function i(k){k=k||{};return new d(function(){k.globalEventNamespaces=k.globalEventNamespaces||["QuickCreateSubtask"];var o=j(k),p=g.getIssueActionTitle("Create Subtask"),l=new b({parentIssueId:o,projectId:k.pid,issueType:k.issueType}),n=new e({model:l,title:p,globalEventNamespaces:k.globalEventNamespaces}),m=new a({model:l,title:p,globalEventNamespaces:k.globalEventNamespaces});return{globalEventNamespaces:k.globalEventNamespaces,model:l,errorHandler:new f(),configurableForm:n,unconfigurableForm:m}})}});AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,a,f,g,c,i,h,d,k){function j(l){var m=g.getAttrFromActiveTrigger("data-issueId");if(k.isFunction(l.issueId)){return l.issueId(l)}else{if(l.issueId){return l.issueId}else{if(m){return m}else{return h.getIssueId()||d.getSelectedIssueId()}}}}function b(){var l="Edit Issue";if(g.shouldShowIssueKeyInTitle()){return g.getIssueActionTitle(l)}else{return l}}return function(l){l=l||{};return new e(function(){var q=j(l),p=b(),m=c(q),o=new a({title:p,model:m,issueId:q,globalEventNamespaces:["QuickEdit"]}),n=new i({title:p,model:m,issueId:q,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:m,errorHandler:new f(),configurableForm:o,unconfigurableForm:n}})}});AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(b,d){var c=AJS.dim;var a=AJS.undim;return{showLoadingIndicator:function(){c();b.showLoadingIndicator()},hideLoadingIndicator:function(e){a();b.hideLoadingIndicator();if(e){d.showErrorMsg(null,"The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.")}}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue-bootstrap', location = 'js/init/edit-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,h,e,f,b){var d=function(){b.disable();f.showLoadingIndicator()};var c=function(){f.hideLoadingIndicator(true);b.enable()};var g;var a=function(l){l.preventDefault();d();var k="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue";var j=e([k]);j.then(function(){var n=require("quick-edit/init/edit");if(!g){g=n.initDialog()}g._events.trigger.simpleClick.call(g,l,i(l.target));b.enable()},function m(){c()})};i(document).delegate(".issueaction-edit-issue","click",a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue', location = 'js/init/edit.js' */
define("quick-edit/init/edit",["quick-edit/form/factory/edit-issue","quick-edit/util/dialog","aui/tabs","jquery"],function(c,a,d,e){var b=function(){var f=c().asDialog({windowTitle:function(){return a.getIssueActionTitle("Edit Issue")},id:"edit-issue-dialog"});e(document).bind("dialogContentReady",function(){d.setup()});return f};return{initDialog:b}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(l,k,h,i,b){var f=function(){b.disable();i.showLoadingIndicator()};var c=function(){i.hideLoadingIndicator(true);b.enable()};var g;var a=false;l(document).on("simpleClick",".create-issue, .create-issue-type",function(o){o.preventDefault();if(!a){a=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(d.bind(undefined,o),function p(){c();a=false})}});var d=function(n){var m=require("quick-edit/init/create");m.initIssueDialog(n);b.enable();a=false};l(function(){g=document.getElementById("stqc_show");if(g){g.onclick=null}});var j=false;l(document).on("simpleClick",".issueaction-create-subtask",function(o){o.preventDefault();if(!j){j=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(e,function p(){c();j=false})}});var e=function(n){var m=require("quick-edit/init/create");m.initSubtaskDialog(n);b.enable();j=false}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jquery"],function(d,b,a,e){var c=function(j){var g=e(j.target);var i=g.is("a")?g:g.find("a");var k=parseUri(i.attr("href")).queryKey;var h={pid:k.pid,issueType:k.issuetype};h=e.extend(h,{pid:g.attr("data-pid"),issueType:g.attr("data-issue-type")});d(h).asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create Issue"}).show()};var f=function(j){var g=e(j.target);var i=g.is("a")?g:g.find("a");var h={parentIssueId:i.attr("data-issueid")};b(h).asDialog({windowTitle:function(){return a.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:c,initSubtaskDialog:f}});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml("Assign to me") + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: "No project templates could be found."}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: "No project templates could be found."});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml("Loading project templates") + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml("Import a project") + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml("Create with shared configuration") + '</span> ' + soy.$$escapeHtml("Create with shared configuration") + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml("Create sample data") + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml("View Marketplace Workflows") + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: "Name", descriptionText: AJS.format("Max. {0} characters.",opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: "Key", descriptionText: AJS.format("Max. {0} characters.",opt_data.maxKeyLength), helpTitle: "What\x27s a project key?", value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml("What\x27s a project key?") + '</b></p><ul><li>' + soy.$$escapeHtml("It prefixes each issue in the project") + '</li><li>' + soy.$$escapeHtml("It can be changed, but this is not a trivial task") + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: "Project Lead"}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: "Enter the username of the Project Lead."});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format("Give me a {0} license so I can access this project.",opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format("({0} of {1} licenses now used)",opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format("We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.",opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml("Select the existing project that you\x27d like to share configurations with.") + '<a class="help-lnk" title="' + soy.$$escapeHtml("What will be shared?") + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml("What will be shared?") + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: "Choose a project"}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml("When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.") + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.") + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml("What will be shared?") + '</strong></p><p>' + soy.$$escapeHtml("Configuration refers to the set of schemes used by a project") + '</p><ul><li>' + soy.$$escapeHtml("Permission Scheme") + '</li><li>' + soy.$$escapeHtml("Notification Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Security Scheme") + '</li><li>' + soy.$$escapeHtml("Workflow Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Type Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Type Screen Scheme") + '</li><li>' + soy.$$escapeHtml("Field Configuration Scheme") + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact JIRA")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).then(this.projectCreatedHandler,this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"nocheck"}}).then(this.projectCreatedHandler,this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(i,h){var j=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(i)();e.dialog.getPanel(j.id,0).html(g);e.dialog.gotoPage(j.id)},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions();this.resizeTemplateWidths()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?",""],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return d.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")},widthOfScrollbarForElement:function(k){var j=k.offsetWidth;var l=k.clientWidth;return j-l},widthOfDialogAvailableForTemplateList:function(){var j=this.widthOfScrollbarForElement(this.getTemplatesDialogContainer());return this.DIALOG_WIDTH-j},widthOfTemplateItem:function(){var j=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return j-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var j=this.getFirstTemplateItem().css("border-top-width");return parseInt(j,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(h.bind(function(j,k){e(k).css("width",this.widthOfTemplateItem())},this))}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).then(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact JIRA");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact JIRA")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a JIRA project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.plugins.jira-project-creation:project-creation-resources', location = '/js/lib/ajaxHooks/xdr.js' */
if(window.XDomainRequest){jQuery.ajaxTransport(function(b){if(b.crossDomain&&b.async){if(b.timeout){b.xdrTimeout=b.timeout;delete b.timeout}var a;return{send:function(d,c){function e(f,i,h,g){a.onload=a.onerror=a.ontimeout=jQuery.noop;a=undefined;c(f,i,h,g)}a=new XDomainRequest();a.onload=function(){e(200,"OK",{text:a.responseText},"Content-Type: "+a.contentType)};a.onerror=function(){e(404,"Not Found")};a.onprogress=jQuery.noop;a.ontimeout=function(){e(0,"timeout")};a.timeout=b.xdrTimeout||Number.MAX_VALUE;a.open(b.type,b.url);a.send((b.hasContent&&b.data)||null)},abort:function(){if(a){a.onerror=jQuery.noop;a.abort()}}}}})};;
;
/* module-key = 'com.atlassian.plugins.jira-project-creation:project-creation-resources', location = '/js/project-creation.js' */
ATLAS_PROJECT_CREATE={};(function(x){AJS.EventQueue=AJS.EventQueue||[];var u="jira.project";var G={"confluence.space":30,"bamboo.project":20,"ondemand.svn-repository":10};ATLAS_PROJECT_CREATE.getFilteredRootTypes=function C(L){var N={};for(var M in L.types){if(M!==u){N[M]=L.types[M]}}return N};ATLAS_PROJECT_CREATE.loadRemoteRoots=function p(L){var N=jQuery.Deferred(),O=[],M=[];t(L,function(P){var Q=P.capabilitiesUrl;return AJS.$.ajax(Q+"/aggregate-root",{success:function(R){var S=ATLAS_PROJECT_CREATE.getFilteredRootTypes(R);O=O.concat(_.map(S,function(U,T){return AJS.$.ajax(U.href,{xhrFields:{withCredentials:true},success:function(V){M.push(ATLAS_PROJECT_CREATE.constructFullRootType(V,U.label,T,Q,P.id))},error:function(X,V,W){AJS.log("Got "+W+" from aggregate root type "+U.href)}}).promise()}))},error:function(T,R,S){AJS.log("Got "+S+" from aggregate roots capapbility for "+Q)}}).promise()}).done(function(){o(O).done(function(){N.resolve(M)})});return N.promise()};ATLAS_PROJECT_CREATE.constructFullRootType=function n(L,M,P,O,N){return{keys:L.keys,url:L.links.self,label:M,capabilityKey:P,baseUrl:O,instanceId:N}};ATLAS_PROJECT_CREATE.createLink=function v(M,L){console.log("creating link from "+M.entityType+" to "+M.remoteEntityType);var N=JSON.stringify({local:M.baseUrl+"/aggregate-root/"+M.entityType+"/"+M.entityKey,target:M.remoteInstanceBaseUrl+"/aggregate-root/"+M.remoteEntityType+"/"+M.remoteEntityKey});AJS.$.ajax(M.baseUrl+"/aggregate-root-link",{type:"POST",contentType:"application/json",data:N,timeout:8000,complete:L})};ATLAS_PROJECT_CREATE.linkAllTheThings=function r(O,R,L,T,S){var N=[];x.each(R,function Q(U,V){N.push({baseUrl:V.type.baseUrl,entityType:V.type.capabilityKey,entityKey:V.data.key,remoteInstanceBaseUrl:h()+"/rest/capabilities",remoteEntityType:u,remoteEntityKey:L});N.push({baseUrl:h()+"/rest/capabilities",entityType:u,entityKey:L,remoteInstanceBaseUrl:V.type.baseUrl,remoteEntityType:V.type.capabilityKey,remoteEntityKey:V.data.key});AJS.$.each(R,function W(Y,X){if(X!==V){N.push({baseUrl:V.type.baseUrl,entityType:V.type.capabilityKey,entityKey:V.data.key,remoteInstanceBaseUrl:X.type.baseUrl,remoteEntityType:X.type.capabilityKey,remoteEntityKey:X.data.key})}})});var P=0;function M(Y,U){if(U!=="success"){P++;var V=Y.statusText;try{var X=JSON.parse(Y.responseText);if(X&&X.message){V=X.message}}catch(W){}AJS.messages.error(".li-linking-status",{title:"Could not create links between created projects",body:V});O.updateHeight()}if(N.length>0){ATLAS_PROJECT_CREATE.createLink(N.pop(),M)}else{if(P>0){T.find(".linking-status").html('<span class="aui-icon aui-icon-small aui-iconfont-error">'+"Error"+"</span>")}else{T.find(".linking-status").html('<span class="aui-icon aui-icon-small aui-iconfont-success">'+"Success"+"</span>")}S.prop("disabled",false);S.attr("aria-disabled","false")}}M(null,"success")};var k;function I(O,L,M){var N=L();x.when(O).then(function(P){N.getCurPanel().body.find(".field-group.loading").remove();P.sort(d);if(P.length!==0){var Q=N.getCurPanel().body.find("form");Q.append(project.creation.remoteRootsCheckboxes({rootTypes:P}));if(M){Q.find('input[type="checkbox"]').filter(".remote-root").change(M)}N.updateHeight()}f(N,true)},function(){N.getCurPanel().body.find(".field-group.loading").remove();f(N,true);N.updateHeight()})}var j;function E(L,M){var N=L();j=N.getCurPanel();j.body.find("form").append(project.creation.remoteRootsLoading({}));f(N,false);N.updateHeight();j.page.element.find(".add-project-back-button").click(function(){N.updateHeight()});b(I,L,M)}function B(M){var N=_.filter(j.body.find("input.remote-root.checkbox"),function(O){return O.checked===true});var L=_.map(N,function(O){return O.id});return _.filter(M,function(O){return _.contains(L,"capability_"+O.capabilityKey)})}var F=AJS.$('meta[name="ajs-remote-user"]');if(!F||!F[0]||!F[0].content){console.log("Project create didn't get a user META tag, or it had no content.  Bailing out");return}if(!AJS.DarkFeatures.isEnabled("rotp.project.create")){return}var w=function w(Q,N,P,M,O){var L=function L(R,S){S.prop("disabled",true);S.attr("aria-disabled","true");S.before('<span class="aui-icon aui-icon-wait project-creation-acknowledge-spinner">'+"Loading, please wait"+"</span>");R()};x.when(k).then(function(S){var R=B(S);H(R);if(R.length===0){Q.prevPage();N();return}c(Q,L,N);var T=[];var U=[];t(R,function(V){var W="creation_status_"+V.capabilityKey.replace(".","_")+"_"+V.instanceId;T.push({statusId:W,label:V.label});return AJS.$.ajax(V.url+"/"+M,{type:"PUT",data:JSON.stringify({label:O}),xhrFields:{withCredentials:true},success:function(X){U=U.concat(D(X,V));i(X,W)},error:function(Y,Z,X){l(W,V,Y,X)},contentType:"application/json",dataType:"json"}).promise()}).always(function(){s(Q);console.log("about to begin linking created objects");ATLAS_PROJECT_CREATE.linkAllTheThings(Q,U,M,AJS.$(".post-project-created-page-content"),AJS.$(".project-create-acknowledge-button"))});AJS.$(".post-project-created-page-content").append(project.creation.remoteRootsSuccess({rootTypes:T}))})};var e=function e(M){var L;x.when(k).then(function(P){var O=B(P);_.each(O,function(R){if(R.keys){for(var Q in R.keys){if(R.keys.hasOwnProperty(Q)){if(M.toUpperCase()===Q.toUpperCase()){L=R}}}}})});var N={errors:{}};if(L){N.errors.projectKey=AJS.format("{0} with that key already exists in the remote instance",L.label)}return N};function m(){return window.location.origin?window.location.origin:(window.location.protocol+"//"+window.location.host)}function h(){var L=m();return L+AJS.contextPath()}function z(M){var L=document.createElement("a");L.href=M;return{host:L.hostname,port:L.port,protocol:L.protocol.replace(":","")}}function K(M,L){var O=z(M);var N=z(L);return O.protocol==="https"&&N.protocol==="http"}function b(O,M,N){AJS.$.ajax(h()+"/rest/capabilities/awareness",{type:"GET",success:function L(Q){var R=_.partial(K,m());var P=_.chain(Q.applications).map(function(T,S){return _.extend(T,{capabilitiesUrl:S})}).filter(function(S){return R(S.capabilitiesUrl)===false}).value();P.push({id:Q.links.selfInstanceId,capabilitiesUrl:Q.links.collection});k=ATLAS_PROJECT_CREATE.loadRemoteRoots(P);A=Q.links.selfInstanceId;if(typeof O==="function"){O(k,M,N)}},error:function(R,P,Q){console.log("Project create error - error gathering roots from awareness capability");if(M){x(M().getCurPanel().page.element).find(".pt-submit-button").attr("aria-disabled","false")}}})}var A;var g=null;function t(N,M){var L=_.map(N,M);return o(L)}function o(M){var L=x.Deferred();var N=0;if(M.length===0){L.resolve()}else{_.each(M,function(O){O.always(function(){N++;if(N===M.length){L.resolve()}})})}return L.promise()}function c(N,L,M){N.addPanel("title","","post-project-created-page-content");N.addHeader("Creating and linking companions for your JIRA project");N.addButton("All done!",function(){L(M,AJS.$(this))},"project-create-acknowledge-button");AJS.$(".project-create-acknowledge-button").removeClass("button-panel-button").addClass("aui-button aui-button-primary").attr("aria-disabled","true").prop("disabled",true)}function D(M,L){var N=[];if(L.capabilityKey==="ondemand.svn-repository"){console.log("got back created SVN repository");N.push({type:{capabilityKey:"fecru.repository",instanceId:g.id,baseUrl:g.capabilitiesUrl},data:{key:M.key}});N.push({type:{capabilityKey:"fecru.project",instanceId:g.id,baseUrl:g.capabilitiesUrl},data:{key:"CR-"+M.key}})}else{console.log("got back created thing "+L.capabilityKey);var O={type:L,data:M};N.push(O)}return N}function i(N,O){var M=AJS.$("."+O);M.empty();M.append('<span class="aui-icon aui-icon-small aui-iconfont-success">'+"Success"+"</span>");if(N.links.resource){var L=AJS.$("<a target='_blank'></a>");L.text(N.label);L.attr("href",N.links.resource);L.attr("title",N.label);M.closest("li").append(L)}}function l(S,M,R,Q){var O=AJS.$("."+S);O.empty();O.append('<span class="aui-icon aui-icon-small aui-iconfont-error">'+"Error"+"</span>");var L=Q;if(R&&R.responseText){try{var P=JSON.parse(R.responseText);if(P&&P.message){L=P.message}}catch(N){L=R.responseText}}AJS.messages.error(".li-"+S,{title:AJS.format("Could not create {0}",M.label),body:L})}function s(L){var M=L.getCurrentPanel();if(M.body.find(".aui-message.error").size()!==0){AJS.messages.warning(".project-creation-success",{title:"We were unable to create everything you requested",body:"<p>"+"However, you can create them yourself and manually set up links."+"</p>"});L.updateHeight()}}function H(L){var M=_.map(L,function(O){return O.capabilityKey});var N=(M.length==0)?"none":M.sort().join("_");AJS.EventQueue.push({name:"project.create.aggregateroots.selected",properties:{capabilitykeys:N}})}function f(M,L){x(M.getCurPanel().page.element).find(".pt-submit-button").attr("aria-disabled",!L)}function d(M,L){return J(L.capabilityKey)-J(M.capabilityKey)}function J(L){return _.has(G,L)?G[L]:0}JPT.AddProjectController.registerProjectKeyValidationCallback(e);var y=function y(){return JPT.DialogView.dialog||JPT.DialogView._dialog};var a=function a(){if(JPT.AddProjectView.getKey().length>=2){JPT.AddProjectController._performKeyValidationChecks(JPT.AddProjectView.getKey())}};JPT.AddProjectView.addPostDrawCallback(function(){E(y,a)});JPT.AddProjectController.registerPostProjectCreationCallback(function(P,Q,O,M,N){var L=function(){window.location=AJS.contextPath()+Q};w(P,L,O,M,N)});var q=function q(){var N="projectCreation";GH.StartWizardView.registerWizardStepPreRenderCallback(function M(Q){if(Q==N){b();GH.StartWizardView.registerWizardStepOnCreateCallbacks(function P(S,T,R){console.log("creating external entities");S.addPage("post-project-created-page");w(S,T,null,R.project.key,R.project.name)})}});GH.StartWizardView.registerWizardStepPostRenderCallback(function O(R,P){if(R==N){E(function Q(){return P});P.updateHeight()}});GH.StartWizardView.registerWizardStepOnValidateCallback(function L(U,R){if(U==N){var T=R.getCurPanel().body.find("#ghx-wizard-project-projectkey");var Q=e(T.val());if(Q.errors.projectKey){var P=AJS.$("<div class='error project-creation-error'></div>");var S=T.parent();S.find(".project-creation-error").remove();S.append(P);P.text(Q.errors.projectKey);P.show();return false}}return true})};x(function(){AJS.$(".add-project-trigger").live("click",b);if(typeof GH!=="undefined"){if(GH.StartWizardView&&GH.StartWizardView.registerWizardStepPreRenderCallback){q()}}});x(function(){AJS.$(".add-project-trigger").live("click",b)})})(jQuery);;
;
/* module-key = 'com.atlassian.plugins.jira-project-creation:project-creation-resources', location = '/templates/project-creation.soy' */
// This file was automatically generated from project-creation.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace project.creation.
 */

if (typeof project == 'undefined') { var project = {}; }
if (typeof project.creation == 'undefined') { project.creation = {}; }


project.creation.remoteRootsLoading = function(opt_data, opt_ignored) {
  return '<div class="field-group loading"><span class="aui-icon aui-icon-wait"/>' + soy.$$escapeHtml("Retrieving additional project types you might want to create") + '</div>';
};
if (goog.DEBUG) {
  project.creation.remoteRootsLoading.soyTemplateName = 'project.creation.remoteRootsLoading';
}


project.creation.remoteRootsCheckboxes = function(opt_data, opt_ignored) {
  var output = '<fieldset class="group remote-root-checkboxes"><h4>' + soy.$$escapeHtml("Create a linked:") + '</h4><div class=\'field-group\'>';
  var rootTypeList10 = opt_data.rootTypes;
  var rootTypeListLen10 = rootTypeList10.length;
  for (var rootTypeIndex10 = 0; rootTypeIndex10 < rootTypeListLen10; rootTypeIndex10++) {
    var rootTypeData10 = rootTypeList10[rootTypeIndex10];
    output += '<div class="checkbox"><input class="checkbox remote-root" type="checkbox" id="capability_' + soy.$$escapeHtml(rootTypeData10.capabilityKey) + '" checked="true" data-url="' + soy.$$escapeHtml(rootTypeData10.url) + '"></input><label for="capability_' + soy.$$escapeHtml(rootTypeData10.capabilityKey) + '">' + soy.$$escapeHtml(rootTypeData10.label) + '</label></div>';
  }
  output += '</div></fieldset>';
  return output;
};
if (goog.DEBUG) {
  project.creation.remoteRootsCheckboxes.soyTemplateName = 'project.creation.remoteRootsCheckboxes';
}


project.creation.remoteRootsSuccess = function(opt_data, opt_ignored) {
  var output = '<div class="project-creation-success"><ul>';
  var rootTypeList24 = opt_data.rootTypes;
  var rootTypeListLen24 = rootTypeList24.length;
  for (var rootTypeIndex24 = 0; rootTypeIndex24 < rootTypeListLen24; rootTypeIndex24++) {
    var rootTypeData24 = rootTypeList24[rootTypeIndex24];
    output += '<li class="li-' + soy.$$escapeHtml(rootTypeData24.statusId) + '"><div class="' + soy.$$escapeHtml(rootTypeData24.statusId) + ' created-entity-status"><span class="aui-icon aui-icon-wait">' + soy.$$escapeHtml("Loading, please wait") + '</span></div><div class="created-entity-status">' + soy.$$escapeHtml(rootTypeData24.label) + '</div></li>';
  }
  output += '<li class="li-linking-status"><div class="linking-status created-entity-status"><span class="aui-icon aui-icon-wait">' + soy.$$escapeHtml("Loading, please wait") + '</span></div><div class="created-entity-status">' + soy.$$escapeHtml("Creating links") + '</div></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  project.creation.remoteRootsSuccess.soyTemplateName = 'project.creation.remoteRootsSuccess';
}
;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(c){var n=AJS.$.ajax;var i="atlassian-analytics";var h=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var m=null;var j=null;var e=null;var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var w=Math.random()*16|0,u=x=="x"?w:(w&3|8);return u.toString(16)});var q=function(){var u="unknown";if(document.body.id=="jira"){u="jira"}else{if(document.body.id=="com-atlassian-confluence"){u="confluence"}}j=i+"."+u;e=j+".lock"};var d=function(){if(store.get(e)){return false}store.set(e,o);return(store.get(e)===o)};var r=function(){store.set(e,null)};var g=function(){var v=[],x,y,u,w;if(AJS.EventQueue.length==0){return}v=store.get(j)||v;for(u=0,w=AJS.EventQueue.length;u<w;++u){y=AJS.EventQueue[u];if(y.name){x={name:y.name,properties:y.properties,time:y.time||0};v.push(x)}}AJS.EventQueue.length=0;store.set(j,v)};var s=0;var a=function(u){return Math.min(5000*Math.pow(2,u),5*60*1000)};var f=function(){var x;function v(){setTimeout(f,a(s=0))}function u(){setTimeout(f,a(++s))}if(!d()){return v()}g();x=store.get(j);if(!x||!x.length){r();return v()}store.remove(j);r();if(!l(x)){return v()}var y=new Date().getTime();for(var w=0;w<x.length;w++){if(x[w].time>0){x[w].timeDelta=x[w].time-y}else{x[w].timeDelta=w-x.length}delete x[w].time}m=n({type:"POST",url:h+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(x),contentType:"application/json",dataType:"json"});m.fail(function(){AJS.EventQueue.concat(x);g();u()});m.done(function(){v()})};var l=function(w){for(var v=w.length-1;v>=0;v--){var y="";var x=w[v];var u=x.properties;if(typeof x.name==="undefined"){y="you must provide a name for the event."}else{if(typeof u!=="undefined"&&u!==null){if(u.constructor!==Object){y="properties must be an object with key value pairs."}else{b(u)}}}if(y!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+y+"\nEvent: "+JSON.stringify(x));w.splice(v,1)}}return w.length};var b=function(w){for(var v in w){if(w.hasOwnProperty(v)){var u=w[v];if(typeof u!=="undefined"&&u!==null&&u.toString){w[v]=u.toString()}else{w[v]=""}}}};var k=function(){if(m&&!(m.state()==="resolved"||m.state()==="rejected")){m.abort()}};AJS.EventQueue=AJS.EventQueue||[];var p=Array.prototype.push;AJS.EventQueue.push=function(u){u.time=new Date().getTime();p.call(AJS.EventQueue,u)};AJS.toInit(function(){q();setTimeout(f,500);t()});c(window).unload(function(){k();g()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(u,v){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:u,properties:v})}};AJS.bind("analytics",function(u,v){AJS.EventQueue.push({name:v.name,properties:v.data})});AJS.bind("analyticsEvent",function(u,v){AJS.EventQueue.push({name:v.name,properties:v.data})});var t=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var v=AJS.$(":contains(Enable Atlassian analytics)");if(v.size()>0){var u=v[v.size()-2];if(u){u.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-web-plugin:issue-link-web-link', location = 'js/issuelink-weblink.js' */
(function(){var $hiddenImg=AJS.$("<img>"),$iconUrlInput,$urlInput,faviconUrl,throbberTimeoutId;$hiddenImg.load(function(){$iconUrlInput.val(faviconUrl);$urlInput.css("background-image",'url("'+faviconUrl+'")');clearTimeout(throbberTimeoutId);$urlInput.removeClass("loading")});$hiddenImg.error(function(){clearTimeout(throbberTimeoutId);$urlInput.removeClass("loading")});function init(context){$iconUrlInput=AJS.$("#web-link-icon-url",context);$urlInput=AJS.$("#web-link-url",context).bind("change",fetchFavicon);if($iconUrlInput.val()){$urlInput.css("background-image","url("+$iconUrlInput.val()+")")}}function fetchFavicon(){$hiddenImg.attr("src","");$iconUrlInput.val("");$urlInput.css("background-image","");faviconUrl=parseFaviconUrl($urlInput.val());if(!faviconUrl){return }setTimeout(function(){$urlInput.addClass("loading")},0);throbberTimeoutId=setTimeout(function(){$urlInput.removeClass("loading")},3000);$hiddenImg.attr("src",faviconUrl)}function parseFaviconUrl(url){var hostUrl=url.match(/^([^/]*\/\/[^/]+)/)[1];if(!hostUrl){return }return hostUrl+"/favicon.ico"}JIRA.bind(JIRA.Events.NEW_PAGE_ADDED,function(e,context){init(context)})})();;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.6.0', location = 'libs/moment/2.6.0/moment-2.6.0.js' */
(function(A){define("atlassian/libs/moment-2.6.0",function(){var z={};A.call(z);return z.moment})})(function(){for(var A=function(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}},z=function(a,b){var c=!0;return l(function(){c&&(!1===e.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+a),c=!1);return b.apply(this,arguments)},b)},X=function(a,
b){return function(c){return j(a.call(this,c),b)}},ua=function(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}},Y=function(){},F=function(a){Z(a);l(this,a)},G=function(a){var a=$(a),b=a.year||0,c=a.quarter||0,d=a.month||0,g=a.week||0,e=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+e+7*g;this._months=+d+3*c+12*b;this._data={};this._bubble()},l=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&
(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a},v=function(a){return 0>a?Math.ceil(a):Math.floor(a)},j=function(a,b,c){for(var d=""+Math.abs(a);d.length<b;)d="0"+d;return(0<=a?c?"+":"":"-")+d},I=function(a,b,c,d){var g=b._milliseconds,f=b._days,b=b._months,d=null==d?!0:d;g&&a._d.setTime(+a._d+g*c);f&&aa(a,"Date",H(a,"Date")+f*c);b&&ba(a,H(a,"Month")+b*c);d&&e.updateOffset(a,f||b)},J=function(a){return"[object Array]"===Object.prototype.toString.call(a)},ca=function(a,
b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),e=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&i(a[h])!==i(b[h]))&&e++;return e+g},r=function(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=va[a]||wa[b]||b;return a},$=function(a){var b={},c,d;for(d in a)a.hasOwnProperty(d)&&(c=r(d))&&(b[c]=a[d]);return b},xa=function(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;e[a]=function(d,g){var f,h,i=e.fn._lang[a],j=[];"number"===
typeof d&&(g=d,d=void 0);h=function(a){a=e().utc().set(c,a);return i.call(e.fn._lang,a,d||"")};if(null!=g)return h(g);for(f=0;f<b;f++)j.push(h(f));return j}},i=function(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=0<=a?Math.floor(a):Math.ceil(a));return b},K=function(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},da=function(a,b,c){return B(e([a,11,31+b-c]),b,c).week},L=function(a){return 0===a%4&&0!==a%100||0===a%400},Z=function(a){var b;if(a._a&&-2===a._pf.overflow){b=0>a._a[s]||11<a._a[s]?s:
1>a._a[o]||a._a[o]>K(a._a[p],a._a[s])?o:0>a._a[m]||23<a._a[m]?m:0>a._a[w]||59<a._a[w]?w:0>a._a[C]||59<a._a[C]?C:0>a._a[D]||999<a._a[D]?D:-1;if(a._pf._overflowDayOfYear&&(b<p||b>o))b=o;a._pf.overflow=b}},ea=function(a){null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid},M=
function(a){return a?a.toLowerCase().replace("_","-"):a},N=function(a,b){return b._isUTC?e(a).zone(b._offset||0):e(a).local()},q=function(a){var b=0,c,d,g,f,h=function(a){if(!x[a]&&ya)try{require("./lang/"+a)}catch(b){}return x[a]};if(!a)return e.fn._lang;if(!J(a)){if(d=h(a))return d;a=[a]}for(;b<a.length;){f=M(a[b]).split("-");c=f.length;for(g=(g=M(a[b+1]))?g.split("-"):null;0<c;){if(d=h(f.slice(0,c).join("-")))return d;if(g&&g.length>=c&&ca(f,g,!0)>=c-1)break;c--}b++}return e.fn._lang},P=function(a,
b){if(!a.isValid())return a.lang().invalidDate();b=fa(b,a.lang());if(!O[b]){var c=O,d=b,g=b,e=g.match(ga),h,i;h=0;for(i=e.length;h<i;h++)e[h]=t[e[h]]?t[e[h]]:e[h].match(/\[[\s\S]/)?e[h].replace(/^\[|\]$/g,""):e[h].replace(/\\/g,"");c[d]=function(a){var b="";for(h=0;h<i;h++)b+=e[h]instanceof Function?e[h].call(a,g):e[h];return b}}return O[b](a)},fa=function(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(E.lastIndex=0;0<=d&&E.test(a);)a=a.replace(E,c),E.lastIndex=0,d-=1;return a},Ka=function(a,
b){var c=b._strict;switch(a){case "Q":return ha;case "DDDD":return ia;case "YYYY":case "GGGG":case "gggg":return c?za:Aa;case "Y":case "G":case "g":return Ba;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Ca:Da;case "S":if(c)return ha;case "SS":if(c)return ja;case "SSS":if(c)return ia;case "DDD":return Ea;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Fa;case "a":case "A":return q(b._l)._meridiemParse;case "X":return Ga;case "Z":case "ZZ":return Q;case "T":return Ha;
case "SSSS":return Ia;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ja:ka;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return ka;case "Do":return Ja;default:var c=RegExp,d;d=a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return c(d)}},la=function(a){var a=(a||"").match(Q)||[],
a=((a[a.length-1]||[])+"").match(La)||["-",0,0],b=+(60*a[1])+i(a[2]);return"+"===a[0]?-b:b},S=function(a){var b,c=[],d,g,f,h,j;if(!a._d){d=new Date;d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];a._w&&(null==a._a[o]&&null==a._a[s])&&(b=function(b){var c=parseInt(b,10);return b?3>b.length?68<c?1900+c:2E3+c:c:null==a._a[p]?e().weekYear():a._a[p]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?b=ma(b(g.GG),g.W||1,g.E,4,1):(f=q(a._l),h=null!=g.d?na(g.d,
f):null!=g.e?parseInt(g.e,10)+f._week.dow:0,j=parseInt(g.w,10)||1,null!=g.d&&h<f._week.dow&&j++,b=ma(b(g.gg),j,h,f._week.doy,f._week.dow)),a._a[p]=b.year,a._dayOfYear=b.dayOfYear);if(a._dayOfYear){b=null==a._a[p]?d[p]:a._a[p];if(a._dayOfYear>(L(b)?366:365))a._pf._overflowDayOfYear=!0;b=R(b,0,a._dayOfYear);a._a[s]=b.getUTCMonth();a._a[o]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];c[m]+=i((a._tzm||0)/60);c[w]+=i((a._tzm||
0)%60);a._d=(a._useUTC?R:Ma).apply(null,c)}},T=function(a){a._a=[];a._pf.empty=!0;var b=q(a._l),c=""+a._i,d,g,f,h,j=c.length,k=0;g=fa(a._f,b).match(ga)||[];for(b=0;b<g.length;b++){f=g[b];if(d=(c.match(Ka(f,a))||[])[0])h=c.substr(0,c.indexOf(d)),0<h.length&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(d)+d.length),k+=d.length;if(t[f]){d?a._pf.empty=!1:a._pf.unusedTokens.push(f);h=a;var l=void 0,n=h._a;switch(f){case "Q":null!=d&&(n[s]=3*(i(d)-1));break;case "M":case "MM":null!=d&&(n[s]=i(d)-1);break;
case "MMM":case "MMMM":l=q(h._l).monthsParse(d);null!=l?n[s]=l:h._pf.invalidMonth=d;break;case "D":case "DD":null!=d&&(n[o]=i(d));break;case "Do":null!=d&&(n[o]=i(parseInt(d,10)));break;case "DDD":case "DDDD":null!=d&&(h._dayOfYear=i(d));break;case "YY":n[p]=e.parseTwoDigitYear(d);break;case "YYYY":case "YYYYY":case "YYYYYY":n[p]=i(d);break;case "a":case "A":h._isPm=q(h._l).isPM(d);break;case "H":case "HH":case "h":case "hh":n[m]=i(d);break;case "m":case "mm":n[w]=i(d);break;case "s":case "ss":n[C]=
i(d);break;case "S":case "SS":case "SSS":case "SSSS":n[D]=i(1E3*("0."+d));break;case "X":h._d=new Date(1E3*parseFloat(d));break;case "Z":case "ZZ":h._useUTC=!0;h._tzm=la(d);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":f=f.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":f=f.substr(0,2),d&&(h._w=h._w||{},h._w[f]=d)}}else a._strict&&!d&&a._pf.unusedTokens.push(f)}a._pf.charsLeftOver=j-k;0<c.length&&a._pf.unusedInput.push(c);
a._isPm&&12>a._a[m]&&(a._a[m]+=12);!1===a._isPm&&12===a._a[m]&&(a._a[m]=0);S(a);Z(a)},Ma=function(a,b,c,d,e,f,h){b=new Date(a,b,c,d,e,f,h);1970>a&&b.setFullYear(a);return b},R=function(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b},na=function(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a},Na=function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)},B=function(a,b,c){b=c-b;c-=
a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=e(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}},ma=function(a,b,c,d,e){var f=R(a,0,1).getUTCDay(),b=7*(b-1)+((null!=c?c:e)-e)+(e-f+(f>d?7:0)-(f<e?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?b:(L(a-1)?366:365)+b}},pa=function(a){var b=a._i,c=a._f;if(null===b||void 0===c&&""===b)return e.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=q().preparse(b));if(e.isMoment(b)){var a=b,d={},g;for(g in a)a.hasOwnProperty(g)&&oa.hasOwnProperty(g)&&
(d[g]=a[g]);a=d;a._d=new Date(+b._d)}else if(c)if(J(c)){var b=a,f,h;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(g=0;g<b._f.length;g++)if(c=0,d=l({},b),d._pf=A(),d._f=b._f[g],T(d),ea(d)&&(c+=d._pf.charsLeftOver,c+=10*d._pf.unusedTokens.length,d._pf.score=c,null==h||c<h))h=c,f=d;l(b,f||d)}}else T(a);else if(d=a,f=d._i,h=Oa.exec(f),void 0===f)d._d=new Date;else if(h)d._d=new Date(+h[1]);else if("string"===typeof f)if(b=d._i,g=Pa.exec(b)){d._pf.iso=!0;f=0;for(h=U.length;f<h;f++)if(U[f][1].exec(b)){d._f=
U[f][0]+(g[6]||" ");break}f=0;for(h=V.length;f<h;f++)if(V[f][1].exec(b)){d._f+=V[f][0];break}b.match(Q)&&(d._f+="Z");T(d)}else e.createFromInputFallback(d);else J(f)?(d._a=f.slice(0),S(d)):"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date?d._d=new Date(+f):"object"===typeof f?d._d||(f=$(d._i),d._a=[f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond],S(d)):"number"===typeof f?d._d=new Date(f):e.createFromInputFallback(d);return new F(a)},ba=function(a,b){var c;if("string"===
typeof b&&(b=a.lang().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),K(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a},H=function(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()},aa=function(a,b,c){return"Month"===b?ba(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)},u=function(a,b){return function(c){return null!=c?(aa(this,a,c),e.updateOffset(this,b),this):H(this,a)}},Qa=function(a){e.duration.fn[a]=function(){return this._data[a]}},qa=function(a,b){e.duration.fn["as"+
a]=function(){return+this/b}},e,Ra="undefined"!==typeof global?global:this,y=Math.round,k,p=0,s=1,o=2,m=3,w=4,C=5,D=6,x={},oa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ya="undefined"!==typeof module&&module.exports,Oa=/^\/?Date\((\-?\d+)/i,Sa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ta=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ga=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
E=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ka=/\d\d?/,Ea=/\d{1,3}/,Aa=/\d{1,4}/,Da=/[+\-]?\d{1,6}/,Ia=/\d+/,Fa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Q=/Z|[\+\-]\d\d:?\d\d/gi,Ha=/T/i,Ga=/[\+\-]?\d+(\.\d{1,3})?/,Ja=/\d{1,2}/,ha=/\d/,ja=/\d\d/,ia=/\d{3}/,za=/\d{4}/,Ca=/[+-]?\d{6}/,Ba=/[+-]?\d+/,Pa=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],V=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],La=/([\+\-]|\d\d)/gi,W={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},va={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",
M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},wa={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},O={},ra="DDD w W M D d".split(" "),sa="MDHhmswW".split(""),t={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},
dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return j(this.year()%100,2)},YYYY:function(){return j(this.year(),4)},YYYYY:function(){return j(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+j(Math.abs(a),6)},gg:function(){return j(this.weekYear()%100,2)},gggg:function(){return j(this.weekYear(),
4)},ggggg:function(){return j(this.weekYear(),5)},GG:function(){return j(this.isoWeekYear()%100,2)},GGGG:function(){return j(this.isoWeekYear(),4)},GGGGG:function(){return j(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return j(i(this.milliseconds()/10),2)},SSS:function(){return j(this.milliseconds(),3)},SSSS:function(){return j(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+":"+j(i(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+j(i(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},
Q:function(){return this.quarter()}},ta=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ra.length;)k=ra.pop(),t[k+"o"]=ua(t[k],k);for(;sa.length;)k=sa.pop(),t[k+k]=X(t[k],2);t.DDDD=X(t.DDD,3);l(Y.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=e.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=e([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",
L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"===typeof e?e(a,b,c,
d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return B(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});e=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=
void 0);e={_isAMomentObject:!0};e._i=a;e._f=b;e._l=c;e._strict=d;e._isUTC=!1;e._pf=A();return pa(e)};e.suppressDeprecationWarnings=!1;e.createFromInputFallback=z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});e.utc=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=void 0);e={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};e._l=
c;e._i=a;e._f=b;e._strict=d;e._pf=A();return pa(e).utc()};e.unix=function(a){return e(1E3*a)};e.duration=function(a,b){var c=a,d=null,g;if(e.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Sa.exec(a))g="-"===d[1]?-1:1,c={y:0,d:i(d[o])*g,h:i(d[m])*g,m:i(d[w])*g,s:i(d[C])*g,ms:i(d[D])*g};else if(d=Ta.exec(a))g="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*g},c={y:c(d[2]),M:c(d[3]),
d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new G(c);e.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang);return d};e.version="2.6.0";e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.momentProperties=oa;e.updateOffset=function(){};e.lang=function(a,b){if(!a)return e.fn._lang._abbr;if(b){var c=M(a);b.abbr=c;x[c]||(x[c]=new Y);x[c].set(b)}else null===b?(delete x[a],a="en"):x[a]||q(a);return(e.duration.fn._lang=e.fn._lang=q(a))._abbr};e.langData=function(a){a&&(a._lang&&a._lang._abbr)&&(a=
a._lang._abbr);return q(a)};e.isMoment=function(a){return a instanceof F||null!=a&&a.hasOwnProperty("_isAMomentObject")};e.isDuration=function(a){return a instanceof G};for(k=ta.length-1;0<=k;--k)xa(ta[k]);e.normalizeUnits=function(a){return r(a)};e.invalid=function(a){var b=e.utc(NaN);null!=a?l(b._pf,a):b._pf.userInvalidated=!0;return b};e.parseZone=function(){return e.apply(null,arguments).parseZone()};e.parseTwoDigitYear=function(a){return i(a)+(68<i(a)?1900:2E3)};l(e.fn=F.prototype,{clone:function(){return e(this)},
valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=e(this).utc();return 0<a.year()&&9999>=a.year()?P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),
this.seconds(),this.milliseconds()]},isValid:function(){return ea(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<ca(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray()):!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=P(this,a||e.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===
typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,-1);return this},diff:function(a,b,c){var a=N(a,this),d=6E4*(this.zone()-a.zone()),g,b=r(b);"year"===b||"month"===b?(g=432E5*(this.daysInMonth()+a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-e(this).startOf("month")-(a-e(a).startOf("month")))/g,d-=6E4*(this.zone()-e(this).startOf("month").zone()-(a.zone()-e(a).startOf("month").zone()))/
g,"year"===b&&(d/=12)):(g=this-a,d="second"===b?g/1E3:"minute"===b?g/6E4:"hour"===b?g/36E5:"day"===b?(g-d)/864E5:"week"===b?(g-d)/6048E5:g);return c?d:v(d)},from:function(a,b){return e.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(e(),a)},calendar:function(){var a=N(e(),this).startOf("day"),a=this.diff(a,"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",
this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=na(a,this.lang()),this.add({d:a-b})):b},month:u("Month",!0),startOf:function(a){a=r(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this},endOf:function(a){a=r(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+e(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+e(a).startOf(b)},isSame:function(a,
b){b=b||"ms";return+this.clone().startOf(b)===+N(a,this).startOf(b)},min:function(a){a=e.apply(null,arguments);return a<this?this:a},max:function(a){a=e.apply(null,arguments);return a>this?this:a},zone:function(a,b){var c=this._offset||0;if(null!=a)"string"===typeof a&&(a=la(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?I(this,e.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));
else return this._isUTC?c:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?e(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){return K(this.year(),this.month())},dayOfYear:function(a){var b=y((e(this).startOf("day")-e(this).startOf("year"))/
864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=B(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=B(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=B(this,1,4).week;return null==a?b:this.add("d",
7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return da(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return da(this.year(),a.dow,a.doy)},get:function(a){a=r(a);return this[a]()},set:function(a,b){a=r(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(void 0===a)return this._lang;this._lang=
q(a);return this}});e.fn.millisecond=e.fn.milliseconds=u("Milliseconds",!1);e.fn.second=e.fn.seconds=u("Seconds",!1);e.fn.minute=e.fn.minutes=u("Minutes",!1);e.fn.hour=e.fn.hours=u("Hours",!0);e.fn.date=u("Date",!0);e.fn.dates=z("dates accessor is deprecated. Use date instead.",u("Date",!0));e.fn.year=u("FullYear",!0);e.fn.years=z("years accessor is deprecated. Use year instead.",u("FullYear",!0));e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.quarters=
e.fn.quarter;e.fn.toJSON=e.fn.toISOString;l(e.duration.fn=G.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;d.milliseconds=a%1E3;a=v(a/1E3);d.seconds=a%60;a=v(a/60);d.minutes=a%60;a=v(a/60);d.hours=a%24;b+=v(a/24);d.days=b%30;c+=v(b/30);d.months=c%12;b=v(c/12);d.years=b},weeks:function(){return v(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*i(this._months/12)},humanize:function(a){var b=
+this,c;c=!a;var d=this.lang(),e=y(Math.abs(b)/1E3),f=y(e/60),h=y(f/60),i=y(h/24),j=y(i/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",y(i/30)]||1===j&&["y"]||["yy",j];e[2]=c;e[3]=0<b;e[4]=d;c=Na.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=e.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();
return this},subtract:function(a,b){var c=e.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;this._months-=c._months;this._bubble();return this},get:function(a){a=r(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=r(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:e.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+
this.milliseconds()/1E3);return!this.asSeconds()?"P0D":(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":"")}});for(k in W)W.hasOwnProperty(k)&&(qa(k,W[k]),Qa(k.toLowerCase()));qa("Weeks",6048E5);e.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};e.lang("en",{ordinal:function(a){var b=a%10,b=1===i(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});"undefined"===typeof ender&&
(Ra.moment=e)});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.6.0"],function(moment){return moment});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(_,exports){var map={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};function actuallyTranslate(tmpBuffer){return map[tmpBuffer]||_.reduce(tmpBuffer,function(memo,value){return memo+(map[value]||value)},"")}function translateSimpleDateFormat(pattern){var inQuote=false;var skip=false;var tmpBuffer="";var reduction=_.reduce(pattern,function(memo,value,index,list){if(skip){skip=false}else{if(value==="'"){if(tmpBuffer){memo+=actuallyTranslate(tmpBuffer);tmpBuffer=""}if(list[index+1]==="'"){memo+=value;skip=true}else{memo+=!inQuote?"[":"]";inQuote=!inQuote}}else{if(inQuote){memo+=value}else{if(!/[a-zA-Z]/.test(value)){if(tmpBuffer){memo+=actuallyTranslate(tmpBuffer);tmpBuffer=""}memo+=value}else{if(!tmpBuffer||tmpBuffer[tmpBuffer.length-1]===value){tmpBuffer+=value}else{memo+=actuallyTranslate(tmpBuffer);tmpBuffer=value}}}}}return memo},"");if(tmpBuffer){reduction+=actuallyTranslate(tmpBuffer)}return reduction}exports.translateSimpleDateFormat=translateSimpleDateFormat});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.formatter","jira/util/data/meta"],function(moment,formatter,Meta){var timeUnits=WRM.data.claim("jira.webresources:dateFormatProvider.dateFormat");moment.lang("jira",{months:timeUnits.months,monthsShort:timeUnits.monthsShort,weekdays:timeUnits.weekdays,weekdaysShort:timeUnits.weekdaysShort,weekdaysMin:timeUnits.weekdaysShort,longDateFormat:{LT:formatter.translateSimpleDateFormat(Meta.get("date-time")),L:formatter.translateSimpleDateFormat(Meta.get("date-day")),LL:formatter.translateSimpleDateFormat(Meta.get("date-dmy")),LLL:formatter.translateSimpleDateFormat(Meta.get("date-complete"))},meridiem:function(hours){return timeUnits.meridiem[+(hours>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:AJS.format("in {0}","%s"),past:AJS.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:AJS.format("{0} minutes","%d"),h:"an hour",hh:AJS.format("{0} hours","%d"),d:"a day",dd:AJS.format("{0} days","%d"),M:"a month",MM:AJS.format("{0} months","%d"),y:"a year",yy:AJS.format("{0} years","%d")}})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.lib","jira/moment/moment.jira.i18n"],function(moment,i18n){return moment});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
(function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat);AJS.namespace("window.moment",null,require("jira/moment"))}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",[],function(){return moment});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(a){function c(d){return d>64&&d<91?d-65:d>96&&d<123?d-71:d>47&&d<58?d+4:d===43?62:d===47?63:0}var b=function(f){var m=f.replace(/[^A-Za-z0-9\+\/]/g,""),g=m.length,d=g*3+1>>2,k=new Uint8Array(d);for(var j,h,i=0,e=0,l=0;l<g;l++){h=l&3;i|=c(m.charCodeAt(l))<<18-6*h;if(h===3||g-l===1){for(j=0;j<3&&e<d;j++,e++){k[e]=i>>>(16>>>j&24)&255}i=0}}return k};a.base64decode=b;a.decodeBase64DataUri=function(e){var g=";base64,",f=e.slice(0,e.indexOf(g))+g,d=e.substring(f.length);return b(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["jquery","underscore","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/time","jira/flag","jira/util/navigator","featureflags/feature-manager","exports"],function(c,i,f,a,h,k,g,b){b.isKeyPasteEvent=function(o,l){var m=86;var n=((l||"").indexOf("Mac")!==-1)||k.isMac();return o.which===m&&(n?o.metaKey:o.ctrlKey)};b.isImagePasteEvent=function(o){if(o&&o.clipboardData){var m=i.union(i.toArray(o.clipboardData.items),i.toArray(o.clipboardData.files));var n=m.some(function(p){return p.type.indexOf("image")!==-1});var l=m.some(function(p){return p.type.indexOf("rtf")!==-1});return n&&!l}};var e=function(m){if(!m.clipboardData||!m.clipboardData.types||!i.contains(m.clipboardData.types,"text/html")){return}var l=c(m.clipboardData.getData("text/html"));if(l.length===1&&l.children().length===0&&l[0].nodeName.toLowerCase()==="img"){return l[0].src}return null};b.getHtmlImagePaste=e;b.isHtmlImagePasteEvent=function(l){return e(l)!=null};b.isTextPasteEvent=function(l){return l.clipboardData.types&&(i.contains(l.clipboardData.types,"text/plain")||i.contains(l.clipboardData.types,"text/html"))};b.isContentEditable=function(l){return l.contentEditable=="true"||l.contentEditable==""||(l.contentEditable=="inherit"&&c(l).parents().is("[contenteditable=true]"))};b.isValidFileName=function(l){return !i(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(m){return l.indexOf(m)>-1})};b.getTextPasteContent=function(l){return l.clipboardData.types&&i.contains(l.clipboardData.types,"text/plain")&&l.clipboardData.getData("text/plain")||""};b.getTextContent=function(l){if(!l){return""}else{if(k.isIE()&&typeof l.innerText!=="undefined"){return l.innerText}else{return c(l).text()}}};b.normalizePasteEvent=function(l){if(l&&l.originalEvent&&l.originalEvent.clipboardData){l.clipboardData=l.originalEvent.clipboardData}if(l&&!l.clipboardData&&window.clipboardData){l.clipboardData={files:window.clipboardData.files,types:{contains:function(m){if(m=="text/plain"){return !!window.clipboardData.getData("Text")}}},getData:function(m){if(m=="text/plain"){return window.clipboardData.getData("Text")}}}}return l};b.browserIsSupported=function(l){var n=((l||"").indexOf("Mac")!==-1)||k.isMac();var m=k.isSafari();return !(n&&m)};b.browserIsNativePaste=function(){return k.isChrome()||k.isSafari()};b.isUnifiedAttachmentsEnabled=function(){return g.isFeatureEnabled("jira.unified.attachments")};b.isIssuePasteDisabledEnabled=function(){return g.isFeatureEnabled("com.atlassian.plugins.jira.screenshot.issuePasteDisabled")};b.isWikiTextfield=function(l){return l.is(":input")&&l.hasClass("wiki-textfield")};var d=function(l){return l.is("input#summary")};var j=function(m,t,p,r){var o=c(t);if(!(b.isWikiTextfield(o)||d(o))||!m){return}if(!o.is(":focus")){o.one("focus",function(){var u=o[0];u.selectionStart=u.selectionEnd=p+m.length})}var q=o.val();var l=q.substring(0,p);var s=q.substring(r,q.length);var n=o.data("wikiEditor");if(n&&n.undoRedoEl&&i.isFunction(n.undoRedoEl.recordHistoryItem)){n.undoRedoEl.recordHistoryItem()}o.val(l+m+s);o.trigger("input");t.selectionStart=t.selectionEnd=p+m.length;if(n&&n.undoRedoEl&&i.isFunction(n.undoRedoEl.updateCurrent)){n.undoRedoEl.updateCurrent()}};b.insertToInput=j;b.getMarkup=function(p){var o=["gif"];var n=["bmp","jpeg","jpg","png"];var m=p.split(".");var l=m[m.length-1].toLowerCase();if(i.contains(o,l)){return"!"+p+"!"}else{if(i.contains(n,l)){return"!"+p+"|thumbnail!"}else{return"[^"+p+"]"}}};b.insertWikiMarkup=function(p,m,n,o){var l=b.getMarkup(p);if(l){l=" "+l+" ";j(l,m,n,o)}};b.loadImage=function(n){var l=new c.Deferred();var m=new Image();m.setAttribute("crossOrigin","anonymous");m.onload=function(){l.resolve(m)};m.onerror=l.reject.bind(l);m.src=n;if(m.width>0&&m.height>0){l.resolve(m)}return l};b.convertImageToBlob=function(n){var l=c("<canvas>").attr("width",n.width).attr("height",n.height)[0];l.getContext("2d").drawImage(n,0,0);try{if(l.mozGetAsFile){return l.mozGetAsFile("image/png")}if(l.toDataURL){return new Blob([f.decodeBase64DataUri(l.toDataURL("image/png"))],{type:"image/png"})}}catch(m){return null}};b.convertBlobToImage=function(l,n){var m=new Blob([l.slice()],{type:l.type});m.lastModifiedDate=new Date();m.name=n;return m};b.dropFileToElement=function(n,m){var p=n.name;if(!p){p=this.generateFileName();n.name=p+".png"}var o=c.Event("drop",{dataTransfer:{files:[n]}});var l=false;c(document).on("dropHandled.dropFileToElement",function(){l=true});m.trigger(o);c(document).off(".dropFileToElement");return l};b.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")};b.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()};b.showErrorMsg=function(m,l){h.showErrorMsg(m,l)};b.createBlobFromFile=function(l){var m=new Blob([l.slice()],{type:l.type});m.name=l.name;return m};b.dragEventContainsFiles=function(n){if(n.dataTransfer&&n.dataTransfer.types){var m=n.dataTransfer.types;for(var l=0;l<m.length;l++){if(m[l]==="Files"){return true}}return false}return true}});;
;
/* module-key = 'com.atlassian.pocketknife.featureflags-plugin:pocketknife-feature-flags', location = '/featureflags/feature-manager.js' */
define("featureflags/feature-manager",["exports"],function(b){var e=WRM.data.claim("com.atlassian.pocketknife.featureflags-plugin:pocketknife-feature-flags.feature-flag-data");var d=(e&&e["enabled-feature-keys"])||[];var a=(e&&e["feature-flag-states"])||{};var c=function(f,g){return f.indexOf(g)!==-1};b.isFeatureEnabled=function(i){var h=a[i];if(h===true){var g=c(d,i+".disabled");return !g}else{if(h===false){var f=c(d,i+".enabled");return f}else{return c(d,i)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",function(){var b="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";function a(c){return _.isFunction(WRM.data)?WRM.data(c):WRM.data.claim(c)}return{getWRM:function(c){return a(b+c)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["jquery"],function(a){return Class.extend({init:function(b){this._dataTransfer=b},getFiles:function(){var c=this._dataTransfer.files;var b=this._dataTransfer.items;if(b&&b.length>0){if(_.any(b,function(d){return !!d.webkitGetAsEntry})){return this.readEntries(b)}}if(c&&c.length>0){return this.readFiles(this._dataTransfer.files)}else{return new a.Deferred().reject()}},readFiles:function(c){var b=new a.Deferred();a.when.apply(window,_.map(c,function(e){var d=new a.Deferred();var f=!e.name.match(/\.([a-z0-9]+)$/i);if(f&&(e.size<=8192)||e.size==8192||e.size==4096||e.size<=1024){this.readFileAsText(e).fail(function(){c=_(c).without(e)}).always(d.resolve.bind(d))}else{d.resolve()}return d}.bind(this))).always(function(){b.resolve(c)});return b},readFileAsText:function(d){var c=new a.Deferred();var b=new FileReader();b.onload=function(){c.resolve(this.result)};b.onerror=function(){c.reject(this.error)};b.readAsText(d);return c},readEntries:function(c){var b=new a.Deferred();c=_.filter(c,function(d){return d.kind==="file"});a.when.apply(window,_.map(c,function(d){return this.readEntry(d.webkitGetAsEntry(),d)}.bind(this))).then(function(){b.resolve(_.union.apply(_,arguments))},b.reject.bind(b));return b},readEntry:function(d,c){var b=new a.Deferred();if(d.isFile){if(c&&c.getAsFile){b.resolve([c.getAsFile()])}else{d.file(function(e){b.resolve([e])})}}else{if(d.isDirectory){d.createReader().readEntries(function(e){var f=[];a.when.apply(window,_.map(e,function(g){return this.readEntry(g).then(function(h){return f.push.apply(f,h)})}.bind(this))).always(function(){b.resolve(f)})}.bind(this))}}return b}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){var h=1024;var c=h*h;var d=" kB";var g=" MB";function f(i){if(i>c){return e(i)}else{if(i>h){return a(i)}else{return b(i)}}}function e(j){var i=j/c;return i.toFixed(2)+g}function a(j){var i=Math.round(j/h);return i+d}function b(j){var i=j/h;return i.toFixed(1)+d}return{format:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["jira/util/events","dndattachment/util/events/types","underscore","jquery","dndattachment/ctrlv/utility","exports"],function(j,i,h,e,g,d){var c=[];var a;var f=function(n,m){var l=e.Deferred();var k=JIRA.Dialog.current;if(k){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste",data:{}});var p=g.createBlobFromFile(m.files[0]);if(g.dropFileToElement(p,k.$form)){l.resolve([m.files[0].name])}}else{var o=h.find(c,function(q){return q.isValid(n,m)});if(o){l=o.processFiles(m.files,a);if(m.successCallback){l.done(m.successCallback)}if(m.failureCallback){l.fail(m.failureCallback)}if(m.alwaysCallback){l.always(m.alwaysCallback)}}}l.done(function(r,q){if(!q&&m.isWikiTextfieldFocused){var s=m.wikiTextfield;h.each(r,function(t){g.insertWikiMarkup(t,s,s.selectionStart,s.selectionStart)});if(k&&m.isPaste){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}})}if(!e(m.wikiTextfield).is(":focus")){setTimeout(function(){m.wikiTextfield.focus()},0)}}})};var b=function(o){if(o){var l=typeof o.isValid!=="undefined";var m=typeof o.processFiles!=="undefined";var k=typeof o.weight!=="undefined";var n=typeof o.name!=="undefined";return l&&m&&k&&n}return false};d.registerExecutor=function(m){var l=b(m);if(l){var k=h.reject(c,function(n){return n.name===m.name});k.push(m);c=h.sortBy(k,function(n){return -n.weight})}return l};d.unregisterExecutor=function(k){c=h.reject(c,function(l){return l.name===k.name})};d.initialize=function(){j.bind(i.ATTACHMENT_FOR_PAGE_RECEIVED,f)};d.disable=function(){j.unbind(i.ATTACHMENT_FOR_PAGE_RECEIVED,f)};d.setAttachmentDropZone=function(k){a=k}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["jquery","underscore","dndattachment/ctrlv/utility","exports"],function(d,c,a,b){b.name="Default attachment executor";b.weight=0;b.isValid=function(f,e){return true};b.processFiles=function(f,e){return e.uploadFiles(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(a){var b=function b(c){return c.split(/\//).pop()};a.basename=b;a.dirname=function(c){var d=b(c);return c.substring(0,c.length-d.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/ie_version.js' */
define("dndattachment/ctrlv/version",["jquery","underscore","jira/util/navigator","exports"],function(h,l,m,g){var f=document.documentElement.className.split(/\s+/);var c=m.isIE();var k=h.inArray("msie-gt-7",f)>-1;var j=h.inArray("msie-gt-8",f)>-1;var i=h.inArray("msie-gt-9",f)>-1;var b=h.inArray("msie-gt-10",f)>-1;var e=c&&k&&!j;var d=c&&j&&!i;var a=c&&i&&!b;g.isIE8=l.once(function(){return e});g.isIE9=l.once(function(){return d});g.isIE10=l.once(function(){return a})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/resource-uris.js' */
define("dndattachment/ctrlv/resource-uris",["jquery","exports"],function(c,a){var d="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources.resource-uris";var b=WRM.data.claim(d)||{};a.get=function(e){return b[e]}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml("Attach Screenshot") + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form" data-attach-secure-token="' + soy.$$escapeHtml(opt_data.attachUserToken) + '" data-submit-secure-token="' + soy.$$escapeHtml(opt_data.submitUserToken) + '"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml("Take a screenshot:") + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3ePrtScn\x3c/kbd\x3e") + '</dd>' : '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3e\x26#8963; Ctrl\x3c/kbd\x3e + \x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e + \x3ckbd\x3e3\x3c/kbd\x3e") + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml("Paste the image:") + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3eCtrl\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e") + '</dd>' : '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e") + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml("Your image will be pasted here") + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml("Attach Screenshot") + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml("File name") + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml("Required") + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml("A file name to be used as attached image name") + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml("Upload") + '</button><a href="#" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/requireDeployJava.js' */
define("dndattachment/ctrlv/requireDeployJava",["jquery","dndattachment/ctrlv/resource-uris","exports"],function(d,c,b){var a=null;b.requireDeployJava=function(){var e;if(a!==null){return a}e=d.Deferred();a=e.promise();d('<iframe style="display: none !important; visibility: hidden !important; opacity: 0"/>').attr("src",c.get("deployJava.html")).one("load",function(){e.resolve(this.contentWindow.deployJava,this.contentWindow)}).one("error",e.reject.bind(e)).appendTo("body");return a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/polyfill.js' */
define("dndattachment/ctrlv/polyfill",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/requireDeployJava","dndattachment/ctrlv/resource-uris","dndattachment/ctrlv/path","dndattachment/ctrlv/version","jira/ajs/ajax/smart-ajax","exports"],function(i,o,p,l,d,q,m,b,h){var e;var k=510;var a=280;var j=m.isIE8()?32000:Number.MAX_VALUE;h.pasteImageWidth=k;h.pasteImageHeight=a;h.dataURILimit=j;function f(){var r=i.Deferred();return r.reject.apply(r,arguments)}var c;var n=function(t){if(p.isKeyPasteEvent(t)){e.reload();var s=e.getClipboardData();if(s){var r=e.getClipboardData(k,a);if(r.length>j){var u=j/r.length;r=e.getClipboardData(k*u,a*u)}c.trigger("polyPaste",[s,r])}}};function g(v,t){var u=document.cookies,r=i.Deferred();var w={getResponseHeader:function(x){return responseHeaders[x]}};var s=new i.Deferred().progress(o.bind(r.notify,r)).done(o.bind(r.resolve,r)).fail(function(z,x){var y=x||JSON.stringify({errorMessage:y});r.reject(null,null,null,new b.SmartAjaxResult(w,0,"error",y,true))});e.doMultipartRequest(t,"UTF-8",window.navigator.userAgent,s);r.always(function(){document.cookies=u});return r}h.install=o.once(function(r){c=i(r);return l.requireDeployJava().pipe(function(v,s){var u,y,t,w="1.7.0_06",x;if(v.getJREs().length===0){return f("java-absent")}else{if(!v.versionCheck(w+"+")){return f("java-version")}}t=!v.versionCheck("1.7.0_45+");x=d.get(t?"clipboard-legacy.jar":"clipboard.jar");u={id:"JIRA HTML5 Images Applet",codebase:q.dirname(x),code:"com.atlassian.plugins.jira.screenshot.applet.ScreenshotApplet.class",archive:q.basename(x),width:0,height:0};y={permissions:"all-permissions"};v.runApplet(u,y,w);e=s.document.getElementById(u.id);try{if(!e||!e.isSecurityOk()){return f("java-security")}}catch(z){return f("java-security")}if(!p.isUnifiedAttachmentsEnabled()){c.on("keydown",n)}return g},function(){return f("unknown")}).pipe(null,function(t){var s;if(p.isUnifiedAttachmentsEnabled()){s={unknown:"A problem occurred while attempting to attach screenshot via Ctrl+V.","java-version":AJS.format("You need to {0}upgrade Java{1} to be able to attach screenshots via Ctrl+V.",'<a target="_blank" href="//java.com">',"</a>"),"java-absent":AJS.format("You need to install {0}Java{1} to be able to attach screenshots via Ctrl+V.",'<a target="_blank" href="//java.com">',"</a>"),"java-security":AJS.format("Your Java security settings are blocking the ability to attach screenshots via Ctrl+V. Please upgrade to the latest {0}Java{1}.",'<a target="_blank" href="//java.com">',"</a>")}}else{s={unknown:"A problem occurred while running Java.","java-version":AJS.format("You need to {0}upgrade Java{1}.",'<a target="_blank" href="//java.com">',"</a>"),"java-absent":AJS.format("You need to install {0}Java{1}.",'<a target="_blank" href="//java.com">',"</a>"),"java-security":AJS.format("Your Java security settings are blocking this feature. Please upgrade to the latest {0}Java{1}.",'<a target="_blank" href="//java.com">',"</a>")}}return f(t,s[t])})});h.getClipboardData=function(){var r=new i.Deferred();h.install(document).done(function(){try{e.reload();r.resolve(e.getClipboardData())}catch(s){r.reject("A problem occurred while attempting to attach screenshot via Ctrl+V.")}}).fail(function(t,s){r.reject(s)});return r};h.isRequired=function(){return m.isIE8()||m.isIE9()||m.isIE10()};h.isRequiredForBinaryAjax=function(){return m.isIE8()||m.isIE9()};h.proxyAjaxRequest=function(r,s){return function(){var t=b.makeRequest;b.makeRequest=function(u){var v=o.reduce(o.keys(u.data),function(y,x){y.push(x,u.data[x]);return y},[]);v.push("secureToken",s());var w=e.doAjaxRequest(u.url,"UTF-8",window.navigator.userAgent,i.Deferred(),v);w.abort=i.noop;w.then(function(z){var y=o.filter(arguments,function(D,C){return C>0});y[0]="Status";y=o.reduce(o.reduce(y,function(F,E,C){var D=(C/2)<<0;(F[D]||(F[D]=[])).push(E);return F},[]),function(D,C){D[C[0]]=C[1];return D},{});var A={getResponseHeader:function(C){return y[C]}};var B="success";var x=new b.SmartAjaxResult(A,0,"success",z,true);u.complete(A,B,x)});return w};r.apply(this,arguments);b.makeRequest=t}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/ctrlv/polyfill","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","exports"],function(c,i,f,g,j,e,h,a,d,b){b.getFileFromEvent=function(l){var k=new c.Deferred();if(j.isImagePasteEvent(l)){k.resolve(i(l.clipboardData.items).filter(function(m){return m.type.indexOf("image")!==-1}).map(function(m){return m.getAsFile()})[0]||i(l.clipboardData.files).filter(function(m){return m.type.indexOf("image")!==-1})[0])}else{k.reject()}return k.promise()};b.REQUEST_TIMEOUT_MILLIS=5*60*1000;b.screenshotFileUpload={};b.screenshotFileUploadUri=null;b.$document=undefined;b.$window=undefined;b.$container=undefined;b.$fakeInput=undefined;b.uploadError=false;b.uploadErrorMsg="";b.progressView={hidden:false,progress:0,old:0,progressBarContainer:undefined,progressEl:undefined,container:undefined,options:undefined,staticProgress:undefined,initProgress:function(){this.container=this.buildContainer();this.progressEl=this.buildProgress();this.container.append(this.progressEl);this.options={showPercentage:false,height:"5px"};this.progressBarContainer=c("#attach-screenshot-progress-container");this.progressBarContainer.empty();this.progressBarContainer.append(this.container);this.staticProgress=this.container;this.hidden=true},finish:function(){this.value(100)},progressHandler:function(l){var k=Math.round(l.loaded*100/l.total);this.value(k)},value:function(k){if(k>100){k=100}else{if(k<0){k=0}}if(this.hidden){this.progressEl.show();this.hidden=false}if(this.old!==k){this.progressEl.progressBar(k,this.options);if(k>=100){this.progressEl.fadeOut()}this.old=k}},buildContainer:function(){return c("<div>").addClass("file-progress")},buildProgress:function(){return c("<div>").attr("id","attach-screenshot-upload-progress")}};b.dialogView={pasteCatcher:{},presenter:undefined,getMaxSize:function(){return c("#attach-max-size").text()},getFileSize:function(){if(c.isPlainObject(this.presenter.screenshotFileUpload)&&i.isEmpty(this.presenter.screenshotFileUpload)){return 0}return this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){c("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){c("#error-attach-screenshot-filename").remove()},displayErrors:function(k){if(j.isUnifiedAttachmentsEnabled()){if("compatibility" in k){j.showErrorMsg("",k.compatibility)}if("fileName" in k){j.showErrorMsg("",k.fileName)}if("fileUpload" in k){j.showErrorMsg("",k.fileUpload)}}else{b.dialogView.cleanFileErrors();b.dialogView.cleanGeneralErrors();if("compatibility" in k){c("#attach-screenshot-inner-container").before(aui.message.error({content:k.compatibility}))}if("fileName" in k){c("#attach-screenshot-filename-group").append('<div class="error" id="error-attach-screenshot-filename" data-field="attachscreenshotname"></div>').find(".error").text(k.fileName)}if("fileUpload" in k){c("#attach-screenshot-inner-container").append('<div class="field-group attach-screenshot-image-error"><div class="error" id="error-attach-screenshot-image"></div></div>').find(".error").text(k.fileUpload)}}},appendBlobImage:function(k){var m=window.URL||window.webkitURL;var l=m.createObjectURL(k);this.presenter.screenshotFileUpload=k;this.createImage(l)},createImage:function(n){var l=new Image();l.onload=function(){};l.src=n;this.presenter.screenshotToUpload=l;var m=c(l);m.addClass("attach-screenshot-pasted-image");var k=c("#attach-screenshot-image-container");k.empty();k.append(m);this.presenter.$fakeInput.focus();i.defer(function(){b.imageCreatedHandler()})},checkInput:function(){var l,k=b.dialogView.pasteCatcher.childNodes[0];if(k){if("IMG"===k.tagName){if(k.src.indexOf("data:")===0){l=k.src}else{}}b.dialogView.pasteCatcher.innerHTML=""}if(!l){b.$fakeInput.focus()}return l},onPaste:function(k){b.dialogView.cleanFileErrors();b.dialogView.cleanGeneralErrors();if(j.isImagePasteEvent(k)){b.getFileFromEvent(k).then(function(l){this.appendBlobImage(l)}.bind(this))}else{setTimeout(function(){var l=this.checkInput();if(l){b.screenshotFileUpload=g.decodeBase64DataUri(l);b.dialogView.createImage(l)}}.bind(this),0)}},getFakeInput:function(){return c("#attach-screenshot-fake-input")},getContainer:function(){return c("#attach-screenshot-image-container")},getIssueKey:function(){return c("input[name='id']").val()},getDocument:function(){return c(document)},getWindow:function(){return c(window)},getFileNameInput:function(){return c("#attachscreenshotname")},hasPngExtension:function(l){var k=/\.png$/i;return k.test(l)},setFileToConvert:function(k){c("input[name='filetoconvert']").val(k)},buildPasteCatcher:function(){if(!document.getElementById("attach-screenshot-form")){return}var k=document.createElement("div");k.setAttribute("contenteditable","true");k.style.width=0;k.style.height=0;k.style.position="absolute";k.style.top="-5000px";document.getElementById("attach-screenshot-form").appendChild(k);return k},_getFormSubmits:function(){return c("#attach-screenshot-form").find("button.aui-button")},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return c("#attach-screenshot-form").length>0},initDialog:function(k){this.pasteCatcher={};this.presenter=k;if(!f.isRequired()){this.pasteCatcher=this.buildPasteCatcher()}}};b.initScreenshotPasteHandler=function(){var k=b.dialogView;b.screenshotFileUpload={};b.resetUploadErrors();b.dialogView.initDialog(b);b.$document=k.getDocument();b.$window=k.getWindow();b.$container=k.getContainer();b.$fakeInput=k.getFakeInput();b.bindOnce(b.$container,"click",b.setFocusOnClickHandler);b.bindOnce(b.$fakeInput,"focus",b.showFocusOnFieldHandler);b.bindOnce(b.$fakeInput,"blur",b.hideFocusOnFieldHandler);b.bindOnce(b.$fakeInput,"keydown",b.keyDownHandler);if(!j.browserIsSupported()){k.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})}else{if(f.isRequired()){f.install(document).done(function(l){b.bindOnce(b.$document,"polyPaste",b.polyPasteHandler);if(f.isRequiredForBinaryAjax()){b.executeAjaxUpload=l}}).fail(function(m,l){k.displayErrors({compatibility:l})})}else{b.bindOnce(b.$window,"paste",b.pasteHandler)}}};b.resetUploadErrors=function(){b.uploadError=false;b.uploadErrorMsg=undefined};b.setUploadError=function(k){b.uploadError=true;b.uploadErrorMsg=k};b.bindOnce=function(m,k,l){m.unbind(k,l);m.bind(k,l)};b.showFocusOnFieldHandler=function(){b.$container.addClass("focus")};b.hideFocusOnFieldHandler=function(){b.$container.addClass("focus")};b.setFocusOnClickHandler=function(){b.$fakeInput.focus()};b.pasteHandler=function(k){if(!b.dialogView.isEnabled()){return}k=j.normalizePasteEvent(k);b.dialogView.onPaste(k)};b.polyPasteHandler=function(l,k,m){if(!b.dialogView.isEnabled()){return}b.screenshotFileUpload={length:-1};b.screenshotFileUploadUri=k;b.dialogView.createImage(m)};b.keyDownHandler=function(k){if(j.isKeyPasteEvent(k)){if(b.dialogView.pasteCatcher.focus){b.dialogView.pasteCatcher.focus()}}};b.imageCreatedHandler=function(){b.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())};b.getMimeType=function(){if(f.isRequired()){return"image/jpeg"}return"image/png"};b.createData=function(){if(f.isRequired()&&!f.isRequiredForBinaryAjax()&&!j.isUnifiedAttachmentsEnabled()){return g.decodeBase64DataUri(b.screenshotFileUploadUri)}return b.screenshotFileUpload};b.clipboardDataIsEmpty=function(k){if(window.clipboardData!=null){return false}return !(k&&k.clipboardData&&k.clipboardData.types&&k.clipboardData.types.length>0)};b.validateFileSize=function(n,k,m){var k=k||b.dialogView.getFileSize();var m=m||b.dialogView.getMaxSize();if(k>m){var l=d.Text.fileSize(m,k);n.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",l[1],l[0])}};b.validateFormData=function(k,m){var l={};if(c.isPlainObject(k)&&i.isEmpty(k)){l.fileUpload="Please paste the image you wish to upload"}b.validateFileSize(l);if(b.uploadError){l.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."}if(""==m){l.fileName="You must specify a filename of the image."}if(!j.isValidFileName(m)){l.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"}return l};b.doAjaxUpload=function(k,r){b.dialogView.disable();var q={};b.validateFileSize(q);if(!i.isEmpty(q)){b.dialogView.displayErrors(q);b.dialogView.enable();return}var o=b.createData(),p=b.getMimeType(),m=c("#attach-screenshot-form").data("attach-secure-token"),l=c("#attach-screenshot-form").find("input[name='formToken']").attr("value");var n=AJS.contextPath()+"/rest/internal/1.0/AttachTemporaryFile"+(f.isRequired()?"/secure?":"?")+"size="+b.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(m?("&secureToken="+encodeURIComponent(m)):"")+(l?("&formToken="+encodeURIComponent(l)):"");b.resetUploadErrors();b.executeAjaxUpload(o,n,p).progress(function(s){if(s=="init"){b.progressView.initProgress()}}).done(function(s){if(typeof s=="string"){s=JSON.parse(s)}b.dialogView.setFileToConvert(s.id)}).fail(function(u,x,w,s){var t;if(s.statusText=="abort"){t="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."}else{if(s.hasData){var v=JSON.parse(s.data);if(v.errorMessage){t=v.errorMessage}else{t=a.buildSimpleErrorContent(s,{alert:false})}}}b.setUploadError(t);b.dialogView.displayErrors({fileUpload:t})}).always(function(){var s=c.Deferred();if(f.isRequired()){b.reloadSecureToken(s)}else{s.resolve()}s.then(function(){b.dialogView.enable();b.progressView.finish()})}).progress(function(s){if(s!="init"){b.progressView.progressHandler(s)}})};b.executeAjaxUpload=function(m,l,o){var k=c.Deferred();var n=a.makeRequest({type:"POST",url:l,contentType:o,processData:false,data:m,timeout:b.REQUEST_TIMEOUT_MILLIS,success:k.resolve.bind(k),error:k.reject.bind(k),xhr:function(){var p=c.ajaxSettings.xhr();k.notify("init");p.upload.addEventListener("progress",k.notify.bind(k));return p}});k.always(function(){c.ajaxSettings.xhr().removeEventListener("progress",b.progressView.progressHandler);c(h.attachScreenshotDialog).off("Dialog.hide",n.abort)});c(h.attachScreenshotDialog).one("Dialog.hide",n.abort);return k.promise()};b.reloadSecureToken=function(k){var l=AJS.contextPath()+"/secure/ShowAttachScreenshotFormAction!default.jspa?id="+encodeURIComponent(this.dialogView.getIssueKey())+"&inline=true&decorator=dialog&_="+(new Date().getTime());c.get(l).then(function(m){var n=c(m).find("#attach-screenshot-form").data("attach-secure-token");if(n){c("#attach-screenshot-form").data("attach-secure-token",n);k.resolve(n)}else{k.reject()}},i.bind(k.reject,k))};b.show=function(){var k=new c.Deferred();var l=c(".issueaction-attach-screenshot-html5.aui-list-item-link");if(e.current!=null){return k.reject().promise()}if(l.length==0){return k.reject().promise()}i.defer(function(){l.trigger("click")});c(document).on("dialogContentReady",function(n,m){if(m===h.attachScreenshotDialog&&b.dialogView.isEnabled()){k.resolve(m)}else{k.reject()}});c(document).on("ajaxComplete.jira.screenshot.dialog",function(o,n,m){if(m.url.indexOf(l.attr("href"))>-1){setTimeout(function(){if(!k.isResolved()){k.reject()}},1000)}});k.always(function(){c(document).off("ajaxComplete.jira.screenshot.dialog")});return k.promise()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/polyfill","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(d,v,e,q,g,B,C,f,n,x,E){var A=0;var l=1;var c=2;var y=3;var o=4;var s=5;var h=6;var w=7;var p=8;var m=9;function k(H,G){G.stateName=H;var F=function(){var I=G.apply(null,arguments);I.stateName=H;return I};F.stateName=H;return F}function b(G,F,H){return k(G,function(){var K=setTimeout(function(){a(m)},H);var J=F.apply(null,arguments);var I=function(N,M){var L=J(N,M);if(L){clearTimeout(K);return L}};I.stateName=G;return I})}var j=k("idle",function(){function F(G){if(d(G.target).is(":input:not(.wiki-textfield, #summary)")||q.isContentEditable(G.target)){return}return true}return function(H,G){if(q.isIssuePasteDisabledEnabled()){v("jira/attach-images-plugin/issuePasteDisabled");return}if(H==A&&q.isKeyPasteEvent(G)){if(q.browserIsNativePaste()||!F(G)||!q.browserIsSupported()){return}e.trigger("attach.screenshot.html5.catchClipboard");return new t(G)}if(H==l){if(q.isImagePasteEvent(G)){e.trigger("attach.screenshot.html5.handlePaste");if(!F(G)){v("jira/attach-images-plugin/pasteIgnored");return}if(d(G.target).is(":input.wiki-textfield")){G.preventDefault()}return new r(G)}else{v("jira/attach-images-plugin/pasteIgnoredNotImage")}}}});var t=b("catchClipboard",function(H){var F=document.activeElement;H.selectionStart=H.target.selectionStart;H.selectionEnd=H.target.selectionEnd;var I=d('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");I.focus();if(d(F).is(":focusable:input,:aui-focusable:input")){setTimeout(function(){F.focus()})}function G(){I.remove()}return function(M,J){if(M==l){if(q.isImagePasteEvent(J)){G();J.target=F;return new r(J)}if(q.isHtmlImagePasteEvent(J)){G();J.target=F;return new z(J)}if(q.isTextPasteEvent(J)){G();var P=q.getTextPasteContent(J);q.insertToInput(P,H.target,H.selectionStart,H.selectionEnd);J.preventDefault();return new j()}}if(M==m){G();var L=I.find(">img");if(L.is(":only-child")){var N=L.attr("src");if(N.toLowerCase().indexOf("http")===0){return j()}else{var Q=C.decodeBase64DataUri(N);var K=new Blob([Q],{type:"image/png"});return new i(K,H)}}else{if(B.isRequired()&&!I.text()){return new u(H)}else{var O=q.getTextContent(I[0]);q.insertToInput(O,H.target,H.selectionStart,H.selectionEnd);return j()}}}}});var u=k("appletLoading",function(F){B.getClipboardData().done(function(H){var I=C.decodeBase64DataUri(H);var G=new Blob([I],{type:"image/jpeg"});a(o,G)}).fail(function(G){q.showErrorMsg("",G);a(s)});return function(H,G){if(H==o){return new i(G,F)}if(H==s){return new j()}}});var z=k("imageLoading",function(F){var G=q.getHtmlImagePaste(F);if(!G){a(s)}else{q.loadImage(G).then(function(H){a(o,H)},a.bind(null,s))}return function(J,H){if(J==o){var I=q.convertImageToBlob(H);if(I){return new i(I,F)}else{return new j()}}if(J==m||J==s){return new j()}}});var r=b("fileLoading",function(F){g.getFileFromEvent(F).done(function(G){a(c,G)}).fail(function(){a(y)});return function(H,G){if(H==c){return new i(G,F)}else{if(H==y||H==m){return new j()}}}},1000);var i=k("attachImage",function(H,G){var I=G.target;var J=q.generateFileName()+(B.isRequired()?".jpg":".png");var F=q.convertBlobToImage(H,J);n.trigger(x.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[F],isWikiTextfieldFocused:q.isWikiTextfield(d(I)),wikiTextfield:I,isPaste:true,successCallback:function(){a(h)}});return function(L,K){return new j()}});var D=new j();function a(G,F){if(a.eventQueue){a.eventQueue.push({type:G,object:F});return}a.eventQueue=[{type:G,object:F}];while(a.eventQueue.length>0){var H=a.eventQueue.splice(0,1)[0];var I=D(H.type,H.object);if(I){D=I}}delete a.eventQueue}E._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:A,EVENT_WINDOW_PASTE:l,EVENT_FILE_LOADED:c,EVENT_FILE_LOAD_ERROR:y,EVENT_IMAGE_LOADED:o,EVENT_IMAGE_LOAD_ERROR:s,EVENT_DIALOG_LOADED:h,EVENT_DIALOG_CLOSED:w,EVENT_DIALOG_CANCELED:p,EVENT_TIMEOUT:m},states:{StateIdle:j,StateCatchClipboard:t,StateAppletLoading:u,StateImageLoading:z,StateFileLoading:r,StateAttachImage:i}}};E.initIssuePaste=function(){d(window).on("keydown",function(F){a(A,F)});d(window).on("paste",function(F){a(l,q.normalizePasteEvent(F))});n.bind("Dialog.hide",function(F,H,G){if(G){a(p,H)}else{a(w,H)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){return function a(){return JIRA.trace.apply(undefined,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(a){a.trigger=function(c,b){AJS.trigger("analytics",{name:c,data:b||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,a,c,d,b){b.register=function(){var f={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(h,g){return !!g.isPaste},processFiles:function(i,h){var g=e.Deferred();c.show().done(function(l){var k=e("#attach-screenshot-placeholder-message");var j=e.Event("paste");j.clipboardData={files:i};k.focus();setTimeout(function(){k.trigger(j)});a.bind("Dialog.hide",function(m,o,n){if(n){g.reject()}else{g.resolve([o.find("#attachscreenshotname").val()+".png"])}})});return g}};d.registerExecutor(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/polyfill","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(d,j,g,k,e,f,i,b,h,a,c){c.init=function(){var l=a.extend({options:{}});JIRA.ScreenshotDialog=l;f.initIssuePaste();d(document).ready(function(){var n=d.Deferred();if(!k.browserIsSupported()||!g.isRequired()){n.resolve()}h.attachScreenshotDialog=new l({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:true,onContentRefresh:function m(){this.$form.bind("before-submit",function o(p){var q=e.validateFormData(e.screenshotFileUpload,d.trim(e.dialogView.getFileNameInput().val()));if(e.dialogView.getFileSize()==0){p.preventDefault();return false}else{if(!j.isEmpty(q)){e.dialogView.displayErrors(q);p.preventDefault();return false}}return true})},delayShowUntil:function(){if(g.isRequired()){g.install(document).done(function(){l.prototype._submitForm=g.proxyAjaxRequest(l.prototype._submitForm,function(){return d("#attach-screenshot-form").data("submit-secure-token")})}).always(function(){n.resolve()})}return n}});d(document).bind("dialogContentReady",function(p,o){if(o===h.attachScreenshotDialog&&document.getElementById("attach-screenshot-form")!==null){i.trigger("attach.screenshot.html5.contentReady");e.initScreenshotPasteHandler()}});d(document).ready(function(){d(document).on("click","#attach-screenshot-html5",function(){i.trigger("attach.screenshot.html5.display")})})});b.register()}});require(["dndattachment/ctrlv/initialize","jquery"],function(b,a){a(function(){b.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'applet/deployJava.js' */
var deployJava=function(){var l={core:["id","class","title","style"],i18n:["lang","dir"],events:["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onkeypress","onkeydown","onkeyup"],applet:["codebase","code","name","archive","object","width","height","alt","align","hspace","vspace"],object:["classid","codebase","codetype","data","type","archive","declare","standby","height","width","usemap","name","tabindex","align","border","hspace","vspace"]};var b=l.object.concat(l.core,l.i18n,l.events);var m=l.applet.concat(l.core);function g(o){if(!d.debug){return}if(console.log){console.log(o)}else{alert(o)}}function k(p,o){if(p==null||p.length==0){return true}var r=p.charAt(p.length-1);if(r!="+"&&r!="*"&&(p.indexOf("_")!=-1&&r!="_")){p=p+"*";r="*"}p=p.substring(0,p.length-1);if(p.length>0){var q=p.charAt(p.length-1);if(q=="."||q=="_"){p=p.substring(0,p.length-1)}}if(r=="*"){return(o.indexOf(p)==0)}else{if(r=="+"){return p<=o}}return false}function e(){var o="//java.com/js/webstart.png";try{return document.location.protocol.indexOf("http")!=-1?o:"http:"+o}catch(p){return"http:"+o}}function n(p){var o="http://java.com/dt-redirect";if(p==null||p.length==0){return o}if(p.charAt(0)=="&"){p=p.substring(1,p.length)}return o+"?"+p}function j(q,p){var o=q.length;for(var r=0;r<o;r++){if(q[r]===p){return true}}return false}function c(o){return j(m,o.toLowerCase())}function i(o){return j(b,o.toLowerCase())}function a(o){if("MSIE"!=deployJava.browserName){return true}if(deployJava.compareVersionToPattern(deployJava.getPlugin().version,["10","0","0"],false,true)){return true}if(o==null){return false}return !k("1.6.0_33+",o)}var d={debug:null,version:"20120801",firefoxJavaVersion:null,myInterval:null,preInstallJREList:null,returnPage:null,brand:null,locale:null,installType:null,EAInstallEnabled:false,EarlyAccessURL:null,oldMimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",mimeType:"application/java-deployment-toolkit",launchButtonPNG:e(),browserName:null,browserName2:null,getJREs:function(){var t=new Array();if(this.isPluginInstalled()){var r=this.getPlugin();var o=r.jvms;for(var q=0;q<o.getLength();q++){t[q]=o.get(q).version}}else{var p=this.getBrowser();if(p=="MSIE"){if(this.testUsingActiveX("1.7.0")){t[0]="1.7.0"}else{if(this.testUsingActiveX("1.6.0")){t[0]="1.6.0"}else{if(this.testUsingActiveX("1.5.0")){t[0]="1.5.0"}else{if(this.testUsingActiveX("1.4.2")){t[0]="1.4.2"}else{if(this.testForMSVM()){t[0]="1.1"}}}}}}else{if(p=="Netscape Family"){this.getJPIVersionUsingMimeType();if(this.firefoxJavaVersion!=null){t[0]=this.firefoxJavaVersion}else{if(this.testUsingMimeTypes("1.7")){t[0]="1.7.0"}else{if(this.testUsingMimeTypes("1.6")){t[0]="1.6.0"}else{if(this.testUsingMimeTypes("1.5")){t[0]="1.5.0"}else{if(this.testUsingMimeTypes("1.4.2")){t[0]="1.4.2"}else{if(this.browserName2=="Safari"){if(this.testUsingPluginsArray("1.7.0")){t[0]="1.7.0"}else{if(this.testUsingPluginsArray("1.6")){t[0]="1.6.0"}else{if(this.testUsingPluginsArray("1.5")){t[0]="1.5.0"}else{if(this.testUsingPluginsArray("1.4.2")){t[0]="1.4.2"}}}}}}}}}}}}}if(this.debug){for(var q=0;q<t.length;++q){g("[getJREs()] We claim to have detected Java SE "+t[q])}}return t},installJRE:function(r,p){var o=false;if(this.isPluginInstalled()&&this.isAutoInstallEnabled(r)){var q=false;if(this.isCallbackSupported()){q=this.getPlugin().installJRE(r,p)}else{q=this.getPlugin().installJRE(r)}if(q){this.refresh();if(this.returnPage!=null){document.location=this.returnPage}}return q}else{return this.installLatestJRE()}},isAutoInstallEnabled:function(o){if(!this.isPluginInstalled()){return false}if(typeof o=="undefined"){o=null}return a(o)},isCallbackSupported:function(){return this.isPluginInstalled()&&this.compareVersionToPattern(this.getPlugin().version,["10","2","0"],false,true)},installLatestJRE:function(q){if(this.isPluginInstalled()&&this.isAutoInstallEnabled()){var r=false;if(this.isCallbackSupported()){r=this.getPlugin().installLatestJRE(q)}else{r=this.getPlugin().installLatestJRE()}if(r){this.refresh();if(this.returnPage!=null){document.location=this.returnPage}}return r}else{var p=this.getBrowser();var o=navigator.platform.toLowerCase();if((this.EAInstallEnabled=="true")&&(o.indexOf("win")!=-1)&&(this.EarlyAccessURL!=null)){this.preInstallJREList=this.getJREs();if(this.returnPage!=null){this.myInterval=setInterval("deployJava.poll()",3000)}location.href=this.EarlyAccessURL;return false}else{if(p=="MSIE"){return this.IEInstall()}else{if((p=="Netscape Family")&&(o.indexOf("win32")!=-1)){return this.FFInstall()}else{location.href=n(((this.returnPage!=null)?("&returnPage="+this.returnPage):"")+((this.locale!=null)?("&locale="+this.locale):"")+((this.brand!=null)?("&brand="+this.brand):""))}}return false}}},runApplet:function(p,u,r){if(r=="undefined"||r==null){r="1.1"}var t="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var o=r.match(t);if(this.returnPage==null){this.returnPage=document.location}if(o!=null){var q=this.getBrowser();if(q!="?"){if(this.versionCheck(r+"+")){this.writeAppletTag(p,u)}else{if(this.installJRE(r+"+")){this.refresh();location.href=document.location;this.writeAppletTag(p,u)}}}else{this.writeAppletTag(p,u)}}else{g("[runApplet()] Invalid minimumVersion argument to runApplet():"+r)}},writeAppletTag:function(r,w){var o="<applet ";var q="";var t="</applet>";var x=true;if(null==w||typeof w!="object"){w=new Object()}for(var p in r){if(!c(p)){w[p]=r[p]}else{o+=(" "+p+'="'+r[p]+'"');if(p=="code"){x=false}}}var v=false;for(var u in w){if(u=="codebase_lookup"){v=true}if(u=="object"||u=="java_object"||u=="java_code"){x=false}q+='<param name="'+u+'" value="'+w[u]+'"/>'}if(!v){q+='<param name="codebase_lookup" value="false"/>'}if(x){o+=(' code="dummy"')}o+=">";document.write(o+"\n"+q+"\n"+t)},versionCheck:function(p){var v=0;var x="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?(\\*|\\+)?$";var y=p.match(x);if(y!=null){var r=false;var u=false;var q=new Array();for(var t=1;t<y.length;++t){if((typeof y[t]=="string")&&(y[t]!="")){q[v]=y[t];v++}}if(q[q.length-1]=="+"){u=true;r=false;q.length--}else{if(q[q.length-1]=="*"){u=false;r=true;q.length--}else{if(q.length<4){u=false;r=true}}}var w=this.getJREs();for(var t=0;t<w.length;++t){if(this.compareVersionToPattern(w[t],q,r,u)){return true}}return false}else{var o="Invalid versionPattern passed to versionCheck: "+p;g("[versionCheck()] "+o);alert(o);return false}},isWebStartInstalled:function(r){var q=this.getBrowser();if(q=="?"){return true}if(r=="undefined"||r==null){r="1.4.2"}var p=false;var t="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var o=r.match(t);if(o!=null){p=this.versionCheck(r+"+")}else{g("[isWebStartInstaller()] Invalid minimumVersion argument to isWebStartInstalled(): "+r);p=this.versionCheck("1.4.2+")}return p},getJPIVersionUsingMimeType:function(){for(var p=0;p<navigator.mimeTypes.length;++p){var q=navigator.mimeTypes[p].type;var o=q.match(/^application\/x-java-applet;jpi-version=(.*)$/);if(o!=null){this.firefoxJavaVersion=o[1];if("Opera"!=this.browserName2){break}}}},launchWebStartApplication:function(r){var o=navigator.userAgent.toLowerCase();this.getJPIVersionUsingMimeType();if(this.isWebStartInstalled("1.7.0")==false){if((this.installJRE("1.7.0+")==false)||((this.isWebStartInstalled("1.7.0")==false))){return false}}var u=null;if(document.documentURI){u=document.documentURI}if(u==null){u=document.URL}var p=this.getBrowser();var q;if(p=="MSIE"){q='<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width="0" height="0"><PARAM name="launchjnlp" value="'+r+'"><PARAM name="docbase" value="'+u+'"></object>'}else{if(p=="Netscape Family"){q='<embed type="application/x-java-applet;jpi-version='+this.firefoxJavaVersion+'" width="0" height="0" launchjnlp="'+r+'"docbase="'+u+'" />'}}if(document.body=="undefined"||document.body==null){document.write(q);document.location=u}else{var t=document.createElement("div");t.id="div1";t.style.position="relative";t.style.left="-10000px";t.style.margin="0px auto";t.className="dynamicDiv";t.innerHTML=q;document.body.appendChild(t)}},createWebStartLaunchButtonEx:function(q,p){if(this.returnPage==null){this.returnPage=q}var o="javascript:deployJava.launchWebStartApplication('"+q+"');";document.write('<a href="'+o+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},createWebStartLaunchButton:function(q,p){if(this.returnPage==null){this.returnPage=q}var o="javascript:if (!deployJava.isWebStartInstalled(&quot;"+p+"&quot;)) {if (deployJava.installLatestJRE()) {if (deployJava.launch(&quot;"+q+"&quot;)) {}}} else {if (deployJava.launch(&quot;"+q+"&quot;)) {}}";document.write('<a href="'+o+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},launch:function(o){document.location=o;return true},isPluginInstalled:function(){var o=this.getPlugin();if(o&&o.jvms){return true}else{return false}},isAutoUpdateEnabled:function(){if(this.isPluginInstalled()){return this.getPlugin().isAutoUpdateEnabled()}return false},setAutoUpdateEnabled:function(){if(this.isPluginInstalled()){return this.getPlugin().setAutoUpdateEnabled()}return false},setInstallerType:function(o){this.installType=o;if(this.isPluginInstalled()){return this.getPlugin().setInstallerType(o)}return false},setAdditionalPackages:function(o){if(this.isPluginInstalled()){return this.getPlugin().setAdditionalPackages(o)}return false},setEarlyAccess:function(o){this.EAInstallEnabled=o},isPlugin2:function(){if(this.isPluginInstalled()){if(this.versionCheck("1.6.0_10+")){try{return this.getPlugin().isPlugin2()}catch(o){}}}return false},allowPlugin:function(){this.getBrowser();var o=("Safari"!=this.browserName2&&"Opera"!=this.browserName2);return o},getPlugin:function(){this.refresh();var o=null;if(this.allowPlugin()){o=document.getElementById("deployJavaPlugin")}return o},compareVersionToPattern:function(v,p,r,t){if(v==undefined||p==undefined){return false}var w="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var x=v.match(w);if(x!=null){var u=0;var y=new Array();for(var q=1;q<x.length;++q){if((typeof x[q]=="string")&&(x[q]!="")){y[u]=x[q];u++}}var o=Math.min(y.length,p.length);if(t){for(var q=0;q<o;++q){if(y[q]<p[q]){return false}else{if(y[q]>p[q]){return true}}}return true}else{for(var q=0;q<o;++q){if(y[q]!=p[q]){return false}}if(r){return true}else{return(y.length==p.length)}}}else{return false}},getBrowser:function(){if(this.browserName==null){var o=navigator.userAgent.toLowerCase();g("[getBrowser()] navigator.userAgent.toLowerCase() -> "+o);if((o.indexOf("msie")!=-1)&&(o.indexOf("opera")==-1)){this.browserName="MSIE";this.browserName2="MSIE"}else{if(o.indexOf("trident")!=-1||o.indexOf("Trident")!=-1){this.browserName="MSIE";this.browserName2="MSIE"}else{if(o.indexOf("iphone")!=-1){this.browserName="Netscape Family";this.browserName2="iPhone"}else{if((o.indexOf("firefox")!=-1)&&(o.indexOf("opera")==-1)){this.browserName="Netscape Family";this.browserName2="Firefox"}else{if(o.indexOf("chrome")!=-1){this.browserName="Netscape Family";this.browserName2="Chrome"}else{if(o.indexOf("safari")!=-1){this.browserName="Netscape Family";this.browserName2="Safari"}else{if((o.indexOf("mozilla")!=-1)&&(o.indexOf("opera")==-1)){this.browserName="Netscape Family";this.browserName2="Other"}else{if(o.indexOf("opera")!=-1){this.browserName="Netscape Family";this.browserName2="Opera"}else{this.browserName="?";this.browserName2="unknown"}}}}}}}}g("[getBrowser()] Detected browser name:"+this.browserName+", "+this.browserName2)}return this.browserName},testUsingActiveX:function(o){var q="JavaWebStart.isInstalled."+o+".0";if(typeof ActiveXObject=="undefined"||!ActiveXObject){g("[testUsingActiveX()] Browser claims to be IE, but no ActiveXObject object?");return false}try{return(new ActiveXObject(q)!=null)}catch(p){return false}},testForMSVM:function(){var p="{08B0E5C0-4FCB-11CF-AAA5-00401C608500}";if(typeof oClientCaps!="undefined"){var o=oClientCaps.getComponentVersion(p,"ComponentID");if((o=="")||(o=="5,0,5000,0")){return false}else{return true}}else{return false}},testUsingMimeTypes:function(p){if(!navigator.mimeTypes){g("[testUsingMimeTypes()] Browser claims to be Netscape family, but no mimeTypes[] array?");return false}for(var q=0;q<navigator.mimeTypes.length;++q){s=navigator.mimeTypes[q].type;var o=s.match(/^application\/x-java-applet\x3Bversion=(1\.8|1\.7|1\.6|1\.5|1\.4\.2)$/);if(o!=null){if(this.compareVersions(o[1],p)){return true}}}return false},testUsingPluginsArray:function(p){if((!navigator.plugins)||(!navigator.plugins.length)){return false}var o=navigator.platform.toLowerCase();for(var q=0;q<navigator.plugins.length;++q){s=navigator.plugins[q].description;if(s.search(/^Java Switchable Plug-in (Cocoa)/)!=-1){if(this.compareVersions("1.5.0",p)){return true}}else{if(s.search(/^Java/)!=-1){if(o.indexOf("win")!=-1){if(this.compareVersions("1.5.0",p)||this.compareVersions("1.6.0",p)){return true}}}}}if(this.compareVersions("1.5.0",p)){return true}return false},IEInstall:function(){location.href=n(((this.returnPage!=null)?("&returnPage="+this.returnPage):"")+((this.locale!=null)?("&locale="+this.locale):"")+((this.brand!=null)?("&brand="+this.brand):""));return false},done:function(p,o){},FFInstall:function(){location.href=n(((this.returnPage!=null)?("&returnPage="+this.returnPage):"")+((this.locale!=null)?("&locale="+this.locale):"")+((this.brand!=null)?("&brand="+this.brand):"")+((this.installType!=null)?("&type="+this.installType):""));return false},compareVersions:function(r,t){var p=r.split(".");var o=t.split(".");for(var q=0;q<p.length;++q){p[q]=Number(p[q])}for(var q=0;q<o.length;++q){o[q]=Number(o[q])}if(p.length==2){p[2]=0}if(p[0]>o[0]){return true}if(p[0]<o[0]){return false}if(p[1]>o[1]){return true}if(p[1]<o[1]){return false}if(p[2]>o[2]){return true}if(p[2]<o[2]){return false}return true},enableAlerts:function(){this.browserName=null;this.debug=true},poll:function(){this.refresh();var o=this.getJREs();if((this.preInstallJREList.length==0)&&(o.length!=0)){clearInterval(this.myInterval);if(this.returnPage!=null){location.href=this.returnPage}}if((this.preInstallJREList.length!=0)&&(o.length!=0)&&(this.preInstallJREList[0]!=o[0])){clearInterval(this.myInterval);if(this.returnPage!=null){location.href=this.returnPage}}},writePluginTag:function(){var o=this.getBrowser();if(o=="MSIE"){document.write('<object classid="clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA" id="deployJavaPlugin" width="0" height="0" style="position: absolute; top: -5000px;"></object>')}else{if(o=="Netscape Family"&&this.allowPlugin()){this.writeEmbedTag()}}},refresh:function(){navigator.plugins.refresh(false);var o=this.getBrowser();if(o=="Netscape Family"&&this.allowPlugin()){var p=document.getElementById("deployJavaPlugin");if(p==null){this.writeEmbedTag()}}},writeEmbedTag:function(){var o=false;if(navigator.mimeTypes!=null){for(var p=0;p<navigator.mimeTypes.length;p++){if(navigator.mimeTypes[p].type==this.mimeType){if(navigator.mimeTypes[p].enabledPlugin){document.write('<embed id="deployJavaPlugin" type="'+this.mimeType+'" hidden="true" />');o=true}}}if(!o){for(var p=0;p<navigator.mimeTypes.length;p++){if(navigator.mimeTypes[p].type==this.oldMimeType){if(navigator.mimeTypes[p].enabledPlugin){document.write('<embed id="deployJavaPlugin" type="'+this.oldMimeType+'" hidden="true" />')}}}}}}};d.writePluginTag();if(d.locale==null){var h=null;if(h==null){try{h=navigator.userLanguage}catch(f){}}if(h==null){try{h=navigator.systemLanguage}catch(f){}}if(h==null){try{h=navigator.language}catch(f){}}if(h!=null){h.replace("-","_");d.locale=h}}return d}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","dndattachment/aui","jira/util/events","dndattachment/util/events/types"],function(c,f,j,i){var e="issueaction-attach-file";var a=function(k){k.addClass(e);k.click()};var b=function(){var k=c('<input type="file" multiple />');k.change(function(l){j.trigger(i.ATTACHMENT_FOR_PAGE_RECEIVED,{files:k[0].files})});k.click()};var h=function(k){return !!k.data("issuekey")};var g=function(){c(document).on("click",".unified-attach-file",function(m){f.trigger("analytics",{name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}});var k=c(m.target);if(k.hasClass(e)){return}m.preventDefault();var l=c(".issue-drop-zone").length;if(l&&!h(k)){b()}else{a(k)}})};var d=function(){g()};if(c.isReady){d()}else{f.$(d)}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'js/applinks.public.js' */
var ApplinksUtils=ApplinksUtils||(function(f){var c={},b={};var p="com_atlassian_applinks_authentication";function o(r){var q=f('<span class="aui-icon icon-close"></span>').click(function(){r.trigger("messageClose",[this]).remove()});r.append(q)}function g(){if(window===parent.window){return null}var r=null,q=window;f("iframe",parent.document.body).each(function(s){if(this.contentWindow.window===q){r=this}});return r}function d(r,x,w,q,s,u){if(x in c){var t=c[x];if(w){t.authAdminUri=q;delete c[x]}j(t,w,u)}if(!s&&parent&&(parent!==window)){var v=window;f("iframe",parent.document.body).each(function(y,A){var z=A.contentWindow;if(z!==v){if(z.AJS&&z.AJS.$){z.AJS.$(z.document).trigger("applinks.auth.completion",[x,w,q,true,u])}}})}}function j(q,u,t){var s=f(document);if(u){var r=function(v){if(v.isDefaultPrevented()){m(q)}else{h(q);document.location.reload(true)}};s.bind("applinks.auth.approved",r);s.trigger("applinks.auth.approved",q);s.unbind("applinks.auth.approved",r)}else{s.trigger("applinks.auth.denied",[q,t])}}function k(r,q){var s=r.find("a.applink-authenticate");if(r.hasClass("aui-message")){o(r)}s.click(function(t){window.open(q.authUri,p);t.preventDefault()});c[q.id]=q;return r}function n(){f(".applinks-auth-request").each(function(t){var s=f(this),v=s.find(".applinkId").val(),q=s.find(".appName").val(),r=s.find(".appUri").val(),u=s.find(".authUri").val();if(v&&u){k(s,{id:v,appName:q,appUri:r,authUri:u})}})}function i(q){var r=f('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');r.append(AJS.format("Additional information may be available, please \u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",AJS.escapeHtml(q.authUri),AJS.escapeHtml(q.appUri),AJS.escapeHtml(q.appName)));k(r,q);return r}function e(u,r){var q=f('<span class="applinks-auth-request"></span>'),s=f('<span class="applinks-request-description"></span>'),t=AJS.format("\u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eAuthenticate\u003c/a\u003e to see additional information.",AJS.escapeHtml(r.authUri));if(u){s.append(u);s.append(" - ")}s.append(t);q.append(s);k(q,r);return q}function h(q){var r=g();if((!r)||(!r.id)){return}if(!parent.ApplinksUtils.pendingConfirmations){parent.ApplinksUtils.pendingConfirmations={}}if(!(r.id in parent.ApplinksUtils.pendingConfirmations)){parent.ApplinksUtils.pendingConfirmations[r.id]=[]}parent.ApplinksUtils.pendingConfirmations[r.id].push(q);return}function l(){if(parent&&parent.ApplinksUtils&&parent.ApplinksUtils.pendingConfirmations){var r=g();if(r){if(r.id in parent.ApplinksUtils.pendingConfirmations){var s=parent.ApplinksUtils.pendingConfirmations[r.id];delete parent.ApplinksUtils.pendingConfirmations[r.id];for(var q=0,t=s.length;q<t;q++){m(s[q])}}}}}function m(s){var t=f(document),r=f('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),q=t.find("div.applinks-auth-confirmation-container");if(!q.length){q=t.find("body")}r.append(AJS.format("This application is now using \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e\'\'s credentials. Revoke access at any time by going to \u003ca href=\"{2}\"\u003eOAuth access tokens\u003c/a\u003e.",AJS.escapeHtml(s.appUri),AJS.escapeHtml(s.appName),AJS.escapeHtml(s.authAdminUri)));o(r);q.prepend(r);setTimeout(function(){r.fadeOut(1000,function(){f(this).remove()})},5000)}function a(){if(parent&&!(parent===window)){if(!parent.ApplinksUtils){parent.ApplinksUtils={}}}f(document).bind("applinks.auth.completion",d);n();l()}f(document).ready(a);return{createAuthRequestBanner:i,createAuthRequestInline:e}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'libs/underscore/1.5.2/underscore-1.5.2.js' */
(function(l){define("atlassian/libs/underscore-1.5.2",function(){var o={};l.call(o);return o._.noConflict()})})(function(){(function(){var l=this,o=l._,p={},k=Array.prototype,q=Object.prototype,t=k.push,i=k.slice,r=k.concat,m=q.toString,L=q.hasOwnProperty,A=k.forEach,B=k.map,C=k.reduce,D=k.reduceRight,E=k.filter,F=k.every,G=k.some,s=k.indexOf,H=k.lastIndexOf,q=Array.isArray,M=Object.keys,u=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=
a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):l._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(A&&a.forEach===A)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===p)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===p)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(B&&a.map===B)return a.map(c,b);
j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(C&&a.reduce===C){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,N){if(f)d=c.call(e,d,a,b,N);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(D&&a.reduceRight===D){e&&(c=b.bind(c,e));return f?a.reduceRight(c,
d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;j(a,function(b,i,j){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,j);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;I(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(E&&a.filter===E)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};
b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(F&&a.every===F)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return p});return!!e};var I=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(G&&a.some===G)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return p});return!!e};b.contains=b.include=function(a,c){return a==
null?false:s&&a.indexOf===s?a.indexOf(c)!=-1:I(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&
a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};
b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var v=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=v(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<
d||d===void 0)return-1}return a.index-c.index}),"value")};var w=function(a){return function(c,d,e){var f={},g=d==null?b.identity:v(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=w(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=w(function(a,c,b){a[c]=b});b.countBy=w(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:v(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};
b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,
b==null||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var J=function(a,c,d){if(c&&b.every(a,b.isArray))return r.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?t.apply(d,a):J(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return J(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,
d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=r.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};
b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(s&&a.indexOf===s)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(H&&a.lastIndexOf===H)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);
for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var x=function(){};b.bind=function(a,c){var d,e;if(u&&a.bind===u)return u.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));x.prototype=a.prototype;var b=
new x;x.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=
a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var k=new Date;!i&&d.leading===false&&(i=k);var K=b-(k-i);e=this;f=arguments;if(K<=0){clearTimeout(h);h=null;i=k;g=a.apply(e,f)}else!h&&d.trailing!==
false&&(h=setTimeout(j,K));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=new Date;var j=function(){var k=new Date-h;if(k<b)e=setTimeout(j,b-k);else{e=null;d||(i=a.apply(g,f))}},k=d&&!e;e||(e=setTimeout(j,b));k&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];t.apply(d,arguments);return b.apply(this,d)}};b.compose=
function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<
d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=r.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=r.apply(k,i.call(arguments,1)),
e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var y=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=m.call(a);if(f!=m.call(c))return false;switch(f){case "[object String]":return a==
String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);
g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=y(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,i)){g++;if(!(h=b.has(c,i)&&y(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return y(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===
1)};b.isArray=q||function(a){return m.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&
a!=+a};b.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return L.call(a,b)};b.noConflict=function(){l._=o;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var n={escape:{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}};n.unescape=b.invert(n.escape);var O={escape:RegExp("["+b.keys(n.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(n.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(O[a],function(b){return n[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];
t.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var P=0;b.uniqueId=function(a){var b=++P+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||z).source,(d.interpolate||z).source,(d.evaluate||
z).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(R,function(a){return"\\"+Q[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj",
"_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=
function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-jslibs.js' */
define("applinks/lib/lodash",["atlassian/libs/underscore-1.5.2"],function(a){return a});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define("applinks/lib/console",function(){return window.console});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define("applinks/lib/jquery",function(){return window.jQuery});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define("applinks/lib/aui",function(){var b=window.AJS;if(!b){throw"window.AJS not defined, cannot load AUI"}var a=b.version.split(".");b.versionDetails={major:parseInt(a[0]),minor:parseInt(a[1]),bugfix:parseInt(a[2])};return b});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
define("applinks/lib/wrm",function(){return window.WRM});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define("applinks/lib/skate",function(){return window.skate});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
define("applinks/lib/window",function(){return window});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/preconditions.js' */
define("applinks/common/preconditions",["applinks/lib/lodash"],function(b){function e(h,i,g){c(b.isString(h)&&!b.isEmpty(h),g,a(i,": expected a non-empty string"))}function f(h,i,g){c(b.isFunction(h),g,a(i,": expected a function, was: "+h))}function d(h,i,g){c(h,g,a(i,": expected a value"))}function c(i,h,g){var j=h?h:g;if(!i){throw new Error(j)}}function a(h,g){return(h||"[unspecified]")+g}return{checkArgument:b.partial(c,b,b,""),nonEmptyString:e,isFunction:f,hasValue:d}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/context.js' */
define("applinks/common/context",["applinks/lib/console","applinks/lib/window","applinks/lib/wrm","applinks/common/modules"],function(b,e,a,d){var c=a.data.claim(d.dataFqn("applinks-common","applinks-context"));return{currentUser:function(){return c.currentUser},hostApplication:function(){return c.hostApplication},validateCurrentUser:function(){if(!this.currentUser()){b.log("No user context, reloading the page to trigger redirect to the login screen");e.location.reload()}}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/help-paths.js' */
define("applinks/common/help-paths",["applinks/lib/console","applinks/lib/wrm","applinks/lib/lodash","applinks/common/modules","applinks/common/preconditions"],function(b,a,g,e,d){var f=g.memoize(function(){var j=a.data.claim(e.dataFqn("applinks-common","applinks-help-paths"));if(!j.entries){b.warn("Help paths not found, all help links are likely to be broken.")}return j.entries||{}});var i=function(j,m){d.nonEmptyString(j,"key");var l=f()[j]||j;if(m){d.nonEmptyString(m,"sectionKey");var k=l.replace(/\+/g,"");l+="#"+k+"-"+m}return l};function c(j,k){return j.indexOf(k,j.length-k.length)!==-1}function h(j,k){return c(j,k)?j:j+k}return{getPath:i,getFullPath:function(j,l){var k=this.baseUrl();return h(k,"/")+this.getPath(j,l)},baseUrl:g.partial(i,"applinks.docs.root")}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/events.js' */
define("applinks/common/events",function(){var a="applinks.event.";return{PREREADY:a+"preready",READY:a+"ready",APPLINKS_LOADED:a+"loaded",APPLINKS_UPDATED:a+"updated",NEW_APPLINK_CREATED:a+"created",Legacy:{MESSAGE_BOX_DISPLAYED:a+"message-box-displayed"}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/initializer.js' */
define("applinks/common/initializer",["applinks/lib/jquery","applinks/lib/lodash"],function(b,a){function c(d){if(d&&a.isFunction(d.init)){d.init()}if(d&&a.isFunction(d.initialize)){d.initialize()}}return{init:function(d){c(d)},initOnDomReady:function(d){b(document).ready(function(){c(d)})}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/modules.js' */
define("applinks/common/modules",function(){return{PLUGIN_KEY:"com.atlassian.applinks.applinks-plugin",fqn:function(a){return this.PLUGIN_KEY+":"+a},dataFqn:function(a,b){return this.fqn(a)+"."+b}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/features.js' */
define("applinks/common/features",["applinks/lib/wrm","applinks/lib/lodash","applinks/common/modules","applinks/common/context","applinks/common/rest"],function(a,l,h,f,d){var g,e;function i(){if(l.isUndefined(g)){g=a.data.claim(h.dataFqn("applinks-common","applinks-features"))}return g}function c(){if(l.isUndefined(e)){e=a.data.claim(h.dataFqn("applinks-common","applinks-discovered-features"))}return e}function b(m){return l.contains(c(),m.toLowerCase())}function j(m){l.extend(i(),m)}function k(m){m.forEach(function(n){if(!b(n)){c().push(n.toLowerCase())}})}return{BITBUCKET_REBRAND:"BITBUCKET_REBRAND",V3_UI_OPT_IN:"V3_UI_OPT_IN",V3_UI:"V3_UI",getEnabledFeatures:function(){return i()},isEnabled:function(m){return this.getEnabledFeatures()[m]},disable:function(m){f.validateCurrentUser();return d.V3.features(m).del().done(function(){i()[m]=false})},enable:function(m){f.validateCurrentUser();return d.V3.features(m).put().done(function(n){j(n)})},getDiscoveredFeatures:function(){return c()},isDiscovered:b,discover:function(m){f.validateCurrentUser();d.V3.featureDiscovery(m).put().fail(function(n){throw"Feature discovery request failed: "+n.status+": "+n.responseText}).done(function(n){k(n)})}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/products.js' */
define("applinks/common/products",["applinks/lib/window"],function(a){function b(c){return a.appLinksI18n.entries["applinks.application.type."+c]}return{BAMBOO:"bamboo",BITBUCKET:"stash",CONFLUENCE:"confluence",FECRU:"fecru",JIRA:"jira",REFAPP:"refapp",STASH:"stash",getTypeName:b}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/response-status.js' */
define("applinks/common/response-status",["applinks/lib/lodash"],function(a){function e(f){this.familyCode=f}e.prototype.matches=function(f){return Math.floor(d(f)/100)==this.familyCode};var c={INFORMATIONAL:new e(1),SUCCESSFUL:new e(2),REDIRECTION:new e(3),CLIENT_ERROR:new e(4),SERVER_ERROR:new e(5),forCode:function(f){return a.find(c.all(),function(g){return g.matches(f)})},all:function(){return[c.INFORMATIONAL,c.SUCCESSFUL,c.REDIRECTION,c.CLIENT_ERROR,c.SERVER_ERROR]}};function b(f){this.code=f;this.family=c.forCode(f)}b.prototype.matches=function(f){return d(f)==this.code};function d(f){if(f&&f.status&&a.isNumber(f.status)){return f.status}else{if(a.isNumber(f)){return f}else{return 0}}}return{OK:new b(200),CREATED:new b(201),BAD_REQUEST:new b(400),UNAUTHORIZED:new b(401),FORBIDDEN:new b(403),NOT_FOUND:new b(404),CONFLICT:new b(409),Family:c}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-request.js' */
define("applinks/common/rest-request",["applinks/lib/console","applinks/lib/window","applinks/lib/jquery","applinks/lib/lodash","applinks/common/preconditions","applinks/common/response-status"],function(e,h,f,j,g,b){var i={dataType:"json",contentType:"application/json"};function c(l,m){if(j.isEmpty(m)){return l}var n=l.indexOf("?")>-1?"&":"?";return l+n+f.param(m)}function d(l){return function(n,o,m){if(!j.some(l,function(p){return p.matches(m)})){e.error("Unexpected response status: "+m.status+": "+m.responseText)}}}function a(l){return function(n,o,m){if(!j.some(l,function(p){return p.matches(n)})){e.error("Unexpected response status: "+n.status+": "+n.responseText);if(b.UNAUTHORIZED.matches(n)){h.location.reload()}}}}function k(l,m){g.nonEmptyString(l,"url");g.checkArgument(l.indexOf("#")==-1,'url: "#" fragments not supported');this._url=l;this._queryParams=j.extend({},m);this._expectedStatus=[b.Family.SUCCESSFUL]}k.GET="GET";k.PUT="PUT";k.POST="POST";k.DELETE="DELETE";k.prototype.get=function(){return this._execute(this._requestSettings(k.GET))};k.prototype.del=function(){return this._execute(this._requestSettings(k.DELETE))};k.prototype.put=function(m){var l=this._requestSettings(k.PUT);if(m){l.data=m}return this._execute(l)};k.prototype.post=function(m){var l=this._requestSettings(k.POST);if(m){l.data=m}return this._execute(l)};k.prototype.queryParam=function(l,m){this._queryParams[l]=m;return this};k.prototype.queryParams=function(l){this._queryParams=j.extend(this._queryParams,l);return this};k.prototype.authorisationCallback=function(l){this.queryParam("authorisationCallback",l);return this};k.prototype.expectStatus=function(){this._expectedStatus=j.isArray(arguments[0])?arguments[0]:j.toArray(arguments);return this};k.prototype._requestSettings=function(l){var m=this;return j.defaults({url:c(m._url,m._queryParams),type:l},i)};k.prototype._execute=function(l){return f.ajax(l).done(d(this._expectedStatus)).fail(a(this._expectedStatus))};return k});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest.js' */
define("applinks/common/rest",["applinks/lib/aui","applinks/common/preconditions","applinks/common/rest-request","applinks/common/rest-oauth"],function(d,h,a,c){function g(i){h.hasValue(i,"version");this._version=i}g.prototype.baseUrl=function(){return d.contextPath()+"/rest/applinks/"+this._version};g.prototype.withPath=function(i){return this.baseUrl()+"/"+i};function f(){this.module=new g("1.0")}function b(){this.module=new g("2.0")}function e(){this.module=new g("3.0")}e.prototype.featureDiscovery=function(i){if(!i){throw"feature key not defined"}return new a(this.module.withPath("feature-discovery/"+i))};e.prototype.features=function(i){if(!i){throw"feature name not defined"}return new a(this.module.withPath("features/"+i))};e.prototype.status=function(i){if(!i){throw"applinkId not defined"}return new a(this.module.withPath("status/"+i))};return{V1:new f(),V2:new b(),V3:new e(),OAuth:c}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-oauth.js' */
define("applinks/common/rest-oauth",["applinks/lib/aui","applinks/common/rest-request","applinks/common/preconditions"],function(c,a,e){function b(f){e.hasValue(f,"version");this.baseUrl=c.contextPath()+"/rest/applinks-oauth/"+f+"/"}b.prototype._withPath=function(f){return this.baseUrl+f};function d(){this.module=new b("1.0")}d.prototype.consumerToken=function(f){e.hasValue(f,"applinkId");return new a(this.module._withPath("consumer-token/"+f))};return{V1:new d()}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/i18n.js' */
define("applinks/common/i18n",["applinks/lib/jquery","applinks/lib/aui"],function(b,a){function c(){a.I18n.keys=a.I18n.keys||{};b.extend(a.I18n.keys,appLinksI18n.entries)}return{init:c}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/fecru-compatibility.js' */
if(jQuery!=undefined&&AJS!=undefined){jQuery=AJS.$};;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/common/rest-service.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{Event:{NAMESPACE:"applinks"}});var ApplinksEvents=require("applinks/common/events");AppLinks.Event=AJS.$.extend(window.AppLinks.Event,ApplinksEvents);if(AJS.AppLinksInitialisationBinder){AppLinks.initialisationBinder=AJS.AppLinksInitialisationBinder}else{AppLinks.initialisationBinder=function(a){AJS.toInit(a)}}AppLinks.initialisationBinder(function(){var c=AJS.$;AppLinks=c.extend(window.AppLinks||{},{failure:function(f){if(f.status==401){window.location.reload()}else{var d=AppLinks.parseError(f);var e=c(".page-error");if(e.length>0){e.html(d).fadeIn("slow")}else{alert("REST request failed: "+d)}}},jsonRequest:function(e,f,g,h,d){if(g){g=JSON.stringify(g)}c(".page-error").fadeOut("fast");if(!d){d=AppLinks.failure}return jQuery.ajax({url:e,type:f,data:g,dataType:"json",contentType:"application/json; charset=utf-8",cache:false,success:h,error:d})},xmlRequest:function(e,f,g,h,d){if(g){g=JSON.stringify(g)}c(".page-error").fadeOut("fast");if(!d){d=AppLinks.failure}return jQuery.ajax({url:e,type:f,data:g,dataType:"xml",contentType:"application/xml; charset=utf-8",cache:false,success:h,error:d})},parseError:function(g){var d;try{d=JSON.parse(g.responseText)}catch(f){if(g.statusText){return d=g.statusText}else{return g}}if(d.message){if(c.isArray(d.message)){return d.message.join(" ")}return d.message}else{return g.statusText}},put:function(e,f,g,d){return AppLinks.jsonRequest(e,"PUT",f,g,d)},post:function(e,f,g,d){return AppLinks.jsonRequest(e,"POST",f,g,d)},update:function(e,f,d){AppLinks.put(AppLinks.self_link(e),e,f,d)},get:function(e,f,d){return AppLinks.jsonRequest(e,"GET",null,f,d)},getXml:function(e,f,d){return AppLinks.xmlRequest(e,"GET",null,f,d)},self_link:function(f){for(var d=0,g=f.link.length;d<g;d++){var e=f.link[d];if(e.rel=="self"){return e.href}}throw"No self-link found"},del:function(g,f,e){var d;if(typeof(g)=="string"){d=g}else{d=AppLinks.self_link(g)}return AppLinks.jsonRequest(d,"DELETE",null,f,e)},SPI:c.extend({},{API_VERSION:"1.0",REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks/",BASE_URL:AJS.contextPath()+"/rest/applinks/1.0",OAUTH_REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks-oauth/",OAUTH_BASE_URL:AJS.contextPath()+"/rest/applinks-oauth/1.0",setApiVersion:function(d){AppLinks.SPI.API_VERSION=d;AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL+AppLinks.SPI.API_VERSION)},setBaseUrl:function(d){AppLinks.SPI.BASE_URL=d},setOAuthBaseUrl:function(d){AppLinks.SPI.OAUTH_BASE_URL=d},getRemoteRestBaseUrl:function(d){return d+"/rest/applinks/"+AppLinks.SPI.API_VERSION},getRemotePluginServletBaseUrl:function(d){return d+"/plugins/servlet"},getAllLinks:function(f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink";return AppLinks.get(d,f,e)},getAllLinksWithAuthInfo:function(f,e){var d=AppLinks.SPI.BASE_URL+"/listApplicationlinks";return AppLinks.get(d,f,e)},getApplicationLinkState:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/listApplicationlinkstates/id/"+g;return AppLinks.get(d,f,e)},getLinksOfType:function(f,g,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/type/"+f;return AppLinks.get(d,g,e)},tryToFetchManifest:function(f,g,e){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/manifest.json?url="+encodeURIComponent(f);return AppLinks.get(d,g,e)},getManifestFor:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/manifest/"+g+".json";return AppLinks.get(d,f,e)},getLocalManifest:function(f,e){var d=AppLinks.SPI.BASE_URL+"/manifest.json";return AppLinks.get(d,f,e)},getRemoteManifest:function(f,g,e){var d=AppLinks.SPI.getRemoteRestBaseUrl(f)+"/manifest.json";return AppLinks.get(d,g,e)},getRemoteOAuthConsumerInfo:function(f,g,e){var d=AppLinks.SPI.getRemotePluginServletBaseUrl(f)+"/oauth/consumer-info";return AppLinks.getXml(d,g,e)},getApplinkStatus:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/status/"+g;return AppLinks.get(d,f,e)},createStaticUrlAppLink:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createStaticUrlAppLink?typeId="+g;return AppLinks.post(d,null,f,e)},createLink:function(k,i,m,e,j,l,g,n,f){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var h={applicationLink:k,username:i,password:m,createTwoWayLink:e,customRpcURL:j,rpcUrl:l,configFormValues:g};return AppLinks.post(d,h,n,f)},createLinkWithOrphanedTrust:function(k,i,n,e,j,l,g,m,o,f){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var h={applicationLink:k,username:i,password:n,createTwoWayLink:e,customRpcURL:j,rpcUrl:l,configFormValues:g,orphanedTrust:m};return AppLinks.post(d,h,o,f)},verifyTwoWayLinkDetails:function(d,j,k,g,i,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/details";var h={username:k,password:g,remoteUrl:d,rpcUrl:j};return AppLinks.post(e,h,i,f)},getApplicationLinkInfo:function(f,g,e){var d=AppLinks.SPI.BASE_URL+"/applicationlinkInfo/id/"+f;return AppLinks.get(d,g,e)},deleteLink:function(h,d,g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/"+h.id;if(d){e+="?reciprocate=true"}return AppLinks.del(e,g,f)},makePrimary:function(f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/primary/"+f.id;return AppLinks.post(d,null,e)},relocate:function(i,g,d,h,f){var e=AppLinks.SPI.BASE_URL+"/relocateApplicationlink/"+i.id+"?newUrl="+encodeURIComponent(g)+"&nowarning="+(d?"true":"false");return AppLinks.post(e,null,h,f)},legacyUpgrade:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/upgrade/legacy/"+g.id;return AppLinks.post(d,null,f,e)},ualUpgrade:function(h,d,g,f){var e=AppLinks.SPI.BASE_URL+"/upgrade/ual/"+h.id;return AppLinks.post(e,d,g,f)},getEntityTypesForApplicationType:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/type/entity/"+g;return AppLinks.get(d,f,e)},getLocalEntitiesWithLinksToApplication:function(d,g,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/localEntitiesWithLinksTo/"+d+".json";return AppLinks.get(e,g,f)},getEntityLinksForApplication:function(d,g,f){var e=AppLinks.SPI.BASE_URL+"/entities/"+d+".json";AppLinks.get(e,g,f)},getEntityLinksForApplicationUsingAnonymousAccess:function(d,g,f){var e=AppLinks.SPI.BASE_URL+"/entities/anonymous/"+d+".json";return AppLinks.get(e,g,f)},createNonUalEntityLink:function(m,h,e,g,k,f,l,j){var d=AppLinks.SPI.BASE_URL+"/entitylink/"+m+"/"+h+"?reciprocate=false";var i={applicationId:e,typeId:g,key:k,name:f,isPrimary:false};return AppLinks.put(d,i,l,j)},createEntityLink:function(i,h,e,d,j,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/"+i+"/"+h+"?reciprocate=";f+=(d?"true":"false");return AppLinks.put(f,e,j,g)},getConfiguredEntityLinks:function(g,f,h,e){var d=AppLinks.SPI.BASE_URL+"/entitylink/primaryLinks/"+g+"/"+f+".json";return AppLinks.get(d,h,e)},deleteEntityLink:function(i,h,e,d,j,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/"+i+"/"+h+"?typeId="+e.typeId+"&key="+e.key+"&applicationId="+e.applicationId+"&reciprocate="+d;return AppLinks.del(f,j,g)},makePrimaryEntityLink:function(h,g,d,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/primary/"+h+"/"+g+"?typeId="+d.typeId+"&key="+d.key+"&applicationId="+d.applicationId;return AppLinks.post(e,null,i,f)},canDeleteAppLink:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/permission/reciprocate-application-delete/"+g;return AppLinks.get(d,f,e)},canDeleteEntityLink:function(h,g,d,i,f){var e=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-delete/"+d.applicationId+"/"+h+"/"+g+"/"+d.typeId+"/"+d.key;return AppLinks.get(e,i,f)},canCreateReciprocateEntityLink:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-create/"+g;return AppLinks.get(d,f,e)},processPermissionCode:function(e){var d={noPermission:function(){},missing:function(){},credentialsRequired:function(f){},authenticationFailed:function(f){},noAuthentication:function(f){},noAuthenticationConfigured:function(){},noConnection:function(){},allowed:function(){},unrecognisedCode:function(f){},updateView:function(h,g,f){}};if(!e){e={}}e=c.extend(d,e);return function(g){var f=g.code;if(f=="NO_PERMISSION"){e.noPermission()}else{if(f=="MISSING"){e.missing()}else{if(f=="CREDENTIALS_REQUIRED"){e.credentialsRequired(g.url)}else{if(f=="AUTHENTICATION_FAILED"){e.authenticationFailed(g.url)}else{if(f=="NO_AUTHENTICATION"){e.noAuthentication(g.url)}else{if(f=="NO_AUTHENTICATION_CONFIGURED"){e.noAuthenticationConfigured()}else{if(f=="NO_CONNECTION"){e.noConnection()}else{if(f=="ALLOWED"){e.allowed()}else{e.unrecognisedCode(g.code)}}}}}}}}}},addAuthenticationTrigger:function(f,d,e){if(!e){e={}}if(typeof e.onSuccess=="undefined"){e.onSuccess=function(){location.reload()}}if(typeof e.onFailure=="undefined"){e.onFailure=function(){return true}}c(f).unbind("click");c(f).click(function(){if(e.before){e.before()}AppLinks.authenticateRemoteCredentials(d,e.onSuccess,e.onFailure)})},deleteOrphanedTrust:function(h,f,g,e){var d=AppLinks.SPI.BASE_URL+"/orphaned-trust/"+f+"/"+h;return AppLinks.del(d,g,e)},getOrphanedTrust:function(f,e){var d=AppLinks.SPI.BASE_URL+"/orphaned-trust/";return AppLinks.get(d,f,e)},showCreateEntityLinkSuggestion:function(){return true},getApplicationLink:function(g,f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+g;return AppLinks.get(d,f,e)},createApplicationLink:function(g,e,j,k,d,l,h){var f=AppLinks.SPI.BASE_URL+"/applicationlink";var i={id:g,name:e,rpcUrl:j,displayUrl:k,typeId:d};return AppLinks.put(f,i,l,h)},createConsumer:function(f,o,e,n,j,m,h,q,i,l,p,g){var d=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+f+"/authentication/consumer";var k={key:o,name:e,description:n,sharedSecret:j,publicKey:m,outgoing:l,twoLOAllowed:h,executingTwoLOUser:q,twoLOImpersonationAllowed:i};return AppLinks.put(d,k,p,g)},createConsumerAutoConfigure:function(k,j,g,d,i,f){var e=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+k+"/authentication/consumer?autoConfigure=true";var h={twoLOAllowed:j,executingTwoLOUser:g,twoLOImpersonationAllowed:d};return AppLinks.put(e,h,i,f)},registerProvider:function(j,i,f,h,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+j+"/authentication/provider";var g={config:f,provider:i};return AppLinks.put(d,g,h,e)},enableFeature:function(f,g,e){var d=AppLinks.SPI.BASE_URL+"/features/"+f;return AppLinks.put(d,{},g,e)},disableFeature:function(f,g,e){var d=AppLinks.SPI.BASE_URL+"/features/"+f;return AppLinks.del(d,g,e)}},(window.AppLinks&&window.AppLinks.SPI)||{})});var b="applinks";AppLinks.UI={showInfoBox:function(d){c(".aui-message.success").remove();AppLinks.UI.createMessage("success",d,"page-info")},hideInfoBox:function(){c(".aui-message.success").remove()},showErrorBox:function(d){AppLinks.UI.createMessage("error",d,"page-error")},hideErrorBox:function(){c(".aui-message.error").remove()},showWarningBox:function(e){if(c.isArray(e)&&e.length>0){var d=c("<ul></ul>");c(e).each(function(g){d.append(c("<li/>",{text:e[g]}))});var f=c('<div class="page-warning"></div>').append(d);AppLinks.UI.createMessage("warning",f.html(),"page-warning")}else{AppLinks.UI.createMessage("warning",e,"page-warning")}},hideWarningBox:function(){c(".aui-message.warning").remove()},shortenString:function(e,d){if(e.length>d){e=e.substring(0,d)+"..."}return e},createMessage:function(e,f,d){var g=c('<div class="'+d+'">');g.html(f);AJS.messages[e](".applinks-message-bar",{title:"",body:g.wrap("<div></div>").parent().html(),closeable:true});c(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED)},displayValidationErrorMessages:function(e,g,f){if(c.isArray(f)){c(f).each(function(k,j){var l=c('<div class="error applinks-error">');l.text(j);c(g).find("."+e).append(l)})}else{if(typeof f!="undefined"){var h=c('<div class="error applinks-error">');h.text(f.toString());c(g).find("."+e).append(h)}}},displayValidationError:function(d,e,f){return function(k){if(k.status==401){window.location.reload();return}c(".applinks-error").remove();c(".loading").remove();var i=k.responseText;var j=c.parseJSON(i);var h=j.message;if(typeof j.fields=="undefined"){AppLinks.UI.displayValidationErrorMessages(d,e,h)}else{var g=j.fields;c(g).each(function(l){var m=c('<div class="error applinks-error" id="'+g[l]+'-error">');m.text(h[l]);if(c(e).find("."+g[l]).length>0){m.insertAfter(c(e).find("."+g[l]))}else{m.insertAfter(c(e).find("."+d).append(m))}})}c(e).find("."+d).addClass("fully-populated-errors");if(f){f()}}},addProtocolToURL:function(d){var g=c.trim(d);var f=g.toLowerCase();var e=false;if(f.length>=7){if(f.substring(0,7).indexOf("http")!=-1){e=true}}if(!e){g="http://"+g}return g},prettyJoin:function(e,h,g){if(!g){g=AppLinks.I18n.getText("applinks.and")}var d=e.length;var f="";c.each(e,function(i,j){if(i==(d-1)&&d>1){f+=" "+g+"  "+h(j)}else{f+=h(j);if(i+2<d){f+=", "}}});return f},showLoadingIcon:function(d){c('<span class="loading">&nbsp;</span>').insertAfter(d)},hideLoadingIcon:function(d){c(d).next(".loading").remove()},findUrl:function(g){var f=undefined;var h=g.toLowerCase();var e=h.indexOf("http:");if(e==-1){e=h.indexOf("https:")}if(e>-1){var d=h.indexOf(" ",e);if(d==-1){d=h.length}f=g.substring(e,d)}return f},findApplicationType:function(d){d=d.toLowerCase();if(d.indexOf("jira")!=-1){return"jira"}else{if(d.indexOf("fisheye")!=-1){return"fecru"}else{if(d.indexOf("confluence")!=-1){return"confluence"}else{if(d.indexOf("refapp")!=-1){return"refapp"}else{return undefined}}}}},escapeSelector:function(d){return d.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},sanitiseHTML:function(d){var e={"<":"&lt;",'"':"&quot;","&":"&amp;"};return d.replace(/[<"&]/g,function(f){return e[f]})},refreshOrphanedTrust:function(){var d=function(e){c("tr.orphaned-trust-row").each(function(){var k=c(this);var l=k.attr("data-id");var h=k.attr("data-type");var g=false;for(var f=0;f<e.orphanedTrust.length;f++){var j=e.orphanedTrust[f];if(l==j.id&&h==j.type){g=true;break}}if(!g){k.remove();if(e.orphanedTrust.length==0){c(".orphaned-trust-warning").hide()}}})};AppLinks.SPI.getOrphanedTrust(d)},removeCssClass:function(d,e){c(d).removeClass(function(g,i){var h=i.split(" ");var f="";c.each(h,function(j,k){if(k.indexOf(e)!=-1){f=k}});return f})}};(function(){var d=c({});c.each(["bind","unbind","trigger"],function(e,f){AppLinks.UI[f]=function(){return d[f].apply(d,arguments)}})})();AppLinks.I18n={interpolate:function(e,d){if(d){if(!c.isArray(d)){d=[new String(d)]}d.unshift(e);e=AJS.format.apply(AJS,d)}return e},getTextWithPrefix:function(d,e){return AppLinks.I18n.interpolate(appLinksI18n.entries[b+"."+d],e)},getText:function(d,e){return AppLinks.I18n.interpolate(AppLinks.I18n.resolveValue(d),e)},getApplicationTypeName:function(d){return appLinksI18n.entries["applinks.application.type."+d]},getEntityTypeName:function(d){return appLinksI18n.entries["applinks.entity.type."+d]},getPluralizedEntityTypeName:function(d){return appLinksI18n.entries["applinks.entity.type.plural."+d]},getAuthenticationTypeName:function(d){return appLinksI18n.entries["applinks.auth.provider."+d]},resolveValue:function(d){var e=appLinksI18n.entries[d];return typeof e=="undefined"?d:e}};var a=require("applinks/common/help-paths");AppLinks.Docs={createDocLink:function(e,f,d){if(!d){d=""}else{d=" "+d}return c("<a/>",{"class":"ual-help-link help-link"+d,href:AppLinks.Docs.getDocHref(e,f),target:"_blank","data-help-link-key":e,text:AppLinks.I18n.getText("applinks.help"),title:AppLinks.I18n.getText("applinks.help")})},getDocHref:function(e,f){var d=a.getFullPath(e);if(f){d+="#"+a.getPath(e)}return d}};c(document).trigger(AppLinks.Event.PREREADY);c(document).trigger(AppLinks.Event.READY)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/component/autocomplete.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.autoComplete={cacheManager:function(c){var a={},b=[],c=c||30;return{get:function(d){return a[d]},put:function(d,e){a[d]=e;b.push(d);if(b.length>c){delete a[b.shift()]}},clear:function(){a={};b=[]}}}};(function(d){var c=function(f){AJS.log("InputDrivenDropDown: truncating text");var h=f.$.closest(".aui-dropdown").width(),g=20;d("a span:not(.icon)",f.$).each(function(){var j=d(this),i=AJS("var","&#8230;"),l=i.width(),k=false;j.wrapInner(d("<em>"));d("em",j).each(function(){var m=d(this);m.show();if(this.offsetLeft+this.offsetWidth>h){var t=this.childNodes,s=false;for(var o=t.length-1;o>=0;o--){var p=t[o],n=1,r=(p.nodeType==3)?"nodeValue":"innerHTML",q=p[r];do{if(n<=q.length){p[r]=q.substr(0,q.length-n++)}else{break}}while(this.offsetLeft+this.offsetWidth+l>h-g);if(n<=q.length){s=true;break}}if(s){k=true}else{m.hide()}}});if(k){j.append(i);this.elpss=i}})};var b=function(f,l){if(!l.length||!l[0]){return}AJS.log("InputDrivenDropDown: highlighting tokens");for(var h=0,j=l.length;h<j;h++){var g=l[h];l[h]=g?g.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g,"\\$"):""}var k=new RegExp("("+l.join("|")+")","gi");d("li a:not(.dropdown-prevent-highlight) span",f.$).each(function(){var m=d(this),i=m.html().replace(k,"<strong>$1</strong>");m.html(i)})};var e=function(j,g){var i=j.options,h=j.dd;if(h){h.hide();h.$.remove()}i.ajsDropDownOptions=i.ajsDropDownOptions||{};if(i.ajsDropDownOptions&&!i.ajsDropDownOptions.alignment){i.ajsDropDownOptions.alignment="left"}i.ajsDropDownOptions.selectionHandler=i.ajsDropDownOptions.selectionHandler||function(l,k){if(l.type!="click"){l.preventDefault();d("a",k).click();document.location=d("a",k).attr("href")}};i.ajsDropDownOptions.displayHandler=function(k){return AJS.escapeHtml(k.name)};var f=j.dd=new AJS.dropDown(g.matrix,i.ajsDropDownOptions)[0];if(i.ajsDropDownOptions&&i.ajsDropDownOptions.className){f.$.addClass(i.ajsDropDownOptions.className)}if(i.dropdownPlacement){i.dropdownPlacement(f.$)}else{AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");d("body").append(f.$)}b(f,g.queryTokens||[g.query]);c(f);if(i.dropdownPostprocess){i.dropdownPostprocess(f.$)}f.show(j._effect);if(typeof i.onShow=="function"){i.onShow.call(f,f.$)}return f};function a(g,f){this._effect="appear";this._timer=null;this.id=g;this.options=f;this.inactive=false;this.busy=false;this.cacheManager=AppLinks.autoComplete.cacheManager()}a.prototype.clearCache=function(){this.cacheManager.clear()};a.prototype.change=function(h,g){var f=this;if(h!=f._value||g){f._value=h;f.busy=false;clearTimeout(f._timer);if(g||(/\S{0,}/).test(h)){var i=f.cacheManager.get(h);if(i){e(f,i)}else{f.busy=true;f._timer=setTimeout(function(){f.options.getDataAndRunCallback.call(f,h,f.show)},200)}}else{f.dd&&f.dd.hide()}}};a.prototype.dropDownLength=function(){return this.dd.links?this.dd.links.length:0};a.prototype.dropDownItem=function(f){return this.dropDownLength()>f?this.dd.links[f]:null};a.prototype.hide=function(){this.dd&&this.dd.hide()};a.prototype.remove=function(){var f=this.dd;if(f){this.hide();f.$.remove()}this.inactive=true;this.options.onDeath&&this.options.onDeath()};a.prototype.show=function(g,i,h){if(this.inactive){AJS.log("Quick search abandoned before server response received, ignoring. "+this);return}var f={matrix:g,query:i,queryTokens:h};this.cacheManager.put(i,f);e(this,f);this.busy=false};AppLinks.inputDrivenDropdown=function(f){return new a("inputdriven-dropdown",f)}})(jQuery)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/component/wizard.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(d){d.fn.wizard=function(v){var u={width:500,height:350,onshow:function(w,x){return true},aftershow:function(){return true},oncancel:function(){return true},onsubmit:function(){return true},aftersubmit:function(){return true},onnext:function(){return true},onprevious:function(){return true},cancelLabel:AppLinks.I18n.getText("applinks.cancel"),submitLabel:AppLinks.I18n.getText("applinks.create"),nextLabel:AppLinks.I18n.getText("applinks.next"),previousLabel:AppLinks.I18n.getText("applinks.previous"),id:""};if(!v){v={}}v=d.extend(u,v);var t=this;this.each(function(){var D=d(this);var w=new AJS.Dialog(v.width,v.height,v.id);var L=q(w,v.onshow,v.aftershow);var K=c(w,v.oncancel);var z=h(w,v.onsubmit,v.aftersubmit);var M=a(w,v.onprevious);var I=m(w,v.onnext);var G=k(w);var B=o(w);var C=g(w);var H=l(w);var J=s(w);var E=n(w);if(v.showButtonId){d("#"+v.showButtonId).click(L)}var y=f(D);for(var A=0;A<y.length;A++){var F=y[A];j(w,F);if(F.className){w.addHeader(F.title,F.className+"-header")}else{w.addHeader(F.title)}if(A!=0&&d(F.div).attr("previous")!="false"){w.addButton(v.previousLabel,M,"applinks-previous-button")}if(A<y.length-1&&d(F.div).attr("submit")!="true"&&d(F.div).attr("next")!="false"){w.addButton(v.nextLabel,I,"applinks-next-button")}if(d(F.div).attr("submit")=="true"){w.addButton(v.submitLabel,z,"wizard-submit")}if(!w.getPage(A).buttonpanel){w.addButton("",null);d(w.getPage(A).buttonpanel).empty();var x=d('<button class="aui-button aui-button-link button-panel-button applinks-cancel-link">'+v.cancelLabel+"</button>");w.getPage(A).buttonpanel.append(x);x.click(K)}else{var x=d('<button class="aui-button aui-button-link button-panel-link button-panel-cancel-link applinks-cancel-link">'+v.cancelLabel+"</button>");d(w.getPage(A).buttonpanel).append(x);x.click(K)}if(A<y.length-1){w.addPage()}}t={dialog:w,nextPage:I,prevPage:M,submit:z,cancel:K,show:L,disableNextBtn:G,enableNextBtn:B,disableSubmitBtn:C,enableSubmitBtn:H,disablePreviousBtn:J,enablePreviousBtn:E};w.gotoPage(0);w.gotoPanel(0)});return t};function s(t){return function(){b(r(t,"applinks-previous-button"))}}function n(t){return function(){i(r(t,"applinks-previous-button"))}}function k(t){return function(){b(r(t,"applinks-next-button"))}}function o(t){return function(){i(r(t,"applinks-next-button"))}}function g(t){return function(v){var u=r(t,"wizard-submit");b(u);if(typeof(v)=="undefined"||v){d('<span class="loading">&nbsp;</span>').insertBefore(u)}else{u.parent().find(".loading").remove()}}}function l(t){return function(){var u=r(t,"wizard-submit");i(u);u.parent().find(".loading").remove()}}function r(u,t){return d(u.getPage(u.curpage).buttonpanel).find("."+t)}function p(t){d(t.popup.element).find("form").each(function(){this.reset()})}function i(t){t.attr("disabled",false)}function b(t){t.attr("disabled",true)}function q(t,u,v){return function(w){if(u(t,w)!==false){t.gotoPage(0);t.gotoPanel(0);d(document).unbind("keydown.ual.dialog");d(document).bind("keydown.ual.dialog",e(t));t.show();v()}}}function c(t,u){return function(){if(u(t)!==false){t.hide();p(t)}}}function a(t,u){return function(){if(u(t)!==false){t.prevPage()}}}function m(t,u){return function(){if(u(t)!==false){t.nextPage()}}}function e(t){return function(u){if(u.keyCode===27){p(t);d(document).unbind("keydown.ual.dialog")}}}function h(u,v,t){return function(){if(v(u)!==false){t(u);p(u)}}}function j(v,w){var u=d("> div[panel]",w.div);if(u.length>0){u.each(function(y,z){var x=v.addPanel(z.title,null,z.className,"menu-"+z.id);x.getCurrentPanel().body.append(u[y])})}else{var t=v.addPanel(w.title);t.getCurrentPanel().body.append(w.div)}}function f(v){var u=d(" > div",v);var t=[];u.each(function(x){var w=d(this);t[x]={title:w.attr("title")||null,className:w.attr("class"),div:w}});return t}})(jQuery)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/feature/applinks-wizard/applinkwizard.js' */
(function(a){AppLinks.Wizard={getWizard:function(){return a("#create-application-link-container").data("wizard")},initAuthenticationUI:function(d){var h=a(d);var f=h.find(".create-reciprocal-link");var c=h.find(".ual-arrow");var l=h.find(".two-way-link-details");var j=h.find(".reciprocal-link-description");var b=h.find(".no-reciprocal-link-description");f.click(function(){if(f.is(":checked")){c.removeClass("no-background");l.show();j.show();b.hide()}else{c.addClass("no-background");l.hide();j.hide();b.show()}});var i=h.find(".same-user-radio-btn");var k=h.find(".different-user-radio-btn");var e=h.find(".different-userbase-image");var g=h.find(".same-userbase-image");i.click(function(){e.addClass("different-userbase-image-grey");g.removeClass("same-userbase-image-grey")});k.click(function(){g.addClass("same-userbase-image-grey");e.removeClass("different-userbase-image-grey")})},initNonUALUI:function(e){var c=a(e);var b=c.find(".application-types");for(var d=0;d<nonAppLinksApplicationTypes.length;d++){a('<option value="'+nonAppLinksApplicationTypes[d].typeId+'">'+nonAppLinksApplicationTypes[d].label+"</option>").appendTo(b)}},fetchManifest:function(e,h,d,b){var i=h.find("#application-url");if(i.val()==""){var c=h.find("#application-types");if(c.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(i);return false}var g=function(j){e.enableSubmitBtn();e.enablePreviousBtn();e.cancel();AppLinks.UI.listApplicationLinks(j.applicationLink.id,"new",j)};AppLinks.SPI.createStaticUrlAppLink(c.val(),g,null);return true}var f=AppLinks.UI.addProtocolToURL(i.val());AppLinks.UI.showLoadingIcon(i);var g=function(l){var k=l;e.enableNextBtn();h.find(".loading").remove();h.find(".reciprocal-rpc-url").val(a("#baseUrl").val());if(typeof l.typeId!="undefined"){AppLinks.Wizard.handleUALManifest(k,h);e.dialog.gotoPage(2);h.find(".reciprocal-link-username").focus();if(d){d(k)}}else{if(l.code=="applinks.warning.redirected.host"&&!i.data("hasWarnedAboutRedirection")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("hasWarnedAboutRedirection","true");var m=function(){a(i).removeData("hasWarnedAboutRedirection");a(i).unbind("change",m)};i.bind("change",m)}else{if(l.code=="applinks.warning.unknown.host"&&!i.data("forceWhenHostIsOffline")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("forceWhenHostIsOffline","true");var j=function(){a(i).removeData("forceWhenHostIsOffline");a(i).unbind("change",j)};i.bind("change",j)}else{if(k.code=="applinks.warning.unknown.host"||k.code=="applinks.warning.redirected.host"){delete k.warning;delete k.code}AppLinks.Wizard.handleNonUALManifest(k,f,h);e.dialog.gotoPage(1);h.find(".application-name").focus();if(b){b(k)}}}}};e.disableNextBtn();AppLinks.SPI.tryToFetchManifest(f,g,AppLinks.UI.displayValidationError("manifest-validation-errors",h,function(){e.enableNextBtn()}));return f},handleUALManifest:function(f,e){var c=a(e);c.find(".remote-app-image").removeClass(function(j,l){var k=l.split(" ");var i="";a.each(k,function(m,n){if(n.indexOf("application-type-image-")!=-1){i=n}});return i});c.find(".remote-app-image").addClass("application-type-image-"+f.typeId);c.find(".link-to-app-type").html(AppLinks.I18n.getText("applinks.create.title.link.to",AppLinks.I18n.getApplicationTypeName(f.typeId)));c.find(".remote-app-name").text(AppLinks.UI.shortenString(f.name,20));c.find(".create-reciprocal-link").attr("checked",true);c.find("#reciprocal-link-back-to-server").html(AppLinks.I18n.getText("applinks.create.link.back.to.server",AJS.escapeHtml(f.name)));var d=["administrator",AJS.escapeHtml(f.name),'<a target="_blank" href="'+AppLinks.Docs.getDocHref("applinks.docs.adding.application.link")+'">',"</a>"];if(f.applinksVersion!=undefined){var h=f.applinksVersion.split(".");var b=parseInt(h[0]);var g=parseInt(h[1]);if((f.typeId=="jira"||f.typeId=="confluence")&&(b==3&&g<10)){d[0]="system administrator"}}c.find(".reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.link",d));c.find(".no-reciprocal-link-description").hide();c.find(".no-reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.no.link",AJS.escapeHtml(f.name)));c.find(".reciprocal-link-username").val("");c.find(".reciprocal-link-password").val("");c.find(".ual-arrow").removeClass("no-background");c.find(".two-way-link-details").show();c.find(".reciprocal-link-description").show();c.find(".no-reciprocal-link-description").hide()},handleNonUALManifest:function(d,e,c){var b=a(c);b.find(".application-name").val("");b.find(".application-types option:first-child").attr("selected","selected");b.find(".non-ual-application-url").text(e);if(d.warning){b.find(".create-non-ual-warning").show();b.find(".create-non-ual-warning").html(d.warning)}else{b.find(".create-non-ual-warning").hide()}},checkReciprocalLinkFormThreeStepMode:function(c,d,g,j,f){var h=a(c);if(h.find(".create-reciprocal-link").is(":checked")){var k=a.trim(h.find(".reciprocal-rpc-url").val());if(k==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(h.find(".reciprocal-rpc-url"));if(f){f()}return}var e=h.find(".reciprocal-link-username");var b=h.find(".reciprocal-link-password");if(e.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(e);if(f){f()}return false}var i=function(l){h.find(".same-user-description").find("input").attr("checked",true);h.find(".trust-radio-btn").attr("checked",true);h.find(".same-user-radio-btn").click();g(l)};k=AppLinks.UI.addProtocolToURL(k);AppLinks.SPI.verifyTwoWayLinkDetails(j,k,e.val(),b.val(),i,AppLinks.UI.displayValidationError("two-way-link-errors",c,f));return false}else{d();return false}},checkReciprocalLinkFormTwoStepMode:function(f,h,b,i){var c=a(f);var g=a.trim(c.find(".reciprocal-rpc-url").val());if(g==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(c.find(".reciprocal-rpc-url"));if(i){i()}return}var d=c.find(".reciprocal-link-username");var e=c.find(".reciprocal-link-password");if(d.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(d);if(i){i()}return false}g=AppLinks.UI.addProtocolToURL(g);AppLinks.SPI.verifyTwoWayLinkDetails(h,g,d.val(),e.val(),b,AppLinks.UI.displayValidationError("two-way-link-errors",f,i));return false}}})(AJS.$);;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/common/urls.js' */
define("applinks/common/urls",["applinks/lib/aui","applinks/lib/lodash","applinks/common/products"],function(b,c,d){var a={generateUrl:function(f,e){var g=f;if(c.isUndefined(e)){return g}else{c.each(e,function(i,h){if(g.indexOf("?")<0){g=g+"?"}else{g=g+"&"}g=g+h+"="+encodeURIComponent(JSON.stringify(i))});return g}}};a.Local={admin:function(f){var e=b.contextPath()+"/plugins/servlet/applinks/listApplicationLinks";return a.generateUrl(e,f)}};a.Remote={admin:function(f,i,h){var g=i===d.CONFLUENCE?"/admin/listapplicationlinks.action":"/plugins/servlet/applinks/listApplicationLinks";var e=f+g;return a.generateUrl(e,h)}};return a});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/help-link-analytics.js' */
(function(a){a(function(){AJS.$("body").on("click",".help-link",function(){AJS.trigger("analyticsEvent",{name:"applinks.view.documentation",data:{linkKey:a(this).attr("data-help-link-key")}})})})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-applinks-common-plugin:issue-link-applinks', location = 'js/issuelink-applinks.js' */
var IssueLinkAppLinks=IssueLinkAppLinks||(function($){function createHelper(servers,context,settings){var helper={};var selectedServer=null;function selectServer(appId){selectedServer=getServer(servers,appId);var authenticationRequired=selectedServer&&selectedServer.requireCredentials;doAuthenticationRequired(authenticationRequired,context);return{authenticationRequired:authenticationRequired}}function setAuthenticationRequired(appId,authenticationRequired){var server=getServer(servers,appId);if(server){server.requireCredentials=authenticationRequired;if(selectedServer&&selectedServer.id===appId){doAuthenticationRequired(authenticationRequired,context)}}}function doAuthenticationRequired(required,context){$(".issue-link-applinks-authentication-message",context).empty();if(required){createAuthRequiredBanner($(".issue-link-applinks-authentication-message",context),context);$(".issue-link-oauth-toggle").hide();$(".buttons-container input[type=submit]",context).attr("disabled","disabled")}else{$(".issue-link-oauth-toggle").show();$(".buttons-container input[type=submit]",context).removeAttr("disabled")}}function createAuthRequiredBanner($container,context){var oauthCallbacks={onSuccess:function(){selectedServer.requireCredentials=false;doAuthenticationRequired(false,context);if(settings.onAuthenticationSuccessCallback){settings.onAuthenticationSuccessCallback(context,selectedServer.id,helper)}},onFailure:function(){if(settings.onAuthenticationFailedCallback){settings.onAuthenticationFailedCallback(context,selectedServer.id,helper)}}};var encodedServerName=AJS.escapeHtml(selectedServer.name);if(selectedServer.authUrl){var $banner=$('<div class="aui-message warning closeable shadowed applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');$banner.append(AJS.format("Authorization required to create issue link. Please \u003ca href=\"{0}\" class=\"applink-authenticate\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",selectedServer.authUrl,selectedServer.url,encodedServerName));$("a",$banner).addClass("applink-authenticate");$(".applink-authenticate",$banner).click(function(e){authenticateRemoteCredentials(selectedServer.authUrl,oauthCallbacks.onSuccess,oauthCallbacks.onFailure);e.preventDefault()});$container.append($banner)}else{var warningMessage=AJS.format("Unable to create a link to \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e as the application does not have any authentication configured.",selectedServer.url,encodedServerName);AJS.messages.warning($container,{body:warningMessage})}}function createOAuthCallback(){if(!AppLinks.OAuthCallback&&typeof (oauthCallback)==="undefined"){AppLinks.OAuthCallback=function(){};AppLinks.OAuthCallback.prototype.success=function(){this.aouthWindow.close();this.onSuccess();delete oauthCallback;delete AppLinks.OAuthCallback};AppLinks.OAuthCallback.prototype.failure=function(){this.aouthWindow.close();this.onFailure();delete oauthCallback;delete AppLinks.OAuthCallback};AppLinks.OAuthCallback.prototype.show=function(url,onSuccess,onFailure){this.onSuccess=onSuccess;this.onFailure=onFailure;this.aouthWindow=window.open(url,"com_atlassian_applinks_authentication")};oauthCallback=new AppLinks.OAuthCallback()}}function authenticateRemoteCredentials(url,onSuccess,onFailure){createOAuthCallback();$(".applinks-error").remove();oauthCallback.show(url,onSuccess,onFailure)}return $.extend(helper,{selectServer:selectServer,setAuthenticationRequired:setAuthenticationRequired})}function getServer(servers,appId){var i;if(servers.length){for(i=0;i<servers.length;i++){if(servers[i].id===appId){return servers[i]}}}return null}function initApplinkServers(settings,context,deferred){var currentAppId=settings.getCurrentAppId(context);var applicationType=$(".issue-link-applinks-application-type",context).val();var issueId=settings.getIssueId(context);$.get(AJS.contextPath()+"/rest/issueLinkAppLink/1/appLink/info",{type:applicationType,issueIdOrKey:issueId},function(servers){var helper=createHelper(servers,context,settings);var currentRequiresCredentials;if(servers&&servers.length){var currentServer=getServer(servers,currentAppId);if(currentServer){currentRequiresCredentials=$(".issue-link-applinks-authentication-message",context).hasClass("required");if(currentRequiresCredentials){currentServer.requireCredentials=true}helper.selectServer(currentAppId)}deferred.resolve(context,helper)}else{deferred.reject(context)}})}function init(settings,context){var deferred=$.Deferred();var isIssueLinkAppLinkContent=$(".issue-link-applinks-authentication-message",context).length!==0;if(isIssueLinkAppLinkContent&&settings.shouldExecute(context)){initApplinkServers(settings,context,deferred)}return deferred.promise()}return{init:init}})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-remote-jira-js', location = 'js/issuelink-jira.js' */
(function($){var settings={getCurrentAppId:function(context){return $("#jira-app-link",context).val()},shouldExecute:function(context){return $("#jira-app-link",context).length!==0},getIssueId:function(context){return $("input[name=id]",context).val()}};var updateIssuePicker=function($select,appId){if($select.length){$select.attr("data-ajax-options.data.app-id",appId);if(appId&&appId!==""){$select.attr("data-ajax-options.url",contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/picker")}else{$select.attr("data-ajax-options.url",contextPath+"/rest/api/2/issue/picker")}$select.trigger("updateOptions");$select.trigger("clearSelection")}};var updateCreateReciprocalCheckbox=function(appId,context){var $reciprocalCheckbox=$("#create-reciprocal",context);if($reciprocalCheckbox.length){if(appId&&appId!==""){var defaultChoice=($("#create-reciprocal-default",context).val()=="true");if(defaultChoice){$reciprocalCheckbox.attr("checked","checked")}else{$reciprocalCheckbox.removeAttr("checked")}$reciprocalCheckbox.removeAttr("disabled");$("#create-reciprocal-fieldset",context).removeClass("disabled")}else{$reciprocalCheckbox.attr("checked","checked");$reciprocalCheckbox.attr("disabled","disabled");$("#create-reciprocal-fieldset",context).addClass("disabled")}}};JIRA.bind(JIRA.Events.NEW_PAGE_ADDED,function(e,context){var $select=$("#jira-issue-keys",context);if($select.length){var appId=$("#jira-app-link",context).val();updateIssuePicker($select,appId);updateCreateReciprocalCheckbox(appId,context)}IssueLinkAppLinks.init(settings,context).done(function(context,helper){$("#jira-app-link",context).change(function(){var appId=$(this).val();helper.selectServer(appId);updateIssuePicker($select,appId);updateCreateReciprocalCheckbox(appId,context)})})})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'js/issuelink-jira-jqlautocomplete.js' */
var IssueLinkJQLAutoComplete=IssueLinkJQLAutoComplete||(function($){function initialize(options){var fieldID=options.fieldID;var errorID=options.errorID;var autoCompleteUrl=options.autoCompleteUrl;var autoCompleteData=options.autoCompleteData;var formSubmitFunction=options.formSubmitFunction;var $field=$("#"+fieldID);var hasFocus=$field.length>0&&$field[0]==document.activeElement;var jqlFieldNames=autoCompleteData.visibleFieldNames||[];var jqlFunctionNames=autoCompleteData.visibleFunctionNames||[];var jqlReservedWords=autoCompleteData.jqlReservedWords||[];var jqlAutoComplete=JIRA.JQLAutoComplete({fieldID:fieldID,parser:JIRA.JQLAutoComplete.MyParser(jqlReservedWords),queryDelay:0.65,jqlFieldNames:jqlFieldNames,jqlFunctionNames:jqlFunctionNames,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:errorID,autoCompleteUrl:autoCompleteUrl});$field.unbind("keypress",submitOnEnter);if(formSubmitFunction){$field.keypress(function(e){if(jqlAutoComplete.dropdownController===null||!jqlAutoComplete.dropdownController.displayed||jqlAutoComplete.selectedIndex<0){if(e.keyCode===13&&!e.ctrlKey&&!e.shiftKey){formSubmitFunction();return false}else{return true}}})}jqlAutoComplete.buildResponseContainer();jqlAutoComplete.parse($field.text());jqlAutoComplete.updateColumnLineCount();$field.click(function(){jqlAutoComplete.dropdownController.hideDropdown()});if(hasFocus){$field.select()}}return{initialize:initialize}})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'js/issuelink-jira-search.js' */
AJS.$(function($){var remoteJiraSearchDialog=new JIRA.FormDialog({id:"remote-jira-search-dialog",trigger:"#link-jira-issue .remote-jira-search-trigger",widthClass:"large",content:function(render){render(JIRA.Templates.RemoteJiraIssueSearch.dialog());initSearchDialog(this.$popup)},submitHandler:function(e,callback){e.preventDefault();$("#simple-search-panel-button").removeAttr("disabled");$("#advanced-search-panel-button").removeAttr("disabled");if($(e.target).attr("id")==="remote-jira-simple-search-form"){$("#simple-search-panel-button").click()}else{$("#advanced-search-panel-button").click()}callback()}});function initSearchDialog($dialog){var appId=$("#jira-app-link").val();var autoCompletePromise=getJqlAutoCompleteData(appId);$("#simple-search-panel-button",$dialog).click(function(){$("#search-results-table",$dialog).empty();var searchText=$("#link-search-text",$dialog).val();searchText=$.trim(searchText);if(searchText){doSimpleSearch(searchText,$dialog)}else{AJS.messages.info("#search-results-table",{body:"Please enter search value.",closeable:false})}return false});$("#advanced-search-panel-button",$dialog).click(function(){advancedSearchButtonClick($dialog);return false});$("#simple-search-toggle",$dialog).click(function(){$("#remote-jira-simple-search-form",$dialog).show();$("#remote-jira-advanced-search-form",$dialog).hide();return false});$("#linkjiraissue-add-selected",$dialog).click(function(){$("table tbody tr:visible  td.selection input:checked",$dialog).each(function(){var issueKey=$(this).parent().data("key");$("#jira-issue-keys").trigger("selectOption",[{value:issueKey}])});$("#link-issue-dialog .error").hide();remoteJiraSearchDialog.hide();$("#link-issue-dialog").show().trigger("multiSelectRevealed");$("#jira-issue-keys-textarea").focus().select()});$("#advanced-search-toggle",$dialog).click(function(){$("#remote-jira-advanced-search-form",$dialog).show();$("#remote-jira-simple-search-form",$dialog).hide();var $jqlSearchText=$("#jql-search-text");if(!$jqlSearchText.attr("jql-initialized")){setAutoCompleteLoadingIconVisible(true,$dialog);WRM.require("wr!jira.webresources:jqlautocomplete",function(){autoCompletePromise.done(function(smartAjaxResult){if(smartAjaxResult.successful){IssueLinkJQLAutoComplete.initialize({fieldID:"jql-search-text",errorID:"jql-search-error",autoCompleteUrl:getAutoCompleteUrl(appId),autoCompleteData:smartAjaxResult.data,formSubmitFunction:function(){advancedSearchButtonClick($dialog)}})}else{setJQLErrorVisible(false,$dialog);setAutoCompleteFailedIconVisible(true,$dialog)}setAutoCompleteLoadingIconVisible(false,$dialog);$jqlSearchText.attr("jql-initialized",1)})})}$jqlSearchText.focus();return false});$("#simple-search-toggle",$dialog).trigger("click")}function getAutoCompleteUrl(appId){if(appId&&appId!==""){return contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocomplete?appId="+appId}return""}function advancedSearchButtonClick($dialog){$("#search-results-table",$dialog).empty();var searchText=$("#jql-search-text",$dialog).val();searchText=$.trim(searchText);if(searchText){doAdvancedSearch(searchText,$dialog)}else{AJS.messages.info("#search-results-table",{body:"Please enter search value.",closeable:false})}}function setLoadingIconVisible(visible,$context){$("#link-search-loading",$context).toggleClass("hidden",!visible)}function setAutoCompleteLoadingIconVisible(visible,$context){$("#autocomplete-loading",$context).toggleClass("hidden",!visible)}function setAutoCompleteFailedIconVisible(visible,$context){$("#autocomplete-failed",$context).toggleClass("hidden",!visible)}function setJQLErrorVisible(visible,$context){$("#jql-search-error",$context).toggleClass("hidden",!visible)}function doSimpleSearch(searchText,$context){setLoadingIconVisible(true,$context);var appId=$("#jira-app-link").val();var issueKeyJql='key = "'+searchText+'"';var projectJql='project = "'+searchText+'"';var plainTextJql='summary ~ "'+searchText+'" OR description ~ "'+searchText+'" OR comment ~ "'+searchText+'"';jqlSearch(issueKeyJql,appId).done(function(smartAjaxResult){if(smartAjaxResult.successful&&smartAjaxResult.data.issues.length>0){setLoadingIconVisible(false,$context);showResults(smartAjaxResult,$context)}else{jqlSearch(projectJql,appId).done(function(smartAjaxResult){if(smartAjaxResult.successful&&smartAjaxResult.data.issues.length>0){setLoadingIconVisible(false,$context);showResults(smartAjaxResult,$context)}else{jqlSearch(plainTextJql,appId).done(function(smartAjaxResult){setLoadingIconVisible(false,$context);if(smartAjaxResult.successful){showResults(smartAjaxResult,$context)}else{showResultsError(smartAjaxResult)}})}})}})}function doAdvancedSearch(jql,$context){setLoadingIconVisible(true,$context);var appId=$("#jira-app-link").val();jqlSearch(jql,appId).done(function(smartAjaxResult){setLoadingIconVisible(false,$context);if(smartAjaxResult.successful){showResults(smartAjaxResult,$context)}else{if(smartAjaxResult.status===400){AJS.messages.warning("#search-results-table",{body:"Invalid JQL query.",closeable:false})}else{showResultsError(smartAjaxResult)}}})}function jqlSearch(jql,appId){var deferred=$.Deferred();var url;if(appId&&appId!==""){url=contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/search?jql="+jql+"&appId="+appId+"&maxResults=10"}else{var currentIssueKey=$("#current-issue-key").val();jql="("+jql+") and key != "+currentIssueKey;url=contextPath+"/rest/api/2/search?jql="+jql+"&maxResults=10"}JIRA.SmartAjax.makeRequest({url:url,complete:function(xhr,textStatus,smartAjaxResult){deferred.resolve(smartAjaxResult)}});return deferred.promise()}function getJqlAutoCompleteData(appId){var deferred=$.Deferred();var remote;var url;if(appId&&appId!==""){url=contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata?appId="+appId;remote=true}else{url=contextPath+"/rest/api/2/jql/autocompletedata";remote=false}JIRA.SmartAjax.makeRequest({url:url,complete:function(xhr,textStatus,smartAjaxResult){if(!smartAjaxResult.successful&&remote){JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata/legacy?appId="+appId,complete:function(xhr,textStatus,smartAjaxResult){deferred.resolve(smartAjaxResult)}})}else{deferred.resolve(smartAjaxResult)}}});return deferred.promise()}function showResults(smartAjaxResult,$context){var resultHtml=JIRA.Templates.RemoteJiraIssueSearch.resultsTable({result:smartAjaxResult.data});$("#search-results-table",$context).html(resultHtml);$("#linkjiraissue-select-all",$context).click(function(){var $masterStatus=$(this).prop("checked");$("tbody tr td.selection input",$context).prop("checked",$masterStatus)});$("tbody tr",$context).click(function(e){if($(e.target).is(":checkbox")){return }var checkbox=$(this).find("td.selection input");checkbox.prop("checked",!checkbox.prop("checked"))})}function showResultsError(smartAjaxResult){AJS.messages.error("#search-results-table",{body:JIRA.SmartAjax.buildSimpleErrorContent(smartAjaxResult),closeable:false})}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'templates/dialog/linkjiraissue-search.soy' */
// This file was automatically generated from linkjiraissue-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.RemoteJiraIssueSearch.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.RemoteJiraIssueSearch == 'undefined') { JIRA.Templates.RemoteJiraIssueSearch = {}; }


JIRA.Templates.RemoteJiraIssueSearch.dialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Find JIRA issues") + '</h2><form class="aui search-form" id="remote-jira-simple-search-form" action="#" method="post"><div class="field-group"><label for="link-search-text">' + soy.$$escapeHtml("Search") + ':</label><input id="link-search-text" type="text" tabindex="0" class="text" size="50"> <input type="submit" tabindex="0" class="button" id="simple-search-panel-button" value="' + soy.$$escapeHtml("Search") + '"> <a id="advanced-search-toggle" href="#" title="' + soy.$$escapeHtml("Perform a JQL search") + '">' + soy.$$escapeHtml("Advanced Search") + '</a><span id="link-search-loading" class="icon loading throbber hidden"/></div></form><form class="aui search-form" id="remote-jira-advanced-search-form" action="#" method="post"><div class="field-group"><label for="jql-search-text">' + soy.$$escapeHtml("JQL Search") + '<span id="autocomplete-loading" class="hidden"><span class="icon loading throbber"/>' + soy.$$escapeHtml("Loading auto-complete") + '</span><span id="autocomplete-failed" class="hidden">' + soy.$$escapeHtml("(auto-complete unavailable)") + '</span></label><div id="jql-search-container"><span id="jql-search-error" class="icon jqlgood" /><div class="atlassian-autocomplete"><textarea id="jql-search-text" class="text full-width-field" tabindex="0" /></div></div><button class="aui-button aui-button-subtle search-button" id="advanced-search-panel-button" type="submit"><span class="aui-icon aui-icon-small aui-iconfont-search" title="' + soy.$$escapeHtml("Search") + '"></span></button> <a id="simple-search-toggle" href="#" title="' + soy.$$escapeHtml("Perform a plain text search") + '">' + soy.$$escapeHtml("Simple Search") + '</a><span id="link-search-loading" class="icon loading throbber hidden"/></div></form><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button type="button" class="aui-button" id="linkjiraissue-add-selected">' + soy.$$escapeHtml("Add") + '</button><button class="aui-button aui-button-link cancel" href="#" id="remote-jira-link-cancel" title="' + soy.$$escapeHtml("Press Esc to close") + '">' + soy.$$escapeHtml("Close") + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.dialog.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.dialog';
}


JIRA.Templates.RemoteJiraIssueSearch.resultsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.result.issues.length > 0) {
    output += '<table id="remote-jira-searchresult" class="aui"><thead><tr><th class="selection" ><input id="linkjiraissue-select-all" type="checkbox"/></th><th class="type">' + soy.$$escapeHtml("Type") + '</th><th class="key">' + soy.$$escapeHtml("Key") + '</th><th class="summary">' + soy.$$escapeHtml("Summary") + '</th><th class="status">' + soy.$$escapeHtml("Status") + '</th></tr></thead><tbody>';
    var issueList44 = opt_data.result.issues;
    var issueListLen44 = issueList44.length;
    for (var issueIndex44 = 0; issueIndex44 < issueListLen44; issueIndex44++) {
      var issueData44 = issueList44[issueIndex44];
      output += '<tr title="' + soy.$$escapeHtml(issueData44.key) + '"><td class="selection" data-key="' + soy.$$escapeHtml(issueData44.key) + '"><input type="checkbox"/></td><td class="type">' + JIRA.Templates.RemoteJiraIssueSearch.issueType({issueType: issueData44.fields.issuetype}) + '</td><td class="key" title="' + soy.$$escapeHtml(issueData44.key) + '">' + soy.$$escapeHtml(issueData44.key) + '</td><td class="summary" title="' + soy.$$escapeHtml(issueData44.fields.summary) + '">' + soy.$$escapeHtml(issueData44.fields.summary) + '</td><td class="status">' + JIRA.Templates.RemoteJiraIssueSearch.status({status: issueData44.fields.status}) + '</td></tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml("Search returned no results.") + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.resultsTable.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.resultsTable';
}


JIRA.Templates.RemoteJiraIssueSearch.issueType = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.issueType.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType.name) + '" title="' + soy.$$escapeHtml(opt_data.issueType.name) + ' - ' + soy.$$escapeHtml(opt_data.issueType.description) + '"/>';
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.issueType.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.issueType';
}


JIRA.Templates.RemoteJiraIssueSearch.status = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status});
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.status.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.status';
}
;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics.js' */
AJS.toInit(function($){function getBrowseProjectTab(){return $("li.active a.browse-tab").attr("id")}_.defer(function(){if(AJS.EventQueue){$(document).delegate("#project-admin-link","click",function(){var selectedTab=getBrowseProjectTab();AJS.EventQueue.push({name:"browseproject.administerproject",properties:{selectedtab:selectedTab}})});$(document).delegate("#browse-projects-create-project","click",function(){AJS.EventQueue.push({name:"browseprojects.createproject",properties:{}})});$(document).delegate("#no-issues-create-issue","click",function(){AJS.EventQueue.push({name:"browseproject.issuesblankslate.createissue",properties:{}})});$(document).delegate("a.issue-filter-link","click",function(){var $el=$(this);var id=$el.attr("id").replace("filter_","");var type=$el.attr("data-type");AJS.EventQueue.push({name:"browse"+type+".issuefilter."+id,properties:{}})});$(document).on("click","#project_import_link_lnk",function(){AJS.EventQueue.push({name:"topnav.jim",properties:{}})});$(document).on("click",".issueaction-viewworkflow",function(){var classes=$(this).attr("class");var isNew=classes.indexOf("new-workflow-designer")>-1||classes.indexOf("jira-workflow-designer-link")>-1;var version=isNew?"new":"old";var newEnabled=AJS.DarkFeatures.isEnabled("casper.VIEW_ISSUE");AJS.EventQueue.push({name:"issue.viewworkflow",properties:{version:version,newEnabled:newEnabled}})})}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(options){var $=jQuery,$document=$(document);this.each(function(){var $this=$(this);var imgsrc=$this.find("img").attr("src");$this.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"});$this.html("<p>Loading?</p>");var avataror={previewSize:48};avataror.preview=$("<div/>").addClass("avataror-preview").css({border:"solid 1px #000","float":"left",height:avataror.previewSize+"px",overflow:"hidden",width:avataror.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"});avataror.preview.prependTo(options.previewElement);avataror.img=$('<img src="'+imgsrc+'" alt="Avatar Source"/>');avataror.img.load(function(){avataror.image=$("<div/>").css({background:"url('"+imgsrc+"') no-repeat",clear:"left",position:"relative"});avataror.marker=$("<div/>").css({cursor:"move",position:"relative"});avataror.dash=$("<div/>");avataror.shadow=$("<div/>");avataror.dash.add(avataror.shadow).css({cursor:"move",opacity:0.5,left:0,top:0,position:"absolute"});avataror.image.append(avataror.shadow).append(avataror.dash).append(avataror.marker);$this.append(avataror.image);avataror.marker.html("<div></div><div></div><div></div><div></div>");$("div",avataror.marker).each(function(i){var $this=$(this);$this.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"});$this.css(["left","right","right","left"][i],"-6px");$this.css(["top","top","bottom","bottom"][i],"-6px");$this.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]);$this.mousedown(function(e){e.preventDefault();e.stopPropagation();avataror.dragging={x:e.pageX,y:e.pageY,ax:avataror.x,ay:avataror.y,w:avataror.width,h:avataror.height,i:i+1};avataror.shadow.hide()})});avataror.marker.add(avataror.image).mousedown(function(e){e.preventDefault();avataror.dragging={x:e.pageX,y:e.pageY,ax:avataror.x,ay:avataror.y,w:avataror.width,h:avataror.height};avataror.shadow.hide()});$document.mouseup(function(e){avataror.handleMouseUp(e)});$document.mousemove(function(e){if(avataror.dragging){avataror.handleMouseMove(e.pageX,e.pageY);e.preventDefault()}});avataror.imgwidth=avataror.img.width();avataror.imgheight=avataror.img.height();avataror.x=parseInt($("#avatar-offsetX").val());avataror.y=parseInt($("#avatar-offsetY").val());avataror.width=parseInt($("#avatar-width").val());avataror.height=avataror.width;avataror.image.css({width:avataror.imgwidth+"px",height:avataror.imgheight+"px"});avataror.setMarker();$this.css({width:avataror.imgwidth+"px"});avataror.preview.css({position:"static"});$("p",$this).remove();$this.trigger("AvatarImageLoaded")});avataror.preview.append(avataror.img);avataror.setMarker=function(){avataror.marker.css("border","dashed 1px #fff");avataror.dash.css("border","solid 1px #000");avataror.shadow.css("border","solid 1px #000");avataror.marker.add(this.dash).css("left",this.x-1+"px");avataror.marker.add(avataror.dash).css("top",avataror.y-1+"px");avataror.shadow.css("border-left-width",avataror.x+"px");avataror.shadow.css("border-right-width",avataror.imgwidth-avataror.x-avataror.width+"px");avataror.shadow.css("border-top-width",avataror.y+"px");avataror.shadow.css("border-bottom-width",avataror.imgheight-avataror.y-avataror.height+"px");avataror.shadow.css("width",avataror.width+"px");avataror.shadow.css("height",avataror.height+"px");avataror.marker.add(avataror.dash).css("width",avataror.width+"px");avataror.marker.add(avataror.dash).css("height",avataror.height+"px")};avataror.adjustPreview=function(){avataror.img.attr("width",avataror.imgwidth*avataror.previewSize/avataror.width);avataror.img.attr("height",avataror.imgheight*avataror.previewSize/avataror.height);avataror.img.css("margin-left","-"+avataror.x*avataror.previewSize/avataror.width+"px");avataror.img.css("margin-top","-"+avataror.y*avataror.previewSize/avataror.height+"px");avataror.preview.select()};avataror.handleMouseMove=function(newX,newY){avataror.dragging.nextExec=avataror.dragging.nextExec||0;if(avataror.dragging.nextExec==0){avataror.dragging.nextExec=3}else{avataror.dragging.nextExec--;return }var dx=newX-avataror.dragging.x;var dy=newY-avataror.dragging.y;if(this.dragging.i){var handler=avataror.resizeHandlers[this.dragging.i-1];handler(dx,dy)}else{avataror.x=avataror.dragging.ax+dx;avataror.y=avataror.dragging.ay+dy;if(avataror.x+avataror.width>avataror.imgwidth){avataror.x=avataror.imgwidth-avataror.width}if(avataror.y+avataror.height>avataror.imgheight){avataror.y=avataror.imgheight-avataror.height}if(avataror.x<0){avataror.x=0}if(avataror.y<0){avataror.y=0}}avataror.setMarker();avataror.adjustPreview()};avataror.handleMouseUp=function(e){$("#avatar-offsetX").val(avataror.x);$("#avatar-offsetY").val(avataror.y);$("#avatar-width").val(avataror.width);avataror.dragging=null;avataror.shadow.show()};avataror.originX=function(){return avataror.dragging.ax};avataror.originY=function(){return avataror.dragging.ay};avataror.originBottomX=function(){return avataror.dragging.ax+avataror.dragging.w};avataror.originBottomY=function(){return avataror.dragging.ay+avataror.dragging.h};avataror.originNw=function(){return{x:avataror.originX(),y:avataror.originY()}};avataror.originNe=function(){return{x:avataror.originBottomX(),y:avataror.originY()}};avataror.originSe=function(){return{x:avataror.originBottomX(),y:avataror.originBottomY()}};avataror.originSw=function(){return{x:avataror.originX(),y:avataror.originBottomY()}};avataror.nwHandler=function(dx,dy){var anchor=avataror.originSe();var tmpBase={x:avataror.originX()+dx,y:avataror.originY()+dy};var diffX=Math.abs(tmpBase.x-anchor.x),diffY=Math.abs(tmpBase.y-anchor.y);var newSize=Math.min(diffX,diffY);if(newSize<20){newSize=20}if(anchor.x-newSize<0){newSize=anchor.x}if(anchor.y-newSize<0){newSize=anchor.y}avataror.x=anchor.x-newSize;avataror.y=anchor.y-newSize;avataror.width=avataror.height=newSize};avataror.neHandler=function(dx,dy){var anchor=avataror.originSw();var tmpBase={x:avataror.originBottomX()+dx,y:avataror.originY()+dy};var diffX=Math.abs(tmpBase.x-anchor.x),diffY=Math.abs(tmpBase.y-anchor.y);var newSize=Math.min(diffX,diffY);if(newSize<20){newSize=20}if(anchor.x+newSize>avataror.imgwidth){newSize=avataror.imgwidth-anchor.x}if(anchor.y-newSize<0){newSize=anchor.y}avataror.y=anchor.y-newSize;avataror.width=avataror.height=newSize};avataror.seHandler=function(dx,dy){var anchor=avataror.originNw();var tmpBase={x:avataror.originBottomX()+dx,y:avataror.originBottomY()+dy};var diffX=Math.abs(tmpBase.x-anchor.x),diffY=Math.abs(tmpBase.y-anchor.y);var newSize=Math.min(diffX,diffY);if(newSize<20){newSize=20}if(anchor.x+newSize>avataror.imgwidth){newSize=avataror.imgwidth-anchor.x}if(anchor.y+newSize>avataror.imgheight){newSize=avataror.imgheight-anchor.y}avataror.width=avataror.height=newSize};avataror.swHandler=function(dx,dy){var anchor=avataror.originNe();var tmpBase={x:avataror.originX()+dx,y:avataror.originBottomY()+dy};var diffX=Math.abs(tmpBase.x-anchor.x),diffY=Math.abs(tmpBase.y-anchor.y);var newSize=Math.min(diffX,diffY);if(newSize<20){newSize=20}if(anchor.x-newSize<0){newSize=anchor.x}if(anchor.y+newSize>avataror.imgheight){newSize=avataror.imgheight-anchor.y}avataror.x=anchor.x-newSize;avataror.width=avataror.height=newSize};avataror.resizeHandlers=[avataror.nwHandler,avataror.neHandler,avataror.seHandler,avataror.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
JIRA.Avatar=Class.extend({init:function(options){this._id=options.id;this._isSystemAvatar=options.isSystemAvatar;this._isSelected=options.isSelected;this._urls=options.urls},setUnSelected:function(){this._isSelected=false},setSelected:function(){this._isSelected=true},isSelected:function(){return !!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(size){return this._urls[size]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}});JIRA.Avatar.createCustomAvatar=function(descriptor){descriptor.isSystemAvatar=false;return new JIRA.Avatar(descriptor)};JIRA.Avatar.createSystemAvatar=function(descriptor){descriptor.isSystemAvatar=true;return new JIRA.Avatar(descriptor)};JIRA.Avatar.getSizeObjectFromName=function(name){if("object"===typeof name){return name}var nameTrimmed="string"===typeof name?jQuery.trim(name):"";if(JIRA.Avatar.LARGE.param===name){return JIRA.Avatar.LARGE}else{if(JIRA.Avatar.MEDIUM.param===name){return JIRA.Avatar.MEDIUM}else{if(JIRA.Avatar.SMALL.param===name){return JIRA.Avatar.SMALL}else{if("xsmall"===name){return JIRA.Avatar.SMALL}else{return JIRA.Avatar.LARGE}}}}};JIRA.Avatar.LARGE={param:"large",height:48,width:48};JIRA.Avatar.MEDIUM={param:"medium",width:32,height:32};JIRA.Avatar.SMALL={param:"small",width:16,height:16};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
JIRA.AvatarManager=Class.extend({init:function(options){this.store=options.store;this.ownerId=options.ownerId;this.username=options.username;this.anonymousAvatarId=options.anonymousAvatarId;this.avatarSrcBaseUrl=options.avatarSrcBaseUrl},selectAvatar:function(avatar,options){return this.store.selectAvatar(avatar,options)},getById:function(id){return this.store.getById(id)},destroy:function(avatar,options){this.store.destroy(avatar,options)},update:function(avatar,options){this.store.update(avatar,options)},add:function(avatar,options){this.store._add(avatar,options)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(size){var i,instance=this,avatars=this.getAllAvatars(),renderData={system:[],custom:[]};for(i=0;i<avatars.system.length;i++){renderData.system.push(instance.getAvatarRenderData(avatars.system[i],size))}for(i=0;i<avatars.custom.length;i++){renderData.custom.push(instance.getAvatarRenderData(avatars.custom[i],size))}return renderData},getAvatarRenderData:function(avatar,size){var data=avatar.toJSON();data.src=this.getAvatarSrc(avatar,size);data.width=size.width;data.height=size.height;return data},refreshStore:function(options){this.store.refresh(options)},getAvatarSrc:function(avatar,size){if(this.store.isTempAvatar(avatar)){return contextPath+"/secure/temporaryavatar?"+jQuery.param({cropped:true,magic:new Date().getTime(),size:size.param})}return avatar.getUrl(AJS.format("{0}x{1}",size.height,size.width))},createTemporaryAvatar:function(field,options){this.store.createTemporaryAvatar(field,options)},createAvatarFromTemporary:function(instructions,options){this.store.createAvatarFromTemporary(instructions,options)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}});JIRA.AvatarManager.createUniversalAvatarManager=function(options){var restQueryUrl,restUpdateUrl="",restCreateTempUrl="",restUpdateTempUrl="",restSingleAvatarUrl="";if(options.projectId){var urlAvatarOwnerPrefix=contextPath+"/rest/api/latest/universal_avatar/type/"+options.avatarType+"/owner/"+options.projectId;restQueryUrl=urlAvatarOwnerPrefix;var avatarCreateUrl=urlAvatarOwnerPrefix+"/avatar";restUpdateUrl=null;restCreateTempUrl=urlAvatarOwnerPrefix+"/temp";restUpdateTempUrl=avatarCreateUrl;restSingleAvatarUrl=avatarCreateUrl}else{restQueryUrl=contextPath+"/rest/api/latest/avatar/project/system";restCreateTempUrl=contextPath+"/rest/api/latest/avatar/project/temporary";restUpdateTempUrl=contextPath+"/rest/api/latest/avatar/project/temporaryCrop"}var store=new JIRA.AvatarStore({restQueryUrl:restQueryUrl,restUpdateUrl:restUpdateUrl,restCreateTempUrl:restCreateTempUrl,restUpdateTempUrl:restUpdateTempUrl,restSingleAvatarUrl:restSingleAvatarUrl,defaultAvatarId:options.defaultAvatarId});return new JIRA.AvatarManager({store:store,ownerId:options.projectId,avatarSrcBaseUrl:contextPath+"/secure/projectavatar"})};JIRA.AvatarManager.createProjectAvatarManager=function(options){options.avatarType="project";return JIRA.AvatarManager.createUniversalAvatarManager(options)};JIRA.AvatarManager.createUserAvatarManager=function(options){var userRestUrl=contextPath+"/rest/api/latest/user";var store=new JIRA.AvatarStore({restQueryUrl:userRestUrl+"/avatars",restUpdateUrl:userRestUrl+"/avatar",restCreateTempUrl:userRestUrl+"/avatar/temporary",restUpdateTempUrl:userRestUrl+"/avatar",restSingleAvatarUrl:userRestUrl+"/avatar",restParams:{"username":options.username},defaultAvatarId:options.defaultAvatarId});return new JIRA.AvatarManager({store:store,username:options.username,avatarSrcBaseUrl:contextPath+"/secure/useravatar"})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
JIRA.AvatarStore=Class.extend({TEMP_ID:"TEMP",init:function(options){if(!options.restQueryUrl){throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)")}if(!options.restCreateTempUrl){throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)")}if(!options.restUpdateTempUrl){throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)")}if(!options.defaultAvatarId){throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store "+"knows what to select if you delete the selected one")}this.restQueryUrl=options.restQueryUrl;this.restUpdateUrl=options.restUpdateUrl;this.restCreateTempUrl=options.restCreateTempUrl;this.restUpdateTempUrl=options.restUpdateTempUrl;this.restSingleAvatarUrl=options.restSingleAvatarUrl;this.restParams=options.restParams||{};this.restParams.atl_token=atl_token();this.defaultAvatarId=options.defaultAvatarId;this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(url){var completeUrl=url;if(this.restParams){var queryParams="";for(var name in this.restParams){queryParams+=AJS.format("&{0}={1}",encodeURIComponent(name),encodeURIComponent(this.restParams[name]))}completeUrl+=("?"+queryParams.substr(1))}return completeUrl},getById:function(avatarId){var match;jQuery.each(this.avatars.system,function(i,avatar){if(this.getId()===avatarId){match=avatar;return false}});if(!match){jQuery.each(this.avatars.custom,function(i,avatar){if(this.getId()===avatarId){match=avatar;return false}})}return match},isTempAvatar:function(avatar){return(avatar.getId()===this.TEMP_ID)},_selectAvatar:function(avatar){var selected=this.getSelectedAvatar();if(selected){selected.setUnSelected()}avatar.setSelected()},selectAvatar:function(avatar,options){var instance=this;if(!avatar){throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist")}if(this.restUpdateUrl){JIRA.SmartAjax.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(avatar.toJSON()),success:function(){instance._selectAvatar(avatar);if(options.success){options.success.call(this,avatar)}},error:options.error})}else{instance._selectAvatar(avatar);if(options.success){options.success.call(this,avatar)}}},_destory:function(avatar){var index=jQuery.inArray(avatar,this.avatars.custom);if(index!==-1){this.avatars.custom.splice(index,1)}else{throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+avatar.getId()+"], "+"it might be a system avatar (readonly) or does not exist.")}},destroy:function(avatar,options){var instance=this;options=options||{};if(!avatar){throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist")}JIRA.SmartAjax.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(avatar),success:function(){instance._destory(avatar);if(avatar.isSelected()){instance.selectAvatar(instance.getById(instance.defaultAvatarId),options)}else{if(options.success){options.success.apply(this,arguments)}}},error:options.error})},getSelectedAvatar:function(){for(var i=0;i<this.avatars.custom.length;i++){if(this.avatars.custom[i].isSelected()){return this.avatars.custom[i]}}for(i=0;i<this.avatars.system.length;i++){if(this.avatars.system[i].isSelected()){return this.avatars.system[i]}}},_update:function(avatar){var instance=this;if(this.getById(avatar.getId())){jQuery.each(this.avatars.custom,function(i){if(this.getId()===avatar.getId()){instance.avatars.custom[i]=avatar}})}else{throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+avatar.getId()+"], "+"it might be a system avatar (readonly) or does not exist.")}},update:function(avatar,options){var instance=this;options=options||{};JIRA.SmartAjax.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(avatar),error:options.error,success:function(){instance._update(avatar);if(options.success){options.success.apply(this,arguments)}}})},_add:function(avatar){if(avatar.isSystemAvatar()){this.avatars.system.push(avatar)}else{this.avatars.custom.push(avatar)}},createAvatarFromTemporary:function(instructions,options){var instance=this;options=options||{};if(this.restUpdateTempUrl){JIRA.SmartAjax.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(instructions),contentType:"application/json",dataType:"json",success:function(data){if(!data){data={id:instance.TEMP_ID,isSelected:true}}var avatar=JIRA.Avatar.createCustomAvatar(data);instance._add(avatar);if(options.success){options.success.call(this,data)}},error:options.error})}},createTemporaryAvatar:function(fileInput,options){options=AJS.$.extend(true,{},options,{params:this.restParams});JIRA.AvatarUtil.uploadTemporaryAvatar(this.restCreateTempUrl,fileInput,options)},_refresh:function(avatars){var instance=this;instance.avatars.system=[];instance.avatars.custom=[];if(avatars.system){jQuery.each(avatars.system,function(i,descriptor){instance.avatars.system.push(JIRA.Avatar.createSystemAvatar(descriptor))})}if(avatars.custom){jQuery.each(avatars.custom,function(i,descriptor){instance.avatars.custom.push(JIRA.Avatar.createCustomAvatar(descriptor))})}},refresh:function(options){var instance=this;var tempAvatar=this.getById(instance.TEMP_ID);options=options||{};JIRA.SmartAjax.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:options.error,success:function(avatars){instance._refresh(avatars);if(tempAvatar){instance._add(tempAvatar)}if(options.success){options.success.apply(this,arguments)}}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(avatar){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+avatar.getId())}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
JIRA.AvatarUtil={uploadUsingIframeRemoting:function(url,field,options){options=options||{};var fileName=field.val(),form=new AJS.InlineAttach.Form(new AJS.InlineAttach.FileInput(field,false)),progress=form.addStaticProgress(fileName);var $oldInput=form.cloneFileInput();form.fileSelector.clear();var timer=new AJS.InlineAttach.Timer(function(){!this.cancelled&&progress.show()},this);var upload=new AJS.InlineAttach.FormUpload({$input:$oldInput,url:url,params:AJS.$.extend({},options.params,{filename:fileName,atl_token:atl_token()}),scope:this,before:function(){!this.cancelled&&progress.start()},success:function(val,status){if(val.errorMessages&&val.errorMessages.length){form.addErrorWithFileName(val.errorMessages[0],fileName,JIRA.AvatarUtil.getErrorTarget(form))}else{if(options.success){options.success(val,status)}}},error:function(text){console.log(text);if(this.cancelled){return }if(text.indexOf("SecurityTokenMissing")>=0){form.addError(AJS.InlineAttach.Text.tr("upload.xsrf.timeout",fileName),JIRA.AvatarUtil.getErrorTarget(form))}else{form.addError(AJS.InlineAttach.Text.tr("upload.error.unknown",fileName),JIRA.AvatarUtil.getErrorTarget(form))}},after:function(){timer.cancel();progress.remove();if(!this.cancelled){form.enable()}}});progress.onCancel(function(){upload.abort()});upload.upload()},uploadUsingFileApi:function(url,field,options){var timer,upload,cancelled,file=field[0].files[0],form=new AJS.InlineAttach.Form(new AJS.InlineAttach.FileInput(field,false)),progress=form.addProgress(file);options=options||{};timer=new AJS.InlineAttach.Timer(function(){if(!cancelled){progress.show()}});upload=new AJS.InlineAttach.AjaxUpload({file:file,params:AJS.$.extend({},options.params,{filename:file.name,size:file.size,atl_token:atl_token()}),scope:this,url:url,before:function(){field.hide();!cancelled&&progress.start()},progress:function(val){progress.progress.$progress.parent().parent().show();!cancelled&&progress.update(val)},success:function(val,status){if(cancelled){return }if(val.errorMessages&&val.errorMessages.length){form.addErrorWithFileName(val.errorMessages[0],file.name,JIRA.AvatarUtil.getErrorTarget(form))}else{if(status===201){options.success(val,status)}}},error:function(text,status){if(status<0){form.addError(text,JIRA.AvatarUtil.getErrorTarget(form))}else{form.addError(AJS.InlineAttach.Text.tr("upload.error.unknown",file.name),JIRA.AvatarUtil.getErrorTarget(form))}if(options.error){options.error(text,status)}},after:function(){timer.cancel();progress.finish().remove();field.val("").show()}});upload.upload();progress.onCancel(function(){upload.abort()})},getErrorTarget:function(form){return{$element:form.$form.find(".error")}},uploadTemporaryAvatar:function(url,field,options){if(AJS.InlineAttach.AjaxPresenter.isSupported(field)){this.uploadUsingFileApi(url,field,options)}else{this.uploadUsingIframeRemoting(url,field,options)}}};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
(function($){JIRA.AvatarPicker=AJS.Control.extend({init:function(options){this.avatarManager=options.avatarManager;this.avatarRenderer=options.avatarRenderer;this.imageEditor=options.imageEditor;this.size=options.size;this.selectCallback=options.select;this.cropperDialog=null;this.initialSelection=options.initialSelection},render:function(ready){var instance=this;this.avatarManager.refreshStore({success:function(){if(instance.cropperDialog instanceof JIRA.Dialog){instance.cropperDialog.hide();delete instance.cropperDialog}instance.element=$('<div id="jira-avatar-picker" />');instance.element.html(JIRA.Templates.AvatarPicker.picker({avatars:instance.avatarManager.getAllAvatarsRenderData(instance.size)}));instance._assignEvents("selectAvatar",instance.element.find(".jira-avatar button"));instance._assignEvents("deleteAvatar",instance.element.find(".jira-delete-avatar"));instance._assignEvents("uploader",instance.element.find("#jira-avatar-uploader"));if(undefined!==instance.initialSelection){instance.getAvatarElById(instance.initialSelection).addClass("jira-selected-avatar")}ready(instance.element)},error:function(xhr,error,textStatus,smartAjaxResult){instance.appendErrorContent(instance.element,smartAjaxResult);ready(instance.element)}})},appendErrorContent:function(el,smartAjaxResult){try{var errors=JSON.parse(smartAjaxResult.data);if(errors&&errors.errorMessages){$.each(errors.errorMessages,function(i,message){AJS.messages.error(el,{body:AJS.escapeHTML(message),closeable:false,shadowed:false})})}else{el.append(JIRA.SmartAjax.buildDialogErrorContent(smartAjaxResult,true))}}catch(e){el.append(JIRA.SmartAjax.buildDialogErrorContent(smartAjaxResult,true))}},uploadTempAvatar:function(field){var instance=this;this.avatarManager.createTemporaryAvatar(field,{success:function(data){if(data.id){instance.render(function(){instance.selectAvatar(data.id)})}else{field.val("");instance.cropperDialog=new JIRA.Dialog({id:"project-avatar-cropper",width:560,content:function(ready){var $el=instance.imageEditor.render(data);function disableSubmitButton(){var $button=$el.find("input[type=submit]");var $loader=$("<span class='icon throbber loading'></span>");$button.attr("aria-disabled","true").attr("disabled","");$button.before($loader);return function(){$loader.remove();$button.removeAttr("aria-disabled").removeAttr("disabled")}}instance.imageEditor.edit({confirm:function(instructions){var reEnableSubmit=disableSubmitButton();instance.avatarManager.createAvatarFromTemporary(instructions,{success:function(data){instance.render(function(){instance.selectAvatar(data.id)})},error:reEnableSubmit})}});$el.find(".cancel").click(function(){instance.cropperDialog.hide()});ready($el)}});instance.cropperDialog.bind("dialogContentReady",function(){$(instance).trigger(JIRA.AvatarPicker.ImageEditor.LOADED)});instance.cropperDialog.bind("Dialog.hide",function(){$(instance).trigger(JIRA.AvatarPicker.ImageEditor.DISMISSED)});instance.cropperDialog.show()}},error:function(){console.log(arguments)}})},getAvatarElById:function(id){return this.element.find(".jira-avatar[data-id='"+id+"']")},selectAvatar:function(id){var avatar=this.avatarManager.getById(id);var instance=this;this.avatarManager.selectAvatar(this.avatarManager.getById(id),{error:function(){},success:function(){instance.getAvatarElById(id).remove();if(instance.selectCallback){instance.selectCallback.call(instance,avatar,instance.avatarManager.getAvatarSrc(avatar,instance.size))}}})},deleteAvatar:function(id){var instance=this;if(confirm("Are you sure you want to delete avatar?")){this.avatarManager.destroy(this.avatarManager.getById(id),{error:function(){},success:function(){var selectedAvatar=instance.avatarManager.getSelectedAvatar(),$avatar=instance.getAvatarElById(id);$avatar.fadeOut(function(){$avatar.remove()});if(selectedAvatar.getId()!==id){instance.getAvatarElById(selectedAvatar.getId()).addClass("jira-selected-avatar");instance.selectCallback.call(instance,selectedAvatar,instance.avatarManager.getAvatarSrc(selectedAvatar,instance.size),true)}}})}},_events:{uploader:{change:function(e,el){this.uploadTempAvatar(el)}},deleteAvatar:{click:function(e,el){this.deleteAvatar(el.attr("data-id"))}},selectAvatar:{click:function(e,el){if(el[0].id==="select-avatar-button"){this.selectAvatar(el.attr("data-id"))}}}}});JIRA.AvatarPicker.ImageEditor=AJS.Control.extend({render:function(data){this.element=$('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(data));return this.element},edit:function(options){var instance=this,avator=this.element.find(".avataror");options=options||{};avator.unbind();avator.bind("AvatarImageLoaded",function(){if(options.ready){options.ready()}});avator.find("img").load(function(){avator.avataror({previewElement:instance.element.find(".jira-avatar-cropper-header"),parent:instance.element})});this.element.find("#avataror").submit(function(e){e.preventDefault();if(options.confirm){options.confirm({cropperOffsetX:$("#avatar-offsetX").val(),cropperOffsetY:$("#avatar-offsetY").val(),cropperWidth:$("#avatar-width").val()})}}).find(".cancel").click(function(e){e.preventDefault();if(options.cancel){options.cancel()}})}});JIRA.AvatarPicker.ImageEditor.LOADED="imageEditorLoaded";JIRA.AvatarPicker.ImageEditor.DISMISSED="imageEditorDismissed";JIRA.AvatarPicker.createUniversalAvatarPicker=function(options){return new JIRA.AvatarPicker({avatarManager:JIRA.AvatarManager.createUniversalAvatarManager({projectKey:options.projectKey,projectId:options.projectId,defaultAvatarId:options.defaultAvatarId,avatarType:options.avatarType}),initialSelection:options.initialSelection,imageEditor:new JIRA.AvatarPicker.ImageEditor(),size:options.hasOwnProperty("avatarSize")?options.avatarSize:JIRA.Avatar.LARGE,select:options.select})};JIRA.AvatarPicker.createProjectAvatarPicker=function(options){return new JIRA.AvatarPicker({avatarManager:JIRA.AvatarManager.createProjectAvatarManager({projectKey:options.projectKey,projectId:options.projectId,defaultAvatarId:options.defaultAvatarId}),imageEditor:new JIRA.AvatarPicker.ImageEditor(),size:JIRA.Avatar.LARGE,select:options.select})};JIRA.AvatarPicker.createUserAvatarPicker=function(options){return new JIRA.AvatarPicker({avatarManager:JIRA.AvatarManager.createUserAvatarManager({username:options.username,defaultAvatarId:options.defaultAvatarId}),imageEditor:new JIRA.AvatarPicker.ImageEditor(),size:JIRA.Avatar.LARGE,select:options.select})};JIRA.createUniversalAvatarPickerDialog=function(options){var lastSelection=options.initialSelection||options.defaultAvatarId;var projectAvatarDialog=new JIRA.FormDialog({trigger:options.trigger,id:"project-avatar-picker",width:600,stacked:true,content:function(ready){var avatarPicker,$dialogWrapper;$dialogWrapper=$('<div id="projectavatar-content-wrapper"/>');$("<h2 />").text(options.title||"Select a Project Avatar").appendTo($dialogWrapper);avatarPicker=JIRA.AvatarPicker.createUniversalAvatarPicker({projectKey:options.projectKey,projectId:options.projectId,defaultAvatarId:options.defaultAvatarId,initialSelection:lastSelection,avatarType:options.avatarType,avatarSize:options.avatarSize,select:function(avatar,src,implicit){lastSelection=String(avatar.getId());if(options.select){options.select.apply(this,arguments)}if(!implicit){projectAvatarDialog.hide()}}});avatarPicker.render(function(content){$dialogWrapper.append(content);ready($dialogWrapper)})}});projectAvatarDialog._focusFirstField=function(){}};JIRA.createProjectAvatarPickerDialog=function(options){var projectAvatarDialog=new JIRA.FormDialog({trigger:options.trigger,id:"project-avatar-picker",width:600,stacked:true,content:function(ready){var avatarPicker,$dialogWrapper;$dialogWrapper=$('<div id="projectavatar-content-wrapper"/>');$("<h2 />").text("Select a Project Avatar").appendTo($dialogWrapper);avatarPicker=JIRA.AvatarPicker.createProjectAvatarPicker({projectKey:options.projectKey,projectId:options.projectId,defaultAvatarId:options.defaultAvatarId,select:function(avatar,src,implicit){if(options.select){options.select.apply(this,arguments)}if(!implicit){projectAvatarDialog.hide()}}});avatarPicker.render(function(content){$dialogWrapper.append(content);ready($dialogWrapper)})}});projectAvatarDialog._focusFirstField=function(){}};var avatarPickerData=WRM.data.claim("jira.webresources:avatar-picker.data");JIRA.createUserAvatarPickerDialog=function(options){if(avatarPickerData&&avatarPickerData.isEnabled){$(options.trigger).click(function(e){var href=AJS.contextPath()+avatarPickerData.url;var separator=href.indexOf("?")>-1?"&":"?";href+=separator+"continue="+encodeURIComponent(window.location.href);e.preventDefault();e.stopPropagation();AJS.reloadViaWindowLocation(href)});return }var userAvatarDialog=new JIRA.FormDialog({trigger:options.trigger,id:"user-avatar-picker",width:600,stacked:true,content:function(ready){var avatarPicker,$dialogWrapper;$dialogWrapper=$('<div id="useravatar-content-wrapper"/>');$("<h2 />").text("Select a User Avatar").appendTo($dialogWrapper);avatarPicker=JIRA.AvatarPicker.createUserAvatarPicker({username:options.username,defaultAvatarId:options.defaultAvatarId,select:function(avatar,src,implicit){if(options.select){options.select.apply(this,arguments)}$(".avatar-image").attr("src",src);if(!implicit){userAvatarDialog.hide()}}});avatarPicker.render(function(content){$dialogWrapper.append(content);ready($dialogWrapper)})}})};$(function(){JIRA.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:$("#avatar-owner-id").text(),defaultAvatarId:$("#default-avatar-id").text()})})})(window.jQuery);;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
(function(){AJS.namespace("JIRA.GravatarUtil");JIRA.GravatarUtil.showGravatarHelp=function(data){if(typeof (data)!=="undefined"&&typeof (data.entry)!=="undefined"){AJS.$(".gravatar-signup-text").addClass("hidden");AJS.$(".gravatar-login-text").removeClass("hidden")}};var displayGravatarHelp=function(){var gravatarJsonUrl=AJS.$("#gravatar_json_url");if(gravatarJsonUrl.length){AJS.$.ajax(gravatarJsonUrl.val(),{dataType:"jsonp",success:JIRA.GravatarUtil.showGravatarHelp})}};AJS.$(document).ready(function(){if(AJS.$("#gravatar_help_params")){displayGravatarHelp()}})}());;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml("Upload a new avatar") + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml("Select this Avatar") + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml("Select this Avatar") + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml("Select this Avatar") + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml("Select this Avatar") + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml("Delete this Avatar") + '">' + soy.$$escapeHtml("Delete this Avatar") + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml("Please select which part of the uploaded image you wish to use as the avatar.") + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml("Confirm") + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
(function(){var AvatarPickerContentRetriever=AJS.ContentRetriever.extend({init:function(avatarPicker){this.avatarPicker=avatarPicker},content:function(finished){this.avatarPicker.render(function(el){finished(jQuery("<div />").html(el))})},cache:function(){return false},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}});var InlineAvatarPicker=AJS.InlineLayer.extend({init:function(options){var instance=this;this.avatarPicker=JIRA.AvatarPicker.createProjectAvatarPicker({projectId:options.projectId,projectKey:options.projectKey,defaultAvatarId:options.defaultAvatarId,select:function(avatar,src,implicit){if(options.select){options.select.apply(this,arguments)}if(!implicit){instance.hide()}instance.offsetTarget().attr("src",src);instance.offsetTarget().trigger("AvatarSelected")}});options.contentRetriever=new AvatarPickerContentRetriever(this.avatarPicker);jQuery(this.avatarPicker.imageEditor).bind(JIRA.AvatarPicker.ImageEditor.LOADED,function(){instance.setWidth(instance.layer().attr("scrollWidth"))});this._super(options);var $triggerImg=this.offsetTarget();var $triggerContainer=jQuery("<span class='jira-avatar-picker-trigger'></span>");$triggerContainer.insertBefore($triggerImg).append($triggerImg);this._assignEvents("offsetTarget",$triggerContainer)},_events:{offsetTarget:{click:function(e){this.show()}}}});function initProjectAvatarPicker(ctx){var trigger=jQuery(".jira-avatar-picker-trigger");var triggerImg=jQuery(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",ctx);var avatarIdField=jQuery(ctx).find("#avatar-picker-avatar-id");var avatarIconurlField=jQuery(ctx).find("#avatar-picker-iconurl");var avatarTypeElement=jQuery(ctx).find("#avatar-type");if(""===avatarTypeElement.text()){return }JIRA.createUniversalAvatarPickerDialog({trigger:trigger,title:jQuery(ctx).find("#avatar-dialog-title").text(),projectId:jQuery(ctx).find("#avatar-owner-id").text(),projectKey:jQuery(ctx).find("#avatar-owner-key").text(),defaultAvatarId:jQuery(ctx).find("#default-avatar-id").text(),initialSelection:avatarIdField.val(),avatarSize:JIRA.Avatar.getSizeObjectFromName(jQuery(ctx).find("#avatar-size").text()),avatarType:avatarTypeElement.text(),select:function(avatar,src){triggerImg.attr("src",src);avatarIconurlField.val(src);avatarIdField.val(avatar.getId())}})}function initProjectInlineAvatarPicker(ctx){var $triggerImg=jQuery(".jira-inline-avatar-picker-trigger",ctx);if($triggerImg.length){new InlineAvatarPicker({offsetTarget:$triggerImg,projectId:jQuery(ctx).find("#avatar-owner-id").text(),projectKey:jQuery(ctx).find("#avatar-owner-key").text(),defaultAvatarId:jQuery(ctx).find("#default-avatar-id").text(),alignment:AJS.LEFT,width:420,allowDownsize:true})}}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){initProjectAvatarPicker(context);initProjectInlineAvatarPicker(context)}})})();;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
function hideCronEdit(elementid){document.getElementById(elementid).style.display="none"}function showCronEdit(elementid){document.getElementById(elementid).style.display=""}function toggleFrequencyControl(paramPrefix,setOriginal){var select=document.getElementById(paramPrefix+"interval");if(select.value==0){switchToOnce(paramPrefix,setOriginal)}else{switchToMany(paramPrefix,setOriginal)}}function switchToOnce(paramPrefix,setOriginal){hideCronEdit(paramPrefix+"runMany");showCronEdit(paramPrefix+"runOnce");if(setOriginal){timesOnce[paramPrefix]=true}}function switchToMany(paramPrefix,setOriginal){hideCronEdit(paramPrefix+"runOnce");showCronEdit(paramPrefix+"runMany");if(setOriginal){timesOnce[paramPrefix]=false}}function switchToDaysOfMonth(paramPrefix){hideCronEdit(paramPrefix+"daysOfWeek");showCronEdit(paramPrefix+"daysOfMonth");showCronEdit(paramPrefix+"freqDiv");hideCronEdit(paramPrefix+"innerFreqDiv");hideCronEdit(paramPrefix+"advanced");switchToOnce(paramPrefix,false)}function switchToDaysOfWeek(paramPrefix){showCronEdit(paramPrefix+"daysOfWeek");hideCronEdit(paramPrefix+"daysOfMonth");showCronEdit(paramPrefix+"freqDiv");showCronEdit(paramPrefix+"innerFreqDiv");hideCronEdit(paramPrefix+"advanced");switchToOriginal(paramPrefix)}function switchToDaily(paramPrefix){hideCronEdit(paramPrefix+"daysOfWeek");hideCronEdit(paramPrefix+"daysOfMonth");showCronEdit(paramPrefix+"freqDiv");showCronEdit(paramPrefix+"innerFreqDiv");hideCronEdit(paramPrefix+"advanced");switchToOriginal(paramPrefix)}function switchToAdvanced(paramPrefix){hideCronEdit(paramPrefix+"daysOfWeek");hideCronEdit(paramPrefix+"daysOfMonth");hideCronEdit(paramPrefix+"runOnce");hideCronEdit(paramPrefix+"runMany");hideCronEdit(paramPrefix+"freqDiv");showCronEdit(paramPrefix+"advanced")}function switchToOriginal(paramPrefix){if(timesOnce[paramPrefix]){switchToOnce(paramPrefix,false)}else{switchToMany(paramPrefix,false)}};;
;
/* module-key = 'jira.webresources:jira-page-atl-prefetch', location = '/includes/jira/page/prefetch.js' */
define("jira/page/atl/prefetch",["jira/util/data/meta","jira/data/local-storage","jira/ajs/dark-features","jquery"],function definePrefetchResource(meta,storage,darkFeatures,jQuery){var SESSION_KEY="jira.issue.prefetch.last.superbatch";var stateToken=_getStateToken();function _getStateToken(){var now=new Date();var dateStr=now.getFullYear().toString()+now.getMonth().toString()+now.getDate().toString();var superbatch=jQuery("head > script").filter(function findSuperbatch(a,b){return b.src.indexOf("/_super")>0});return(superbatch.length>0?superbatch[0].src:"empty")+dateStr}function _addPrefetchTag(url){jQuery("<link />",{rel:"prefetch",href:url}).appendTo("head")}function _getLastIssueFromMenu(issueMenuData){var sections=issueMenuData.sections;if(!sections){return }var recentIssues=sections.filter(function filterMenu(menuItem){return menuItem.id==="issues_history_main"});if(recentIssues.length&&recentIssues[0].items.length!==0){var lastIssue=recentIssues[0].items[0];return lastIssue.url}}function _addPrefetchForRegex(response,regex){var matchResult;while(matchResult=regex.exec(response)){var url=matchResult[1].replace(/&amp;/g,"&");_addPrefetchTag(url)}}function _rememberFetchState(){storage.setItem(SESSION_KEY,stateToken)}function _parsePageAndInsertLinks(data){_addPrefetchForRegex(data,/<script.+?src="(.+?)".+?<\/script>/g);_addPrefetchForRegex(data,/<link.+?rel="stylesheet".+?href="(.+?)".+?>/g);_rememberFetchState()}function _shouldFetchResources(){if(!darkFeatures.isEnabled("jira.issue.prefetch")){return false}if(jQuery("#isNavigator").length===1){_rememberFetchState();return false}else{if(meta.get("issue-key")){_rememberFetchState();return false}else{return stateToken!==storage.getItem(SESSION_KEY)}}}function _prefetchResourcesForLastIssue(data){var issueUrl=_getLastIssueFromMenu(data);if(issueUrl){prefetchResourcesForUrl(issueUrl)}}function prefetchResourcesForUrl(url){jQuery.get(url,_parsePageAndInsertLinks)}function prefetchViewIssueResources(){if(_shouldFetchResources()){jQuery.ajax({url:AJS.contextPath()+"/rest/api/1.0/menus/find_link?inAdminMode=false",dataType:"json"}).done(_prefetchResourcesForLastIssue)}}return{prefetchResourcesForUrl:prefetchResourcesForUrl,prefetchViewIssueResources:prefetchViewIssueResources}});;
;
/* module-key = 'jira.webresources:init-jira-page-atl-prefetch', location = '/includes/jira/page/initPrefetch.js' */
require(["jira/page/atl/prefetch","jquery"],function executePrefetch(resourcePrefetch,$){$(window).on("load",resourcePrefetch.prefetchViewIssueResources.bind(resourcePrefetch))});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
(function(a){AJS.toInit(function(){var e="HIPCHAT_ADMIN_BANNER_DISMISS_2";var c;if(!d()&&AJS.Meta.get("is-admin")&&!g()){a.ajax({url:AJS.contextPath()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(i){if(i.requiresManualInstallation||i.v1){c=b(i)}})}function b(k){var j=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!k.v2&&k.v1});var i=JIRA.Messages.showWarningMsg(j);a(document).on("click","#remove-hipchat-v1-link",h);a(document).on("aui-flag-close",".aui-flag",f);return i}function d(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function f(i){if(a(i.target).find(".hipchat-update-banner").length>0){AJS.Cookie.save(e,true)}}function g(){return AJS.Cookie.read(e)=="true"}function h(i){i.preventDefault();a.ajax({url:AJS.contextPath()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(j){if(c){c.hide()}JIRA.Messages.showErrorMsg(AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",j.status))}).done(function(j){if(c){c.hide()}JIRA.Messages.showSuccessMsg("Integration has been removed successfully")})}})})(AJS.$);;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml("HipChat Integration is out of date") + '</b><p>' + soy.$$escapeHtml("Update to take full advantage of the latest features.") + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml("Update Now!") + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml("Remove Integration") + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/HelpTip.js' */
(function(f){function a(){return false}function d(){return true}var b="jira-help-tip aui-help";var k=0,g=new Date().getTime();function h(m){m=""+(m||"");return m.replace(/\./g,"-")}function j(n,m){if(AJS.EventQueue&&m&&m.attributes.id){var p={};var o=h(m.attributes.id);var q="";if(m.attributes.eventPrefix){q=m.attributes.eventPrefix;if(q.charAt(q.length-1)!=="."){q+="."}}p.name=q+"helptips."+o+"."+n;p.properties={};AJS.EventQueue.push(p)}}function c(){return"jira-help-tip-"+g+(k++)}var e=AJS.HelpTip=function(m){var n;this.attributes=f.extend({},m);this.attributes.id||(this.attributes.id=false);this.attributes.callbacks||(this.attributes.callbacks={});if(this.attributes.isSequence){if(!this.attributes.weight){this.attributes.weight=Number.MAX_VALUE}AJS.HelpTip.Manager.sequences.push(this)}if(this.attributes.body){this.attributes.bodyHtml=this.attributes.body;delete this.attributes.body}this.cid=c();n=this.attributes.anchor;delete this.attributes.anchor;this.view=(n)?new i(this,n):new l(this)};f.extend(e.prototype,{show:function(o){o=o||{};var n=this;var p=f.Deferred();if(this.attributes.callbacks.beforeShow){var m=this.attributes.callbacks.beforeShow();if(m&&_.isFunction(m.done)){m.done(p.resolve)}else{p.resolve()}}else{p.resolve()}p.done(function(){AJS.HelpTip.Manager.show(function(){if(!n.isDismissed()){if(!o.force&&AJS.Popups&&AJS.Popups.DisplayController){AJS.Popups.DisplayController.request({name:n.id,weight:1000,show:function(){n.view.show()}})}else{n.view.show()}j("shown",n)}})})},dismiss:function(){var m=h(arguments[0]||"programmatically");this.view.dismiss();if(m==="close-button"&&this.attributes.isSequence){AJS.HelpTip.Manager.clearSequences()}if(!this.isDismissed()){AJS.HelpTip.Manager.dismiss(this);j("dismissed."+m,this)}},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return AJS.HelpTip.Manager.isDismissed(this)},refresh:function(){if(!this.isDismissed()){this.view.refresh()}},hide:function(){if(!this.isDismissed()){this.view.dismiss()}},showNextHelpTipInSequence:function(){this.view.clickNext()}});var i=function(n,m){this.initialize(n,m)};f.extend(i.prototype,{initialize:function(n,m){this.model=n;this.anchorSelector=m;this.anchor=AJS.$(m);this._initDialog(m);AJS.$(document).bind("showLayer",function(q,p,o){if(p==="inlineDialog"&&o.id===n.cid){AJS.InlineDialog.current=null;AJS.$(document.body).unbind("click."+n.cid+".inline-dialog-check");o._validateClickToClose=a;o.hide=a}})},show:function(){this.beforeHide=a;this.popup.show()},refresh:function(){var m=AJS.$(this.anchorSelector);if(!m.is(":visible")){this.dismiss()}else{if(m.get(0)!==this.anchor.get(0)){this.changeAnchor(m)}else{if(!this.isVisible()){this.show()}else{this.popup.refresh()}}}},changeAnchor:function(m){var n=this.isVisible();this.dismiss();this.$el.remove();this.anchor=m;this._initDialog(m);if(n){this.show()}},dismiss:function(){this.beforeHide=d;this._popupHide()},clickNext:function(){var m=AJS.$(this.$el).find(".helptip-next");if(m.length>0){m.click()}},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(o){var m=this;var n=this.model;this.popup=AJS.InlineDialog(f(o),n.cid,_.bind(this._createDialog,this),_.extend({container:"#content",noBind:true,preHideCallback:function(){return m.beforeHide()},calculatePositions:function(p,s,v,r){var q=AJS.InlineDialog.opts.calculatePositions(p,s,v,r);var u=f(this.container);var t=u.offset();if(q.popupCss.left!=="auto"){q.popupCss.left-=t.left;q.popupCss.right="auto"}q.popupCss.top-=t.top;return q},addActiveClass:false,initCallback:n.attributes.callbacks.init,hideCallback:n.attributes.callbacks.hide,persistent:true},n.attributes.inlineDialogOpts));this._popupHide=this.popup.hide;this.popup.hide=a;this.$el=f(this.popup[0]);this.$el.addClass(b)},_createDialog:function(r,p,o){var n=this;var q=AJS.HelpTip.Manager.sequences;var m=this.model.attributes.position;var s=this.model.attributes.isSequence;r.removeClass("contents");r.html(f(AJS.Templates.HelpTip.tipContent(_.extend({showNextButton:s&&(q.length>1&&(m+1<q.length)),length:q.length,position:m,showCloseButton:true},this.model.attributes))));r.unbind("mouseover mouseout");r.find(".helptip-link").click(function(){j("learn-more.clicked",n.model)});r.find(".helptip-close").click(function(t){t.preventDefault();n.model.dismiss("close-button")});r.find(".helptip-next").click(function(u){u.preventDefault();n.model.dismiss("next-button");var t=m+1;q[t]&&(q[t].show({force:true}))});o()}});var l=function(m){this.initialize(m)};f.extend(l.prototype,{initialize:function(){this.$el=f("<div></div>");this.$el.addClass(b)},show:function(){},dismiss:function(){}})})(AJS.$);;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/HelpTipManager.js' */
(function(d){var b=AJS.contextPath()+"/rest/helptips/1.0/tips";var c=undefined;if(WRM&&WRM.data){c=WRM.data.claim("com.atlassian.plugins.helptips.jira-help-tips:common.JiraHelpTipData")}var a={dismissedTipIds:[],sequences:[],loaded:d.Deferred(),url:function(){return b},sync:function(g,f){var e=d.Deferred();g||(g="get");f||(f=null);if(g==="get"&&c&&c.dismissed){e.resolve(c.dismissed)}else{d.ajax(this.url(),{type:g,dataType:"json",contentType:"application/json",data:f&&JSON.stringify(f),processData:false}).done(function(h){e.resolve(h)}).fail(function(){e.reject()})}return e.promise()},fetch:function(){var e=this.sync();e.done(d.proxy(function(f){d.merge(this.dismissedTipIds,f);this.loaded.resolve()},this));return e.promise()},show:function(e){this.loaded.done(e)},dismiss:function(e){var f=e.attributes.id;if(!f){e._dismissed=true}else{this.dismissedTipIds.push(f);this.sync("post",{id:f})}},undismiss:function(e){var f=e.attributes.id;if(!f){e._dismissed=false}else{this.dismissedTipIds.splice(d.inArray(f,this.dismissedTipIds),1);this.sync("delete",{id:f})}},isDismissed:function(e){var f=e.attributes.id;return(f)?d.inArray(f,this.dismissedTipIds)>=0:e._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){_.each(this.sequences,function(e){e.view.dismiss()})},showSequences:function(){if(!this._showStarted){var e=this;var f=0;this._showStarted=true;d.when(this.loaded).done(function(){e.sequences.sort(function(h,g){return h.attributes.weight-g.attributes.weight});e.sequences=_.filter(e.sequences,function(h){var g=_.indexOf(e.dismissedTipIds,h.attributes.id)===-1;if(g){h.attributes.position=f++}return g});if(e.sequences.length>0){_.last(e.sequences).attributes.showCloseButton=true;e.sequences[0].show({force:true})}e._showStarted=false})}}};if(!JIRA.Users.LoggedInUser.isAnonymous()){AJS.HelpTip.Manager=a;a.fetch()}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml("Learn more")) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml("Next")) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml("Close")) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/NewsletterSignup.soy' */
// This file was automatically generated from NewsletterSignup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.newsletterSignupTip = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml(opt_data.description) + '</p>' + aui.form.form({action: '#', isTopLabels: true, extraClasses: 'insiders-signup-form', content: '' + aui.form.textField({id: 'jira-newsletter-user-email', placeholderText: '' + soy.$$escapeHtml("Email address"), value: opt_data.userEmail}) + aui.form.buttons({content: '' + aui.form.submit({type: 'primary', text: '' + soy.$$filterNoAutoescape("Sign me up")}) + aui.form.linkButton({text: '' + soy.$$escapeHtml("No thanks")})})}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.newsletterSignupTip.soyTemplateName = 'JIRA.Templates.newsletterSignupTip';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/NewsletterSignup.js' */
define("jira/newsletter/signuptip",["jquery"],function($){var emailRegex=/^[a-zA-Z0-9.!#$%'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function validateEmail(email){if(email.length>255){return false}return emailRegex.test(email)}return{render:function(newsletterFormDetails,helpTipOptions){var defaults={anchor:"#user-options",isSequence:false,showCloseButton:false};if(newsletterFormDetails.isBusinessOnly){defaults.id="business-newsletter-signup-tip";defaults.title="Atlassian for Business Teams";defaults.bodyHtml=JIRA.Templates.newsletterSignupTip({userEmail:newsletterFormDetails.userEmail,description:"Atlassian gets down to business. Get our view on productivity for business teams. You\'ll get business-related content, best practices and product announcements to unleash the potential in your marketing, HR, finance, legal and sales teams."})}else{defaults.id="newsletter-signup-tip";defaults.title="JIRA Insiders";defaults.bodyHtml=JIRA.Templates.newsletterSignupTip({userEmail:newsletterFormDetails.userEmail,description:"Stay up-to-date with the latest JIRA tips, tricks, and exclusive inside jokes. All this and more in JIRA Insiders, delivered every month from our inbox to yours."})}var tip=new AJS.HelpTip($.extend(defaults,helpTipOptions));if(tip.isDismissed()){return }tip.show();AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.shown"});var $body=$("body");$body.on("submit","form.aui.insiders-signup-form",function(e){e.preventDefault();var $form=$(this);$form.find(".error").remove();var $emailInput=$form.find("#jira-newsletter-user-email");var email=$emailInput.val();if(validateEmail(email)){$.ajax({type:"POST",url:AJS.format(newsletterFormDetails.formUrl,encodeURI(email)),dataType:"json"}).success(function(){AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.submitted"})}).error(function(xhr){AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.error",data:{statusCode:xhr.status}})});if(newsletterFormDetails.userEmail!==email){AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.email.changed"})}tip.dismiss("newslettersubscribed")}else{AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.email.validationerror"});$emailInput.after(aui.form.fieldError({message:"Please enter a valid e-mail address."}))}});$body.on("click","form.aui.insiders-signup-form a.cancel",function(e){e.preventDefault();AJS.trigger("analyticsEvent",{name:"jira.newsletter.signuptip.dismissed"});tip.dismiss("newslettercancelled")})}}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/initNewsletterSignup.js' */
define("jira/newsletter/init-signup",["jira/newsletter/signuptip"],function(NewsletterSignup){return function(){var newsletterSignupData=WRM.data.claim("com.atlassian.jira.jira-header-plugin:newsletter-signup-tip.newsletterSignup");if(newsletterSignupData&&newsletterSignupData.showNewsletterTip){NewsletterSignup.render({userEmail:newsletterSignupData.userEmail,formUrl:newsletterSignupData.formUrl,isBusinessOnly:newsletterSignupData.isBusinessOnly})}}});require(["jquery","jira/newsletter/init-signup"],function($,InitNewsletterSignup){$(InitNewsletterSignup)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(h){h.preventDefault();new a({id:"whereismycf-dialog",content:function g(j){var i=this;require(["jira/admin-helper/whereismycf/content-loader"],function(k){k.loadContentForView(i,j)})}}).show()});e(document).bind("showLayer",function(h,j,i){if(j=="inlineDialog"&&i.popup.attr("id")=="inline-dialog-field_picker_popup"){if(i.popup.find(".whereismycf-qfpicker-link").length==0){var g=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(i.popup.find(".qf-picker-header dl"));g.click(function(m){m.preventDefault();i.hide();f();var k=b.current;new a({id:"whereismycf-dialog",content:function l(o){var n=this;require(["jira/admin-helper/whereismycf/content-loader"],function(p){p.loadContentForEditAndCreate(n,k,o)})}}).show()})}}});function f(){AJS.InlineDialog.current=null}}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.", projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.", projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.", projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Visualize work across your team with a board.", projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml("Issue Types") + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml("Workflow") + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: "Task"});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: "Sub-task"});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:issue-link-confluence-js', location = 'js/issuelink-confluence.js' */
(function($){var settings={getCurrentAppId:function(context){return $("#issue-link-confluence-app-id",context).val()},shouldExecute:function(context){return $("#confluence-page-link",context).length!==0},getIssueId:function(context){return $("input[name=id]",context).val()}};JIRA.bind(JIRA.Events.NEW_PAGE_ADDED,function(e,context){IssueLinkAppLinks.init(settings,context)})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'js/ConfluencePageSearch.js' */
AJS.$(function($){var confluenceSearchDialog=new JIRA.FormDialog({id:"confluence-page-search-dialog",trigger:"#confluence-page-link .confluence-search-trigger",widthClass:"large",height:"565px",content:function(render){var dialog=this;JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/confluenceIssueLink/1/confluence/applink",complete:function(xhr,textStatus,smartAjaxResult){if(smartAjaxResult.successful){var appLinks=smartAjaxResult.data.applicationLinks;render(JIRA.Templates.ConfluencePageSearch.result({appLinks:appLinks}));initAppLinks(dialog).done(function(context,helper){initSearchDialog(context,helper);$("#link-search-text",context).focus()})}else{AJS.messages.error("#search-results-table",{body:"The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.",closeable:false});render()}}})},submitHandler:function(e,callback){e.preventDefault();$("#search-panel-button").click().removeAttr("disabled");callback()}});function initSearchDialog($dialog,helper){$("#confluence-app-link",$dialog).change(function(){var authenticationRequired=helper.selectServer($(this).val()).authenticationRequired;if(!authenticationRequired){populateSpaces($dialog,$(this).val(),helper)}$("#search-results-table",$dialog).empty();setSearchControlsEnabled(true,$dialog)});$("#search-panel-button",$dialog).click(function(){$("#search-results-table",$dialog).empty();var searchText=$("#link-search-text",$dialog).val();searchText=$.trim(searchText);if(searchText){doSearch(searchText,$dialog)}else{AJS.messages.info("#search-results-table",{body:"Please enter search value.",closeable:false})}return false})}var spaceAjaxId=0;function populateSpaces($context,appId,helper){$("select#search-panel-space",$context).html(JIRA.Templates.ConfluencePageSearch.allSpacesOption());var myAjaxId=++spaceAjaxId;JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/confluenceIssueLink/1/confluence/space?appId="+appId,complete:function(xhr,textStatus,smartAjaxResult){if(myAjaxId!==spaceAjaxId){return }if(smartAjaxResult.successful){var spaces=smartAjaxResult.data.spaces;$("select#search-panel-space",$context).html(JIRA.Templates.ConfluencePageSearch.spaceOptions({spaces:spaces}))}else{if(smartAjaxResult.status===401){helper.setAuthenticationRequired(appId,true)}else{setSearchControlsEnabled(false,$context);var msg;if(smartAjaxResult.status===403){msg="Content on the Confluence site could not be accessed because the Confluence server\'s \'Remote API\' feature is disabled. The Confluence system administrator must enable this \'Remote API\' feature for JIRA to successfully access this content."}else{msg="Unable to gather information from the selected Confluence instance."}AJS.messages.error("#search-results-table",{body:msg,closeable:false})}}}})}function setSearchControlsEnabled(enabled,$context){if(enabled){$("#link-search-text",$context).removeAttr("disabled");$("#search-panel-space",$context).removeAttr("disabled");$("#search-panel-button",$context).removeAttr("disabled")}else{$("#link-search-text",$context).attr("disabled","disabled");$("#search-panel-space",$context).attr("disabled","disabled");$("#search-panel-button",$context).attr("disabled","disabled")}}function setLoadingIconVisible(visible,$context){$("#link-search-loading",$context).toggleClass("hidden",!visible)}function doSearch(searchText,$context){setLoadingIconVisible(true,$context);var appLinkId=$("#confluence-app-link",$context).val();var spaceKey=$("#search-panel-space option:selected",$context).val();JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/confluenceIssueLink/1/confluence/search?query="+searchText+"&appId="+appLinkId+"&spaceKey="+spaceKey+"&maxResults=10",complete:function(xhr,textStatus,smartAjaxResult){setLoadingIconVisible(false,$context);if(smartAjaxResult.successful){var results=smartAjaxResult.data.result;var resultHtml=JIRA.Templates.ConfluencePageSearch.resultsTable({results:results});$("#search-results-table",$context).html(resultHtml)}else{var msg;if(smartAjaxResult.hasData){msg="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."}else{msg="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down."}AJS.messages.error("#search-results-table",{body:msg,closeable:false})}$("#confluence-searchresult tbody tr",$context).click(function(){var linkUrl=$(this).children().first().data("url");$("#confluence-page-url").val(linkUrl);$("#link-issue-dialog .error").hide();confluenceSearchDialog.hide();$("#link-issue-dialog").show();$("#confluence-page-url").focus().select()})}})}function initAppLinks(dialog){var settings={getCurrentAppId:function(context){return $("#confluence-app-link",context).val()},shouldExecute:function(context){return $("#confluence-app-link",context).length!==0},onAuthenticationSuccessCallback:function(context,currentAppId,helper){populateSpaces(context,currentAppId,helper)},getIssueId:function(context){return $("#confluence-page-link input[name=id]").val()}};return IssueLinkAppLinks.init(settings,dialog.$popup).done(function(context,helper){populateSpaces(context,settings.getCurrentAppId(context),helper)})}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'templates/dialog/searchresult.soy' */
// This file was automatically generated from searchresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ConfluencePageSearch.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ConfluencePageSearch == 'undefined') { JIRA.Templates.ConfluencePageSearch = {}; }


JIRA.Templates.ConfluencePageSearch.result = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml("Find a Confluence page") + '</h2><form class="aui search-form" id="confluence-page-search-form" action="#" method="post"><div class="field-group"><label for="confluence-app-link">' + soy.$$escapeHtml("Server") + ':</label>';
  if (opt_data.appLinks.length == 1) {
    output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.appLinks[0].name) + '</span><input id="confluence-app-link" class="hidden" type="hidden" name="appId" value="' + soy.$$escapeHtml(opt_data.appLinks[0].id) + '"/>';
  } else {
    output += '<select id="confluence-app-link" class="select medium-field" name="appId">';
    var appLinkList17 = opt_data.appLinks;
    var appLinkListLen17 = appLinkList17.length;
    for (var appLinkIndex17 = 0; appLinkIndex17 < appLinkListLen17; appLinkIndex17++) {
      var appLinkData17 = appLinkList17[appLinkIndex17];
      output += '<option value="' + soy.$$escapeHtml(appLinkData17.id) + '">' + soy.$$escapeHtml(appLinkData17.name) + '</option>';
    }
    output += '</select>';
  }
  output += '</div><div class="issue-link-applinks-authentication-message applinks-message-bar"></div><div class="hidden"><input class="issue-link-applinks-application-type" type="hidden" value="com.atlassian.applinks.api.application.confluence.ConfluenceApplicationType"/></div><div class="issue-link-oauth-toggle field-group"><label for="link-search-text" id="linkSearch-label">' + soy.$$escapeHtml("Search") + ':</label><input id="link-search-text" type="text" tabindex="0" class="text" name="linkSearch" size="50" /> <select tabindex="0" class="search-space select" id="search-panel-space"><option value="">' + soy.$$escapeHtml("All Spaces") + '</option></select> <input type="submit" tabindex="0" class="aui-button" id="search-panel-button" value="' + soy.$$escapeHtml("Search") + '"/><span id="link-search-loading" class="icon loading throbber hidden"/></div><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-link cancel" id="confluence-link-cancel" title="' + soy.$$escapeHtml("Press Esc to close") + '">' + soy.$$escapeHtml("Close") + '</button></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.result.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.result';
}


JIRA.Templates.ConfluencePageSearch.resultsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.results.length > 0) {
    output += '<table id="confluence-searchresult" class="aui"><thead><tr><th width="180px">' + soy.$$escapeHtml("Title") + '</th><th width="550px">' + soy.$$escapeHtml("Excerpt") + '</th></tr></thead><tbody>';
    var resultList44 = opt_data.results;
    var resultListLen44 = resultList44.length;
    for (var resultIndex44 = 0; resultIndex44 < resultListLen44; resultIndex44++) {
      var resultData44 = resultList44[resultIndex44];
      output += '<tr title="' + soy.$$escapeHtml(resultData44.title) + '"><td class="title" data-url="' + soy.$$escapeHtml(resultData44.url) + '">' + soy.$$escapeHtml(resultData44.title) + '</td><td class="excerpt">' + soy.$$escapeHtml(resultData44.excerpt) + '</td></tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml("Search returned no results.") + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.resultsTable.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.resultsTable';
}


JIRA.Templates.ConfluencePageSearch.spaceOptions = function(opt_data, opt_ignored) {
  var output = '<option value="">' + soy.$$escapeHtml("All Spaces") + '</option>';
  var spaceList64 = opt_data.spaces;
  var spaceListLen64 = spaceList64.length;
  for (var spaceIndex64 = 0; spaceIndex64 < spaceListLen64; spaceIndex64++) {
    var spaceData64 = spaceList64[spaceIndex64];
    output += '<option value="' + soy.$$escapeHtml(spaceData64.key) + '">' + soy.$$escapeHtml(spaceData64.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.spaceOptions.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.spaceOptions';
}


JIRA.Templates.ConfluencePageSearch.allSpacesOption = function(opt_data, opt_ignored) {
  return '<option value="">' + soy.$$escapeHtml("All Spaces") + '</option><option value="" disabled="disabled">' + soy.$$escapeHtml("Loading...") + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.allSpacesOption.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.allSpacesOption';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["require"],function(b){var a=b("underscore");function c(e,g,d){if(a.isUndefined(e)){throw new Error("You must specify a category")}this.params={};this.params.category=e;var f=0;if(!a.isUndefined(g)){this.params.action=g;f++;if(!a.isUndefined(d)){this.params.label=d;f++}}this.requiredArgumentNames=["action","label","value"].slice(f);this.useAsync=true}c.prototype.setAsync=function(d){this.useAsync=d;return this};c.prototype.trigger=function(){if(this.requiredArgumentNames.length<arguments.length){AJS.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length)}var f=a.clone(this.params);for(var e=0;e<arguments.length&&!a.isUndefined(this.requiredArgumentNames[e]);e++){f[this.requiredArgumentNames[e]]=arguments[e]}this._validateParams(f);var d="gh.analytics.async";AJS.$(AJS).trigger(d,f)};c.prototype._validateParams=function(e){var d=["category","action","label"];a.each(d,function(f){if(!a.isUndefined(e[f])&&!a.isString(e[f])){e[f]=e[f].toString()}else{if(a.isUndefined(e[f])){e[f]=""}}});a.each(["category","action"],function(f){e[f]=e[f].replace(/\s+/g,"")});if(!a.isUndefined(e.value)){e.value=parseInt(e.value,10);if(isNaN(e.value)){e.value=undefined}}};return c});AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var c=require("jira-agile/rapid/analytics-tracker");var a=function(d){return new c(d).setAsync(false)};AJS.$("#gh_view_help").click(function(d){a("gh.gethelp").trigger("usermenu","docs");return b(AJS.$(this))});AJS.$("#greenhopper-my-jira-home-enablement").click(function(d){a("gh.myjirahome").trigger("usermenu","enabled");return b(AJS.$(this))});AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(d){a("gh.myjirahome").trigger("usermenu","set");return b(AJS.$(this))});AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(d){a("gh.myjirahome").trigger("usermenu","disable");return b(AJS.$(this))});AJS.$("#greenhopper-my-jira-home-set").click(function(d){a("gh.myjirahome").trigger("usermenu","set");return b(AJS.$(this))});AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(g){var d=AJS.$(this),f=d.attr("checked")?"on":"off";a("gh.labs.feature").trigger("rapid_removal",f);return true});AJS.$(document).delegate("#js-classic-link_lnk","click",function(d){a("gh.agile.menu").trigger("classic");return true});var b=function(d){if(d.attr("target")=="_blank"){return true}else{setTimeout('document.location = "'+d.attr("href")+'"',100);return false}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
if(typeof GH==="undefined"){window.GH={}}(function(c,g,e,d){d.AnalyticsEnabled=true;var b="gh.analytics.async";function f(){g(document).on(b,function(i,h){a(h)})}function a(i){var j={};var h=i.category;if(!e.isUndefined(i.action)){h=h+"."+i.action}if(!e.isUndefined(i.label)){j.label=i.label}if(!e.isUndefined(i.value)){j.value=i.value}c.trigger("analytics",{name:h,data:j})}f()})(AJS,AJS.$,_,GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'includes/js/gh-globalissueoperations.js' */
(function(){var e=require("jira-agile/rapid/analytics-tracker");var c=new e("gh.issueaction.gotorapidboard").setAsync(false);var b=JIRA.FormDialog.extend({_performRedirect:function(f){c.trigger("direct");window.location.href=f}});var d=new b({id:"gh-rapidboard-dialog",trigger:"a.issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return JIRA.Dialogs.getDefaultAjaxOptions.apply(this,arguments)}});var a=function(g,h){var i="";var f=AJS.$(g);if(f.hasClass("js-rapidboard-operation-sprint")){i="sprint."}else{if(f.hasClass("js-rapidboard-operation-issue")){i="issue."}}i+=h;return i};AJS.$(function(){AJS.$(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(g){g.preventDefault();var f=a(g.currentTarget,"open");c.trigger(f);d.show()});AJS.$(document).on("simpleClick",".js-select-rapidboard",function(g){var f=a(g.currentTarget,"chosen");c.trigger(f)})})})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/gh-namespace.js' */
if(typeof GH!=="object"){window.GH={}}GH.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}c[f[b]]=e||c[f[b]]||{};return c[f[b]]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/initFieldPickers.js' */
(function(c){function b(d){c(".js-epic-picker",d).each(function(){var f=c(this);var e=new JIRA.EpicPicker({element:f});c(document).trigger(JIRA.EpicPicker.READY_EVENT,e)})}function a(d){c(".js-sprint-picker",d).each(function(){var f=c(this);var e=new JIRA.SprintPicker({element:f});c(document).trigger(JIRA.SprintPicker.READY_EVENT,e)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(g,d,f){if(f!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){b(d);a(d)}})})(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicPicker.js' */
JIRA.EpicPicker=AJS.SingleSelect.extend({init:function(q){var f=q.element;var c;var p=this;AJS.$.extend(q,{submitInputVal:true,showDropdownButton:true,removeDuplicates:true,ajaxOptions:{url:contextPath+"/rest/greenhopper/1.0/epics",query:true,data:b,formatResponse:d,error:j}});var m=this.setSelection;this.setSelection=function(s,r){if(s.properties.customItem){event.preventDefault();return}m.apply(this,arguments)};h();function b(s){var r=!n();return{searchQuery:s,projectKey:AJS.$(f).attr("data-project-key"),maxResults:100,hideDone:r}}function l(z,s,y,v){z=AJS.escapeHTML(String(z));s=AJS.escapeHTML(String(s));y=y;v=AJS.escapeHTML(String(v));var A=v.toUpperCase();var t=z.toUpperCase();var B=s.toUpperCase();var A=(A+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1");var r=new RegExp("("+A+")","gi");var w=t.search(r);var x;if(w>-1){x=z.slice(w,w+v.length);z=z.replace(x,"<em>"+x+"</em>")}w=B.search(r);if(w>-1){x=s.slice(w,w+v.length);s=s.replace(x,"<em>"+x+"</em>")}var u=y?(" &#8226; "+"Done"):"";return z+" - <span class='epic-menu-metadata'>("+s+u+")</span>"}function d(u){if(!u||!u.epicLists||u.total===0){return[]}var x=[];var y=p.getQueryVal();var z=0;for(var w=0;w<u.epicLists.length;w++){var r=u.epicLists[w];var t=r.epicNames;var v=a(w+1,r.listDescriptor);if(t.length>0){_.each(t,function(A){v.addItem(k(A,y))});x.push(v)}z+=t.length}if(z>0){var s=new AJS.GroupDescriptor({weight:0,showLabel:false,items:[new AJS.ItemDescriptor({label:y,highlighted:true,styleClass:"ghx-epic-menu-header",customItem:true,html:"<li><h5>"+AJS.format("Showing {0} of {1} matching epics",z,u.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(n()?" checked":"")+">"+"Show done epics"+"</label></li>"})]});x.unshift(s)}return x}function k(v,u){var s=v.key;var w=v.name;var t=v.isDone;var r=l(w,s,t,u);return new AJS.ItemDescriptor({value:"key:"+s,fieldText:w,label:r,html:r,allowDuplicate:false,highlighted:true})}function a(s,r){return new AJS.GroupDescriptor({weight:s,label:r,replace:true})}function j(t,u,s){var r=AJS.$(f);r.siblings(".ghx-error").remove();r.before(GH.tpl.rapid.notification.renderAuiMessage({message:("Error"+": "+s),type:"error",className:"ghx-error aui-ss"}))}function i(t){var r="";var s=false;if(t&&t.length>0){r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",t);s=true}return{isError:s,message:r}}function o(s){var r,t;c.apply(p,[s]);s=s||AJS.$.trim(p.$field.val());t=p.model.getDescriptor(s);if(!t&&p.$container.hasClass("aui-ss-editing")){r=i(s);if(r.isError){p.options.errorMessage=r.message;p.showErrorMessage(s)}else{p.hideErrorMessage()}}}function e(){AJS.$(p.$field[0].form).submit()}function h(){p._super(q);c=p.handleFreeInput;p.handleFreeInput=o;var r=require("jira/ajs/layer/inline-layer");p.dropdownController.bind(r.EVENTS.show,function(s,t){t.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',g);t.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',g)})}function n(){return localStorage.getItem("gh.epicpicker.showdone")==="true"}function g(s){s.preventDefault();var r=!n();localStorage.setItem("gh.epicpicker.showdone",r);p.$field.click();return false}}});JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(f){var n={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"};var j=10;var b=f.element;var l,o;var u=b.data("saved-state"),t=b.data("saved-id");var h,q=this;var e=AJS.SelectSuggestHandler.extend({formatSuggestions:function(x,y){x=this._super(x,y);if(y.length===0){x[x.length-1].footerText("Start typing for sprints.")}return x}});AJS.$.extend(f,{submitInputVal:false,showDropdownButton:true,removeOnUnSelect:false,maxInlineResultsDisplayed:j,ajaxOptions:{url:contextPath+"/rest/greenhopper/1.0/sprint/picker",query:true,formatResponse:v,error:s}});p();function i(y){var x=l.apply(this,arguments);x.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(y.properties));return x}function w(z){var y=this.getSelectedDescriptor(),x;if(!z&&!y){c(null)}k();this.hideErrorMessage();if(!y){x=d(z)}else{x=r(y)}if(x.message){this.options.errorMessage=x.message;o.apply(this,arguments);this.$errorMessage.addClass("inline-edit-error")}if(x.needsScopeChangeWarning){m()}}function d(z){var y=null,x=false;if(z&&z.length>0){if(u){y=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",z);if(u===n.ACTIVE){x=true}}else{y=AJS.format("{0} is not a valid sprint name.",z)}}else{if(u===n.ACTIVE){x=true}}return{message:y,needsScopeChangeWarning:x}}function r(y){var x=false;if(u===n.ACTIVE){if(t!=y.properties.value){x=true}}else{if(u===n.FUTURE){if(y.properties.stateKey===n.ACTIVE){x=true}}else{if(!u){if(y.properties.stateKey===n.ACTIVE){x=true}}}}return{message:null,needsScopeChangeWarning:x}}function m(){if(!h){h=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:true,title:"Sprint scope will be affected by this action."}));var x=q.$container.closest(".inline-edit-fields");if(x.size()>0){x.closest(".editable-field").append(h)}else{q.$container.closest(".field-group").append(h)}}h.show()}function k(){if(h){h.remove();h=null}}function v(x){if(!x.suggestions&&!x.allMatches){return[]}var z=new AJS.GroupDescriptor({weight:0,label:"Suggestions"});var y=new AJS.GroupDescriptor({weight:1,label:"All sprints"});_.each(a(x.suggestions),function(A){z.addItem(g(A,true))});_.each(a(x.allMatches),function(A){y.addItem(g(A,false))});return[z,y]}function g(z,y){var x=AJS.escapeHTML(String(z.name));return new AJS.ItemDescriptor({value:z.id.toString(),label:z.name,html:x,stateKey:z.stateKey,boardName:z.boardName,allowDuplicate:false,isSuggestion:y})}function a(x){return _.sortBy(x,function(y){return y.name.toLowerCase()})}function c(x){if(GH.SprintConfig){AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:t,updated:x?x.properties.value:null}})}}function p(){q._super(f);l=q.listController._renders.suggestion;o=q.showErrorMessage;q.listController._renders.suggestion=i;q.showErrorMessage=w;b.bind("selected",function(z,y,x){x.showErrorMessage(x.getQueryVal());c(y)});q.suggestionsHandler=new e(q.options,q.model)}function s(y,A,z){var x=AJS.$(b);x.siblings(".ghx-error").remove();x.before(GH.tpl.rapid.notification.renderAuiMessage({message:("Error"+": "+z),type:"error",className:"ghx-error aui-ss"}))}}});JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml("Active sprint") : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future sprint") : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Active sprint in {0}",opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format("Future sprint in {0}",opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/rapid/ui/notification/Notification.js' */
GH.namespace("GH.Notification");GH.Notification={};GH.Notification.autoHideEnabled=true;GH.Notification.showErrors=function(d,a){var b=GH.Notification.prepareNotificationDiv();var c=GH.tpl.rapid.notification.renderErrorMessages(d);if(typeof a=="undefined"){a=true}AJS.messages.error(b,{title:"Error",body:c,closeable:a});if(GH.Notification._divStyle(b)){b.css(GH.Notification._divStyle(b))}b.show()};GH.Notification.showWarnings=function(f,e){var b={autoHide:true,autoHideDelay:5000,preRendered:false,showTitle:false};e=_.extend({},b,e);var c=GH.Notification.prepareNotificationDiv();var a;if(!e.preRendered){a=GH.tpl.rapid.notification.renderErrorMessages({errors:f})}else{a=f}var d={body:a,closeable:true};if(e.showTitle){d.title="Warning"}AJS.messages.warning(c,d);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(e.autoHide&&GH.Notification.autoHideEnabled){setTimeout(function(){c.hide()},e.autoHideDelay)}};GH.Notification.showWarning=function(b){var a=GH.Notification.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});if(GH.Notification._divStyle(a)){a.css(GH.Notification._divStyle(a))}a.show()};GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()};GH.Notification.handleDateFormatMismatchError=function(c){var b='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';b+="Advanced Settings";b+="</a>";var a=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",b);GH.Notification.showWarnings(a,{autoHide:false,preRendered:true})};GH.Notification.auiMessage=function(b){var a=_.extend({type:"generic",icon:true,messageHtml:false},b);return GH.tpl.rapid.notification.renderAuiMessage({type:a.type,title:a.title,icon:a.icon,messageHtml:a.messageHtml,message:a.message})};GH.Notification.Handler={_defaultNotificationHandler:function(){var a=AJS.$("<div/>");AJS.$(".global-msg").remove();a.addClass("global-msg").appendTo("body");return a},_defaultDivStyleHandler:function(a){return{marginLeft:-a.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(a){this._customDivStyleHandler=a;this._useDefault=false},_useDefault:true,setCustomNotificationHandler:function(a){this._customNotificationHandler=a;this._useDefault=false},removeCustomHandlers:function(){this._useDefault=true},getNotificationHandler:function(){if(!this._useDefault&&this._customNotificationHandler!=null){return this._customNotificationHandler}else{return this._defaultNotificationHandler}},getDivStyleHandler:function(){if(!this._useDefault&&this._customDivStyleHandler!=null){return this._customDivStyleHandler}else{return this._defaultDivStyleHandler}}};GH.Notification._divStyle=function(b){var a=GH.Notification.Handler.getDivStyleHandler();return a(b)};GH.Notification.prepareNotificationDiv=function(){var a=GH.Notification.Handler.getNotificationHandler();return a()};GH.Notification.showSuccess=function(d,b){clearTimeout(GH.Notification.current);var a={timeout:5000,closeable:true,shadowed:true};b=_.extend(a,b,{body:d});var c=GH.Notification.prepareNotificationDiv();AJS.messages.success(c,b);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(GH.Notification.autoHideEnabled){GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},b.timeout)}};GH.Notification.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){d=c.getItem("selectedIssueId")}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Notification.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Notification.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Notification.showSuccess(b)}};GH.Notification.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Notification._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Notification.showWarning(b);break;case"success":default:GH.Notification.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};GH.Notification.showBoardUpdatedMessage=function(){GH.Notification.clearBoardUpdatedMessage();var b=AJS.$.Deferred();var a=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");a.data("deferred",b);a.find(".js-refresh-now").click(function(c){c.preventDefault();a.removeData("deferred");GH.Notification.clearBoardUpdatedMessage();b.resolve()});a.find(".js-ignore-refresh").click(function(c){c.preventDefault();GH.Notification.clearBoardUpdatedMessage()});return b.promise()};GH.Notification.clearBoardUpdatedMessage=function(){var a=AJS.$("#ghx-update-message");if(a.length){var b=a.data("deferred");if(b&&b.reject){b.reject()}a.remove()}};GH.Notification.isBoardUpdatedMessageVisible=function(){var a=AJS.$("#ghx-update-message");return a.length>0};AJS.$(document).ready(function(){GH.Notification.showIssueMessage();if(GH.storage){GH.Notification._displayPageLoadMessages()}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml("See our documentation for the list of supported browsers.") + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml("This board has been updated") + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml("Refresh") + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml("Ignore") + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.js' */
JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(f,d){function c(e){var h=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,b)});var g=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,b)});return[h,g]}function b(g){g.date=moment(g.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var e=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(g);return new AJS.ItemDescriptor({value:g.id,label:g.name,html:e,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(g),date:g.date,boardName:g.boardName,stateKey:g.stateKey,highlighted:true,allowDuplicate:false})}function a(e){return _.sortBy(e,"id")}AJS.$(".js-sprint-checkboxmultiselect",d).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:true,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:false},query:true,formatResponse:c},suggestionsHandler:GH.SprintSuggestHandler})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml("Active") : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future") : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml("Closed") : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Active \xb7 {0}",opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format("Future \xb7 {0}",opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format("Closed \xb7 {0}",opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Started on {0}",opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future") : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format("Closed on {0}",opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintSuggestHandler.js' */
define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(a){return a.extend({formatSuggestions:function(c,d){var b=this.model.getDisplayableSelectedDescriptors();prepareSelectedDescriptors(b);var e=function(f){var g;for(g in b){if(b[g].properties.value===f.properties.value.toString()){return false}}return true};c=_.map(c,function(g){var f=_.filter(g.properties.items,e);g.properties.items=f;return g});return this._super(c,d)}})});function prepareSelectedDescriptors(a){_.each(a,function(c){var b=JSON.parse(c.properties.meta);b.date=moment(b.date).format("LL");c.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(b);c.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(b)})}AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(c){var d=c("jquery");var b=c("underscore");function e(f){if(f.indexOf("project")!==0){return""}return a(f).trim()}function a(f){function g(i){var j=i.match(/\bproject\s*=\s*(\S+)/i);return j?j[1]:null}function h(i){var j=i.match(/\bproject\s+in\s+\((.*?)\)/i);return j?j[1]:null}return g(f)||h(f)}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(h,f){var g=d("#jql",this).val();f.find(".js-epiclink-checkboxmultiselect").each(function(){var i=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:true,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){i._setSuggestions([])},data:{searchQuery:"",projectKey:e(g),filterEpicsByGivenProjects:true,maxResults:100},query:true,minQueryLength:0,formatResponse:function(j){var m=[];m.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:true,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]}));if(!j||!j.epicLists||j.total===0){return m}for(var n=0;n<j.epicLists.length;n++){var l=j.epicLists[n];var k=l.epicNames;var o=new AJS.GroupDescriptor({label:l.listDescriptor,weight:n});if(k.length>0){b.each(k,function(p){o.addItem(new AJS.ItemDescriptor({highlighted:true,label:p.name+" - ("+p.key+")",value:p.key,title:p.key}))});m.push(o)}}return m}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(a){return a.extend({formatSuggestions:function(c,e){var b=this.model.getDisplayableSelectedDescriptors();var d=function(f){var g;for(g in b){if(b[g].properties.value===f.properties.value.toString()){return false}}return true};c=_.map(c,function(g){var f=_.filter(g.properties.items,d);g.properties.items=f;return g});return this._super(c,e)}})});AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to optimize the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml("Story") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml("Story") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml("Improvement") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml("New Feature") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml("Issue Types") + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml("Bug") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml("Task") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml("Sub-task") + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml("workflow") + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
(function(b){b.namespace("gh.app.globalkeyboardshortcuts");var a=gh.app.globalkeyboardshortcuts;a.findSelectedIssueId=function(){var c;if(jira&&jira.app&&jira.app.issuenavigator&&jira.app.issuenavigator.getSelectedIssueId){c=jira.app.issuenavigator.getSelectedIssueId()}if(!c&&jira&&jira.app&&jira.app.issue&&jira.app.issue.getIssueId){c=jira.app.issue.getIssueId()}return c};a.goToAgile=function(){var c=(contextPath?contextPath:"")+"/secure/RapidBoard.jspa";window.location.href=c};a.followLink=function(c){var d=b(c);if(d.length>0&&(d[0].nodeName.toLowerCase()==="a"||d[0].nodeName.toLowerCase()==="link")){d.click();window.location.href=d.attr("href")}};a.sendToTop=function(d,e){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop){GH.Shortcut.sendToTop(d);a.closeDialogAndPopMessage();return}if(d!="Action"){return}var c=e||a.findSelectedIssueId();if(!contextPath){contextPath=""}JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:c}),success:a.handleRankSuccess});AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToTop"+(d?d:""),count:1})};a.sendToBottom=function(d,e){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom){GH.Shortcut.sendToBottom(d);a.closeDialogAndPopMessage();return}if(d!="Action"){return}var c=e||a.findSelectedIssueId();if(!contextPath){contextPath=""}JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:c}),success:a.handleRankSuccess});AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToBottom"+(d?d:""),count:1})};a.closeDialogAndPopMessage=function(){if(JIRA.IssueNavigator.isNavigator()){AJS.reloadViaWindowLocation()}else{if(JIRA.Dialog&&JIRA.Dialog.current){JIRA.Dialog.current.hide()}if(window.GH){if(GH.Message&&GH.Message.showIssueMessage){GH.Message.showIssueMessage()}else{if(GH.RapidBoard&&GH.Notification&&GH.Notification.showIssueMessage){GH.Notification.showIssueMessage()}}if(window.Boards){Boards.refreshAll()}}else{if(JIRA.IssueNavigator&&JIRA.IssueNavigator.Shortcuts&&JIRA.IssueNavigator.Shortcuts.flashIssueRow){JIRA.IssueNavigator.Shortcuts.flashIssueRow()}}}};a.handleRankSuccess=function(c,e,d){a.storeSuccessMessage(c.issueId,c.issueKey,"thanks_issue_updated");a.closeDialogAndPopMessage()};a.storeSuccessMessage=function(e,c,d){var f=JIRA.SessionStorage;f.setItem("selectedIssueId",e);f.setItem("selectedIssueKey",c);f.setItem("selectedIssueMsg",d)};AJS.$(function(){AJS.$(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(c){c.preventDefault();var d=AJS.$(this).attr("data-issueid");a.sendToTop("Action",d)});AJS.$(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(c){c.preventDefault();var d=AJS.$(this).attr("data-issueid");a.sendToBottom("Action",d)})})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml("Log in \x26 approve") + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,e,t,r,o,i,u,c,a,f,s,h,l,p,d;n=function(){return window}(),e=function(n){return!(!n.performance||!n.performance.now)}(n),t=[],r=function(n){return function(e){n.unshift({addReporter:e})}}(t),o=function(n){return function(e){for(;n.length;)e(n.splice(0,1)[0]);n.unshift=e,n.push=e}}(t),i=function(n,e){return function(t){n.push({end:{key:t.key,timestamp:e.performance.now()}})}}(t,n),u=function(){function n(){this._={}}var e=function(t){var r=t[0],o=t[1];o instanceof n?t.length>=3?Object.keys(o._).forEach(function(n){e([r,o._[n],n].concat(t.slice(2)))}):Object.keys(o._).forEach(function(n){e([r,o._[n],n])}):Array.isArray(o)&&r.apply(null,[o].concat(t.slice(2)))};n.prototype.forEach=function(n){e([n,this])},n.prototype.add=function(){for(var e=this,t=null,r=null,o=0;o<arguments.length;o++){if(r=arguments[o],o===arguments.length-1&&Array.isArray(e)){e.push(r);break}o<arguments.length-2&&!e._.hasOwnProperty(r)?e._[r]=new n:o!==arguments.length-2||e._.hasOwnProperty(r)||(e._[r]=[]),e=e._[r],t=r}};var t=function(n,e){if(0!==n.length){var r=n.pop(),o=r[0],i=r[1];o===e?t(n,o):i._.hasOwnProperty(e)&&delete i._[e],0===Object.keys(i).length&&t(n,o)}};return n.prototype.remove=function(){for(var n,e=!1,r=null,o=this,i=[[r,o]],u=null,c=0;c<arguments.length;c++)if(u=arguments[c],Array.isArray(o))n=o.indexOf(u),n>-1&&(o.splice(n,1),0===o.length&&i.length>1&&t(i,r),e=!0);else{if(!o._.hasOwnProperty(u))break;c===arguments.length-1&&(delete o._[u],0===Object.keys(o).length&&i.length>1&&t(i,r),e=!0),r=u,o=o._[u],i.push([r,o])}return e},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),c=function(n){return n.document}(n),a=function(n,e,t){function r(n){return!n||null==n||"null"===n||"undefined"===n}function o(n,e,r){s||(c.observe(t,{attributes:!0,childList:!0,subtree:!0}),s=!0),a.add(n,e,r)}function i(n,e){var o=t.querySelectorAll(n);return o.length&&(r(e)||Array.prototype.every.call(o,function(n){return!n.querySelector(e)}))}function u(n,e){var t;n.forEach||(n=[n]),!r(e)&&Array.isArray(e)&&(e=e.join(","));var u=new h(function(r,u){function c(){s.forEach(function(n){n()})}var f=[],s=[];n.forEach(function(n){var t,r;i(n,e)||(t=new h(function(t){o(n,e,t),r=function(){a.remove(n,e,t)},s.push(r)}),f.push(t))}),h.all(f).then(c).then(r,u),t=function(){c(),u()}});return u.dismiss=t,u}var c,a,f=e.MutationObserver,s=!1,h=e.Promise;return f&&h?(a=new n,c=new f(function(n){a.forEach(function(n,e,t){i(t,e)&&(n.forEach(function(n){n()}),a.remove(t,e))})}),u):void 0}(u,n,c),f=function(n,e,t){function r(n,e){a||(i.observe(t,{attributes:!0,childList:!0,subtree:!0}),a=!0),u.add(n,e)}function o(n){var e;n.forEach||(n=[n]);var o=new f(function(o,i){function c(){s.forEach(function(n){n()})}var a=[],s=[];n.forEach(function(n){var e,o;t.querySelector(n)&&(e=new f(function(e){r(n,e),o=function(){u.remove(n,e)}}),a.push(e),s.push(o))}),f.all(a).then(c).then(o,i),e=function(){c(),i()}});return o.dismiss=e,o}var i,u,c=e.MutationObserver,a=!1,f=e.Promise;return c&&f?(u=new n,i=new c(function(n){u.forEach(function(n,e){t.querySelector(e)||(n.forEach(function(n){n()}),u.remove(e))})}),o):void 0}(u,n,c),s=function(n,e){return!(!n||!e)}(a,f),h=function(n,e){function t(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){e.setTimeout(function(){r=!0})}),t}(c,n),l=function(n,e,t,r,o,i,u){function c(n,e){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,requireUpdate:e,hasNone:null}:n})}function a(n){var e;return e=n.map(function(n){var e;return n.requireUpdate?(e=new o(n.selector),s.push(function(){e.dismiss()})):e=f.resolve(),e.then(function(){var e=new r(n.selector,n.hasNone);return s.push(function(){e.dismiss()}),e})}),f.all(e)}var f=u.Promise,s=[];return function(r){var o,f="isInitial"in r?r.isInitial:i()===!1,h="threshold"in r?r.threshold:1e3;t.push({start:{key:r.key,isInitial:f,threshold:h,timestamp:f?0:u.performance.now()}}),s.forEach(function(n){n()}),s.splice(0,s.length),r.ready&&e&&(o=c(r.ready,!f),a(o).then(function(){n({key:r.key})}))}}(i,s,t,a,f,h,n),p=function(n){return function(e){n.push({subscribe:e})}}(t),d=function(n,e,t,r,o,i){var u=function(){};return{start:n?o:u,end:n?r:u,addReporter:n?e:u,delegateTo:n?t:u,subscribe:n?i:u}}(e,r,o,i,l,p),window["browser-metrics"]=d,window.define&&window.define("internal/browser-metrics",function(){return d})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
define("internal/browser-metrics-aa-beacon",function(){var n={};return n=function(n){function e(n,e){Object.keys(e).forEach(function(r){n[r]=e[r]})}var r=[],t=[];return n.addUrlCleaner=function(n){t.push(n)},n.cleanUrl=function(n){return t.reduce(function(e,r){var t=r(n);return t.length>e.length?t:e},"")},n.addReportMarshaller=function(n){r.push(n)},n.beacon=function(n){var t={};r.forEach(function(r){var a=r(n);"object"==typeof a&&e(t,a)});var a={name:"browser.metrics.navigation",properties:t};AJS.EventQueue.push(a)},n}(n)});;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={},i={};n=function(n){var r=window;return r}(n),r=function(n,r){var i=r.WRM;return i}(r,n),i=function(n,r,i){function t(){u===c&&o&&(o(),o=null)}var u=0,c=0,o=null,e={install:function(n){u+=1,n(function(){c+=1,t()})}};return r["browser-metrics-plugin"]=e,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},t()})}),n}(i,n,r)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a={},o={},d={},t={};a=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.init=o,e}(a,i,e),o=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return i}(o),d=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=o(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=o(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.init=d,e}(d,i,e,o),t=function(e,i,a){return i.init(),a.init(),e}(t,a,d)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-panel.soy' */
// This file was automatically generated from devstatus-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }


JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon';
}


JIRA.Templates.DevStatus.connectionProblemAsWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsWarning.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsWarning';
}


JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages = function(opt_data, opt_ignored) {
  return '' + (((! opt_data.errorInstances || opt_data.errorInstances.length == 0) && (! opt_data.notConfiguredInstances || opt_data.notConfiguredInstances.length == 0)) ? '<p class="connection-error">' + soy.$$filterNoAutoescape("JIRA is having difficulty contacting the applications that supply development status information.") + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : ((opt_data.errorInstances.length > 0) ? '<p class="connection-error">' + JIRA.Templates.DevStatus.connectionProblemMultipleInstances({instances: opt_data.errorInstances}) + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : '') + ((opt_data.notConfiguredInstances && opt_data.notConfiguredInstances.length > 0) ? '<p class="config-errors">' + JIRA.Templates.DevStatus.configProblem(opt_data) + '</p>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages.soyTemplateName = 'JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages';
}


JIRA.Templates.DevStatus.contactAdmin = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$filterNoAutoescape(AJS.format("If this condition persists, please contact your {0}JIRA administrators{1}.",opt_data.showContactAdminForm ? '<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">' : '',opt_data.showContactAdminForm ? '</a>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.contactAdmin.soyTemplateName = 'JIRA.Templates.DevStatus.contactAdmin';
}


JIRA.Templates.DevStatus.connectionProblem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.adminError) {
    output += JIRA.Templates.DevStatus.connectionProblemAdminError(opt_data);
  } else {
    output += '<p class="connection-error">' + ((! opt_data.instances || opt_data.instances.length == 0) ? soy.$$filterNoAutoescape("JIRA is having difficulty contacting the applications that supply development status information.") : JIRA.Templates.DevStatus.connectionProblemMultipleInstances(opt_data)) + ' ';
    var contactAdminAnchor__soy57 = '<a id="contact-admin" href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">';
    output += soy.$$filterNoAutoescape(AJS.format("If this condition persists, please contact your {0}JIRA administrators{1}.",opt_data.showContactAdminForm ? contactAdminAnchor__soy57 : '',opt_data.showContactAdminForm ? '</a>' : '')) + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblem.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblem';
}


JIRA.Templates.DevStatus.connectionProblemAdminError = function(opt_data, opt_ignored) {
  var output = '<p class="connection-error admin-error">' + soy.$$escapeHtml(opt_data.adminError.message) + '</p><p class="configure-applinks-link"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">' + soy.$$escapeHtml("Configure Application Links") + '</a></p>';
  if (opt_data.adminError.details) {
    output += '<p class="connection-error"><a id="replace-text-trigger" data-replace-text="' + soy.$$escapeHtml("Hide error details") + '" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">' + soy.$$escapeHtml("Show error details") + '</a></p><div id="expander-with-replace-text-content" class="aui-expander-content admin-error-details"><ul>';
    var detailList79 = opt_data.adminError.details;
    var detailListLen79 = detailList79.length;
    for (var detailIndex79 = 0; detailIndex79 < detailListLen79; detailIndex79++) {
      var detailData79 = detailList79[detailIndex79];
      output += '<li>' + soy.$$escapeHtml(detailData79) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAdminError.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAdminError';
}


JIRA.Templates.DevStatus.configProblem = function(opt_data, opt_ignored) {
  var output = '';
  var servers__soy86 = opt_data.notConfiguredInstances;
  output += '<span class="description">';
  var server0__soy88 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[0]});
  if (servers__soy86.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format("Couldn\x27\x27t read data from {0}.",server0__soy88));
  } else {
    var server1__soy96 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[1]});
    if (servers__soy86.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format("Couldn\x27\x27t read data from {0} and {1}.",server0__soy88,server1__soy96));
    } else {
      var server2__soy104 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[2]});
      output += (servers__soy86.length == 3) ? soy.$$filterNoAutoescape(AJS.format("Couldn\x27\x27t read data from {0}, {1}, and {2}.",server0__soy88,server1__soy96,server2__soy104)) : soy.$$filterNoAutoescape(AJS.format("Couldn\x27\x27t read data from {0}, {1}, {2}, and {3} other {3,choice,1#application|1\x3capplications}.",server0__soy88,server1__soy96,server2__soy104,servers__soy86.length - 3));
    }
  }
  output += '</span> <span class="hints">';
  var aOpenLearnMore__soy115 = '<a href="https://confluence.atlassian.com/x/OQNwGg" target="_blank">';
  var aOpenApplinks__soy117 = '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">';
  var aClose__soy121 = '</a>';
  output += soy.$$filterNoAutoescape(AJS.format("Learn {0}about this issue{1} or go to {2}application links{3} to fix it.",aOpenLearnMore__soy115,aClose__soy121,aOpenApplinks__soy117,aClose__soy121)) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.configProblem.soyTemplateName = 'JIRA.Templates.DevStatus.configProblem';
}


JIRA.Templates.DevStatus.connectionProblemMultipleInstances = function(opt_data, opt_ignored) {
  var output = '';
  var instance0__soy127 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[0]});
  if (opt_data.instances.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format("JIRA is having difficulty contacting {0}.",instance0__soy127));
  } else {
    var instance1__soy135 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[1]});
    if (opt_data.instances.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format("JIRA is having difficulty contacting {0} and {1}.",instance0__soy127,instance1__soy135));
    } else {
      var instance2__soy143 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[2]});
      output += soy.$$filterNoAutoescape(AJS.format("JIRA is having difficulty contacting {0}, {1}, {3,choice,0#and {2}|1#{2}, and another application|1\x3c{2}, and {3} more applications}.",instance0__soy127,instance1__soy135,instance2__soy143,opt_data.instances.length - 3));
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemMultipleInstances.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemMultipleInstances';
}


JIRA.Templates.DevStatus.connectionProblemSingleInstance = function(opt_data, opt_ignored) {
  return '<span class="instance" data-name="' + soy.$$escapeHtml(opt_data.instance.name) + '"><a href="' + soy.$$escapeHtml(opt_data.instance.baseUrl) + '" title="' + soy.$$escapeHtml(opt_data.instance.name) + '">' + soy.$$escapeHtml(opt_data.instance.name) + '</a></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemSingleInstance.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemSingleInstance';
}


JIRA.Templates.DevStatus.labsOnOff = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.isOptedInByAdmin && ! opt_data.isOptedIn) ? '<div class="on-off-panel aui-message closeable"><h2 class="title">' + soy.$$escapeHtml("JIRA Labs") + '</h2><p>' + soy.$$escapeHtml("The new way to see your related commits and pull requests as they occur.") + '</p><span class="aui-icon icon-close labs-close" role="button" tabindex="0" title="' + soy.$$escapeHtml("Close the JIRA Labs panel") + '"></span><div class="aui-group"><div class="aui-item"><button class="toggle-labs aui-button" title="' + soy.$$escapeHtml("Enable JIRA Labs for development panel") + '">' + soy.$$escapeHtml("Enable Labs") + '</button></div></div>' : '<div class="on-off-panel opted-in"><span class="feedback-link"><a href="#" title="' + soy.$$escapeHtml("Give Atlassian feedback about the JIRA development panel") + '">' + soy.$$escapeHtml("Feedback") + '</a></span>' + ((! opt_data.isOptedInByAdmin) ? ' | <span class="disable-labs"><a class="toggle-labs" href="#" title="' + soy.$$escapeHtml("Disable JIRA Labs for the development panel") + '">' + soy.$$escapeHtml("Disable Labs") + '</span></span>' : '') + '</div>');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.labsOnOff.soyTemplateName = 'JIRA.Templates.DevStatus.labsOnOff';
}


JIRA.Templates.DevStatus.tryLabs = function(opt_data, opt_ignored) {
  return '<span href="#" class="try-labs" title="' + soy.$$escapeHtml("Show the JIRA Labs panel") + '">' + soy.$$escapeHtml("Try Labs") + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.tryLabs.soyTemplateName = 'JIRA.Templates.DevStatus.tryLabs';
}


JIRA.Templates.DevStatus.lastUpdated = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastUpdated) ? '<dd class="sub-text' + ((opt_data.extraClass) ? ' ' + soy.$$escapeHtml(opt_data.extraClass) : '') + '">' + JIRA.Templates.DevStatus.transitionContainer({content: '<div>' + soy.$$escapeHtml(opt_data.text) + ' <time class="livestamp date user-tz allow-future" ' + ((opt_data.datetimeFormat) ? 'data-datetime-format="' + soy.$$escapeHtml(opt_data.datetimeFormat) + '" ' : '') + 'datetime="' + soy.$$escapeHtml(opt_data.lastUpdated) + '">$' + soy.$$escapeHtml(opt_data.lastUpdated) + '</time></div>'}) + '</dd>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.lastUpdated.soyTemplateName = 'JIRA.Templates.DevStatus.lastUpdated';
}


JIRA.Templates.DevStatus.transitionContainer = function(opt_data, opt_ignored) {
  return '<div class="rolling-container sliding-container"><div class="rolling-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.transitionContainer.soyTemplateName = 'JIRA.Templates.DevStatus.transitionContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-cta-dialog.soy' */
// This file was automatically generated from devstatus-cta-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Dialog == 'undefined') { JIRA.Templates.DevStatus.Dialog = {}; }


JIRA.Templates.DevStatus.Dialog.content = function(opt_data, opt_ignored) {
  var output = '<div class="jira-dialog-heading">' + ((opt_data.prompt) ? '<h2>' + soy.$$escapeHtml(opt_data.prompt) + '</h2>' : '') + '</div><div class="jira-dialog-content"><ul class="targets">';
  var remoteAppList10 = opt_data.remoteApps;
  var remoteAppListLen10 = remoteAppList10.length;
  for (var remoteAppIndex10 = 0; remoteAppIndex10 < remoteAppListLen10; remoteAppIndex10++) {
    var remoteAppData10 = remoteAppList10[remoteAppIndex10];
    output += '<li>' + JIRA.Templates.DevStatus.Dialog.remoteApp(remoteAppData10) + '</li>';
  }
  output += '</ul><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml("Cancel") + '</button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.content.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.content';
}


JIRA.Templates.DevStatus.Dialog.remoteApp = function(opt_data, opt_ignored) {
  return '<a class="target ' + ((opt_data.primary) ? 'primary' : '') + '" data-application-type="' + soy.$$escapeHtml(opt_data.applicationType) + '" href="' + soy.$$escapeHtml(opt_data.url) + '">' + ((opt_data.iconUrl) ? '<img class="application-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '">' : '<span class="application-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>') + '<div class="title" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</div><div class="base-url" title="' + soy.$$escapeHtml(opt_data.baseUrl) + '">' + soy.$$escapeHtml(opt_data.baseUrl) + '</div></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.remoteApp.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.remoteApp';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/common/devstatus-common.soy' */
// This file was automatically generated from devstatus-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Common == 'undefined') { JIRA.Templates.DevStatus.Common = {}; }


JIRA.Templates.DevStatus.Common.learnMoreLink = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.devToolsLearnMoreLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.devToolsLearnMoreLink) + '" class="learn-more-link" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Common.learnMoreLink.soyTemplateName = 'JIRA.Templates.DevStatus.Common.learnMoreLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-backbone-define', location = 'js/util/DevStatusBackboneDefine.js' */
if(Backbone&&!Backbone.define){Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor;ctor.prototype.name=name;cls.prototype=ctor.prototype;_.extend(cls,ctor);_.each(ctor.prototype,function(fn,fnName){if(typeof fn==="function"){fn.displayName=name+"."+fnName}});var context=window;var parts=name.split(".");_.each(parts,function(part,i){if(i===parts.length-1){context[part]=cls}else{context=context[part]==null?(context[part]={}):context[part]}});return cls}};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:event-publisher', location = 'js/util/EventPublisher.js' */
define("jira-development-status/util/event-publisher",function(){return{trigger:AJS.trigger}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-wrm', location = 'js/util/DevStatusWRM.js' */
define("jira-development-status/util/WRM",["underscore","jira-development-status/util/event-publisher"],function(d,g){var a="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources-ctx";var e="jira.devsummary.dialog-resources.wrm.load";var h=function(){return window.performance.now()};var f=function(i){var j=h();WRM.require([a],function(){b(j);i&&i()})};var c=function(i){var j=Math.round(h()-i);g.trigger("analyticsEvent",{name:e,data:{durationInMillis:j}})};var b=d.once(c);return{ANALYTIC_EVENT:e,requireDetailDialogResources:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-analytics.js' */
define("jira/dev-status/analytics",["require","exports"],function(b,e){var h=b("jira/util/events");var d=b("jira/util/events/types");var c=b("jira/util/data/meta");var f=b("jquery");var g=b("underscore");var i=".edit-permission-link";function a(){return !AJS.DarkFeatures.isEnabled("jira.plugin.devstatus.analytics.disabled")}e.Analytics={fireEvent:function(k,l){if(a()){var j="devstatus."+k;var m=(typeof l!=="object")?{}:l;AJS.trigger("analyticsEvent",{name:j,data:m})}},fireAgileDevStatusLinkClicked:function(){return e.Analytics.fireEvent("panel.agile.icon.clicked")}};e.LabsAnalytics={fireLabsEvent:function(j){var k=j?"on":"off";return e.Analytics.fireEvent("labs.toggle."+k)}};e.SummaryAnalytics={fireSummaryShownEvent:function(l,k,j,m){var o=l?"assignee":"nonassignee";var n=g.extend({issueType:k,issueStatus:j},m);return e.Analytics.fireEvent("summary.shown."+o,n)},fireSummaryClickedEvent:function(k,j){var m=c.get("fusion-analytics-new-context-link");var l=".clicked";if(m){c.set("fusion-analytics-new-context-link",undefined);l+=".newcontext"}return e.Analytics.fireEvent(k+".summary"+l,j)},fireDetailTabClicked:function(k,j){return e.Analytics.fireEvent(j+".detail."+k+".tab.clicked")}};e.BuildsAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("builds",j)},fireDetailProjectClicked:function(){return e.Analytics.fireEvent("builds.detail.project.clicked")},fireDetailPlanClicked:function(){return e.Analytics.fireEvent("builds.detail.plan.clicked")},fireDetailBuildClicked:function(){return e.Analytics.fireEvent("builds.detail.build.clicked")}};e.DeploymentsAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("deployments",j)},fireDetailProjectClicked:function(){return e.Analytics.fireEvent("deployments.detail.project.clicked")},fireDetailEnvironmentClicked:function(){return e.Analytics.fireEvent("deployments.detail.environment.clicked")},fireDetailReleaseClicked:function(){return e.Analytics.fireEvent("deployments.detail.release.clicked")}};e.CommitsAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("commits",j)},fireDetailRepoClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".repo.clicked")},fireDetailCommitClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".commit.clicked")},fireDetailTabClicked:function(j){return e.SummaryAnalytics.fireDetailTabClicked(j,"commits")},fireDetailFileExpandedClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".file.expanded.clicked")},fireDetailFilesExpandedClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".files.expanded.clicked")},fireDetailFileClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".file.clicked")},fireDetailReviewsShown:function(j){return e.Analytics.fireEvent("commits.detail."+j+".reviews.shown")},fireDetailReviewClicked:function(j){return e.Analytics.fireEvent("commits.detail."+j+".review.clicked")},fireDetailBranchesShown:function(j){return e.Analytics.fireEvent("commits.detail."+j+".branches.shown")},fireDetailCreateReviewClicked:function(k,j){return e.Analytics.fireEvent("commits.detail."+k+".review.create"+(j?".all":""))}};e.ReviewsAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("reviews",j)},fireDetailReviewClicked:function(){return e.Analytics.fireEvent("reviews.detail.review.clicked")}};e.BranchesAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("branches",j)},_fireDetailClickedEvent:function(k,j){return e.Analytics.fireEvent("branches.detail."+k+"."+j+".clicked")},_fireDetailClickedEventAssignable:function(k,l,j,m){if(typeof j!="undefined"&&typeof m!="undefined"){if(j){k+=".assignee"}else{k+=".nonassignee";if(m){k+=".assignable"}else{k+=".nonassignable"}}}this._fireDetailClickedEvent(l,k)},fireDetailRepoClicked:function(j){this._fireDetailClickedEvent(j,"repo")},fireDetailBranchClicked:function(j){this._fireDetailClickedEvent(j,"branch")},fireDetailPullRequestLozengeClick:function(j){this._fireDetailClickedEvent(j,"pullrequest.lozenge")},fireDetailReviewLozengeClick:function(j){this._fireDetailClickedEvent(j,"review.lozenge")},fireDetailTabClicked:function(j){return e.SummaryAnalytics.fireDetailTabClicked(j,"branches")},fireDetailCreatePullRequestClicked:function(k,j,l){this._fireDetailClickedEventAssignable("pullrequest.create",k,j,l)},fireDetailCreateReviewClicked:function(k,j,l){this._fireDetailClickedEventAssignable("review.create",k,j,l)}};e.PullRequestsAnalytics={fireSummaryClickedEvent:function(j){return e.SummaryAnalytics.fireSummaryClickedEvent("pullrequests",j)},fireDetailPullRequestClicked:function(j){return e.Analytics.fireEvent("pullrequests.detail."+j+".pullrequest.clicked")},fireDetailTabClicked:function(j){return e.SummaryAnalytics.fireDetailTabClicked(j,"pullrequests")}};e.LearnMoreAnalytics={fireLearnMoreEvent:function(j,k){return e.Analytics.fireEvent("learnmore."+j,k)}};e.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(j,l){l=(typeof l!=="object")?{}:l;var k=f.extend({issueStatus:this.issueDetails.status,issueType:this.issueDetails.type},l);return e.Analytics.fireEvent("createbranch."+j+"."+(this.issueDetails.isAssignee?"assignee":"nonassignee"),k)},_populateIssueDetails:function(j){this.issueDetails={status:""+j.data("issueStatus"),type:""+j.data("issueType"),isAssignee:j.data("isAssignee")}},_initHandler:function(l,k,n,m){if(n&&k.not(document).is(n)){var j=this;k.find(m).on("simpleClick",function(){var o=f(this);j._fireCreateBranchEvent(o)})}},_fireCreateBranchEvent:function(k){this._populateIssueDetails(k);var j="click";var l=c.get("fusion-analytics-new-context-link");if(l){c.set("fusion-analytics-new-context-link",undefined);j+=".newcontext"}this.fireCreateBranchEvent(j)},initialize:function(m,l,k){if(a()){var j=this;h.bind(d.NEW_CONTENT_ADDED,g.bind(function(o,n){this._initHandler(o,n,m,l)},this));h.bind("GH.DetailView.updated",g.bind(function(n){this._initHandler(n,f(m),m,l)},this));f(l).on("simpleClick",function(){var n=f(this);j._fireCreateBranchEvent(n)});f(document).on("click","#"+k+" .jira-dialog-content .target",function(){var n=f(this);j.fireCreateBranchEvent("dialog.click",{title:n.find(".title").attr("title"),applicationType:n.data("applicationType")})});f(document).on("click","#"+k+" .jira-dialog-content button.cancel",function(){j.fireCreateBranchEvent("dialog.cancel")});f(document).on("click",".cta-tooltip .cta-learn-more-link",function(){e.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}}};e.AdminAnalytics={fireAdminEvent:function(j,k){return e.Analytics.fireEvent("admin."+j,k)},initialize:function(){if(a()){var j=this,k=f("#project-config-panel-dev-status");k.find(i).on("click",function(){j.fireAdminEvent("editpermissionlink.config."+(f("ul.permissions-list li.devstatus-admin-permission-item").length>0?"withpermissions":"nopermissions"))});k.find(".learn-more-link").on("click",function(){e.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")});k.find("#project-config-applinks-connect").on("click",function(){j.fireAdminEvent("connect")});k.find(".devstatus-admin-connect-button-option").on("click",function(){var l=f(this).data("key")||"unknown";j.fireAdminEvent("connect."+l)})}}};e.AdminSummaryAnalytics={initialize:function(){if(a()){f("#project-config-webpanel-devstatus-admin-summary-panel").find(i).on("click",function(){e.AdminAnalytics.fireAdminEvent("editpermissionlink.summary.nopermissions")})}}}});(function(a){AJS.namespace("JIRA.DevStatus.AdminAnalytics",null,a.AdminAnalytics);AJS.namespace("JIRA.DevStatus.AdminSummaryAnalytics",null,a.AdminSummaryAnalytics);AJS.namespace("JIRA.DevStatus.Analytics",null,a.Analytics);AJS.namespace("JIRA.DevStatus.BranchesAnalytics",null,a.BranchesAnalytics);AJS.namespace("JIRA.DevStatus.BuildsAnalytics",null,a.BuildsAnalytics);AJS.namespace("JIRA.DevStatus.CommitsAnalytics",null,a.CommitsAnalytics);AJS.namespace("JIRA.DevStatus.CtaDialogAnalytics",null,a.CtaDialogAnalytics);AJS.namespace("JIRA.DevStatus.DeploymentsAnalytics",null,a.DeploymentsAnalytics);AJS.namespace("JIRA.DevStatus.LabsAnalytics",null,a.LabsAnalytics);AJS.namespace("JIRA.DevStatus.LearnMoreAnalytics",null,a.LearnMoreAnalytics);AJS.namespace("JIRA.DevStatus.PullRequestsAnalytics",null,a.PullRequestsAnalytics);AJS.namespace("JIRA.DevStatus.ReviewsAnalytics",null,a.ReviewsAnalytics);AJS.namespace("JIRA.DevStatus.SummaryAnalytics",null,a.SummaryAnalytics)})(require("jira/dev-status/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/AnalyticsModel.js' */
define("jira/devstatus/analytics-model",["backbone","underscore"],function(b,a){return b.Model.extend({TO_ANALYTIC_KEY_OVERRIDE:{repository:"commit"},properties:["issue","summary"],initialize:function(c){this.devStatusContainer=c.devStatusContainer;this.devStatusData=c.devStatusData;this._getAllAnalyticData()},getIssue:function(){return this.get("issue")},getSummary:function(){return this.get("summary")},_getAllAnalyticData:function(){this.set("issue",this._getAnalyticIssueData());this._initListenerToData()},_getAnalyticIssueData:function(){return{isAssignee:this.devStatusContainer.data("is-assignee"),isAssignable:this.devStatusContainer.data("is-assignable"),issueStatus:this.devStatusContainer.data("issue-status"),issueType:this.devStatusContainer.data("issue-type")}},_getAnalyticSummaryData:function(e){var c=this;var d={};a.each(e.summary,function(g,f){d[c.TO_ANALYTIC_KEY_OVERRIDE[f]||f]=g.overall.count>0});return d},_initListenerToData:function(){var c=this;this.devStatusData.on("requestSuccess",function(){c.set("summary",c._getAnalyticSummaryData(c.devStatusData.get("aggregatedData")))})}})});Backbone.define("JIRA.DevStatus.AnalyticsModel",require("jira/devstatus/analytics-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DateUtils.js' */
define("jira/dev-status/util/date",["jquery"],function(a){return{addTooltip:function(c){var b=c.find("time.livestamp");b.livestamp();b.each(function(){var f=a(this);var e=f.attr("datetime");var g=isNaN(e)?e:+e;var d=moment(g).zone(g);if(!d.isValid()){d=moment(g)}f.attr("title",d.format(JIRA.DevStatus.Date.format))})},format:"LLL"}});(function(a){AJS.namespace("JIRA.DevStatus.Date",null,a)})(require("jira/dev-status/util/date"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/Listeners.js' */
define("jira/devstatus/util/listeners",["underscore"],function(a){return Class.extend({init:function(){this._listening=[]},startListening:function(b,d,f,c){var e={start:function(){b.on(d,f,c);return this},stop:function(){b.off(d,f,c);return this}};this._listening.push(e.start())},stopListening:function(){a.each(this._listening,function(b){b.stop()});this._listening=[]}})});Backbone.define("JIRA.DevStatus.Util.Listeners",require("jira/devstatus/util/listeners"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusNavigation.js' */
define("jira-development-status/util/navigate",["underscore"],function(a){return{getUrl:function(){return window.location.href},reload:function(){a.defer(function(){window.location.reload()})},navigate:function(b){a.defer(function(){window.location=b})},redirectToLogin:function(){this.navigate(AJS.contextPath()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}});(function(a){AJS.namespace("JIRA.DevStatus.Navigate",null,a)})(require("jira-development-status/util/navigate"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusURLUtils.js' */
define("jira/dev-status/util/url",["jquery","underscore"],function(b,a){return{getDetailDialogParam:function(){var c=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl());var d=parseUri(c);return d&&d.queryKey&&d.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(e){var c=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl());var d=parseUri(c);d.queryKey.devStatusDetailDialog=encodeURIComponent(e);return this.createUrlFromParsedUri(d)},getCreateReviewDetailUrl:function(c){return this.getUrlWithDetailDialogParam("create-review-"+c)},isCreateReviewDetailDialogLink:function(c){return c&&c.lastIndexOf&&c.lastIndexOf("create-review-",0)===0},getCreateReviewDetailDialogApplicationType:function(c){return c.substring("create-review-".length)},_removeKickAssIHashFromUrl:function(c){return c.replace("i#","")},createUrlFromParsedUri:function(d){var e=[];b.each(d.queryKey,function(f,g){if(a.isObject(g)){b.each(g,function(h,i){e.push(f+"="+i)})}else{e.push(f+"="+g)}});var c="";if(d.protocol){c+=d.protocol+"://"}if(d.authority){c+=d.authority}if(d.path){c+=d.path}if(e.length>0){c+="?"+e.join("&")}if(d.anchor){c+="#"+d.anchor}return c}}});(function(a){AJS.namespace("JIRA.DevStatus.URL",null,a)})(require("jira/dev-status/util/url"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:fusion-widget-common-clientside', location = 'templates/fusion-widget/fusion-widget-common.soy' */
// This file was automatically generated from fusion-widget-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.FusionWidget.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.FusionWidget == 'undefined') { JIRA.Templates.FusionWidget = {}; }
if (typeof JIRA.Templates.FusionWidget.Common == 'undefined') { JIRA.Templates.FusionWidget.Common = {}; }


JIRA.Templates.FusionWidget.Common.branches = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#branch|1\x3cbranches}",'<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.branches.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.branches';
}


JIRA.Templates.FusionWidget.Common.buildsText = function(opt_data, opt_ignored) {
  var output = '';
  var tagStart__soy6 = '<span class="count">';
  var tagEnd__soy7 = '</span>';
  output += (opt_data.successfulBuildCount > 0) ? (opt_data.failedBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing",tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds}",tagStart__soy6,opt_data.successfulBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds}",tagStart__soy6,opt_data.count,tagEnd__soy7)) : (opt_data.failedBuildCount > 0) ? (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing",tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing",tagStart__soy6,opt_data.count,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#build|1\x3cbuilds} incomplete",tagStart__soy6,opt_data.count,tagEnd__soy7));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsText';
}


JIRA.Templates.FusionWidget.Common.buildsIconClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.failedBuildCount > 0) ? 'aui-iconfont-error' : (opt_data.successfulBuildCount > 0) ? 'aui-iconfont-approve' : (opt_data.unknownBuildCount > 0) ? 'aui-iconfont-devtools-task-cancelled' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsIconClass.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsIconClass';
}


JIRA.Templates.FusionWidget.Common.commits = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#commit|1\x3ccommits}",'<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.commits.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.commits';
}


JIRA.Templates.FusionWidget.Common.deployments = function(opt_data, opt_ignored) {
  var output = '';
  var instanceOne__soy43 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[0], showProjects: opt_data.showProjects});
  var instanceTwo__soy47 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[1], showProjects: opt_data.showProjects});
  var instanceThree__soy51 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[2], showProjects: opt_data.showProjects});
  output += soy.$$filterNoAutoescape(AJS.format("{5}Deployed{6} to {0,choice,1#{1}|2#{1} and {2}|3#{1}, {2} and {3}|3\x3c{1}, {2}, {3}, and {4} more}",opt_data.successfulCount,instanceOne__soy43,instanceTwo__soy47,instanceThree__soy51,opt_data.successfulCount - 3,opt_data.anchorStart,opt_data.anchorEnd));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deployments.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deployments';
}


JIRA.Templates.FusionWidget.Common.deploymentsInstance = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment) ? '<span class="environment" ' + ((opt_data.showProjects) ? 'title="' + soy.$$escapeHtml(AJS.format("Project: {0}",opt_data.environment.project)) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.environment.title) + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deploymentsInstance.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deploymentsInstance';
}


JIRA.Templates.FusionWidget.Common.pullRequestsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#pull request|1\x3cpull requests}",'<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsText';
}


JIRA.Templates.FusionWidget.Common.reviewsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0}{1}{2} {1,choice,1#review|1\x3creviews}",'<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsText';
}


JIRA.Templates.FusionWidget.Common.reviewsState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.stateLozenge({isSubtle: opt_data.isSubtle, lozengeClass: opt_data.stateClasses[opt_data.state], text: opt_data.stateText[opt_data.state], classes: opt_data.classes, tooltip: opt_data.tooltip, tooltipClass: opt_data.tooltipClass, tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsState.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsState';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: "OPEN", MERGED: "MERGED", DECLINED: "DECLINED"}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: "Under Review", MERGED: "MERGED", DECLINED: "DECLINED"}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-current', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: "Open", CLOSED: "Closed", DRAFT: "Draft", DEAD: "Abandoned", REJECTED: "Rejected", UNKNOWN: "Unknown", APPROVAL: "Approval", SUMMARIZE: "Summarize"}});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-complete', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: "Under Review", CLOSED: "Closed", DRAFT: "Draft", DEAD: "Abandoned", REJECTED: "Rejected", UNKNOWN: "Unknown", APPROVAL: "Under Review", SUMMARIZE: "Under Review"}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.stateLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-overflow ' + ((opt_data.isSubtle) ? 'aui-lozenge-subtle' : '') + ' ' + soy.$$escapeHtml(opt_data.lozengeClass) + ' ' + ((opt_data.tooltip) ? soy.$$escapeHtml(opt_data.tooltipClass) : '') + ' ' + ((opt_data.classes) ? soy.$$escapeHtml(opt_data.classes) : '') + '"' + ((opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.stateLozenge.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.stateLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-instance-picker-view', location = 'js/viewissue/dialog/InstancePickerView.js' */
define("jira/devstatus/instance-picker-view",["backbone","jquery","underscore","jira-development-status/util/navigate"],function(d,b,a,c){return d.View.extend({ARROW_KEY_UP_CODE:38,ARROW_KEY_DOWN_CODE:40,template:JIRA.Templates.DevStatus.Dialog.content,events:{"keydown .jira-dialog-content":"_onTargetKeyboardSelect","focus .target":"_onTargetFocus"},initialize:function(e){this.currentSelected=null;this.link=e.activeTrigger;this.cta=e.cta;this.processTargets=e.processTargets;this.issueId=e.issueId;this.uniqueResultAction=e.uniqueResultAction||function(f){c.navigate(f.url)}},render:function(){var f=this._getIssueId(this.link),e=b.Deferred();this._fetchTargets(this.cta,f).done(a.bind(function(g){if(this.processTargets){g.remoteApps=this.processTargets(g.remoteApps)}var i=this._isUniqueResult(g);if(i){this.uniqueResultAction(i)}else{var h=b(this.template(g));e.resolve(h)}},this)).fail(function(g){e.resolve(g)});return e.promise()},_fetchTargets:function(f,g){var e=b.Deferred();b.ajax({url:contextPath+"/rest/dev-status/1.0/issue/targets?cta="+encodeURIComponent(f)+"&issueId="+encodeURIComponent(g)}).done(function(h){e.resolve(h)}).fail(function(i,h){e.reject(JIRA.SmartAjax.buildDialogErrorContent(i).html())});return e.promise()},_getIssueId:function(e){return this.issueId||(e&&e.data("issueid"))||b("#devstatus-container").data("issue-id")},_isUniqueResult:function(e){return e.remoteApps.length===1&&e.remoteApps[0]},_toggleEntry:function(h,f,e){var g=h.eq(f);e&&g.focus();g.addClass("selected");this.currentSelected=g},_removeSelected:function(){if(this.currentSelected){this.currentSelected.removeClass("selected");this.currentSelected=null}},_onTargetKeyboardSelect:function(i){if(i.type==="keydown"){var h=0;if(i.keyCode===this.ARROW_KEY_UP_CODE){h=-1}else{if(i.keyCode===this.ARROW_KEY_DOWN_CODE){h=1}}if(h!==0){i.preventDefault();var g=this.$el.find(".target");var f=g.index(this.$el.find(".selected"));if(f!==-1){g.eq((f+h)%g.size()).focus()}}}},_onTargetFocus:function(f){this._removeSelected();this._toggleEntry(b(f.target),0,false)}})});Backbone.define("JIRA.DevStatus.InstancePickerView",require("jira/devstatus/instance-picker-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/dialog/CreateBranchFormDialog.js' */
define("jira/devstatus/create-branch-form-dialog",["backbone","jquery","require","jira/dialog/form-dialog","jira-development-status/util/WRM"],function(e,d,a,b,c){return e.View.extend({initialize:function(f){AJS.namespace("JIRA.DevStatus.CtaDialog");this.parentContainerSelector=f.parentContainerSelector;this.panelSelector=f.panelSelector;this.linkSelector=f.linkSelector;this.dialogId="devstatus-cta-dialog";JIRA.DevStatus.CtaDialogAnalytics.initialize(this.parentContainerSelector,this.linkSelector,this.dialogId);this._initFormDialog()},_initFormDialog:function(){var f=this;var g=JIRA.DevStatus.CtaDialog.dialog=new b({id:this.dialogId,width:560,content:function(i){var h=this;c.requireDetailDialogResources(function(){var j=a("jira/devstatus/instance-picker-view");h.pickerView=new j({el:h.$popup,activeTrigger:h.$activeTrigger,cta:f._getCta(h.$activeTrigger)});h.pickerView.render().always(function(k){i(k);d(g.$popup).find(".target").eq(0).focus();JIRA.DevStatus.CtaDialogAnalytics.fireCreateBranchEvent("dialog.open")})})},trigger:this.linkSelector,autoClose:true})},_getCta:function(i){var h=i.data("cta");if(h){return h}else{var g=i.attr("href"),f=g&&/\#([a-zA-Z\.]+)/.exec(g);return f&&f[1]}}})});Backbone.define("JIRA.DevStatus.CreateBranchFormDialog",require("jira/devstatus/create-branch-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusModule.js' */
define("jira/devstatus/dev-status-module",["backbone","jquery","require","underscore","jira/util/data/meta"],function(e,d,b,a,c){return e.Model.extend({initialize:function(f){a.defaults(this,f);this._listeners=new JIRA.DevStatus.Util.Listeners();var g=b("jira/devstatus/create-branch-form-dialog");this.createBranchFormDialog=new g(f);this.devSummaryJson=null;this.triggerHelpTipShown=false;this.aitHelptip=null;this._initFocusHandler()},initializePanel:function(f){this._listeners.stopListening();this._renderedData=null;this._getContainers(f);this.labsOptIn=JIRA.DevStatus.Labs.LabsOptInModel.createFromDOM(this.parentContainer);f.showTooltip=f.showTooltip&&!(this.labsOptIn.isAllowed()&&!(this.labsOptIn.isOptedIn()||this.labsOptIn.isDismissed()));this._createCreateBranchView(f);this.devSummaryJson=this.devStatusContainer.find(".dev-summary.json-blob").data("json");this._initLabsOptInView();this._initTryLabsView();this._createDevStatusData(f);this._createAnalyticsModel(f);this._createSummaryViews(f);this._setupDataEventHandlers();this.devStatusPanelVisibilityToggler=f.devStatusPanelVisibilityToggler;if(!f.phaseTwoDisabled){this._startDevStatus()}else{this._postRender(false,true)}this.labsOptIn.on("change:optedIn",this._onChangeLabsOptIn,this);if(this.labsOptIn.isAllowed()&&this.labsOptIn.isOptedIn()){this._onChangeLabsOptIn(this.labsOptIn,true)}return this},_createCreateBranchView:function(g){var f=b("jira/devstatus/create-branch-view");this.createBranchView=new f({el:this.createBranchContainer,showTooltip:g.showTooltip})},_createDevStatusData:function(f){this.devStatusData=new JIRA.DevStatus.DevStatusData({issueId:this.devStatusContainer.data("issue-id"),issueKey:this.devStatusContainer.data("issue-key")})},_createSummaryViews:function(f){var h=this;var g=this.devStatusContainer.data();this._summaryModules=a.clone(this.statusPanelContainer.find(".status-panel").map(function(){var i=d(this);return new JIRA.DevStatus[i.data("module")]({dataAttrs:g,el:i,labsOptIn:h.labsOptIn,analyticsModel:h.analyticsModel})}));this._errorModule=new JIRA.DevStatus.SummaryErrorModule({el:this.messagePanelContainer,dataAttrs:g})},_createAnalyticsModel:function(f){this.analyticsModel=new JIRA.DevStatus.AnalyticsModel({devStatusContainer:this.devStatusContainer,devStatusData:this.devStatusData})},_getContainers:function(f){this.devStatusContainer=f.container;this.parentContainer=f.container.closest(this.parentContainerSelector);this.createBranchContainer=f.container.find(this.linkSelector);this.statusPanelContainer=f.container.find(this.statusPanelSelector);this.headerContainer=this.parentContainer.find(f.headerSelector);this.messagePanelContainer=f.container.find(".message-panel")},_onLoadingStarted:function(){this._startLoadingModuleData()},_onLoadingSuccess:function(h,f,i){var g=this.devStatusData.get("aggregatedData");this._renderModules({success:true,renderData:g});this._postRender(!f,i,g)},_onLoadingFailure:function(){this._renderModules({success:false});this._postRender(false,true)},_setupDataEventHandlers:function(){this._listeners.startListening(this.devStatusData,"beforeRequest",this._onLoadingStarted,this);this._listeners.startListening(this.devStatusData,"requestSuccess",this._onLoadingSuccess,this);this._listeners.startListening(this.devStatusData,"requestFail",this._onLoadingFailure,this)},_startDevStatus:function(){var f=!this.devSummaryJson||this.devSummaryJson.isStale===true;if(this.devSummaryJson){this.devStatusData.setAggregateData(this.devSummaryJson.cachedValue,true,!f)}if(f){this._startLoadingModuleData();this.devStatusData.retrieveAggregateData()}},_initFocusHandler:function(){var f=JIRA.DevStatus.DevStatusModule.MAX_REFRESH_WINDOW;d(window).on("focus",a.throttle(a.bind(this.refreshSummaryData,this),f,{trailing:false}))},refreshSummaryData:function(){this.devStatusData&&this.devStatusData.retrieveAggregateData()},_onChangeLabsOptIn:function(f,g){if(g===true){}else{}},_initLabsOptInView:function(){this.labsOptInView=new JIRA.DevStatus.Labs.LabsOptInView({el:this.parentContainer.find(".labs-on-off-container"),labsOptIn:this.labsOptIn}).render()},_initTryLabsView:function(){var f=d('<div class="try-labs-container"></div>').appendTo(this.headerContainer);new JIRA.DevStatus.Labs.TryLabsView({el:f,labsOptIn:this.labsOptIn}).render()},_postRender:function(l,g,k){var m=this._isAnySummaryViewVisibleOnPanel()||this._isAnyErrorViewVisible();var n=this;if(m){var j=this.analyticsModel.getIssue();JIRA.DevStatus.SummaryAnalytics.fireSummaryShownEvent(j.isAssignee,j.issueType,j.issueStatus,this.analyticsModel.getSummary());this._openDetailDialogUrlLink()}this._togglePanelEmptyStatus(!this._isAnySummaryViewVisibleOnPanel());var f=this.parentContainer;function h(){if(g){f.addClass("js-animation-completed");n._attachAutomaticTransitionsHelpTip(k)}}var i=m||(this.createBranchContainer.size()>0);if(this.devStatusPanelVisibilityToggler&&(f.is(":visible")!==i)){this.devStatusPanelVisibilityToggler(this.parentContainer,i,l,h);if(!i&&this.aitHelptip&&this.aitHelptip.isVisible()){this.aitHelptip.hide()}}else{h()}},_attachAutomaticTransitionsHelpTip:function(g){var f=this.parentContainer.is(":visible");var h=this._shouldRenderAITTooltip(g);if(!h&&this.aitHelptip&&this.aitHelptip.isVisible()){this.aitHelptip.hide()}else{if(h&&!this.triggerHelpTipShown&&JIRA.DevStatus.showAITTooltip&&f){a.defer(a.bind(function(){this.aitHelptip=new AJS.HelpTip({id:"automaticTransitionDevSummaryTooltip",title:"Automate your status updates",bodyHtml:JIRA.Templates.DevStatus.Tooltip.automaticTransitions({aitHelpLinkUrl:this.devStatusContainer.data("ait-help-url-json")}),anchor:"#viewissue-devstatus-panel_heading .toggle-title",isSequence:true,callbacks:{init:function(){d("#trigger-docs-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"devstatus.automatic.transitions.learn.more.clicked",data:{}})})}},inlineDialogOpts:{width:400}});AJS.HelpTip.Manager.showSequences()},this));this.triggerHelpTipShown=true}}},_shouldRenderAITTooltip:function(f){if(f){return f.summary.branch.overall.count>0||f.summary.repository.overall.count>0||f.summary.pullrequest.overall.count>0||f.summary.review.overall.count>0}return false},_getModuleByType:function(f){return a.find(this._summaryModules,function(g){return g.data&&g.data.getType&&a.isEqual(g.data.getType(),f)})},_openDetailDialogUrlLink:function(){var f=c.get("fusion-open-detail-dialog");if(f){var h;if(JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(f)){h=this._getModuleByType("repository")}else{h=this._getModuleByType(f);if(h){c.set("fusion-open-detail-dialog",undefined)}}if(h){var g=h.view;if(g&&g.isVisible()){c.set("fusion-analytics-new-context-link",true);g.getSummaryLink().click()}}}},_togglePanelEmptyStatus:function(f){if(this.statusPanelContainer){this.statusPanelContainer.toggleClass("empty-status",f)}},_isAnySummaryViewVisibleOnPanel:function(){return !!a.find(this._summaryModules,function(f){return f.isViewVisible()})},_isAnyErrorViewVisible:function(){return this._errorModule.isViewVisible()},_renderModules:function(f){var g=this._renderedData=f.renderData||this._renderedData;a.each(this._summaryModules,function(h){h.render(g)});this._errorModule.render(f.success?g:undefined)},_startLoadingModuleData:function(){a.each(this._summaryModules,function(f){f.startLoading()})}},{MAX_REFRESH_WINDOW:30000})});Backbone.define("JIRA.DevStatus.DevStatusModule",require("jira/devstatus/dev-status-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusData.js' */
define("jira/devstatus/dev-status-data",["backbone","jquery","underscore"],function(c,b,a){return c.Model.extend({properties:["aggregatedData"],namedEvents:["beforeRequest","requestFail","requestSuccess"],initialize:function(d){this.issueId=d.issueId;this.issueKey=d.issueKey},retrieveAggregateData:function(){var d=AJS.contextPath()+"/rest/dev-status/1.0/issue/summary?issueId="+this.issueId;this.trigger("beforeRequest");return b.ajax(d).done(a.bind(this.setAggregateData,this)).fail(a.bind(this.setAggregateDataError,this)).promise()},setAggregateData:function(e,d,f){this.set("aggregatedData",e);this.trigger("requestSuccess",this,d===true,!!f)},setAggregateDataError:function(e,d){this.set("aggregatedData",undefined);this.trigger("requestFail",this,e)}})});Backbone.define("JIRA.DevStatus.DevStatusData",require("jira/devstatus/dev-status-data"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/CreateBranchView.js' */
define("jira/devstatus/create-branch-view",["backbone","underscore","jira/util/data/meta"],function(c,a,b){return c.View.extend({initialize:function(d){this.tooltipShown=!d.showTooltip;this.linkTextSelector=".devstatus-cta-link-text";this.issueContainer=".issue-container";this._processLinkForNavigableURL();this._initTooltip();a.defer(a.bind(this._openCreateBranchDialog,this))},getCreateBranchLink:function(){return this.$el},_processLinkForNavigableURL:function(){this.getCreateBranchLink().data("cta",this._getCta(this.$el));this.getCreateBranchLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam("create-branch"))},_openCreateBranchDialog:function(){var d=b.get("fusion-open-detail-dialog");if(d==="create-branch"){b.set("fusion-open-detail-dialog",undefined);b.set("fusion-analytics-new-context-link",true);this.getCreateBranchLink().click()}},_initTooltip:function(){if(!this.tooltipShown&&this.$el.length>0){a.defer(a.bind(function(){var d=this.$el.data("cta");if(d){new AJS.HelpTip({id:d+".tooltip",title:"Start development",bodyHtml:JIRA.Templates.DevStatus.Tooltip.createBranch(),anchor:this.$el.find(this.linkTextSelector),isSequence:true,inlineDialogOpts:{container:this.issueContainer,width:400}});this.tooltipShown=true;AJS.HelpTip.Manager.showSequences()}},this))}},_getCta:function(f){var e=f.attr("href"),d=e&&/\#([a-zA-Z\.]+)/.exec(e);return d&&d[1]}})});Backbone.define("JIRA.DevStatus.CreateBranchView",require("jira/devstatus/create-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BasePanelModule.js' */
define("jira/devstatus/base-panel-module",["backbone","underscore"],function(b,a){return b.Model.extend({initialize:function(c){this.options=a.defaults({},c);this.data=this.createModel()},render:function(c){this.startViews();this.data.updateData(c);this.view.render()},startLoading:function(){this.data.startLoadingData&&this.data.startLoadingData()},startViews:function(){if(!this.view){this.view=this.createView()}},stopViews:function(){if(this.view){this.view.undelegateEvents();this.view.$el.empty();this.view.hide();this.view=null}},isViewVisible:function(){return this.view&&this.view.isVisible()},createView:function(){},createModel:function(){}})});Backbone.define("JIRA.DevStatus.BasePanelModule",require("jira/devstatus/base-panel-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryView.js' */
define("jira/devstatus/base-summary-view",["backbone","jquery","underscore"],function(c,b,a){return c.View.extend({template:undefined,events:{"simpleClick .summary":"_onSummaryLinkClick"},initialize:function(d){this.options=a.clone(d);this.model.on("change:hasData",this._addOrRemoveHasDataClass,this);this.model.on("change:dataLoading",this._addOrRemoveDataLoadingClass,this);this.transitionView=new JIRA.DevStatus.SummaryTransitionView({model:this.model,el:this.$el})},render:function(){var e=this.isVisible();if(e){var d=b(this.template(a.extend({issueKey:this.options.dataAttrs.issueKey},this.model.getOverall())));if(this._shouldAnimateDataTransition()){this.transitionView.renderVisible(d)}else{this.$el.html(d);JIRA.DevStatus.Date.addTooltip(d)}this._renderNavigableSummaryLink();this.show()}else{if(!this._isHidden()){if(this._shouldAnimateDataTransition()){this.transitionView.renderHidden(a.bind(this.hide,this))}else{this.hide()}}}this._addOrRemoveDataLoadingClass();this._addOrRemoveHasDataClass()},getDefaultDetailDialogParameters:function(){return{issueKey:this.options.dataAttrs.issueKey,issueId:this.options.dataAttrs.issueId,tabs:this.model.get("byInstanceType"),dataType:this.model.getType(),showContactAdminForm:this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm}},getSummaryLink:function(){return this.$el.find("a.summary")},isVisible:function(){return this.model.getOverall().count>0},_addOrRemoveHasDataClass:function(){var d=this.model.get("hasData");this.$el.toggleClass("js-has-data",d)},_renderNavigableSummaryLink:function(){this.getSummaryLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam(this.model.getType()))},_addOrRemoveDataLoadingClass:function(){var d=this.model.get("dataLoading");this.$el.toggleClass("data-loading",d)},_onSummaryLinkClick:function(d){d.preventDefault();console.log("Summary view not supported: ",this)},_shouldAnimateDataTransition:function(){return !!this.model.getPreviousOverall()},_isHidden:function(){return this.$el.hasClass("hidden")},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})});Backbone.define("JIRA.DevStatus.BaseSummaryView",require("jira/devstatus/base-summary-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryTransitionView.js' */
define("jira/devstatus/summary-transition-view",["backbone","jquery","underscore","jira/dev-status/util/date"],function(d,b,a,c){return d.View.extend({slideTransitionTime:500,initialize:function(){},renderVisible:function(f){var e=!b.contains(document,this.$el[0]);if(this._hasPreviousData()){if(this._hasDataChanged()){this._prepareContentsForTransition(f,this.$el);this.$el.addClass("roll-transition")}}else{this._preStartSlideTransition();this.$el.addClass("slide-down-transition");e=true}this.$el.html(f);c.addTooltip(f);if(e){a.defer(a.bind(this._initiateTransition,this))}else{this._initiateTransition()}},renderHidden:function(f){var e=this;this.$el.slideUp(this.slideTransitionTime,function(){e.$el.css("display","");f()})},_initiateTransition:function(){if(this.$el.hasClass("slide-down-transition")){this._postStartSlideTransition();this.$el.removeClass("slide-down-transition");this._startSlideDownTransition(this.$el,0)}else{if(this.$el.hasClass("roll-transition")){this.$el.removeClass("roll-transition");this._startRollTransition()}var f=this.$el.find(".sliding-container");if(f.length>0){var e=this;f.each(function(h,g){var i=b(g);var j=i.data("prevHeight");e._startSlideDownTransition(i,j)})}}},_startSlideDownTransition:function(e,f){var g=e.height();if(f!==g){e.height(f).animate({height:g},this.slideTransitionTime,function(){e.css("height","auto");e.find(".rolling-content").removeClass("transit")})}},_startRollTransition:function(){this.$el.find(".rolling-container").each(a.bind(function(f,e){var j=b(e);var i=j.find(".rolling-content");var h=i.find(":not(.old-content)");var g=h.height();j.height(g);i.addClass("transit");h.css("margin-top","-"+g+"px").animate({"margin-top":"0"},this.slideTransitionTime,function(){j.css("height","auto");j.find(".old-content").remove();i.removeClass("transit");h.css("margin-top","")})},this))},_prepareContentsForTransition:function(f,h){f=b("<div></div>").append(f);var g=f.find(".sliding-container");var j=h.find(".sliding-container");g.each(function(l,m){var k=j.get(l);if(k){var n=b(k);b(m).data("prevHeight",n.height())}});var i=f.find(".rolling-container");var e=h.find(".rolling-container");i.each(function(m,n){var o=b(n).find(".rolling-content");var l=e.get(m);if(l){var k=b(l).find(".rolling-content").children();k.addClass("old-content");o.append(k)}})},_hasPreviousData:function(){var e=this.model.getPreviousOverall();return e&&e.count>0},_hasDataChanged:function(){return !a.isEqual(this.model.getOverall(),this.model.getPreviousOverall())},_preStartSlideTransition:function(){this.$el.css("height","0");this.$el.css("opacity","0")},_postStartSlideTransition:function(){this.$el.css("height","");this.$el.css("opacity","")}})});Backbone.define("JIRA.DevStatus.SummaryTransitionView",require("jira/devstatus/summary-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModule.js' */
define("jira/devstatus/base-summary-module",["underscore","jira/devstatus/base-panel-module"],function(a,b){return b.extend({model:undefined,viewType:undefined,createModel:function(){return new this.model({})},createView:function(){return new this.viewType(a.extend(a.clone(this.options),{model:this.data}))}})});Backbone.define("JIRA.DevStatus.BaseSummaryModule",require("jira/devstatus/base-summary-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModel.js' */
define("jira/devstatus/base-summary-model",["backbone"],function(a){return a.Model.extend({typeId:undefined,properties:["byInstanceType","overall","previousOverall","hasData","dataLoading"],startLoadingData:function(){this.set("dataLoading",true)},updateData:function(c){this.set("hasData",c!==undefined);this.set("dataLoading",false);this.set("previousOverall",this.getOverall());if(c&&c.summary&&c.summary[this.typeId]){var b=c.summary[this.typeId];this.set("byInstanceType",b.byInstanceType);this.set("overall",b.overall)}else{this.set("byInstanceType",{});this.set("overall",{count:0})}},getType:function(){return this.typeId},getOverall:function(){return this.get("overall")},getPreviousOverall:function(){return this.get("previousOverall")}})});Backbone.define("JIRA.DevStatus.BaseSummaryModel",require("jira/devstatus/base-summary-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModule.js' */
define("jira/devstatus/summary-error-module",["jira/devstatus/base-panel-module"],function(a){return a.extend({createModel:function(){return new JIRA.DevStatus.SummaryErrorModel({})},createView:function(){var b=this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm;return new JIRA.DevStatus.SummaryErrorView({model:this.data,el:this.options.el,showContactAdminForm:b})}})});Backbone.define("JIRA.DevStatus.SummaryErrorModule",require("jira/devstatus/summary-error-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModel.js' */
define("jira/devstatus/summary-error-model",["backbone","underscore"],function(b,a){return b.Model.extend({properties:["hasErrors","errorInstances","configInstances"],defaults:function(){return{hasErrors:false,errorInstances:[],configInstances:[]}},updateData:function(d){var e=this._extractErrors(d&&d.errors);var c=this._extractErrors(d&&d.configErrors);this.set("hasErrors",!d||!a.isEmpty(e)||!a.isEmpty(c));this.set("errorInstances",e);this.set("configInstances",c)},_extractErrors:function(c){if(!c){return[]}return a.map(a.filter(c,function(d){return d.error}),function(d){return d.instance})}})});Backbone.define("JIRA.DevStatus.SummaryErrorModel",require("jira/devstatus/summary-error-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorView.js' */
define("jira/devstatus/summary-error-view",["jira/devstatus/base-summary-view"],function(a){return a.extend({initialize:function(b){this.showContactAdminForm=b.showContactAdminForm},render:function(){if(this.isVisible()){this.$el.html(JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon({instances:this.model.get("errorInstances"),notConfiguredInstances:this.model.get("configInstances"),showContactAdminForm:this.showContactAdminForm}));this.show()}else{this.hide()}return this},isVisible:function(){return this.model.get("hasErrors")}})});Backbone.define("JIRA.DevStatus.SummaryErrorView",require("jira/devstatus/summary-error-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/labs/LabsOptInModel.js' */
define("jira/devstatus/labs/labs-opt-in-model",["backbone","jquery"],function(b,a){return b.Model.extend({defaults:{allowed:false,optedIn:false,optedInByAdmin:false,dismissed:false,id:1},isAllowed:function(){return this.get("allowed")},isOptedIn:function(){return this.get("optedIn")},isOptedInByAdmin:function(){return this.get("optedInByAdmin")},setOptedIn:function(c){return this.save({optedIn:c},{wait:true}).done(function(){JIRA.DevStatus.LabsAnalytics.fireLabsEvent(c)})},toggleOptedIn:function(c){var d=this.isOptedIn();return this.setOptedIn(!d)},setDismissed:function(c){return this.save({dismissed:c},{wait:true})},isDismissed:function(){return this.get("dismissed")},url:function(){return AJS.contextPath()+"/rest/dev-status/1.0/labs-opt-in/"}},{createFromDOM:function(d){var c=a(d).find("#devstatus-container");return new JIRA.DevStatus.Labs.LabsOptInModel(c.data("labs-json"))}})});Backbone.define("JIRA.DevStatus.Labs.LabsOptInModel",require("jira/devstatus/labs/labs-opt-in-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/labs/LabsOptInView.js' */
define("jira/devstatus/labs/labs-opt-in-view",["backbone"],function(a){return a.View.extend({events:{"click .toggle-labs":"_onClickToggle","click .labs-close":"_onClickDismiss","click .feedback-link":"_onClickFeedback"},initialize:function(b){this.labsOptIn=b.labsOptIn;this.labsOptIn.on("change",this.render,this);this.labsOptIn.on("change:optedIn",this._onChangeOptedIn,this)},render:function(){var b=this.labsOptIn;if(b.isAllowed()&&(b.isOptedInByAdmin()||!b.isDismissed())){this._show()}else{this._hide()}return this},_onClickToggle:function(b){b.preventDefault();this.labsOptIn.toggleOptedIn()},_onClickDismiss:function(b){b.preventDefault();this.labsOptIn.setDismissed(true)},_onClickFeedback:function(b){b.preventDefault();this._showFeedbackDialog()},_onChangeOptedIn:function(c,b){if(b===false){this._showFeedbackDialog({summary:"How can Atlassian improve the development panel?"})}},_showFeedbackDialog:function(c){var b=new JIRA.DevStatus.FeedbackDialog(c);b.show()},_show:function(){this.$el.html(JIRA.Templates.DevStatus.labsOnOff({isOptedIn:this.labsOptIn.isOptedIn(),isOptedInByAdmin:this.labsOptIn.isOptedInByAdmin()}));this.$el.removeClass("hidden")},_hide:function(){this.$el.empty();this.$el.addClass("hidden")}},{COLLECTOR_ID:"effe8b72"})});Backbone.define("JIRA.DevStatus.Labs.LabsOptInView",require("jira/devstatus/labs/labs-opt-in-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/labs/TryLabsView.js' */
define("jira/devstatus/labs/try-labs-view",["backbone"],function(a){return a.View.extend({events:{"click .try-labs":"_onClickTryLabs"},initialize:function(b){this.labsOptIn=b.labsOptIn;this.labsOptIn.on("change:dismissed",this.render,this)},render:function(){if(!this.labsOptIn.isAllowed()||this.labsOptIn.isOptedIn()||!this.labsOptIn.isDismissed()){this.$el.empty()}else{this.$el.html(JIRA.Templates.DevStatus.tryLabs())}return this},_onClickTryLabs:function(b){b.preventDefault();this.labsOptIn.setDismissed(false)}})});Backbone.define("JIRA.DevStatus.Labs.TryLabsView",require("jira/devstatus/labs/try-labs-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusInit.js' */
(function(){JIRA.DevStatus.setDetailDialogParam=function(){AJS.Meta.set("fusion-open-detail-dialog",JIRA.DevStatus.URL.getDetailDialogParam())};JIRA.DevStatus.setDetailDialogParam()})();AJS.$(function(){JIRA.DevStatus.showTooltip=true;JIRA.DevStatus.showAITTooltip=true;var d={devStatusContainer:"#devstatus-container",parentContainer:"[id$='devstatus-panel']",link:"a.devstatus-cta-link",statusPanel:".status-panels",viewIssueHeader:".mod-header",agileHeader:".ghx-header",agileNavMenuLink:'a[href="#ghx-tab-com-atlassian-jira-plugins-jira-development-integration-plugin-greenhopper-devstatus-panel"]'};function e(g){return g.find("body").hasClass("page-type-dashboard")}function b(g){return g.find("body").hasClass("ghx-agile")}function c(g){return g.find("body").hasClass("ka ajax-issue-search-and-view")}function a(h,i,g){JIRA.DevStatus.devStatusModule.initializePanel({container:h,showTooltip:JIRA.DevStatus.showTooltip,headerSelector:i,devStatusPanelVisibilityToggler:g,phaseTwoDisabled:!AJS.DarkFeatures.isEnabled("jira.plugin.devstatus.phasetwo.enabled")})}function f(g,i,h,j){_.defer(function(){var k=h?1000:0;var l={duration:k,complete:j};if(i){g.slideDown(l)}else{g.slideUp(l)}})}JIRA.DevStatus.documentReadyInit=function(h){JIRA.DevStatus.devStatusModule=new JIRA.DevStatus.DevStatusModule({parentContainerSelector:d.parentContainer,linkSelector:d.link,panelSelector:d.devStatusContainer,statusPanelSelector:d.statusPanel});if(e(h)||b(h)){h.find("body").on("click",d.agileNavMenuLink,JIRA.DevStatus.Analytics.fireAgileDevStatusLinkClicked);JIRA.DevStatus.showTooltip=false;JIRA.DevStatus.showAITTooltip=false}else{if(c(h)){if(JIRA.Issues.Api.isFullScreenIssueVisible()){var g=AJS.$(d.devStatusContainer);if(g.length>0){a(g,d.viewIssueHeader,f)}}}}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(j,i){if(i.not(document).is(d.parentContainer)){a(i.find(d.devStatusContainer),d.viewIssueHeader,f);JIRA.DevStatus.showTooltip=false;return true}return false});JIRA.bind("GH.DetailView.updated",function(j,i){a(AJS.$(d.devStatusContainer),d.agileHeader)});require(["jira-development-status/util/WRM"],function(i){i.requireDetailDialogResources()})};AJS.$(function(){JIRA.DevStatus.documentReadyInit(AJS.$(document))})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModel.js' */
define("jira/devstatus/commit-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"repository"})});Backbone.define("JIRA.DevStatus.CommitModel",require("jira/devstatus/commit-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'templates/viewissue/commit/devstatus-panel-commit.soy' */
// This file was automatically generated from devstatus-panel-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Commit.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Commit == 'undefined') { JIRA.Templates.DevStatus.Commit = {}; }


JIRA.Templates.DevStatus.Commit.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format("Commits related to {0}",opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.commits(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: "Latest", lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Commit.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Commit.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitView.js' */
define("jira/devstatus/commit-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(a,b,c){return b.extend({template:JIRA.Templates.DevStatus.Commit.summaryPanel,_onSummaryLinkClick:function(f){f.preventDefault();var d=this;c.requireDetailDialogResources(function(){var e=require("jira/devstatus/detail-dialog-commit-view");d.detailDialogCommitView=new e(a.extend(d.getDefaultDetailDialogParameters(),{id:"devstatus-commit-detail-dialog",count:d.model.getOverall().count}));JIRA.DevStatus.CommitsAnalytics.fireSummaryClickedEvent(d.options.analyticsModel.getSummary());d.detailDialogCommitView.show()})}})});Backbone.define("JIRA.DevStatus.CommitView",require("jira/devstatus/commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModule.js' */
define("jira/devstatus/commit-module",["jira/devstatus/base-summary-module","jira/devstatus/commit-model","jira/devstatus/commit-view"],function(c,b,a){return c.extend({model:b,viewType:a})});Backbone.define("JIRA.DevStatus.CommitModule",require("jira/devstatus/commit-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModel.js' */
define("jira/devstatus/pull-request-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"pullrequest"})});Backbone.define("JIRA.DevStatus.PullRequestModel",require("jira/devstatus/pull-request-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'templates/viewissue/pullrequest/devstatus-panel-pullrequest.soy' */
// This file was automatically generated from devstatus-panel-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.PullRequest.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.PullRequest == 'undefined') { JIRA.Templates.DevStatus.PullRequest = {}; }


JIRA.Templates.DevStatus.PullRequest.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format("Pull requests related to {0}",opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.pullRequestsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: "Updated", lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.PullRequest.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.PullRequest.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestView.js' */
define("jira/devstatus/pull-request-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(a,b,c){return b.extend({template:JIRA.Templates.DevStatus.PullRequest.summaryPanel,_onSummaryLinkClick:function(f){f.preventDefault();var d=this;c.requireDetailDialogResources(function(){var e=require("jira/devstatus/detail-dialog-pull-request-view");d.detailDialogPullRequestView=new e(a.extend(d.getDefaultDetailDialogParameters(),{id:"devstatus-pullrequest-detail-dialog",count:d.model.getOverall().count,reviewersThreshold:2}));JIRA.DevStatus.PullRequestsAnalytics.fireSummaryClickedEvent(d.options.analyticsModel.getSummary());d.detailDialogPullRequestView.show()})}})});Backbone.define("JIRA.DevStatus.PullRequestView",require("jira/devstatus/pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModule.js' */
define("jira/devstatus/pull-request-module",["jira/devstatus/base-summary-module","jira/devstatus/pull-request-model","jira/devstatus/pull-request-view"],function(c,b,a){return c.extend({model:b,viewType:a})});Backbone.define("JIRA.DevStatus.PullRequestModule",require("jira/devstatus/pull-request-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModel.js' */
define("jira/devstatus/review-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"review"})});Backbone.define("JIRA.DevStatus.ReviewModel",require("jira/devstatus/review-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format("Reviews related to {0}",opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: "Due", lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? "Updated" : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewView.js' */
define("jira/devstatus/review-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(a,b,c){return b.extend({template:JIRA.Templates.DevStatus.Review.summaryPanel,_onSummaryLinkClick:function(f){f.preventDefault();var d=this;c.requireDetailDialogResources(function(){var e=require("jira/devstatus/detail-dialog-review-view");d.detailDialogReviewView=new e(a.extend(d.getDefaultDetailDialogParameters(),{id:"devstatus-review-detail-dialog",count:d.model.getOverall().count,reviewersThreshold:2,completed:d.model.getOverall().completed}));JIRA.DevStatus.ReviewsAnalytics.fireSummaryClickedEvent(d.options.analyticsModel.getSummary());d.detailDialogReviewView.show()})}})});Backbone.define("JIRA.DevStatus.ReviewView",require("jira/devstatus/review-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModule.js' */
define("jira/devstatus/review-module",["jira/devstatus/base-summary-module","jira/devstatus/review-model","jira/devstatus/review-view"],function(c,b,a){return c.extend({model:b,viewType:a})});Backbone.define("JIRA.DevStatus.ReviewModule",require("jira/devstatus/review-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModel.js' */
define("jira/devstatus/branch-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"branch"})});Backbone.define("JIRA.DevStatus.BranchModel",require("jira/devstatus/branch-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'templates/viewissue/branch/devstatus-panel-branch.soy' */
// This file was automatically generated from devstatus-panel-branch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Branches.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Branches == 'undefined') { JIRA.Templates.DevStatus.Branches = {}; }


JIRA.Templates.DevStatus.Branches.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format("Branches related to {0}",opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.branches(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: "Updated", lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Branches.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Branches.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchView.js' */
define("jira/devstatus/branch-view",["require","underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(b,a,c,d){return c.extend({template:JIRA.Templates.DevStatus.Branches.summaryPanel,_onSummaryLinkClick:function(g){g.preventDefault();var f=this;d.requireDetailDialogResources(function(){var e=b("jira/devstatus/detail-dialog-branch-view");f.detailDialogBranchView=new e(a.extend(f.getDefaultDetailDialogParameters(),{id:"devstatus-branch-detail-dialog",count:f.model.getOverall().count,analyticIssueData:f.options.analyticsModel.getIssue()}));JIRA.DevStatus.BranchesAnalytics.fireSummaryClickedEvent(f.options.analyticsModel.getSummary());f.detailDialogBranchView.show()})}})});Backbone.define("JIRA.DevStatus.BranchView",require("jira/devstatus/branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModule.js' */
define("jira/devstatus/branch-module",["jira/devstatus/base-summary-module","jira/devstatus/branch-model","jira/devstatus/branch-view"],function(b,c,a){return b.extend({model:c,viewType:a})});Backbone.define("JIRA.DevStatus.BranchModule",require("jira/devstatus/branch-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModel.js' */
define("jira/devstatus/build-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"build"})});Backbone.define("JIRA.DevStatus.BuildModel",require("jira/devstatus/build-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'templates/viewissue/build/devstatus-panel-build.soy' */
// This file was automatically generated from devstatus-panel-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Build.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Build == 'undefined') { JIRA.Templates.DevStatus.Build = {}; }


JIRA.Templates.DevStatus.Build.summaryPanel = function(opt_data, opt_ignored) {
  var output = '<dl><dt>';
  var param4 = '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format("Builds related to {0}",opt_data.issueKey)) + '">';
  var countText__soy8 = '' + JIRA.Templates.FusionWidget.Common.buildsText(opt_data);
  param4 += soy.$$filterNoAutoescape(countText__soy8) + '</a> ' + JIRA.Templates.DevStatus.Build.statusIcon(opt_data) + '</div>';
  output += JIRA.Templates.DevStatus.transitionContainer({content: param4});
  output += '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: "Latest", lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Build.summaryPanel';
}


JIRA.Templates.DevStatus.Build.statusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy27 = '' + JIRA.Templates.FusionWidget.Common.buildsIconClass(opt_data);
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy27) + '">' + soy.$$escapeHtml(opt_data.iconText) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.statusIcon.soyTemplateName = 'JIRA.Templates.DevStatus.Build.statusIcon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildView.js' */
define("jira/devstatus/build-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(a,b,c){return b.extend({template:JIRA.Templates.DevStatus.Build.summaryPanel,_onSummaryLinkClick:function(f){f.preventDefault();var d=this;c.requireDetailDialogResources(function(){var e=require("jira/devstatus/detail-dialog-build-view");d.detailDialogBuildView=new e(a.extend(d.getDefaultDetailDialogParameters(),{id:"devstatus-build-detail-dialog",count:d.model.getOverall().count}));JIRA.DevStatus.BuildsAnalytics.fireSummaryClickedEvent(d.options.analyticsModel.getSummary());d.detailDialogBuildView.show()})}})});Backbone.define("JIRA.DevStatus.BuildView",require("jira/devstatus/build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModule.js' */
define("jira/devstatus/build-module",["jira/devstatus/base-summary-module","jira/devstatus/build-model","jira/devstatus/build-view"],function(a,c,b){return a.extend({model:c,viewType:b})});Backbone.define("JIRA.DevStatus.BuildModule",require("jira/devstatus/build-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModel.js' */
define("jira/devstatus/deployment-model",["jira/devstatus/base-summary-model"],function(a){return a.extend({typeId:"deployment-environment"})});Backbone.define("JIRA.DevStatus.DeploymentModel",require("jira/devstatus/deployment-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'templates/viewissue/deployment/devstatus-panel-deployment.soy' */
// This file was automatically generated from devstatus-panel-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Deployment == 'undefined') { JIRA.Templates.DevStatus.Deployment = {}; }


JIRA.Templates.DevStatus.Deployment.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dd>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content" title="' + soy.$$escapeHtml(AJS.format("Deployments related to {0}",opt_data.issueKey)) + '">' + ((opt_data.topEnvironments.length) ? JIRA.Templates.FusionWidget.Common.deployments({anchorStart: '<a class="summary">', anchorEnd: '</a>', showProjects: opt_data.showProjects, successfulCount: opt_data.successfulCount, topEnvironments: opt_data.topEnvironments}) : soy.$$escapeHtml("No deployments contain latest commits")) + '</div>'}) + '</dd></dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Deployment.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Deployment.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentView.js' */
define("jira/devstatus/deployment-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(a,b,c){return b.extend({template:JIRA.Templates.DevStatus.Deployment.summaryPanel,_onSummaryLinkClick:function(f){f.preventDefault();var d=this;c.requireDetailDialogResources(function(){var e=require("jira/devstatus/detail-dialog-deployment-view");d.detailDialogDeploymentView=new e(a.extend(d.getDefaultDetailDialogParameters(),{id:"devstatus-deployment-detail-dialog",count:d.model.getOverall().count}));JIRA.DevStatus.DeploymentsAnalytics.fireSummaryClickedEvent(d.options.analyticsModel.getSummary());d.detailDialogDeploymentView.show()})}})});Backbone.define("JIRA.DevStatus.DeploymentView",require("jira/devstatus/deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModule.js' */
define("jira/devstatus/deployment-module",["jira/devstatus/base-summary-module","jira/devstatus/deployment-model","jira/devstatus/deployment-view"],function(b,a,c){return b.extend({model:a,viewType:c})});Backbone.define("JIRA.DevStatus.DeploymentModule",require("jira/devstatus/deployment-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-cta-tooltip-resources', location = 'templates/viewissue/devstatus-cta-tooltips.soy' */
// This file was automatically generated from devstatus-cta-tooltips.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Tooltip.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Tooltip == 'undefined') { JIRA.Templates.DevStatus.Tooltip = {}; }


JIRA.Templates.DevStatus.Tooltip.createBranch = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'create-branch', content: '<span class="branch-illustration"></span><div class="branch-text"><p>' + soy.$$escapeHtml("Create a branch for this issue in your source repository") + '.<br /> <a class="cta-learn-more-link" href="https://www.atlassian.com/git/workflows" target="_blank">' + soy.$$escapeHtml("Learn more about branching strategies") + '.</a></p></div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.createBranch.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.createBranch';
}


JIRA.Templates.DevStatus.Tooltip.automaticTransitions = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'dev-summary-automatic-transitions', content: '<p>' + soy.$$escapeHtml("Now JIRA can automatically update your issue status when pull requests and other actions occur.") + '</p><p><a href="' + soy.$$escapeHtml(opt_data.aitHelpLinkUrl.url) + '" id="trigger-docs-link" target="_blank" title="' + soy.$$escapeHtml("Learn about automating your workflow") + '">' + soy.$$escapeHtml("Learn about automating your workflow") + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.automaticTransitions.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.automaticTransitions';
}


JIRA.Templates.DevStatus.Tooltip.tooltipLayout = function(opt_data, opt_ignored) {
  return '<div class="cta-tooltip' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.tooltipLayout.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.tooltipLayout';
}
;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events=
{on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);
j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;
var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<f;)(c=a[d]).callback.call(c.ctx);
break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});h.bind=h.on;h.unbind=h.off;
e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},sync:function(){return g.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;this.idAttribute in f&&(this.id=
f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery"],function(a,b,c){return a(b,c)});define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/brace-2014.09.03"],function(b,a,c){return c(a,Backbone)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(i){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(n,o){var k={_:n,Backbone:o};i.call(k);return k.Marionette.noConflict()}})})(function(){var i=this,n=function(i,f,d){function j(a,b){var c=Error(a);c.name=b||"Error";throw c;}var n=f.ChildViewContainer,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;a.model&&(this._indexByModel[a.model.cid]=
c);b&&(this._indexByCustom[b]=c);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,d){if(a===b)return delete this._indexByCustom[d],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(c){d.isFunction(c[a])&&c[a].apply(c,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});f.ChildViewContainer=k;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=n;return this};var o=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=o;return this};var g=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;d.extend(g.prototype,f.Events,{setHandlers:function(a){d.each(a,function(a,c){var e=null;d.isObject(a)&&
!d.isFunction(a)&&(e=a.context,a=a.callback);this.setHandler(c,a,e)},this)},setHandler:function(a,b,c){this._wreqrHandlers[a]={callback:b,context:c};this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,c){var e=this.storage.getCommands(a);d.each(e.instances,function(a){b.apply(c,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=d.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;d.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};d.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,c){if(b){var c=c||this,e="vent"===a?"on":"setHandler";d.each(b,function(b,f){this[a][e](f,d.bind(b,c))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};d.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){d.each(["vent","commands","reqres"],function(a){d.each(t[a],function(b){var c=this;this[a][b]=function(d){var e=c._getChannel(d)[a],f=Array.prototype.slice.call(arguments,1);return e[b].apply(e,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=i.Marionette,e=f.Marionette={};e.VERSION="2.1.0";e.noConflict=function(){i.Marionette=w;return this};f.Marionette=e;e.Deferred=f.$.Deferred;var l=Array.prototype.slice;
e.extend=f.Model.extend;e.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};e.proxyGetOption=function(a){return e.getOption(this,a)};e.normalizeMethods=function(a){var b={};d.each(a,function(a,e){d.isFunction(a)||(a=this[a]);a&&(b[e]=a)},this);return b};e.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return d.each(d.keys(a),function(c){var d=/@ui\.[a-zA-Z_$0-9]*/g;c.match(d)&&(a[c.replace(d,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),
a};e.actAsCollection=function(a,b){d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(c){a[c]=function(){var a=[d.values(d.result(this,b))].concat(d.toArray(arguments));return d[c].apply(d,a)}})};var x=function(a,b,c){return c.toUpperCase()},y=/(^|:)(\w)/gi;e.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],c;d.isFunction(b)&&(c=b.apply(this,d.tail(arguments)));d.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return c};var z=document.documentElement,q=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};e.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;q(a)});a.listenTo(a,"render",function(){a._isRendered=!0;q(a)})};var A=function(a,b,c,e){e=e.split(/\s+/);d.each(e,function(d){var e=a[d];e||j('Method "'+d+'" was configured as an event handler, but does not exist.');a.listenTo(b,
c,e)})},B=function(a,b,c,d){a.listenTo(b,c,d)},C=function(a,b,c,e){e=e.split(/\s+/);d.each(e,function(d){a.stopListening(b,c,a[d])})},D=function(a,b,c,d){a.stopListening(b,c,d)},r=function(a,b,c,e,f){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,g){d.isFunction(c)?e(a,b,g,c):f(a,b,g,c)}))};e.bindEntityEvents=function(a,b,c){r(a,b,c,B,A)};e.unbindEntityEvents=function(a,b,c){r(a,b,c,D,C)};e.proxyBindEntityEvents=function(a,b){return e.bindEntityEvents(this,a,b)};e.proxyUnbindEntityEvents=
function(a,b){return e.unbindEntityEvents(this,a,b)};e.Callbacks=function(){this._deferred=e.Deferred();this._callbacks=[]};d.extend(e.Callbacks.prototype,{add:function(a,b){var c=d.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});c.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=e.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});e.Controller=function(a){this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};e.Controller.extend=e.extend;d.extend(e.Controller.prototype,f.Events,{destroy:function(){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption});e.Object=function(a){this.options=d.extend({},d.result(this,
"options"),a);this.initialize(this.options)};e.Object.extend=e.extend;d.extend(e.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});d.extend(e.Object.prototype,f.Events);e.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||j('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=l.apply(arguments);this.initialize.apply(this,b)}};d.extend(e.Region,{buildRegion:function(a,b){if(d.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(d.isFunction(a))return this._buildRegionFromRegionClass(a);j("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var c=a.regionClass||b,e=d.omit(a,"selector","regionClass");a.selector&&!e.el&&(e.el=a.selector);c=new c(e);a.parentEl&&(c.getEl=function(b){if(d.isObject(b))return f.$(b);var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c},_buildRegionFromRegionClass:function(a){return new a}});d.extend(e.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var c=b||{},e=a!==this.currentView,
f=!!c.forceShow,g=!!this.currentView;!c.preventDestroy&&e&&this.empty();if(e||f)a.once("destroy",d.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),d.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),d.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){d.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&j('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:e.proxyGetOption,triggerMethod:e.triggerMethod});e.Region.extend=e.extend;g=e.Controller.extend({constructor:function(a){this._regions={};e.Controller.call(this,a)},addRegions:function(a,b){d.isFunction(a)&&(a=a.apply(this,arguments));
var c={};d.each(a,function(a,e){d.isString(a)&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var f=this.addRegion(e,a);c[e]=f},this);return c},addRegion:function(a,b){var c;c=d.isObject(b);var p=d.isString(b),f=!!b.selector;c=p||c&&f?e.Region.buildRegion(b,e.Region):d.isFunction(b)?e.Region.buildRegion(b,e.Region):b;this.triggerMethod("before:add:region",a,c);this._store(a,c);this.triggerMethod("add:region",a,c);return c},get:function(a){return this._regions[a]},getRegions:function(){return d.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();d.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();d.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return e.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=d.size(this._regions)}});e.actAsCollection(g.prototype,"_regions");e.RegionManager=g;e.TemplateCache=function(a){this.templateId=a};d.extend(e.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new e.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=l.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(e.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&j('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});e.Renderer={render:function(a,b){a||
j("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:e.TemplateCache.get(a))(b)}};e.View=f.View.extend({constructor:function(a){d.bindAll(this,"render");this.options=d.extend({},d.result(this,"options"),d.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(d.result(this,"events"));d.isObject(this.behaviors)&&new e.Behaviors(this);f.View.apply(this,arguments);e.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,l.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){var b=d.result(this,"ui"),c=d.result(this,"_uiBindings");return e.normalizeUIKeys(a,c||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,
function(b,e){var f=d.isObject(b),g=f?b.event:b;a[e]=function(a){if(a){var d=a.preventDefault,e=a.stopPropagation,p=f?b.stopPropagation:e;(f?b.preventDefault:d)&&d&&d.apply(a);p&&e&&e.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;d.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},c=d.result(this,"behaviorEvents")||{},e=this.configureTriggers();d.extend(b,c,a,e);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=l.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:e.triggerMethod,normalizeMethods:e.normalizeMethods,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});e.ItemView=e.View.extend({constructor:function(){e.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=d.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:d.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,l.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||j("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=e.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return e.View.prototype.destroy.apply(this,arguments)}});e.CollectionView=e.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=d.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();e.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&d.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(d.each(this._bufferedChildren,function(a){d.isFunction(a.triggerMethod)?a.triggerMethod("show"):e.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){d.isFunction(a.triggerMethod)?a.triggerMethod("show"):e.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var c=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");d.isFunction(c)&&(c=c.call(this));c=this.buildChildView(a,b,c);this._isShown&&this.triggerMethod.call(c,"before:show");this.children.add(c);this.renderChildView(c,-1);this._isShown&&this.triggerMethod.call(c,"show")},getChildView:function(){var a=this.getOption("childView");a||j('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,c){var e=this.getOption("childViewOptions");d.isFunction(e)&&
(e=e.call(this,a,c));a=this.buildChildView(a,b,e);this._updateIndices(a,!0,c);this._addChildView(a,c);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(d.isFunction(a.triggerMethod)?
a.triggerMethod("show"):e.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),e.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(d.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var c=
l.call(arguments),e=c[0],f=this.normalizeMethods(d.result(this,"childEvents"));c[0]=b+":"+e;c.splice(1,0,a);"undefined"!==typeof f&&d.isFunction(f[e])&&f[e].apply(this,c.slice(1));this.triggerMethod.apply(this,c)},this)}});e.CompositeView=e.CollectionView.extend({constructor:function(){e.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||j('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=d.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&e.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=e.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=e.getOption(a,"childViewContainer"))?(b=d.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&j('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});e.LayoutView=e.ItemView.extend({regionClass:e.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);e.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return e.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return e.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=d.isFunction(this.regions)?this.regions(a):this.regions||{};var c=this.getOption.call(a,"regions");d.isFunction(c)&&(c=c.call(this,a));d.extend(b,c);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new e.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=d.result(this,"defaults")||{};this.options=d.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};d.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});
g.extend=e.extend;e.Behavior=g;var m=function(a,b){b=m.parseBehaviors(a,b||d.result(a,"behaviors"));m.wrap(a,b,d.keys(s))},s={setElement:function(a,b){a.apply(this,d.tail(arguments,2));d.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.invoke(b,"destroy",c);return this},bindUIElements:function(a,b){a.apply(this);d.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);d.invoke(b,a)},triggerMethod:function(a,b){var c=
d.tail(arguments,2);a.apply(this,c);d.each(b,function(b){a.apply(b,c)})},delegateEvents:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.each(b,function(a){e.bindEntityEvents(a,this.model,e.getOption(a,"modelEvents"));e.bindEntityEvents(a,this.collection,e.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.each(b,function(a){e.unbindEntityEvents(a,this.model,e.getOption(a,"modelEvents"));e.unbindEntityEvents(a,this.collection,
e.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var c={},f=d.result(this,"ui");d.each(b,function(a,b){var g={},h=d.clone(d.result(a,"events"))||{},i=d.result(a,"ui"),i=d.extend({},f,i),h=e.normalizeUIKeys(h,i);d.each(d.keys(h),function(c){var e=Array(b+2).join(" "),e=c+e,c=d.isFunction(h[c])?h[c]:a[h[c]];g[e]=d.bind(c,a)});c=d.extend(c,g)});return c}};d.extend(m,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:d.isFunction(m.behaviorsLookup)?m.behaviorsLookup.apply(this,arguments)[b]:m.behaviorsLookup[b]},parseBehaviors:function(a,b){return d.chain(b).map(function(b,e){var f=new (m.getBehaviorClass(b,e))(b,a),g=m.parseBehaviors(a,d.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,c){d.each(c,function(c){a[c]=d.partial(s[c],a[c],b)})}});e.Behaviors=m;e.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var c=d.invert(this.getOption("appRoutes"))[a];if(d.isFunction(this.onRoute))this.onRoute(a,c,b)},processAppRoutes:function(a,b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,c){var e=a[c];e||j('Method "'+c+'" was not found on the controller');this.route(b,c,d.bind(e,a))},getOption:e.proxyGetOption});e.Application=function(a){this._initializeRegions(a);this._initCallbacks=new e.Callbacks;this.submodules={};d.extend(this,a);this._initChannel()};d.extend(e.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=e.Module.getClass(b),d=l.call(arguments);
d.unshift(this);return c.create.apply(c,d)},getRegionManager:function(){return new e.RegionManager},_initializeRegions:function(a){var b=d.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var c=e.getOption(a,"regions");d.isFunction(c)&&(c=c.call(this,a));d.extend(b,c);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=d.result(this,"channelName")||"global";this.channel=d.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=d.result(this,"vent")||this.channel.vent;this.commands=d.result(this,"commands")||this.channel.commands;this.reqres=d.result(this,"reqres")||this.channel.reqres},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption});e.Application.extend=e.extend;e.Module=function(a,b,c){this.moduleName=a;this.options=d.extend({},this.options,c);this.initialize=c.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;d.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};e.Module.extend=e.extend;d.extend(e.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var c=d.flatten([this,this.app,f,e,f.$,d,b]);a.apply(this,c)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new e.Callbacks;this._finalizerCallbacks=
new e.Callbacks},triggerMethod:e.triggerMethod});d.extend(e.Module,{create:function(a,b,c){var e=a,f=l.call(arguments);f.splice(0,3);var b=b.split("."),g=[];g[b.length-1]=c;d.each(b,function(b,d){var h=e;e=this._getModule(h,b,a,c);this._addModuleDefinition(h,e,g[d],f)},this);return e},_getModule:function(a,b,c,e){var f=d.extend({},e),e=this.getClass(e),g=a[b];g||(g=new e(b,c,f),a[b]=g,a.submodules[b]=g);return g},getClass:function(a){var b=e.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c),c=this._getStartWithParent(c,b);e&&b.addDefinition(e,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var c;return d.isFunction(a)&&a.prototype instanceof e.Module?(c=b.constructor.prototype.startWithParent,d.isUndefined(c)?!0:c):d.isObject(a)?(c=a.startWithParent,d.isUndefined(c)?!0:c):!0},_getDefine:function(a){return d.isFunction(a)&&!(a.prototype instanceof e.Module)?a:d.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return e};if("function"===typeof define&&define.amd)define(["backbone","underscore"],function(k,f){return i.Marionette=n(i,k,f)});else if("undefined"!==typeof exports){var o=require("backbone"),k=require("underscore");module.exports=n(i,o,k)}else i.Marionette=n(i,i.Backbone,i._)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/marionette-2.1.0"],function(e,g,b,d){var f=d(b,g);var c={unwrapTemplate:function a(){var h=this.$el.children();if(h.length>1){AJS.warn("[IIC] Unwrapping template with more than one child - some content will be lost")}var i=e(h.get(0));if(this.$el.parent().length){this.$el.replaceWith(i);this.setElement(i)}else{this.setElement(i)}}};b.extend(f.ItemView.prototype,c);b.extend(f.CompositeView.prototype,c);b.extend(f.CollectionView.prototype,c);b.extend(f.LayoutView.prototype,c);return f});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(i,k,f){var b=Object.prototype.toString.call(i.operamini)=="[object OperaMini]";var a="placeholder" in k.createElement("input")&&!b;var g="placeholder" in k.createElement("textarea")&&!b;var l=f.fn;var e=f.valHooks;var c=f.propHooks;var n;var m;if(a&&g){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":d,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=g;n={get:function(q){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){h.call(q)}}else{if(p.hasClass("placeholder")){d.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){e.input=n;c.value=n}if(!g){e.textarea=n;c.value=n}f(function(){f(k).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(d);setTimeout(function(){p.each(h)},10)})});f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function d(q,r){var p=this;var s=f(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function h(){var t;var p=this;var s=f(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=f("<input>").attr(f.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jquery"],function(g){var j=(document.body||document.documentElement).style;var d=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];var k;return{cssAnimationsSupport:j.transition!==undefined||j.WebkitTransition!==undefined||j.MozTransition!==undefined||j.MsTransition!==undefined||j.OTransition!==undefined,addClassAndRemoveOnAnimationEnd:function c(o,n,l){var m;o=g(o);function p(){for(m=0;m<d.length;m++){o.off(d[m],p)}o.removeClass(n)}if(this.cssAnimationsSupport){for(m=0;m<d.length;m++){o.on(d[m],p)}}else{setTimeout(function(){o.removeClass(n)},l||1000)}o.addClass(n)},scrollElementToView:function h(q,l){var m=q[0].getBoundingClientRect();var p=l[0].getBoundingClientRect();var o=q.scrollTop();var n=0;if(p.top<m.top){n=p.top-m.top}else{if(m.bottom<p.bottom){n=p.bottom-m.bottom}}if(n!==0){q.scrollTop(o+n)}},keyCode:{ENTER:13,ESC:27},after:function b(m,o,l){if(!_.isFunction(l)){throw"Body is not a function"}m[o]=_.wrap(m[o],function n(q){var r=Array.prototype.slice.call(arguments,1);var p=q.apply(m,r);l.apply(this,_.union([p],r));return p})},error:function i(m){if(console&&console.error){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.error.apply(console,l)}},debug:function a(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},trace:function f(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},shouldDisplay:function(l){if(k==="all"||l===k){return true}return false},showLogsFor:function e(l){k=l}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var c=function(){var f=JIRA.Forms.Container;return f.extend({lazyInit:function e(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function d(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(b,a){return function(t,m){if(!b.isObject(m)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var k=JIRA.Forms.CreateIssueModel;var p=JIRA.Forms.ConfigurableCreateIssueForm;var l=JIRA.Forms.UnconfigurableCreateIssueForm;var e=JIRA.Forms.CreateIssueError;var d=JIRA.applyErrorsToForm;var i=JIRA.applyErrorMessageToForm;var s;m.done(function n(u){s=u;s.prefilledFields=s.prefilledFields||{};s.errors=s.errors||{};s.errorMessages=s.errorMessages||{}}).fail(function j(){s={prefilledFields:{},errors:{},errorMessages:{}}});var f=a.build();var c=new f(function q(){var x={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new k({projectId:undefined,issueType:undefined});var w=new p({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new l({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new e(),configurableForm:w,unconfigurableForm:v,prefilledValues:s.prefilledFields}});var o=c.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function h(){return m};c.asDialog=function g(){return c.dialog};o.onContentReady(function r(){if(b.keys(s.errors).length){s.errorMessages.unshift("Please fix the fields marked below.");d(c.$element,s.errors)}if(s.errorMessages.length){i(c.$element,s.errorMessages.join("<br/>"))}});t.resolve(c)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["wrm/require","jquery","underscore","jira/inline-issue-create/lib/marionette","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(e,d,j,g,h,l,f){var a=AJS.dim;var i=AJS.undim;var c=function(){a();h.showLoadingIndicator()};var b=function(){i();h.hideLoadingIndicator()};var k=function k(n,o){var m=new d.Deferred();if(o){c()}e(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],f.bind(undefined,m,n)).fail(function(){if(o){b()}l.showErrorMsg(null,"The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.")});return m.promise()};return{createPrefillableCreateIssueForm:k}});define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var d=JIRA.Forms.Container;var c=function(){return d.extend({lazyInit:function f(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function e(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(d,c){var g=JIRA.Forms.CreateIssueModel;var h=JIRA.Forms.ConfigurableCreateIssueForm;var a=JIRA.Forms.UnconfigurableCreateIssueForm;var f=JIRA.Forms.CreateIssueError;var b=JIRA.applyErrorsToForm;var e=JIRA.applyErrorMessageToForm;return function(s,k){if(!d.isObject(k)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var m;k.done(function p(u){m=u;m.prefilledFields=m.prefilledFields||{};m.errors=m.errors||{};m.errorMessages=m.errorMessages||{}}).fail(function j(){m={prefilledFields:{},errors:{},errorMessages:{}}});var n=c.build();var i=new n(function r(){var x={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new g({projectId:undefined,issueType:undefined});var w=new h({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new a({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new f(),configurableForm:w,unconfigurableForm:v,prefilledValues:m.prefilledFields}});var o=i.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function l(){return k};i.asDialog=function q(){return i.dialog};o.onContentReady(function t(){if(d.keys(m.errors).length){m.errorMessages.unshift("Please fix the fields marked below.");b(i.$element,m.errors)}if(m.errorMessages.length){e(i.$element,m.errorMessages.join("<br/>"))}});s.resolve(i)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy' */
// This file was automatically generated from inline-issue-create-widget.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }


JIRA.Templates.InlineIssueCreate.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><div class="iic-trigger"><button type="button">' + soy.$$escapeHtml("Create issue") + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.trigger.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.trigger';
}


JIRA.Templates.InlineIssueCreate.widget = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic-widget' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="' + soy.$$escapeHtml("What needs to be done?") + '">' + ((opt_data.summary) ? soy.$$escapeHtml(opt_data.summary) : '') + '</textarea><div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-subtle iic-widget__more" title="' + soy.$$escapeHtml("Open create dialog") + '"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml("More") + '</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.widget.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.widget';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelector = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__issue-type-selector"><button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '" width="16" height="16" />' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16" />') + '</button><div id="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelector.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelector';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="aui-icon-container" data-id="' + soy.$$escapeHtml(opt_data.id) + '" style="background-image: url(\'' + soy.$$escapeHtml(opt_data.iconUrl) + '\');">' + soy.$$escapeHtml(opt_data.name) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem';
}


JIRA.Templates.InlineIssueCreate.description = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml("New") + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.description';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","jira/inline-issue-create/lib/brace"],function(j,g){return g.Collection.extend({url:function b(){var l=_.map(this.jqls,function(m){return"query="+encodeURIComponent(m)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",l)},getEntityName:undefined,initialize:function d(l,m){this._initializeState(l,m)},_initializeState:function i(l,m){if(m&&m.jqls){this.jqls=m.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},parse:function c(l){return l.values},setJQLs:function e(l){if(_.isEqual(this.jqls,l)){return}this.jqls=l;this.fetch({reset:true})},reset:function f(){this.fetching=false;this.initialized=true;return j.Collection.prototype.reset.apply(this,arguments)},fetch:function a(m){var o=this;function l(){o.fetching=false;o.initialized=true;o.trigger("fetch:finished")}m=m||{};if(m.success){m.success=_.wrap(m.success,function n(p){l();return p.apply(o,Array.prototype.slice.call(arguments,1))})}else{m.success=l}this.trigger("fetch:started");this.fetching=true;return j.Collection.prototype.fetch.call(this,m)},isInitialized:function h(){return this.initialized},isFetching:function k(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(a){var b=a.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(a,b){return a.extend({model:b,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(a){return a.Model.extend({namedAttributes:{id:"number"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(b,c){return b.extend({model:c,comparator:function a(d){return d.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","underscore","jira/inline-issue-create/lib/brace"],function(f,b,c){return c.Model.extend({initialize:function a(){this._isSaving=false},save:function e(){var g=this;var h=f.ajax(AJS.contextPath()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});this._isSaving=true;return h.always(function i(){g._isSaving=false})},isSaving:function d(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(l,i,h,e){return i.Model.extend({issueTypesCollectionType:e,projectsCollectionType:h,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function f(){this.issueTypes=new this.issueTypesCollectionType();this.projects=new this.projectsCollectionType()},url:function c(){var n=_.map(this.jqls,function(o){return"query="+encodeURIComponent(o)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",n)},_initializeState:function k(n,o){if(o&&o.jqls){this.jqls=o.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},setJQLs:function b(n){if(_.isEqual(this.jqls,n)){return}this.jqls=n;this.fetch({reset:true})},parse:function d(o){var n=this;var q=_.map(o.issueTypes.values,function(r){return _.pick(r,_.keys(n.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(q);var p=_.map(o.projects.values,function(r){return _.pick(r,_.keys(n.projects.model.prototype.namedAttributes))});this.projects.reset(p);return _.pick(o,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function a(p){var o=this;function n(){o.fetching=false;o.initialized=true;JIRA.trace("inline.create.bootstrap.fetched")}p=p||{};if(p.success){p.success=_.wrap(p.success,function q(r){n();return r.apply(o,Array.prototype.slice.call(arguments,1))})}else{p.success=n}this.fetching=true;JIRA.trace("inline.create.bootstrap.fetching");return l.Model.prototype.fetch.call(this,p)},isInitialized:function j(){return this.initialized},isFetching:function m(){return this.fetching},fireWhenInitialized:function g(n){if(this.isInitialized()&&(!this.isFetching())){n()}else{this.listenToOnce(this,"sync",n)}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jquery","jira/inline-issue-create/lib/marionette"],function(d,f){var a=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function c(){var g=(this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName())||"";if(g){this.$el.removeClass("iic-widget__description_invisible");this.ui.selectedIssueTypeName.text(g)}else{this.$el.addClass("iic-widget__description_invisible")}}},serializeData:function b(){var g={};if(this.model.getSelectedIssueType()){g=this.model.getSelectedIssueType().toJSON()}return{issueTypeName:g.name}},onRender:function e(){this.unwrapTemplate()}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(f,n,k){var a=n.CompositeView.extend({childView:k,childViewOptions:function o(r,q){return{model:r,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},events:{"focus @ui.trigger":function b(){this.ui.trigger.click()}},modelEvents:{"change:selectedIssueType":function g(){if(this.model.getSelectedIssueType()){this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())}},"change:lockState":function j(q,r){this.render();if(r===this.model.constants.STATE_LOCK_SENDING){this.ui.trigger.attr("aria-disabled",true)}else{this.ui.trigger.attr("aria-disabled",false)}}},onChildviewSelected:function m(q){this.trigger("issueTypeSelected",q.model)},initialize:function e(){this.isDropdownShown=false;_.bindAll(this,"onDropdownShow","onDropdownHide")},serializeData:function l(){var q={};if(this.model.getSelectedIssueType()){q=this.model.getSelectedIssueType().toJSON()}return{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:q.iconUrl}},onRender:function p(){this.unwrapTemplate();this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow);this.ui.issueTypeDropdown.on("aui-dropdown2-hide",this.onDropdownHide);if(this.isDropdownShown){this.ui.trigger.click()}},onDropdownShow:function h(){this.couldYouPositionDropdownRelativelyToIssueTypeIconPleaseThankYouVeryMuch();this.isDropdownShown=true;if(this.collection.isFetching()){this.ui.issueTypeDropdown.css("display","none");this.listenToOnce(this.collection,"reset",function q(){if(this.isDropdownShown){this.ui.issueTypeDropdown.css("display","block")}})}},onDropdownHide:function c(){this.ui.trigger.removeClass("iic-widget__issue-type-selector__trigger_opened-up");this.isDropdownShown=false},calculateDropdownDirectionAndHeightPosition:function d(){var q=this.ui.issueTypeIcon.outerHeight();var r=this.ui.issueTypeDropdown.outerHeight();if(f("body").outerHeight(true)<this.ui.issueTypeIcon.offset().top+q+r){return{vAlignment:"top"}}else{return{vAlignment:"bottom"}}},couldYouPositionDropdownRelativelyToIssueTypeIconPleaseThankYouVeryMuch:function i(){var v=this.ui.issueTypeDropdown;v.attr("style","");v.appendTo(this.$el);var s=this.ui.issueTypeIcon.position();var r=this.ui.issueTypeIcon.outerHeight();var u=v.outerHeight();var q=this.calculateDropdownDirectionAndHeightPosition();var t=q.limitHeight?q.limitHeight:u;if(q.vAlignment==="top"){v.addClass("aui-dropdown2-alignment-top")}else{v.removeClass("aui-dropdown2-alignment-top")}v.attr({"data-dropdown2-alignment":"left","aria-hidden":"false"}).css({display:"block",left:s.left,top:((q.vAlignment==="top")?s.top-t:s.top+r)+"px"});if(q.limitHeight){v.css({"max-height":q.limitHeight+"px","overflow-y":"auto"})}if(q.vAlignment==="top"){this.ui.trigger.addClass("iic-widget__issue-type-selector__trigger_opened-up")}}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jquery","jira/inline-issue-create/lib/marionette"],function(c,f){var b=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function a(g){this.dropdownModel=g.dropdownModel},events:{"click a":function e(g){g.preventDefault();this.trigger("selected")}},onRender:function d(){this.unwrapTemplate()}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jquery","jira/inline-issue-create/lib/marionette"],function(e,h){var d=h.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function g(i){i.preventDefault();this.trigger("selected")}},initialize:function a(i){this.widget=i.widget;this.listenTo(this.widget,"activated",this.hide);this.listenTo(this.widget,"deactivated",this.show)},onRender:function f(){this.unwrapTemplate();if(this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE){this.hide()}},hide:function c(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function b(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){var a={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};Object.freeze(a);return a});define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(f,c,j,e){var a="iic.slectedIssueType";var k=e;var h=f.Model.extend({constants:k,defaults:{state:k.STATE_CLOSED,lockState:k.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:j,issueTypes:c,state:"",lastState:"",lockState:""},initialize:function d(m){var q;var o;if(!m||!m.selectedIssueType){if(localStorage){q=JSON.parse(localStorage.getItem(a))||{};q=q||{};o=this.getIssueTypes()&&this.getIssueTypes().find(function l(r){return r.getId()===q.id})}if(o){this.setSelectedIssueType(o)}else{if(this.getIssueTypes()){this.setSelectedIssueType(this.getIssueTypes().at(0))}}}this.on("change:selectedIssueType",function p(s){var r=this.getSelectedIssueType();if(r){localStorage.setItem(a,JSON.stringify(r.toJSON()))}});this.listenTo(this.getIssueTypes(),"reset",function n(){var r=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();var s;if(!r){r=q.id}if(r!==undefined){s=this.getIssueTypes().get(r);if(s){this.setSelectedIssueType(s)}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}})},changeState:function g(l){if(l===this.getState()){return}this.setLastState(this.getState());this.setState(l)},setSelectedIssueTypeIfAvailable:function i(m){if(m){var l=this.getIssueTypes().get(m.getId());if(l){this.setSelectedIssueType(l)}}},toIssueData:function b(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(j,x,m,a){var i=500;var b=m.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(A){var z=this.ui.summary.val();if(z.length>255){this.ui.summary.val(z.substr(0,255))}this.onSummaryChange(A)},"keydown @ui.summary":function p(A){var z=this.ui.summary.val();if(A.keyCode===a.keyCode.ENTER){A.preventDefault();if(z!==""&&z.length<=255){if(this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED){this.ui.summary.blur();this.trigger("createIssue")}else{a.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",i)}}else{a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}else{if(A.keyCode===a.keyCode.ESC){this.trigger("deactivate",{reason:"keypress"})}else{if(z.length>255){a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}}},"click @ui.cancel":function y(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("deactivate",{reason:"cancel"})}},"click @ui.more":function t(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("openFullIssueDialog")}}},modelEvents:{"change:summary":function r(){this.ui.summary.val(this.model.getSummary());this.adjustSummarySize()},"change:state":function s(z,A){if(A===this.model.constants.STATE_ACTIVE){this.activate()}else{if(A===this.model.constants.STATE_CLOSED){this.deactivate()}}},"change:lockState":function h(z,A){if(this.ui.summary.prop){if(A===this.model.constants.STATE_LOCK_SENDING){this.ui.summary.prop("disabled",true)}else{this.ui.summary.prop("disabled",false)}}}},initialize:function c(z){this.cssClass=z.cssClass||"";this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})});x.bindAll(this,"adjustSummarySize","onBodyClick")},onClose:function g(){j(document).off("click.iic",this.onBodyClick)},onBodyClick:function l(z){if(!this.$el.is(z.target)&&this.$el.has(z.target).length===0){if(this.ui.summary.val()===""){this.trigger("deactivate",{reason:"cancel"})}else{if(this.ui.summary.is(":focus")){this.ui.summary.blur()}}}},serializeData:function n(){return{summary:this.model.getSummary(),cssClass:this.cssClass}},onRender:function k(){this.unwrapTemplate();this.ui.withTitle.tooltip({aria:true});var A=this;this.ui.summary.on("change cut paste drop keydown input",function z(){x.defer(A.adjustSummarySize)});x.defer(A.adjustSummarySize);this.ui.summary.placeholder();if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.activate()}else{this.deactivate()}},adjustSummarySize:function d(){this.ui.summary.css("height","auto");var A=this.ui.summary.outerHeight();var z=Math.max(A+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),A);if(z){this.ui.summary.height(z+"px")}},reset:function v(){this.ui.summary.attr("style","")},hide:function o(){this.$el.addClass("iic-widget_hidden");j(document).off("click.iic",this.onBodyClick)},show:function u(){this.$el.removeClass("iic-widget_hidden");this.adjustSummarySize();var z=this;x.defer(function(){j(document).off("click.iic",z.onBodyClick);j(document).on("click.iic",z.onBodyClick)})},focusSummary:function w(){this.ui.summary.focus()},activate:function f(){this.show();this.trigger("activated")},focus:function q(){this.focusSummary();this.trigger("focused")},deactivate:function e(){this.hide();this.trigger("deactivated")},onSummaryChange:function r(z){this.trigger("summaryChanged",this.ui.summary.val())}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics"],function(j,H,o,l,d,G,y,C,D,f,x,r,q){function b(I){if(H.isFunction(I.parameter)){I.context[I.fieldName]=new I.parameter(I.defaultOptions)}else{if(H.isObject(I.parameter)){I.context[I.fieldName]=I.parameter}else{if(undefined===I.parameter){I.context[I.fieldName]=new I.defaultConstructor(I.defaultOptions)}}}}var n=o.Controller.extend({initialize:function e(I){this._initializeComponents(I);if(I.jqls){this.setCurrentJQLs(I.jqls)}if(I.container){this.attach(I.container)}this._initializeEvents(I)},_initializeComponents:function a(I){if(H.isFunction(I.issueTypes)){this.issueTypes=new I.issueTypes(undefined,{jqls:I.jqls})}else{if(H.isObject(I.issueTypes)){this.issueTypes=I.issueTypes}else{this.issueTypes=new G(undefined,{jqls:I.jqls})}}if(H.isFunction(I.projects)){this.projects=new I.projects(undefined,{jqls:I.jqls})}else{if(H.isObject(I.projects)){this.projects=I.projects}else{this.projects=new y(undefined,{jqls:I.jqls})}}b({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:I.model,defaultConstructor:d});b({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:I.dropdownView,defaultConstructor:f});b({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:I.descriptionView,defaultConstructor:x});this.view=new D({model:this.model,cssClass:I.cssClass});this.analytics=new q({widget:this});this._currentInlineIssue=undefined},_initializeEvents:function w(I){this.listenTo(this.view,"summaryChanged",function K(M){this.model.setSummary(M)});this.listenTo(this.view,"createIssue",this.createIssue);this.listenTo(this.view,"deactivate",this.deactivate);this.listenTo(this.view,"openFullIssueDialog",function L(){this.trigger("openCreateIssueDialog",{reason:"manual"});this.openCreateIssueDialog()});this.listenTo(this.model,"change:state",this.onStateChange);this.listenTo(this.model,"change:lockState",this.onLockStateChange);this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked);this.listenTo(this.projects,"reset",this.checkWidgetLocked);this.on("issueCreated",function J(){this.model.setSummary("")});this.checkWidgetLocked()},render:function F(){this.view.issueTypeSelector.attachView(undefined);this.view.description.attachView(undefined);this.view.render();this.view.issueTypeSelector.show(this.dropdownView);this.view.description.show(this.descriptionView);this.listenTo(this.dropdownView,"issueTypeSelected",function(I){this.model.setSelectedIssueType(I)})},onStateChange:function(I,J){if(J===this.model.constants.STATE_ACTIVE){this.trigger("activated")}else{if(J===this.model.constants.STATE_CLOSED){this.trigger("deactivated")}}},onLockStateChange:function m(I,J){if(J===this.model.constants.STATE_LOCK_PERM_INACTIVE){if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.deactivate()}}},activate:function h(){if(this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE){this.model.changeState(this.model.constants.STATE_ACTIVE);return true}else{return false}},deactivate:function g(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function z(){if(this.issueTypes.isFetching()||!this.issueTypes.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this.projects.isFetching()||!this.projects.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this._currentInlineIssue&&this._currentInlineIssue.isSaving()){return this.model.setLockState(this.model.constants.STATE_LOCK_SENDING)}if(!this.issueTypes.length){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}if(this.projects.length!==1){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED)},focus:function u(){this.view.focus()},reset:function B(){this.model.setSummary("");this.view.reset()},attach:function A(I){var J=j(I);J.append(this.view.el)},setCurrentJQLs:function i(I){this.jqls=I},setSummary:function E(I){this.model.setSummary(I)},getSummary:function s(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function v(I){this.model.setSelectedIssueTypeIfAvailable(I)},getSelectedIssueType:function c(){return this.model.getSelectedIssueType()},setOverrides:function k(I){this.overrides=I},createIssue:function t(){var I=this;var M={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:H.clone(this.overrides)};this.trigger("beforeIssueCreated",I,M);this._currentInlineIssue=new C(M);this._currentInlineIssue.save().done(function L(N){I.trigger("issueCreated",N.issue,N.prefilledFields,I,{source:"inline"});JIRA.trace("inline.create.issue.created")}).fail(function J(N){var R=new jQuery.Deferred();I.openCreateIssueDialog(R);try{var Q=JSON.parse(N.responseText);R.resolve({errors:Q.errors,errorMessages:Q.generalErrors,prefilledFields:Q.prefilledFields})}catch(P){l.error(I,"Could not parse response: "+P,N);var O="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";R.resolve({errors:{},errorMessages:[O],prefilledFields:{}})}I.trigger("openCreateIssueDialog",{reason:"createFailed"})}).always(function K(){I.checkWidgetLocked()});this.checkWidgetLocked()},openCreateIssueDialog:function p(M){var I=this;var J=this.model.toIssueData();if(this.projects.size()===1){J.project=this.projects.at(0).toJSON()}var K={summary:J.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():undefined,overrides:H.clone(this.overrides)};this.trigger("beforeIssueCreated",I,K);if(!M){M=this._resolveInlineContext(K,I)}var L=r.createPrefillableCreateIssueForm(M.promise(),true);return L.pipe(function(P){var O=P.asDialog();function N(R,Q){I.trigger("issueCreated",Q,Q.fields,I,{source:"dialog"});JIRA.trace("inline.create.issue.created")}P.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",N);this.configurableForm.bind("issueCreated",N)});O.show();return O})},_resolveInlineContext:function(L,I){var M=new jQuery.Deferred();var N=j.ajax(AJS.contextPath()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(L),contentType:"application/json",type:"POST"});N.done(function J(O){M.resolve({prefilledFields:O.createIssueInput})}).fail(function K(){M.resolve({prefilledFields:{summary:L.summary?L.summary:"",issuetype:I.model.getSelectedIssueType()?I.model.getSelectedIssueType().getId():undefined}})});return M}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/marionette"],function(g){return g.Controller.extend({initialize:function a(h){this.loadTimestamp=new Date().getTime();var i=h.widget;this.widgetId=i.model.cid.substring(1);this.listenTo(i,"issueCreated",this.onIssueCreated);this.listenTo(i,"openCreateIssueDialog",this.onOpenCreateIssueDialog);this.listenTo(i,"activated",this.onActivated);this.listenTo(i,"deactivated",this.onDeactivated)},triggerAnalytics:function e(i,j){var h=_.defaults({},j,{instance:this.widgetId,timestarted:this.loadTimestamp});AJS.trigger("analyticsEvent",{name:"jira.inlinecreate."+i,data:h})},onOpenCreateIssueDialog:function d(h){this.triggerAnalytics("openDialog",{reason:h.reason})},onIssueCreated:function c(h,j,k,i){if(i.source==="inline"){this.triggerAnalytics("issueCreatedInline")}else{this.triggerAnalytics("issueCreatedDialog")}},onDeactivated:function b(){this.triggerAnalytics("deactivated")},onActivated:function f(){this.triggerAnalytics("activated")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function WidgetGroup(e,h,j,c){var d=h.Controller.extend({initialize:function f(k){this.TriggerView=k.TriggerView;this.Widget=j;this.widgets={};this.currentJQLs=undefined;this.createdCallback=k.createdCallback;this.activeWidget=undefined;this.inlineBootstrap=k.inlineBootstrap||new c();this.widgetOptions=_.defaults(k.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects})},getWidget:function a(k){if(!this.widgets[k]){this.widgets[k]=this._createNewWidget(k)}return this.widgets[k]},setCurrentJqls:function i(k){this.currentJQLs=k;_.each(this.widgets,function l(m){m.widget.setCurrentJQLs(k)});this.inlineBootstrap.setJQLs(k)},activateWidget:function b(m){if(this.activeWidget===m){m.focus();return}var n=this.activeWidget;this.activeWidget=undefined;_.each(this.widgets,function l(o){if(o!==m){o.widget.deactivate()}});var k=m.activate();if(k){m.focus();this.activeWidget=m;this.trigger("widget:activated",m,n);if(n){m.setSummary(n.getSummary());m.setSelectedIssueTypeIfAvailable(n.getSelectedIssueType());n.reset()}}return k},_createNewWidget:function g(p){var m=this;var o=new this.Widget(this.widgetOptions);o.on("deactivated",function k(){if(m.activeWidget===o){m.activeWidget=undefined;o.reset()}});if(this.createdCallback){this.createdCallback(o,p)}if(this.currentJQLs){o.setCurrentJQLs(this.currentJQLs)}var l=new m.TriggerView({widget:o});l.on("selected",function(){m.activateWidget(o)});return{widget:o,trigger:l,render:function n(q){l.render();q.append(l.$el);o.attach(l.$el);o.render();m.trigger("widget:rendered",o,l,q)}}}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-helppath-constants.js-gh-hp' */
/*globals GH*/
define('jira/inline-issue-create/agile/helppath-constants', [], function () {

    "use strict";

    // watch out for the gh-jsHelpPaths transformer - the invocations must go inline
    return {
        configureBoard: GH && {"url":"https://docs.atlassian.com/jira/jsw-docs-071/Configuring+a+Board","isLocal":false} || {}
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create.soy' */
// This file was automatically generated from agile-plan-inline-issue-create.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.Agile.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }
if (typeof JIRA.Templates.InlineIssueCreate.Agile == 'undefined') { JIRA.Templates.InlineIssueCreate.Agile = {}; }


JIRA.Templates.InlineIssueCreate.Agile.description = function(opt_data, opt_ignored) {
  var output = '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml("New") + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span> ' + soy.$$escapeHtml("in") + ' ';
  if (opt_data.sections.length >= 1) {
    output += '<button type="button" aria-owns="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true" class="iic-widget__description__section-select-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-style-default">' + soy.$$escapeHtml(opt_data.currentSection) + '</button><div id="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" class="iic-widget__description__section-select aui-dropdown2 aui-style-default"><ul class="aui-list-truncate">';
    var sectionList25 = opt_data.sections;
    var sectionListLen25 = sectionList25.length;
    for (var sectionIndex25 = 0; sectionIndex25 < sectionListLen25; sectionIndex25++) {
      var sectionData25 = sectionList25[sectionIndex25];
      output += '<li><a href="#" data-section-id="' + soy.$$escapeHtml(sectionData25.id) + '">' + soy.$$escapeHtml(sectionData25.translatedName) + '</a></li>';
    }
    output += '</ul></div><!-- .aui-dropdown2 -->';
  } else {
    output += soy.$$escapeHtml(opt_data.currentSection);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.description';
}


JIRA.Templates.InlineIssueCreate.Agile.configurationIssue = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("Due to the configuration for this particular board, you\x27ll have to use the full dialog to create a new issue.") + ((opt_data.url) ? ' <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml("Learn more") + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.configurationIssue.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.configurationIssue';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-issue-types.js' */
define("jira/inline-issue-create/agile/entities/issue-types",["jira/inline-issue-create/entities/issue-types"],function(b){var a=b.extend({parse:function e(g){var f=b.prototype.parse.apply(this,arguments);return this.filterOutGHEpics(f)},reset:function d(f){var g=this.filterOutGHEpics(f);return b.prototype.reset.apply(this,[g])},filterOutGHEpics:function c(g){var f=GH.EpicConfig.getEpicIssueTypeId();if(g&&f){return _.filter(g,function(h){return h.id!==f})}return g}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-description.js' */
define("jira/inline-issue-create/agile/views/description",["jira/inline-issue-create/views/description","jquery","underscore"],function(m,d,k){var a=m.extend({template:JIRA.Templates.InlineIssueCreate.Agile.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name",sectionDropdownTrigger:".iic-widget__description__section-select-trigger",sectionDropdown:".iic-widget__description__section-select",sectionDropdownItem:".iic-widget__description__section-select a"},events:{"click @ui.sectionDropdownItem":function j(n){n.preventDefault();this.trigger("selected",d(n.target))}},modelEvents:k.extend({"change:lockState":function h(n,o){if(o===this.model.constants.STATE_LOCK_SENDING){this.disable()}else{this.enable()}}},m.prototype.modelEvents),initialize:function e(){k.bindAll(this,"onDropdownShow","onDropdownHide")},onRender:function l(){this.unwrapTemplate();this.ui.sectionDropdown.on("aui-dropdown2-show",this.onDropdownShow);this.ui.sectionDropdown.on("aui-dropdown2-hide",this.onDropdownHide)},onDropdownHide:function b(){this.ui.sectionDropdownTrigger.removeClass("iic-widget__description__section-select-trigger_opened-up")},disable:function c(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",true)}},enable:function f(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",false)}},onDropdownShow:function g(){var r=this.ui.sectionDropdown;r.appendTo(this.$el);var q=this.ui.sectionDropdownTrigger.position();var p=this.ui.sectionDropdownTrigger.outerHeight();var o=r.height();var n="bottom";if(d("body").outerHeight(true)<this.ui.sectionDropdownTrigger.offset().top+p+o){n="top";r.addClass("aui-dropdown2-alignment-top")}else{r.removeClass("aui-dropdown2-alignment-top")}r.attr({"data-dropdown2-alignment":"left","aria-hidden":"false"}).css({display:"block",left:q.left,top:(n==="top")?q.top-o:q.top+p+"px"});if(n==="top"){this.ui.sectionDropdownTrigger.addClass("iic-widget__description__section-select-trigger_opened-up");k.defer(function s(){r.find("a.aui-icon-container").removeClass("active aui-dropdown2-active");r.find("a.aui-icon-container:last").addClass("active aui-dropdown2-active");r.trigger("aui-dropdown2-item-selected")})}},serializeData:function i(){var o={};var r=this.allSections.get(this.currentSectionId);if(this.model.getSelectedIssueType()){o=this.model.getSelectedIssueType().toJSON()}var n=this.currentSectionId||-1;var q=this.allSections.toJSON().filter(function p(s){return s.id!==n});return{issueTypeName:o.name,widgetId:this.model.cid,currentSection:(r)?r.getTranslatedName():"",sections:q}}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-widget.js' */
define("jira/inline-issue-create/agile/widget",["jira/inline-issue-create/widget","jira/inline-issue-create/agile/helppath-constants"],function(d,a){var c=d.extend({activate:function b(){if(this.model.getLockState()===this.model.constants.STATE_LOCK_PERM_INACTIVE){var e=this.openCreateIssueDialog();e.done(function(f){f.onContentReady(function(){JIRA.applyMessageToForm("info",f.$form,JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:a.configureBoard.url}),true)})});return false}return d.prototype.activate.call(this)}});return c});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-group.js' */
define("jira/inline-issue-create/agile/widget-group",["jira/inline-issue-create/agile/widget","jira/inline-issue-create/agile/issue-type-dropdown","jira/inline-issue-create/widget-group","jquery","jira/inline-issue-create/util"],function(m,d,b,e,l){return b.extend({initialize:function f(){b.prototype.initialize.apply(this,arguments);this.Widget=m;this.boardJQL=undefined;this.filterJQLs=undefined;_.bindAll(this,"issueCreatedHandler","addOverridesOnBeforeIssueCreated");this.on("widget:rendered",this.widgetRenderedHandler);this.widgetOptions.dropdownView=d},widgetRenderedHandler:function j(q,o,n){var p=n.parent(".ghx-meta");p.addClass("plan-inline-create-inside")},issueCreatedHandler:function a(o,r,t){var q=this;t.analytics.triggerAnalytics("plan.created");var p=GH.BacklogView._scrollToView;GH.BacklogView._scrollToView=e.noop;var s=e("#ghx-backlog");var u=s.scrollTop();GH.BacklogController.reloadAndSelectCreatedIssues([o]).done(function n(){GH.BacklogView._scrollToView=p;if(!GH.BacklogModel.isIssueVisible(o.issueKey)){t.analytics.triggerAnalytics("plan.createdNotVisible")}s.scrollTop(u);l.scrollElementToView(s,t.view.$el);if(t.model.getLockState()!==t.model.constants.STATE_LOCK_PERM_INACTIVE){q.activateWidget(t)}JIRA.trace("inline.create.backlog.refreshed")})},addOverridesOnBeforeIssueCreated:function i(q,p){p.overrides=p.overrides||{};var n=GH.EpicController.getFilteredEpicKey();if(n&&n!=="none"){var r=GH.EpicConfig.getEpicLinkFieldName();p.overrides[r]=n}var o=GH.VersionController.getFilteredVersionId();if(o&&o!=="none"){p.overrides.fixVersion=o}},_createNewWidget:function h(o){var n=b.prototype._createNewWidget.apply(this,arguments);n.widget.on("beforeIssueCreated",this.addOverridesOnBeforeIssueCreated);n.widget.on("issueCreated",this.issueCreatedHandler);return n},setBoardJQL:function c(n){this.boardJQL=n;this._syncJQLs()},_syncJQLs:function k(){var n=[];if(this.boardJQL){n.push(this.boardJQL)}n.push.apply(n,this.filterJQLs);if(n.length){this.setCurrentJqls(n)}},setFilterJQLs:function g(n){this.filterJQLs=n;this._syncJQLs()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-type-dropdown.js' */
define("jira/inline-issue-create/agile/issue-type-dropdown",["jquery","jira/inline-issue-create/util","jira/inline-issue-create/views/issue-type-dropdown"],function(c,a,d){return d.extend({calculateDropdownDirectionAndHeightPosition:function b(){var h=this.ui.issueTypeIcon.outerHeight();var i=this.ui.issueTypeIcon.offset().top;var j=this.ui.issueTypeDropdown.outerHeight();var f=c("#ghx-backlog").offset().top;var e=i-f;var g=c("body").outerHeight(true)-(i+h);a.trace(this,"spaceBelow",g,"visibleSpaceAbove",e,"dropdownContentHeight",j);if(g>j){a.debug(this,"Positioning down - full");return{vAlignment:"bottom"}}else{if(e>j){a.debug(this,"Positioning up - full");return{vAlignment:"top"}}else{if(g>e){a.debug(this,"Positioning down - limited",g);return{vAlignment:"bottom",limitHeight:g-10}}else{a.debug(this,"Positioning up - limited",e);return{vAlignment:"top",limitHeight:e-10}}}}}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml("See our documentation for the list of supported browsers.") + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml("This board has been updated") + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml("Refresh") + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml("Ignore") + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(c){var b=c("underscore");function a(d){if(d){b.extend(d,a.prototype)}else{d=this}d._bindings=[];return d}a.prototype={on:function(f,e,d){if(d){this._off({type:f,context:d})}this._bindings.push({type:f,handler:e,context:d});return this},off:function(d){if(b.isString(d)){this._off({type:d})}else{if(b.isFunction(d)){this._off({handler:d})}else{if(b.isObject(d)){this._off({context:d})}}}return this},_off:function(d){this._bindings=b.reject(this._bindings,function(h){var g=!d.type||d.type===h.type;var f=!d.context||d.context===h.context;var e=!d.handler||d.handler===h.handler;return g&&f&&e})},trigger:function(e){var d=Array.prototype.slice.call(arguments,1);b.each(this._bindings,function(f){if(f.type===e){f.handler.apply(f.context,d)}});return this}};return a});AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(a){var b=a("jira-agile/rapid/events");return new b()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-namespace.js' */
if(typeof GH!=="object"){window.GH={}}GH.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}c[f[b]]=e||c[f[b]]||{};return c[f[b]]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
GH.namespace("GH.Config");GH.Config={};GH.Config.isSampleDataAvailable=false;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
GH.namespace("GH.Ajax");GH.Ajax={};GH.Ajax.CONTEXT_PATH=AJS.contextPath();GH.Ajax.REST_URL_BASE="/rest/greenhopper/1.0";GH.Ajax.PUBLIC_REST_URL_BASE="/rest/agile/1.0";GH.Ajax.xhrRegistery={};GH.Ajax.stallTimeout=300;GH.Ajax.get=function(a,c){AJS.$.extend(a,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var b=GH.Ajax._executeGet(a,c);return b.pipe(function(d,f,e){return AJS.$.Deferred().resolveWith(this,[d.success,f,e])})};GH.Ajax.post=function(a){a=GH.Ajax._getSettings(a,true);AJS.$.extend(a,{type:"POST",contentType:"application/json"});return GH.Ajax._executeStore(a)};GH.Ajax.put=function(a){a=GH.Ajax._getSettings(a,true);a.type="PUT";return GH.Ajax._executeStore(a)};GH.Ajax.del=function(a){a=GH.Ajax._getSettings(a,true);a.type="DELETE";return GH.Ajax._executeStore(a)};GH.Ajax._getSettings=function(a,b){if(!a.bareUrl&&a.url){a.bareUrl=GH.Ajax.buildRestUrl(a.url)}if(a.bareUrl){a.url=a.bareUrl}if(!a.dataType){a.dataType="json"}if(a.data&&b){a.data=JSON.stringify(a.data)}a.contentType="application/json";return a};GH.Ajax._getXhrData=function(b){var a={timestamp:0};if(b){if(GH.Ajax.xhrRegistery[b]){a=GH.Ajax.xhrRegistery[b]}else{a=GH.Ajax.xhrRegistery[b]=a}}return a};GH.Ajax._executeGet=function(c,g){c=GH.Ajax._getSettings(c);var b=GH.Ajax._getXhrData(g);if(b.xhr){GH.log("aborting request for "+g,GH.Logger.Contexts.ajax);b.xhr.abort();delete b.xhr;delete b.xhrAbort;delete b.timeoutId}var f=b.timestamp;b.timestamp=new Date().getTime();if(b.timestamp-f<GH.Ajax.stallTimeout){GH.log("stalling request for "+g+", time since last request: "+(b.timestamp-f),GH.Logger.Contexts.ajax);var a=AJS.$.Deferred();var e;var d=function(){e=GH.Ajax._executeGet(c,g);e.then(a.resolve,a.reject)};b.timeoutId=window.setTimeout(d,GH.Ajax.stallTimeout);b.xhr=a.promise();b.xhr.abort=function(){if(e){e.abort.apply(e,arguments)}else{clearTimeout(b.timeoutId)}}}else{GH.log("executing request for "+g,GH.Logger.Contexts.ajax);b.xhr=GH.Ajax.makeRequest(c)}b.xhrAbort=b.xhr.abort;b.xhr.abort=function(){var i=b.xhr;var h=b.xhrAbort;if(i&&h){return h.apply(i,arguments)}};b.xhr.done(function(){if(b.xhr){delete b.xhr}}).fail(function(){if(b.xhr){delete b.xhr}});return b.xhr};GH.Ajax._executeStore=function(b){b=b||{};if(b.data&&typeof(b.data)==="string"){if(/\?\?/.test(b.data)){var a="\\u003F\\u003F";b.data=b.data.replace(/\?\?/g,a)}}b.dataType="json";return GH.Ajax.makeRequest(b)};GH.Ajax.makeRequest=function(d){var a=AJS.$.Deferred();d=_.extend(d,{success:function(){a.resolveWith(this,arguments)},error:function(){a.rejectWith(this,arguments)}});var c=a.promise(JIRA.SmartAjax.makeRequest(d));var e=c.abort;c.abort=function(f){c.abortMarker=f!="timeout";return e.apply(c,arguments)};var b=c.pipe(GH.Ajax._generateDoneInterceptor(),GH.Ajax._generateFailInterceptor(d.errorsNoAutoEscape));if(!d.deferErrorHandling){b.fail(GH.Ajax._generateErrorHandler(d.onGlobalError,d.errorContextMap,d.contextualErrorRenderer,d.globalErrorDismissable))}return b};GH.Ajax._generateDoneInterceptor=function(){return function(a,c,b){a=a||{};a=GH.Ajax._createExtendedResult(a);if(!GH.Ajax.matchesCurrentUser(b)){return GH.Ajax._handleCurrentUserChanged(b)}if(!a.isSuccess()){return AJS.$.Deferred().rejectWith(this,[a,b,c,null])}return AJS.$.Deferred().resolveWith(this,[a,c,b])}};GH.Ajax._generateFailInterceptor=function(a){return function(d,h,g){if(d.abortMarker){return AJS.$.Deferred()}if(!GH.Ajax.matchesCurrentUser(d)){return GH.Ajax._handleCurrentUserChanged(d)}var c={},b=null;if(d.responseText){try{c=JSON.parse(d.responseText)}catch(f){}}if(c.errors||c.errorMessages){b=GH.Ajax._convertJiraErrors(c,a)}else{if(c.message){b=GH.Ajax._convertFrameworkErrors(c)}}if(!b){b=GH.Ajax._convertGenericErrors(d,g)}return AJS.$.Deferred().rejectWith(this,[b,d,h,g])}};GH.Ajax.handleContextualErrors=function(b,a,c){a=a||{};if(!b.hasContextualErrors()){return false}AJS.$(b.getContextualErrors()).each(function(e,f){var d=a[f.contextId];if(!d){AJS.$(f.errors).each(function(h,i){b.addGlobalError(i)})}else{if(AJS.$.isFunction(d)){d(f,b)}else{d=AJS.$(d);d.siblings(".ghx-error").remove();var g;if(c){g=c(f)}else{g=GH.tpl.rapid.notification.renderContextualErrors({errors:f.errors})}d.after(g)}}});return true};GH.Ajax.handleGlobalErrors=function(c,b,a){if(!c.hasGlobalErrors()){return false}GH.Notification.showErrors({errors:c.getGlobalErrors()},a);if(b&&(b instanceof Function)){b(c)}return true};GH.Ajax.buildRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.buildBareRestUrl(GH.Ajax.REST_URL_BASE+a)};GH.Ajax.buildPublicRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.buildBareRestUrl(GH.Ajax.PUBLIC_REST_URL_BASE+a)};GH.Ajax.buildBareRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.CONTEXT_PATH+a};GH.Ajax._createExtendedResult=function(a){if(!a){return GH.Ajax._extendResult({success:true})}else{return GH.Ajax._extendResult({success:a})}};GH.Ajax._extendResult=function(a){return AJS.$.extend(a,{getGlobalErrors:function(){return a.error?a.error.errors:null},getContextualErrors:function(){return a.error?a.error.contextualErrors:null},hasGlobalErrors:function(){return a.error&&a.error.errors&&a.error.errors.length>0},hasContextualErrors:function(){return a.error&&a.error.contextualErrors},addGlobalError:function(b){if(!a.error){a.error={}}if(!a.error.errors){a.error.errors=[]}a.error.errors[a.error.errors.length]=b},getSuccessObject:function(){return a.success},isSuccess:function(){return !a.error}})};GH.Ajax._generateErrorHandler=function(d,b,c,a){return function(e){GH.Ajax.handleContextualErrors(e,b,c);GH.Ajax.handleGlobalErrors(e,d,a)}};GH.Ajax._convertJiraErrors=function(a,e){var c=a.errorMessages?a.errorMessages:[];c=_.map(c,function(f){return{message:f,noAutoescape:e}});var b=a.errors?a.errors:{};b=_.map(b,function(g,f){return{contextId:f,errors:[{message:g,noAutoescape:e}]}});var d={error:{errors:c,contextualErrors:b}};return GH.Ajax._extendResult(d)};GH.Ajax._convertFrameworkErrors=function(a){var b={error:{errors:[{message:a.message}],contextualErrors:[]}};return GH.Ajax._extendResult(b)};GH.Ajax._convertGenericErrors=function(b,c){var a=GH.Ajax._extendResult({});if(b.responseText){GH.log("Got an error response with text that we don't know how to parse: "+b.responseText)}if(b.status===0&&c==="abort"){a.addGlobalError({message:"Request timed out"})}else{if(c){a.addGlobalError({message:c})}else{GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging")}}return a};GH.Ajax._hasUsernameResponseHeader=function(a){return !!a.getResponseHeader("X-AUSERNAME")};GH.Ajax._getUserForResponse=function(a){return a.getResponseHeader("X-AUSERNAME")?decodeURIComponent(a.getResponseHeader("X-AUSERNAME")):"anonymous"};GH.Ajax.getUserFromAJS=function(){var a=AJS.Meta.get("remote-user");return a?a:"anonymous"};GH.Ajax.matchesCurrentUser=function(a){return !a.getResponseHeader||!a.getAllResponseHeaders||!GH.Ajax._hasUsernameResponseHeader(a)||GH.Ajax.getUserFromAJS()===GH.Ajax._getUserForResponse(a)||(a.status===204&&!a.getAllResponseHeaders()&&AJS.$.browser.msie)};GH.Ajax._handleCurrentUserChanged=function(c){var b=GH.Ajax.getUserFromAJS();var a=GH.Ajax._getUserForResponse(c);if(b!=="anonymous"&&a==="anonymous"){GH.log("User changed. original: "+b+" new: "+a+". Redirecting to the login page");location.href=GH.Navigation.getLoginUrl()}else{GH.log("User changed. original: "+b+" new: "+a+". Reloading the page");location.reload()}return AJS.$.Deferred()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Logger.js' */
GH.namespace("GH.Logger");GH.Logger={};GH.Logger.Contexts={};GH.Logger.Contexts.ajax="ajax";GH.Logger.Contexts.event="event";GH.Logger.Contexts.state="state";GH.Logger.Contexts.ui="ui";GH.Logger.Contexts.callback="callback";GH.Logger.Contexts.refresh="refresh";GH.Logger.enabledContexts=[GH.Logger.Contexts.ajax,GH.Logger.Contexts.event,GH.Logger.Contexts.state,GH.Logger.Contexts.ui,GH.Logger.Contexts.callback,GH.Logger.Contexts.refresh];GH.Logger.log=function(c,b){if(!b||_.contains(GH.Logger.enabledContexts,b)){var a=b?GH.Logger.pad(b,6)+": "+c:c;AJS.log(a)}};GH.Logger.pad=function(b,a){if(b.length<a){return b+"                               ".substr(0,a-b.length)}return b};GH.Logger.timeMap={};GH.Logger.timeStart=function(a){if(!a){throw ("start: If starting a timer manually a name must be set")}else{GH.Logger.timeMap[a]=(new Date()).getTime()}};GH.Logger.timeStop=function(a){if(a in GH.Logger.timeMap){var b=(new Date()).getTime()-GH.Logger.timeMap[a];delete GH.Logger.timeMap[a];GH.Logger.log(b+"ms on "+a,GH.Logger.Contexts.ui)}else{throw ("stop:"+a+" not found")}};GH.log=GH.Logger.log;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.js' */
GH.namespace("GH.Notification");GH.Notification={};GH.Notification.autoHideEnabled=true;GH.Notification.showErrors=function(d,a){var b=GH.Notification.prepareNotificationDiv();var c=GH.tpl.rapid.notification.renderErrorMessages(d);if(typeof a=="undefined"){a=true}AJS.messages.error(b,{title:"Error",body:c,closeable:a});if(GH.Notification._divStyle(b)){b.css(GH.Notification._divStyle(b))}b.show()};GH.Notification.showWarnings=function(f,e){var b={autoHide:true,autoHideDelay:5000,preRendered:false,showTitle:false};e=_.extend({},b,e);var c=GH.Notification.prepareNotificationDiv();var a;if(!e.preRendered){a=GH.tpl.rapid.notification.renderErrorMessages({errors:f})}else{a=f}var d={body:a,closeable:true};if(e.showTitle){d.title="Warning"}AJS.messages.warning(c,d);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(e.autoHide&&GH.Notification.autoHideEnabled){setTimeout(function(){c.hide()},e.autoHideDelay)}};GH.Notification.showWarning=function(b){var a=GH.Notification.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});if(GH.Notification._divStyle(a)){a.css(GH.Notification._divStyle(a))}a.show()};GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()};GH.Notification.handleDateFormatMismatchError=function(c){var b='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';b+="Advanced Settings";b+="</a>";var a=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",b);GH.Notification.showWarnings(a,{autoHide:false,preRendered:true})};GH.Notification.auiMessage=function(b){var a=_.extend({type:"generic",icon:true,messageHtml:false},b);return GH.tpl.rapid.notification.renderAuiMessage({type:a.type,title:a.title,icon:a.icon,messageHtml:a.messageHtml,message:a.message})};GH.Notification.Handler={_defaultNotificationHandler:function(){var a=AJS.$("<div/>");AJS.$(".global-msg").remove();a.addClass("global-msg").appendTo("body");return a},_defaultDivStyleHandler:function(a){return{marginLeft:-a.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(a){this._customDivStyleHandler=a;this._useDefault=false},_useDefault:true,setCustomNotificationHandler:function(a){this._customNotificationHandler=a;this._useDefault=false},removeCustomHandlers:function(){this._useDefault=true},getNotificationHandler:function(){if(!this._useDefault&&this._customNotificationHandler!=null){return this._customNotificationHandler}else{return this._defaultNotificationHandler}},getDivStyleHandler:function(){if(!this._useDefault&&this._customDivStyleHandler!=null){return this._customDivStyleHandler}else{return this._defaultDivStyleHandler}}};GH.Notification._divStyle=function(b){var a=GH.Notification.Handler.getDivStyleHandler();return a(b)};GH.Notification.prepareNotificationDiv=function(){var a=GH.Notification.Handler.getNotificationHandler();return a()};GH.Notification.showSuccess=function(d,b){clearTimeout(GH.Notification.current);var a={timeout:5000,closeable:true,shadowed:true};b=_.extend(a,b,{body:d});var c=GH.Notification.prepareNotificationDiv();AJS.messages.success(c,b);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(GH.Notification.autoHideEnabled){GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},b.timeout)}};GH.Notification.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){d=c.getItem("selectedIssueId")}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Notification.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Notification.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Notification.showSuccess(b)}};GH.Notification.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Notification._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Notification.showWarning(b);break;case"success":default:GH.Notification.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};GH.Notification.showBoardUpdatedMessage=function(){GH.Notification.clearBoardUpdatedMessage();var b=AJS.$.Deferred();var a=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");a.data("deferred",b);a.find(".js-refresh-now").click(function(c){c.preventDefault();a.removeData("deferred");GH.Notification.clearBoardUpdatedMessage();b.resolve()});a.find(".js-ignore-refresh").click(function(c){c.preventDefault();GH.Notification.clearBoardUpdatedMessage()});return b.promise()};GH.Notification.clearBoardUpdatedMessage=function(){var a=AJS.$("#ghx-update-message");if(a.length){var b=a.data("deferred");if(b&&b.reject){b.reject()}a.remove()}};GH.Notification.isBoardUpdatedMessageVisible=function(){var a=AJS.$("#ghx-update-message");return a.length>0};AJS.$(document).ready(function(){GH.Notification.showIssueMessage();if(GH.storage){GH.Notification._displayPageLoadMessages()}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
GH.namespace("GH.storage");GH.storage={};GH.storage.get=function(a,d){var c;if(d){c=sessionStorage.getItem(a)}else{c=localStorage.getItem(a)}if(typeof c==="string"){try{return JSON.parse(c)}catch(b){GH.log("GH.storage: Caught error: "+b);GH.log("GH.storage: Cannot parse json string retrieved from "+(d?"session":"local")+" storage. Ignoring value "+c);return undefined}}else{return c}};GH.storage.put=function(b,c,d){if(c===null||c===undefined){if(d){sessionStorage.removeItem(b)}else{localStorage.removeItem(b)}}else{try{if(d){sessionStorage.setItem(b,JSON.stringify(c))}else{localStorage.setItem(b,JSON.stringify(c))}}catch(a){return false}}return true};if(!window.localStorage||!window.sessionStorage){GH.storage.get=function(){return null};GH.storage.put=function(){return false}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
GH.namespace("GH.Validation");GH.Validation={};GH.Validation.notBlank=function(c,b,a){var d=GH.Validation.applyRules(c,b,a,function(){return AJS.$.trim(AJS.$(c).val()).length>0});return d};GH.Validation.maxLength=function(d,a,c,b){var e=GH.Validation.applyRules(d,c,b,function(){return AJS.$.trim(AJS.$(d).val()).length<=a});return e};GH.Validation.isPositiveInteger=function(c,b,a){var d=GH.Validation.applyRules(c,b,a,function(){return(/^\d*$/).test(AJS.$.trim(AJS.$(c).val()))});return d};GH.Validation.applyRules=function(d,b,a,c){d=AJS.$(d);errorCtx=a?AJS.$(a):d;var e=c.call(this);if(!e){GH.Validation.showContextualErrors(errorCtx,b);return false}return true};GH.Validation.showContextualErrors=function(e,a,d,c,b){GH.Validation.clearContextualErrors(e);e.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:AJS.I18n.getText(a,d,c,b)}]}))};GH.Validation.clearContextualErrors=function(a){a=AJS.$(a);a.find(".ghx-error").remove();a.siblings(".ghx-error").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
GH.namespace("GH.HelpPaths");GH.HelpPaths.getHelpPath=function(a){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
GH.namespace("GH.Message");GH.Message={};GH.Message.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){if(!d){d=c.getItem("selectedIssueId")}}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Message.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Message.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Message.showSuccess(b)}};GH.Message.prepareNotificationDiv=function(){var a=AJS.$("#gh-notification");if(a.length==0){a=AJS.$('<div id="gh-notification"></div>');AJS.$("#gh").append(a)}a.text("");return a};GH.Message.preparePresistentNotificationDiv=function(){var a=AJS.$("#gh-persistent-notification");if(a.length==0){a=AJS.$('<div id="gh-persistent-notification"></div>');AJS.$("#gh").append(a)}a.text("");return a};GH.Message.showSuccess=function(b){var a=GH.Message.prepareNotificationDiv();AJS.messages.success(a,{body:b});a.show();setTimeout('AJS.$("#gh-notification").hide()',5000)};GH.Message.showWarning=function(b){var a=GH.Message.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});a.show()};GH.Message.showPersistentWarning=function(b){var a=GH.Message.preparePresistentNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});a.show()};GH.Message.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Message._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Message.showWarning(b);break;case"success":default:GH.Message.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};AJS.$(document).ready(function(){GH.Message.showIssueMessage();if(GH.storage){GH.Message._displayPageLoadMessages()}});AJS.$(document).ready(function(){var a=AJS.$("#footer");var b=a.find(".footer-body:first ul:first");var c=a.find("#ghx-footer");b.before(c);c.css({visibility:""})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
GH.namespace("GH.Util");GH.Util.getPluginKey=function(){return AJS.$('meta[name="ghx-plugin-key"]').attr("content")};GH.Util.wrapPreventDefault=function(b,a){return function(c){c.preventDefault();return b.apply(a||this,arguments)}};GH.Util.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}};GH.Util.andThen=function(b){var a=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return AJS.$.Deferred(function(c){_.each(a,function(g){var d=g.on,e=g.trigger;var f=_.isFunction(g.filter)&&g.filter;b[d](function(){var h=f&&f.apply(this,arguments);if(h&&_.isFunction(h.promise)){h.promise().done(c.resolve).fail(c.reject).progress(c.notify)}else{var i;if(h&&_.isArray(h._needsSplice)){i=h._needsSplice}else{if(f){i=[h]}else{i=arguments}}c[e](_.isFunction(this.promise)?c.promise():this,i)}})})}).promise()};AJS.$._OriginalDeferred=AJS.$.Deferred;AJS.$.Deferred=function(a){return AJS.$._OriginalDeferred(function(c){c.andThen=function(){var d=Array.prototype.slice.call(arguments);d.unshift(c);return GH.Util.andThen.apply(this,d)};var b=c.promise;c.promise=function(){var d=b.apply(this,arguments);d.andThen=function(){var e=Array.prototype.slice.call(arguments);e.unshift(d);return GH.Util.andThen.apply(this,e)};return d};if(a){a.call(c,c)}})};GH.Util.indexOf=function(d,c,b){var a=-1;if(b){d=d.slice().reverse()}_.some(d,function(f,e){if(c(f,e)){a=b?d.length-1-e:e;return true}return false});return a};GH.Util.swapArrayItems=function(d,a,c){var b;if(d&&a!==c&&Math.min(a,c)>=0&&Math.max(a,c)<d.length){b=d[c];d[c]=d[a];d[a]=b;return true}return false};GH.Util.roundToDecimalPlaces=function(d,c){if(typeof d!=="number"||d===Math.round(d)){return d}if(c===0){return Math.round(d)}var g=d.toString();if(g.indexOf("e")>=0){return d}var a=d<0;var f=g.split(".");var e=+(f[1].charAt(c));f[1]=f[1].substr(0,c);if(e>5||(!a&&e===5)){var b=/^0*/.exec(f[1])[0];f[1]=b+(+f[1]+1);if(f[1].length>c){if(b){f[1]=f[1].substr(f[1].length-c)}else{f[0]=+f[0]+1;f[1]=0}}}return parseFloat(f.join("."))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
GH.namespace("GH.UserData");GH.UserData={};GH.UserData.remoteUser=AJS.Meta.get("remote-user");GH.UserData.loggedIn=!!GH.UserData.remoteUser;GH.UserData.hasUser=function(){return GH.UserData.loggedIn};GH.UserData.getUserName=function(){return GH.UserData.remoteUser};GH.UserData.canCreateProject=function(){return GH.UserData.userConfig.canCreateProject};GH.UserData.setGlobalConfig=function(a){GH.UserData.quickCreateDefaultIssueTypeId=a.quickCreateDefaultIssueTypeId;GH.UserData.userConfig=a.userConfig;if(GH.UserData.userConfig&&GH.UserData.userConfig.canCreateProject){GH.UserData.userConfig.canCreateProject=!GH.Features.DISABLE_CREATE_PROJECT.isEnabled()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-features.js' */
(function(){function a(b){this.featureKey=b}a.prototype.isEnabled=function(){return AJS.DarkFeatures.isEnabled(this.featureKey)};GH.namespace("GH.Features");GH.Features={DISABLE_CREATE_PROJECT:new a("jag.DISABLE_CREATE_PROJECT")}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
GH.namespace("GH.Navigation");GH.Navigation={};GH.Navigation.gotoDefaultRapidBoardPage=function(b,a){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(b,a)};GH.Navigation.getDefaultRapidBoardPageUrl=function(c,a){var b=(_.isUndefined(a)?"":("&view="+a));return GH.Navigation.getCanonicRapidBoardPageUrl(c)+b};GH.Navigation.getCanonicRapidBoardPageUrl=function(a){return GH.Ajax.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a};GH.Navigation.getLoginUrl=function(){return GH.Ajax.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/dialog.js' */
GH.namespace("GH.Dialog");GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=true;this.handleSuccess()},hide:function(b,a){if(JIRA.Dialog.current!==this){return false}this._super(b);if(a!==true&&a&&(a.reason===JIRA.Dialog.HIDE_REASON.escape||a.reason===JIRA.Dialog.HIDE_REASON.cancel)){this.doCancelCleanup()}},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ops/DialogExtension.js' */
GH.namespace("GH.Dialog.XBoardExtension");GH.Dialog.XBoardExtension.getActionInfo=function(b){var a="workflow-transition-";var c=b.options.id;if(c.substring(0,a.length)==a){return{formId:c,isTransition:true,transitionId:c.substring(a.length)}}else{return{formId:c,isTransition:false}}};GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue();this.hide(true,true);this._hideloadingIndicator();var b=GH.Dialog.XBoardExtension.getActionInfo(this);var c=GH.IssueOperationShortcuts.getSelectedIssueId();var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(GH.WorkController.isActive()){GH.Dialog.handleWorkModeUpdate(c,a,b)}else{if(GH.PlanController.isActive()){GH.Dialog.handlePlanModeUpdate(c,a,b)}}GH.Notification.showIssueMessage(c);GH.WorkDragAndDrop.transitionTargetStatus=undefined};GH.Dialog.handlePlanModeUpdate=function(e,b,d){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var a=0;var f=null;var c=GH.BacklogModel.findModelWithIssue(b);if(c){if(GH.SprintModel.isSprintModel(c)){f=c.getSprintId()}a=c.getIssueList().getIssueIndex(b)}GH.PlanController.reload(function(){var i=GH.BacklogSelectionController.getSelectedIssueKey();if(i){return}var g=null;var h=null;if(f){h=GH.BacklogModel.getSprintModel(f)}if(!h){h=GH.BacklogModel.getBacklogModel2()}GH.BacklogSelectionController.selectIssue(h.getIssueList().getIssueKeyAtIndex(a))})}};GH.Dialog.handleWorkModeUpdate=function(i,d,h){var k=GH.Dialog.createParentCompletedCheckCallback(d);var j=GH.Dialog.createSelectMostAppropriateIssueCallback(d);if(h.isTransition){if(GH.WorkDragAndDrop.transitionTargetStatus){var l=GH.WorkDragAndDrop.transitionTargetStatus;var g=GH.GridDataController.getModel();var b=g.getIssueDataByKey(d);var c=g.getIssuePositionByKey(d);var e=g.getColumns();var f=c.columnId;var a=GH.GridColumnsData.getColumnIdForStatus(e,l);g.moveIssueToColumn(d,f,a);b.status=l;g.updateIssueData(b);GH.SwimlaneView.rerenderCell(c.swimlaneId,f);GH.SwimlaneView.rerenderCell(c.swimlaneId,a);k()}else{GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",k)}}GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",j);GH.WorkController.reload()};GH.Dialog.createParentCompletedCheckCallback=function(a){return function(){var c=GH.GridDataController.getModel();if(!_.isUndefined(c.data.issues[a])&&!_.isUndefined(c.data.issues[a].parentKey)){var b=c.data.issues[a].parentKey;if(_.contains(c.data.columnIssueMapping[_.last(c.data.columns).id],a)){var d=c.data.columnIssueMapping[_.last(c.data.columns).id];var f=_.reduce(_.toArray(c.data.issues),function(g){return !_.contains(d,g)});var e=_.find(f,function(g){return c.data.issues[g].parentKey===b});if(!e){GH.WorkController.resolveParentTask(c.data.issues[b])}}}}};GH.Dialog.createSelectMostAppropriateIssueCallback=function(a){var b=GH.GridDataController.getModel().getIssuePositionByKey(a);return function(){var d=GH.GridDataController.getModel().getIssueDataByKey(a);if(d){return}var c=GH.GridDataController.getModel().getIssueKeyAtPosition(b);if(c){GH.WorkSelectionController.selectIssue(c,{pushState:false,dontUpdateUI:true});GH.RapidBoard.State.replaceState()}else{GH.WorkSelectionController.selectIssue(undefined,{pushState:false,dontUpdateUI:true});GH.RapidBoard.State.replaceState()}}};GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue();GH.WorkDragAndDrop.transitionTargetStatus=undefined};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/form-dialog.js' */
GH.namespace("GH.FormDialog");GH.FormDialog=JIRA.FormDialog.extend(GH.Dialog.baseExtension);GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(b){var a=b.extend(GH.Dialog.baseExtension);a=a.extend(GH.Dialog.XBoardExtension);a=a.extend({_handleSubmitResponse:function(d,e,c){if(this.serverIsDone){if(this.options.onSuccessfulSubmit){this.options.onSuccessfulSubmit.call(this,d,e,c)}if(this.options.autoClose){this.hide()}if(this.options.onDialogFinished){this.options.onDialogFinished.call(this,d,e,c)}}},decorateContent:function(){this._super();var c=this.get$popupContent();var e=c.find("input[name=customFieldId]");if(e.length===1){var d=c.find("#hint");d.hide()}}});return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ui/dialog/DialogUtil.js' */
GH.namespace("GH.Dialog");GH.Dialog.create=function(c){AJS.$("#"+c.id).remove();c=_.defaults(c,{bindEscape:true});var d=new AJS.Dialog(c);var b=d.show;var a=function(){GH.Dialog.preShow();GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv);GH.Notification.Handler.setCustomDivStyleHandler(function(){return""});b.call(d);var e=AJS.$("#"+c.id).find(".dialog-button-panel .aui-button");if(e.is(":enabled")){e.focus()}AJS.$("#"+c.id).addClass("ghx-dialog")};_.extend(d,{dispose:GH.Dialog.generateCloseHandler(d),cancel:GH.Dialog.generateCloseHandler(d,c.onCancelFn),submit:GH.Dialog.generateCloseHandler(d,c.onConfirmFn),show:a,disableControls:GH.Dialog.generateDisableControlsFn(d),enableControls:GH.Dialog.generateEnableControlsFn(d),showSpinner:GH.Dialog.generateShowSpinnerFn(d),hideSpinner:GH.Dialog.generateHideSpinnerFn(d)});GH.Dialog.bindEscapeHandler(d,!c.bindEscape);return d};GH.Dialog.prepareNotificationDiv=function(){var a=AJS.$(".dialog-page-body:visible"),b=a.find(".dialog-panel-body:first-child");if(b.length==0){b=AJS.$("<div/>").addClass("dialog-panel-body").prependTo(a)}return AJS.$("<div/>").prependTo(b)};GH.Dialog.addCancelButton=function(a){a.addCancel("Cancel",function(b){a.cancel(a)})};GH.Dialog.bindEscapeHandler=function(a,b){if(!b){AJS.$(document).bind("keyup."+a.id,function(c){if(c.keyCode==27){a.cancel(a)}})}else{JIRA.bind("Dialog.beforeHide",function(f,c,d,g){if(g===a.id&&d===JIRA.Dialog.HIDE_REASON.escape){f.preventDefault()}})}};GH.Dialog.generateCloseHandler=function(a,b){return function(){a.remove();GH.Dialog.undim();AJS.$(document).unbind("keyup."+a.id);AJS.unbind("remove.dialog");if(b){b(a)}GH.Notification.Handler.removeCustomHandlers();return false}};GH.Dialog.generateDisableControlsFn=function(a){return function(){AJS.$("#"+a.id+" button").attr("disabled","disabled")}};GH.Dialog.generateEnableControlsFn=function(a){return function(){AJS.$("#"+a.id+" button").removeAttr("disabled")}};GH.Dialog.generateShowSpinnerFn=function(a){return function(){AJS.$("#"+a.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}};GH.Dialog.generateHideSpinnerFn=function(a){return function(){AJS.$("#"+a.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}};GH.Dialog.sanitizeAJSDim=function(){var a=AJS.dim;AJS.dim=function(){try{a.apply(this,arguments)}catch(b){}}};GH.Dialog.registerDialog=function(a,c,b){AJS.$(document).undelegate(a,"click").delegate(a,"click",function(d){var e=AJS.$(this);if(e.hasClass("disabled")){return}d.preventDefault();c(d,b)})};GH.Dialog.dim=function(){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>')};GH.Dialog.undim=function(){AJS.undim();AJS.$(".aui-blanket").empty()};GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
GH.namespace("GH.PersistentMessages.CreateViewMessage");GH.PersistentMessages.CreateViewMessage={};GH.PersistentMessages.CreateViewMessage.setView=function(e,a,b,d){var c={id:e,name:a,type:b,subType:d};GH.storage.put("gh.createViewMessage",c,true)};GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,true)};GH.PersistentMessages.CreateViewMessage.renderMessage=function(c){if(c){GH.log(c.type+" handled","GH.PersistentMessages.CreateViewMessage.renderMessage")}var b=GH.storage.get("gh.createViewMessage",true);if(b){var a=null;b.name=AJS.escapeHTML(String(b.name));var d;if(b.type=="advanced"){d=GH.tpl.board.x.renderCreateViewMessage}else{if(b.subType=="kanban"){d=GH.tpl.board.x.renderWelcomeViewMessageKanban}else{if(b.subType=="scrum"){d=GH.tpl.board.x.renderWelcomeViewMessageScrum}}}a=d({rapidView:b,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:10000});GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
GH.namespace("GH.PersistentMessages.WelcomeMessage");GH.PersistentMessages.WelcomeMessage={};GH.PersistentMessages.WelcomeMessage.show=function(a){GH.storage.put("gh.welcomeMessage",a,true)};GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var c=GH.storage.get("gh.welcomeMessage",true);if(c){var a=null;c.rapidView.name=AJS.escapeHTML(String(c.rapidView.name));c.project.name=AJS.escapeHTML(String(c.project.name));var b=null;if(/kanban/.test(c.preset)){if(c.sample){b=GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban}else{b=GH.tpl.board.x.renderWelcomeProjectMessageKanban}}else{if(/scrum/.test(c.preset)){if(c.sample){b=GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum}else{b=GH.tpl.board.x.renderWelcomeProjectMessageScrum}}}a=b({project:c.project,rapidView:c.rapidView,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:10000});GH.storage.put("gh.welcomeMessage",null,true)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-project-picker', location = 'includes/js/projects/project-picker.js' */
define("jira-agile/projects/project-picker",[],function(){var a=function(b){if(!b||!b.selector){throw new Error("Project picker requires a selector")}this.$select=AJS.$(b.selector);if(b.currentProjectId){this.currentProjectId=b.currentProjectId;this.currentProject=null}this.multiselect=new AJS.MultiSelect({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.buildRestUrl("/project.json"),formatResponse:this._processAjax.bind(this)}});if(typeof b.change==="function"){this.$select.bind("unselect",b.change);this.$select.bind("change",b.change)}if(!this.currentProjectId){return}this.multiselect.requestSuggestions(true).then(function(){if(!this.currentProject){return}this.multiselect.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};a.prototype.show=function(){AJS.warn("ProjectPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")};a.prototype.hasValue=function(){return !!this.$select.val()};a.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0};a.prototype.getValue=function(){return this.$select.val()};a.prototype.getElement=function(){return this.$select};a.prototype._findProject=function(b,c){return(b||[]).filter(function(d){return c&&d.id===c}.bind(this))[0]};a.prototype._findUnmatchingProjects=function(b,c){return(b||[]).filter(function(d){return !c||(d.id!==c)}.bind(this))};a.prototype._processAjax=function(b){if(!b||!b.projects||!b.projects.length){return[]}this.currentProject=this._findProject(b.projects,this.currentProjectId);var c=this._findUnmatchingProjects(b.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this));if(!this.currentProject){return c}return[this._getProjectDescriptor(this.currentProject)].concat(c)};a.prototype._getProjectDescriptor=function(b){if(!b){throw new Error("ProjectPicker.prototype._getProjectDescriptor requires a project")}return new AJS.ItemDescriptor({value:b.id+"",label:b.displayName,html:AJS.escapeHTML(String(b.displayName))})};return a});AJS.namespace("GH.ProjectPicker",null,require("jira-agile/projects/project-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml("Scrum") + '</h2><p>' + soy.$$escapeHtml("Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints.") + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml("Kanban") + '</h2><p>' + soy.$$escapeHtml("Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process.") + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml("Create a Scrum board") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml("Create a Kanban board") + '</button></div></div>' + ((opt_data.isSampleDataAvailable && opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Scrum board with sample data") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Kanban board with sample data") + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml("Board created with new Software project") + '</label><div class="description">' + soy.$$escapeHtml("A new board based on a new Software project") + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml("Board from an existing project") + '</label><div class="description">' + soy.$$escapeHtml("Boards can contain one or more projects.") + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml("Board from an existing Saved Filter") + '</label><div class="description">' + soy.$$escapeHtml("An advanced option using a JQL filter.") + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Project(s)") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Select one or more projects to be included in this board.") + '</div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml("Saved filter") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Saved Filters") + '</h3><div class="description">' + soy.$$escapeHtml("Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml("Project name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml("Project key") + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml("Project lead") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="js-default-user-picker hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml("Start typing to get a list of possible matches.") + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Creating a project") + '</h3><div class="description">' + soy.$$escapeHtml("A board will be created with your project, and will be named after your project. You can rename your board in the board configuration screen.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.",opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: "Back to board", type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: "Back to board", iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml("Configure") + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml("Configuration") + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml("Board name") + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml("Administrators") + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList77 = opt_data.model;
  var itemListLen77 = itemList77.length;
  if (itemListLen77 > 0) {
    for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
      var itemData77 = itemList77[itemIndex77];
      output += soy.$$escapeHtml(itemData77.displayName) + ((! (itemIndex77 == itemListLen77 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml("Groups") + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList96 = opt_data.model.groupKeys;
  var itemListLen96 = itemList96.length;
  for (var itemIndex96 = 0; itemIndex96 < itemListLen96; itemIndex96++) {
    var itemData96 = itemList96[itemIndex96];
    output += soy.$$escapeHtml(itemData96.key) + ((! (itemIndex96 == itemListLen96 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml("Users") + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList105 = opt_data.model.userKeys;
  var itemListLen105 = itemList105.length;
  for (var itemIndex105 = 0; itemIndex105 < itemListLen105; itemIndex105++) {
    var itemData105 = itemList105[itemIndex105];
    output += soy.$$escapeHtml(itemData105.key) + ((! (itemIndex105 == itemListLen105 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml("Separate user keys and group names with commas.") + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml("Contact a JIRA or Board Administrator to configure this board.") + '</strong></p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml("Some issues in the Saved Filter will not be shown on the board.") + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml("View unmapped statuses which contain these issues.") + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml("Saved Filter") + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml("Edit Filter Query") : soy.$$escapeHtml("View Filter Query")) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml("Filter Query") + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml("Ranking") + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml("Using Rank");
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml("Ranking is disabled, as the Filter Query is not ordered by Rank");
    } else {
      var warningList167 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen167 = warningList167.length;
      for (var warningIndex167 = 0; warningIndex167 < warningListLen167; warningIndex167++) {
        var warningData167 = warningList167[warningIndex167];
        output += soy.$$escapeHtml(warningData167) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml("Add Rank") + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml("Projects in board") + '</label><ul id="ghx-show-projects-in-board">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy188 = 'small';
      var projectList189 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen189 = projectList189.length;
      for (var projectIndex189 = 0; projectIndex189 < projectListLen189; projectIndex189++) {
        var projectData189 = projectList189[projectIndex189];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy188), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy188) + '&pid=' + soy.$$escapeHtml(projectData189.id), extraClasses: 'jira-system-avatar'}) + '<strong>' + soy.$$escapeHtml(projectData189.name) + '</strong><p>';
        var viewProjectPermissionText__soy207 = "View permission";
        output += ((projectData189.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData189.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml("You are not allowed to view this Project Permission") + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += ((opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml("Kanban board sub-filter") + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml("Further filtering of issues for unreleased work.") + '</div></div>' : '') + '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml("Add Sub-Filter") + '</em>' : soy.$$escapeHtml("No sub-filter")) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml("Update") + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml("Cancel") + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml("Edit Filter Shares") + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList294 = opt_data.permissionEntries;
    var permissionEntryListLen294 = permissionEntryList294.length;
    for (var permissionEntryIndex294 = 0; permissionEntryIndex294 < permissionEntryListLen294; permissionEntryIndex294++) {
      var permissionEntryData294 = permissionEntryList294[permissionEntryIndex294];
      output += '<li>';
      var permissionValueList296 = permissionEntryData294.values;
      var permissionValueListLen296 = permissionValueList296.length;
      for (var permissionValueIndex296 = 0; permissionValueIndex296 < permissionValueListLen296; permissionValueIndex296++) {
        var permissionValueData296 = permissionValueList296[permissionValueIndex296];
        output += ((permissionValueData296.type == "Shared with everyone") ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml("Sharing unrestricted") + '">' + soy.$$escapeHtml("Sharing unrestricted") + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml("Sharing restricted") + '">' + soy.$$escapeHtml("Sharing restricted") + '</span>') + ((permissionValueData296.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData296.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData296.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData296.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml("No shares") + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml("Confirmation") + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml("Confirm") + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.js' */
GH.StartWizardView={};GH.StartWizardView.dialog=undefined;GH.StartWizardView.model=undefined;GH.StartWizardView.stepsNameStack=undefined;GH.StartWizardView.pages={};GH.StartWizardView.filterPicker=undefined;GH.StartWizardView.projectPicker=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.StartWizardView.analytics=new a("gh.create.wizard")})();GH.StartWizardView.wizardStepPreRenderCallbacks=[];GH.StartWizardView.wizardStepPostRenderCallbacks=[];GH.StartWizardView.wizardStepOnValidateCallbacks=[];GH.StartWizardView.wizardStepOnCreateCallbacks=[];GH.StartWizardView.steps={methodologySelection:{render:function(a){var b={isSampleDataAvailable:GH.Config.isSampleDataAvailable,canCreateProject:GH.UserData.canCreateProject()};return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodologySelectionStep(b)}},bind:function(b,a){AJS.$("#ghx-wizard-methodology-scrum").click(function(c){c.preventDefault();a.sampleData=false;GH.StartWizardView.selectMethodology("scrum",a)});AJS.$("#ghx-wizard-methodology-kanban").click(function(c){c.preventDefault();a.sampleData=false;GH.StartWizardView.selectMethodology("kanban",a)});AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(c){c.preventDefault();a.sampleData=true;GH.StartWizardView.selectMethodology("scrum",a)});AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(c){c.preventDefault();a.sampleData=true;GH.StartWizardView.selectMethodology("kanban",a)})}},methodSelection:{render:function(a){var b=a.method;if(!b){b=(GH.UserData.userConfig.canCreateProject)?"newProject":"existingProject"}return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},a,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:b}))}},bind:function(a){},next:function(c,b){var d=c.find("input[name=ghx-wizard-method]").filter(":checked").val();b.method=d;var a=AJS.$.Deferred();if(d==="newProject"){a.resolve("projectCreation")}else{if(d==="existingProject"){a.resolve("projectSelection")}else{if(d==="existingFilter"){a.resolve("filterSelection")}else{a.reject(new Error("Unknown board creation method : "+d))}}}return a.promise()}},projectCreation:{render:function(a){a.prefix="project";return GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""}})},bind:function(b,a){GH.StartWizardView.bindProjectCreation(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,a)}},sampleProjectCreation:{render:function(a){a.prefix="sample";return GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:a.sampleInfo})},bind:function(b,a){GH.StartWizardView.bindProjectCreation(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,a)}},projectSelection:{render:function(a){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(b,a){GH.StartWizardView.bindProjectSelection(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.validateProjectSelection(a)}},filterSelection:{render:function(a){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(b,a){GH.StartWizardView.bindFilterSelection(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.validateFilterSelection(a)}}};GH.StartWizardView.show=function(a){if(!GH.StartWizardView.dialog){GH.StartWizardView.dialog=GH.Dialog.create({width:840,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard();GH.StartWizardView.analytics.trigger("cancel")}});GH.StartWizardView.model={};GH.StartWizardView.stepsNameStack=[];GH.StartWizardView.dialog.show();GH.StartWizardView.analytics.trigger("start");GH.StartWizardView.preventSubmitOnEnter()}};GH.StartWizardView.preventSubmitOnEnter=function(){var a=function(b){if(b.keyCode==13&&b.target.id!="ghx-wizard-filter-select-field"){b.preventDefault();return false}};AJS.$("input").keydown(a)};GH.StartWizardView.showStep=function(g){if(!_.has(GH.StartWizardView.steps,g)){throw new Error("Unknown wizard step "+g)}var c=GH.StartWizardView.dialog;if(!GH.StartWizardView.pages[g]){var a=GH.StartWizardView.steps[g];var f=a.render(GH.StartWizardView.model);_.each(GH.StartWizardView.wizardStepPreRenderCallbacks,function(h){h(g)});c.addPage();GH.StartWizardView.pages[g]=c.curpage;c.addHeader(f.header);var b=AJS.$(f.content);c.addPanel(null,b,"ghx-wizard-panel");_.each(GH.StartWizardView.wizardStepPostRenderCallbacks,function(h){h(g,c)});if(GH.StartWizardView.stepsNameStack.length>0){c.addButton("Back",function(){var h=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(h)},"aui-button")}if(_.has(a,"complete")){var e=function(){var h=AJS.$(this);var i=h.attr("aria-disabled");if(i=="true"){return}a.complete(GH.StartWizardView.model)};c.addButton(a.completeActionName,e,"aui-button aui-button-primary js-wizard-button-complete")}else{if(_.has(a,"next")){var d=function(){var j=AJS.$(this);var k=j.attr("aria-disabled");if(k=="true"){return}var l=a.next(b,GH.StartWizardView.model);var i=function(n){GH.StartWizardView.stepsNameStack.push(g);GH.StartWizardView.showStep(n)};var m=function(n){console.log(n);c.updateHeight()};var h=true;_.each(GH.StartWizardView.wizardStepOnValidateCallbacks,function(n){if(!n(g,c)){h=false}});l.done(function(n){if(h){i(n)}else{m("GH project create extension callback returned failure")}}).fail(m)};c.addButton("Next",d,"aui-button aui-button-primary js-wizard-button-next")}}c.addCancel("Cancel",function(){c.cancel()});a.bind(b,GH.StartWizardView.model)}else{c.gotoPage(GH.StartWizardView.pages[g]);GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove()}c.updateHeight();GH.StartWizardView.preventSubmitOnEnter()};GH.StartWizardView.startWizard=function(){GH.StartWizardView.show();GH.StartWizardView.showStep("methodologySelection")};GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=undefined;GH.StartWizardView.pages={}};GH.StartWizardView.genStartFunction=function(a,b){return function(){GH.StartWizardView.show();GH.StartWizardView.model.sampleData=b;GH.StartWizardView.selectMethodology(a,GH.StartWizardView.model)}};GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",false));GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",true));GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",false));GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",true))};GH.StartWizardView.getCreateProjectRequest=function(b){var c=b.project;var a={projectName:c.name,projectKey:c.key,projectLeadUserName:c.lead,boardName:b.boardName,preset:b.methodology,sampleData:b.sampleData};return a};GH.StartWizardView.createProject=function(b,a){GH.StartWizardView.populateProjectCreationProperties(a);var d=GH.StartWizardView.getCreateProjectRequest(a);b.disableControls();b.showSpinner();var c={url:"/welcome/createProject",data:d,errorContextMap:{projectName:"#ghx-wizard-"+a.prefix+"-projectname",projectKey:"#ghx-wizard-"+a.prefix+"-projectkey",projectLead:"#ghx-wizard-"+a.prefix+"-projectlead"},timeout:2*60*1000,deferErrorHandling:true};return GH.Ajax.put(c).done(function(e){e.success.sample=a.sampleData;GH.PersistentMessages.WelcomeMessage.show(e.success);var g=function(){GH.StartWizardView.gotoCreatedView(e.success.rapidView.id,a.methodology)};function f(){if(GH.StartWizardView.wizardStepOnCreateCallbacks.length==0){g()}else{var h=GH.StartWizardView.wizardStepOnCreateCallbacks.pop();h(b,f,a)}}f()}).fail(function(h,g,f,e){_.each(h.getGlobalErrors(),function(i){if(i.message=="timeout"){i.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()});i.noAutoescape=true}});GH.Ajax.handleContextualErrors(h,c.errorContextMap);GH.Ajax.handleGlobalErrors(h,c.errorContextMap);b.hideSpinner();b.enableControls();b.updateHeight()})};GH.StartWizardView.validateProjectSelection=function(b){GH.StartWizardView.dialog.disableControls();GH.StartWizardView.dialog.showSpinner();var a=AJS.$("#ghx-wizard-project-board-name");GH.Validation.clearContextualErrors(GH.StartWizardView.projectPicker.getElement());GH.Validation.clearContextualErrors(a);return GH.Ajax.post({url:"/rapidview/create/presets",data:{name:a.val(),projectIds:GH.StartWizardView.projectPicker.getValue(),preset:b.methodology},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.projectPicker.selector}}).done(function(c){console.log("mode: "+b);GH.StartWizardView.handleCreate(c,"simple",b.methodology)}).fail(function(){GH.StartWizardView.dialog.enableControls();GH.StartWizardView.dialog.hideSpinner();GH.StartWizardView.dialog.updateHeight()})};GH.StartWizardView.validateFilterSelection=function(c){var a=AJS.$("#ghx-wizard-filter-view-name");var d=GH.StartWizardView.filterPicker.getElement();var e=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(a);GH.Validation.clearContextualErrors(d);var b=e.val()?e.val()[0]:null;GH.StartWizardView.dialog.disableControls();GH.StartWizardView.dialog.showSpinner();return GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:a.val(),filterId:b,methodology:c.methodology},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(f){GH.StartWizardView.handleCreate(f,"simple",c.methodology)}).fail(function(){GH.StartWizardView.dialog.hideSpinner();GH.StartWizardView.dialog.enableControls();GH.StartWizardView.dialog.updateHeight()})};GH.StartWizardView.handleCreate=function(a,b,c){var d=b!=c?c:false;GH.PersistentMessages.CreateViewMessage.setView(a.success.id,a.success.name,b,d);GH.StartWizardView.analytics.trigger("complete");GH.StartWizardView.gotoCreatedView(a.success.id,c)};GH.StartWizardView.gotoCreatedView=function(c,b){var a=b=="scrum"?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(c,a)};GH.StartWizardView.selectMethodology=function(e,c){c.methodology=e;GH.StartWizardView.stepsNameStack.push("methodologySelection");if(c.sampleData){GH.Ajax.get({url:"/welcome/sampledataproject?preset="+c.methodology},"sampledataproject").done(function(f){c.sampleInfo=f;GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")})}else{var d=GH.UserData.userConfig.canCreateProject;var a=GH.UserData.userConfig.hasProjectsAccessible;var b=GH.UserData.userConfig.hasFiltersAccessible;if(!d&&!b){GH.StartWizardView.showStep("projectSelection")}else{if(!a&&!b){GH.StartWizardView.showStep("projectCreation")}else{GH.StartWizardView.showStep("methodSelection")}}}};GH.StartWizardView.populateProjectCreationProperties=function(a){var b=AJS.$("#ghx-wizard-"+a.prefix+"-projectname");var c=AJS.$("#ghx-wizard-"+a.prefix+"-projectkey");var d=AJS.$("#ghx-wizard-"+a.prefix+"-projectlead");GH.Validation.clearContextualErrors(b);GH.Validation.clearContextualErrors(c);GH.Validation.clearContextualErrors(d);a.project={name:b.val(),key:c.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+a.prefix+"-projectlead option:selected").val()}};GH.StartWizardView.createSampleProject=function(b,a){a.sampleData=true;GH.StartWizardView.createProject(b,a)};GH.StartWizardView.validateBoardName=function(a,b){GH.Validation.clearContextualErrors(a);b.boardName=a.val();if(!b.boardName){GH.Validation.showContextualErrors(a,"Please enter a name for your board.");return false}return true};GH.StartWizardView.renderProjectCreation=function(a){return{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(a)}};GH.StartWizardView.bindProjectSelection=function(b,a){GH.StartWizardView.projectPicker=new GH.ProjectPicker({selector:"#ghx-wizard-choose-project",change:function(){GH.StartWizardView.dialog.updateHeight()},currentProjectId:(JIRA.API&&JIRA.API.Projects)?JIRA.API.Projects.getCurrentProjectId():null});GH.StartWizardView.projectPicker.multiselect.keys.Return=function(c){c.preventDefault()};GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"]})};GH.StartWizardView.bindProjectCreation=function(b,a){AJS.$("#ghx-wizard-"+a.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+a.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64});JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b]);b.trigger("contentRefresh");var d=GH.StartWizardView.dialog;var e=d.page[d.curpage];var c=e.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+a.prefix+"-projectname","#ghx-wizard-"+a.prefix+"-projectkey","#ghx-wizard-"+a.prefix+"-projectlead"]})};GH.StartWizardView.bindFilterSelection=function(b,a){var c=function(g,f){var e="";delete a.savedFilter;if(f&&f.properties){var d=f.properties.savedFilter;e=d!=null?GH.tpl.startwizard.renderPermissionInfo({savedFilter:d}):"";a.savedFilter=d}AJS.$("#ghx-create-permissioninfo-container").html(e);GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:c,stayActivated:true});GH.StartWizardView.filterPicker.show(a.savedFilter);GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(d){d.preventDefault()};GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"]})};GH.StartWizardView.attachDependantButton=function(a){var c=GH.StartWizardView.dialog;var d=c.page[c.curpage];var b=d.button[a.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:a.selectors,full:function(){b.attr("aria-disabled","false")},empty:function(){b.attr("aria-disabled","true")}})};GH.StartWizardView.dependantValidationListener=function(a){if(_.isEmpty(a.selectors)){return}a.full=a.full||AJS.$.noop();a.empty=a.empty||AJS.$.noop();a.nowait=a.nowait||false;function b(){var d=_.filter(a.selectors,function(f){var e=AJS.$(f);return !AJS.$.trim(e.val())});if(_.isEmpty(d)){return a.full()}else{return a.empty()}}function c(){if(a.nowait){b()}else{setTimeout(b,50)}}_.each(a.selectors,function(e){var d=AJS.$(e);d.on("input",c);d.on("change",c);d.on("selected",c);d.on("unselect",c)});b()};GH.StartWizardView.registerWizardStepPreRenderCallback=function(a){GH.StartWizardView.wizardStepPreRenderCallbacks.push(a)};GH.StartWizardView.registerWizardStepPostRenderCallback=function(a){GH.StartWizardView.wizardStepPostRenderCallbacks.push(a)};GH.StartWizardView.registerWizardStepOnValidateCallback=function(a){GH.StartWizardView.wizardStepOnValidateCallbacks.push(a)};GH.StartWizardView.registerWizardStepOnCreateCallbacks=function(a){GH.StartWizardView.wizardStepOnCreateCallbacks.push(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/component/SavedFilterPicker.js' */
GH.SavedFilterPicker=function(a){this.selector=a.selector;this.fieldSelector=a.selector+"-field";this.blurHandler=a.blur;this.selectHandler=a.selected;this.stayActivated=a.stayActivated;this.focus=a.focus};GH.SavedFilterPicker.prototype.show=function(c){var b=AJS.$(this.selector);var d=new AJS.SingleSelect({element:b,width:300,removeOnUnSelect:true,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:true,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(f){if(f.errors){var i=GH.Ajax._convertJiraErrors(f.errors);var h={searchName:this.selector};GH.Ajax.handleContextualErrors(i,h);return false}b.siblings(".ghx-error").remove();var g=[];AJS.$(f.filters).each(function(){g.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))});return g}}});this.singleSelect=d;var e=this.removeSingleSelect;if(!this.stayActivated){AJS.$(this.fieldSelector).blur(function(){e(d)})}if(_.isFunction(this.blurHandler)){AJS.$(this.fieldSelector).blur(this.blurHandler)}if(this.focus){AJS.$(this.fieldSelector).focus().select()}if(c){this.setSelection(c)}var a=this.selectHandler;if(!this.stayActivated){b.bind("selected",function(g,f){e(d);a(g,f)});b.bind("unselect",function(g,f){e(d);a(g,f)})}else{b.bind("selected",a);b.bind("unselect",a)}};GH.SavedFilterPicker.prototype.setSelection=function(a){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:a.id.toString(),label:a.name,html:AJS.escapeHTML(String(a.name)),savedFilter:a,selected:true}))};GH.SavedFilterPicker.prototype.removeSingleSelect=function(a){a.hideSuggestions();a.disable()};GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/lib/jquery/jquery.keygen.js' */
(function(c,b){c.KeyGenerator=function(){var i=["THE","A","AN","AS","AND","OF","OR"],f={},h=function(k){return k.join("").length},j=function(k){return b.grep(k,function(m,l){return b.inArray(m,i)===-1})},g=function(l){var k="";b.each(l,function(m,n){k+=n.charAt(0)});return k},e=function(m){var l=false;var k;for(k=0;k<m.length;k++){if(d(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m},d=function(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};f[199]="C";f[231]="c";f[252]="u";f[251]="u";f[250]="u";f[249]="u";f[233]="e";f[234]="e";f[235]="e";f[232]="e";f[226]="a";f[228]="a";f[224]="a";f[229]="a";f[225]="a";f[239]="i";f[238]="i";f[236]="i";f[237]="i";f[196]="A";f[197]="A";f[201]="E";f[230]="ae";f[198]="Ae";f[244]="o";f[246]="o";f[242]="o";f[243]="o";f[220]="U";f[255]="Y";f[214]="O";f[241]="n";f[209]="N";return{generateKey:function(n,x){x=b.extend({},x);var m=(typeof x.desiredKeyLength=="number")?x.desiredKeyLength:4,t=(typeof x.maxKeyLength=="number")?x.maxKeyLength:Infinity;n=b.trim(n);if(!n){return""}var r=[];for(var q=0,w=n.length;q<w;q++){var k=f[n.charCodeAt(q)];r.push(k?k:n[q])}n=r.join("");var s=[];b.each(n.split(/\s+/),function(y,z){if(z){z=z.replace(/[^a-zA-Z]/g,"");z=z.toUpperCase();z.length&&s.push(z)}});if(m&&h(s)>m){s=j(s)}var u;if(s.length==0){u=""}else{if(s.length==1){var l=s[0],o=e(l);if(t<l.length||Math.abs(l.length-m)>=Math.abs(o.length-m)){u=o}else{u=l}}else{var v=h(s),p=g(s);if(t<v||Math.abs(v-m)>=Math.abs(p.length-m)){u=p}else{u=s.join("")}}}if(t&&u.length>t){u=u.substr(0,t)}return u}}};var a=c.KeyGenerator();b.fn.generateFrom=function(g,e){var d={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},f=b(this).first(),g=g.first(),e=b.extend({},d,e);(function(){var j=function(){return f.data("autosuggest")!==false},o=function(p){if(f.val()&&f.data("lastGeneratedValue")!==f.val()){f.data("autosuggest",false)}},n=function(p){f.data("lastGeneratedValue",p);f.val(p)},h=function(){o(f.val());k()},i=function(p){m(p,h)},m=function(s,q){var p=b(s.target),r;r=function(){l(s);q();if(p.is(":visible")){p.data("checkHook",setTimeout(r,e.timeoutMS))}};if(!p.data("checkHook")){p.data("checkHook",setTimeout(r,0))}},l=function(q){var p=b(q.target);clearTimeout(p.data("checkHook"));p.removeData("checkHook")},k=function(){if(j()){n(a.generateKey(g.val(),{desiredKeyLength:e.desiredKeyLength,maxKeyLength:e.maxKeyLength}))}};g.attr("maxlength",e.maxNameLength);f.attr("maxlength",e.maxKeyLength);f.css("text-transform","uppercase");if(document.activeElement&&document.activeElement===g[0]){i({target:g[0]})}g.focus(i);g.blur(l)})();return this}})(window,jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-expander', location = 'js/aui-experimental-expander.js' */
(function(D){var E=D(document),C=function(G){var F={};F.$trigger=D(G.currentTarget);F.$content=E.find("#"+F.$trigger.attr("aria-controls"));F.triggerIsParent=F.$content.parent().filter(F.$trigger).length!==0;F.$shortContent=F.triggerIsParent?F.$trigger.find(".aui-expander-short-content"):null;F.height=F.$content.css("min-height");F.isCollapsible=F.$trigger.data("collapsible")!==false;F.replaceText=F.$trigger.attr("data-replace-text");F.replaceSelector=F.$trigger.data("replace-selector");return F},B=function(G){if(G.replaceText){var F=G.replaceSelector?G.$trigger.find(G.replaceSelector):G.$trigger;G.$trigger.attr("data-replace-text",F.text());F.text(G.replaceText)}};var A={"aui-expander-invoke":function(I){var F=D(I.currentTarget);var H=E.find("#"+F.attr("aria-controls"));var G=F.data("collapsible")!==false;if(H.attr("aria-expanded")==="true"&&G){F.trigger("aui-expander-collapse")}else{F.trigger("aui-expander-expand")}},"aui-expander-expand":function(G){var F=C(G);F.$content.attr("aria-expanded","true");F.$trigger.attr("aria-expanded","true");if(F.$content.outerHeight()>0){F.$content.attr("aria-hidden","false")}B(F);if(F.triggerIsParent){F.$shortContent.hide()}F.$trigger.trigger("aui-expander-expanded")},"aui-expander-collapse":function(G){var F=C(G);B(F);F.$content.attr("aria-expanded","false");F.$trigger.attr("aria-expanded","false");if(F.triggerIsParent){F.$shortContent.show()}if(F.$content.outerHeight()===0){F.$content.attr("aria-hidden","true")}F.$trigger.trigger("aui-expander-collapsed")},"click.aui-expander":function(G){var F=D(G.currentTarget);F.trigger("aui-expander-invoke",G.currentTarget)}};E.on(A,".aui-expander-trigger")})(jQuery);;
;
/* module-key = 'jira.webresources:jquery-easing', location = '/includes/jquery/plugins/easing/jquery.easing.1.3.js' */
jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return -c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b}return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b}return -c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b}return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b}if(t==d){return b+c}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b}return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d/2)==2){return b+c}if(!p){p=d*(0.3*1.5)}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b}return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox-1.3.4.js' */
(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr="",start_pos,final_pos,busy=false,fx=$.extend($("<div/>")[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort()}tmp.empty()},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return }selectedOpts.titleShow=false;selectedOpts.width="auto";selectedOpts.height="auto";tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline()},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data("fancybox")=="undefined"?selectedOpts:$(obj).data("fancybox")));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return }else{if(typeof ret=="object"){selectedOpts=$.extend(selectedOpts,ret)}}title=selectedOpts.title||(obj.nodeName?$(obj).attr("title"):obj.title)||"";if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj)}if(title===""&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr("alt")}href=selectedOpts.href||(obj.nodeName?$(obj).attr("href"):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=="#"){href=null}if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content}}else{if(selectedOpts.content){type="html"}else{if(href){if(href.match(imgRegExp)){type="image"}else{if(href.match(swfRegExp)){type="swf"}else{if($(obj).hasClass("iframe")){type="iframe"}else{if(href.indexOf("#")===0){type="inline"}else{type="ajax"}}}}}}}if(!type){_error();return }if(type=="inline"){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?"inline":"ajax"}selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=="html"||selectedOpts.type=="inline"||selectedOpts.type=="ajax"){selectedOpts.width="auto";selectedOpts.height="auto"}else{selectedOpts.autoDimensions=false}}if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false}selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css("padding",(selectedOpts.padding+selectedOpts.margin));$(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){$(this).replaceWith(content.children())});switch(type){case"html":tmp.html(selectedOpts.content);_process_inline();break;case"inline":if($(obj).parent().is("#fancybox-content")===true){busy=false;return }$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind("fancybox-cleanup",function(){$(this).replaceWith(content.children())}).bind("fancybox-cancel",function(){$(this).replaceWith(tmp.children())});$(obj).appendTo(tmp);_process_inline();break;case"image":busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error()};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image()};imgPreloader.src=href;break;case"swf":selectedOpts.scrolling="no";str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb="";$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=" "+name+'="'+val+'"'});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+"></embed></object>";tmp.html(str);_process_inline();break;case"ajax":busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error()}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=="object"?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=="function"){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return }else{if(typeof ret=="string"||typeof ret=="object"){data=ret}}}tmp.html(data);_process_inline()}}}));break;case"iframe":_show();break}},_process_inline=function(){var w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf("%")>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+"px"}else{w=w=="auto"?"auto":w+"px"}if(h.toString().indexOf("%")>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+"px"}else{h=h=="auto"?"auto":h+"px"}tmp.wrapInner('<div style="width:'+w+";height:"+h+";overflow: "+(selectedOpts.scrolling=="auto"?"auto":(selectedOpts.scrolling=="yes"?"scroll":"hidden"))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show()},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({"id":"fancybox-img","src":imgPreloader.src,"alt":selectedOpts.title}).appendTo(tmp);_show()},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger("fancybox-cancel");busy=false;return }busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind("keydown.fb");if(wrap.is(":visible")&&currentOpts.titlePosition!=="outside"){wrap.css("height",wrap.height())}currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({"background-color":currentOpts.overlayColor,"opacity":currentOpts.overlayOpacity,"cursor":currentOpts.hideOnOverlayClick?"pointer":"auto","height":$(document).height()});if(!overlay.is(":visible")){if(isIE6){$("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({"visibility":"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}overlay.show()}}else{overlay.hide()}final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish)};$.event.trigger("fancybox-change");content.empty().removeAttr("filter").css({"border-width":currentOpts.padding,"width":final_pos.width-currentOpts.padding*2,"height":selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing()}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing})}});return }wrap.removeAttr("style");content.css("border-width",currentOpts.padding);if(currentOpts.transitionIn=="elastic"){start_pos=_get_zoom_from();content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0}fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return }if(currentOpts.titlePosition=="inside"&&titleHeight>0){title.show()}content.css({"width":final_pos.width-currentOpts.padding*2,"height":selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());wrap.css(final_pos).fadeIn(currentOpts.transitionIn=="none"?0:currentOpts.speedIn,_finish)},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+"</div>"}return false},_process_title=function(){titleStr=currentOpts.title||"";titleHeight=0;title.empty().removeAttr("style").removeClass();if(currentOpts.titleShow===false){title.hide();return }titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===""){title.hide();return }title.addClass("fancybox-title-"+currentOpts.titlePosition).html(titleStr).appendTo("body").show();switch(currentOpts.titlePosition){case"inside":title.css({"width":final_pos.width-(currentOpts.padding*2),"marginLeft":currentOpts.padding,"marginRight":currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case"over":title.css({"marginLeft":currentOpts.padding,"width":final_pos.width-(currentOpts.padding*2),"bottom":currentOpts.padding}).appendTo(outer);break;case"float":title.css("left",parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({"width":final_pos.width-(currentOpts.padding*2),"paddingLeft":currentOpts.padding,"paddingRight":currentOpts.padding}).appendTo(wrap);break}title.hide()},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind("keydown.fb",function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close()}else{if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&e.target.tagName!=="SELECT"){e.preventDefault();$.fancybox[e.keyCode==37?"prev":"next"]()}}})}if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return }if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show()}if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show()}},_finish=function(){if(!$.support.opacity){content.get(0).style.removeAttribute("filter");wrap.get(0).style.removeAttribute("filter")}if(selectedOpts.autoDimensions){content.css("height","auto")}wrap.css("height","auto");if(titleStr&&titleStr.length){title.show()}if(currentOpts.showCloseButton){close.show()}_set_navigation();if(currentOpts.hideOnContentClick){content.bind("click",$.fancybox.close)}if(currentOpts.hideOnOverlayClick){overlay.bind("click",$.fancybox.close)}$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center)}if(currentOpts.type=="iframe"){$('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':"")+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content)}wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images()},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=="undefined"&&href.match(imgRegExp)){objNext=new Image();objNext.src=href}}if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=="undefined"&&href.match(imgRegExp)){objNext=new Image();objNext.src=href}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=="undefined"){dim.opacity=pos<0.5?0.5:pos}wrap.css(dim);content.css({"width":dim.width-currentOpts.padding*2,"height":dim.height-(titleHeight*pos)-currentOpts.padding*2})},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin]},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf("%")>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10)}else{to.width=currentOpts.width+double_padding}if(currentOpts.height.toString().indexOf("%")>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10)}else{to.height=currentOpts.height+double_padding}if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=="image"||selectedOpts.type=="swf"){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10)}if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10)}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1])}}to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css("paddingTop"),10)||0;pos.left+=parseInt(obj.css("paddingLeft"),10)||0;pos.top+=parseInt(obj.css("border-top-width"),10)||0;pos.left+=parseInt(obj.css("border-left-width"),10)||0;pos.width=obj.width();pos.height=obj.height();return pos},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20}}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)}}return from},_animate_loading=function(){if(!loading.is(":visible")){clearInterval(loadingTimer);return }$("div",loading).css("top",(loadingFrame*-40)+"px");loadingFrame=(loadingFrame+1)%12};$.fn.fancybox=function(options){if(!$(this).length){return this}$(this).data("fancybox",$.extend({},options,($.metadata?$(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(e){e.preventDefault();if(busy){return }busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr("rel")||"";if(!rel||rel==""||rel==="nofollow"){selectedArray.push(this)}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]");selectedIndex=selectedArray.index(this)}_start();return });return this};$.fancybox=function(obj){var opts;if(busy){return }busy=true;opts=typeof arguments[1]!=="undefined"?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=="object"){$(obj[i]).data("fancybox",$.extend({},opts,obj[i]))}else{obj[i]=$({}).data("fancybox",$.extend({content:obj[i]},opts))}}selectedArray=jQuery.merge(selectedArray,obj)}else{if(typeof obj=="object"){$(obj).data("fancybox",$.extend({},opts,obj))}else{obj=$({}).data("fancybox",$.extend({content:obj},opts))}selectedArray.push(obj)}if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0}_start()};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66)};$.fancybox.hideActivity=function(){loading.hide()};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1)};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1)};$.fancybox.pos=function(pos){if(busy){return }pos=parseInt(pos);selectedArray=currentArray;if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start()}else{if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start()}}return };$.fancybox.cancel=function(){if(busy){return }busy=true;$.event.trigger("fancybox-cancel");_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false};$.fancybox.close=function(){if(busy||wrap.is(":hidden")){return }busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return }_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind("keydown.fb");content.find("iframe").attr("src",isIE6&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(currentOpts.titlePosition!=="inside"){title.empty()}wrap.stop();function _cleanup(){overlay.fadeOut("fast");title.empty().hide();wrap.hide();$.event.trigger("fancybox-cleanup");content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false}if(currentOpts.transitionOut=="elastic"){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1}title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup})}else{wrap.fadeOut(currentOpts.transitionOut=="none"?0:currentOpts.speedOut,_cleanup)}};$.fancybox.resize=function(){if(overlay.is(":visible")){overlay.css("height",$(document).height())}$.fancybox.center(true)};$.fancybox.center=function(){var view,align;if(busy){return }align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return }wrap.stop().animate({"top":parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),"left":parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=="number"?arguments[0]:200)};$.fancybox.init=function(){if($("#fancybox-wrap").length){return }$("body").append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev()});nav_right.click(function(e){e.preventDefault();$.fancybox.next()});if($.fn.mousewheel){wrap.bind("mousewheel.fb",function(e,delta){if(busy){e.preventDefault()}else{if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?"prev":"next"]()}}})}if(!$.support.opacity){wrap.addClass("fancybox-ie")}if(isIE6){loading.addClass("fancybox-ie6");wrap.addClass("fancybox-ie6");$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer)}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init()})})(jQuery);;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
AJS.$.fn.fancybox.defaults.titleFormat=function(title){if(title&&title.length){title=AJS.escapeHtml(title);if(this.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+this.titlePosition+'">'+title+"</div>"}};;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jquery","jira/moment","jira/util/data/meta"],function($,moment,Meta){var Time={};function Type(str,isAge){this.key=str;this.isAge=isAge}var relativize=Meta.getBoolean("date-relativize");Type.types={};for(var a=["shortAge","longAge","fullAge","short","long","full","timestamp"],i=0,l=a.length,t;i<l;i++){t=a[i];Type.types[t]=new Type(t,t.toLowerCase().indexOf("age")!==-1)}var momentTranslations={};Time.FormatType=Type;function getTextForRelativeAge(age,type,param){if(age in momentTranslations){return AJS.format(momentTranslations[age],param)}else{return null}}function getFormatString(type){switch(type.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":return"LLL";case"timestamp":return"LLL";default:return null}}function beginningOfDay(time){return time.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function isYesterday(now,date){var end=beginningOfDay(now);var start=end.clone().subtract("d",1);return start<=date&&date<end}function isTomorrow(now,date){var start=beginningOfDay(now).add("d",1);var end=start.clone().add("d",1);return start<=date&&date<end}function getMinutesBetween(start,end){return Math.floor(end.diff(start,"minutes",true))}function getHoursBetween(start,end){var hourDiff=end.diff(start,"hours",true);return Math.round(hourDiff)}function getDaysBetween(start,end){return Math.floor(end.diff(start,"days",true))}function formatDateWithFormatString(date,type){var formatString=getFormatString(type);return date.format(formatString)}function formatDateWithRelativeAge(date,type,now){now=now||moment();if(date<=now){if(date>now.clone().subtract("m",1)){return getTextForRelativeAge("aMomentAgo",type)}else{if(date>now.clone().subtract("m",2)){return getTextForRelativeAge("oneMinuteAgo",type)}else{if(date>now.clone().subtract("m",50)){return getTextForRelativeAge("xMinutesAgo",type,getMinutesBetween(date,now))}else{if(date>now.clone().subtract("m",90)){return getTextForRelativeAge("oneHourAgo",type)}else{if(isYesterday(now,date)&&date<now.clone().subtract("h",5)){return getTextForRelativeAge("oneDayAgo",type)}else{if(date>now.clone().subtract("d",1)){return getTextForRelativeAge("xHoursAgo",type,getHoursBetween(date,now))}else{if(date>now.clone().subtract("d",7)){return getTextForRelativeAge("xDaysAgo",type,Math.max(getDaysBetween(date,now),2))}else{if(date>now.clone().subtract("d",8)){return getTextForRelativeAge("oneWeekAgo",type)}}}}}}}}}else{if(date<now.clone().add("m",1)){return getTextForRelativeAge("inAMoment",type)}else{if(date<now.clone().add("m",2)){return getTextForRelativeAge("inOneMinute",type)}else{if(date<now.clone().add("m",50)){return getTextForRelativeAge("inXMinutes",type,getMinutesBetween(now,date))}else{if(date<now.clone().add("m",90)){return getTextForRelativeAge("inOneHour",type)}else{if(isTomorrow(now,date)&&date>now.clone().add("h",5)){return getTextForRelativeAge("inOneDay",type)}else{if(date<now.clone().add("d",1)){return getTextForRelativeAge("inXHours",type,getHoursBetween(now,date))}else{if(date<now.clone().add("d",7)){return getTextForRelativeAge("inXDays",type,Math.max(getDaysBetween(now,date),2))}else{if(date<now.clone().add("d",8)){return getTextForRelativeAge("inOneWeek",type)}}}}}}}}}return formatDateWithFormatString(date,type)}Time.formatDate=function formatDate(momentDate,type,forceRelativize){if(momentDate&&type){if((relativize||forceRelativize)&&type.isAge){return formatDateWithRelativeAge(momentDate,type)}else{return formatDateWithFormatString(momentDate,type)}}else{return null}};Time.setRelativeTranslations=function(values){for(var k in values){momentTranslations[k]=values[k]}};Time.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({"inAMoment":"Now","inOneMinute":"In 1 minute","inXMinutes":"In {0} minutes","inOneHour":"In 1 hour","inXHours":"In {0} hours","inOneDay":"Tomorrow","inXDays":"In {0} days","inOneWeek":"In 1 week","aMomentAgo":"Just now","oneMinuteAgo":"1 minute ago","xMinutesAgo":"{0} minutes ago","oneHourAgo":"1 hour ago","xHoursAgo":"{0} hours ago","oneDayAgo":"Yesterday","xDaysAgo":"{0} days ago","oneWeekAgo":"1 week ago"})};Time.restoreDefaultRelativeTranslations();Time.formatDateWithRelativeAge=formatDateWithRelativeAge;Time.formatDateWithFormatString=formatDateWithFormatString;return Time});AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function($,moment,Meta,Time){var timeout,updateInterval=6000,relativize=Meta.getBoolean("date-relativize"),livestamps=[],prep=function($el,timestamp){$el.data("livestampdata",timestamp);livestamps.push($el)},run=function(){clearTimeout(timeout);update();timeout=setTimeout(run,updateInterval)},update=function(){livestamps=$.grep(livestamps,function($el){var timestamp=$el.data("livestampdata"),forceRelativize=$el.data("relativize"),from,to;if(!moment.isMoment(timestamp)||!$el.closest("html").length){$el.removeData("livestampdata")}else{from=$el.text();var tsFormat=$el.data("datetime-format");tsFormat=tsFormat?tsFormat:"fullAge";if(!(relativize||forceRelativize)){tsFormat=tsFormat.replace("Age","")}to=Time.formatDate(timestamp,Time.FormatType.types[tsFormat],forceRelativize);if(from!==to){$el.text(to)}}return !!$el.data("livestampdata")})},add=function($el){$el.each(function(){var $this=$(this),timestamp=$this.attr("datetime");if(timestamp){var timestampMoment=isNaN(timestamp)?moment(timestamp).zone(timestamp):moment(parseInt(timestamp,10));prep($this,timestampMoment)}});run();return $el};$.fn.livestamp=function(){return add(this)};return add});(function(){require("jira/jquery/plugins/livestamp/livestamp")})();;
;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'js-vendor/raf/raf.js' */
(function(B){var C=0,F=["webkit","moz"],E=B.requestAnimationFrame,D=B.cancelAnimationFrame,A=F.length;while(--A>=0&&!E){E=B[F[A]+"RequestAnimationFrame"];D=B[F[A]+"CancelAnimationFrame"]}if(!E||!D){E=function(I){var H=Date.now(),G=Math.max(C+16,H);return setTimeout(function(){I(C=G)},G-H)};D=clearTimeout}B.requestAnimationFrame=E;B.cancelAnimationFrame=D}(window));;
;
/* module-key = 'com.atlassian.auiplugin:modernizr-touch', location = 'js-vendor/modernizr/modernizr-touch.js' */
window.Modernizr=(function(M,Q,H){var D="2.8.3",K={},a=Q.documentElement,b="modernizr",Y=Q.createElement(b),N=Y.style,E,T={}.toString,V=" -webkit- -moz- -o- -ms- ".split(" "),I={},C={},R={},X=[],S=X.slice,A,W=function(l,n,f,m){var e,k,h,i,d=Q.createElement("div"),j=Q.body,g=j||Q.createElement("body");if(parseInt(f,10)){while(f--){h=Q.createElement("div");h.id=m?m[f]:b+(f+1);d.appendChild(h)}}e=["&#173;",'<style id="s',b,'">',l,"</style>"].join("");d.id=b;(j?d:g).innerHTML+=e;g.appendChild(d);if(!j){g.style.background="";g.style.overflow="hidden";i=a.style.overflow;a.style.overflow="hidden";a.appendChild(g)}k=n(d,l);if(!j){g.parentNode.removeChild(g);a.style.overflow=i}else{d.parentNode.removeChild(d)}return !!k},B=function(f){var e=M.matchMedia||M.msMatchMedia;if(e){return e(f)&&e(f).matches||false}var d;W("@media "+f+" { #"+b+" { position: absolute; } }",function(g){d=(M.getComputedStyle?getComputedStyle(g,null):g.currentStyle)["position"]=="absolute"});return d},P=({}).hasOwnProperty,Z;if(!J(P,"undefined")&&!J(P.call,"undefined")){Z=function(d,e){return P.call(d,e)}}else{Z=function(d,e){return((e in d)&&J(d.constructor.prototype[e],"undefined"))}}if(!Function.prototype.bind){Function.prototype.bind=function c(f){var g=this;if(typeof g!="function"){throw new TypeError()}var d=S.call(arguments,1),e=function(){if(this instanceof e){var j=function(){};j.prototype=g.prototype;var i=new j();var h=g.apply(i,d.concat(S.call(arguments)));if(Object(h)===h){return h}return i}else{return g.apply(f,d.concat(S.call(arguments)))}};return e}}function O(d){N.cssText=d}function G(e,d){return O(V.join(e+";")+(d||""))}function J(e,d){return typeof e===d}function L(e,d){return !!~(""+e).indexOf(d)}function U(e,h,g){for(var d in e){var f=h[e[d]];if(f!==H){if(g===false){return e[d]}if(J(f,"function")){return f.bind(g||h)}return f}}return false}I.touch=function(){var d;if(("ontouchstart" in M)||M.DocumentTouch&&Q instanceof DocumentTouch){d=true}else{W(["@media (",V.join("touch-enabled),("),b,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){d=e.offsetTop===9})}return d};for(var F in I){if(Z(I,F)){A=F.toLowerCase();K[A]=I[F]();X.push((K[A]?"":"no-")+A)}}K.addTest=function(e,f){if(typeof e=="object"){for(var d in e){if(Z(e,d)){K.addTest(d,e[d])}}}else{e=e.toLowerCase();if(K[e]!==H){return K}f=typeof f=="function"?f():f;if(typeof enableClasses!=="undefined"&&enableClasses){a.className+=" "+(f?"":"no-")+e}K[e]=f}return K};O("");Y=E=null;K._version=D;K._prefixes=V;K.mq=B;K.testStyles=W;return K})(this,this.document);;
;
/* module-key = 'com.atlassian.auiplugin:internal-aui-is-input', location = 'js/aui/internal/is-input.js' */
(function(A){AJS._internal=AJS._internal||{};AJS._internal.isInput=A()})(function(){return function(A){return"value" in A||A.isContentEditable}});;
;
/* module-key = 'com.atlassian.auiplugin:aui-sidebar', location = 'js/aui-sidebar.js' */
(function(E){var A=(typeof document.documentElement.style.transition!=="undefined")||(typeof document.documentElement.style.webkitTransition!=="undefined");function H(N){return N.offset().top}function I(N){this.$el=E(N);if(!this.$el.length){return }this.$body=E("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.submenus=new L();this.$body.addClass("aui-page-sidebar");this._previousScrollTop=null;this._previousViewportHeight=null;this._previousViewportWidth=null;this._previousOffsetTop=null;M(this)}var D=1240;var F="_aui-internal-sidebar-";function K(N){return E.map(N.split(" "),function(O){return F+O}).join(" ")}I.prototype.on=function(){var P=arguments[0];var O=Array.prototype.slice.call(arguments,1);var N=K(P);this.$el.on.apply(this.$el,[N].concat(O));return this};I.prototype.off=function(){var P=arguments[0];var O=Array.prototype.slice.call(arguments,1);var N=K(P);this.$el.off.apply(this.$el,[N].concat(O));return this};I.prototype.setHeight=function(Q,O,N){var P=Math.max(0,N-Q);this.$wrapper.height(O-P);return this};I.prototype.setPosition=function(N){N=N||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",N>H(this.$el));return this};I.prototype.setCollapsedState=function(N){var R={collapsed:{},expanded:{}};R.collapsed.narrow={narrow:E.noop,wide:function(S){S._expand(N,true)}};R.collapsed.wide={narrow:E.noop,wide:E.noop};R.expanded.narrow={narrow:E.noop,wide:function(S){S.$body.removeClass("aui-sidebar-collapsed");S.$el.removeClass("aui-sidebar-fly-out")}};R.expanded.wide={narrow:function(S){S._collapse(true)},wide:E.noop};var Q=this.isCollapsed()?"collapsed":"expanded";var P=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide";var O=this.isViewportNarrow(N)?"narrow":"wide";R[Q][P][O](this);return this};I.prototype._collapse=function(O){if(this.isCollapsed()){return this}var N=E.Event(F+"collapse-start",{isResponsive:O});this.$el.trigger(N);if(N.isDefaultPrevented()){return this}this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded","false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",0);if(!this.isAnimated()){this.$el.trigger(E.Event(F+"collapse-end",{isResponsive:O}))}return this};I.prototype.collapse=function(){return this._collapse(false)};I.prototype._expand=function(O,P){var N=E.Event(F+"expand-start",{isResponsive:P});this.$el.trigger(N);if(N.isDefaultPrevented()){return this}var Q=this.isViewportNarrow(O);this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",Q);this.$el.toggleClass("aui-sidebar-fly-out",Q);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");if(!this.isAnimated()){this.$el.trigger(E.Event(F+"expand-end",{isResponsive:P}))}return this};I.prototype.expand=function(){if(this.isCollapsed()){this._expand(this._previousViewportWidth,false)}return this};I.prototype.isAnimated=function(){return A&&this.$el.hasClass("aui-is-animated")};I.prototype.isCollapsed=function(){return this.$el.attr("aria-expanded")==="false"};I.prototype.isViewportNarrow=function(N){N=N===undefined?this._previousViewportWidth:N;return N<D};I.prototype._removeAllTooltips=function(){E(this.tooltipSelector).remove()};I.prototype.reflow=function(P,U,V,X){P=P===undefined?window.pageYOffset:P;U=U===undefined?document.documentElement.clientHeight:U;X=X===undefined?document.documentElement.scrollHeight:X;V=V===undefined?window.innerWidth:V;var Q=H(this.$el);var T=this._previousViewportWidth===null;if(!(P===this._previousScrollTop&&U===this._previousViewportHeight&&Q===this._previousOffsetTop)){if(this.isCollapsed()&&!T&&P!==this._previousScrollTop){this.submenus.hide();this._removeAllTooltips()}var R=this.$body.hasClass("aui-page-sidebar-touch");var W=P!==this._previousScrollTop&&(P<0||P+U>X);if(!R&&(T||!W)){this.setHeight(P,U,Q);this.setPosition(P)}}var O=this.$el.attr("data-aui-responsive")!=="false";if(O){if(T){if(!this.isCollapsed()&&this.isViewportNarrow(V)){var N=this.isAnimated();if(N){this.$el.removeClass("aui-is-animated")}this.collapse();if(N){this.$el[0].offsetHeight;this.$el.addClass("aui-is-animated")}}}else{if(V!==this._previousViewportWidth){this.setCollapsedState(V)}}}else{var S=!this.isCollapsed()&&this.isViewportNarrow(V);this.$el.toggleClass("aui-sidebar-fly-out",S)}this._previousScrollTop=P;this._previousViewportHeight=U;this._previousViewportWidth=V;this._previousOffsetTop=Q;return this};I.prototype.toggle=function(){if(this.isCollapsed()){if(this.submenus.isShowing()){this.submenus.hide(this.expand.bind(this))}else{this.expand();this._removeAllTooltips()}}else{this.collapse()}return this};I.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";I.prototype.collapsedTriggersSelector=[I.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");I.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";I.prototype.tooltipSelector=".aui-sidebar-section-tooltip";function L(){this.inlineDialog=AJS.InlineDialog(E(),"sidebar-submenu",this.inlineDialogShowHandler.bind(this),{noBind:true,addActiveClass:false,hideCallback:this.inlineDialogHideHandler.bind(this),gravity:"w",hideDelay:300,offsetY:function(N,Q){var P=Q.target.height()/2;var O=N.height()/2;return O-P-this.submenuHeadingHeight()}.bind(this),arrowOffsetY:function(N,Q){var P=Q.target.height()/2;var O=N.height()/2;return -O+this.submenuHeadingHeight()+P}.bind(this)});this.$trigger=null;this.$placeholder=null;this.$placeholderSubmenu=null;this.postHideCallback=null}L.prototype.inlineDialogSelector="#inline-dialog-sidebar-submenu";L.prototype.submenu=function(N){return N.is("a")?N.next(".aui-nav"):N.children(".aui-nav, hr")};L.prototype.hasSubmenu=function(N){return this.submenu(N).length!==0};L.prototype.submenuHeadingHeight=function(){return 34};L.prototype.isShowing=function(){return this.$trigger!==null};L.prototype.show=function(P,O){var N=this.isShowing();this.inlineDialog.show(P,O);if(N){this.inlineDialog.refresh()}return this};L.prototype.hide=function(N){if(N!==undefined){this.postHideCallback=N}this.inlineDialog.hide();return this};var G='<div class="aui-sidebar-submenu"><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div>';L.prototype.inlineDialogShowHandler=function(N,O,R){if(this.isShowing()){this.restoreSubmenu();this.$trigger.removeClass("active")}this.$trigger=E(O).is(".aui-sidebar-group")?E(O):E(O).closest("a");this.$trigger.addClass("active");var Q=this.$trigger.is("a")?this.$trigger.text():this.$trigger.children(".aui-nav-heading").text();N.html(G);var P=N.find(".aui-navgroup-inner");P.children(".aui-nav-heading").attr("title",Q).children("strong").text(Q);this.moveSubmenuToInlineDialog(this.submenu(this.$trigger));R()};L.prototype.inlineDialogHideHandler=function(){this.restoreSubmenu();this.$trigger.removeClass("active");this.$trigger=null;if(this.postHideCallback!==null){this.postHideCallback();this.postHideCallback=null}};L.prototype.moveSubmenuToInlineDialog=function(N){this.$placeholder=E("<!-- placholder -->");this.$placeholderSubmenu=N.clone(true);N.replaceWith(this.$placeholder);this.inlineDialog.find(".aui-navgroup-inner").append(this.$placeholderSubmenu);return this};L.prototype.restoreSubmenu=function(){this.$placeholder.replaceWith(this.$placeholderSubmenu);this.$placeholder=null;this.$placeholderSubmenu=null;return this};var B={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var N=E(this);if(N.is("a")){return N.attr("title")||N.find(".aui-nav-item-label").text()||N.data("tooltip")}else{return N.children(".aui-nav").attr("title")||N.children(".aui-nav-heading").text()}}};function C(N){N.tipsy(B).tipsy("show");var O=N.data("tipsy")&&N.data("tipsy").$tip;if(O){O.css({opacity:""}).addClass("tooltip-shown")}}function J(N){var P=N.data("tipsy")&&N.data("tipsy").$tip;if(P){var Q=P.css("transition-duration");if(Q){var O=(Q.indexOf("ms")>=0)?parseInt(Q.substring(0,Q.length-2),10):1000*parseInt(Q.substring(0,Q.length-1),10);setTimeout(function(){N.tipsy("hide")},O)}P.removeClass("tooltip-shown")}}function M(O){var V=E(".aui-sidebar");if(!V.length){return }if(Modernizr.touch&&Modernizr.mq("only screen and (max-device-width:1024px)")){E("body").addClass("aui-page-sidebar-touch")}var P=null;E(window).on("scroll resize",function(){if(P===null){P=requestAnimationFrame(function(){O.reflow();P=null})}});O.reflow();if(O.isAnimated()){O.$el.on("transitionend webkitTransitionEnd",function(){O.$el.trigger(E.Event(F+(O.isCollapsed()?"collapse-end":"expand-end")))})}O.$el.on("click",".aui-sidebar-toggle",function(X){X.preventDefault();O.toggle()});E(".aui-page-panel").click(function(X){if(!O.isCollapsed()&&O.isViewportNarrow()){O.collapse()}});var Q=function(X){if(U(X)){O.toggle()}};E(document).on("keypress",Q);O._remove=function(){this._removeAllTooltips();E(this.submenus.inlineDialogSelector).remove();this.$el.remove();E(document).off("keypress",Q)};O.$el.on("touchend",function(X){if(O.isCollapsed()){O.expand();X.preventDefault()}});O.$el.on("mouseenter focus",O.collapsedTriggersSelector,function(Y){if(!O.isCollapsed()){return }var X=E(this);if(O.submenus.hasSubmenu(X)){Y.preventDefault();O.submenus.show(Y,this)}else{if(X.hasClass("active")&&O.submenus.isShowing()){Y.stopImmediatePropagation()}else{O.submenus.hide();C(X)}}});O.$el.on("click blur mouseleave",O.collapsedTriggersSelector,function(X){if(!O.isCollapsed()){return }J(E(this))});O.$el.on("click",O.collapsedTriggersSelector,function(X){if(O.submenus.isShowing()){X.stopImmediatePropagation()}});O.$el.on("mouseenter focus",O.toggleSelector,function(){var X=E(this);if(O.isCollapsed()){X.data("tooltip","Expand sidebar ( [ )")}else{X.data("tooltip","Collapse sidebar ( [ )")}C(X)});O.$el.on("click blur mouseleave",O.toggleSelector,function(){J(E(this))});O.$el.on("mouseover",function(Y){var X=E(Y.target);if(X.hasClass("aui-sidebar-wrapper")||X.hasClass("aui-sidebar-body")){O.submenus.hide()}});function S(X){return X.keyCode===AJS.keyCode.TAB&&!X.shiftKey&&!X.altKey}function U(X){return X.which===AJS.keyCode.LEFT_SQUARE_BRACKET&&!X.shiftKey&&!X.ctrlKey&&!X.metaKey&&!AJS._internal.isInput(X.target)}function W(X){return X.keyCode===AJS.keyCode.TAB&&X.shiftKey}function T(X){return X===O.submenus.$placeholderSubmenu.find(":aui-tabbable")[0]}function N(X){return X===O.submenus.$placeholderSubmenu.find(":aui-tabbable").last()[0]}function R(X){return X===O.$el.find(":aui-tabbable:visible")[0]}O.$el.on("keydown",O.collapsedTriggersSelector,function(X){if(S(X)&&O.submenus.isShowing()){X.preventDefault();O.submenus.$placeholderSubmenu.find(":aui-tabbable").first().focus();O.submenus.$placeholderSubmenu.on("keydown",function(Y){if(W(Y)&&T(Y.target)||S(Y)&&N(Y.target)){O.submenus.$trigger.focus();E(this).off("keydown");O.submenus.hide()}})}else{if(W(X)&&R(X.target)){O.submenus.hide()}}})}AJS.sidebar=AJS._internal.widget("sidebar",I);E(function(){AJS.sidebar(".aui-sidebar")})}(AJS.$));;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'js/dialog2.js' */
(function(A){AJS.dialog2=A(AJS.$,AJS.layer,AJS._internal.widget)})(function(D,G,C){var F={"aui-focus":"false","aui-blanketed":"true"};function B(H){D.each(F,function(I,J){var K="data-"+I;if(!H[0].hasAttribute(K)){H.attr(K,J)}})}function A(H){if(H){this.$el=D(H)}else{this.$el=D(aui.dialog.dialog2({}))}B(this.$el)}A.prototype.on=function(I,H){G(this.$el).on(I,H);return this};A.prototype.off=function(I,H){G(this.$el).off(I,H);return this};A.prototype.show=function(){G(this.$el).show();return this};A.prototype.hide=function(){G(this.$el).hide();return this};A.prototype.remove=function(){G(this.$el).remove();return this};A.prototype.isVisible=function(){return G(this.$el).isVisible()};var E=C("dialog2",A);E.on=function(H,I){G.on(H,".aui-dialog2",I);return this};E.off=function(H,I){G.off(H,".aui-dialog2",I);return this};D(document).on("click",".aui-dialog2-header-close",function(H){H.preventDefault();E(D(this).closest(".aui-dialog2")).hide()});E.on("show",function(K,J){var I=[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"];var H;I.some(function(L){H=J.find(L+" :aui-tabbable");return H.length});H&&H.first().focus()});E.on("hide",function(J,I){var H=G(I);if(I.data("aui-remove-on-hide")){H.remove()}});return E});;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}
;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.soy' */
// This file was automatically generated from changeProjectTypeDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.project.ChangeType.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.project == 'undefined') { JIRA.Templates.project = {}; }
if (typeof JIRA.Templates.project.ChangeType == 'undefined') { JIRA.Templates.project.ChangeType = {}; }


JIRA.Templates.project.ChangeType.changeProjectTypeDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="change-project-type-dialog-' + soy.$$escapeHtml(opt_data.projectId) + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Change project type") + '</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">' + soy.$$escapeHtml("Change") + '</button><button class="aui-button aui-button-link dialog-close-button">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeDialog.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeDialog';
}


JIRA.Templates.project.ChangeType.changeProjectTypeForm = function(opt_data, opt_ignored) {
  var output = '<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">' + JIRA.Templates.project.ChangeType.projectAvatar(opt_data) + '</div><div class="aui-item project-type-select-group">' + JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey: opt_data.project.projectTypeKey, projectTypes: opt_data.projectTypes}) + '</div></div></div></form><p>';
  var helpLinkAnchor__soy21 = '<a href=' + soy.$$escapeHtml(opt_data.helpLink) + ' target="_blank">';
  output += soy.$$filterNoAutoescape(AJS.format("If you change project type, you\x27\x27ll also change what your users can see and do with the project. {0}Check the differences here{1}.",helpLinkAnchor__soy21,'</a>')) + '</p>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeForm.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeForm';
}


JIRA.Templates.project.ChangeType.projectTypeDropdown = function(opt_data, opt_ignored) {
  var output = '<select class="project-type-select select" name="project-type">';
  var projectTypeList30 = opt_data.projectTypes;
  var projectTypeListLen30 = projectTypeList30.length;
  for (var projectTypeIndex30 = 0; projectTypeIndex30 < projectTypeListLen30; projectTypeIndex30++) {
    var projectTypeData30 = projectTypeList30[projectTypeIndex30];
    output += '<option class="imagebacked" data-icon="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeData30.icon) + '" value="' + soy.$$escapeHtml(projectTypeData30.key) + '" ' + ((projectTypeData30.key == opt_data.projectTypeKey) ? ' selected ' : '') + '>' + soy.$$escapeHtml(projectTypeData30.formattedKey) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectTypeDropdown.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectTypeDropdown';
}


JIRA.Templates.project.ChangeType.updateTargetElement = function(opt_data, opt_ignored) {
  return '<img src="data:image/svg+xml;base64,' + soy.$$escapeHtml(opt_data.icon) + '" class="project-type-icon" /><span>' + soy.$$escapeHtml(opt_data.formattedKey) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.updateTargetElement.soyTemplateName = 'JIRA.Templates.project.ChangeType.updateTargetElement';
}


JIRA.Templates.project.ChangeType.projectAvatar = function(opt_data, opt_ignored) {
  return '<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.project.name) + '"></span></span><div class="project-header" title="' + soy.$$escapeHtml(opt_data.project.name) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectAvatar.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectAvatar';
}


JIRA.Templates.project.ChangeType.dialogSpinner = function(opt_data, opt_ignored) {
  return '<div class="dialog-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.dialogSpinner.soyTemplateName = 'JIRA.Templates.project.ChangeType.dialogSpinner';
}


JIRA.Templates.project.ChangeType.successMsg = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(AJS.format("You have just changed {0} to a {1} project type.",opt_data.projectName,opt_data.projectTypeName));
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.successMsg.soyTemplateName = 'JIRA.Templates.project.ChangeType.successMsg';
}
;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jquery","underscore","jira/message","jira/ajs/select/single-select","wrm/context-path"],function($,_,message,SingleSelect,contextPath){function _getProjectInformation(projectId){return $.ajax({url:contextPath()+"/rest/internal/2/projects/"+projectId+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function handleChangeProjectType(options){var $projectTypeSelect=$(".project-type-select",options.dialogBody);var selectedProjectTypeKey=$projectTypeSelect.val()[0];var selectedProjectType=_.findWhere(options.projectTypes,{key:selectedProjectTypeKey});$(".dialog-change-button",options.dialogBody).attr("disabled","disabled");$($.ajax({url:contextPath()+"/rest/api/2/project/"+options.projectId+"/type/"+selectedProjectTypeKey,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){options.changeProjectTypeDialog.hide();if(options.onProjectTypeChanged){options.onProjectTypeChanged(options.trigger,selectedProjectType)}message.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:options.projectName,projectTypeName:selectedProjectType.formattedKey}));AJS.EventQueue.push({name:"administration.projecttype.change",properties:{projectId:options.projectId,sourceProjectType:_normalizeProjectTypeKey(options.sourceProjectType),destinationProjectType:_normalizeProjectTypeKey(selectedProjectTypeKey)}})}).fail(function(){$(".aui-dialog2-content",options.dialogBody).prepend(aui.message.error({content:AJS.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:$(".throbber",options.dialogBody)})}function _normalizeProjectTypeKey(projectTypeKey){return projectTypeKey&&projectTypeKey.replace("_","")}function toggleChangeButton(selectedType,currentType,$dialogBody){if(selectedType==currentType){$dialogBody.find(".dialog-change-button").attr("disabled","disabled")}else{$dialogBody.find(".dialog-change-button").removeAttr("disabled")}}function initDialog(options){var $dialogBody=$(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:options.projectId}));var changeProjectTypeDialog=AJS.dialog2($dialogBody);changeProjectTypeDialog.on("show",function(){$(".aui-dialog2-content",$dialogBody).html(JIRA.Templates.project.ChangeType.dialogSpinner());$(".dialog-spinner",$dialogBody).spin();$(".dialog-change-button",$dialogBody).unbind("click").addClass("hidden")});$(options.trigger).click(function(e){e.preventDefault();changeProjectTypeDialog.show();_getProjectInformation(options.projectId).done(function(resp){$dialogBody.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(resp));new SingleSelect({element:$(".project-type-select",$dialogBody),revertOnInvalid:true,width:165});$dialogBody.find(".dialog-change-button").removeClass("hidden");toggleChangeButton($(".project-type-select",$dialogBody).val(),resp.project.projectTypeKey,$dialogBody);var $changeData={dialogBody:$dialogBody,changeProjectTypeDialog:changeProjectTypeDialog,projectName:resp.project.name,projectTypes:resp.projectTypes,trigger:options.trigger,projectId:options.projectId,onProjectTypeChanged:options.onProjectTypeChanged,sourceProjectType:resp.project.projectTypeKey};$(".dialog-change-button",$dialogBody).click(function(e){e.preventDefault();handleChangeProjectType($changeData)});$(".change-project-type-form",$dialogBody).on("submit",function(e){e.preventDefault();handleChangeProjectType($changeData)});$(".project-type-select",$dialogBody).on("change",function(e){toggleChangeButton($(this).val(),resp.project.projectTypeKey,$dialogBody)})}).fail(function(){$(".aui-dialog2-content",$dialogBody).html(aui.message.error({content:AJS.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})});$(".dialog-close-button",$dialogBody).click(function(e){e.preventDefault();changeProjectTypeDialog.hide()})}return function(options){initDialog(options)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(require){var jQuery=require("jquery");var wrmData=require("wrm/data");var InlineDialog=require("aui/inline-dialog");function attachDialog(dialogData,onProjectTypeChanged){var trigger=jQuery(".project-type-warning-icon");InlineDialog(trigger,"uninstalled-warning-dialog",function(content,trigger,showPopup){content.html(JIRA.Project.Types.Warning.dialog({title:dialogData.title,firstParagraph:dialogData.firstParagraph,secondParagraph:dialogData.secondParagraph,callToActionText:dialogData.callToActionText}));var ChangeProjectTypeDialog=require("jira/project/admin/change-project-type-dialog");ChangeProjectTypeDialog({trigger:jQuery(".warning-dialog-change-project-type"),projectId:dialogData.projectId,onProjectTypeChanged:onProjectTypeChanged});showPopup();return false},{width:375,gravity:"w"})}var dialogData=wrmData.claim("project.type.warning.dialogs.data");return{init:function(options){options=options||{};attachDialog(dialogData,options.onProjectTypeChanged)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Project.Types.Warning.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Project == 'undefined') { JIRA.Project = {}; }
if (typeof JIRA.Project.Types == 'undefined') { JIRA.Project.Types = {}; }
if (typeof JIRA.Project.Types.Warning == 'undefined') { JIRA.Project.Types.Warning = {}; }


JIRA.Project.Types.Warning.dialog = function(opt_data, opt_ignored) {
  return '<div class="project-type-warning-dialog"><p class="header"><span>' + soy.$$escapeHtml(opt_data.title) + '</span></p><p class="type-not-accessible-message">' + soy.$$escapeHtml(opt_data.firstParagraph) + '</p><p class="available-functionality-message">' + soy.$$escapeHtml(opt_data.secondParagraph) + '</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">' + soy.$$escapeHtml(opt_data.callToActionText) + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Project.Types.Warning.dialog.soyTemplateName = 'JIRA.Project.Types.Warning.dialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(c,a,b){return b(a,c)});AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
(function(){function c(f,e){var d=this;var g=_.defaults({},e||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true;d.trigger(f+":prevented",this)}});this.trigger(f,g);return g}function b(e,d){var f=this.triggerPreventable(e,d);if(f.isPrevented){d.preventDefault()}}_.extend(JIRA.Projects.Libs.Marionette.View.prototype,{unwrapTemplate:function a(){if(this.$el.parent().length){var d=this.$el.children();this.$el.replaceWith(d);this.setElement(d)}else{this.setElement(this.$el.children())}},triggerPreventable:c,retriggerPreventable:b});_.extend(JIRA.Projects.Libs.Marionette.Controller.prototype,{triggerPreventable:c,retriggerPreventable:b});JIRA.Projects.Libs.Marionette.ViewManager=JIRA.Projects.Libs.Marionette.Controller.extend({constructor:function(){JIRA.Projects.Libs.Marionette.Controller.apply(this,arguments);this.views={}},hideView:function(e){var d=this.views[e];if(d){this.stopListening(d);if(!d.isDestroyed){d.destroy()}delete this.views[e]}},showView:function(f,e){var d=this.buildView(f,e);d.render()},buildView:function(f,e){var d=this.views[f];if(!d){d=e.call(this);this.listenTo(d,"destroy",function(){this.hideView(f)});this.views[f]=d}return d},getView:function(d){return this.views[d]}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["jira/projects/data/WRM"],function(a){var b=Boolean(a.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(c,d){if(!this.hasASelectedItem()){d.isInitial=true}this.retriggerPreventable("before:select",d);if(!d.isPrevented){this.deselectAllGroups()}},select:function(d,c){this.trigger("select",c)},"before:deselect":function(c,d){this.retriggerPreventable("before:deselect",d)},deselect:function(d,c){this.trigger("deselect",c)},"before:navigate":function(c,d){this.retriggerPreventable("before:navigate",d)},"before:navigate:prevented":function(c,d){this.trigger("before:navigate:prevented",d)}},initialize:function(){this.$(".aui-sidebar-group").each(_.bind(function(c,d){var f=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:d});var e=!!this.getGroup(f.id);if(e&&AJS.warn){AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+f.id+'"')}this.proxyChildEvents(f);this.children.add(f,f.id)},this))},deselectAllGroups:function(){this.children.call("deselect")},replaceGroup:function(c,e){var d=this.getGroup(c);d.$el.replaceWith(e.$el);e.cid=d.cid;this.children.remove(d);this.children.add(e,e.id)},getGroup:function(c){return this.children.findByCustom(c)},getGroupAt:function(c){return this.children.findByIndex(c)},getItem:function(c){return this.getDefaultGroup().getItem(c)},getElement:function(){return this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return !b},getSelectedScopeFilterId:function(){return this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(d){var e=this.getGroup("sidebar-navigation-panel");var c=e.getItem("com.atlassian.jira.jira-projects-plugin:report-page");if(typeof c==="undefined"){c=e.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")}if(c){c.ui.link.attr("href",d)}},getAUISidebar:function(){return AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()}})});AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem");JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(a){a.preventDefault();this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id");this.bindUIElements()},getElement:function(){return this.el},navigate:function(){if(!this.select()){return}var b=this.triggerPreventable("before:navigate");if(b.isPrevented){return false}var a=this.ui.link.attr("href");if(a){require("jira/util/browser").reloadViaWindowLocation(a)}return true},select:function(){var a=this.triggerPreventable("before:select");if(a.isPrevented){return false}this.$el.addClass("aui-nav-selected");this.trigger("select",a);return true},deselect:function(){if(!this.isSelected()){return true}var a=this.triggerPreventable("before:deselect");if(a.isPrevented){return false}this.$el.removeClass("aui-nav-selected");this.$el.find("a").blur();this.trigger("deselect",a);return true},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}},hasASelectedItem:function(){return this.isSelected()}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup");JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(a,c){this.retriggerPreventable("before:select",c);if(c.isPrevented){return}var b=this.deselect();if(!b){c.preventDefault()}},select:function(b,a){this.trigger("select",a)},"before:deselect":function(a,b){this.retriggerPreventable("before:deselect",b)},deselect:function(b,a){this.trigger("deselect",a)},"before:navigate":function(a,b){this.retriggerPreventable("before:navigate",b)},"before:navigate:prevented":function(a,b){this.trigger("before:navigate:prevented",b)}},initialize:function(){this.id=this.$el.attr("data-id");this.$(">ul>li").each(_.bind(function(b,a){var c=JIRA.Projects.Sidebar.Component.NavigationGroup.build(a);var d=!!this.getItem(c.id);if(d&&AJS.warn){AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+c.id+"'")}this.proxyChildEvents(c);this.children.add(c,c.id)},this))},getElement:function(){return this.el},deselect:function(){var b=this.triggerPreventable("before:deselect");if(b.isPrevented){return false}var a=true;this.children.each(function(c){a=c.deselect()&&a});return a},getItem:function(a){return this.children.findByCustom(a)},getItemAt:function(a){return this.children.findByIndex(a)},getSelectedNavigationItem:function(){var a=this.children.find(function(b){return b.hasASelectedItem()});if(a){return a.getSelectedNavigationItem()}},hasASelectedItem:function(){return this.children.any(function(a){return a.hasASelectedItem()})}},{build:function(b){var a;if(AJS.$(b).find("ul").length){a=new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:b})}else{a=new JIRA.Projects.Sidebar.Component.NavigationItem({el:b})}return a}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup");JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(a,b){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments);if(!b.isPrevented){this.expand()}}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents);JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments);this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return this.$el.attr("aria-expanded")==="true"},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}var a=this.children.find(function(b){return b.hasASelectedItem()});if(a){return a.getSelectedNavigationItem()}},hasASelectedItem:function(){if(this.isSelected()){return true}return this.children.any(function(a){return a.hasASelectedItem()})}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = '/sidebar/api.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar");AJS.namespace("JIRA.API");var a=AJS.$.Deferred();JIRA.API.getSidebar=function(){return a.promise()};JIRA.Projects.Sidebar.initAPI=function(b){JIRA.API.Sidebar=b;a.resolve(JIRA.API.Sidebar)}}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
(function(d){AJS.namespace("JIRA.Projects.Sidebar.Analytics");function a(e){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(e||"NONE")}function b(e,f){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+e,data:f})}JIRA.Projects.Sidebar.Analytics=function(g){var f=AJS.sidebar(g);var e=d();e=e.add(f.$el);e=e.add(f.submenus.inlineDialog);if(!JIRA.API.Sidebar){throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called")}if(JIRA.API.Sidebar.isProjectSidebar()){b("load.project")}else{b("load.global")}e.on("click","a",function(){var i=a(d(this).attr("data-link-id"));var h={id:i.hash,prefix:i.prefix};var j=AJS.Meta.get("sidebar-source-page");if(j){h.sidebarSourcePage=j}else{if(d(".issue-tools button.expand").length>0){h.sidebarSourcePage="search-el"}else{if(d(".navigation-tools button.collapse").length>0){h.sidebarSourcePage="fullscreen-el"}}}if(c.indexOf(h.sidebarSourcePage)===-1){h.sidebarSourcePage="unknown"}b("click.link",h)})};var c=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk"]})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Analytics");var d=[];function b(e,f){return e.indexOf(f)===0}function c(e,f){return e.substring(b(e,f)?f.length:0)}function a(f){var e;var h=0;if(!f){return""}for(var g=0;g<f.length;g+=1){e=f.charCodeAt(g);h=((h*32)-h)+e;h|=0}return h}JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(e){var f=_.find(d,_.partial(b,e))||"";return{prefix:f,hash:f+a(c(e,f))}},addPrefix:function(e){if(e&&!_.contains(d,e)){d.push(e)}},clearPrefixes:function(){d.length=0}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = '/sidebar/expansion-manager.js' */
(function(){var a="jira-sidebar-collapsed";AJS.namespace("JIRA.Projects.Sidebar");JIRA.Projects.Sidebar.ExpansionManager=function(e,g){g||(g=window.localStorage);var d=!!WRM.data.claim("sidebar-collapsed-by-default");f();e.on("expand-start",c);e.on("expand-end collapse-end",b);function c(h){if(h.isResponsive&&g[a]==="true"){h.preventDefault()}}function b(h){if(!h.isResponsive&&!e.isViewportNarrow()){g[a]=e.isCollapsed().toString()}}function f(){if(e.reflow()&&e.isViewportNarrow()){return}if((d&&g[a]===undefined)||g[a]==="true"){e.collapse()}else{e.expand()}}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'page/projects-api.js' */
define("jira/api/projects",["jira/projects/data/WRM"],function(d){var a=d.data.claim("project-key"),c=d.data.claim("project-id"),b=d.data.claim("project-name");return{getCurrentProjectId:function(){return c},getCurrentProjectKey:function(){return a},getCurrentProjectName:function(){return b}}});AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jquery"],function(b){function a(c,d,e){e=e||function(){JIRA.trace("last.visited.item.saved")};b.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(c)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:d})}).done(e)}return{start:function(d,f){var c=(JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey())||null;var e=d.getSelectedNavigationItem();if(e){a(c,e.getId(),f)}d.on("before:navigate:prevented",function(g){a(c,g.emitter.id,f)});d.on("before:select",function(g){if(g.isInitial){a(c,g.emitter.id,f)}})}}});AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-init', location = '/sidebar/main.js' */
AJS.$(function(){var e=["NONE","com.atlassian.jira.jira-projects-plugin:project-issue-search-link","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:reports-panel","com.atlassian.jira.jira-projects-plugin:summary-panel","com.atlassian.jira.jira-projects-plugin:summary-page","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:release-page","com.atlassian.jira.jira-projects-plugin:release-sidebar-version-","com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-invite-users-link","com.pyxis.greenhopper.jira:sidebar-feedback-link","com.atlassian.jira.jira-projects-issue-navigator:embedded-issue-navigator-link","com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator","com.atlassian.jira.jira-projects-plugin:project-invite-users-link","com.atlassian.jira.jira-projects-plugin:sidebar-feedback-link"];function b(h){var g=AJS.$(".aui-sidebar .aui-badge");g.tooltip({gravity:"w"});if(h.isCollapsed()){g.tooltip("disable")}h.on("collapse-end expand-end",function(){AJS.$(".tipsy").remove();AJS.$(".aui-sidebar .aui-badge").tooltip("toggleEnabled")})}function c(){function g(){JIRA.API.Sidebar.getAUISidebar().reflow()}setTimeout(g,200);setInterval(g,5*60*1000)}function d(g){g.on("collapse-start",function(){var h=g.$el.find(".scope-filter-trigger");if(h.hasClass("aui-dropdown2-active")){h.trigger("aui-button-invoke")}})}function a(){require("jira/project/types/warning/dialog").init({onProjectTypeChanged:function(){var g=JIRA.API.Projects.getCurrentProjectKey();window.location.replace(AJS.contextPath()+"/projects/"+g+"/summary")}});JIRA.trace("project.types.warning.messages.init")}if(AJS.$(".aui-sidebar").length){var f=AJS.sidebar(".aui-sidebar");JIRA.Projects.Sidebar.initAPI(new JIRA.Projects.Sidebar.Component({el:f.$el[0]}));JIRA.Projects.Sidebar.ExpansionManager(f);_(e).each(JIRA.Projects.Sidebar.Analytics.Hash.addPrefix);JIRA.Projects.Sidebar.Analytics(".aui-sidebar");d(f);b(f);c();a();JIRA.API.getSidebar().done(function(g){JIRA.Projects.Sidebar.LastVisited.Updater.start(g)})}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml("Boards in this project") + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml("Boards in this project") + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml("Select a board") + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions) {
      var createActionList30 = opt_data.createActions;
      var createActionListLen30 = createActionList30.length;
      for (var createActionIndex30 = 0; createActionIndex30 < createActionListLen30; createActionIndex30++) {
        var createActionData30 = createActionList30[createActionIndex30];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData30.styleClass, label: createActionData30.label, link: createActionData30.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/model.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.Model=function(c){this.selectedScope=c.selectedScope;this.createScopeActions=c.createScopeActions;if(this.selectedScope){this.selectableScopes=_.reject(c.scopes,function(d){return d.label===this.selectedScope.label&&d.link===this.selectedScope.link},this)}else{this.selectableScopes=c.scopes}var b=this.createScopeActions.length>0;var a=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=b||a};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-controller.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(a){this.scopeFilter=a.scopeFilter;var b=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(c){this.$el.empty().append(c.$el)}});this.collapsedScopeFilterContainer=new b({el:a.collapsedScopeFilterContainer})},render:function(){var a=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(a)},remove:function(){this.collapsedScopeFilterContainer.empty();this.collapsedScopeFilterContainer.$el.empty()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-initializer.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");function b(d){var c=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());d.prepend(c);return c}function a(d,c){d.on("collapse-start",function(){c.render();JIRA.trace("sidebar.scopefilter.collapsed")});d.on("expand-end",function(){c.remove()})}JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(c){this.sidebarAPI=c.sidebarAPI;this.scopeFilterData=c.scopeFilterData;this.sidebar=c.sidebar;this.$sidebarContentContainer=c.$sidebarContentContainer},run:function(){if(!this.sidebarAPI.isProjectSidebar()){return}var e=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(!e.shouldDisplayWhenSidebarIsCollapsed()){return}var c=b(this.$sidebarContentContainer);var d=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:e,collapsedScopeFilterContainer:c});a(this.sidebar,d);if(this.sidebar.isCollapsed()){d.render()}}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-init.js' */
(function(){var a=WRM.data.claim("scope-filter-data");if(a){JIRA.API.getSidebar().done(function(c){var b=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:c,scopeFilterData:a,sidebar:c.getAUISidebar(),$sidebarContentContainer:c.getContentContainer()});b.run()})}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feature-discovery', location = '/sidebar/feature-discovery/feature-discovery.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.FeatureDiscovery");function a(b){_.each(b,function(d){var c=JIRA.API.Sidebar.getItem(d);if(c){c.removeBadge()}})}JIRA.Projects.Sidebar.FeatureDiscovery={updateBadges:function(){if(typeof JIRA.API.Projects.getCurrentProjectKey()==="undefined"){return}AJS.$.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(JIRA.API.Projects.getCurrentProjectKey())+"/badges",type:"PUT",contentType:"application/json"}).done(function(b){a(b.badgesToRemove||[])})}}}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/underscore.js' */
(function(){var w=this;var k=w._;var D={};var C=Array.prototype,f=Object.prototype,r=Function.prototype;var G=C.push,o=C.slice,y=C.concat,d=f.toString,j=f.hasOwnProperty;var K=C.forEach,q=C.map,E=C.reduce,c=C.reduceRight,b=C.filter,B=C.every,p=C.some,n=C.indexOf,l=C.lastIndexOf,u=Array.isArray,e=Object.keys,F=r.bind;var L=function(M){if(M instanceof L){return M}if(!(this instanceof L)){return new L(M)}this._wrapped=M};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=L}exports._=L}else{w._=L}L.VERSION="1.4.4";var H=L.each=L.forEach=function(R,Q,P){if(R==null){return}if(K&&R.forEach===K){R.forEach(Q,P)}else{if(R.length===+R.length){for(var O=0,M=R.length;O<M;O++){if(Q.call(P,R[O],O,R)===D){return}}}else{for(var N in R){if(L.has(R,N)){if(Q.call(P,R[N],N,R)===D){return}}}}}};L.map=L.collect=function(P,O,N){var M=[];if(P==null){return M}if(q&&P.map===q){return P.map(O,N)}H(P,function(S,Q,R){M[M.length]=O.call(N,S,Q,R)});return M};var g="Reduce of empty array with no initial value";L.reduce=L.foldl=L.inject=function(Q,P,M,O){var N=arguments.length>2;if(Q==null){Q=[]}if(E&&Q.reduce===E){if(O){P=L.bind(P,O)}return N?Q.reduce(P,M):Q.reduce(P)}H(Q,function(T,R,S){if(!N){M=T;N=true}else{M=P.call(O,M,T,R,S)}});if(!N){throw new TypeError(g)}return M};L.reduceRight=L.foldr=function(S,P,M,O){var N=arguments.length>2;if(S==null){S=[]}if(c&&S.reduceRight===c){if(O){P=L.bind(P,O)}return N?S.reduceRight(P,M):S.reduceRight(P)}var R=S.length;if(R!==+R){var Q=L.keys(S);R=Q.length}H(S,function(V,T,U){T=Q?Q[--R]:--R;if(!N){M=S[T];N=true}else{M=P.call(O,M,S[T],T,U)}});if(!N){throw new TypeError(g)}return M};L.find=L.detect=function(P,O,N){var M;A(P,function(S,Q,R){if(O.call(N,S,Q,R)){M=S;return true}});return M};L.filter=L.select=function(P,O,N){var M=[];if(P==null){return M}if(b&&P.filter===b){return P.filter(O,N)}H(P,function(S,Q,R){if(O.call(N,S,Q,R)){M[M.length]=S}});return M};L.reject=function(O,N,M){return L.filter(O,function(R,P,Q){return !N.call(M,R,P,Q)},M)};L.every=L.all=function(P,O,N){O||(O=L.identity);var M=true;if(P==null){return M}if(B&&P.every===B){return P.every(O,N)}H(P,function(S,Q,R){if(!(M=M&&O.call(N,S,Q,R))){return D}});return !!M};var A=L.some=L.any=function(P,O,N){O||(O=L.identity);var M=false;if(P==null){return M}if(p&&P.some===p){return P.some(O,N)}H(P,function(S,Q,R){if(M||(M=O.call(N,S,Q,R))){return D}});return !!M};L.contains=L.include=function(N,M){if(N==null){return false}if(n&&N.indexOf===n){return N.indexOf(M)!=-1}return A(N,function(O){return O===M})};L.invoke=function(O,P){var M=o.call(arguments,2);var N=L.isFunction(P);return L.map(O,function(Q){return(N?P:Q[P]).apply(Q,M)})};L.pluck=function(N,M){return L.map(N,function(O){return O[M]})};L.where=function(N,M,O){if(L.isEmpty(M)){return O?null:[]}return L[O?"find":"filter"](N,function(Q){for(var P in M){if(M[P]!==Q[P]){return false}}return true})};L.findWhere=function(N,M){return L.where(N,M,true)};L.max=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.max.apply(Math,P)}if(!O&&L.isEmpty(P)){return -Infinity}var M={computed:-Infinity,value:-Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R>=M.computed&&(M={value:T,computed:R})});return M.value};L.min=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.min.apply(Math,P)}if(!O&&L.isEmpty(P)){return Infinity}var M={computed:Infinity,value:Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R<M.computed&&(M={value:T,computed:R})});return M.value};L.shuffle=function(P){var O;var N=0;var M=[];H(P,function(Q){O=L.random(N++);M[N-1]=M[O];M[O]=Q});return M};var a=function(M){return L.isFunction(M)?M:function(N){return N[M]}};L.sortBy=function(P,O,M){var N=a(O);return L.pluck(L.map(P,function(S,Q,R){return{value:S,index:Q,criteria:N.call(M,S,Q,R)}}).sort(function(T,S){var R=T.criteria;var Q=S.criteria;if(R!==Q){if(R>Q||R===void 0){return 1}if(R<Q||Q===void 0){return -1}}return T.index<S.index?-1:1}),"value")};var t=function(R,Q,N,P){var M={};var O=a(Q||L.identity);H(R,function(U,S){var T=O.call(N,U,S,R);P(M,T,U)});return M};L.groupBy=function(O,N,M){return t(O,N,M,function(P,Q,R){(L.has(P,Q)?P[Q]:(P[Q]=[])).push(R)})};L.countBy=function(O,N,M){return t(O,N,M,function(P,Q){if(!L.has(P,Q)){P[Q]=0}P[Q]++})};L.sortedIndex=function(T,S,P,O){P=P==null?L.identity:a(P);var R=P.call(O,S);var M=0,Q=T.length;while(M<Q){var N=(M+Q)>>>1;P.call(O,T[N])<R?M=N+1:Q=N}return M};L.toArray=function(M){if(!M){return[]}if(L.isArray(M)){return o.call(M)}if(M.length===+M.length){return L.map(M,L.identity)}return L.values(M)};L.size=function(M){if(M==null){return 0}return(M.length===+M.length)?M.length:L.keys(M).length};L.first=L.head=L.take=function(O,N,M){if(O==null){return void 0}return(N!=null)&&!M?o.call(O,0,N):O[0]};L.initial=function(O,N,M){return o.call(O,0,O.length-((N==null)||M?1:N))};L.last=function(O,N,M){if(O==null){return void 0}if((N!=null)&&!M){return o.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};L.rest=L.tail=L.drop=function(O,N,M){return o.call(O,(N==null)||M?1:N)};L.compact=function(M){return L.filter(M,L.identity)};var x=function(N,O,M){H(N,function(P){if(L.isArray(P)){O?G.apply(M,P):x(P,O,M)}else{M.push(P)}});return M};L.flatten=function(N,M){return x(N,M,[])};L.without=function(M){return L.difference(M,o.call(arguments,1))};L.uniq=L.unique=function(S,R,Q,P){if(L.isFunction(R)){P=Q;Q=R;R=false}var N=Q?L.map(S,Q,P):S;var O=[];var M=[];H(N,function(U,T){if(R?(!T||M[M.length-1]!==U):!L.contains(M,U)){M.push(U);O.push(S[T])}});return O};L.union=function(){return L.uniq(y.apply(C,arguments))};L.intersection=function(N){var M=o.call(arguments,1);return L.filter(L.uniq(N),function(O){return L.every(M,function(P){return L.indexOf(P,O)>=0})})};L.difference=function(N){var M=y.apply(C,o.call(arguments,1));return L.filter(N,function(O){return !L.contains(M,O)})};L.zip=function(){var M=o.call(arguments);var P=L.max(L.pluck(M,"length"));var O=new Array(P);for(var N=0;N<P;N++){O[N]=L.pluck(M,""+N)}return O};L.object=function(Q,O){if(Q==null){return{}}var M={};for(var P=0,N=Q.length;P<N;P++){if(O){M[Q[P]]=O[P]}else{M[Q[P][0]]=Q[P][1]}}return M};L.indexOf=function(Q,O,P){if(Q==null){return -1}var N=0,M=Q.length;if(P){if(typeof P=="number"){N=(P<0?Math.max(0,M+P):P)}else{N=L.sortedIndex(Q,O);return Q[N]===O?N:-1}}if(n&&Q.indexOf===n){return Q.indexOf(O,P)}for(;N<M;N++){if(Q[N]===O){return N}}return -1};L.lastIndexOf=function(Q,O,P){if(Q==null){return -1}var M=P!=null;if(l&&Q.lastIndexOf===l){return M?Q.lastIndexOf(O,P):Q.lastIndexOf(O)}var N=(M?P:Q.length);while(N--){if(Q[N]===O){return N}}return -1};L.range=function(R,P,Q){if(arguments.length<=1){P=R||0;R=0}Q=arguments[2]||1;var N=Math.max(Math.ceil((P-R)/Q),0);var M=0;var O=new Array(N);while(M<N){O[M++]=R;R+=Q}return O};L.bind=function(O,N){if(O.bind===F&&F){return F.apply(O,o.call(arguments,1))}var M=o.call(arguments,2);return function(){return O.apply(N,M.concat(o.call(arguments)))}};L.partial=function(N){var M=o.call(arguments,1);return function(){return N.apply(this,M.concat(o.call(arguments)))}};L.bindAll=function(N){var M=o.call(arguments,1);if(M.length===0){M=L.functions(N)}H(M,function(O){N[O]=L.bind(N[O],N)});return N};L.memoize=function(O,N){var M={};N||(N=L.identity);return function(){var P=N.apply(this,arguments);return L.has(M,P)?M[P]:(M[P]=O.apply(this,arguments))}};L.delay=function(N,O){var M=o.call(arguments,2);return setTimeout(function(){return N.apply(null,M)},O)};L.defer=function(M){return L.delay.apply(L,[M,1].concat(o.call(arguments,1)))};L.throttle=function(R,T){var P,O,S,M;var Q=0;var N=function(){Q=new Date;S=null;M=R.apply(P,O)};return function(){var U=new Date;var V=T-(U-Q);P=this;O=arguments;if(V<=0){clearTimeout(S);S=null;Q=U;M=R.apply(P,O)}else{if(!S){S=setTimeout(N,V)}}return M}};L.debounce=function(O,Q,N){var P,M;return function(){var U=this,T=arguments;var S=function(){P=null;if(!N){M=O.apply(U,T)}};var R=N&&!P;clearTimeout(P);P=setTimeout(S,Q);if(R){M=O.apply(U,T)}return M}};L.once=function(O){var M=false,N;return function(){if(M){return N}M=true;N=O.apply(this,arguments);O=null;return N}};L.wrap=function(M,N){return function(){var O=[M];G.apply(O,arguments);return N.apply(this,O)}};L.compose=function(){var M=arguments;return function(){var N=arguments;for(var O=M.length-1;O>=0;O--){N=[M[O].apply(this,N)]}return N[0]}};L.after=function(N,M){if(N<=0){return M()}return function(){if(--N<1){return M.apply(this,arguments)}}};L.keys=e||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var M in O){if(L.has(O,M)){N[N.length]=M}}return N};L.values=function(O){var M=[];for(var N in O){if(L.has(O,N)){M.push(O[N])}}return M};L.pairs=function(O){var N=[];for(var M in O){if(L.has(O,M)){N.push([M,O[M]])}}return N};L.invert=function(O){var M={};for(var N in O){if(L.has(O,N)){M[O[N]]=N}}return M};L.functions=L.methods=function(O){var N=[];for(var M in O){if(L.isFunction(O[M])){N.push(M)}}return N.sort()};L.extend=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){M[O]=N[O]}}});return M};L.pick=function(N){var O={};var M=y.apply(C,o.call(arguments,1));H(M,function(P){if(P in N){O[P]=N[P]}});return O};L.omit=function(O){var P={};var N=y.apply(C,o.call(arguments,1));for(var M in O){if(!L.contains(N,M)){P[M]=O[M]}}return P};L.defaults=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){if(M[O]==null){M[O]=N[O]}}}});return M};L.clone=function(M){if(!L.isObject(M)){return M}return L.isArray(M)?M.slice():L.extend({},M)};L.tap=function(N,M){M(N);return N};var I=function(T,S,N,O){if(T===S){return T!==0||1/T==1/S}if(T==null||S==null){return T===S}if(T instanceof L){T=T._wrapped}if(S instanceof L){S=S._wrapped}var Q=d.call(T);if(Q!=d.call(S)){return false}switch(Q){case"[object String]":return T==String(S);case"[object Number]":return T!=+T?S!=+S:(T==0?1/T==1/S:T==+S);case"[object Date]":case"[object Boolean]":return +T==+S;case"[object RegExp]":return T.source==S.source&&T.global==S.global&&T.multiline==S.multiline&&T.ignoreCase==S.ignoreCase}if(typeof T!="object"||typeof S!="object"){return false}var M=N.length;while(M--){if(N[M]==T){return O[M]==S}}N.push(T);O.push(S);var V=0,W=true;if(Q=="[object Array]"){V=T.length;W=V==S.length;if(W){while(V--){if(!(W=I(T[V],S[V],N,O))){break}}}}else{var R=T.constructor,P=S.constructor;if(R!==P&&!(L.isFunction(R)&&(R instanceof R)&&L.isFunction(P)&&(P instanceof P))){return false}for(var U in T){if(L.has(T,U)){V++;if(!(W=L.has(S,U)&&I(T[U],S[U],N,O))){break}}}if(W){for(U in S){if(L.has(S,U)&&!(V--)){break}}W=!V}}N.pop();O.pop();return W};L.isEqual=function(N,M){return I(N,M,[],[])};L.isEmpty=function(N){if(N==null){return true}if(L.isArray(N)||L.isString(N)){return N.length===0}for(var M in N){if(L.has(N,M)){return false}}return true};L.isElement=function(M){return !!(M&&M.nodeType===1)};L.isArray=u||function(M){return d.call(M)=="[object Array]"};L.isObject=function(M){return M===Object(M)};H(["Arguments","Function","String","Number","Date","RegExp"],function(M){L["is"+M]=function(N){return d.call(N)=="[object "+M+"]"}});if(!L.isArguments(arguments)){L.isArguments=function(M){return !!(M&&L.has(M,"callee"))}}if(typeof(/./)!=="function"){L.isFunction=function(M){return typeof M==="function"}}L.isFinite=function(M){return isFinite(M)&&!isNaN(parseFloat(M))};L.isNaN=function(M){return L.isNumber(M)&&M!=+M};L.isBoolean=function(M){return M===true||M===false||d.call(M)=="[object Boolean]"};L.isNull=function(M){return M===null};L.isUndefined=function(M){return M===void 0};L.has=function(N,M){return j.call(N,M)};L.noConflict=function(){w._=k;return this};L.identity=function(M){return M};L.times=function(Q,P,O){var M=Array(Q);for(var N=0;N<Q;N++){M[N]=P.call(O,N)}return M};L.random=function(N,M){if(M==null){M=N;N=0}return N+Math.floor(Math.random()*(M-N+1))};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};m.unescape=L.invert(m.escape);var J={escape:new RegExp("["+L.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+L.keys(m.unescape).join("|")+")","g")};L.each(["escape","unescape"],function(M){L[M]=function(N){if(N==null){return""}return(""+N).replace(J[M],function(O){return m[M][O]})}});L.result=function(M,O){if(M==null){return null}var N=M[O];return L.isFunction(N)?N.call(M):N};L.mixin=function(M){H(L.functions(M),function(N){var O=L[N]=M[N];L.prototype[N]=function(){var P=[this._wrapped];G.apply(P,arguments);return s.call(this,O.apply(L,P))}})};var z=0;L.uniqueId=function(M){var N=++z+"";return M?M+N:N};L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\t|\u2028|\u2029/g;L.template=function(U,P,O){var N;O=L.defaults({},O,L.templateSettings);var Q=new RegExp([(O.escape||v).source,(O.interpolate||v).source,(O.evaluate||v).source].join("|")+"|$","g");var R=0;var M="__p+='";U.replace(Q,function(W,X,V,Z,Y){M+=U.slice(R,Y).replace(i,function(aa){return"\\"+h[aa]});if(X){M+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(V){M+="'+\n((__t=("+V+"))==null?'':__t)+\n'"}if(Z){M+="';\n"+Z+"\n__p+='"}R=Y+W.length;return W});M+="';\n";if(!O.variable){M="with(obj||{}){\n"+M+"}\n"}M="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+M+"return __p;\n";try{N=new Function(O.variable||"obj","_",M)}catch(S){S.source=M;throw S}if(P){return N(P,L)}var T=function(V){return N.call(this,V,L)};T.source="function("+(O.variable||"obj")+"){\n"+M+"}";return T};L.chain=function(M){return L(M).chain()};var s=function(M){return this._chain?L(M).chain():M};L.mixin(L);H(["pop","push","reverse","shift","sort","splice","unshift"],function(M){var N=C[M];L.prototype[M]=function(){var O=this._wrapped;N.apply(O,arguments);if((M=="shift"||M=="splice")&&O.length===0){delete O[0]}return s.call(this,O)}});H(["concat","join","slice"],function(M){var N=C[M];L.prototype[M]=function(){return s.call(this,N.apply(this._wrapped,arguments))}});L.extend(L.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/amd-shim/underscore.js' */
define("_",function(){return window._});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/setFocus.js' */
JIRA.setFocus=(function(){var a="form.dont-default-focus",b="input:not(#issue-filter-submit), select, textarea, button, a.cancel",c=["div.aui-popup-content:visible","form.aui:visible","form:visible"],d=[];var e=function(h,k,g,i){var j=false;AJS.$(k,h).not(g).find(i).each(function(){var l=AJS.$(this);if(l.is(":visible:enabled, a:visible")){l.focus();if(l.is(":text, :password, textarea")){if(l.is(".focus-select-end")){l.setCaretToPosition(l[0].value.length)}else{l.setSelectionRange(0,l[0].value.length)}}j=true;return false}});return j},f=function(){var h=0,g=d[d.length-1];while(!e(g.context,g.parentElementSelectors[h],g.excludeParentSelector,g.focusElementSelector)&&h<g.parentElementSelectors.length){h++}};return{FocusConfiguration:function(){this.context=document;this.excludeParentSelector=a;this.focusElementSelector=b;this.parentElementSelectors=c.slice(0);this.focusNow=f},triggerFocus:function(){if(d.length==0){d.push(new this.FocusConfiguration())}d[d.length-1].focusNow()},pushConfiguration:function(g){d.push(g)},popConfiguration:function(){d.pop()}}})();jQuery(function(){JIRA.setFocus.triggerFocus()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/DateReset.js' */
if(Date.prototype.__msh_oldSetFullYear){Date.prototype.setFullYear=Date.prototype.__msh_oldSetFullYear};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Namespaces.js' */
if(typeof GH==="undefined"){window.GH={}}if(typeof GH.view=="undefined"){GH.view={}}if(typeof GH.view.model=="undefined"){GH.view.model={}}if(typeof GH.Global=="undefined"){GH.Global={}}if(typeof GH.Dialog=="undefined"){GH.Dialog={}}if(typeof GH.Dialogs=="undefined"){GH.Dialogs={}}if(typeof GH.State=="undefined"){GH.State={}}if(typeof GH.XBoard=="undefined"){GH.XBoard={}}if(typeof GH.RapidBoard=="undefined"){GH.RapidBoard={}}if(typeof GH.HelpPaths=="undefined"){GH.HelpPaths={}}if(typeof GH.JQLAutoComplete=="undefined"){GH.JQLAutoComplete={}}if(typeof GH.RapidBoard.Util=="undefined"){GH.RapidBoard.Util={}}if(typeof GH.NumberFormat=="undefined"){GH.NumberFormat={}}if(typeof GH.UrlFormat=="undefined"){GH.UrlFormat={}}AJS.format=function(i){var b=/'(?!')/g,h=/^\d+$/,e=/^(\d+),number$/,c=/^(\d+),choice,(.+)/,g=/^\s*(-?\d+)([#<])(.*)/;var f=function(s,q){var p="",n,j;if(n=s.match(h)){p=q.length>++s?q[s]:""}else{if(n=s.match(e)){j=GH.NumberFormat&&GH.NumberFormat.format||_.identity;p=q.length>++n[1]?j(q[n[1]]):""}else{if(n=s.match(c)){var t=(q.length>++n[1]?q[n[1]]:null);if(t!==null){var u=n[2].split("|");var o=null;for(var m=0;m<u.length;m++){var l=u[m].match(g);if(!l){console.log("Bad formatting of message: "+s);break}var r=parseInt(l[1],10);if(t<r){if(o){p=o;break}else{p=l[3];break}}if(t==r&&l[2]=="#"){p=l[3];break}else{}if(m==u.length-1){p=l[3]}o=l[3]}var k=[p].concat(Array.prototype.slice.call(q,1));p=AJS.format.apply(AJS,k)}}}}return p};var d=function(o){var m=false,j=-1,n=0;for(var l=0;l<o.length;l++){var p=o.charAt(l);if(p=="'"){m=!m}if(m){continue}if(p==="{"){if(n===0){j=l}n++}else{if(p==="}"){if(n>0){n--;if(n===0){var k=[];k.push(o.substring(0,l+1));k.push(o.substring(0,j));k.push(o.substring(j+1,l));return k}}}}}return null};var a=function(m){var k=arguments,l="",j=d(m);while(j){m=m.substring(j[0].length);l+=j[1].replace(b,"");l+=f(j[2],k);j=d(m)}l+=m.replace(b,"");return l};return a.apply(AJS,arguments)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/SimpleClick.js' */
(function(a){a.event.special.simpleClick={add:function(b){b._clickHandler=function(c){if(!c.ctrlKey&&!c.metaKey&&!c.shiftKey){return b.handler.apply(this,arguments)}};a(this).on("click",b.selector,b._clickHandler)},remove:function(b){a(this).off("click",b.selector,b._clickHandler)}}})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/PromiseKeeper.js' */
(function(b){var a=function(c){if(!(this instanceof a)){return new a()}this._parent=c;this._doneCallbacks=b.Callbacks();this._failCallbacks=b.Callbacks();this._alwaysCallbacks=b.Callbacks()};a.prototype={add:function(e){var d=b.Deferred();d.original=e;var f=this._getPending();this._abortIfPending(f);this._setPending(d);var c=this;e.done(function(){if(d===c._getPending()){d.resolveWith(c,arguments);c._doneCallbacks.fireWith(c,arguments)}});e.fail(function(){if(d===c._getPending()){d.rejectWith(c,arguments);c._failCallbacks.fireWith(c,arguments)}});e.always(function(){if(d===c._getPending()){c._alwaysCallbacks.fireWith(c,arguments)}});return d.promise()},done:function(c){this._doneCallbacks.add(c);return this},fail:function(c){this._failCallbacks.add(c);return this},always:function(c){this._alwaysCallbacks.add(c);return this},reset:function(){this._abortIfPending(this._getPending());this._setPending(null)},sub:function(){return new a(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(c){if(this._parent){this._parent._setPending(c)}else{this._pending=c}},_abortIfPending:function(c){if(c&&c.state()==="pending"){c.reject("abort");if(b.isFunction(c.original.abort)){c.original.abort()}}}};GH.PromiseKeeper=a}(jQuery));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.adapter.jquery.js' */
(function(b,d){var a=b.History=b.History||{},c=b.jQuery;if(typeof a.Adapter!=="undefined"){throw new Error("History.js Adapter has already been loaded...")}a.Adapter={bind:function(e,f,g){c(e).bind(f,g)},trigger:function(e,f){c(e).trigger(f)},onDomLoad:function(e){c(e)}};if(typeof a.init!=="undefined"){a.init()}})(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.js' */
(function(h,b){var e=h.console||b,i=h.document,k=h.navigator,a=h.amplify||false,d=h.setTimeout,j=h.clearTimeout,f=h.setInterval,l=h.JSON,c=h.History=h.History||{},g=h.history;l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if(typeof c.init!=="undefined"){throw new Error("History.js Core has already been loaded...")}c.init=function(){if(typeof c.Adapter==="undefined"){return false}if(typeof c.initCore!=="undefined"){c.initCore()}if(typeof c.initHtml4!=="undefined"){c.initHtml4()}return true};c.initCore=function(){if(typeof c.initCore.initialized!=="undefined"){return false}else{c.initCore.initialized=true}c.options=c.options||{};c.options.hashChangeInterval=c.options.hashChangeInterval||100;c.options.safariPollInterval=c.options.safariPollInterval||500;c.options.doubleCheckInterval=c.options.doubleCheckInterval||500;c.options.storeInterval=c.options.storeInterval||1000;c.options.busyDelay=c.options.busyDelay||250;c.options.debug=c.options.debug||false;c.options.initialTitle=c.options.initialTitle||i.title;c.debug=function(){if((c.options.debug||false)){c.log.apply(c,arguments)}};c.log=function(){var u=!(typeof e==="undefined"||typeof e.log==="undefined"||typeof e.log.apply==="undefined"),p=i.getElementById("log"),t,s,v;if(u){var q=Array.prototype.slice.call(arguments);t=q.shift();if(typeof e.debug!=="undefined"){e.debug.apply(e,[t,q])}else{e.log.apply(e,[t,q])}}else{t=("\n"+arguments[0]+"\n")}for(s=1,v=arguments.length;s<v;++s){var o=arguments[s];if(typeof o==="object"&&typeof l!=="undefined"){try{o=l.stringify(o)}catch(r){}}t+="\n"+o+"\n"}if(p){p.value+=t+"\n-----\n";p.scrollTop=p.scrollHeight-p.clientHeight}else{if(!u){alert(t)}}return true};c.getInternetExplorerMajorVersion=function(){var n=c.getInternetExplorerMajorVersion.cached=(typeof c.getInternetExplorerMajorVersion.cached!=="undefined")?c.getInternetExplorerMajorVersion.cached:(function(){var o=3,q=i.createElement("div"),p=q.getElementsByTagName("i");while((q.innerHTML="<!--[if gt IE "+(++o)+"]><i></i><![endif]-->")&&p[0]){}return(o>4)?o:false})();return n};c.isInternetExplorer=function(){var n=c.isInternetExplorer.cached=(typeof c.isInternetExplorer.cached!=="undefined")?c.isInternetExplorer.cached:Boolean(c.getInternetExplorerMajorVersion());return n};c.emulated={pushState:!Boolean(h.history&&h.history.pushState&&h.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(k.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(k.userAgent))),hashChange:Boolean(!(("onhashchange" in h)||("onhashchange" in i))||(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8))};c.enabled=!c.emulated.pushState;c.bugs={setHash:Boolean(!c.emulated.pushState&&k.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(k.userAgent)),safariPoll:Boolean(!c.emulated.pushState&&k.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(k.userAgent)),ieDoubleCheck:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<7)};c.isEmptyObject=function(o){for(var n in o){return false}return true};c.cloneObject=function(p){var o,n;if(p){o=l.stringify(p);n=l.parse(o)}else{n={}}return n};c.getRootUrl=function(){var n=i.location.protocol+"//"+(i.location.hostname||i.location.host);if(i.location.port||false){n+=":"+i.location.port}n+="/";return n};c.getBaseHref=function(){var n=i.getElementsByTagName("base"),p=null,o="";if(n.length===1){p=n[0];o=p.href.replace(/[^\/]+$/,"")}o=o.replace(/\/+$/,"");if(o){o+="/"}return o};c.getBaseUrl=function(){var n=c.getBaseHref()||c.getBasePageUrl()||c.getRootUrl();return n};c.getPageUrl=function(){var n=c.getState(false,false),p=(n||{}).url||i.location.href;var o=p.replace(/\/+$/,"").replace(/[^\/]+$/,function(s,r,q){return(/\./).test(s)?s:s+"/"});return o};c.getBasePageUrl=function(){var n=i.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(q,p,o){return(/[^\/]$/).test(q)?"":q}).replace(/\/+$/,"")+"/";return n};c.getFullUrl=function(o,q){var n=o,p=o.substring(0,1);q=(typeof q==="undefined")?true:q;if(/[a-z]+\:\/\//.test(o)){}else{if(p==="/"){n=c.getRootUrl()+o.replace(/^\/+/,"")}else{if(p==="#"){n=c.getPageUrl().replace(/#.*/,"")+o}else{if(p==="?"){n=c.getPageUrl().replace(/[\?#].*/,"")+o}else{if(q){n=c.getBaseUrl()+o.replace(/^(\.\/)+/,"")}else{n=c.getBasePageUrl()+o.replace(/^(\.\/)+/,"")}}}}}return n.replace(/\#$/,"")};c.getShortUrl=function(p){var o=p,q=c.getBaseUrl(),n=c.getRootUrl();if(c.emulated.pushState){o=o.replace(q,"")}o=o.replace(n,"/");if(c.isTraditionalAnchor(o)){o="./"+o}o=o.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return o};c.store=a?(a.store("History.store")||{}):{};c.store.idToState=c.store.idToState||{};c.store.urlToId=c.store.urlToId||{};c.store.stateToId=c.store.stateToId||{};c.idToState=c.idToState||{};c.stateToId=c.stateToId||{};c.urlToId=c.urlToId||{};c.storedStates=c.storedStates||[];c.savedStates=c.savedStates||[];c.getState=function(p,o){if(typeof p==="undefined"){p=true}if(typeof o==="undefined"){o=true}var n=c.getLastSavedState();if(!n&&o){n=c.createStateObject()}if(p){n=c.cloneObject(n);n.url=n.cleanUrl||n.url}return n};c.getIdByState=function(n){var p=c.extractId(n.url);if(!p){var o=c.getStateString(n);if(typeof c.stateToId[o]!=="undefined"){p=c.stateToId[o]}else{if(typeof c.store.stateToId[o]!=="undefined"){p=c.store.stateToId[o]}else{while(true){p=new Date().getTime()+~~(Math.random()*1000);if(typeof c.idToState[p]==="undefined"&&typeof c.store.idToState[p]==="undefined"){break}}c.stateToId[o]=p;c.idToState[p]=n}}}return p};c.normalizeState=function(o){if(!o||(typeof o!=="object")){o={}}if(typeof o.normalized!=="undefined"){return o}if(!o.data||(typeof o.data!=="object")){o.data={}}var p={};p.normalized=true;p.title=o.title||"";p.url=c.getFullUrl(c.unescapeString(o.url||i.location.href));p.hash=c.getShortUrl(p.url);p.data=c.cloneObject(o.data);p.id=c.getIdByState(p);p.cleanUrl=p.url.replace(/\??\&_suid.*/,"");p.url=p.cleanUrl;var n=!c.isEmptyObject(p.data);if(p.title||n){p.hash=c.getShortUrl(p.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(p.hash)){p.hash+="?"}p.hash+="&_suid="+p.id}p.hashedUrl=c.getFullUrl(p.hash);if((c.emulated.pushState||c.bugs.safariPoll)&&c.hasUrlDuplicate(p)){p.url=p.hashedUrl}return p};c.createStateObject=function(p,q,o){var n={data:p,title:q,url:o};n=c.normalizeState(n);return n};c.getStateById=function(o){o=String(o);var n=c.idToState[o]||c.store.idToState[o]||b;return n};c.getStateString=function(o){var n=c.normalizeState(o);var p={data:n.data,title:o.title,url:o.url};var q=l.stringify(p);return q};c.getStateId=function(o){var n=c.normalizeState(o);var p=n.id;return p};c.getHashByState=function(o){var p,n=c.normalizeState(o);p=n.hash;return p};c.extractId=function(p){var q;var o,n;o=/(.*)\&_suid=([0-9]+)$/.exec(p);n=o?(o[1]||p):p;q=o?String(o[2]||""):"";return q||false};c.isTraditionalAnchor=function(o){var n=!(/[\/\?\.]/.test(o));return n};c.extractState=function(q,p){var n=null;p=p||false;var r=c.extractId(q);if(r){n=c.getStateById(r)}if(!n){var o=c.getFullUrl(q);r=c.getIdByUrl(o)||false;if(r){n=c.getStateById(r)}if(!n&&p&&!c.isTraditionalAnchor(q)){n=c.createStateObject(null,null,o)}}return n};c.getIdByUrl=function(n){var o=c.urlToId[n]||c.store.urlToId[n]||b;return o};c.getLastSavedState=function(){return c.savedStates[c.savedStates.length-1]||b};c.getLastStoredState=function(){return c.storedStates[c.storedStates.length-1]||b};c.hasUrlDuplicate=function(p){var o=false;var n=c.extractState(p.url);o=n&&n.id!==p.id;return o};c.storeState=function(n){c.urlToId[n.url]=n.id;c.storedStates.push(c.cloneObject(n));return n};c.isLastSavedState=function(q){var p=false;if(c.savedStates.length){var o=q.id,n=c.getLastSavedState(),r=n.id;p=(o===r)}return p};c.saveState=function(n){if(c.isLastSavedState(n)){return false}c.savedStates.push(c.cloneObject(n));return true};c.getStateByIndex=function(o){var n=null;if(typeof o==="undefined"){n=c.savedStates[c.savedStates.length-1]}else{if(o<0){n=c.savedStates[c.savedStates.length+o]}else{n=c.savedStates[o]}}return n};c.getHash=function(){var n=c.unescapeHash(i.location.hash);return n};c.unescapeString=function(p){var n=p;var o;while(true){o=h.unescape(n);if(o===n){break}n=o}return n};c.unescapeHash=function(o){var n=c.normalizeHash(o);n=c.unescapeString(n);return n};c.normalizeHash=function(o){var n=o.replace(/[^#]*#/,"").replace(/#.*/,"");return n};c.setHash=function(r,o){if(o!==false&&c.busy()){c.pushQueue({scope:c,callback:c.setHash,args:arguments,queue:o});return false}var n=c.escapeHash(r);c.busy(true);var p=c.extractState(r,true);if(p&&!c.emulated.pushState){c.pushState(p.data,p.title,p.url,false)}else{if(i.location.hash!==n){if(c.bugs.setHash){var q=c.getPageUrl();c.pushState(null,null,q+"#"+n,false)}else{i.location.hash=n}}}return c};c.escapeHash=function(o){var n=c.normalizeHash(o);n=h.escape(n);if(!c.bugs.hashEscape){n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")}return n};c.getHashByUrl=function(n){var o=String(n).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");o=c.unescapeHash(o);return o};c.setTitle=function(p){var q=p.title;if(!q){var o=c.getStateByIndex(0);if(o&&o.url===p.url){q=o.title||c.options.initialTitle}}try{i.getElementsByTagName("title")[0].innerHTML=q.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(n){}i.title=q;return c};c.queues=[];c.busy=function(o){if(typeof o!=="undefined"){c.busy.flag=o}else{if(typeof c.busy.flag==="undefined"){c.busy.flag=false}}if(!c.busy.flag){j(c.busy.timeout);var n=function(){if(c.busy.flag){return}for(var q=c.queues.length-1;q>=0;--q){var p=c.queues[q];if(p.length===0){continue}var r=p.shift();c.fireQueueItem(r);c.busy.timeout=d(n,c.options.busyDelay)}};c.busy.timeout=d(n,c.options.busyDelay)}return c.busy.flag};c.fireQueueItem=function(n){return n.callback.apply(n.scope||c,n.args||[])};c.pushQueue=function(n){c.queues[n.queue||0]=c.queues[n.queue||0]||[];c.queues[n.queue||0].push(n);return c};c.queue=function(o,n){if(typeof o==="function"){o={callback:o}}if(typeof n!=="undefined"){o.queue=n}if(c.busy()){c.pushQueue(o)}else{c.fireQueueItem(o)}return c};c.clearQueue=function(){c.busy.flag=false;c.queues=[];return c};c.stateChanged=false;c.doubleChecker=false;c.doubleCheckComplete=function(){c.stateChanged=true;c.doubleCheckClear();return c};c.doubleCheckClear=function(){if(c.doubleChecker){j(c.doubleChecker);c.doubleChecker=false}return c};c.doubleCheck=function(n){c.stateChanged=false;c.doubleCheckClear();if(c.bugs.ieDoubleCheck){c.doubleChecker=d(function(){c.doubleCheckClear();if(!c.stateChanged){n()}return true},c.options.doubleCheckInterval)}return c};c.safariStatePoll=function(){var o=c.extractState(i.location.href),n;if(!c.isLastSavedState(o)){n=o}else{return}if(!n){n=c.createStateObject()}c.Adapter.trigger(h,"popstate");return c};c.back=function(n){if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.back,args:arguments,queue:n});return false}c.busy(true);c.doubleCheck(function(){c.back(false)});g.go(-1);return true};c.forward=function(n){if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.forward,args:arguments,queue:n});return false}c.busy(true);c.doubleCheck(function(){c.forward(false)});g.go(1);return true};c.go=function(o,n){var p;if(o>0){for(p=1;p<=o;++p){c.forward(n)}}else{if(o<0){for(p=-1;p>=o;--p){c.back(n)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}}return c};c.saveState(c.storeState(c.extractState(i.location.href,true)));if(a){c.onUnload=function(){var n=a.store("History.store")||{},o;n.idToState=n.idToState||{};n.urlToId=n.urlToId||{};n.stateToId=n.stateToId||{};for(o in c.idToState){if(!c.idToState.hasOwnProperty(o)){continue}n.idToState[o]=c.idToState[o]}for(o in c.urlToId){if(!c.urlToId.hasOwnProperty(o)){continue}n.urlToId[o]=c.urlToId[o]}for(o in c.stateToId){if(!c.stateToId.hasOwnProperty(o)){continue}n.stateToId[o]=c.stateToId[o]}c.store=n;a.store("History.store",n)};f(c.onUnload,c.options.storeInterval);c.Adapter.bind(h,"beforeunload",c.onUnload);c.Adapter.bind(h,"unload",c.onUnload)}if(c.emulated.pushState){var m=function(){};c.pushState=c.pushState||m;c.replaceState=c.replaceState||m}else{c.onPopState=function(p){c.doubleCheckComplete();var o=c.getHash();if(o){var n=c.extractState(o||i.location.href,true);if(n){c.replaceState(n.data,n.title,n.url,false)}else{c.Adapter.trigger(h,"anchorchange");c.busy(false)}c.expectedStateId=false;return false}var q=false;p=p||{};if(typeof p.state==="undefined"){if(typeof p.originalEvent!=="undefined"&&typeof p.originalEvent.state!=="undefined"){p.state=p.originalEvent.state||false}else{if(typeof p.event!=="undefined"&&typeof p.event.state!=="undefined"){p.state=p.event.state||false}}}p.state=(p.state||false);if(p.state){q=c.getStateById(p.state)}else{if(c.expectedStateId){q=c.getStateById(c.expectedStateId)}else{q=c.extractState(i.location.href)}}if(!q){q=c.createStateObject(null,null,i.location.href)}c.expectedStateId=false;if(c.isLastSavedState(q)){c.busy(false);return false}c.storeState(q);c.saveState(q);c.setTitle(q);c.Adapter.trigger(h,"statechange");c.busy(false);return true};c.Adapter.bind(h,"popstate",c.onPopState);c.pushState=function(p,r,o,n){if(c.getHashByUrl(o)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:n});return false}c.busy(true);var q=c.createStateObject(p,r,o);if(c.isLastSavedState(q)){c.busy(false)}else{c.storeState(q);c.expectedStateId=q.id;g.pushState(q.id,q.title,q.url);c.Adapter.trigger(h,"popstate")}return true};c.replaceState=function(p,r,o,n){if(c.getHashByUrl(o)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:n});return false}c.busy(true);var q=c.createStateObject(p,r,o);if(c.isLastSavedState(q)){c.busy(false)}else{c.storeState(q);c.expectedStateId=q.id;g.replaceState(q.id,q.title,q.url);c.Adapter.trigger(h,"popstate")}return true};if(c.bugs.safariPoll){f(c.safariStatePoll,c.options.safariPollInterval)}if(k.vendor==="Apple Computer, Inc."||(k.appCodeName||"")==="Mozilla"){c.Adapter.bind(h,"hashchange",function(){c.Adapter.trigger(h,"popstate")});if(c.getHash()){c.Adapter.onDomLoad(function(){c.Adapter.trigger(h,"hashchange")})}}}};c.init()})(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/amplify.store.js' */
/*!
 * Amplify Store - Persistent Client-Side Storage @VERSION
 *
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
(function(a,g){JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;var b=a.store=function(h,j,e,i){var i=b.type;if(e&&e.type&&e.type in b.types){i=e.type}return b.types[i](h,j,e||{})};b.types={};b.type=null;b.addType=function(e,h){if(!b.type){b.type=e}b.types[e]=h;b[e]=function(j,k,i){i=i||{};i.type=e;return b(j,k,i)}};b.error=function(){return"amplify.store quota exceeded"};function d(h,i){var e=i.__amplify__?JSON.parse(i.__amplify__):{};b.addType(h,function(o,p,n){var m=p,l=(new Date()).getTime(),q,j;if(!o){m={};for(o in e){q=i[o];j=q?JSON.parse(q):{expires:-1};if(j.expires&&j.expires<=l){delete i[o];delete e[o]}else{m[o.replace(/^__amplify__/,"")]=j.data}}i.__amplify__=JSON.stringify(e);return m}o="__amplify__"+o;if(p===g){if(e[o]){q=i[o];j=q?JSON.parse(q):{expires:-1};if(j.expires&&j.expires<=l){delete i[o];delete e[o]}else{return j.data}}}else{if(p===null){delete i[o];delete e[o]}else{j=JSON.stringify({data:p,expires:n.expires?l+n.expires:null});try{i[o]=j;e[o]=true}catch(k){b[h]();try{i[o]=j;e[o]=true}catch(k){throw b.error()}}}}i.__amplify__=JSON.stringify(e);return m})}for(var c in {localStorage:1,sessionStorage:1}){try{if(window[c].getItem){d(c,window[c])}}catch(f){}}if(window.globalStorage){d("globalStorage",window.globalStorage[window.location.hostname]);if(b.type==="sessionStorage"){b.type="globalStorage"}}(function(){var i=document.createElement("div"),h="amplify",e;i.style.display="none";document.getElementsByTagName("head")[0].appendChild(i);if(i.addBehavior){i.addBehavior("#default#userdata");i.load(h);e=i.getAttribute(h)?JSON.parse(i.getAttribute(h)):{};b.addType("userData",function(q,p,r){var l=p,j=(new Date()).getTime(),m,o,k;if(!q){l={};for(q in e){m=i.getAttribute(q);o=m?JSON.parse(m):{expires:-1};if(o.expires&&o.expires<=j){i.removeAttribute(q);delete e[q]}else{l[q]=o.data}}i.setAttribute(h,JSON.stringify(e));i.save(h);return l}q=q.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(p===g){if(q in e){m=i.getAttribute(q);o=m?JSON.parse(m):{expires:-1};if(o.expires&&o.expires<=j){i.removeAttribute(q);delete e[q]}else{return o.data}}}else{if(p===null){i.removeAttribute(q);delete e[q]}else{k=i.getAttribute(q);o=JSON.stringify({data:p,expires:(r.expires?(j+r.expires):null)});i.setAttribute(q,o);e[q]=true}}i.setAttribute(h,JSON.stringify(e));try{i.save(h)}catch(n){if(k===null){i.removeAttribute(q);delete e[q]}else{i.setAttribute(q,k)}b.userData();try{i.setAttribute(q,o);e[q]=true;i.save(h)}catch(n){if(k===null){i.removeAttribute(q);delete e[q]}else{i.setAttribute(q,k)}throw b.error()}}return l})}}());d("memory",{})}(this.amplify=this.amplify||{}));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.html4.js' */
(function(d,g){var a=d.document,e=d.setTimeout||e,f=d.clearTimeout||f,b=d.setInterval||b,c=d.History=d.History||{};if(typeof c.initHtml4!=="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}c.initHtml4=function(){if(typeof c.initHtml4.initialized!=="undefined"){return false}else{c.initHtml4.initialized=true}c.enabled=true;c.savedHashes=[];c.isLastHash=function(h){var j=c.getHashByIndex();var i=h===j;return i};c.saveHash=function(h){if(c.isLastHash(h)){return false}c.savedHashes.push(h);return true};c.getHashByIndex=function(h){var i=null;if(typeof h==="undefined"){i=c.savedHashes[c.savedHashes.length-1]}else{if(h<0){i=c.savedHashes[c.savedHashes.length+h]}else{i=c.savedHashes[h]}}return i};c.discardedHashes={};c.discardedStates={};c.discardState=function(l,h,k){var i=c.getHashByState(l);var j={discardedState:l,backState:k,forwardState:h};c.discardedStates[i]=j;return true};c.discardHash=function(i,h,k){var j={discardedHash:i,backState:k,forwardState:h};c.discardedHashes[i]=j;return true};c.discardedState=function(h){var j=c.getHashByState(h);var i=c.discardedStates[j]||false;return i};c.discardedHash=function(i){var h=c.discardedHashes[i]||false;return h};c.recycleState=function(h){var i=c.getHashByState(h);if(c.discardedState(h)){delete c.discardedStates[i]}return true};if(c.emulated.hashChange){c.hashChangeInit=function(){c.checkerFunction=null;var h="";if(c.isInternetExplorer()){var l="historyjs-iframe",i=a.createElement("iframe");i.setAttribute("id",l);i.style.display="none";a.body.appendChild(i);i.contentWindow.document.open();i.contentWindow.document.close();var j="",k=false;c.checkerFunction=function(){if(k){return false}k=true;var n=c.getHash()||"",m=c.unescapeHash(i.contentWindow.document.location.hash)||"";if(n!==h){h=n;if(m!==n){j=m=n;i.contentWindow.document.open();i.contentWindow.document.close();i.contentWindow.document.location.hash=c.escapeHash(n)}c.Adapter.trigger(d,"hashchange")}else{if(m!==j){j=m;c.setHash(m,false)}}k=false;return true}}else{c.checkerFunction=function(){var m=c.getHash();if(m!==h){h=m;c.Adapter.trigger(d,"hashchange")}return true}}b(c.checkerFunction,c.options.hashChangeInterval);return true};c.Adapter.onDomLoad(c.hashChangeInit)}if(c.emulated.pushState){c.onHashChange=function(l){var m=((l&&l.newURL)||a.location.href),k=c.getHashByUrl(m),j=null,h=null,n=null;if(c.isLastHash(k)){c.busy(false);return false}c.doubleCheckComplete();c.saveHash(k);if(k&&c.isTraditionalAnchor(k)){c.Adapter.trigger(d,"anchorchange");c.busy(false);return false}j=c.extractState(c.getFullUrl(k||a.location.href,false),true);if(c.isLastSavedState(j)){c.busy(false);return false}h=c.getHashByState(j);var i=c.discardedState(j);if(i){if(c.getHashByIndex(-2)===c.getHashByState(i.forwardState)){c.back(false)}else{c.forward(false)}return false}c.pushState(j.data,j.title,j.url,false);return true};c.Adapter.bind(d,"hashchange",c.onHashChange);c.pushState=function(l,p,h,n){if(c.getHashByUrl(h)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:n});return false}c.busy(true);var k=c.createStateObject(l,p,h),i=c.getHashByState(k),j=c.getState(false),m=c.getHashByState(j),o=c.getHash();c.storeState(k);c.expectedStateId=k.id;c.recycleState(k);c.setTitle(k);if(i===m){c.busy(false);return false}if(i!==o&&i!==c.getShortUrl(a.location.href)){c.setHash(i,false);return false}c.saveState(k);c.Adapter.trigger(d,"statechange");c.busy(false);return true};c.replaceState=function(l,n,k,h){if(c.getHashByUrl(k)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(h!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:h});return false}c.busy(true);var m=c.createStateObject(l,n,k),j=c.getState(false),i=c.getStateByIndex(-2);c.discardState(j,m,i);c.pushState(m.data,m.title,m.url,false);return true};if(c.getHash()&&!c.emulated.hashChange){c.Adapter.onDomLoad(function(){c.Adapter.trigger(d,"hashchange")})}}};c.init()})(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/json2.js' */
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/State.js' */
GH.State.push=function(b,c){var a=GH.State.toUri(b);if(typeof c=="undefined"){c=document.title}History.pushState(b,c,a);AJS.$(AJS).trigger("gh.virtualpageview")};GH.State.replace=function(b,c){var a=GH.State.toUri(b);if(typeof c=="undefined"){c=document.title}History.replaceState(b,c,a)};GH.State.getViewState=function(){return History.getState().data};GH.State.getHashParams=function(){var a=window.location.href;return a.indexOf("#")<0?false:GH.State.toViewState(a)};GH.State.toViewState=function(a){if(a.lastIndexOf("?")<0){return{}}var b=GH.State.getStateFromUri(a);delete b._suid;return b};GH.State.toUri=function(a){var b=AJS.parseUri(document.location.href);b.anchor="";b.queryKey=AJS.$.extend({},a);return b.toString()};GH.State.registerStateChangeListener=function(a){History.Adapter.bind(window,"statechange",a)};GH.State.getStateFromUri=function(a){var b=AJS.parseUri(a);if(b.anchor){b=AJS.parseUri(b.anchor)}return b.queryKey};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/UrlState.js' */
GH.RapidBoard.UrlState={};GH.RapidBoard.UrlState.dateFormat="%Y-%m-%d";GH.RapidBoard.UrlState.normalizeNumberParam=function(b,a){if(_.isUndefined(a)){a=null}if(b===undefined){return a}if(b===null){return a}var c=parseInt(b,10);if(!isFinite(c)){return a}return c};GH.RapidBoard.UrlState.normalizeBooleanParam=function(b,a){if(_.isUndefined(a)){a=null}if(b===undefined){return a}if(b===null){return a}if(b==="false"){return false}return Boolean(b)};GH.RapidBoard.UrlState.normalizeDateParam=function(c,a){if(_.isUndefined(a)){a=null}if(c===undefined){return a}if(c===null){return a}var b=Date.parseDate(c,GH.RapidBoard.UrlState.dateFormat);return b};GH.RapidBoard.UrlState.normalizeNumberArrayParam=function(b){var a=[];if(_.isString(b)){var c=GH.RapidBoard.UrlState.normalizeNumberParam(b);if(c!==null){a.push(c)}}else{if(_.isArray(b)){_.each(b,function(d){var e=GH.RapidBoard.UrlState.normalizeNumberParam(d);if(e!==null){a.push(e)}})}}return a};GH.RapidBoard.UrlState.normalizeStringParam=function(b,a){if(_.isUndefined(a)){a=null}if(_.isArray(b)&&b.length>0){var c=b[0];if(c!==""){return c}else{return a}}if(_.isString(b)){if(b!==""){return b}else{return a}}return a};GH.RapidBoard.UrlState.removeEmptyParams=function(b){var a={};_.each(b,function(d,c){if(_.isArray(d)){if(d.length>0){a[c]=d}}else{if(_.isString(d)){if(!_.isEmpty(d)){a[c]=d}}else{if(d===null||d===undefined){}else{a[c]=d}}}});return a};GH.RapidBoard.UrlState.toUrlParameterString=function(b){var a="";_.each(b,function(d,c){if(_.isArray(d)){_.each(d,function(f){if(a.length>0){a+="&"}a+=c+"="+encodeURIComponent(d)})}else{if(a.length>0){a+="&"}a+=c+"="+encodeURIComponent(d)}});return a};GH.RapidBoard.UrlState.setHandlers=function(a){GH.RapidBoard.UrlState.handlers=a};GH.RapidBoard.UrlState.handlers=[];GH.RapidBoard.UrlState.getNormalizedUrlState=function(){var b=GH.RapidBoard.UrlState.getCurrentUrlState();var a={};_.each(GH.RapidBoard.UrlState.handlers,function(c){if(c.isApplicable(a)){c.getNormalizedFromUrl(b,a)}});return a};GH.RapidBoard.UrlState.toUrlState=function(b){var a={};_.each(GH.RapidBoard.UrlState.handlers,function(c){if(c.isApplicable(b)){c.toUrl(b,a)}});return a};GH.RapidBoard.UrlState.deferredPushState=function(a){if(a<GH.RapidBoard.UrlState.lastPushReplace){return}GH.RapidBoard.UrlState.pushState()};GH.RapidBoard.UrlState.lastPushReplace=0;GH.RapidBoard.UrlState.pushState=function(){GH.RapidBoard.UrlState.lastPushReplace=new Date().getTime();var c=GH.RapidBoard.UrlState.getNormalizedRapidBoardState();var b=GH.RapidBoard.UrlState.toUrlState(c);var a=GH.RapidBoard.UrlState.getNormalizedUrlState();GH.log("url normalized : "+JSON.stringify(a),GH.Logger.Contexts.state);GH.log("new normalized : "+JSON.stringify(c),GH.Logger.Contexts.state);if(_.isEqual(c,a)){GH.log("Not pushing, url state already up to date");return}GH.log("pushing state  : "+JSON.stringify(b),GH.Logger.Contexts.state);GH.State.push(b)};GH.RapidBoard.UrlState.replaceState=function(){GH.RapidBoard.UrlState.lastPushReplace=new Date().getTime();var c=GH.RapidBoard.UrlState.getNormalizedRapidBoardState();var b=GH.RapidBoard.UrlState.toUrlState(c);var a=GH.RapidBoard.UrlState.getNormalizedUrlState();GH.log("url normalized : "+JSON.stringify(a),GH.Logger.Contexts.state);GH.log("new normalized : "+JSON.stringify(c),GH.Logger.Contexts.state);if(_.isEqual(c,a)){GH.log("Not replacing, url state already up to date",GH.Logger.Contexts.state);return}GH.log("replacing state: "+JSON.stringify(b),GH.Logger.Contexts.state);GH.State.replace(b)};GH.RapidBoard.UrlState.getNormalizedRapidBoardState=function(){var a={};_.each(GH.RapidBoard.UrlState.handlers,function(b){if(b.isApplicable(a)){b.getNormalizedFromInternal(a)}});return a};GH.RapidBoard.UrlState.loadState=function(){var a=GH.RapidBoard.UrlState.getNormalizedUrlState();_.each(GH.RapidBoard.UrlState.handlers,function(b){if(b.isApplicable(a)){b.updateInternalFromNormalized(a)}})};GH.RapidBoard.UrlState.getCurrentUrlState=function(){return GH.State.toViewState(window.location.href)};GH.RapidBoard.UrlState.hasUrlState=function(){return !_.isEmpty(GH.RapidBoard.UrlState.getCurrentUrlState())};GH.RapidBoard.UrlState.isUrlStateUpToDate=function(){var b=GH.RapidBoard.UrlState.getNormalizedRapidBoardState();var a=GH.RapidBoard.UrlState.getNormalizedUrlState();return _.isEqual(b,a)};GH.RapidBoard.UrlState.getViewStateRequestParameterString=function(){var b=GH.RapidBoard.UrlState.getCurrentUrlState();var a=GH.RapidBoard.UrlState.removeEmptyParams(b);return GH.RapidBoard.UrlState.toUrlParameterString(a)};GH.RapidBoard.UrlState.HISTORY_CHANGED="historyDidChange";GH.RapidBoard.UrlState.historyChanged=function(){if(GH.RapidBoard.UrlState.isUrlStateUpToDate()){GH.log("GH.RapidBoard.UrlState.historyChanged state up to date",GH.Logger.Contexts.state);AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED);return}GH.log("GH.RapidBoard.UrlState.historyChanged outdated state",GH.Logger.Contexts.state);GH.RapidBoard.UrlState.logDifferenceInState();GH.RapidBoard.UrlState.loadState();GH.RapidBoard.reload();AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED)};GH.RapidBoard.UrlState.logDifferenceInState=function(){var a=GH.RapidBoard.UrlState.getNormalizedRapidBoardState();var b=GH.RapidBoard.UrlState.getNormalizedUrlState();GH.log("boardState: "+JSON.stringify(a),GH.Logger.Contexts.state);GH.log("  urlState: "+JSON.stringify(b),GH.Logger.Contexts.state)};GH.RapidBoard.UrlState.init=function(){setTimeout(function(){GH.State.registerStateChangeListener(GH.RapidBoard.UrlState.historyChanged)},200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/help/Tooltip.js' */
(function(e,h,c){var b=200;var a=20;function g(i){var p=i.options.gravity;if(typeof p==="function"){p=p.call(i.$element[0])}if(p.charAt(0)==="n"||p.charAt(0)==="s"){var n=i.$tip;var m=n.offset();var l=Math.max(0,a-m.left);var o=Math.max(0,a+m.left+n.outerWidth()-h(window).width());var k=n.find(".tipsy-arrow");var j=(l&&o)?0:(l||-o);if(j){n.css("left",parseInt(n.css("left"),10)+j);k.css("marginLeft",-k.outerWidth()/2-j)}else{k.css("marginLeft","")}}}function d(i){var j=250;setTimeout(function(){if(i.$tip.is(":visible")){if(i.$element.is(":visible")){d(i)}else{i.hide()}}},j)}function f(i,j){if(i){i.show();if(i.$tip){g(i);d(i);j.trigger("show",i)}}}GH.Tooltip={};GH.Tooltip.tipsify=function(j){j=e.extend({},j,{trigger:"manual",title:"data-tooltip"});var k=new c();if(!j.selector){return k}if(j.context&&e.isString(j.selector)){var i=j.selector;h(j.context).ghHoverIntent({interval:b,selector:i,over:function(){var l=h(this);if(l.is(":visible")){var m=l.tooltip(j).tipsy(true);f(m,k)}},out:function(){var l=h(this).tipsy(true);if(l){l.hide()}}})}else{h(j.selector).tooltip(j).ghHoverIntent({interval:b,over:function(){var l=h(this).tipsy(true);f(l,k)},out:function(){h(this).tipsy("hide")}})}return k};GH.Tooltip.enable=function(i){var j=h(i).tipsy(true);if(j){j.enable()}};GH.Tooltip.disable=function(i){var j=h(i).tipsy(true);if(j){j.disable()}};GH.Tooltip.hide=function(i){var j=h(i).tipsy(true);if(j){h(i).trigger("mouseleave");j.hide()}}}(_,AJS.$,GH.Events));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/PageRenderer.js' */
GH.PageRenderer={};GH.PageRenderer.render=function(a,b){if(GH.view.pageLoadErrors!=null){b()}else{a()}};GH.PageRenderer.showException=function(a){alert(a.message)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-future.js' */
(function(){function a(f,d,c,e,b){if(!f.buttonpanel){f.addButtonPanel()}if(!b){b="#"}this.page=f;this.onclick=c;this._onclick=function(){c.call(this,f.dialog,f)};this.item=AJS("a",d).attr("href",b).addClass("button-panel-link");if(e){this.item.addClass(e)}if(typeof c=="function"){this.item.click(this._onclick)}f.buttonpanel.append(this.item);this.id=f.button.length;f.button[this.id]=this}if(!AJS.Dialog.prototype.addCancel){AJS.Dialog.prototype.addCancel=function(c,b){var e=this.page[this.curpage];var d=new a(e,c,b,"button-panel-cancel-link");e.recalcSize()}}AJS.parseUri=function(d,b){function c(j){var h=c.options,e=h.parser[h.strictMode?"strict":"loose"].exec(j),g={},f=14;while(f--){g[h.key[f]]=e[f]||""}g[h.q.name]={};g[h.key[12]].replace(h.q.parser,function(k,i,l){if(i){if(typeof g[h.q.name][i]==="object"){g[h.q.name][i].push(l)}else{if(g[h.q.name][i]){g[h.q.name][i]=[g[h.q.name][i],l]}else{g[h.q.name][i]=l}}}});return g}c.options={strictMode:!!b,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};d=c(d);d.toString=function(){var e=[];AJS.$.each(d.queryKey,function(f,g){if(_.isObject(g)){AJS.$.each(g,function(h,i){e.push(f+"="+i)})}else{e.push(f+"="+g)}});return d.protocol+"://"+d.authority+d.path+"?"+e.join("&")+"#"+d.anchor};return d}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-version.js' */
GH.ajsVersion=function(){if(!AJS.version){return{major:-1,minor:0,milestone:0}}var a=AJS.version.split(".");var b={major:a[0],minor:0,milestone:0};if(a.length==3){b.minor=a[1];b.milestone=a[2]}else{if(a.length==2){var c=a[1].split("-");if(c.length==2){b.minor=c[0];b.milestone=c[1].substring(c[1].indexOf("m")+1)}}}return b};GH.ajsVersionAfter=function(b,c,d){var a=GH.ajsVersion();if(a.major<b){return false}if(c&&a.minor<c){return false}if(d&&a.milestone<d){return false}return true};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/ui-utils.js' */
GH.Util=GH.Util||{};GH.Util.UI={};GH.Util.UI.isDisabled=function(b){var a=AJS.$(b);return a.hasClass("disabled")||(a.attr("aria-disabled")=="true")};GH.Util.UI.isEnabled=function(a){return !GH.Util.UI.isDisabled(a)};GH.Util.UI.isVisibleY=function(c){var b=AJS.$(window).height();var a=AJS.$(document).scrollTop();return c>a&&c<b+a};GH.Util.UI.isVisibleX=function(c){var b=AJS.$(window).width();var a=AJS.$(document).scrollLeft();return c>a&&c<b+a};GH.Util.UI.ariaEnable=function(a){AJS.$(a).removeAttr("aria-disabled")};GH.Util.UI.ariaDisable=function(a){AJS.$(a).attr("aria-disabled","true")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Layout.js' */
GH.Layout={};GH.Layout.windowResizeTimer=null;GH.Layout.EVENT_DELAYED_RESIZE="delayedResize";GH.Layout.info={windowWidth:-1,windowHeight:-1};GH.Layout.getWindowWidth=function(){return GH.Layout.info.windowWidth};GH.Layout.getWindowHeight=function(){return GH.Layout.info.windowHeight};GH.Layout.bindDelayedWindowResize=_.once(function(){AJS.$(window).bind("resize",function(){if(GH.Layout.windowResizeTimer!=null){window.clearTimeout(GH.Layout.windowResizeTimer)}GH.Layout.windowResizeTimer=window.setTimeout(function(){if(GH.Layout.updateWindowSize()){GH.Layout.fireDelayedWindowResize()}},250)})});GH.Layout.updateWindowSize=function(){var d=AJS.$(window);var b=GH.Layout.info.windowWidth;var e=GH.Layout.info.windowHeight;var c=d.width();var a=d.height();if(b==c&&e==a){return false}GH.Layout.info.windowWidth=c;GH.Layout.info.windowHeight=a;return true};GH.Layout.fireDelayedWindowResize=function(){AJS.$(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE)};GH.Layout.initPreRender=function(){var a=AJS.$(window);GH.Layout.info.windowWidth=a.width();GH.Layout.info.windowHeight=a.height()};GH.Layout.init=function(){GH.Layout.bindDelayedWindowResize()};GH.Layout.initPreRender();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Footer.js' */
GH.Footer={};GH.Footer.agileFooter=function(){var a=AJS.$("#footer");var b=a.find(".footer-body:first ul:first");var c=a.find("#ghx-footer");if(!JIRA.Version.isGreaterThanOrEqualTo("6.2")){b.before(c)}c.css({visibility:""})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Browser.js' */
GH.RapidBoard.Browsers={};GH.RapidBoard.Browsers.userAgentMap={mozilla:"Firefox"};GH.RapidBoard.Browsers.unsupportedBrowsers=[{name:"mozilla",versions:["1.7","1.8","1.9"]}];GH.RapidBoard.Browsers.init=function(){GH.RapidBoard.Browsers.unsupported()};GH.RapidBoard.Browsers.isLowerThanIE11=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)<11};GH.RapidBoard.Browsers.isGreaterThanIE9=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)>9};GH.RapidBoard.Browsers.isInputEventSupported=function(){return("oninput" in document.createElement("input")&&!AJS.$.browser.msie)||GH.RapidBoard.Browsers.isGreaterThanIE9()};GH.RapidBoard.Browsers.describeBrowser=function(e){e=e||navigator.userAgent;var f=/chrome/.test(navigator.userAgent.toLowerCase()),d=!f&&/safari/.test(navigator.userAgent.toLowerCase()),c=AJS.$.uaMatch(e),b=c.browser,a=c.version.replace(/(\d+)\.(\d+).*$/,"$1.$2");if(f){b="chrome"}else{if(d){b="safari"}}return{name:b,version:a}};GH.RapidBoard.Browsers.unsupported=function(){var b=GH.RapidBoard.Browsers.describeBrowser();var e=GH.RapidBoard.Browsers.unsupportedBrowsers;var d;var c;var g;for(c=0;c<e.length;c++){g=e[c];if(b.name==g.name&&g.versions.indexOf(b.version)>=0){var f=b.name;if(GH.RapidBoard.Browsers.userAgentMap[f]){f=GH.RapidBoard.Browsers.userAgentMap[f]}var a={"url":"https://docs.atlassian.com/jira/jsw-docs-071/Supported+Platforms","isLocal":false}.url;d=GH.tpl.rapid.notification.renderMessageHolder({browser:f,docsUrl:a});AJS.$("body").prepend(d);break}}};AJS.$(function(){GH.RapidBoard.Browsers.init()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/NumberFormat.js' */
GH.NumberFormat={};GH.NumberFormat.groupingSeparator=",";GH.NumberFormat.decimalSeparator=".";GH.NumberFormat.format=function(f){if(!_.isNumber(f)){return undefined}f=GH.Util.roundToDecimalPlaces(f,2);var b=f<<0;var e=f.toString().split(".")[1];var a=function(d){return d.split("").reverse().join("")};var c=a(a(b.toString()).replace(/(\d{3})(?=\d)/g,"$1"+GH.NumberFormat.groupingSeparator));return c+(e?GH.NumberFormat.decimalSeparator+e:"")};GH.NumberFormat.formatExponential=function(c){if(!_.isNumber(c)){return undefined}var b=(Math.abs(c).toFixed(0)).length-1;var a=c/Math.pow(10,b);return GH.NumberFormat.format(a)+"e"+GH.NumberFormat.format(b)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/TimeFormat.js' */
GH.TimeFormatDisplays={};GH.TimeFormatDisplays.PRETTY="pretty";GH.TimeFormatDisplays.DAYS="days";GH.TimeFormatDisplays.HOURS="hours";GH.TimeFormatDisplays.MOST_SIGNIFICANT="most-significant";GH.TimeFormatDurationUnits={};GH.TimeFormatDurationUnits.SECONDS="seconds";GH.TimeFormatDurationUnits.MILLISECONDS="millis";GH.TimeFormat={};GH.TimeFormat.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}};GH.TimeFormat.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"{0}d",hour:"{0}h",minute:"{0}m"}};GH.TimeFormat.formatMinuteDuration=function(a){return GH.TimeFormat.formatDuration(a?a*60000:0)};GH.TimeFormat.formatShortMinuteDuration=function(a){return GH.TimeFormat.formatShortDuration(a?a*60000:0)};GH.TimeFormat.formatDuration=function(d){if(!d){d=0}var f=Math.floor(d/86400000);var c=d-f*86400000;var a=Math.floor(c/3600000);c=c-a*3600000;var b=Math.floor(c/60000);var e="";if(f>0){e+=f+" ";if(f>1){e+=AJS.format("days",f)}else{e+=AJS.format("day",f)}}if(a>0){if(e.length>0){e+=" "}e+=a+" ";if(a>1){e+=AJS.format("hours",a)}else{e+=AJS.format("hour",a)}}if(d>0||e.length===0){if(e.length>0){e+=" "}e+=b+" ";if(b===0||b>1){e+=AJS.format("minutes",b)}else{e+=AJS.format("minute",b)}}return e};GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration=function(b,a){if(_.isUndefined(a)){a={durationUnit:GH.TimeFormatDurationUnits.SECONDS}}return GH.TimeFormat._formatShortDuration(b,_.extend({},GH.TimeFormat.timeTrackingConfigOpts,a))};GH.TimeFormat.formatShortDuration=function(a){return GH.TimeFormat._formatShortDuration(a,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS}))};GH.TimeFormat.formatSensibleShortDuration=function(b){var a=GH.TimeFormat._formatShortDuration(b,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS,dropMinutesIfLongerThanADay:true}));if(a.length===0){a=GH.TimeFormat.getZeroMinutesShortFormat()}return a};GH.TimeFormat.getZeroMinutesShortFormat=function(){return AJS.format("{0}m",0)};GH.TimeFormat._formatShortDuration=function(e,a){if(!e){e=0}if(e===0){return"0"}var k=GH.TimeFormat.normalDisplayOpts;a=!_.isUndefined(a)?a:{};a=_.extend({},k,a);var b,l,i,g,f;var j=60000,c=60*j,n=a.hoursPerDay*c,m=a.daysPerWeek*n;if(a.durationUnit===GH.TimeFormatDurationUnits.SECONDS){e*=1000}b=Math.floor(e/m);f=e%m;l=Math.floor(f/n);f=f%n;i=Math.floor(f/c);f=f%c;g=Math.floor(f/j);if(a.dropMinutesIfLongerThanADay&&l>0){g=0}var h=[];if(a.timeFormat===GH.TimeFormatDisplays.PRETTY){h=[{val:b,fmt:a.symbols.week},{val:l,fmt:a.symbols.day},{val:i,fmt:a.symbols.hour},{val:g,fmt:a.symbols.minute}]}else{if(a.timeFormat===GH.TimeFormatDisplays.DAYS){l=l+(b*a.daysPerWeek);i=i+(g/60);h=[{val:l,fmt:a.symbols.day},{val:i,fmt:a.symbols.hour}]}else{if(a.timeFormat===GH.TimeFormatDisplays.HOURS){l=l+(b*a.daysPerWeek);i=(l*a.hoursPerDay)+i+(g/60);h=[{val:i,fmt:a.symbols.hour}]}else{if(a.timeFormat===GH.TimeFormatDisplays.MOST_SIGNIFICANT){if(b>0){h=[{val:GH.Util.roundToDecimalPlaces(e/m,1),fmt:a.symbols.week}]}else{if(l>0){h=[{val:GH.Util.roundToDecimalPlaces(e/n,1),fmt:a.symbols.day}]}else{if(i>0){h=[{val:GH.Util.roundToDecimalPlaces(e/c,1),fmt:a.symbols.hour}]}else{h=[{val:g<1?"":GH.Util.roundToDecimalPlaces(e/j,1),fmt:a.symbols.minute}]}}}}}}}var d=function(o){var p="";_.each(o,function(r){if(r.val>0){if(p.length>0){p+=" "}var q=r.fmt;if(q.indexOf("{0}")<0){q="{0}"+q}var s=GH.NumberFormat.format(r.val);p+=AJS.format(q,s)}});if(!p&&o.length){p=AJS.format(_.last(o).fmt,"< 1")}return p};return d(h)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/MouseUtils.js' */
GH.MouseUtils={};GH.MouseUtils.openInSameTab=function(a){return(_.isUndefined(a.which)||a.which===null||a.which===1||(a.which===0&&AJS.$.browser.msie))&&!(a.metaKey||a.ctrlKey||a.shiftKey||(a.altKey&&!AJS.$.browser.msie))};GH.MouseUtils.getMetaKeys=function(a){if(a){return{metaPressed:a.metaKey||a.ctrlKey,shiftPressed:a.shiftKey}}else{return{metaPressed:false,shiftPressed:false}}};GH.MouseUtils.hasMetaKeys=function(a){return a.metaPressed||a.shiftPressed};GH.MouseUtils.isMetaPressed=function(a){return a.metaPressed};GH.MouseUtils.isShiftPressed=function(a){return a.shiftPressed};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/ScrollUtils.js' */
GH.ScrollUtils={};GH.ScrollUtils.scrollElementToViewPort=function(e,a,d){var c=e.scrollTop();var b=0;if(d.top<a.top){b=d.top-a.top}else{if(a.bottom<d.bottom){b=d.bottom-a.bottom}}if(b!==0){e.animate({scrollTop:c+b},"fast")}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/UrlFormat.js' */
GH.UrlFormat={};GH.UrlFormat.defaultContextPath="";GH.UrlFormat.prependBaseUrl=function(a){if(a&&a.indexOf("http://")!==0&&a.indexOf("https://")!==0){var b=(GH.Ajax&&GH.Ajax.CONTEXT_PATH)?GH.Ajax.CONTEXT_PATH:GH.UrlFormat.defaultContextPath;a=b+a}return a};GH.UrlFormat.getUrlForIssues=function(c){var b=_.compact(_.pluck(c,"id")).join(",");var a=b!==""?"id in ("+b+")":"";return GH.UrlFormat.prependBaseUrl("/issues/?jql="+encodeURIComponent(a))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/CallbackManager.js' */
GH.CallbackManager={};GH.CallbackManager.callbacks={};GH.CallbackManager.executeCallbacks=function(a,c){GH.Logger.log("Executing callbacks for "+a,GH.Logger.Contexts.callback);var b=GH.CallbackManager.callbacks[a];if(b&&!_.isEmpty(b)){_.each(b,function(d){GH.Logger.log("Executing callback "+d.name,GH.Logger.Contexts.callback);d.fn(c)});delete GH.CallbackManager.callbacks[a]}GH.Logger.log("Finished callbacks for "+a,GH.Logger.Contexts.callback)};GH.CallbackManager.registerCallback=function(c,b,a){GH.Logger.log("Registering callback "+b+" with namespace "+c);var d=GH.CallbackManager.callbacks[c];if(!d){d=GH.CallbackManager.callbacks[c]=[]}d.push({name:b,fn:a})};GH.CallbackManager.deleteCallbacks=function(a){_.each(_.keys(GH.CallbackManager.callbacks),function(b){if(b.substr(0,a.length)==a){delete GH.CallbackManager.callbacks[b]}})};GH.CallbackManager.getCallbacks=function(a){return GH.CallbackManager.callbacks[a]||[]};GH.CallbackManager.clear=function(){GH.CallbackManager.callbacks={}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.js' */
GH.RapidBoard.Util.InlineEditable={};GH.RapidBoard.Util.InlineEditable.defaultFieldData=function(d,c){var f=d.attr("data-fieldname");var e=d.attr("data-fieldvalue");var b=d.attr("data-defaultvalue");var a=d.attr("data-maxdisplaylength");return{fieldName:f,fieldValue:e,defaultValue:b,maxDisplayLength:a}};GH.RapidBoard.Util.InlineEditable.defaultActivate=function(a){a.editElement.focus();a.editElement.select()};GH.RapidBoard.Util.InlineEditable.defaultTextRenderView=function(a){var b=AJS.$(GH.tpl.inlineeditfield.renderBasicTextView({canEdit:true,fieldName:a.fieldName,fieldValue:a.newValue,displayValue:a.newValue,defaultValue:a.defaultValue,maxDisplayLength:a.maxDisplayLength}));return b};GH.RapidBoard.Util.InlineEditable.pencilTextRenderView=function(a){var b=AJS.$(GH.tpl.inlineeditfield.renderPencilTextView({canEdit:true,fieldName:a.fieldName,fieldValue:a.newValue,displayValue:a.newValue}));return b};GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView=function(a){var b=AJS.$(GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName:a.fieldName,fieldValue:a.newValue,displayValue:a.newValue}));return b};GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit=function(a,b){if(!b){b=GH.tpl.inlineeditfield.renderBasicTextFieldEdit}var c=AJS.$(b(a));c.val(a.fieldValue);c.blur(function(d){GH.RapidBoard.Util.InlineEditable.submitChanges(a)});c.keydown(function(d){if(d.keyCode==27){d.stopPropagation();GH.RapidBoard.Util.InlineEditable.cancelEdit(a)}else{if(d.keyCode==13){d.preventDefault();GH.RapidBoard.Util.InlineEditable.submitChanges(a)}}});return c};GH.RapidBoard.Util.InlineEditable.defaultTextValidation=function(a){var b=a.editElement.val();a.newValue=b;return true};GH.RapidBoard.Util.InlineEditable.renderUserPickerInlineEdit=function(b,d){var c={value:b.fieldValue};var a=AJS.$(GH.tpl.inlineeditfield.renderUserPickerFieldEdit({name:"userpickerSelect",data:c}));return a};GH.RapidBoard.Util.InlineEditable.userPickerActivate=function(c){var b=c.editElement.find("select");var a=function(f){if(f.finishSubmitted){return}f.finishSubmitted=true;var i=f.selectObject;var h=i.getSelectedDescriptor();var g=null;if(h){g=h.value()}else{GH.RapidBoard.Util.InlineEditable.cancelEdit(f);return}if(g!==f.fieldValue){GH.RapidBoard.Util.InlineEditable.submitChanges(f)}else{GH.RapidBoard.Util.InlineEditable.cancelEdit(f)}};GH.SingleSelect=AJS.SingleSelect.extend({submitForm:function(){if(!this.suggestionsVisible){this.handleFreeInput();a(c)}},_handleEscape:function(f){if(this.suggestionsVisible){f.stopPropagation();if(f.type==="keyup"){this.hideSuggestions()}}if(f.type==="keyup"){GH.RapidBoard.Util.InlineEditable.cancelEdit(c)}},_deactivate:function(){this.acceptFocusedSuggestion();this.hideSuggestions();a(c)}});var e=new GH.SingleSelect({element:b,showDropdownButton:false,removeOnUnSelect:true,submitInputVal:true,errorMessage:"The user \'{0}\' is invalid.",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+"/rest/api/1.0/users/picker",query:true,minQueryLength:0,data:{showAvatar:true},formatResponse:function(f){var g=[];AJS.$(f).each(function(j,h){var k=new AJS.GroupDescriptor({weight:j,id:"user-suggestions",replace:true,label:h.footer});AJS.$(h.users).each(function(){k.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,allowDuplicate:false,icon:this.avatarUrl}))});g.push(k)});return g}}});c.selectObject=e;var d=c.editElement.find("input");d.focus();b.select()};GH.RapidBoard.Util.InlineEditable.userPickerValidation=function(a){var b=a.selectObject.getSelectedDescriptor();a.newValue=b.value();a.newDisplayValue=b.label();if(a.newDisplayValue.length==0){a.newDisplayValue=a.newValue}return true};GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit=function(b,c){var a=AJS.$(GH.tpl.inlineeditfield.renderDatePickerFieldEdit({fieldName:b.fieldName,fieldValue:b.fieldValue}));return a};GH.RapidBoard.Util.InlineEditable.datePickerActivate=function(b,a){var c=b.fieldName;a=_.extend({},{cache:false,firstDay:0,inputField:"ghx-datepicker-"+c,button:"ghx-datepicker-"+c+"_trigger_c",align:"Br",singleClick:true,showsTime:true,timeFormat:12,positionStyle:"fixed",onClose:function(d){GH.RapidBoard.Util.InlineEditable.submitChanges(b);d.hide()},ifFormat:GH.TimeFormat.dateTimePickerFormat},a);Calendar.setup(a);AJS.$("#ghx-datepicker-"+c).keydown(function(d){if(d.keyCode==27){d.stopPropagation();GH.RapidBoard.Util.InlineEditable.cancelEdit(b);GH.Validation.clearContextualErrors()}else{if(d.keyCode==13){d.preventDefault();GH.RapidBoard.Util.InlineEditable.submitChanges(b)}}});AJS.$("#ghx-datepicker-"+c).focus();AJS.$("#ghx-datepicker-"+c).blur(function(){GH.RapidBoard.Util.InlineEditable.submitChanges(b)})};GH.RapidBoard.Util.InlineEditable.datePickerValidation=function(a){var b=a.editElement.find("input").val();a.newValue=b;return true};GH.RapidBoard.Util.InlineEditable.activeEdits=[];GH.RapidBoard.Util.InlineEditable.cancelActiveEdits=function(){_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(a){GH.RapidBoard.Util.InlineEditable.cancelEdit(a)})};GH.RapidBoard.Util.InlineEditable.submitActiveEdits=function(){if(_.isEmpty(GH.RapidBoard.Util.InlineEditable.activeEdits)){return false}else{_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(a){GH.RapidBoard.Util.InlineEditable.submitChanges(a)});return true}};GH.RapidBoard.Util.InlineEditable.register=function(a,b){var c={getViewElement:function(d){return AJS.$(this)},getData:GH.RapidBoard.Util.InlineEditable.defaultFieldData,preEdit:function(d){},renderEdit:GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.defaultActivate,validate:GH.RapidBoard.Util.InlineEditable.defaultTextValidation,save:function(d){GH.RapidBoard.Util.InlineEditable.updateView(d)},renderView:GH.RapidBoard.Util.InlineEditable.defaultTextRenderView,postEdit:function(d){},startEdit:GH.RapidBoard.Util.InlineEditable.startEdit};if(b){AJS.$.extend(true,c,b)}AJS.$(a).live("click",c,function(f){var e=f.data;var d=e.getViewElement.call(this,f);c.startEdit(d,e)})};GH.RapidBoard.Util.InlineEditable.startEdit=function(c,b){GH.Logger.log("GH.RapidBoard.Util.InlineEditable.startEdit",GH.Logger.Contexts.ui);var d;if(b.getData){d=b.getData(c,b)}if(!d){return}d.viewElement=c;d.options=b;if(b.preEdit){var a=b.preEdit(d);if(a===false){return}}GH.RapidBoard.Util.InlineEditable.activeEdits.push(d);var e=b.renderEdit(d);d.editElement=e;AJS.$(d.viewElement).replaceWith(d.editElement);if(b.activate){b.activate(d)}};GH.RapidBoard.Util.InlineEditable.cancelEdit=function(a){a.canceled=true;a.editElement.replaceWith(a.viewElement);GH.Validation.clearContextualErrors(a.viewElement);if(a.options.postEdit){a.options.postEdit(a)}GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(a)};GH.RapidBoard.Util.InlineEditable.submitChanges=function(a){var b=a.options.validate(a);if(!b){a.options.activate(a);return}a.options.save(a)};GH.RapidBoard.Util.InlineEditable.updateView=function(b){b.updated=true;var a=b.options.renderView(b);b.viewElement=a;b.editElement.replaceWith(a);GH.Validation.clearContextualErrors(b.viewElement);if(b.options.postEdit){b.options.postEdit(b)}GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(b)};GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits=function(a){GH.RapidBoard.Util.InlineEditable.activeEdits=_.without(GH.RapidBoard.Util.InlineEditable.activeEdits,a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.soy' */
// This file was automatically generated from InlineEditField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.inlineeditfield.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.inlineeditfield == 'undefined') { GH.tpl.inlineeditfield = {}; }


GH.tpl.inlineeditfield.renderBasicTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + ((opt_data.fieldValue) ? soy.$$escapeHtml(opt_data.fieldValue) : '') + '"' + ((opt_data.defaultValue) ? ' data-defaultvalue="' + soy.$$escapeHtml(opt_data.defaultValue) + '"' : '') + ' data-maxdisplaylength="' + ((opt_data.maxDisplayLength) ? soy.$$escapeHtml(opt_data.maxDisplayLength) : '') + '" >' + ((opt_data.defaultValue && ! opt_data.displayValue) ? soy.$$escapeHtml(opt_data.defaultValue) : (opt_data.maxDisplayLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.displayValue), opt_data.maxDisplayLength, true) : soy.$$escapeHtml(opt_data.displayValue)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextView';
}


GH.tpl.inlineeditfield.renderBasicTextFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text js-editing-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '" ' + ((opt_data.maxLength) ? 'maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextFieldEdit';
}


GH.tpl.inlineeditfield.renderUserPickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><select class="js-default-user-picker" name="' + soy.$$escapeHtml(opt_data.name) + '">' + ((opt_data.data.avatarUrl) ? '<option selected="selected" style="background-image:url(\'' + soy.$$escapeHtml(opt_data.data.avatarUrl) + '\')" value="' + soy.$$escapeHtml(opt_data.data.value) + '">' : '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.data.value) + '">') + ((opt_data.data.displayName) ? soy.$$escapeHtml(opt_data.data.displayName) : soy.$$escapeHtml(opt_data.data.value)) + '</option></select></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderUserPickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderUserPickerFieldEdit';
}


GH.tpl.inlineeditfield.renderDatePickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><input id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text medium-field js-editing-field" type="text" value="' + soy.$$escapeHtml(opt_data.fieldValue) + '"><span id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar js-editing-field" title="' + soy.$$escapeHtml("Edit end date") + '">' + soy.$$escapeHtml("Edit") + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderDatePickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderDatePickerFieldEdit';
}


GH.tpl.inlineeditfield.renderPencilTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable-secondary js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly-secondary"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + ((opt_data.canEdit) ? '<span class="js-edit-pencil ghx-icon ghx-icon-edit" title="' + soy.$$escapeHtml("Click to edit") + '"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderPencilTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderPencilTextView';
}


GH.tpl.inlineeditfield.renderRemoteTriggeredTextView = function(opt_data, opt_ignored) {
  return '<span class="field-value js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderRemoteTriggeredTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderRemoteTriggeredTextView';
}


GH.tpl.inlineeditfield.renderJQLAutocomplete = function(opt_data, opt_ignored) {
  return '<span><textarea class="js-jql-autocomplete-field textarea" name="' + soy.$$escapeHtml(opt_data.name) + '" id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" cols="20" rows="2">' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea><span id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-errormsg-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" class="icon jqlgood js-jql-autocomplete-error"><span></span></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderJQLAutocomplete.soyTemplateName = 'GH.tpl.inlineeditfield.renderJQLAutocomplete';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.resizable.js' */
/*!
 * jQuery UI Resizable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(c,d){function b(e){return parseInt(e,10)||0}function a(e){return !isNaN(parseInt(e,10))}c.widget("ui.resizable",c.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:false,alsoResizeMirror:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var l,f,j,g,e,h=this,k=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(k.aspectRatio),aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(c("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=k.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}l=this.handles.split(",");this.handles={};for(f=0;f<l.length;f++){j=c.trim(l[f]);e="ui-resizable-"+j;g=c("<div class='ui-resizable-handle "+e+"'></div>");g.css({zIndex:k.zIndex});if("se"===j){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[j]=".ui-resizable-"+j;this.element.append(g)}}this._renderAxis=function(q){var n,o,m,p;q=q||this.element;for(n in this.handles){if(this.handles[n].constructor===String){this.handles[n]=c(this.handles[n],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){o=c(this.handles[n],this.element);p=/sw|ne|nw|se|n|s/.test(n)?o.outerHeight():o.outerWidth();m=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");q.css(m,p);this._proportionallyResize()}if(!c(this.handles[n]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!h.resizing){if(this.className){g=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}h.axis=g&&g[1]?g[1]:"se"}});if(k.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(k.disabled){return}c(this).removeClass("ui-resizable-autohide");h._handles.show()}).mouseleave(function(){if(k.disabled){return}if(!h.resizing){c(this).addClass("ui-resizable-autohide");h._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var f,e=function(g){c(g).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);f=this.element;this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f);f.remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(g){var f,h,e=false;for(f in this.handles){h=c(this.handles[f])[0];if(h===g.target||c.contains(h,g.target)){e=true}}return !this.options.disabled&&e},_mouseStart:function(g){var k,h,j,i=this.options,f=this.element.position(),e=this.element;this.resizing=true;if((/absolute/).test(e.css("position"))){e.css({position:"absolute",top:e.css("top"),left:e.css("left")})}else{if(e.is(".ui-draggable")){e.css({position:"absolute",top:f.top,left:f.left})}}this._renderProxy();k=b(this.helper.css("left"));h=b(this.helper.css("top"));if(i.containment){k+=c(i.containment).scrollLeft()||0;h+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof i.aspectRatio==="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);j=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",j==="auto"?this.axis+"-resize":j);e.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(e){var k,g=this.helper,l={},i=this.originalMousePosition,m=this.axis,o=this.position.top,f=this.position.left,n=this.size.width,j=this.size.height,q=(e.pageX-i.left)||0,p=(e.pageY-i.top)||0,h=this._change[m];if(!h){return false}k=h.apply(this,[e,q,p]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){k=this._updateRatio(k,e)}k=this._respectSize(k,e);this._updateCache(k);this._propagate("resize",e);if(this.position.top!==o){l.top=this.position.top+"px"}if(this.position.left!==f){l.left=this.position.left+"px"}if(this.size.width!==n){l.width=this.size.width+"px"}if(this.size.height!==j){l.height=this.size.height+"px"}g.css(l);if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!c.isEmptyObject(l)){this._trigger("resize",e,this.ui())}return false},_mouseStop:function(h){this.resizing=false;var g,e,f,k,n,j,m,i=this.options,l=this;if(this._helper){g=this._proportionallyResizeElements;e=g.length&&(/textarea/i).test(g[0].nodeName);f=e&&c.ui.hasScroll(g[0],"left")?0:l.sizeDiff.height;k=e?0:l.sizeDiff.width;n={width:(l.helper.width()-k),height:(l.helper.height()-f)};j=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null;m=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!i.animate){this.element.css(c.extend(n,{top:m,left:j}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!i.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",h);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(g){var i,h,f,k,e,j=this.options;e={minWidth:a(j.minWidth)?j.minWidth:0,maxWidth:a(j.maxWidth)?j.maxWidth:Infinity,minHeight:a(j.minHeight)?j.minHeight:0,maxHeight:a(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||g){i=e.minHeight*this.aspectRatio;f=e.minWidth/this.aspectRatio;h=e.maxHeight*this.aspectRatio;k=e.maxWidth/this.aspectRatio;if(i>e.minWidth){e.minWidth=i}if(f>e.minHeight){e.minHeight=f}if(h<e.maxWidth){e.maxWidth=h}if(k<e.maxHeight){e.maxHeight=k}}this._vBoundaries=e},_updateCache:function(e){this.offset=this.helper.offset();if(a(e.left)){this.position.left=e.left}if(a(e.top)){this.position.top=e.top}if(a(e.height)){this.size.height=e.height}if(a(e.width)){this.size.width=e.width}},_updateRatio:function(g){var h=this.position,f=this.size,e=this.axis;if(a(g.height)){g.width=(g.height*this.aspectRatio)}else{if(a(g.width)){g.height=(g.width/this.aspectRatio)}}if(e==="sw"){g.left=h.left+(f.width-g.width);g.top=null}if(e==="nw"){g.top=h.top+(f.height-g.height);g.left=h.left+(f.width-g.width)}return g},_respectSize:function(j){var g=this._vBoundaries,m=this.axis,p=a(j.width)&&g.maxWidth&&(g.maxWidth<j.width),k=a(j.height)&&g.maxHeight&&(g.maxHeight<j.height),h=a(j.width)&&g.minWidth&&(g.minWidth>j.width),n=a(j.height)&&g.minHeight&&(g.minHeight>j.height),f=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,i=/sw|nw|w/.test(m),e=/nw|ne|n/.test(m);if(h){j.width=g.minWidth}if(n){j.height=g.minHeight}if(p){j.width=g.maxWidth}if(k){j.height=g.maxHeight}if(h&&i){j.left=f-g.minWidth}if(p&&i){j.left=f-g.maxWidth}if(n&&e){j.top=l-g.minHeight}if(k&&e){j.top=l-g.maxHeight}if(!j.width&&!j.height&&!j.left&&j.top){j.top=null}else{if(!j.width&&!j.height&&!j.top&&j.left){j.left=null}}return j},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var h,f,l,e,k,g=this.helper||this.element;for(h=0;h<this._proportionallyResizeElements.length;h++){k=this._proportionallyResizeElements[h];if(!this.borderDif){this.borderDif=[];l=[k.css("borderTopWidth"),k.css("borderRightWidth"),k.css("borderBottomWidth"),k.css("borderLeftWidth")];e=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")];for(f=0;f<l.length;f++){this.borderDif[f]=(parseInt(l[f],10)||0)+(parseInt(e[f],10)||0)}}k.css({height:(g.height()-this.borderDif[0]-this.borderDif[2])||0,width:(g.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,f=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e){return{width:this.originalSize.width+e}},w:function(g,e){var f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(h,f,e){var g=this.originalSize,i=this.originalPosition;return{top:i.top+e,height:g.height-e}},s:function(g,f,e){return{height:this.originalSize.height+e}},se:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},sw:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,f,e]))},ne:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},nw:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,f,e]))}},_propagate:function(f,e){c.ui.plugin.call(this,f,[e,this.ui()]);(f!=="resize"&&this._trigger(f,e,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.ui.plugin.add("resizable","animate",{stop:function(h){var m=c(this).data("resizable"),j=m.options,g=m._proportionallyResizeElements,e=g.length&&(/textarea/i).test(g[0].nodeName),f=e&&c.ui.hasScroll(g[0],"left")?0:m.sizeDiff.height,l=e?0:m.sizeDiff.width,i={width:(m.size.width-l),height:(m.size.height-f)},k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null,n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;m.element.animate(c.extend(i,n&&k?{top:n,left:k}:{}),{duration:j.animateDuration,easing:j.animateEasing,step:function(){var o={width:parseInt(m.element.css("width"),10),height:parseInt(m.element.css("height"),10),top:parseInt(m.element.css("top"),10),left:parseInt(m.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}m._updateCache(o);m._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var m,g,q,e,l,h,r,n=c(this).data("resizable"),k=n.options,j=n.element,f=k.containment,i=(f instanceof c)?f.get(0):(/parent/.test(f))?j.parent().get(0):f;if(!i){return}n.containerElement=c(i);if(/document/.test(f)||f===document){n.containerOffset={left:0,top:0};n.containerPosition={left:0,top:0};n.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{m=c(i);g=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){g[p]=b(m.css("padding"+o))});n.containerOffset=m.offset();n.containerPosition=m.position();n.containerSize={height:(m.innerHeight()-g[3]),width:(m.innerWidth()-g[1])};q=n.containerOffset;e=n.containerSize.height;l=n.containerSize.width;h=(c.ui.hasScroll(i,"left")?i.scrollWidth:l);r=(c.ui.hasScroll(i)?i.scrollHeight:e);n.parentData={element:i,left:q.left,top:q.top,width:h,height:r}}},resize:function(f){var k,q,j,i,l=c(this).data("resizable"),h=l.options,n=l.containerOffset,m=l.position,p=l._aspectRatio||f.shiftKey,e={top:0,left:0},g=l.containerElement;if(g[0]!==document&&(/static/).test(g.css("position"))){e=n}if(m.left<(l._helper?n.left:0)){l.size.width=l.size.width+(l._helper?(l.position.left-n.left):(l.position.left-e.left));if(p){l.size.height=l.size.width/l.aspectRatio}l.position.left=h.helper?n.left:0}if(m.top<(l._helper?n.top:0)){l.size.height=l.size.height+(l._helper?(l.position.top-n.top):l.position.top);if(p){l.size.width=l.size.height*l.aspectRatio}l.position.top=l._helper?n.top:0}l.offset.left=l.parentData.left+l.position.left;l.offset.top=l.parentData.top+l.position.top;k=Math.abs((l._helper?l.offset.left-e.left:(l.offset.left-e.left))+l.sizeDiff.width);q=Math.abs((l._helper?l.offset.top-e.top:(l.offset.top-n.top))+l.sizeDiff.height);j=l.containerElement.get(0)===l.element.parent().get(0);i=/relative|absolute/.test(l.containerElement.css("position"));if(j&&i){k-=l.parentData.left}if(k+l.size.width>=l.parentData.width){l.size.width=l.parentData.width-k;if(p){l.size.height=l.size.width/l.aspectRatio}}if(q+l.size.height>=l.parentData.height){l.size.height=l.parentData.height-q;if(p){l.size.width=l.size.height*l.aspectRatio}}},stop:function(){var k=c(this).data("resizable"),f=k.options,l=k.containerOffset,e=k.containerPosition,g=k.containerElement,i=c(k.helper),n=i.offset(),m=i.outerWidth()-k.sizeDiff.width,j=i.outerHeight()-k.sizeDiff.height;if(k._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:n.left-e.left-l.left,width:m,height:j})}if(k._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:n.left-e.left-l.left,width:m,height:j})}}});c.ui.plugin.add("resizable","alsoResize",{start:function(){var e=c(this).data("resizable"),g=e.options,f=function(h){c(h).each(function(){var i=c(this);i.data("ui-resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)})})};if(typeof(g.alsoResize)==="object"&&!g.alsoResize.parentNode){if(g.alsoResize.length){g.alsoResize=g.alsoResize[0];f(g.alsoResize)}else{c.each(g.alsoResize,function(h){f(h)})}}else{f(g.alsoResize)}},resize:function(g,i){var f=c(this).data("resizable"),j=f.options,h=f.originalSize,l=f.originalPosition,k={height:(f.size.height-h.height)||0,width:(f.size.width-h.width)||0,top:(f.position.top-l.top)||0,left:(f.position.left-l.left)||0},e=function(m,n){c(m).each(function(){var q=c(this),r=c(this).data("ui-resizable-alsoresize"),p={},o=n&&n.length?n:q.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(o,function(s,u){var t=(r[u]||0)+(k[u]||0);if(t&&t>=0){p[u]=t||null}});q.css(p)})};if(typeof(j.alsoResize)==="object"&&!j.alsoResize.nodeType){c.each(j.alsoResize,function(m,n){e(m,n)})}else{e(j.alsoResize)}},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","alsoResizeMirror",{start:function(){var e=c(this).data("resizable"),g=e.options,f=function(h){c(h).each(function(){var i=c(this);i.data("ui-resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)})})};if(typeof(g.alsoResizeMirror)==="object"&&!g.alsoResizeMirror.parentNode){if(g.alsoResizeMirror.length){g.alsoResizeMirror=g.alsoResizeMirror[0];f(g.alsoResizeMirror)}else{c.each(g.alsoResizeMirror,function(h){f(h)})}}else{f(g.alsoResizeMirror)}},resize:function(g,i){var f=c(this).data("resizable"),j=f.options,h=f.originalSize,l=f.originalPosition,k={height:(f.size.height-h.height)||0,width:(f.size.width-h.width)||0,top:(f.position.top-l.top)||0,left:(f.position.left-l.left)||0},e=function(m,n){c(m).each(function(){var q=c(this),r=c(this).data("ui-resizable-alsoresize"),p={},o=n&&n.length?n:q.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(o,function(s,u){var t=(r[u]||0)-(k[u]||0);if(t&&t>=0){p[u]=t||null}});q.css(p)})};if(typeof(j.alsoResizeMirror)==="object"&&!j.alsoResizeMirror.nodeType){c.each(j.alsoResizeMirror,function(m,n){e(m,n)})}else{e(j.alsoResizeMirror)}},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","ghost",{start:function(){var f=c(this).data("resizable"),g=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost==="string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var e=c(this).data("resizable");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=c(this).data("resizable");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(){var r=c(this).data("resizable"),i=r.options,s=r.size,k=r.originalSize,n=r.originalPosition,t=r.axis,f=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,p=(f[0]||1),m=(f[1]||1),h=Math.round((s.width-k.width)/p)*p,g=Math.round((s.height-k.height)/m)*m,l=k.width+h,e=k.height+g,j=i.maxWidth&&(i.maxWidth<l),u=i.maxHeight&&(i.maxHeight<e),q=i.minWidth&&(i.minWidth>l),v=i.minHeight&&(i.minHeight>e);i.grid=f;if(q){l=l+p}if(v){e=e+m}if(j){l=l-p}if(u){e=e-m}if(/^(se|s|e)$/.test(t)){r.size.width=l;r.size.height=e}else{if(/^(ne)$/.test(t)){r.size.width=l;r.size.height=e;r.position.top=n.top-g}else{if(/^(sw)$/.test(t)){r.size.width=l;r.size.height=e;r.position.left=n.left-h}else{r.size.width=l;r.size.height=e;r.position.top=n.top-g;r.position.left=n.left-h}}}}})})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.droppable.js' */
/*!
 * jQuery UI Droppable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(e){return e.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);(d.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var c=a.ui.ddmanager.droppables[this.options.scope];for(var d=0;d<c.length;d++){if(c[d]==this){c.splice(d,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(c,d){if(c=="accept"){this.accept=a.isFunction(d)?d:function(e){return e.is(d)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(c&&this._trigger("activate",d,this.ui(c)))},_deactivate:function(d){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(c&&this._trigger("deactivate",d,this.ui(c)))},_over:function(d){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",d,this.ui(c))}},_drop:function(d,e){var c=e||a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return false}var f=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=a.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==c.options.scope&&g.accept.call(g.element[0],(c.currentItem||c.element))&&a.ui.intersect(c,a.extend(g,{offset:g.element.offset()}),g.options.tolerance)){f=true;return false}});if(f){return false}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",d,this.ui(c));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.23"});a.ui.intersect=function(q,j,o){if(!j.offset){return false}var e=(q.positionAbs||q.position.absolute).left,d=e+q.helperProportions.width,n=(q.positionAbs||q.position.absolute).top,m=n+q.helperProportions.height;var g=j.offset.left,c=g+j.proportions.width,p=j.offset.top,k=p+j.proportions.height;switch(o){case"fit":return(g<=e&&d<=c&&p<=n&&m<=k);break;case"intersect":return(g<e+(q.helperProportions.width/2)&&d-(q.helperProportions.width/2)<c&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);break;case"pointer":var h=((q.positionAbs||q.position.absolute).left+(q.clickOffset||q.offset.click).left),i=((q.positionAbs||q.position.absolute).top+(q.clickOffset||q.offset.click).top),f=a.ui.isOver(i,h,p,g,j.proportions.height,j.proportions.width);return f;break;case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((e>=g&&e<=c)||(d>=g&&d<=c)||(e<g&&d>c));break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(f,h){var c=a.ui.ddmanager.droppables[f.options.scope]||[];var g=h?h.type:null;var k=(f.currentItem||f.element).find(":data(droppable)").andSelf();droppablesLoop:for(var e=0;e<c.length;e++){if(c[e].options.disabled||(f&&!c[e].accept.call(c[e].element[0],(f.currentItem||f.element)))){continue}for(var d=0;d<k.length;d++){if(k[d]==c[e].element[0]){c[e].proportions.height=0;continue droppablesLoop}}c[e].visible=c[e].element.css("display")!="none";if(!c[e].visible){continue}if(g=="mousedown"){c[e]._activate.call(c[e],h)}c[e].offset=c[e].element.offset();c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight}}},drop:function(c,d){var e=false;a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(c,this,this.options.tolerance)){e=this._drop.call(this,d)||e}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(c.currentItem||c.element))){this.isout=1;this.isover=0;this._deactivate.call(this,d)}});return e},dragStart:function(c,d){c.element.parents(":not(body,html)").bind("scroll.droppable",function(){if(!c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}})},drag:function(c,d){if(c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var f=a.ui.intersect(c,this,this.options.tolerance);var h=!f&&this.isover==1?"isout":(f&&this.isover==0?"isover":null);if(!h){return}var g;if(this.options.greedy){var e=this.element.parents(":data(droppable):eq(0)");if(e.length){g=a.data(e[0],"droppable");g.greedyChild=(h=="isover"?1:0)}}if(g&&h=="isover"){g.isover=0;g.isout=1;g._out.call(g,d)}this[h]=1;this[h=="isout"?"isover":"isout"]=0;this[h=="isover"?"_over":"_out"].call(this,d);if(g&&h=="isout"){g.isout=0;g.isover=1;g._over.call(g,d)}})},dragStop:function(c,d){c.element.parents(":not(body,html)").unbind("scroll.droppable");if(!c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}}}})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.sortable.js' */
(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,axisAdjusted:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",helperAdjusted:false,items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",intersectionOverride:false,helperProportions:false,zIndex:1000},_create:function(){var c=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float"))||(/inline|table-cell/).test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var c=this.items.length-1;c>=0;c--){this.items[c].item.removeData("sortable-item")}return this},_setOption:function(c,d){if(c==="disabled"){this.options[c]=d;this.widget()[d?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(f,g){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(f);var e=null,d=this,c=a(f.target).parents().each(function(){if(a.data(this,"sortable-item")==d){e=a(this);return false}});if(a.data(f.target,"sortable-item")==d){e=a(f.target)}if(!e){return false}if(this.options.handle&&!g){var h=false;a(this.options.handle,e).find("*").andSelf().each(function(){if(this==f.target){h=true}});if(!h){return false}}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(f,g,c){var h=this.options,d=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();if(typeof this.options.additionalScrollParents==="function"){this.additionalScrollParents=this.options.additionalScrollParents()}else{this.additionalScrollParents=b}this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");if(this.options.initializeTopAndLeft){this.helper[0].style.left=this.offset.left+"px";this.helper[0].style.top=this.offset.top+"px"}a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;(h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(h.containment){this._setContainment()}if(h.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",h.cursor)}if(h.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",h.opacity)}if(h.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",h.zIndex)}if(typeof this.options.axisAdjusted==="function"){this.options.axisAdjusted.apply(this)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}if(this.additionalScrollParents){this.additionalOverflowOffsets=[];this.additionalOverflowSizes=[];a.each(this.additionalScrollParents,function(i,j){var k=a(j);d.additionalOverflowOffsets[i]=k.offset();d.additionalOverflowSizes[i]={width:k.width(),height:k.height()}})}this._trigger("start",f,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!c){for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",f,d._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!h.dropBehaviour){setTimeout(function(){a.ui.ddmanager.prepareOffsets(d,f)},0)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(d){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var g=this.options,e=false;if(!this.options.ignoreOriginalScroll){if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-d.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+g.scrollSpeed}else{if(d.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-g.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-d.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(d.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-g.scrollSpeed}}}else{if(d.pageY-a(document).scrollTop()<g.scrollSensitivity){e=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(d.pageY-a(document).scrollTop())<g.scrollSensitivity){e=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}if(d.pageX-a(document).scrollLeft()<g.scrollSensitivity){e=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(d.pageX-a(document).scrollLeft())<g.scrollSensitivity){e=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}}if(this.additionalScrollParents){var m=this;a.each(this.additionalScrollParents,function(i,p){var n=m.additionalOverflowOffsets[i];var o=m.additionalOverflowSizes[i];if(n.left<=d.pageX&&d.pageX<n.left+o.width){if((n.top+p.offsetHeight)-d.pageY<g.scrollSensitivity){p.scrollTop=e=p.scrollTop+g.scrollSpeed}else{if(d.pageY-n.top<g.scrollSensitivity){p.scrollTop=e=p.scrollTop-g.scrollSpeed}}}if(n.top<=d.pageY&&d.pageY<n.top+o.height){if((n.left+p.offsetWidth)-d.pageX<g.scrollSensitivity){p.scrollLeft=e=p.scrollLeft+g.scrollSpeed}else{if(d.pageX-n.left<g.scrollSensitivity){p.scrollLeft=e=p.scrollLeft-g.scrollSpeed}}}})}if(e){if(g.containment){this._setContainment()}}if(e!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,d)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(typeof this.options.helperAdjusted==="function"){this.options.helperAdjusted.apply(this)}var k=this.element.offset();var h={width:this.element.width(),height:this.element.height()};if(k.left<=d.pageX&&d.pageX<=k.left+h.width&&k.top<=d.pageY&&d.pageY<=k.top+h.height){for(var j=this.items.length-1;j>=0;j--){var l=this.items[j],f=l.item[0],c=(typeof this.options.intersectionOverride=="function"?this.options.intersectionOverride.apply(this,[l]):this._intersectsWithPointer(l));if(!c){continue}if(f!=this.currentItem[0]&&this.placeholder[c==1?"next":"prev"]()[0]!=f&&!a.ui.contains(this.placeholder[0],f)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],f):true)){this.direction=c==1?"down":"up";if(this.options.tolerance=="pointer"||typeof this.options.intersectionOverride=="function"||this._intersectsWithSides(l)){this._rearrange(d,l)}else{break}this._trigger("change",d,this._uiHash());break}}}this._contactContainers(d);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,d)}this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(d,e){if(!d){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,d)}if(this.options.revert){var c=this;var f=c.placeholder.offset();c.reverting=true;a(this.helper).animate({left:f.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(d)})}else{this._clear(d,e)}return false},cancel:function(){var c=this;if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,c._uiHash(this));if(this.containers[d].containerCache.over){this.containers[d]._trigger("out",null,c._uiHash(this));this.containers[d].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(e){var c=this._getItemsAsjQuery(e&&e.connected);var d=[];e=e||{};a(c).each(function(){var f=(a(e.item||this).attr(e.attribute||"id")||"").match(e.expression||(/(.+)[-=_](.+)/));if(f){d.push((e.key||f[1]+"[]")+"="+(e.key&&e.expression?f[1]:f[2]))}});if(!d.length&&e.key){d.push(e.key+"=")}return d.join("&")},toArray:function(e){var c=this._getItemsAsjQuery(e&&e.connected);var d=[];e=e||{};c.each(function(){d.push(a(e.item||this).attr(e.attribute||"id")||"")});return d},_intersectsWith:function(m){var e=this.positionAbs.left,d=e+this.helperProportions.width,k=this.positionAbs.top,j=k+this.helperProportions.height;var f=m.left,c=f+m.width,n=m.top,i=n+m.height;var o=this.offset.click.top,h=this.offset.click.left;var g=(k+o)>n&&(k+o)<i&&(e+h)>f&&(e+h)<c;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"])){return g}else{return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&n<k+(this.helperProportions.height/2)&&j-(this.helperProportions.height/2)<i)}},_intersectsWithPointer:function(e){var f=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),h=f&&d,c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!h){return false}return this.floating?(((g&&g=="right")||c=="down")?2:1):(c&&(c=="down"?2:1))},_intersectsWithSides:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+(f.height/2),f.height),e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+(f.width/2),f.width),c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(this.floating&&g){return((g=="right"&&e)||(g=="left"&&!e))}else{return c&&((c=="down"&&d)||(c=="up"&&!d))}},_getDragVerticalDirection:function(){var c=this.positionAbs.top-this.lastPositionAbs.top;return c!=0&&(c>0?"down":"up")},_getDragHorizontalDirection:function(){var c=this.positionAbs.left-this.lastPositionAbs.left;return c!=0&&(c>0?"right":"left")},refresh:function(c){this._refreshItems(c);this.refreshPositions();return this},_connectWith:function(){var c=this.options;return c.connectWith.constructor==String?[c.connectWith]:c.connectWith},_getItemsAsjQuery:function(c){var m=this;var h=[];var f=[];var k=this._connectWith();if(k&&c){for(var e=k.length-1;e>=0;e--){var l=a(k[e]);for(var d=l.length-1;d>=0;d--){var g=a.data(l[d],"sortable");if(g&&g!=this&&!g.options.disabled){f.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g])}}}}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var e=f.length-1;e>=0;e--){f[e][0].each(function(){h.push(this)})}return a(h)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var d=0;d<this.items.length;d++){for(var c=0;c<e.length;c++){if(e[c]==this.items[d].item[0]){this.items.splice(d,1)}}}},_refreshItems:function(c){this.items=[];this.containers=[this];var k=this.items;var q=this;var g=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):a(this.options.items,this.element),this]];var m=this._connectWith();if(m){for(var f=m.length-1;f>=0;f--){var n=a(m[f]);for(var e=n.length-1;e>=0;e--){var h=a.data(n[e],"sortable");if(h&&h!=this&&!h.options.disabled){g.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],c,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}}}for(var f=g.length-1;f>=0;f--){var l=g[f][1];var d=g[f][0];for(var e=0,o=d.length;e<o;e++){var p=a(d[e]);p.data("sortable-item",l);k.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(c){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var e=this.items.length-1;e>=0;e--){var f=this.items[e];var d=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!c){f.width=d.outerWidth();f.height=d.outerHeight()}var g=d.offset();f.left=g.left;f.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var e=this.containers.length-1;e>=0;e--){var g=this.containers[e].element.offset();this.containers[e].containerCache.left=g.left;this.containers[e].containerCache.top=g.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}}return this},_createPlaceholder:function(e){var c=e||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var d=f.placeholder;f.placeholder={element:function(){var g=a(document.createElement(c.currentItem[0].nodeName)).addClass(d||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d){g.style.visibility="hidden"}return g},update:function(g,h){if(d&&!f.forcePlaceholderSize){return}if(!h.height()){h.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10))}if(!h.width()){h.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(c){var e=null,l=null;for(var g=this.containers.length-1;g>=0;g--){if(a.ui.contains(this.currentItem[0],this.containers[g].element[0])){continue}if(this._intersectsWith(this.containers[g].containerCache)){if(e&&a.ui.contains(this.containers[g].element[0],e.element[0])){continue}e=this.containers[g];l=g}else{if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",c,this._uiHash(this));this.containers[g].containerCache.over=0}}}if(!e){return}if(this.containers.length===1){this.containers[l]._trigger("over",c,this._uiHash(this));this.containers[l].containerCache.over=1}else{if(this.currentContainer!=this.containers[l]){var k=10000;var h=null;var d=this.positionAbs[this.containers[l].floating?"left":"top"];for(var f=this.items.length-1;f>=0;f--){if(!a.ui.contains(this.containers[l].element[0],this.items[f].item[0])){continue}var m=this.items[f][this.containers[l].floating?"left":"top"];if(Math.abs(m-d)<k){k=Math.abs(m-d);h=this.items[f]}}if(!h&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[l];h?this._rearrange(c,h,null,true):this._rearrange(c,null,this.containers[l].element,true);this._trigger("change",c,this._uiHash());this.containers[l]._trigger("change",c,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[l]._trigger("over",c,this._uiHash(this));this.containers[l].containerCache.over=1}}},_createHelper:function(d){var e=this.options;var c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d,this.currentItem])):(e.helper=="clone"?this.currentItem.clone():this.currentItem);if(!c.parents("body").length){a(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0])}if(c[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(c[0].style.width==""||e.forceHelperSize){c.width(this.currentItem.width())}if(c[0].style.height==""||e.forceHelperSize){c.height(this.currentItem.height())}return c},_adjustOffsetFromHelper:function(c){if(typeof c=="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.currentItem.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){if(this.options.helperProportions){this.helperProportions=this.options.helperProportions}else{this.helperProportions={width:this.helper.outerWidth()+(parseInt(this.helper.css("padding-left"))||0)+(parseInt(this.helper.css("padding-right"))||0)+(parseInt(this.helper.css("border-left-width"))||0)+(parseInt(this.helper.css("border-right-width"))||0)+(parseInt(this.helper.css("margin-left"))||0)+(parseInt(this.helper.css("margin-right"))||0),height:this.helper.outerHeight()+(parseInt(this.helper.css("padding-top"))||0)+(parseInt(this.helper.css("padding-bottom"))||0)+(parseInt(this.helper.css("border-top-width"))||0)+(parseInt(this.helper.css("border-bottom-width"))||0)+(parseInt(this.helper.css("margin-top"))||0)+(parseInt(this.helper.css("margin-bottom"))||0)}}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(typeof f.containment==="function"){this.containment=f.containment.apply(this)}else{if(!(/^(document|window|parent)$/).test(f.containment)){var d=a(f.containment)[0];var e=a(f.containment).offset();var c=(a(d).css("overflow")!="hidden");this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}},_convertPositionTo:function(g,i){if(!i){i=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(i.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(i.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(f){var i=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var e=f.pageX;var d=f.pageY;if(this.originalPosition){if(this.containment){if(f.pageX-this.offset.click.left<this.containment[0]){e=this.containment[0]+this.offset.click.left}if(f.pageY-this.offset.click.top<this.containment[1]){d=this.containment[1]+this.offset.click.top}if(f.pageX-this.offset.click.left>this.containment[2]){e=this.containment[2]+this.offset.click.left}if(f.pageY-this.offset.click.top>this.containment[3]){d=this.containment[3]+this.offset.click.top}}if(i.grid){var h=this.originalPageY+Math.round((d-this.originalPageY)/i.grid[1])*i.grid[1];d=this.containment?(!(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:(!(h-this.offset.click.top<this.containment[1])?h-i.grid[1]:h+i.grid[1])):h;var g=this.originalPageX+Math.round((e-this.originalPageX)/i.grid[0])*i.grid[0];e=this.containment?(!(g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2])?g:(!(g-this.offset.click.left<this.containment[0])?g-i.grid[0]:g+i.grid[0])):g}}return{top:(d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:c.scrollTop())))),left:(e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:c.scrollLeft())))}},_rearrange:function(h,g,d,f){d?d[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?g.item[0]:g.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var e=this,c=this.counter;window.setTimeout(function(){if(c==e.counter){e.refreshPositions(!f)}},0)},_clear:function(e,f){this.reverting=false;var g=[],c=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS){if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!f){g.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!f){g.push(function(h){this._trigger("update",h,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!f){g.push(function(h){this._trigger("remove",h,this._uiHash())})}for(var d=this.containers.length-1;d>=0;d--){if(a.ui.contains(this.containers[d].element[0],this.currentItem[0])&&!f){g.push((function(h){return function(i){h._trigger("receive",i,this._uiHash(this))}}).call(this,this.containers[d]));g.push((function(h){return function(i){h._trigger("update",i,this._uiHash(this))}}).call(this,this.containers[d]))}}}for(var d=this.containers.length-1;d>=0;d--){if(!f){g.push((function(h){return function(i){h._trigger("deactivate",i,this._uiHash(this))}}).call(this,this.containers[d]))}if(this.containers[d].containerCache.over){g.push((function(h){return function(i){h._trigger("out",i,this._uiHash(this))}}).call(this,this.containers[d]));this.containers[d].containerCache.over=0}}if(this._storedCursor){a("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",e,this._uiHash());for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}return false}if(!f){this._trigger("beforeStop",e,this._uiHash())}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!f){for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.11-greenhopper"})})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.touch-punch.js' */
/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f)}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown")};c._touchMove=function(f){if(!a){return}this._touchMoved=true;d(f,"mousemove")};c._touchEnd=function(f){if(!a){return}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click")}a=false};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f)}})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.keygen.js' */
(function(c,b){c.KeyGenerator=function(){var i=["THE","A","AN","AS","AND","OF","OR"],f={},h=function(k){return k.join("").length},j=function(k){return b.grep(k,function(m,l){return b.inArray(m,i)===-1})},g=function(l){var k="";b.each(l,function(m,n){k+=n.charAt(0)});return k},e=function(m){var l=false;var k;for(k=0;k<m.length;k++){if(d(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m},d=function(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};f[199]="C";f[231]="c";f[252]="u";f[251]="u";f[250]="u";f[249]="u";f[233]="e";f[234]="e";f[235]="e";f[232]="e";f[226]="a";f[228]="a";f[224]="a";f[229]="a";f[225]="a";f[239]="i";f[238]="i";f[236]="i";f[237]="i";f[196]="A";f[197]="A";f[201]="E";f[230]="ae";f[198]="Ae";f[244]="o";f[246]="o";f[242]="o";f[243]="o";f[220]="U";f[255]="Y";f[214]="O";f[241]="n";f[209]="N";return{generateKey:function(n,x){x=b.extend({},x);var m=(typeof x.desiredKeyLength=="number")?x.desiredKeyLength:4,t=(typeof x.maxKeyLength=="number")?x.maxKeyLength:Infinity;n=b.trim(n);if(!n){return""}var r=[];for(var q=0,w=n.length;q<w;q++){var k=f[n.charCodeAt(q)];r.push(k?k:n[q])}n=r.join("");var s=[];b.each(n.split(/\s+/),function(y,z){if(z){z=z.replace(/[^a-zA-Z]/g,"");z=z.toUpperCase();z.length&&s.push(z)}});if(m&&h(s)>m){s=j(s)}var u;if(s.length==0){u=""}else{if(s.length==1){var l=s[0],o=e(l);if(t<l.length||Math.abs(l.length-m)>=Math.abs(o.length-m)){u=o}else{u=l}}else{var v=h(s),p=g(s);if(t<v||Math.abs(v-m)>=Math.abs(p.length-m)){u=p}else{u=s.join("")}}}if(t&&u.length>t){u=u.substr(0,t)}return u}}};var a=c.KeyGenerator();b.fn.generateFrom=function(g,e){var d={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},f=b(this).first(),g=g.first(),e=b.extend({},d,e);(function(){var j=function(){return f.data("autosuggest")!==false},o=function(p){if(f.val()&&f.data("lastGeneratedValue")!==f.val()){f.data("autosuggest",false)}},n=function(p){f.data("lastGeneratedValue",p);f.val(p)},h=function(){o(f.val());k()},i=function(p){m(p,h)},m=function(s,q){var p=b(s.target),r;r=function(){l(s);q();if(p.is(":visible")){p.data("checkHook",setTimeout(r,e.timeoutMS))}};if(!p.data("checkHook")){p.data("checkHook",setTimeout(r,0))}},l=function(q){var p=b(q.target);clearTimeout(p.data("checkHook"));p.removeData("checkHook")},k=function(){if(j()){n(a.generateKey(g.val(),{desiredKeyLength:e.desiredKeyLength,maxKeyLength:e.maxKeyLength}))}};g.attr("maxlength",e.maxNameLength);f.attr("maxlength",e.maxKeyLength);f.css("text-transform","uppercase");if(document.activeElement&&document.activeElement===g[0]){i({target:g[0]})}g.focus(i);g.blur(l)})();return this}})(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.hoverIntent.js' */
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2013 Brian Cherne
 */
(function(a){a.fn.ghHoverIntent=function(m,d,h){var j={interval:100,sensitivity:7,timeout:0};if(typeof m==="object"){j=a.extend(j,m)}else{if(a.isFunction(d)){j=a.extend(j,{over:m,out:d,selector:h})}else{j=a.extend(j,{over:m,out:m,selector:d})}}var l,k,g,f;var e=function(n){l=n.pageX;k=n.pageY};var c=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if((Math.abs(g-l)+Math.abs(f-k))<j.sensitivity){a(n).off("mousemove.hoverIntent",e);n.hoverIntent_s=1;return j.over.apply(n,[o])}else{g=l;f=k;n.hoverIntent_t=setTimeout(function(){c(o,n)},j.interval)}};var i=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);n.hoverIntent_s=0;return j.out.apply(n,[o])};var b=function(p){var o=jQuery.extend({},p);var n=this;if(n.hoverIntent_t){n.hoverIntent_t=clearTimeout(n.hoverIntent_t)}if(p.type=="mouseenter"){g=o.pageX;f=o.pageY;a(n).on("mousemove.hoverIntent",e);if(n.hoverIntent_s!=1){n.hoverIntent_t=setTimeout(function(){c(o,n)},j.interval)}}else{a(n).off("mousemove.hoverIntent",e);if(n.hoverIntent_s==1){n.hoverIntent_t=setTimeout(function(){i(o,n)},j.timeout)}}};return this.on({"mouseenter.hoverIntent":b,"mouseleave.hoverIntent":b},j.selector)}})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/Collection.js' */
GH.Collection={};GH.Collection.Map=function Map(a){if(!(this instanceof GH.Collection.Map)){return new GH.Collection.Map(a)}this.clear();_.forEach(a,function(c,b){this.put(b,c)},this);return this};GH.Collection.Map.prototype.clear=function(){this.length=0;this._valuesByKey={};return this};GH.Collection.Map.prototype.forEach=function(b,a){_.forEach(this._valuesByKey,b,a);return this};GH.Collection.Map.prototype.get=function(a){return this._valuesByKey[a]};GH.Collection.Map.prototype.has=function(a){return _.has(this._valuesByKey,a)};GH.Collection.Map.prototype.keys=function(){return _.keys(this._valuesByKey)};GH.Collection.Map.prototype.put=function(a,b){if(!this.has(a)){this.length++}this._valuesByKey[a]=b;return this};GH.Collection.Map.prototype.remove=function(a){if(this.has(a)){delete this._valuesByKey[a];this.length--}return this};GH.Collection.Map.prototype.replace=GH.Collection.Map;GH.Collection.Map.prototype.toPlainObject=function(){return _.extend({},this._valuesByKey)};GH.Collection.Map.prototype.values=function(){return _.values(this._valuesByKey)};GH.Collection.Set=function Set(){if(!(this instanceof GH.Collection.Set)){return GH.Collection.Set.apply(new GH.Collection.Set(),arguments)}this._map=new GH.Collection.Map();this.length=0;this.add.apply(this,arguments);return this};GH.Collection.Set.prototype.add=function(){var a=this._map;_.forEach(arguments,function(b){a.put(b,true)},this);this.length=a.length;return this};GH.Collection.Set.prototype.clear=function(){this.length=0;this._map.clear();return this};GH.Collection.Set.prototype.forEach=function(b,a){this._map.forEach(function(c,d){return b.call(a,d)});return this};GH.Collection.Set.prototype.has=function(a){return this._map.has(a)};GH.Collection.Set.prototype.remove=function(){var a=this._map;_.forEach(arguments,function(b){a.remove(b)},true);this.length=a.length;return this};GH.Collection.Set.prototype.replace=GH.Collection.Set;GH.Collection.Set.prototype.toArray=function(){return this._map.keys()};GH.Collection.OrderedSet=function OrderedSet(){if(!(this instanceof GH.Collection.OrderedSet)){return GH.Collection.OrderedSet.apply(new GH.Collection.OrderedSet(),arguments)}this.clear();this.push.apply(this,arguments);return this};GH.Collection.OrderedSet.prototype.clear=function(){this.length=0;this._values=[];this._positionByValue=new GH.Collection.Map();return this};GH.Collection.OrderedSet.prototype.push=function(){var b=this._positionByValue;var a=this._values;_.forEach(arguments,function(c){if(!b.has(c)){b.put(c,a.length);a.push(c)}},this);this._values=a;this.length=a.length;return this};GH.Collection.OrderedSet.prototype.first=function(){return this.get(0)};GH.Collection.OrderedSet.prototype.forEach=function(b,a){_.forEach(this._values,b,a);return this};GH.Collection.OrderedSet.prototype.get=function(a){return this._values[a]};GH.Collection.OrderedSet.prototype.has=function(a){return this._positionByValue.has(a)};GH.Collection.OrderedSet.prototype.indexOf=function(b){var a=this._positionByValue.get(b);return _.isUndefined(a)?-1:a};GH.Collection.OrderedSet.prototype.last=function(){return this.get(this.length-1)};GH.Collection.OrderedSet.prototype.pop=function(){var a=this._values.pop();this._positionByValue.remove(a);this.length=this._values.length;return a};GH.Collection.OrderedSet.prototype.remove=function(){var a=this._values;_.forEach(arguments,function(c){var b=_.indexOf(a,c);if(b!==-1){a=a.slice(0,b).concat(a.slice(b+1))}});this.replace.apply(this,a);return this};GH.Collection.OrderedSet.prototype.replace=GH.Collection.OrderedSet;GH.Collection.OrderedSet.prototype.shift=function(){var a=this._values;var b=a.shift();this.replace.apply(this,a);return b};GH.Collection.OrderedSet.prototype.toArray=function(){var a=[];this.forEach(function(b){a.push(b)});return a};GH.Collection.OrderedSet.prototype.unshift=function(){var b=this._positionByValue;var a=this._values;_.forEach(arguments,function(c){if(!b.has(c)){a.unshift(c)}},this);this.replace.apply(this,a);return this};GH.Collection.OrderedMap=function OrderedMap(a){if(!(this instanceof GH.Collection.OrderedMap)){return new GH.Collection.OrderedMap(a)}this.clear();_.forEach(a,function(c,b){this.put(b,c)},this);return this};GH.Collection.OrderedMap.prototype.clear=function(){this.length=0;this._keys=[];this._values=[];this._indexByKey=new GH.Collection.Map();this._valueByKey=new GH.Collection.Map();return this};GH.Collection.OrderedMap.prototype.forEach=function(f,d){var e=this._keys;var b=this._values;for(var c=0,a=e.length;c<a;c++){f.call(d,b[c],e[c],c)}return this};GH.Collection.OrderedMap.prototype.get=function(a){return this._valueByKey.get(a)};GH.Collection.OrderedMap.prototype.getByIndex=function(a){return this._values[a]};GH.Collection.OrderedMap.prototype.getKeyByIndex=function(a){return this._keys[a]};GH.Collection.OrderedMap.prototype.has=function(a){return this._indexByKey.has(a)};GH.Collection.OrderedMap.prototype.indexOf=function(a){return this._indexByKey.indexOf(a)};GH.Collection.OrderedMap.prototype.keys=function(){return this._keys.slice(0)};GH.Collection.OrderedMap.prototype.put=function(a,b){if(!this.has(a)){this._indexByKey.put(a,this.length);this._valueByKey.put(a,b);this._keys.push(a);this._values.push(b);this.length++}return this};GH.Collection.OrderedMap.prototype.remove=function(c){var b=this._indexByKey.get(c);if(b!==-1){this._indexByKey.remove(c);this._valueByKey.remove(c);var d=this._keys;this._keys=d.slice(0,b).concat(d.slice(b+1));var a=this._values;this._values=a.slice(0,b).concat(a.slice(b+1));this.length--}return this};GH.Collection.OrderedMap.prototype.replace=GH.Collection.OrderedMap;GH.Collection.OrderedMap.prototype.toPlainObject=function(){return this._valueByKey.toPlainObject()};GH.Collection.OrderedMap.prototype.values=function(){return this._values.slice(0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Animation.js' */
GH.RapidBoard.Animation=(function(b){var a=200;var i=500;var d="js-animation-inprogress";function g(j,k,l){return j.addClass(d).animate(k,l||a).promise().done(function(){j.removeClass(d)})}function e(k,j,m,n){var l=b(k);l.css({height:j});return g(l,{height:m},n).done(function(){l.css({height:""})})}function h(k,m){var l=b(k);var n=l.height();l.css("height","auto");var j=l.height();l.css("height",n);return g(l,{height:j},m).done(function(){l.css("height","auto")})}function f(j,l){var k=b(j);return g(k,{height:0},l)}function c(k,n,p){var l=b(k);var j=n||"#fff";var p=p||"#d6d6d6";var m="#ebf2f9";var o="#ccd9ea";l.addClass(d);l.stop().animate({"background-color":m,"border-top-color":o,"border-left-color":o,"border-right-color":o,"border-bottom-color":o},250).delay(1200).animate({"background-color":j,"border-top-color":p,"border-left-color":p,"border-right-color":p,"border-bottom-color":p},500).promise().done(function(){l.css({"background-color":"","border-top-color":"","border-left-color":"","border-right-color":"","border-bottom-color":""});l.removeClass(d)})}return{DEFAULT_DURATION:a,LONG_DURATION:i,animateHeight:e,animateHeightToAuto:h,animateHeightToZero:f,fadeElement:c}})(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/RapidBoard.js' */
GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD="GH.RapidBoard.causeBoardReload";GH.RapidBoard.Analytics={};GH.RapidBoard.projectKey=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Analytics.toolsMenu=new a("gh.rapidboard.toolsmenu")})();GH.RapidBoard.gotoRapidBoardPage=function(b,a){window.location.href=GH.RapidBoard.getRapidBoardPageUrl(b,a)};GH.RapidBoard.getRapidBoardPageUrl=function(c,a){var b=(_.isUndefined(a)?"&useStoredSettings=true":("&view="+a));return GH.Navigation.getCanonicRapidBoardPageUrl(c)+b};GH.RapidBoard.gotoRapidViewConfiguration=function(a){window.location.href=GH.RapidBoard.getRapidViewConfigurationUrl(a)};GH.RapidBoard.getRapidViewConfigurationUrl=function(c,a){var b=GH.Ajax.CONTEXT_PATH+"/secure/RapidView.jspa?rapidView="+c;if(a){b=b+"&tab="+a}return b};GH.RapidBoard.copyRapidViewAndGotoConfiguration=function(a,b){GH.RapidBoard.Analytics.toolsMenu.trigger("copy");GH.Ajax.put({url:"/rapidview/"+a+"/copy"}).done(function(c){var d=AJS.format("Successfully copied board \u003cstrong\u003e{0}\u003c/strong\u003e to \u003cstrong\u003e{1}\u003c/strong\u003e.",AJS.escapeHTML(String(b)),AJS.escapeHTML(String(c.success.name)));GH.Notification.addPageLoadMessage(d);GH.RapidBoard.gotoRapidViewConfiguration(c.success.id)})};GH.RapidBoard.printCardsInRapidBoard=function(){var a=require("jira-agile/rapid/ui/print/card-printing-controller");if(GH.RapidBoard.ViewController.getMode()==="plan"){a.printBoardPlanView(GH.RapidBoard.ViewController.collectPrintablePlanIssues())}else{if(GH.RapidBoard.ViewController.getMode()==="work"){a.printBoardWorkView(GH.RapidBoard.ViewController.collectPrintableWorkIssues())}}};GH.RapidBoard.getManageViewsPageUrl=function(){return GH.Ajax.CONTEXT_PATH+"/secure/ManageRapidViews.jspa"};GH.RapidBoard.gotoManageViewsPage=function(){window.location.href=GH.RapidBoard.getManageViewsPageUrl()};GH.RapidBoard.getCurrentPageReturnUrl=function(){var b=GH.RapidBoard.UrlState.getViewStateRequestParameterString();var a="/secure/RapidBoard.jspa?"+b;return encodeURIComponent(a)};GH.RapidBoard.reload=function(){var a=GH.RapidBoard.State.getRapidViewIdWithInfo();GH.RapidViewConfig.fetchConfiguration(a).done(GH.RapidBoard.handleBoardData);if(a.viewId){GH.RapidBoard.ViewController.preload(a.viewId)}};GH.RapidBoard.handleBoardData=function(b){GH.RapidBoard.State.setRapidViewId(b.id);var c=!_.isUndefined(b);if(b.noRapidViews){var d={id:undefined,name:undefined,canEdit:false,invalidView:false};GH.RapidBoard.setNewViewData(d);return}function a(){if(!_.isEmpty(GH.RapidBoard.projectKey)){JIRA.SmartAjax.makeRequest({type:"GET",contentType:"application/json",url:GH.Ajax.CONTEXT_PATH+"/rest/api/2/project/"+GH.RapidBoard.projectKey,success:function(e){if("projectTypeKey" in e&&e.projectTypeKey!=="software"){AJS.trigger("analytics",{name:"gh.rapidboard.show.global",data:{projectType:e.projectTypeKey}})}}})}}if(c){GH.RapidBoard.setNewViewData(b);a();AJS.trigger("analytics",{name:"gh.rapidboard.show."+(b.sprintSupportEnabled?"scrum":"kanban"),data:{boardId:b.id}})}else{GH.RapidBoard.setNewViewData({invalidView:true})}};GH.RapidBoard.setNewViewData=function(a){GH.RapidBoard.BoardHeader.update(a);GH.ViewActions.initViewActions(a);GH.RapidBoard.ViewController.update(a)};GH.RapidBoard.initListeners=function(){GH.RapidBoard.projectKey=AJS.$('meta[name="ghx-project-key"]').attr("content");GH.Layout.init();GH.Dialog.CreateView.init();GH.RapidBoard.BoardHeader.init();GH.RapidBoard.ViewController.init();GH.RapidBoard.QuickCreate.init();GH.RapidBoard.QuickEdit.init();JIRA.bind(GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD,GH.RapidBoard.reload);AJS.trigger("analytics",{name:"gh.rapidboard.show"})};GH.RapidBoard.init=function(){if(AJS.$("body.ghx-print-card-body").length){return}var a=require("jira-agile/rapid/global-events");a.trigger("pre-initialization");AJS.$("#gh").html(GH.tpl.board.x.renderRapidBoard());AJS.$("body").addClass("ghx-scroll-columns");if(AJS.$.support.touch){AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch")}AJS.$(GH).bind("ghx.rapidview.deleted",function(b,c){GH.Notification.addPageLoadMessage(c.message);GH.RapidBoard.gotoManageViewsPage()});GH.RapidBoard.State.initializeState();GH.RapidBoard.initListeners();GH.RapidBoard.reload();GH.Poller.init()};GH.RapidBoard.viewModelComparator=function(d,c){if(typeof d.name!=="string"){return -1}else{if(typeof c.name!=="string"){return 1}else{return(d.name.toLowerCase()<c.name.toLowerCase())?-1:(d.name.toLowerCase()>c.name.toLowerCase())?1:0}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/InlineDialog.js' */
define("jira-agile/dialog/inline",["_"],function(a){var b={create:function(f,c,d,e){e=e||{};GH.InlineDialog.remove(f);e=GH.InlineDialog._addBlurTriggerOverride(e,c);return AJS.InlineDialog(AJS.$(c),f,d,e)},remove:function(c){AJS.$("#inline-dialog-"+c).remove()},registerInlineDialogHacks:function(c,d){var f=(d&&d.disregardClickSelectors)||[];var e=(d&&d.validateClickToCloseFn)||false;AJS.$(document).bind("showLayer",function(h,g,i){GH.log(h.type+" handled",GH.Logger.Contexts.event);if(g==="inlineDialog"&&i.id===c){i._validateClickToClose=function(m){var l=this.id;GH.log("Validating whether or not to close the InlineDialog based on a click",GH.Logger.Contexts.event);for(var k=0;k<f.length;k++){var j=AJS.$(m.target);if(j.parents(f[k]).length>0){return false}if(j.is(f[k])){return false}}if(AJS.$(m.target).parents("#inline-dialog-"+l).length>0){return false}if(e&&!e(m)){return false}return true};AJS.$("body").unbind("click."+i.id+".inline-dialog-check")}})},preventCloseOnClick:function(c){AJS.$(document).on("click","#inline-dialog-"+c,function(d){d.stopPropagation()})},_addBlurTriggerOverride:function(e,c){var d=e.upfrontCallback;return a.defaults({upfrontCallback:function(){AJS.$(c).blur();if(a.isFunction(d)){d.apply(this,arguments)}}},e)}};return b});AJS.namespace("GH.InlineDialog",null,require("jira-agile/dialog/inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/SideInlineDialog.js' */
define("jira-agile/dialog/side-inline",["jira-agile/dialog/inline","_"],function(b,a){return{create:function(f,d,e,c){c=c||{};a.defaults(c,{gravity:"w",offsetX:15,offsetY:0});return b.create(f,d,e,c)}}});AJS.namespace("GH.SideInlineDialog",null,require("jira-agile/dialog/side-inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.soy' */
// This file was automatically generated from CreateView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.createviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.createviewdialog == 'undefined') { GH.tpl.createviewdialog = {}; }


GH.tpl.createviewdialog.renderDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#ghx-create-presets"><strong>' + soy.$$escapeHtml("Presets") + '</strong></a></li><li class="menu-item"><a href="#ghx-create-advanced"><strong>' + soy.$$escapeHtml("Advanced") + '</strong></a></li></ul><div class="tabs-pane active-pane" id="ghx-create-presets">' + GH.tpl.createviewdialog.renderPresets(null) + '</div><div class="tabs-pane" id="ghx-create-advanced">' + GH.tpl.createviewdialog.renderAdvanced(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderDialog.soyTemplateName = 'GH.tpl.createviewdialog.renderDialog';
}


GH.tpl.createviewdialog.renderPresets = function(opt_data, opt_ignored) {
  return '<div class="ghx-options">' + GH.tpl.createviewdialog.renderScrum(null) + GH.tpl.createviewdialog.renderKanban(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderPresets.soyTemplateName = 'GH.tpl.createviewdialog.renderPresets';
}


GH.tpl.createviewdialog.renderScrum = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-scrum"><h2>' + soy.$$escapeHtml("Scrum") + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml("Scrum is a method of development where the focus is on planning, committing and delivering time-boxed chunks of work called Sprints.") + '</p><p>' + soy.$$escapeHtml("Presets are:") + '</p><ul><li>' + soy.$$escapeHtml("Story swimlanes") + '</li><li>' + soy.$$escapeHtml("Story Points as estimation statistic") + '</li><li>' + soy.$$escapeHtml("Two-week iterations (starting today)") + '</li><li>' + soy.$$escapeHtml("Standard Quick Filters") + '</li><li>' + soy.$$escapeHtml("Issues ordered by Rank") + '</li><li>' + soy.$$escapeHtml("Columns: To Do, In Progress, Done") + '</li></ul><p>' + soy.$$escapeHtml("These settings can be changed later.") + '</p><button class="aui-button">' + soy.$$escapeHtml("Select Scrum") + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderScrum.soyTemplateName = 'GH.tpl.createviewdialog.renderScrum';
}


GH.tpl.createviewdialog.renderKanban = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-kanban"><h2>' + soy.$$escapeHtml("Kanban") + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml("Kanban is a method of development where the focus is on visualising your workflow and limiting work-in-progress. This assists you in making incremental improvements to your existing process.") + '</p><p>' + soy.$$escapeHtml("Presets are:") + '</p><ul><li>' + soy.$$escapeHtml("Expedite swimlane") + '</li><li>' + soy.$$escapeHtml("Issue Count as column statistic") + '</li><li>' + soy.$$escapeHtml("Days in column indicator") + '</li><li>' + soy.$$escapeHtml("Standard Quick Filters") + '</li><li>' + soy.$$escapeHtml("Issues ordered by Rank") + '</li><li>' + soy.$$escapeHtml("Columns: To Do, In Progress, Done") + '</li></ul><p>' + soy.$$escapeHtml("These settings can be changed later.") + '</p><button class="aui-button">' + soy.$$escapeHtml("Select Kanban") + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderKanban.soyTemplateName = 'GH.tpl.createviewdialog.renderKanban';
}


GH.tpl.createviewdialog.renderAdvanced = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui"><p>' + soy.$$escapeHtml("Advanced allows the creation of a Kanban board using an existing JIRA Saved Filter") + '</p><div class="field-group"><label for="ghx-view-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-view-name" name="name"></div><h3>' + soy.$$escapeHtml("JIRA Filter") + '</h3><fieldset><div class="field-group" id="ghx-filter-picker"><label for="ghx-create-filter-select">' + soy.$$escapeHtml("Saved Filter") + '</label>' + ((opt_data.canSeeSavedFilters) ? '<select id="ghx-create-filter-select" class="hidden"></select><div id="ghx-filter-error"></div>' : '<span class="field-value">' + soy.$$escapeHtml("There are no saved filters.") + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&amp;createNew=true">' + soy.$$escapeHtml("Create a filter now.") + '</a></span>') + '</div><div id="ghx-create-permissioninfo-container"></div></fieldset><fieldset><div class="field-group"><button id="ghx-create-advanced-submit" class="aui-button ' + ((! opt_data.canSeeSavedFilters) ? 'js-disabled' : '') + '"' + ((! opt_data.canSeeSavedFilters) ? ' disabled="disabled"' : '') + '>' + soy.$$escapeHtml("Create") + '</button></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderAdvanced.soyTemplateName = 'GH.tpl.createviewdialog.renderAdvanced';
}


GH.tpl.createviewdialog.renderCreateNewView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml("Board Name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-dialog-create-view-viewname"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Projects") + '<span class="aui-icon icon-required"></span></label><select id="ghx-dialog-create-view-viewprojects" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Select the projects to be included in this board.") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderCreateNewView.soyTemplateName = 'GH.tpl.createviewdialog.renderCreateNewView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.js' */
GH.Dialog.CreateView={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialog.CreateView.analytics=new a("gh.create.view")})();GH.Dialog.CreateView.init=function(){GH.Dialog.registerDialog(".js-view-action-create",GH.StartWizardView.startWizard);GH.Dialog.registerDialog(".js-view-action-create-scrum",GH.Dialog.CreateView.openCreateScrum);GH.Dialog.registerDialog(".js-view-action-create-kanban",GH.Dialog.CreateView.openCreateKanban)};GH.Dialog.CreateView.openCreateScrum=function(){GH.Dialog.CreateView.openPresetDialog("scrum")};GH.Dialog.CreateView.openCreateKanban=function(){GH.Dialog.CreateView.openPresetDialog("kanban")};GH.Dialog.CreateView.open=function(){GH.Ajax.get({url:"/rapidview/createmodel"},"createView").done(GH.Dialog.CreateView.openWizard)};GH.Dialog.CreateView.openWizard=function(c){var a=function(d){GH.Dialog.CreateView.analytics.trigger("cancel",d.curpage.toString())};var b=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});GH.Dialog.CreateView.analytics.trigger("start");GH.Dialog.CreateView.renderSelectPresetPage(b,c);b.addPage();GH.Dialog.CreateView.renderSelectNameAndProjectsPage(b,true);b.gotoPage(0);b.gotoPanel(0);b.show();GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv);AJS.$(b.getCurrentPanel().body).trigger("contentRefresh")};GH.Dialog.CreateView.openPresetDialog=function(c){var a=function(d){GH.Dialog.CreateView.analytics.trigger("cancel",d.curpage.toString())};var b=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});b.selectedPreset=c;GH.Dialog.CreateView.analytics.trigger("start",c);GH.Dialog.CreateView.renderSelectNameAndProjectsPage(b,false);b.gotoPage(0);b.gotoPanel(0);b.show();b.updateHeight();GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv);AJS.$("#"+b.id).find("input:visible:first").focus()};GH.Dialog.CreateView.renderSelectPresetPage=function(i,b){i.addHeader("Create Board");AJS.$("#"+i.id).addClass("ghx-dialog-create-view");var h=AJS.$(GH.tpl.createviewdialog.renderDialog({canSeeSavedFilters:b.canSeeSavedFilters}));i.addPanel("Select a Preset",h,"ghx-dialog-create-view-page");GH.Dialog.CreateView.setupTabs(i.id);GH.Dialog.addCancelButton(i);var e=AJS.$("#"+i.id).find(".ghx-kanban button");var g=AJS.$("#"+i.id).find(".ghx-scrum button");function c(){i.nextPage();i.updateHeight();AJS.$("#"+i.id).find("input:visible:first").focus();GH.Dialog.CreateView.prepareNotificationDiv=function(){var j=AJS.$(i.getCurrentPanel().body);var k=AJS.$("<div/>");k.addClass("dialog-panel-body").prependTo(j);i.updateHeight();return k};GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.CreateView.prepareNotificationDiv)}e.click(function(){i.selectedPreset="kanban";c()});g.click(function(){i.selectedPreset="scrum";c()});h.find("form").submit(function(){GH.Dialog.CreateView.submitAdvanced();return false});var f=AJS.$("#ghx-create-filter-select");if(f.size()>0){var d=new AJS.SingleSelect({element:f,width:300,removeOnUnSelect:true,overlabel:"Start typing for Filters",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:true,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(j){if(j.errors){var m=GH.Ajax._convertJiraErrors(j.errors);var l={searchName:"#ghx-create-filter-select"};GH.Ajax.handleContextualErrors(m,l);return false}AJS.$("#ghx-create-filter-select").siblings(".ghx-error").remove();var k=[];AJS.$(j.filters).each(function(){k.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))});return k}}});f.bind("selected",function(k,j){GH.Dialog.CreateView.updatePermissionInfo(j.properties.savedFilter)});f.bind("unselect",function(j){GH.Dialog.CreateView.updatePermissionInfo(null)})}var a=AJS.$("#ghx-create-advanced-submit");a.click(function(j){i.disableControls();GH.Dialog.CreateView.submitAdvanced(i);return false})};GH.Dialog.CreateView.renderSelectNameAndProjectsPage=function(d,j){var i=AJS.$("#"+d.id);var f="Create Board";if(d.selectedPreset=="scrum"){f="Create Scrum Board"}else{if(d.selectedPreset=="kanban"){f="Create Kanban Board"}}d.addHeader(f);i.addClass("ghx-dialog");var c=AJS.$(GH.tpl.createviewdialog.renderCreateNewView());d.addPanel(f,c,"ghx-dialog-create-view-page");if(j){d.addButton("Back",function(k){k.prevPage();k.updateHeight()},"aui-button")}var a=function(){var k=AJS.$("#"+d.id).find(".ghx-next");if(b()){k.attr("disabled","disabled").addClass("js-disabled")}else{k.removeAttr("disabled").removeClass("js-disabled")}};var g=i.find("#ghx-dialog-create-view-viewname");var h=new GH.ProjectPicker({selector:"#ghx-dialog-create-view-viewprojects",change:a,currentProjectId:(JIRA.API&&JIRA.API.Projects)?JIRA.API.Projects.getCurrentProjectId():null});var b=function(){return !g.val()||!h.hasValue()||h.hasErrors()};var e=function(k){if(b()){var l=AJS.$("#"+k.id).find(".ghx-next");l.attr("disabled","disabled").addClass("js-disabled");return false}return GH.Dialog.CreateView.submitPresets(k)};d.addButton("Create",e,"ghx-next aui-button");c.find("form").submit(function(){e(d);return false});GH.Dialog.addCancelButton(d);i.find(".ghx-next").attr("disabled","disabled").addClass("js-disabled");g.keyup(a)};GH.Dialog.CreateView.setupTabs=function(b){AJS.tabs.setup();var a=GH.Dialog.CreateView.State.getPreferredTab();if(a){AJS.tabs.change(AJS.$("a[href="+a+"]"))}AJS.$("#"+b+" .menu-item").click(function(){var c=AJS.$(this);GH.Dialog.CreateView.State.setPreferredTab(c.find("a:first").attr("href"))})};GH.Dialog.CreateView.submitPresets=function(d){AJS.$(d.getCurrentPanel().body).find(".ghx-error").remove();var e=d.selectedPreset;var c={name:AJS.$("#ghx-dialog-create-view-viewname").val(),projectIds:AJS.$("#ghx-dialog-create-view-viewprojects").val(),preset:e};var b={name:"#ghx-dialog-create-view-viewname",projectIds:"#ghx-dialog-create-view-viewprojects",preset:e};var a=function(f){if(e=="scrum"){GH.Dialog.CreateView.handleCreateResult(f,function(g){return GH.RapidBoard.gotoRapidBoardPage(g,"planning")},"preset",e)}else{GH.Dialog.CreateView.handleCreateResult(f,GH.RapidBoard.gotoRapidBoardPage,"preset",e)}};GH.Ajax.post({url:"/rapidview/create/presets",data:c,errorContextMap:b}).done(a)};GH.Dialog.CreateView.submitAdvanced=function(e){var b=AJS.$("#ghx-view-name");var d=b.val();var a=AJS.$("#ghx-create-filter-select");if(!GH.Validation.notBlank(b,"Name is a required field")){e.enableControls();return}if(!GH.Validation.notBlank(a,"A saved filter is required","#ghx-filter-error")){e.enableControls();return}var c=a.val()||[];GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:d,filterId:c[0]},errorContextMap:{name:"#ghx-view-name",filterId:"#ghx-create-filter-select"}}).done(function(f){GH.Dialog.CreateView.handleCreateResult(f,GH.RapidBoard.gotoRapidViewConfiguration,"advanced","advanced")}).fail(e.enableControls)};GH.Dialog.CreateView.handleCreateResult=function(a,b,d,c){GH.Dialog.CreateView.analytics.trigger("complete",c);var e=d!=c?c:false;GH.PersistentMessages.CreateViewMessage.setView(a.success.id,a.success.name,d,e);b(a.success.id)};GH.Dialog.CreateView.updatePermissionInfo=function(a){var b=a!=null?GH.tpl.rapid.view.renderPermissionInfo({savedFilter:a}):"";AJS.$("#ghx-create-permissioninfo-container").html(b)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateViewState.js' */
GH.Dialog.CreateView.State={};GH.Dialog.CreateView.State.data={};GH.Dialog.CreateView.State.setPreferredTab=function(a){GH.storage.put("gh.dialog.createView.preferredTab",a,true)};GH.Dialog.CreateView.State.getPreferredTab=function(){return GH.storage.get("gh.dialog.createView.preferredTab",true)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/BoardAdminsPicker.js' */
GH.RapidBoard.BoardAdminsPicker=function(a){this.selector=a.selector;this.change=a.change;this.initialData=a.initialData;this.editData=a.editData;this.blur=a.blur};GH.RapidBoard.BoardAdminsPicker.prototype.show=function(){var a=AJS.$(this.selector);this.select=a;this.multiselect=new AJS.MultiSelect({element:a,width:400,errorMessage:"",itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+GH.Ajax.REST_URL_BASE+"/rapidviewconfig/boardadminspicker?maxResults=15",formatResponse:function(b){var d;var c=new AJS.GroupDescriptor({weight:0,label:"Groups"});var e=new AJS.GroupDescriptor({weight:1,label:"Users"});_.each(b.users,function(f){f.key=f.key||f.name;var g=f.displayName+" ("+f.name+")";d=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("user",f.key,g,g);e.addItem(d)});_.each(b.groups,function(f){d=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("group",f.name,f.name,f.name);c.addItem(d)});return[c,e]},query:true}});this.multiselect._addMultipleItems(this.initialData);this.select.bind("unselect",this.change);this.select.bind("change",this.change);this.multiselect.$field.focus();this.multiselect.$field.blur(this.blur)};GH.RapidBoard.BoardAdminsPicker.prototype.getAjaxValue=function(){var b=this.getValue();var a={userKeys:[],groupKeys:[]};if(b==null){return a}_.each(b,function(e){var f=e.split(":");var d=f[0],c=f[1];if(f.length<2){return}if(d=="user"){a.userKeys.push(c)}if(d=="group"){a.groupKeys.push(c)}});return a};GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor=function(d,c,a,b){return new AJS.ItemDescriptor({value:d+":"+c,label:a,html:AJS.escapeHTML(String(b))})};GH.RapidBoard.BoardAdminsPicker.prototype.hasValue=function(){return !!this.select.val()};GH.RapidBoard.BoardAdminsPicker.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0};GH.RapidBoard.BoardAdminsPicker.prototype.getValue=function(){return this.select.val()};GH.RapidBoard.BoardAdminsPicker.prototype.getElement=function(){return this.select};GH.RapidBoard.BoardAdminsPicker.sortModel=function(a){var b=function(d,c){return d.displayName.toLowerCase().localeCompare(c.displayName.toLowerCase())};return{userKeys:a.userKeys.sort(b),groupKeys:a.groupKeys.sort(b)}};GH.RapidBoard.BoardAdminsPicker.getOrderedUnion=function(a){var b=GH.RapidBoard.BoardAdminsPicker.sortModel(a);return _.union(b.groupKeys,b.userKeys)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.soy' */
// This file was automatically generated from FindView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.findviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.findviewdialog == 'undefined') { GH.tpl.findviewdialog = {}; }


GH.tpl.findviewdialog.renderFindExistingView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml("Board Name") + '<span class="aui-icon icon-required"></span></label><select id="ghx-welcome-find-viewname" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Start typing to get a list of possible matches.") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.findviewdialog.renderFindExistingView.soyTemplateName = 'GH.tpl.findviewdialog.renderFindExistingView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.js' */
GH.Dialog.FindView={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialog.FindView.analytics=new a("gh.welcome.find.view")})();GH.Dialog.FindView.init=function(){GH.Dialog.registerDialog(".js-find-view",GH.Dialog.FindView.openFindExistingViewDialog)};GH.Dialog.FindView.openFindExistingViewDialog=function(){var a=function(c){GH.Dialog.FindView.analytics.trigger("cancel",c.curpage.toString())};var b=GH.Dialog.create({width:600,height:215,id:"ghx-welcome-dialog-view-find",onCancelFn:a});b.eventCategory="gh.welcome.find.view";GH.Dialog.FindView.analytics.trigger("start");GH.Dialog.FindView.showFindViewStep(b);b.gotoPage(0);b.gotoPanel(0);b.show();AJS.$("#ghx-welcome-find-viewname-field").focus();AJS.$(b.getCurrentPanel().body).trigger("contentRefresh")};GH.Dialog.FindView.showFindViewStep=function(a){a.addHeader("Find an Existing Board");AJS.$("#"+a.id).addClass("ghx-dialog");var c=AJS.$(GH.tpl.findviewdialog.renderFindExistingView());a.addPanel("Find an Existing Board",c,"ghx-welcome-page");a.addButton("Use",GH.Dialog.FindView.validateViewFind,"aui-button");c.find("form").submit(function(){GH.Dialog.FindView.validateViewFind(a);return false});var b=new AJS.SingleSelect({element:AJS.$("#ghx-welcome-find-viewname"),width:300,removeOnUnSelect:true,overlabel:"Start typing for names",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:true,url:GH.Ajax.buildRestUrl("/rapidviews/list.json"),formatResponse:function(d){var e=[];AJS.$(d.views).each(function(){e.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name))}))});return e}}});GH.Dialog.addCancelButton(a)};GH.Dialog.FindView.validateViewFind=function(d){var c={id:AJS.$("#ghx-welcome-find-viewname").val()};var b={viewName:"#ghx-welcome-find-viewname"};var a=function(){GH.Dialog.FindView.analytics.trigger("complete");GH.RapidBoard.gotoRapidBoardPage(c.id)};AJS.$(d.getCurrentPanel().body).find(".ghx-error").remove();GH.Ajax.get({url:"welcome/validateViewFind",data:c,errorContextMap:b},"validateViewFind").done(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/Avatar.soy' */
// This file was automatically generated from Avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.avatar.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.avatar == 'undefined') { GH.tpl.avatar = {}; }


GH.tpl.avatar.renderIssueAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.hasCustomUserAvatar) ? GH.tpl.avatar.renderCustomUserAvatar({avatarUrl: opt_data.issue.avatarUrl, tooltipHtml: opt_data.tooltipHtml}) : (opt_data.issue.autoUserAvatar) ? GH.tpl.avatar.renderAutoUserAvatar({color: opt_data.issue.autoUserAvatar.color, letter: opt_data.issue.autoUserAvatar.letter, tooltipHtml: opt_data.tooltipHtml, borderColor: opt_data.drawAvatarTextBorder ? opt_data.issue.autoUserAvatar.color : null}) : '');
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderIssueAvatar.soyTemplateName = 'GH.tpl.avatar.renderIssueAvatar';
}


GH.tpl.avatar.renderCustomUserAvatar = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.avatarUrl) + '" class="ghx-avatar-img"' + ((opt_data.tooltipHtml) ? 'alt="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderCustomUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderCustomUserAvatar';
}


GH.tpl.avatar.renderAutoUserAvatar = function(opt_data, opt_ignored) {
  return '<span class="ghx-avatar-img" style="background-color: ' + soy.$$escapeHtml(opt_data.color) + '; ' + ((opt_data.borderColor) ? ' border: 1px solid ' + soy.$$escapeHtml(opt_data.borderColor) + ' ' : '') + '"' + ((opt_data.tooltipHtml) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.letter) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderAutoUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderAutoUserAvatar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/StatusRenderer.soy' */
// This file was automatically generated from StatusRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.status.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.status == 'undefined') { GH.tpl.status = {}; }


GH.tpl.status.renderIcon = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy3 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy3, maxWidth: opt_data.maxWidth}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderIcon.soyTemplateName = 'GH.tpl.status.renderIcon';
}


GH.tpl.status.renderText = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy22 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy22, maxWidth: opt_data.maxWidth}) : soy.$$escapeHtml(opt_data.status.name) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderText.soyTemplateName = 'GH.tpl.status.renderText';
}


GH.tpl.status.renderFull = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy35 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy35}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' + soy.$$escapeHtml(opt_data.status.name) + '</img>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderFull.soyTemplateName = 'GH.tpl.status.renderFull';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/EpicLinkRenderer.soy' */
// This file was automatically generated from EpicLinkRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.epicLink.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.epicLink == 'undefined') { GH.tpl.field.epicLink = {}; }


GH.tpl.field.epicLink.renderEpicLink = function(opt_data, opt_ignored) {
  var output = '';
  var name__soy3 = '' + GH.tpl.epic.getEpicNameStringNoAutoescape({epicLabel: opt_data.field.text, epicKey: opt_data.field.epicKey});
  output += (opt_data.removableIfAllowed && opt_data.field.canRemoveEpic) ? aui.labels.label({extraClasses: ['js-epic-remove', opt_data.field.epicColor], isCloseable: true, closeIconText: "Remove from epic", text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}}) : aui.labels.label({extraClasses: [opt_data.field.epicColor], text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLink.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLink';
}


GH.tpl.field.epicLink.renderEpicLinkFromIssue = function(opt_data, opt_ignored) {
  return '' + aui.labels.label({extraClasses: opt_data.extraClasses + ' ' + opt_data.epic.epicColor, text: opt_data.epic.epicLabel, extraAttributes: {title: opt_data.epic.epicLabel, 'data-epickey': opt_data.epic.key}});
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLinkFromIssue.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLinkFromIssue';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-3.3.8.js' */
d3=function(){var hp={version:"3.3.8"};if(!Date.now){Date.now=function(){return +new Date()}}var bN=[].slice,dS=function(e){return bN.call(e)};var bM=document,ed=bM.documentElement,fH=window;try{dS(ed.childNodes)[0].nodeType}catch(hf){dS=function(ig){var e=ig.length,ih=new Array(e);while(e--){ih[e]=ig[e]}return ih}}try{bM.createElement("div").style.setProperty("opacity",0,"")}catch(fD){var dQ=fH.Element.prototype,b0=dQ.setAttribute,g7=dQ.setAttributeNS,dC=fH.CSSStyleDeclaration.prototype,gR=dC.setProperty;dQ.setAttribute=function(e,ig){b0.call(this,e,ig+"")};dQ.setAttributeNS=function(ih,e,ig){g7.call(this,ih,e,ig+"")};dC.setProperty=function(e,ih,ig){gR.call(this,e,ih+"",ig)}}hp.ascending=function(ig,e){return ig<e?-1:ig>e?1:ig>=e?0:NaN};hp.descending=function(ig,e){return e<ig?-1:e>ig?1:e>=ig?0:NaN};hp.min=function(ik,ii){var ih=-1,ij=ik.length,ig,e;if(arguments.length===1){while(++ih<ij&&!((ig=ik[ih])!=null&&ig<=ig)){ig=undefined}while(++ih<ij){if((e=ik[ih])!=null&&ig>e){ig=e}}}else{while(++ih<ij&&!((ig=ii.call(ik,ik[ih],ih))!=null&&ig<=ig)){ig=undefined}while(++ih<ij){if((e=ii.call(ik,ik[ih],ih))!=null&&ig>e){ig=e}}}return ig};hp.max=function(ik,ii){var ih=-1,ij=ik.length,ig,e;if(arguments.length===1){while(++ih<ij&&!((ig=ik[ih])!=null&&ig<=ig)){ig=undefined}while(++ih<ij){if((e=ik[ih])!=null&&e>ig){ig=e}}}else{while(++ih<ij&&!((ig=ii.call(ik,ik[ih],ih))!=null&&ig<=ig)){ig=undefined}while(++ih<ij){if((e=ii.call(ik,ik[ih],ih))!=null&&e>ig){ig=e}}}return ig};hp.extent=function(il,ii){var ih=-1,ik=il.length,ig,e,ij;if(arguments.length===1){while(++ih<ik&&!((ig=ij=il[ih])!=null&&ig<=ig)){ig=ij=undefined}while(++ih<ik){if((e=il[ih])!=null){if(ig>e){ig=e}if(ij<e){ij=e}}}}else{while(++ih<ik&&!((ig=ij=ii.call(il,il[ih],ih))!=null&&ig<=ig)){ig=undefined}while(++ih<ik){if((e=ii.call(il,il[ih],ih))!=null){if(ig>e){ig=e}if(ij<e){ij=e}}}}return[ig,ij]};hp.sum=function(ik,ii){var ih=0,ij=ik.length,e,ig=-1;if(arguments.length===1){while(++ig<ij){if(!isNaN(e=+ik[ig])){ih+=e}}}else{while(++ig<ij){if(!isNaN(e=+ii.call(ik,ik[ig],ig))){ih+=e}}}return ih};function hu(e){return e!=null&&!isNaN(e)}hp.mean=function(il,ij){var ik=il.length,ig,e=0,ii=-1,ih=0;if(arguments.length===1){while(++ii<ik){if(hu(ig=il[ii])){e+=(ig-e)/++ih}}}else{while(++ii<ik){if(hu(ig=ij.call(il,il[ii],ii))){e+=(ig-e)/++ih}}}return ih?e:undefined};hp.quantile=function(ih,il){var ii=(ih.length-1)*il+1,ij=Math.floor(ii),ig=+ih[ij-1],ik=ii-ij;return ik?ig+ik*(ih[ij]-ig):ig};hp.median=function(ig,e){if(arguments.length>1){ig=ig.map(e)}ig=ig.filter(hu);return ig.length?hp.quantile(ig.sort(hp.ascending),0.5):undefined};hp.bisector=function(e){return{left:function(ih,ig,ik,ij){if(arguments.length<3){ik=0}if(arguments.length<4){ij=ih.length}while(ik<ij){var ii=ik+ij>>>1;if(e.call(ih,ih[ii],ii)<ig){ik=ii+1}else{ij=ii}}return ik},right:function(ih,ig,ik,ij){if(arguments.length<3){ik=0}if(arguments.length<4){ij=ih.length}while(ik<ij){var ii=ik+ij>>>1;if(ig<e.call(ih,ih[ii],ii)){ij=ii}else{ik=ii+1}}return ik}}};var gv=hp.bisector(function(e){return e});hp.bisectLeft=gv.left;hp.bisect=hp.bisectRight=gv.right;hp.shuffle=function(ii){var e=ii.length,ih,ig;while(e){ig=Math.random()*e--|0;ih=ii[e],ii[e]=ii[ig],ii[ig]=ih}return ii};hp.permute=function(ii,ig){var ih=ig.length,e=new Array(ih);while(ih--){e[ih]=ii[ig[ih]]}return e};hp.pairs=function(ik){var e=0,ij=ik.length-1,ii,ih=ik[0],ig=new Array(ij<0?0:ij);while(e<ij){ig[e]=[ii=ih,ih=ik[++e]]}return ig};hp.zip=function(){if(!(ik=arguments.length)){return[]}for(var ii=-1,e=hp.min(arguments,fm),ih=new Array(e);++ii<e;){for(var ig=-1,ik,ij=ih[ii]=new Array(ik);++ig<ik;){ij[ig]=arguments[ig][ii]}}return ih};function fm(e){return e.length}hp.transpose=function(e){return hp.zip.apply(hp,e)};hp.keys=function(ih){var ig=[];for(var e in ih){ig.push(e)}return ig};hp.values=function(ih){var e=[];for(var ig in ih){e.push(ih[ig])}return e};hp.entries=function(ih){var e=[];for(var ig in ih){e.push({key:ig,value:ih[ig]})}return e};hp.merge=function(ij){var il=ij.length,ig,ii=-1,ih=0,e,ik;while(++ii<il){ih+=ij[ii].length}e=new Array(ih);while(--il>=0){ik=ij[il];ig=ik.length;while(--ig>=0){e[--ih]=ik[ig]}}return e};var cI=Math.abs;hp.range=function(il,ij,ik){if(arguments.length<3){ik=1;if(arguments.length<2){ij=il;il=0}}if((ij-il)/ik===Infinity){throw new Error("infinite range")}var ig=[],e=gq(cI(ik)),ii=-1,ih;il*=e,ij*=e,ik*=e;if(ik<0){while((ih=il+ik*++ii)>ij){ig.push(ih/e)}}else{while((ih=il+ik*++ii)<ij){ig.push(ih/e)}}return ig};function gq(e){var ig=1;while(e*ig%1){ig*=10}return ig}function h5(ii,ih){try{for(var ig in ih){Object.defineProperty(ii.prototype,ig,{value:ih[ig],enumerable:false})}}catch(ij){ii.prototype=ih}}hp.map=function(e){var ih=new aI();if(e instanceof aI){e.forEach(function(ii,ij){ih.set(ii,ij)})}else{for(var ig in e){ih.set(ig,e[ig])}}return ih};function aI(){}h5(aI,{has:function(e){return h7+e in this},get:function(e){return this[h7+e]},set:function(e,ig){return this[h7+e]=ig},remove:function(e){e=h7+e;return e in this&&delete this[e]},keys:function(){var e=[];this.forEach(function(ig){e.push(ig)});return e},values:function(){var e=[];this.forEach(function(ig,ih){e.push(ih)});return e},entries:function(){var e=[];this.forEach(function(ig,ih){e.push({key:ig,value:ih})});return e},forEach:function(ig){for(var e in this){if(e.charCodeAt(0)===dG){ig.call(this,e.substring(1),this[e])}}}});var h7="\x00",dG=h7.charCodeAt(0);hp.nest=function(){var ii={},ih=[],il=[],ig,ij;function ik(io,iw,iu){if(iu>=ih.length){return ij?ij.call(ii,iw):ig?iw.sort(ig):iw}var iv=-1,im=iw.length,iy=ih[iu++],it,ir,iq,ip=new aI(),ix;while(++iv<im){if(ix=ip.get(it=iy(ir=iw[iv]))){ix.push(ir)}else{ip.set(it,[ir])}}if(io){ir=io();iq=function(iA,iz){ir.set(iA,ik(io,iz,iu))}}else{ir={};iq=function(iA,iz){ir[iA]=ik(io,iz,iu)}}ip.forEach(iq);return ir}function e(io,ip){if(ip>=ih.length){return io}var iq=[],im=il[ip++];io.forEach(function(ir,it){iq.push({key:ir,values:e(it,ip)})});return im?iq.sort(function(it,ir){return im(it.key,ir.key)}):iq}ii.map=function(io,im){return ik(im,io,0)};ii.entries=function(im){return e(ik(hp.map,im,0),0)};ii.key=function(im){ih.push(im);return ii};ii.sortKeys=function(im){il[ih.length-1]=im;return ii};ii.sortValues=function(im){ig=im;return ii};ii.rollup=function(im){ij=im;return ii};return ii};hp.set=function(ii){var ih=new du();if(ii){for(var e=0,ig=ii.length;e<ig;++e){ih.add(ii[e])}}return ih};function du(){}h5(du,{has:function(e){return h7+e in this},add:function(e){this[h7+e]=true;return e},remove:function(e){e=h7+e;return e in this&&delete this[e]},values:function(){var e=[];this.forEach(function(ig){e.push(ig)});return e},forEach:function(ig){for(var e in this){if(e.charCodeAt(0)===dG){ig.call(this,e.substring(1))}}}});hp.behavior={};hp.rebind=function(ih,ig){var e=1,ij=arguments.length,ii;while(++e<ij){ih[ii=arguments[e]]=eD(ih,ig,ig[ii])}return ih};function eD(ig,e,ih){return function(){var ii=ih.apply(e,arguments);return ii===e?ig:ii}}function dl(ih,ig){if(ig in ih){return ig}ig=ig.charAt(0).toUpperCase()+ig.substring(1);for(var ii=0,ij=L.length;ii<ij;++ii){var e=L[ii]+ig;if(e in ih){return e}}}var L=["webkit","ms","moz","Moz","o","O"];function aH(){}hp.dispatch=function(){var e=new eY(),ig=-1,ih=arguments.length;while(++ig<ih){e[arguments[ig]]=fp(e)}return e};function eY(){}eY.prototype.on=function(ih,ii){var ig=ih.indexOf("."),e="";if(ig>=0){e=ih.substring(ig+1);ih=ih.substring(0,ig)}if(ih){return arguments.length<2?this[ih].on(e):this[ih].on(e,ii)}if(arguments.length===2){if(ii==null){for(ih in this){if(this.hasOwnProperty(ih)){this[ih].on(e,null)}}}return this}};function fp(e){var ih=[],ig=new aI();function ii(){var il=ih,ik=-1,im=il.length,ij;while(++ik<im){if(ij=il[ik].on){ij.apply(this,arguments)}}return e}ii.on=function(ik,im){var ij=ig.get(ik),il;if(arguments.length<2){return ij&&ij.on}if(ij){ij.on=null;ih=ih.slice(0,il=ih.indexOf(ij)).concat(ih.slice(il+1));ig.remove(ik)}if(im){ih.push(ig.set(ik,{on:im}))}return e};return ii}hp.event=null;function w(){hp.event.preventDefault()}function ag(){var ih=hp.event,ig;while(ig=ih.sourceEvent){ih=ig}return ih}function hk(ih){var e=new eY(),ig=0,ii=arguments.length;while(++ig<ii){e[arguments[ig]]=fp(e)}e.of=function(ik,ij){return function(il){try{var im=il.sourceEvent=hp.event;il.target=ih;hp.event=il;e[il.type].apply(ik,ij)}finally{hp.event=im}}};return e}hp.requote=function(e){return e.replace(dc,"\\$&")};var dc=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var h8={}.__proto__?function(ig,e){ig.__proto__=e}:function(ig,e){for(var ih in e){ig[ih]=e[ih]}};function d4(e){h8(e,d2);return e}var dt=function(e,ig){return ig.querySelector(e)},ge=function(e,ig){return ig.querySelectorAll(e)},c=ed[dl(ed,"matchesSelector")],a=function(ig,e){return c.call(ig,e)};if(typeof Sizzle==="function"){dt=function(e,ig){return Sizzle(e,ig)[0]||null};ge=function(e,ig){return Sizzle.uniqueSort(Sizzle(e,ig))};a=Sizzle.matchesSelector}hp.selection=function(){return gW};var d2=hp.selection.prototype=[];d2.select=function(ik){var ih=[],ip,e,io,ii;ik=y(ik);for(var il=-1,ij=this.length;++il<ij;){ih.push(ip=[]);ip.parentNode=(io=this[il]).parentNode;for(var im=-1,ig=io.length;++im<ig;){if(ii=io[im]){ip.push(e=ik.call(ii,ii.__data__,im,il));if(e&&"__data__" in ii){e.__data__=ii.__data__}}else{ip.push(null)}}}return d4(ih)};function y(e){return typeof e==="function"?e:function(){return dt(e,this)}}d2.selectAll=function(ij){var ig=[],io,ih;ij=c4(ij);for(var ik=-1,ii=this.length;++ik<ii;){for(var im=this[ik],il=-1,e=im.length;++il<e;){if(ih=im[il]){ig.push(io=dS(ij.call(ih,ih.__data__,il,ik)));io.parentNode=ih}}}return d4(ig)};function c4(e){return typeof e==="function"?e:function(){return ge(e,this)}}var ek={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};hp.ns={prefix:ek,qualify:function(e){var ig=e.indexOf(":"),ih=e;if(ig>=0){ih=e.substring(0,ig);e=e.substring(ig+1)}return ek.hasOwnProperty(ih)?{space:ek[ih],local:e}:e}};d2.attr=function(e,ih){if(arguments.length<2){if(typeof e==="string"){var ig=this.node();e=hp.ns.qualify(e);return e.local?ig.getAttributeNS(e.space,e.local):ig.getAttribute(e)}for(ih in e){this.each(bs(ih,e[ih]))}return this}return this.each(bs(e,ih))};function bs(ih,il){ih=hp.ns.qualify(ih);function ig(){this.removeAttribute(ih)}function im(){this.removeAttributeNS(ih.space,ih.local)}function ik(){this.setAttribute(ih,il)}function ij(){this.setAttributeNS(ih.space,ih.local,il)}function e(){var io=il.apply(this,arguments);if(io==null){this.removeAttribute(ih)}else{this.setAttribute(ih,io)}}function ii(){var io=il.apply(this,arguments);if(io==null){this.removeAttributeNS(ih.space,ih.local)}else{this.setAttributeNS(ih.space,ih.local,io)}}return il==null?ih.local?im:ig:typeof il==="function"?ih.local?ii:e:ih.local?ij:ik}function cJ(e){return e.trim().replace(/\s+/g," ")}d2.classed=function(e,ii){if(arguments.length<2){if(typeof e==="string"){var ih=this.node(),ij=(e=e.trim().split(/^|\s+/g)).length,ig=-1;if(ii=ih.classList){while(++ig<ij){if(!ii.contains(e[ig])){return false}}}else{ii=ih.getAttribute("class");while(++ig<ij){if(!gS(e[ig]).test(ii)){return false}}}return true}for(ii in e){this.each(gJ(ii,e[ii]))}return this}return this.each(gJ(e,ii))};function gS(e){return new RegExp("(?:^|\\s+)"+hp.requote(e)+"(?:\\s+|$)","g")}function gJ(ig,ii){ig=ig.trim().split(/\s+/).map(h4);var ij=ig.length;function e(){var ik=-1;while(++ik<ij){ig[ik](this,ii)}}function ih(){var il=-1,ik=ii.apply(this,arguments);while(++il<ij){ig[il](this,ik)}}return typeof ii==="function"?ih:e}function h4(e){var ig=gS(e);return function(ih,ii){if(ij=ih.classList){return ii?ij.add(e):ij.remove(e)}var ij=ih.getAttribute("class")||"";if(ii){ig.lastIndex=0;if(!ig.test(ij)){ih.setAttribute("class",cJ(ij+" "+e))}}else{ih.setAttribute("class",cJ(ij.replace(ig," ")))}}}d2.style=function(e,ih,ig){var ii=arguments.length;if(ii<3){if(typeof e!=="string"){if(ii<2){ih=""}for(ig in e){this.each(fU(ig,e[ig],ih))}return this}if(ii<2){return fH.getComputedStyle(this.node(),null).getPropertyValue(e)}ig=""}return this.each(fU(e,ih,ig))};function fU(ih,ik,ii){function ig(){this.style.removeProperty(ih)}function ij(){this.style.setProperty(ih,ik,ii)}function e(){var il=ik.apply(this,arguments);if(il==null){this.style.removeProperty(ih)}else{this.style.setProperty(ih,il,ii)}}return ik==null?ig:typeof ik==="function"?e:ij}d2.property=function(e,ig){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]}for(ig in e){this.each(hI(ig,e[ig]))}return this}return this.each(hI(e,ig))};function hI(ig,ii){function e(){delete this[ig]}function ih(){this[ig]=ii}function ij(){var ik=ii.apply(this,arguments);if(ik==null){delete this[ig]}else{this[ig]=ik}}return ii==null?e:typeof ii==="function"?ij:ih}d2.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ig=e.apply(this,arguments);this.textContent=ig==null?"":ig}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};d2.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ig=e.apply(this,arguments);this.innerHTML=ig==null?"":ig}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};d2.append=function(e){e=aD(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function aD(e){return typeof e==="function"?e:(e=hp.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}d2.insert=function(e,ig){e=aD(e);ig=y(ig);return this.select(function(){return this.insertBefore(e.apply(this,arguments),ig.apply(this,arguments)||null)})};d2.remove=function(){return this.each(function(){var e=this.parentNode;if(e){e.removeChild(this)}})};d2.data=function(im,ip){var ij=-1,ig=this.length,io,ih;if(!arguments.length){im=new Array(ig=(io=this[0]).length);while(++ij<ig){if(ih=io[ij]){im[ij]=ih.__data__}}return im}function ik(iA,iv){var ix,ir=iA.length,iu=iv.length,iz=Math.min(ir,iu),iE=new Array(iu),iB=new Array(iu),iy=new Array(ir),it,iq;if(ip){var iF=new aI(),iC=new aI(),iD=[],iw;for(ix=-1;++ix<ir;){iw=ip.call(it=iA[ix],it.__data__,ix);if(iF.has(iw)){iy[ix]=it}else{iF.set(iw,it)}iD.push(iw)}for(ix=-1;++ix<iu;){iw=ip.call(iv,iq=iv[ix],ix);if(it=iF.get(iw)){iE[ix]=it;it.__data__=iq}else{if(!iC.has(iw)){iB[ix]=M(iq)}}iC.set(iw,iq);iF.remove(iw)}for(ix=-1;++ix<ir;){if(iF.has(iD[ix])){iy[ix]=iA[ix]}}}else{for(ix=-1;++ix<iz;){it=iA[ix];iq=iv[ix];if(it){it.__data__=iq;iE[ix]=it}else{iB[ix]=M(iq)}}for(;ix<iu;++ix){iB[ix]=M(iv[ix])}for(;ix<ir;++ix){iy[ix]=iA[ix]}}iB.update=iE;iB.parentNode=iE.parentNode=iy.parentNode=iA.parentNode;il.push(iB);ii.push(iE);e.push(iy)}var il=bT([]),ii=d4([]),e=d4([]);if(typeof im==="function"){while(++ij<ig){ik(io=this[ij],im.call(io,io.parentNode.__data__,ij))}}else{while(++ij<ig){ik(io=this[ij],im)}}ii.enter=function(){return il};ii.exit=function(){return e};return ii};function M(e){return{__data__:e}}d2.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};d2.filter=function(e){var ih=[],io,im,ii;if(typeof e!=="function"){e=a8(e)}for(var ik=0,ij=this.length;ik<ij;ik++){ih.push(io=[]);io.parentNode=(im=this[ik]).parentNode;for(var il=0,ig=im.length;il<ig;il++){if((ii=im[il])&&e.call(ii,ii.__data__,il)){io.push(ii)}}}return d4(ih)};function a8(e){return function(){return a(this,e)}}d2.order=function(){for(var ig=-1,e=this.length;++ig<e;){for(var ik=this[ig],ih=ik.length-1,ii=ik[ih],ij;--ih>=0;){if(ij=ik[ih]){if(ii&&ii!==ij.nextSibling){ii.parentNode.insertBefore(ij,ii)}ii=ij}}}return this};d2.sort=function(ig){ig=gQ.apply(this,arguments);for(var ih=-1,e=this.length;++ih<e;){this[ih].sort(ig)}return this.order()};function gQ(e){if(!arguments.length){e=hp.ascending}return function(ih,ig){return ih&&ig?e(ih.__data__,ig.__data__):!ih-!ig}}d2.each=function(e){return cK(this,function(ii,ih,ig){e.call(ii,ii.__data__,ih,ig)})};function cK(ig,im){for(var ih=0,e=ig.length;ih<e;ih++){for(var ik=ig[ih],ii=0,il=ik.length,ij;ii<il;ii++){if(ij=ik[ii]){im(ij,ii,ih)}}}return ig}d2.call=function(ig){var e=dS(arguments);ig.apply(e[0]=this,e);return this};d2.empty=function(){return !this.node()};d2.node=function(){for(var ig=0,e=this.length;ig<e;ig++){for(var ij=this[ig],ih=0,ik=ij.length;ih<ik;ih++){var ii=ij[ih];if(ii){return ii}}}return null};d2.size=function(){var e=0;this.each(function(){++e});return e};function bT(e){h8(e,fc);return e}var fc=[];hp.selection.enter=bT;hp.selection.enter.prototype=fc;fc.append=d2.append;fc.empty=d2.empty;fc.node=d2.node;fc.call=d2.call;fc.size=d2.size;fc.select=function(ik){var ih=[],iq,e,io,ip,ij;for(var il=-1,ii=this.length;++il<ii;){io=(ip=this[il]).update;ih.push(iq=[]);iq.parentNode=ip.parentNode;for(var im=-1,ig=ip.length;++im<ig;){if(ij=ip[im]){iq.push(io[im]=e=ik.call(ip.parentNode,ij.__data__,im,il));e.__data__=ij.__data__}else{iq.push(null)}}}return d4(ih)};fc.insert=function(e,ig){if(arguments.length<2){ig=gA(this)}return d2.insert.call(this,e,ig)};function gA(ih){var e,ig;return function(im,ij,ii){var il=ih[ii].update,io=il.length,ik;if(ii!=ig){ig=ii,e=0}if(ij>=e){e=ij+1}while(!(ik=il[e])&&++e<io){}return ik}}d2.transition=function(){var e=at||++hd,ih=[],ip,ii,im=ea||{time:Date.now(),ease:ax,delay:0,duration:250};for(var ik=-1,ij=this.length;++ik<ij;){ih.push(ip=[]);for(var io=this[ik],il=-1,ig=io.length;++il<ig;){if(ii=io[il]){fK(ii,il,e,im)}ip.push(ii)}}return gU(ih,e)};d2.interrupt=function(){return this.each(cX)};function cX(){var e=this.__transition__;if(e){++e.active}}hp.select=function(e){var ig=[typeof e==="string"?dt(e,bM):e];ig.parentNode=ed;return d4([ig])};hp.selectAll=function(e){var ig=dS(typeof e==="string"?ge(e,bM):e);ig.parentNode=ed;return d4([ig])};var gW=hp.select(ed);d2.on=function(ig,ih,e){var ii=arguments.length;if(ii<3){if(typeof ig!=="string"){if(ii<2){ih=false}for(e in ig){this.each(l(e,ig[e],ih))}return this}if(ii<2){return(ii=this.node()["__on"+ig])&&ii._}e=false}return this.each(l(ig,ih,e))};function l(io,ii,ip){var e="__on"+io,ik=io.indexOf("."),ig=fy;if(ik>0){io=io.substring(0,ik)}var ih=bJ.get(io);if(ih){io=ih,ig=ar}function ij(){var iq=this[e];if(iq){this.removeEventListener(io,iq,iq.$);delete this[e]}}function im(){var iq=ig(ii,dS(arguments));ij.call(this);this.addEventListener(io,this[e]=iq,iq.$=ip);iq._=ii}function il(){var iu=new RegExp("^__on([^.]+)"+hp.requote(io)+"$"),it;for(var ir in this){if(it=ir.match(iu)){var iq=this[ir];this.removeEventListener(it[1],iq,iq.$);delete this[ir]}}}return ik?ii?im:ij:ii?aH:il}var bJ=hp.map({mouseenter:"mouseover",mouseleave:"mouseout"});bJ.forEach(function(e){if("on"+e in bM){bJ.remove(e)}});function fy(ig,e){return function(ih){var ii=hp.event;hp.event=ih;e[0]=this.__data__;try{ig.apply(this,e)}finally{hp.event=ii}}}function ar(ih,e){var ig=fy(ih,e);return function(ik){var ij=this,ii=ik.relatedTarget;if(!ii||ii!==ij&&!(ii.compareDocumentPosition(ij)&8)){ig.call(ij,ik)}}}var ca=dl(ed.style,"userSelect"),gO=0;function bK(){var ij=".dragsuppress-"+ ++gO,ih="touchmove"+ij,ii="selectstart"+ij,il="dragstart"+ij,im="click"+ij,ig=hp.select(fH).on(ih,w).on(ii,w).on(il,w),ik=ed.style,e=ik[ca];ik[ca]="none";return function(io){ig.on(ij,null);ik[ca]=e;if(io){function ip(){ig.on(im,null)}ig.on(im,function(){w();ip()},true);setTimeout(ip,0)}}}hp.mouse=function(e){return aY(e,ag())};var cG=/WebKit/.test(fH.navigator.userAgent)?-1:0;function aY(ii,il){if(il.changedTouches){il=il.changedTouches[0]}var ij=ii.ownerSVGElement||ii;if(ij.createSVGPoint){var ig=ij.createSVGPoint();if(cG<0&&(fH.scrollX||fH.scrollY)){ij=hp.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ih=ij[0][0].getScreenCTM();cG=!(ih.f||ih.e);ij.remove()}if(cG){ig.x=il.pageX,ig.y=il.pageY}else{ig.x=il.clientX,ig.y=il.clientY}ig=ig.matrixTransform(ii.getScreenCTM().inverse());return[ig.x,ig.y]}var ik=ii.getBoundingClientRect();return[il.clientX-ik.left-ii.clientLeft,il.clientY-ik.top-ii.clientTop]}hp.touches=function(e,ig){if(arguments.length<2){ig=ag().touches}return ig?dS(ig).map(function(ii){var ih=aY(e,ii);ih.identifier=ii.identifier;return ih}):[]};hp.behavior.drag=function(){var ij=hk(ii,"drag","dragstart","dragend"),e=null,ig=ih(aH,hp.mouse,"mousemove","mouseup"),im=ih(il,ik,"touchmove","touchend");function ii(){this.on("mousedown.drag",ig).on("touchstart.drag",im)}function il(){return hp.event.changedTouches[0].identifier}function ik(io,ip){return hp.touches(io).filter(function(iq){return iq.identifier===ip})[0]}function ih(ir,io,iq,ip){return function(){var ix=this,iE=ix.parentNode,iF=ij.of(ix,arguments),iD=hp.event.target,it=ir(),iv=it==null?"drag":"drag-"+it,iy=io(iE,it),iA=0,iu,iC=hp.select(fH).on(iq+"."+iv,iz).on(ip+"."+iv,iB),iw=bK();if(e){iu=e.apply(ix,arguments);iu=[iu.x-iy[0],iu.y-iy[1]]}else{iu=[0,0]}iF({type:"dragstart"});function iz(){var iI=io(iE,it),iH=iI[0]-iy[0],iG=iI[1]-iy[1];iA|=iH|iG;iy=iI;iF({type:"drag",x:iI[0]+iu[0],y:iI[1]+iu[1],dx:iH,dy:iG})}function iB(){iC.on(iq+"."+iv,null).on(ip+"."+iv,null);iw(iA&&hp.event.target===iD);iF({type:"dragend"})}}}ii.origin=function(io){if(!arguments.length){return e}e=io;return ii};return hp.rebind(ii,ij,"on")};var gk=Math.PI,gf=2*gk,eu=gk/2,gu=0.000001,eI=gu*gu,K=gk/180,hF=180/gk;function b8(e){return e>0?1:e<0?-1:0}function af(e){return e>1?0:e<-1?gk:Math.acos(e)}function cd(e){return e>1?eu:e<-1?-eu:Math.asin(e)}function d0(e){return((e=Math.exp(e))-1/e)/2}function bC(e){return((e=Math.exp(e))+1/e)/2}function fB(e){return((e=Math.exp(2*e))-1)/(e+1)}function aE(e){return(e=Math.sin(e/2))*e}var gi=Math.SQRT2,ac=2,aa=4;hp.interpolateZoom=function(ig,e){var ir=ig[0],ix=ig[1],ip=ig[2],iq=e[0],iw=e[1],im=e[2];var io=iq-ir,il=iw-ix,iy=io*io+il*il,iz=Math.sqrt(iy),ij=(im*im-ip*ip+aa*iy)/(2*ip*ac*iz),ii=(im*im-ip*ip-aa*iy)/(2*im*ac*iz),iv=Math.log(Math.sqrt(ij*ij+1)-ij),iu=Math.log(Math.sqrt(ii*ii+1)-ii),it=iu-iv,ih=(it||Math.log(im/ip))/gi;function ik(iB){var iC=iB*ih;if(it){var iD=bC(iv),iA=ip/(ac*iz)*(iD*fB(gi*iC+iv)-d0(iv));return[ir+iA*io,ix+iA*il,ip*iD/bC(gi*iC+iv)]}return[ir+iB*io,ix+iB*il,ip*Math.exp(gi*iC)]}ik.duration=ih*1000;return ik};hp.behavior.zoom=function(){var ir={x:0,y:0,k:1},iH,iJ,iw=[960,500],ih=f3,iA="mousedown.zoom",iI="mousemove.zoom",iB="mouseup.zoom",ix,iF="touchstart.zoom",io,iC=hk(ig,"zoomstart","zoom","zoomend"),iG,iE,il,ij;function ig(iL){iL.on(iA,ii).on(g6+".zoom",it).on(iI,iD).on("dblclick.zoom",ip).on(iF,ik)}ig.event=function(iL){iL.each(function(){var iN=iC.of(this,arguments),iM=ir;if(at){hp.select(this).transition().each("start.zoom",function(){ir=this.__chart__||{x:0,y:0,k:1};iy(iN)}).tween("zoom:zoom",function(){var iQ=iw[0],iP=iw[1],iO=iQ/2,iS=iP/2,iR=hp.interpolateZoom([(iO-ir.x)/ir.k,(iS-ir.y)/ir.k,iQ/ir.k],[(iO-iM.x)/iM.k,(iS-iM.y)/iM.k,iQ/iM.k]);return function(iV){var iT=iR(iV),iU=iQ/iT[2];this.__chart__=ir={x:iO-iT[0]*iU,y:iS-iT[1]*iU,k:iU};iv(iN)}}).each("end.zoom",function(){iu(iN)})}else{this.__chart__=ir;iy(iN);iv(iN);iu(iN)}})};ig.translate=function(iL){if(!arguments.length){return[ir.x,ir.y]}ir={x:+iL[0],y:+iL[1],k:ir.k};iq();return ig};ig.scale=function(iL){if(!arguments.length){return ir.k}ir={x:ir.x,y:ir.y,k:+iL};iq();return ig};ig.scaleExtent=function(iL){if(!arguments.length){return ih}ih=iL==null?f3:[+iL[0],+iL[1]];return ig};ig.center=function(iL){if(!arguments.length){return iJ}iJ=iL&&[+iL[0],+iL[1]];return ig};ig.size=function(iL){if(!arguments.length){return iw}iw=iL&&[+iL[0],+iL[1]];return ig};ig.x=function(iL){if(!arguments.length){return iE}iE=iL;iG=iL.copy();ir={x:0,y:0,k:1};return ig};ig.y=function(iL){if(!arguments.length){return ij}ij=iL;il=iL.copy();ir={x:0,y:0,k:1};return ig};function e(iL){return[(iL[0]-ir.x)/ir.k,(iL[1]-ir.y)/ir.k]}function iz(iL){return[iL[0]*ir.k+ir.x,iL[1]*ir.k+ir.y]}function im(iL){ir.k=Math.max(ih[0],Math.min(ih[1],iL))}function iK(iM,iL){iL=iz(iL);ir.x+=iM[0]-iL[0];ir.y+=iM[1]-iL[1]}function iq(){if(iE){iE.domain(iG.range().map(function(iL){return(iL-ir.x)/ir.k}).map(iG.invert))}if(ij){ij.domain(il.range().map(function(iL){return(iL-ir.y)/ir.k}).map(il.invert))}}function iy(iL){iL({type:"zoomstart"})}function iv(iL){iq();iL({type:"zoom",scale:ir.k,translate:[ir.x,ir.y]})}function iu(iL){iL({type:"zoomend"})}function ii(){var iN=this,iS=iC.of(iN,arguments),iR=hp.event.target,iP=0,iT=hp.select(fH).on(iI,iO).on(iB,iQ),iL=e(hp.mouse(iN)),iM=bK();cX.call(iN);iy(iS);function iO(){iP=1;iK(hp.mouse(iN),iL);iv(iS)}function iQ(){iT.on(iI,fH===iN?iD:null).on(iB,null);iM(iP&&hp.event.target===iR);iu(iS)}}function ik(){var iR=this,iX=iC.of(iR,arguments),iP={},iT=0,iQ,iL=hp.event.changedTouches[0].identifier,iN="touchmove.zoom-"+iL,iY="touchend.zoom-"+iL,iW=hp.select(fH).on(iN,iU).on(iY,iV),iZ=hp.select(iR).on(iA,null).on(iF,iS),iO=bK();cX.call(iR);iS();iy(iX);function iM(){var i0=hp.touches(iR);iQ=ir.k;i0.forEach(function(i1){if(i1.identifier in iP){iP[i1.identifier]=e(i1)}});return i0}function iS(){var i5=hp.event.changedTouches;for(var i6=0,i3=i5.length;i6<i3;++i6){iP[i5[i6].identifier]=null}var i7=iM(),i2=Date.now();if(i7.length===1){if(i2-io<500){var i1=i7[0],i4=iP[i1.identifier];im(ir.k*2);iK(i1,i4);w();iv(iX)}io=i2}else{if(i7.length>1){var i1=i7[0],i0=i7[1],i9=i1[0]-i0[0],i8=i1[1]-i0[1];iT=i9*i9+i8*i8}}}function iU(){var i4=hp.touches(iR),i8,i2,i7,i1;for(var i3=0,i0=i4.length;i3<i0;++i3,i1=null){i7=i4[i3];if(i1=iP[i7.identifier]){if(i2){break}i8=i7,i2=i1}}if(i1){var i6=(i6=i7[0]-i8[0])*i6+(i6=i7[1]-i8[1])*i6,i5=iT&&Math.sqrt(i6/iT);i8=[(i8[0]+i7[0])/2,(i8[1]+i7[1])/2];i2=[(i2[0]+i1[0])/2,(i2[1]+i1[1])/2];im(i5*iQ)}io=null;iK(i8,i2);iv(iX)}function iV(){if(hp.event.touches.length){var i2=hp.event.changedTouches;for(var i1=0,i3=i2.length;i1<i3;++i1){delete iP[i2[i1].identifier]}for(var i0 in iP){return void iM()}}iW.on(iN,null).on(iY,null);iZ.on(iA,ii).on(iF,ik);iO();iu(iX)}}function it(){var iM=iC.of(this,arguments);if(ix){clearTimeout(ix)}else{cX.call(this),iy(iM)}ix=setTimeout(function(){ix=null;iu(iM)},50);w();var iL=iJ||hp.mouse(this);if(!iH){iH=e(iL)}im(Math.pow(2,cz()*0.002)*ir.k);iK(iL,iH);iv(iM)}function iD(){iH=null}function ip(){var iN=iC.of(this,arguments),iO=hp.mouse(this),iL=e(iO),iM=Math.log(ir.k)/Math.LN2;iy(iN);im(Math.pow(2,hp.event.shiftKey?Math.ceil(iM)-1:Math.floor(iM)+1));iK(iO,iL);iv(iN);iu(iN)}return hp.rebind(ig,iC,"on")};var f3=[0,Infinity];var cz,g6="onwheel" in bM?(cz=function(){return -hp.event.deltaY*(hp.event.deltaMode?120:1)},"wheel"):"onmousewheel" in bM?(cz=function(){return hp.event.wheelDelta},"mousewheel"):(cz=function(){return -hp.event.detail},"MozMousePixelScroll");function G(){}G.prototype.toString=function(){return this.rgb()+""};hp.hsl=function(ih,ig,e){return arguments.length===1?ih instanceof fz?eL(ih.h,ih.s,ih.l):aX(""+ih,gC,eL):eL(+ih,+ig,+e)};function eL(ih,ig,e){return new fz(ih,ig,e)}function fz(ih,ig,e){this.h=ih;this.s=ig;this.l=e}var eB=fz.prototype=new G();eB.brighter=function(e){e=Math.pow(0.7,arguments.length?e:1);return eL(this.h,this.s,this.l/e)};eB.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return eL(this.h,this.s,e*this.l)};eB.rgb=function(){return bg(this.h,this.s,this.l)};function bg(ik,ij,e){var ii,ih;ik=isNaN(ik)?0:(ik%=360)<0?ik+360:ik;ij=isNaN(ij)?0:ij<0?0:ij>1?1:ij;e=e<0?0:e>1?1:e;ih=e<=0.5?e*(1+ij):e+ij-e*ij;ii=2*e-ih;function ig(im){if(im>360){im-=360}else{if(im<0){im+=360}}if(im<60){return ii+(ih-ii)*im/60}if(im<180){return ih}if(im<240){return ii+(ih-ii)*(240-im)/60}return ii}function il(im){return Math.round(ig(im)*255)}return ev(il(ik+120),il(ik),il(ik-120))}hp.hcl=function(ig,ih,e){return arguments.length===1?ig instanceof cv?bA(ig.h,ig.c,ig.l):ig instanceof da?gM(ig.l,ig.a,ig.b):gM((ig=d5((ig=hp.rgb(ig)).r,ig.g,ig.b)).l,ig.a,ig.b):bA(+ig,+ih,+e)};function bA(ig,ih,e){return new cv(ig,ih,e)}function cv(ig,ih,e){this.h=ig;this.c=ih;this.l=e}var hi=cv.prototype=new G();hi.brighter=function(e){return bA(this.h,this.c,Math.min(100,this.l+bq*(arguments.length?e:1)))};hi.darker=function(e){return bA(this.h,this.c,Math.max(0,this.l-bq*(arguments.length?e:1)))};hi.rgb=function(){return bB(this.h,this.c,this.l).rgb()};function bB(ig,ih,e){if(isNaN(ig)){ig=0}if(isNaN(ih)){ih=0}return cn(e,Math.cos(ig*=K)*ih,Math.sin(ig)*ih)}hp.lab=function(ih,ig,e){return arguments.length===1?ih instanceof da?cn(ih.l,ih.a,ih.b):ih instanceof cv?bB(ih.l,ih.c,ih.h):d5((ih=hp.rgb(ih)).r,ih.g,ih.b):cn(+ih,+ig,+e)};function cn(ih,ig,e){return new da(ih,ig,e)}function da(ih,ig,e){this.l=ih;this.a=ig;this.b=e}var bq=18;var bh=0.95047,bf=1,bc=1.08883;var gE=da.prototype=new G();gE.brighter=function(e){return cn(Math.min(100,this.l+bq*(arguments.length?e:1)),this.a,this.b)};gE.darker=function(e){return cn(Math.max(0,this.l-bq*(arguments.length?e:1)),this.a,this.b)};gE.rgb=function(){return aC(this.l,this.a,this.b)};function aC(ii,ih,ig){var ik=(ii+16)/116,e=ik+ih/500,ij=ik-ig/200;e=g3(e)*bh;ik=g3(ik)*bf;ij=g3(ij)*bc;return ev(d(3.2404542*e-1.5371385*ik-0.4985314*ij),d(-0.969266*e+1.8760108*ik+0.041556*ij),d(0.0556434*e-0.2040259*ik+1.0572252*ij))}function gM(ih,ig,e){return ih>0?bA(Math.atan2(e,ig)*hF,Math.sqrt(ig*ig+e*e),ih):bA(NaN,NaN,ih)}function g3(e){return e>0.206893034?e*e*e:(e-4/29)/7.787037}function gw(e){return e>0.008856?Math.pow(e,1/3):7.787037*e+4/29}function d(e){return Math.round(255*(e<=0.00304?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))}hp.rgb=function(ih,ig,e){return arguments.length===1?ih instanceof ff?ev(ih.r,ih.g,ih.b):aX(""+ih,ev,bg):ev(~~ih,~~ig,~~e)};function di(e){return ev(e>>16,e>>8&255,e&255)}function dy(e){return di(e)+""}function ev(ih,ig,e){return new ff(ih,ig,e)}function ff(ih,ig,e){this.r=ih;this.g=ig;this.b=e}var eM=ff.prototype=new G();eM.brighter=function(ig){ig=Math.pow(0.7,arguments.length?ig:1);var ij=this.r,ii=this.g,e=this.b,ih=30;if(!ij&&!ii&&!e){return ev(ih,ih,ih)}if(ij&&ij<ih){ij=ih}if(ii&&ii<ih){ii=ih}if(e&&e<ih){e=ih}return ev(Math.min(255,~~(ij/ig)),Math.min(255,~~(ii/ig)),Math.min(255,~~(e/ig)))};eM.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return ev(~~(e*this.r),~~(e*this.g),~~(e*this.b))};eM.hsl=function(){return gC(this.r,this.g,this.b)};eM.toString=function(){return"#"+cx(this.r)+cx(this.g)+cx(this.b)};function cx(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function aX(ik,ii,il){var e=0,ih=0,ij=0,io,im,ig;io=/([a-z]+)\((.*)\)/i.exec(ik);if(io){im=io[2].split(",");switch(io[1]){case"hsl":return il(parseFloat(im[0]),parseFloat(im[1])/100,parseFloat(im[2])/100);case"rgb":return ii(e1(im[0]),e1(im[1]),e1(im[2]))}}if(ig=ao.get(ik)){return ii(ig.r,ig.g,ig.b)}if(ik!=null&&ik.charAt(0)==="#"){if(ik.length===4){e=ik.charAt(1);e+=e;ih=ik.charAt(2);ih+=ih;ij=ik.charAt(3);ij+=ij}else{if(ik.length===7){e=ik.substring(1,3);ih=ik.substring(3,5);ij=ik.substring(5,7)}}e=parseInt(e,16);ih=parseInt(ih,16);ij=parseInt(ij,16)}return ii(e,ih,ij)}function gC(e,ij,il){var ih=Math.min(e/=255,ij/=255,il/=255),im=Math.max(e,ij,il),ik=im-ih,ii,io,ig=(im+ih)/2;if(ik){io=ig<0.5?ik/(im+ih):ik/(2-im-ih);if(e==im){ii=(ij-il)/ik+(ij<il?6:0)}else{if(ij==im){ii=(il-e)/ik+2}else{ii=(e-ij)/ik+4}}ii*=60}else{ii=NaN;io=ig>0&&ig<1?0:ii}return eL(ii,io,ig)}function d5(ii,ih,ig){ii=dF(ii);ih=dF(ih);ig=dF(ig);var e=gw((0.4124564*ii+0.3575761*ih+0.1804375*ig)/bh),ik=gw((0.2126729*ii+0.7151522*ih+0.072175*ig)/bf),ij=gw((0.0193339*ii+0.119192*ih+0.9503041*ig)/bc);return cn(116*ik-16,500*(e-ik),200*(ik-ij))}function dF(e){return(e/=255)<=0.04045?e/12.92:Math.pow((e+0.055)/1.055,2.4)}function e1(ig){var e=parseFloat(ig);return ig.charAt(ig.length-1)==="%"?Math.round(e*2.55):e}var ao=hp.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ao.forEach(function(e,ig){ao.set(e,di(ig))});function T(e){return typeof e==="function"?e:function(){return e}}hp.functor=T;function gr(e){return e}hp.xhr=Z(gr);function Z(e){return function(ig,ih,ii){if(arguments.length===2&&typeof ih==="function"){ii=ih,ih=null}return h1(ig,ih,e,ii)}}function h1(e,ih,ij,io){var ip={},im=hp.dispatch("beforesend","progress","load","error"),ii={},ik=new XMLHttpRequest(),il=null;if(fH.XDomainRequest&&!("withCredentials" in ik)&&/^(http(s)?:)?\/\//.test(e)){ik=new XDomainRequest()}"onload" in ik?ik.onload=ik.onerror=ig:ik.onreadystatechange=function(){ik.readyState>3&&ig()};function ig(){var ir=ik.status,iq;if(!ir&&ik.responseText||ir>=200&&ir<300||ir===304){try{iq=ij.call(ip,ik)}catch(it){im.error.call(ip,it);return}im.load.call(ip,iq)}else{im.error.call(ip,ik)}}ik.onprogress=function(iq){var ir=hp.event;hp.event=iq;try{im.progress.call(ip,ik)}finally{hp.event=ir}};ip.header=function(iq,ir){iq=(iq+"").toLowerCase();if(arguments.length<2){return ii[iq]}if(ir==null){delete ii[iq]}else{ii[iq]=ir+""}return ip};ip.mimeType=function(iq){if(!arguments.length){return ih}ih=iq==null?null:iq+"";return ip};ip.responseType=function(iq){if(!arguments.length){return il}il=iq;return ip};ip.response=function(iq){ij=iq;return ip};["get","post"].forEach(function(iq){ip[iq]=function(){return ip.send.apply(ip,[iq].concat(dS(arguments)))}});ip.send=function(iu,ir,it){if(arguments.length===2&&typeof ir==="function"){it=ir,ir=null}ik.open(iu,e,true);if(ih!=null&&!("accept" in ii)){ii.accept=ih+",*/*"}if(ik.setRequestHeader){for(var iq in ii){ik.setRequestHeader(iq,ii[iq])}}if(ih!=null&&ik.overrideMimeType){ik.overrideMimeType(ih)}if(il!=null){ik.responseType=il}if(it!=null){ip.on("error",it).on("load",function(iv){it(null,iv)})}im.beforesend.call(ip,ik);ik.send(ir==null?null:ir);return ip};ip.abort=function(){ik.abort();return ip};hp.rebind(ip,im,"on");return io==null?ip:ip.get(ec(io))}function ec(e){return e.length===1?function(ig,ih){e(ig==null?ih:null)}:e}hp.dsv=function(e,ig){var ii=new RegExp('["'+e+"\n]"),ik=e.charCodeAt(0);function im(ip,ir,it){if(arguments.length<3){it=ir,ir=null}var iq=hp.xhr(ip,ig,it);iq.row=function(iu){return arguments.length?iq.response((ir=iu)==null?ij:ih(iu)):ir};return iq.row(ir)}function ij(ip){return im.parse(ip.responseText)}function ih(ip){return function(iq){return im.parse(iq.responseText,ip)}}im.parse=function(ir,ip){var iq;return im.parseRows(ir,function(iv,iu){if(iq){return iq(iv,iu-1)}var it=new Function("d","return {"+iv.map(function(iw,ix){return JSON.stringify(iw)+": d["+ix+"]"}).join(",")+"}");iq=ip?function(ix,iw){return ip(it(ix),iw)}:it})};im.parseRows=function(iz,iu){var iq={},it={},iB=[],iv=iz.length,iy=0,ip=0,iA,iw;function ir(){if(iy>=iv){return it}if(iw){return iw=false,iq}var iD=iy;if(iz.charCodeAt(iD)===34){var iE=iD;while(iE++<iv){if(iz.charCodeAt(iE)===34){if(iz.charCodeAt(iE+1)!==34){break}++iE}}iy=iE+2;var iF=iz.charCodeAt(iE+1);if(iF===13){iw=true;if(iz.charCodeAt(iE+2)===10){++iy}}else{if(iF===10){iw=true}}return iz.substring(iD+1,iE).replace(/""/g,'"')}while(iy<iv){var iF=iz.charCodeAt(iy++),iC=1;if(iF===10){iw=true}else{if(iF===13){iw=true;if(iz.charCodeAt(iy)===10){++iy,++iC}}else{if(iF!==ik){continue}}}return iz.substring(iD,iy-iC)}return iz.substring(iD)}while((iA=ir())!==it){var ix=[];while(iA!==iq&&iA!==it){ix.push(iA);iA=ir()}if(iu&&!(ix=iu(ix,ip++))){continue}iB.push(ix)}return iB};im.format=function(ir){if(Array.isArray(ir[0])){return im.formatRows(ir)}var iq=new du(),ip=[];ir.forEach(function(iu){for(var it in iu){if(!iq.has(it)){ip.push(iq.add(it))}}});return[ip.map(il).join(e)].concat(ir.map(function(it){return ip.map(function(iu){return il(it[iu])}).join(e)})).join("\n")};im.formatRows=function(ip){return ip.map(io).join("\n")};function io(ip){return ip.map(il).join(e)}function il(ip){return ii.test(ip)?'"'+ip.replace(/\"/g,'""')+'"':ip}return im};hp.csv=hp.dsv(",","text/csv");hp.tsv=hp.dsv(" ","text/tab-separated-values");var d6,ah,cr,fo,dn,hv=fH[dl(fH,"requestAnimationFrame")]||function(e){setTimeout(e,17)};hp.timer=function(ik,e,ih){var ij=arguments.length;if(ij<2){e=0}if(ij<3){ih=Date.now()}var ig=ih+e,ii={c:ik,t:ig,f:false,n:null};if(ah){ah.n=ii}else{d6=ii}ah=ii;if(!cr){fo=clearTimeout(fo);cr=1;hv(hw)}};function hw(){var ig=bD(),e=ae()-ig;if(e>24){if(isFinite(e)){clearTimeout(fo);fo=setTimeout(hw,e)}cr=0}else{cr=1;hv(hw)}}hp.timer.flush=function(){bD();ae()};function bD(){var e=Date.now();dn=d6;while(dn){if(e>=dn.t){dn.f=dn.c(e-dn.t)}dn=dn.n}return e}function ae(){var ig,e=d6,ih=Infinity;while(e){if(e.f){e=ig?ig.n=e.n:d6=e.n}else{if(e.t<ih){ih=e.t}e=(ig=e).n}}ah=ig;return ih}var g0=".",e9=",",i=[3,3],bG="$";var cw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(dR);hp.formatPrefix=function(ih,e){var ig=0;if(ih){if(ih<0){ih*=-1}if(e){ih=hp.round(ih,em(ih,e))}ig=1+Math.floor(1e-12+Math.log(ih)/Math.LN10);ig=Math.max(-24,Math.min(24,Math.floor((ig<=0?ig+1:ig-1)/3)*3))}return cw[8+ig/3]};function dR(ih,ig){var e=Math.pow(10,cI(8-ig)*3);return{scale:ig>8?function(ii){return ii/e}:function(ii){return ii*e},symbol:ih}}hp.round=function(e,ig){return ig?Math.round(e*(ig=Math.pow(10,ig)))/ig:Math.round(e)};hp.format=function(ir){var io=cB.exec(ir),iu=io[1]||" ",ip=io[2]||">",ig=io[3]||"",ii=io[4]||"",ij=io[5],e=+io[6],iv=io[7],im=io[8],iq=io[9],ih=1,it="",il=false;if(im){im=+im.substring(1)}if(ij||iu==="0"&&ip==="="){ij=iu="0";ip="=";if(iv){e-=Math.floor((e-1)/4)}}switch(iq){case"n":iv=true;iq="g";break;case"%":ih=100;it="%";iq="f";break;case"p":ih=100;it="%";iq="r";break;case"b":case"o":case"x":case"X":if(ii==="#"){ii="0"+iq.toLowerCase()}case"c":case"d":il=true;im=0;break;case"s":ih=-1;iq="r";break}if(ii==="#"){ii=""}else{if(ii==="$"){ii=bG}}if(iq=="r"&&!im){iq="g"}if(im!=null){if(iq=="g"){im=Math.max(1,Math.min(21,im))}else{if(iq=="e"||iq=="f"){im=Math.max(0,Math.min(20,im))}}}iq=x.get(iq)||bm;var ik=ij&&iv;return function(iB){if(il&&iB%1){return""}var iw=iB<0||iB===0&&1/iB<0?(iB=-iB,"-"):ig;if(ih<0){var iA=hp.formatPrefix(iB,im);iB=iA.scale(iB);it=iA.symbol}else{iB*=ih}iB=iq(iB,im);var ix=iB.lastIndexOf("."),iz=ix<0?iB:iB.substring(0,ix),iD=ix<0?"":g0+iB.substring(ix+1);if(!ij&&iv){iz=dk(iz)}var iy=ii.length+iz.length+iD.length+(ik?0:iw.length),iC=iy<e?new Array(iy=e-iy+1).join(iu):"";if(ik){iz=dk(iC+iz)}iw+=ii;iB=iz+iD;return(ip==="<"?iw+iB+iC:ip===">"?iC+iw+iB:ip==="^"?iC.substring(0,iy>>=1)+iw+iB+iC.substring(iy):iw+(ik?iB:iC+iB))+it}};var cB=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var x=hp.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,ig){return e.toPrecision(ig)},e:function(e,ig){return e.toExponential(ig)},f:function(e,ig){return e.toFixed(ig)},r:function(e,ig){return(e=hp.round(e,em(e,ig))).toFixed(Math.max(0,Math.min(20,em(e*(1+1e-15),ig))))}});function em(e,ig){return ig-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function bm(e){return e+""}var dk=gr;if(i){var b7=i.length;dk=function(ij){var ih=ij.length,ig=[],e=0,ii=i[0];while(ih>0&&ii>0){ig.push(ij.substring(ih-=ii,ih+ii));ii=i[e=(e+1)%b7]}return ig.reverse().join(e9)}}hp.geo={};function fl(){}fl.prototype={s:0,t:0,add:function(e){ds(e,this.t,hS);ds(hS.s,this.s,this);if(this.s){this.t+=hS.t}else{this.s=hS.t}},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hS=new fl();function ds(ii,ih,ik){var ig=ik.s=ii+ih,e=ig-ii,ij=ig-e;ik.t=ii-ij+(ih-e)}hp.geo.stream=function(e,ig){if(e&&z.hasOwnProperty(e.type)){z[e.type](e,ig)}else{aR(e,ig)}};function aR(ig,e){if(ig&&eV.hasOwnProperty(ig.type)){eV[ig.type](ig,e)}}var z={Feature:function(e,ig){aR(e.geometry,ig)},FeatureCollection:function(e,ii){var ih=e.features,ig=-1,ij=ih.length;while(++ig<ij){aR(ih[ig].geometry,ii)}}};var eV={Sphere:function(e,ig){ig.sphere()},Point:function(e,ig){e=e.coordinates;ig.point(e[0],e[1],e[2])},MultiPoint:function(e,ih){var ii=e.coordinates,ig=-1,ij=ii.length;while(++ig<ij){e=ii[ig],ih.point(e[0],e[1],e[2])}},LineString:function(e,ig){co(e.coordinates,ig,0)},MultiLineString:function(e,ih){var ii=e.coordinates,ig=-1,ij=ii.length;while(++ig<ij){co(ii[ig],ih,0)}},Polygon:function(e,ig){hh(e.coordinates,ig)},MultiPolygon:function(e,ih){var ii=e.coordinates,ig=-1,ij=ii.length;while(++ig<ij){hh(ii[ig],ih)}},GeometryCollection:function(e,ii){var ih=e.geometries,ig=-1,ij=ih.length;while(++ig<ij){aR(ih[ig],ii)}}};function co(ii,ih,e){var ig=-1,ik=ii.length-e,ij;ih.lineStart();while(++ig<ik){ij=ii[ig],ih.point(ij[0],ij[1],ij[2])}ih.lineEnd()}function hh(ih,ig){var e=-1,ii=ih.length;ig.polygonStart();while(++e<ii){co(ih[e],ig,1)}ig.polygonEnd()}hp.geo.area=function(e){a9=0;hp.geo.stream(e,hm);return a9};var a9,fY=new fl();var hm={sphere:function(){a9+=4*gk},point:aH,lineStart:aH,lineEnd:aH,polygonStart:function(){fY.reset();hm.lineStart=b4},polygonEnd:function(){var e=2*fY;a9+=e<0?4*gk+e:e;hm.lineStart=hm.lineEnd=hm.point=aH}};function b4(){var ig,e,ii,ih,ij;hm.point=function(im,il){hm.point=ik;ii=(ig=im)*K,ih=Math.cos(il=(e=il)*K/2+gk/4),ij=Math.sin(il)};function ik(im,il){im*=K;il=il*K/2+gk/4;var ir=im-ii,iu=Math.cos(il),it=Math.sin(il),ip=ij*it,iq=ih*iu+ip*Math.cos(ir),io=ip*Math.sin(ir);fY.add(Math.atan2(io,iq));ii=im,ih=iu,ij=it}hm.lineEnd=function(){ik(ig,e)}}function aw(e){var ih=e[0],ig=e[1],ii=Math.cos(ig);return[ii*Math.cos(ih),ii*Math.sin(ih),Math.sin(ig)]}function az(ig,e){return ig[0]*e[0]+ig[1]*e[1]+ig[2]*e[2]}function c1(ig,e){return[ig[1]*e[2]-ig[2]*e[1],ig[2]*e[0]-ig[0]*e[2],ig[0]*e[1]-ig[1]*e[0]]}function cD(ig,e){ig[0]+=e[0];ig[1]+=e[1];ig[2]+=e[2]}function gm(e,ig){return[e[0]*ig,e[1]*ig,e[2]*ig]}function fs(ig){var e=Math.sqrt(ig[0]*ig[0]+ig[1]*ig[1]+ig[2]*ig[2]);ig[0]/=e;ig[1]/=e;ig[2]/=e}function ib(e){return[Math.atan2(e[1],e[0]),cd(e[2])]}function eW(ig,e){return cI(ig[0]-e[0])<gu&&cI(ig[1]-e[1])<gu}hp.geo.bounds=function(){var ii,iA,ig,iy,ij,ir,iu,ik,io,il,ip;var e={point:iv,lineStart:iq,lineEnd:ix,polygonStart:function(){e.point=iw;e.lineStart=im;e.lineEnd=it;io=0;hm.polygonStart()},polygonEnd:function(){hm.polygonEnd();e.point=iv;e.lineStart=iq;e.lineEnd=ix;if(fY<0){ii=-(ig=180),iA=-(iy=90)}else{if(io>gu){iy=90}else{if(io<-gu){iA=-90}}}ip[0]=ii,ip[1]=ig}};function iv(iE,iD){il.push(ip=[ii=iE,ig=iE]);if(iD<iA){iA=iD}if(iD>iy){iy=iD}}function ih(iH,iN){var iD=aw([iH*K,iN*K]);if(ik){var iJ=c1(ik,iD),iK=[iJ[1],-iJ[0],0],iI=c1(iK,iJ);fs(iI);iI=ib(iI);var iL=iH-ij,iM=iL>0?1:-1,iE=iI[0]*hF*iM,iG=cI(iL)>180;if(iG^(iM*ij<iE&&iE<iM*iH)){var iF=iI[1]*hF;if(iF>iy){iy=iF}}else{if(iE=(iE+360)%360-180,iG^(iM*ij<iE&&iE<iM*iH)){var iF=-iI[1]*hF;if(iF<iA){iA=iF}}else{if(iN<iA){iA=iN}if(iN>iy){iy=iN}}}if(iG){if(iH<ij){if(iz(ii,iH)>iz(ii,ig)){ig=iH}}else{if(iz(iH,ig)>iz(ii,ig)){ii=iH}}}else{if(ig>=ii){if(iH<ii){ii=iH}if(iH>ig){ig=iH}}else{if(iH>ij){if(iz(ii,iH)>iz(ii,ig)){ig=iH}}else{if(iz(iH,ig)>iz(ii,ig)){ii=iH}}}}}else{iv(iH,iN)}ik=iD,ij=iH}function iq(){e.point=ih}function ix(){ip[0]=ii,ip[1]=ig;e.point=iv;ik=null}function iw(iE,iD){if(ik){var iF=iE-ij;io+=cI(iF)>180?iF+(iF>0?360:-360):iF}else{ir=iE,iu=iD}hm.point(iE,iD);ih(iE,iD)}function im(){hm.lineStart()}function it(){iw(ir,iu);hm.lineEnd();if(cI(io)>gu){ii=-(ig=180)}ip[0]=ii,ip[1]=ig;ik=null}function iz(iE,iD){return(iD-=iE)<0?iD+360:iD}function iC(iE,iD){return iE[0]-iD[0]}function iB(iD,iE){return iE[0]<=iE[1]?iE[0]<=iD&&iD<=iE[1]:iD<iE[0]||iE[1]<iD}return function(iI){iy=ig=-(ii=iA=Infinity);il=[];hp.geo.stream(iI,e);var iK=il.length;if(iK){il.sort(iC);for(var iH=1,iF=il[0],iE,iD=[iF];iH<iK;++iH){iE=il[iH];if(iB(iE[0],iF)||iB(iE[1],iF)){if(iz(iF[0],iE[1])>iz(iF[0],iF[1])){iF[1]=iE[1]}if(iz(iE[0],iF[1])>iz(iF[0],iF[1])){iF[0]=iE[0]}}else{iD.push(iF=iE)}}var iJ=-Infinity,iG;for(var iK=iD.length-1,iH=0,iF=iD[iK],iE;iH<=iK;iF=iE,++iH){iE=iD[iH];if((iG=iz(iF[1],iE[0]))>iJ){iJ=iG,ii=iE[0],ig=iF[1]}}}il=ip=null;return ii===Infinity||iA===Infinity?[[NaN,NaN],[NaN,NaN]]:[[ii,iA],[ig,iy]]}}();hp.geo.centroid=function(ih){ei=eg=dO=dr=c9=dN=dq=c7=dM=dp=c6=0;hp.geo.stream(ih,go);var ig=dM,ij=dp,ii=c6,e=ig*ig+ij*ij+ii*ii;if(e<eI){ig=dN,ij=dq,ii=c7;if(eg<gu){ig=dO,ij=dr,ii=c9}e=ig*ig+ij*ij+ii*ii;if(e<eI){return[NaN,NaN]}}return[Math.atan2(ij,ig)*hF,cd(ii/Math.sqrt(e))*hF]};var ei,eg,dO,dr,c9,dN,dq,c7,dM,dp,c6;var go={sphere:aH,point:b9,lineStart:fr,lineEnd:aF,polygonStart:function(){go.lineStart=bp},polygonEnd:function(){go.lineStart=fr}};function b9(ig,e){ig*=K;var ih=Math.cos(e*=K);gz(ih*Math.cos(ig),ih*Math.sin(ig),Math.sin(e))}function gz(e,ih,ig){++ei;dO+=(e-dO)/ei;dr+=(ih-dr)/ei;c9+=(ig-c9)/ei}function fr(){var e,ig,ii;go.point=function(ik,ij){ik*=K;var il=Math.cos(ij*=K);e=il*Math.cos(ik);ig=il*Math.sin(ik);ii=Math.sin(ij);go.point=ih;gz(e,ig,ii)};function ih(im,il){im*=K;var io=Math.cos(il*=K),ij=io*Math.cos(im),iq=io*Math.sin(im),ip=Math.sin(il),ik=Math.atan2(Math.sqrt((ik=ig*ip-ii*iq)*ik+(ik=ii*ij-e*ip)*ik+(ik=e*iq-ig*ij)*ik),e*ij+ig*iq+ii*ip);eg+=ik;dN+=ik*(e+(e=ij));dq+=ik*(ig+(ig=iq));c7+=ik*(ii+(ii=ip));gz(e,ig,ii)}}function aF(){go.point=b9}function bp(){var ig,e,ih,ii,ik;go.point=function(im,il){ig=im,e=il;go.point=ij;im*=K;var io=Math.cos(il*=K);ih=io*Math.cos(im);ii=io*Math.sin(im);ik=Math.sin(il);gz(ih,ii,ik)};go.lineEnd=function(){ij(ig,e);go.lineEnd=aF;go.point=b9};function ij(ir,iz){ir*=K;var ip=Math.cos(iz*=K),iv=ip*Math.cos(ir),iu=ip*Math.sin(ir),it=Math.sin(iz),iq=ii*it-ik*iu,io=ik*iv-ih*it,im=ih*iu-ii*iv,il=Math.sqrt(iq*iq+io*io+im*im),iy=ih*iv+ii*iu+ik*it,ix=il&&-af(iy)/il,iw=Math.atan2(il,iy);dM+=ix*iq;dp+=ix*io;c6+=ix*im;eg+=iw;dN+=iw*(ih+(ih=iv));dq+=iw*(ii+(ii=iu));c7+=iw*(ik+(ik=it));gz(ih,ii,ik)}}function aj(){return true}function cs(il,ig,iq,io,ii){var ip=[],ij=[];il.forEach(function(iz){if((iC=iz.length-1)<=0){return}var iC,iB=iz[0],iA=iz[iC];if(eW(iB,iA)){ii.lineStart();for(var iy=0;iy<iC;++iy){ii.point((iB=iz[iy])[0],iB[1])}ii.lineEnd();return}var ix=new b(iB,iz,null,true),iw=new b(iB,null,ix,false);ix.o=iw;ip.push(ix);ij.push(iw);ix=new b(iA,iz,null,false);iw=new b(iA,null,ix,true);ix.o=iw;ip.push(ix);ij.push(iw)});ij.sort(ig);hL(ip);hL(ij);if(!ip.length){return}for(var ik=0,it=iq,ih=ij.length;ik<ih;++ik){ij[ik].e=it=!it}var e=ip[0],iu,ir;while(1){var im=e,iv=true;while(im.v){if((im=im.n)===e){return}}iu=im.z;ii.lineStart();do{im.v=im.o.v=true;if(im.e){if(iv){for(var ik=0,ih=iu.length;ik<ih;++ik){ii.point((ir=iu[ik])[0],ir[1])}}else{io(im.x,im.n.x,1,ii)}im=im.n}else{if(iv){iu=im.p.z;for(var ik=iu.length-1;ik>=0;--ik){ii.point((ir=iu[ik])[0],ir[1])}}else{io(im.x,im.p.x,-1,ii)}im=im.p}im=im.o;iu=im.z;iv=!iv}while(!im.v);ii.lineEnd()}}function hL(ij){if(!(ii=ij.length)){return}var ii,ih=0,ig=ij[0],e;while(++ih<ii){ig.n=e=ij[ih];e.p=ig;ig=e}ig.n=e=ij[0];e.p=ig}function b(ig,ih,e,ii){this.x=ig;this.z=ih;this.o=e;this.e=ii;this.v=false;this.n=this.p=null}function eo(e,ii,ig,ih){return function(ir,il){var iB=ii(il),ik=ir.invert(ih[0],ih[1]);var im={point:iz,lineStart:iv,lineEnd:iq,polygonStart:function(){im.point=ix;im.lineStart=iw;im.lineEnd=iA;iu=[];iy=[];il.polygonStart()},polygonEnd:function(){im.point=iz;im.lineStart=iv;im.lineEnd=iq;iu=hp.merge(iu);var iC=fV(ik,iy);if(iu.length){cs(iu,dZ,iC,ig,il)}else{if(iC){il.lineStart();ig(null,null,1,il);il.lineEnd()}}il.polygonEnd();iu=iy=null},sphere:function(){il.polygonStart();il.lineStart();ig(null,null,1,il);il.lineEnd();il.polygonEnd()}};function iz(iE,iD){var iC=ir(iE,iD);if(e(iE=iC[0],iD=iC[1])){il.point(iE,iD)}}function it(iE,iD){var iC=ir(iE,iD);iB.point(iC[0],iC[1])}function iv(){im.point=it;iB.lineStart()}function iq(){im.point=iz;iB.lineEnd()}var iu;var ip=R(),ij=ii(ip),iy,io;function ix(iE,iD){io.push([iE,iD]);var iC=ir(iE,iD);ij.point(iC[0],iC[1])}function iw(){ij.lineStart();io=[]}function iA(){ix(io[0][0],io[0][1]);ij.lineEnd();var iE=ij.clean(),iG=ip.buffer(),iF,iH=iG.length;io.pop();iy.push(io);io=null;if(!iH){return}if(iE&1){iF=iG[0];var iH=iF.length-1,iD=-1,iC;il.lineStart();while(++iD<iH){il.point((iC=iF[iD])[0],iC[1])}il.lineEnd();return}if(iH>1&&iE&2){iG.push(iG.pop().concat(iG.shift()))}iu.push(iG.filter(eR))}return im}}function eR(e){return e.length>1}function R(){var ig=[],e;return{lineStart:function(){ig.push(e=[])},point:function(ii,ih){e.push([ii,ih])},lineEnd:aH,buffer:function(){var ih=ig;ig=[];e=null;return ih},rejoin:function(){if(ig.length>1){ig.push(ig.pop().concat(ig.shift()))}}}}function dZ(ig,e){return((ig=ig.x)[0]<0?ig[1]-eu-gu:eu-ig[1])-((e=e.x)[0]<0?e[1]-eu-gu:eu-e[1])}function fV(iy,iu){var iG=iy[0],iH=iy[1],e=[Math.sin(iG),-Math.cos(iG),0],it=0,iE=0;fY.reset();for(var iD=0,iv=iu.length;iD<iv;++iD){var io=iu[iD],ix=io.length;if(!ix){continue}var ik=io[0],ih=ik[0],iF=ik[1]/2+gk/4,im=Math.sin(iF),ig=Math.cos(iF),iC=1;while(true){if(iC===ix){iC=0}iy=io[iC];var iw=iy[0],ir=iy[1]/2+gk/4,ii=Math.sin(ir),iB=Math.cos(ir),iA=iw-ih,ij=cI(iA)>gk,iz=im*ii;fY.add(Math.atan2(iz*Math.sin(iA),ig*iB+iz*Math.cos(iA)));it+=ij?iA+(iA>=0?gf:-gf):iA;if(ij^ih>=iG^iw>=iG){var ip=c1(aw(ik),aw(iy));fs(ip);var iq=c1(e,ip);fs(iq);var il=(ij^iA>=0?-1:1)*cd(iq[2]);if(iH>il||iH===il&&(ip[0]||ip[1])){iE+=ij^iA>=0?1:-1}}if(!iC++){break}ih=iw,im=ii,ig=iB,ik=iy}}return(it<-gu||it<gu&&fY<0)^iE&1}var k=eo(aj,eJ,dg,[-gk,-gk/2]);function eJ(ij){var ig=NaN,e=NaN,ii=NaN,ih;return{lineStart:function(){ij.lineStart();ih=1},point:function(il,ik){var io=il>0?gk:-gk,im=cI(il-ig);if(cI(im-gk)<gu){ij.point(ig,e=(e+ik)/2>0?eu:-eu);ij.point(ii,e);ij.lineEnd();ij.lineStart();ij.point(io,e);ij.point(il,e);ih=0}else{if(ii!==io&&im>=gk){if(cI(ig-ii)<gu){ig-=ii*gu}if(cI(il-io)<gu){il-=io*gu}e=v(ig,e,il,ik);ij.point(ii,e);ij.lineEnd();ij.lineStart();ij.point(io,e);ih=0}}ij.point(ig=il,e=ik);ii=io},lineEnd:function(){ij.lineEnd();ig=e=NaN},clean:function(){return 2-ih}}}function v(ik,ij,ii,ih){var ig,e,il=Math.sin(ik-ii);return cI(il)>gu?Math.atan((Math.sin(ij)*(e=Math.cos(ih))*Math.sin(ii)-Math.sin(ih)*(ig=Math.cos(ij))*Math.sin(ik))/(ig*e*il)):(ij+ih)/2}function dg(ik,ij,ii,ih){var e;if(ik==null){e=ii*eu;ih.point(-gk,e);ih.point(0,e);ih.point(gk,e);ih.point(gk,0);ih.point(gk,-e);ih.point(0,-e);ih.point(-gk,-e);ih.point(-gk,0);ih.point(-gk,e)}else{if(cI(ik[0]-ij[0])>gu){var ig=ik[0]<ij[0]?gk:-gk;e=ii*ig/2;ih.point(-ig,e);ih.point(0,e);ih.point(ig,e)}else{ih.point(ij[0],ij[1])}}}function aM(ij){var ik=Math.cos(ij),ii=ik>0,il=cI(ik)>gu,im=b3(ij,6*K);return eo(ih,io,im,ii?[0,-ij]:[-gk,ij-gk]);function ih(iq,ip){return Math.cos(iq)*Math.cos(ip)>ik}function io(iv){var iu,it,ip,ir,iq;return{lineStart:function(){ir=ip=false;iq=1},point:function(ix,iw){var iB=[ix,iw],iA,iy=ih(ix,iw),iC=ii?iy?0:e(ix,iw):iy?e(ix+(ix<0?gk:-gk),iw):0;if(!iu&&(ir=ip=iy)){iv.lineStart()}if(iy!==ip){iA=ig(iu,iB);if(eW(iu,iA)||eW(iB,iA)){iB[0]+=gu;iB[1]+=gu;iy=ih(iB[0],iB[1])}}if(iy!==ip){iq=0;if(iy){iv.lineStart();iA=ig(iB,iu);iv.point(iA[0],iA[1])}else{iA=ig(iu,iB);iv.point(iA[0],iA[1]);iv.lineEnd()}iu=iA}else{if(il&&iu&&ii^iy){var iz;if(!(iC&it)&&(iz=ig(iB,iu,true))){iq=0;if(ii){iv.lineStart();iv.point(iz[0][0],iz[0][1]);iv.point(iz[1][0],iz[1][1]);iv.lineEnd()}else{iv.point(iz[1][0],iz[1][1]);iv.lineEnd();iv.lineStart();iv.point(iz[0][0],iz[0][1])}}}}if(iy&&(!iu||!eW(iu,iB))){iv.point(iB[0],iB[1])}iu=iB,ip=iy,it=iC},lineEnd:function(){if(ip){iv.lineEnd()}iu=null},clean:function(){return iq|(ir&&ip)<<1}}}function ig(iR,iQ,iu){var ir=aw(iR),ip=aw(iQ);var iz=[1,0,0],iw=c1(ir,ip),iC=az(iw,iw),iP=iw[0],iI=iC-iP*iP;if(!iI){return !iu&&iR}var iL=ik*iC/iI,iK=-ik*iP/iI,iS=c1(iz,iw),iJ=gm(iz,iL),iH=gm(iw,iK);cD(iJ,iH);var iE=iS,iD=az(iJ,iE),iv=az(iE,iE),iB=iD*iD-iv*(az(iJ,iJ)-1);if(iB<0){return}var iF=Math.sqrt(iB),iG=gm(iE,(-iD-iF)/iv);cD(iG,iJ);iG=ib(iG);if(!iu){return iG}var it=iR[0],iq=iQ[0],iN=iR[1],iM=iQ[1],iy;if(iq<it){iy=it,it=iq,iq=iy}var ix=iq-it,iT=cI(ix-gk)<gu,iO=iT||ix<gu;if(!iT&&iM<iN){iy=iN,iN=iM,iM=iy}if(iO?iT?iN+iM>0^iG[1]<(cI(iG[0]-it)<gu?iN:iM):iN<=iG[1]&&iG[1]<=iM:ix>gk^(it<=iG[0]&&iG[0]<=iq)){var iA=gm(iE,(-iD+iF)/iv);cD(iA,iJ);return[iG,ib(iA)]}}function e(iq,ip){var it=ii?ij:gk-ij,ir=0;if(iq<-it){ir|=1}else{if(iq>it){ir|=2}}if(ip<-it){ir|=4}else{if(ip>it){ir|=8}}return ir}}function am(ig,ii,e,ih){return function(iw){var ir=iw.a,iq=iw.b,ik=ir.x,iv=ir.y,ip=iq.x,io=iq.y,im=0,il=1,iu=ip-ik,it=io-iv,ij;ij=ig-ik;if(!iu&&ij>0){return}ij/=iu;if(iu<0){if(ij<im){return}if(ij<il){il=ij}}else{if(iu>0){if(ij>il){return}if(ij>im){im=ij}}}ij=e-ik;if(!iu&&ij<0){return}ij/=iu;if(iu<0){if(ij>il){return}if(ij>im){im=ij}}else{if(iu>0){if(ij<im){return}if(ij<il){il=ij}}}ij=ii-iv;if(!it&&ij>0){return}ij/=it;if(it<0){if(ij<im){return}if(ij<il){il=ij}}else{if(it>0){if(ij>il){return}if(ij>im){im=ij}}}ij=ih-iv;if(!it&&ij<0){return}ij/=it;if(it<0){if(ij>il){return}if(ij>im){im=ij}}else{if(it>0){if(ij<im){return}if(ij<il){il=ij}}}if(im>0){iw.a={x:ik+im*iu,y:iv+im*it}}if(il<1){iw.b={x:ik+il*iu,y:iv+il*it}}return iw}}var cL=1000000000;hp.geo.clipExtent=function(){var ih,ik,ig,ii,il,ij,e={stream:function(im){if(il){il.valid=false}il=ij(im);il.valid=true;return il},extent:function(im){if(!arguments.length){return[[ih,ik],[ig,ii]]}ij=el(ih=+im[0][0],ik=+im[0][1],ig=+im[1][0],ii=+im[1][1]);if(il){il.valid=false,il=null}return e}};return e.extent([[0,0],[960,500]])};function el(ig,ij,e,ih){return function(it){var io=it,iz=R(),ip=am(ig,ij,e,ih),iH,iA,ix;var iL={point:iG,lineStart:iD,lineEnd:iJ,polygonStart:function(){it=iz;iH=[];iA=[];iI=true},polygonEnd:function(){it=io;iH=hp.merge(iH);var iN=iC([ig,ih]),iM=iI&&iN,iO=iH.length;if(iM||iO){it.polygonStart();if(iM){it.lineStart();iy(null,null,1,it);it.lineEnd()}if(iO){cs(iH,ik,iN,iy,it)}it.polygonEnd()}iH=iA=ix=null}};function iC(iM){var iU=0,iN=iA.length,iS=iM[1];for(var iQ=0;iQ<iN;++iQ){for(var iP=1,iV=iA[iQ],iO=iV.length,iT=iV[0],iR;iP<iO;++iP){iR=iV[iP];if(iT[1]<=iS){if(iR[1]>iS&&iu(iT,iR,iM)>0){++iU}}else{if(iR[1]<=iS&&iu(iT,iR,iM)<0){--iU}}iT=iR}}return iU!==0}function iu(iN,iM,iO){return(iM[0]-iN[0])*(iO[1]-iN[1])-(iO[0]-iN[0])*(iM[1]-iN[1])}function iy(iR,iQ,iP,iO){var iN=0,iM=0;if(iR==null||(iN=ii(iR,iP))!==(iM=ii(iQ,iP))||il(iR,iQ)<0^iP>0){do{iO.point(iN===0||iN===3?ig:e,iN>1?ih:ij)}while((iN=(iN+iP+4)%4)!==iM)}else{iO.point(iQ[0],iQ[1])}}function iB(iM,iN){return ig<=iM&&iM<=e&&ij<=iN&&iN<=ih}function iG(iM,iN){if(iB(iM,iN)){it.point(iM,iN)}}var iF,iv,iE,iK,ir,iq,iw,iI;function iD(){iL.point=im;if(iA){iA.push(ix=[])}iw=true;iq=false;iK=ir=NaN}function iJ(){if(iH){im(iF,iv);if(iE&&iq){iz.rejoin()}iH.push(iz.buffer())}iL.point=iG;if(iq){it.lineEnd()}}function im(iM,iP){iM=Math.max(-cL,Math.min(cL,iM));iP=Math.max(-cL,Math.min(cL,iP));var iO=iB(iM,iP);if(iA){ix.push([iM,iP])}if(iw){iF=iM,iv=iP,iE=iO;iw=false;if(iO){it.lineStart();it.point(iM,iP)}}else{if(iO&&iq){it.point(iM,iP)}else{var iN={a:{x:iK,y:ir},b:{x:iM,y:iP}};if(ip(iN)){if(!iq){it.lineStart();it.point(iN.a.x,iN.a.y)}it.point(iN.b.x,iN.b.y);if(!iO){it.lineEnd()}iI=false}else{if(iO){it.lineStart();it.point(iM,iP);iI=false}}}}iK=iM,ir=iP,iq=iO}return iL};function ii(io,im){return cI(io[0]-ig)<gu?im>0?0:3:cI(io[0]-e)<gu?im>0?2:1:cI(io[1]-ij)<gu?im>0?1:0:im>0?3:2}function ik(io,im){return il(io.x,im.x)}function il(iq,io){var ip=ii(iq,1),im=ii(io,1);return ip!==im?ip-im:ip===0?io[1]-iq[1]:ip===1?iq[0]-io[0]:ip===2?iq[1]-io[1]:io[0]-iq[0]}}function fe(ig,e){function ih(ii,ij){return ii=ig(ii,ij),e(ii[0],ii[1])}if(ig.invert&&e.invert){ih.invert=function(ii,ij){return ii=e.invert(ii,ij),ii&&ig.invert(ii[0],ii[1])}}return ih}function b5(ii){var ih=0,ig=gk/3,e=fq(ii),ij=e(ih,ig);ij.parallels=function(ik){if(!arguments.length){return[ih/gk*180,ig/gk*180]}return e(ih=ik[0]*gk/180,ig=ik[1]*gk/180)};return ij}function O(ig,e){var ij=Math.sin(ig),il=(ij+Math.sin(e))/2,ik=1+ij*(2*il-ij),ii=Math.sqrt(ik)/il;function ih(io,im){var ip=Math.sqrt(ik-2*il*Math.sin(im))/il;return[ip*Math.sin(io*=il),ii-ip*Math.cos(io)]}ih.invert=function(im,ip){var io=ii-ip;return[Math.atan2(im,io)/il,cd((ik-(im*im+io*io)*il*il)/(2*il))]};return ih}(hp.geo.conicEqualArea=function(){return b5(O)}).raw=O;hp.geo.albers=function(){return hp.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};hp.geo.albersUsa=function(){var ig=hp.geo.albers();var ik=hp.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var ih=hp.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var im,e={point:function(ip,iq){im=[ip,iq]}},ij,il,ii;function io(iq){var ip=iq[0],ir=iq[1];im=null;(ij(ip,ir),im)||(il(ip,ir),im)||ii(ip,ir);return im}io.invert=function(it){var iq=ig.scale(),ir=ig.translate(),ip=(it[0]-ir[0])/iq,iu=(it[1]-ir[1])/iq;return(iu>=0.12&&iu<0.234&&ip>=-0.425&&ip<-0.214?ik:iu>=0.166&&iu<0.234&&ip>=-0.214&&ip<-0.115?ih:ig).invert(it)};io.stream=function(ir){var iq=ig.stream(ir),it=ik.stream(ir),ip=ih.stream(ir);return{point:function(iu,iv){iq.point(iu,iv);it.point(iu,iv);ip.point(iu,iv)},sphere:function(){iq.sphere();it.sphere();ip.sphere()},lineStart:function(){iq.lineStart();it.lineStart();ip.lineStart()},lineEnd:function(){iq.lineEnd();it.lineEnd();ip.lineEnd()},polygonStart:function(){iq.polygonStart();it.polygonStart();ip.polygonStart()},polygonEnd:function(){iq.polygonEnd();it.polygonEnd();ip.polygonEnd()}}};io.precision=function(ip){if(!arguments.length){return ig.precision()}ig.precision(ip);ik.precision(ip);ih.precision(ip);return io};io.scale=function(ip){if(!arguments.length){return ig.scale()}ig.scale(ip);ik.scale(ip*0.35);ih.scale(ip);return io.translate(ig.translate())};io.translate=function(ir){if(!arguments.length){return ig.translate()}var iq=ig.scale(),ip=+ir[0],it=+ir[1];ij=ig.translate(ir).clipExtent([[ip-0.455*iq,it-0.238*iq],[ip+0.455*iq,it+0.238*iq]]).stream(e).point;il=ik.translate([ip-0.307*iq,it+0.201*iq]).clipExtent([[ip-0.425*iq+gu,it+0.12*iq+gu],[ip-0.214*iq-gu,it+0.234*iq-gu]]).stream(e).point;ii=ih.translate([ip-0.205*iq,it+0.212*iq]).clipExtent([[ip-0.214*iq+gu,it+0.166*iq+gu],[ip-0.115*iq-gu,it+0.234*iq-gu]]).stream(e).point;return io};return io.scale(1070)};var fW,A,dD={point:aH,lineStart:aH,lineEnd:aH,polygonStart:function(){A=0;dD.lineStart=cN},polygonEnd:function(){dD.lineStart=dD.lineEnd=dD.point=aH;fW+=cI(A/2)}};function cN(){var ii,e,ig,ih;dD.point=function(ik,il){dD.point=ij;ii=ig=ik,e=ih=il};function ij(ik,il){A+=ih*ik-ig*il;ig=ik,ih=il}dD.lineEnd=function(){ij(ii,e)}}var eP,et,eN,es;var ay={point:cW,lineStart:aH,lineEnd:aH,polygonStart:aH,polygonEnd:aH};function cW(e,ig){if(e<eP){eP=e}if(e>eN){eN=e}if(ig<et){et=ig}if(ig>es){es=ig}}function ci(){var ih=g9(4.5),ig=[];var im={point:e,lineStart:function(){im.point=il},lineEnd:ik,polygonStart:function(){im.lineEnd=ii},polygonEnd:function(){im.lineEnd=ik;im.point=e},pointRadius:function(io){ih=g9(io);return im},result:function(){if(ig.length){var io=ig.join("");ig=[];return io}}};function e(io,ip){ig.push("M",io,",",ip,ih)}function il(io,ip){ig.push("M",io,",",ip);im.point=ij}function ij(io,ip){ig.push("L",io,",",ip)}function ik(){im.point=e}function ii(){ig.push("Z")}return im}function g9(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var g8={point:cR,lineStart:f1,lineEnd:cQ,polygonStart:function(){g8.lineStart=bY},polygonEnd:function(){g8.point=cR;g8.lineStart=f1;g8.lineEnd=cQ}};function cR(e,ig){dO+=e;dr+=ig;++c9}function f1(){var e,ig;g8.point=function(ii,ij){g8.point=ih;cR(e=ii,ig=ij)};function ih(ii,im){var ik=ii-e,ij=im-ig,il=Math.sqrt(ik*ik+ij*ij);dN+=il*(e+ii)/2;dq+=il*(ig+im)/2;c7+=il;cR(e=ii,ig=im)}}function cQ(){g8.point=cR}function bY(){var ii,e,ig,ih;g8.point=function(ik,il){g8.point=ij;cR(ii=ig=ik,e=ih=il)};function ij(ik,ip){var im=ik-ig,il=ip-ih,io=Math.sqrt(im*im+il*il);dN+=io*(ig+ik)/2;dq+=io*(ih+ip)/2;c7+=io;io=ih*ik-ig*ip;dM+=io*(ig+ik);dp+=io*(ih+ip);c6+=io*3;cR(ig=ik,ih=ip)}g8.lineEnd=function(){ij(ii,e)}}function cH(ig){var ij=4.5;var im={point:e,lineStart:function(){im.point=il},lineEnd:ik,polygonStart:function(){im.lineEnd=ih},polygonEnd:function(){im.lineEnd=ik;im.point=e},pointRadius:function(io){ij=io;return im},result:aH};function e(io,ip){ig.moveTo(io,ip);ig.arc(io,ip,ij,0,gf)}function il(io,ip){ig.moveTo(io,ip);im.point=ii}function ii(io,ip){ig.lineTo(io,ip)}function ik(){im.point=e}function ih(){ig.closePath()}return im}function fX(ij){var ih=0.5,ii=Math.cos(30*K),ik=16;function ig(it){var iy,iE,iD,iu,iH,iw,im,io,iG,ip,iI,iv,iz;var iq={point:iC,lineStart:ix,lineEnd:iF,polygonStart:function(){it.polygonStart();iq.lineStart=ir},polygonEnd:function(){it.polygonEnd();iq.lineStart=ix}};function iC(iJ,iK){iJ=ij(iJ,iK);it.point(iJ[0],iJ[1])}function ix(){iG=NaN;iq.point=il;it.lineStart()}function il(iK,iJ){var iM=aw([iK,iJ]),iL=ij(iK,iJ);e(iG,ip,io,iI,iv,iz,iG=iL[0],ip=iL[1],io=iK,iI=iM[0],iv=iM[1],iz=iM[2],ik,it);it.point(iG,ip)}function iF(){iq.point=iC;it.lineEnd()}function ir(){ix();iq.point=iB;iq.lineEnd=iA}function iB(iK,iJ){il(iy=iK,iE=iJ),iD=iG,iu=ip,iH=iI,iw=iv,im=iz;iq.point=il}function iA(){e(iG,ip,io,iI,iv,iz,iD,iu,iy,iH,iw,im,ik,it);iq.lineEnd=iF;iF()}return iq}function e(iI,it,io,iP,iw,iE,iH,ir,im,iN,iv,iC,iM,iu){var iA=iH-iI,iz=ir-it,iO=iA*iA+iz*iz;if(iO>4*ih&&iM--){var iL=iP+iN,iK=iw+iv,iJ=iE+iC,iD=Math.sqrt(iL*iL+iK*iK+iJ*iJ),iG=Math.asin(iJ/=iD),il=cI(cI(iJ)-1)<gu?(io+im)/2:Math.atan2(iK,iL),iB=ij(il,iG),iF=iB[0],iq=iB[1],ip=iF-iI,iy=iq-it,ix=iz*ip-iA*iy;if(ix*ix/iO>ih||cI((iA*ip+iz*iy)/iO-0.5)>0.3||iP*iN+iw*iv+iE*iC<ii){e(iI,it,io,iP,iw,iE,iF,iq,il,iL/=iD,iK/=iD,iJ,iM,iu);iu.point(iF,iq);e(iF,iq,il,iL,iK,iJ,iH,ir,im,iN,iv,iC,iM,iu)}}}ig.precision=function(il){if(!arguments.length){return Math.sqrt(ih)}ik=(ih=il*il)>0&&16;return ig};return ig}hp.geo.transform=function(e){return{stream:function(ii){var ih=new eh(ii);for(var ig in e){ih[ig]=e[ig]}return ih}}};function eh(e){this.stream=e}eh.prototype={point:function(e,ig){this.stream.point(e,ig)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};hp.geo.path=function(){var il=4.5,ig,ii,ij,e,ih;function im(io){if(io){if(typeof il==="function"){e.pointRadius(+il.apply(this,arguments))}if(!ih||!ih.valid){ih=ij(e)}hp.geo.stream(io,ih)}return e.result()}im.area=function(io){fW=0;hp.geo.stream(io,ij(dD));return fW};im.centroid=function(io){dO=dr=c9=dN=dq=c7=dM=dp=c6=0;hp.geo.stream(io,ij(g8));return c6?[dM/c6,dp/c6]:c7?[dN/c7,dq/c7]:c9?[dO/c9,dr/c9]:[NaN,NaN]};im.bounds=function(io){eN=es=-(eP=et=Infinity);hp.geo.stream(io,ij(ay));return[[eP,et],[eN,es]]};im.projection=function(io){if(!arguments.length){return ig}ij=(ig=io)?io.stream||hj(io):gr;return ik()};im.context=function(io){if(!arguments.length){return ii}e=(ii=io)==null?new ci():new cH(io);if(typeof il!=="function"){e.pointRadius(il)}return ik()};im.pointRadius=function(io){if(!arguments.length){return il}il=typeof io==="function"?io:(e.pointRadius(+io),+io);return im};function ik(){ih=null;return im}return im.projection(hp.geo.albersUsa()).context(null)};function hj(ig){var e=fX(function(ih,ii){return ig([ih*hF,ii*hF])});return function(ii){var ih=new eh(ii=e(ii));ih.point=function(ij,ik){ii.point(ij*K,ik*K)};return ih}}hp.geo.projection=fJ;hp.geo.projectionMutator=fq;function fJ(e){return fq(function(){return e})()}function fq(iv){var ii,iA,im,ix=fX(function(iF,iG){iF=ii(iF,iG);return[iF[0]*iz+ik,ih-iF[1]*iz]}),iz=150,it=480,iq=250,iy=0,ir=0,io=0,ij=0,iw=0,ik,ih,iE=k,iB=gr,e=null,ig=null,il;function iD(iF){iF=im(iF[0]*K,iF[1]*K);return[iF[0]*iz+ik,ih-iF[1]*iz]}function iu(iF){iF=im.invert((iF[0]-ik)/iz,(ih-iF[1])/iz);return iF&&[iF[0]*hF,iF[1]*hF]}iD.stream=function(iF){if(il){il.valid=false}il=cf(iE(iA,ix(iB(iF))));il.valid=true;return il};iD.clipAngle=function(iF){if(!arguments.length){return e}iE=iF==null?(e=iF,k):aM((e=+iF)*K);return ip()};iD.clipExtent=function(iF){if(!arguments.length){return ig}ig=iF;iB=iF?el(iF[0][0],iF[0][1],iF[1][0],iF[1][1]):gr;return ip()};iD.scale=function(iF){if(!arguments.length){return iz}iz=+iF;return iC()};iD.translate=function(iF){if(!arguments.length){return[it,iq]}it=+iF[0];iq=+iF[1];return iC()};iD.center=function(iF){if(!arguments.length){return[iy*hF,ir*hF]}iy=iF[0]%360*K;ir=iF[1]%360*K;return iC()};iD.rotate=function(iF){if(!arguments.length){return[io*hF,ij*hF,iw*hF]}io=iF[0]%360*K;ij=iF[1]%360*K;iw=iF.length>2?iF[2]%360*K:0;return iC()};hp.rebind(iD,ix,"precision");function iC(){im=fe(iA=dJ(io,ij,iw),ii);var iF=ii(iy,ir);ik=it-iF[0]*iz;ih=iq+iF[1]*iz;return ip()}function ip(){if(il){il.valid=false,il=null}return iD}return function(){ii=iv.apply(this,arguments);iD.invert=ii.invert&&iu;return iC()}}function cf(ig){var e=new eh(ig);e.point=function(ii,ih){ig.point(ii*K,ih*K)};return e}function bw(ig,e){return[ig,e]}(hp.geo.equirectangular=function(){return fJ(bw)}).raw=bw.invert=bw;hp.geo.rotation=function(ig){ig=dJ(ig[0]%360*K,ig[1]*K,ig.length>2?ig[2]*K:0);function e(ih){ih=ig(ih[0]*K,ih[1]*K);return ih[0]*=hF,ih[1]*=hF,ih}e.invert=function(ih){ih=ig.invert(ih[0]*K,ih[1]*K);return ih[0]*=hF,ih[1]*=hF,ih};return e};function bI(ig,e){return[ig>gk?ig-gf:ig<-gk?ig+gf:ig,e]}bI.invert=bw;function dJ(ih,ig,e){return ih?ig||e?fe(e6(ih),bS(ig,e)):e6(ih):ig||e?bS(ig,e):bI}function g1(e){return function(ih,ig){return ih+=e,[ih>gk?ih-gf:ih<-gk?ih+gf:ih,ig]}}function e6(ig){var e=g1(ig);e.invert=g1(-ig);return e}function bS(ik,ig){var ij=Math.cos(ik),il=Math.sin(ik),e=Math.cos(ig),ih=Math.sin(ig);function ii(ip,io){var ir=Math.cos(io),im=Math.cos(ip)*ir,iu=Math.sin(ip)*ir,it=Math.sin(io),iq=it*ij+im*il;return[Math.atan2(iu*e-iq*ih,im*ij-it*il),cd(iq*e+iu*ih)]}ii.invert=function(ip,io){var ir=Math.cos(io),im=Math.cos(ip)*ir,iu=Math.sin(ip)*ir,it=Math.sin(io),iq=it*e-iu*ih;return[Math.atan2(iu*e+it*ih,im*ij+iq*il),cd(iq*ij-im*il)]};return ii}hp.geo.circle=function(){var ig=[0,0],ij,e=6,ih;function ii(){var ik=typeof ig==="function"?ig.apply(this,arguments):ig,im=dJ(-ik[0]*K,-ik[1]*K,0).invert,il=[];ih(null,null,1,{point:function(io,ip){il.push(io=im(io,ip));io[0]*=hF,io[1]*=hF}});return{type:"Polygon",coordinates:[il]}}ii.origin=function(ik){if(!arguments.length){return ig}ig=ik;return ii};ii.angle=function(ik){if(!arguments.length){return ij}ih=b3((ij=+ik)*K,e*K);return ii};ii.precision=function(ik){if(!arguments.length){return e}ih=b3(ij*K,(e=+ik)*K);return ii};return ii.angle(90)};function b3(e,ig){var ii=Math.cos(e),ih=Math.sin(e);return function(iq,ip,io,im){var il=io*ig;if(iq!=null){iq=hV(ii,iq);ip=hV(ii,ip);if(io>0?iq<ip:iq>ip){iq+=io*gf}}else{iq=e+io*gf;ip=e-0.5*il}for(var ij,ik=iq;io>0?ik>ip:ik<ip;ik-=il){im.point((ij=ib([ii,-ih*Math.cos(ik),-ih*Math.sin(ik)]))[0],ij[1])}}}function hV(ih,e){var ig=aw(e);ig[0]-=ih;fs(ig);var ii=af(-ig[1]);return((-ig[2]<0?-ii:ii)+2*Math.PI-gu)%(2*Math.PI)}hp.geo.distance=function(im,il){var io=(il[0]-im[0])*K,iq=im[1]*K,ip=il[1]*K,ij=Math.sin(io),ig=Math.cos(io),ik=Math.sin(iq),ih=Math.cos(iq),ii=Math.sin(ip),e=Math.cos(ip),ir;return Math.atan2(Math.sqrt((ir=e*ij)*ir+(ir=ih*ii-ik*e*ig)*ir),ik*ii+ih*e*ig)};hp.geo.graticule=function(){var iv,ix,iy,iz,ii,ij,ik,im,it=10,ir=it,io=90,il=360,iq,ip,ih,ig,iu=2.5;function iw(){return{type:"MultiLineString",coordinates:e()}}function e(){return hp.range(Math.ceil(iz/io)*io,iy,io).map(ih).concat(hp.range(Math.ceil(im/il)*il,ik,il).map(ig)).concat(hp.range(Math.ceil(ix/it)*it,iv,it).filter(function(iA){return cI(iA%io)>gu}).map(iq)).concat(hp.range(Math.ceil(ij/ir)*ir,ii,ir).filter(function(iA){return cI(iA%il)>gu}).map(ip))}iw.lines=function(){return e().map(function(iA){return{type:"LineString",coordinates:iA}})};iw.outline=function(){return{type:"Polygon",coordinates:[ih(iz).concat(ig(ik).slice(1),ih(iy).reverse().slice(1),ig(im).reverse().slice(1))]}};iw.extent=function(iA){if(!arguments.length){return iw.minorExtent()}return iw.majorExtent(iA).minorExtent(iA)};iw.majorExtent=function(iA){if(!arguments.length){return[[iz,im],[iy,ik]]}iz=+iA[0][0],iy=+iA[1][0];im=+iA[0][1],ik=+iA[1][1];if(iz>iy){iA=iz,iz=iy,iy=iA}if(im>ik){iA=im,im=ik,ik=iA}return iw.precision(iu)};iw.minorExtent=function(iA){if(!arguments.length){return[[ix,ij],[iv,ii]]}ix=+iA[0][0],iv=+iA[1][0];ij=+iA[0][1],ii=+iA[1][1];if(ix>iv){iA=ix,ix=iv,iv=iA}if(ij>ii){iA=ij,ij=ii,ii=iA}return iw.precision(iu)};iw.step=function(iA){if(!arguments.length){return iw.minorStep()}return iw.majorStep(iA).minorStep(iA)};iw.majorStep=function(iA){if(!arguments.length){return[io,il]}io=+iA[0],il=+iA[1];return iw};iw.minorStep=function(iA){if(!arguments.length){return[it,ir]}it=+iA[0],ir=+iA[1];return iw};iw.precision=function(iA){if(!arguments.length){return iu}iu=+iA;iq=aL(ij,ii,90);ip=aJ(ix,iv,iu);ih=aL(im,ik,90);ig=aJ(iz,iy,iu);return iw};return iw.majorExtent([[-180,-90+gu],[180,90-gu]]).minorExtent([[-180,-80-gu],[180,80+gu]])};function aL(ih,ig,e){var ii=hp.range(ih,ig-gu,e).concat(ig);return function(ij){return ii.map(function(ik){return[ij,ik]})}}function aJ(ii,ih,ig){var e=hp.range(ii,ih-gu,ig).concat(ih);return function(ij){return e.map(function(ik){return[ik,ij]})}}function hK(e){return e.source}function hT(e){return e.target}hp.geo.greatArc=function(){var ih=hK,ig,ii=hT,ij;function e(){return{type:"LineString",coordinates:[ig||ih.apply(this,arguments),ij||ii.apply(this,arguments)]}}e.distance=function(){return hp.geo.distance(ig||ih.apply(this,arguments),ij||ii.apply(this,arguments))};e.source=function(ik){if(!arguments.length){return ih}ih=ik,ig=typeof ik==="function"?null:ik;return e};e.target=function(ik){if(!arguments.length){return ii}ii=ik,ij=typeof ik==="function"?null:ik;return e};e.precision=function(){return arguments.length?e:0};return e};hp.geo.interpolate=function(e,ig){return g(e[0]*K,e[1]*K,ig[0]*K,ig[1]*K)};function g(ii,iv,ih,it){var il=Math.cos(iv),iu=Math.sin(iv),ij=Math.cos(it),ir=Math.sin(it),io=il*Math.cos(ii),ig=il*Math.sin(ii),im=ij*Math.cos(ih),e=ij*Math.sin(ih),iq=2*Math.asin(Math.sqrt(aE(it-iv)+il*ij*aE(ih-ii))),ik=1/Math.sin(iq);var ip=iq?function(iy){var iB=Math.sin(iy*=iq)*ik,ix=Math.sin(iq-iy)*ik,iw=ix*io+iB*im,iA=ix*ig+iB*e,iz=ix*iu+iB*ir;return[Math.atan2(iA,iw)*hF,Math.atan2(iz,Math.sqrt(iw*iw+iA*iA))*hF]}:function(){return[ii*hF,iv*hF]};ip.distance=iq;return ip}hp.geo.length=function(e){dY=0;hp.geo.stream(e,f5);return dY};var dY;var f5={sphere:aH,point:aH,lineStart:hN,lineEnd:aH,polygonStart:aH,polygonEnd:aH};function hN(){var ig,ih,e;f5.point=function(ik,ij){ig=ik*K,ih=Math.sin(ij*=K),e=Math.cos(ij);f5.point=ii};f5.lineEnd=function(){f5.point=f5.lineEnd=aH};function ii(ik,ij){var io=Math.sin(ij*=K),ip=Math.cos(ij),il=cI((ik*=K)-ig),im=Math.cos(il);dY+=Math.atan2(Math.sqrt((il=ip*Math.sin(il))*il+(il=e*io-ih*ip*im)*il),ih*io+e*ip*im);ig=ik,ih=io,e=ip}}function eC(ih,ig){function e(ij,ii){var im=Math.cos(ij),il=Math.cos(ii),ik=ih(im*il);return[ik*il*Math.sin(ij),ik*Math.sin(ii)]}e.invert=function(ii,io){var il=Math.sqrt(ii*ii+io*io),im=ig(il),ij=Math.sin(im),ik=Math.cos(im);return[Math.atan2(ii*ij,il*ik),Math.asin(il&&io*ij/il)]};return e}var bt=eC(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(hp.geo.azimuthalEqualArea=function(){return fJ(bt)}).raw=bt;var bH=eC(function(e){var ig=Math.acos(e);return ig&&ig/Math.sin(ig)},gr);(hp.geo.azimuthalEquidistant=function(){return fJ(bH)}).raw=bH;function fS(ih,ig){var e=Math.cos(ih),ij=function(im){return Math.tan(gk/4+im/2)},il=ih===ig?Math.sin(ih):Math.log(e/Math.cos(ig))/Math.log(ij(ig)/ij(ih)),ik=e*Math.pow(ij(ih),il)/il;if(!il){return aU}function ii(io,im){var ip=cI(cI(im)-eu)<gu?0:ik/Math.pow(ij(im),il);return[ip*Math.sin(il*io),ik-ip*Math.cos(il*io)]}ii.invert=function(im,iq){var ip=ik-iq,io=b8(il)*Math.sqrt(im*im+ip*ip);return[Math.atan2(im,ip)/il,2*Math.atan(Math.pow(ik/io,1/il))-eu]};return ii}(hp.geo.conicConformal=function(){return b5(fS)}).raw=fS;function hC(ih,ig){var e=Math.cos(ih),ik=ih===ig?Math.sin(ih):(e-Math.cos(ig))/(ig-ih),ij=e/ik+ih;if(cI(ik)<gu){return bw}function ii(im,il){var io=ij-il;return[io*Math.sin(ik*im),ij-io*Math.cos(ik*im)]}ii.invert=function(il,io){var im=ij-io;return[Math.atan2(il,im)/ik,ij-b8(ik)*Math.sqrt(il*il+im*im)]};return ii}(hp.geo.conicEquidistant=function(){return b5(hC)}).raw=hC;var eK=eC(function(e){return 1/e},Math.atan);(hp.geo.gnomonic=function(){return fJ(eK)}).raw=eK;function aU(ig,e){return[ig,Math.log(Math.tan(gk/4+e/2))]}aU.invert=function(e,ig){return[e,2*Math.atan(Math.exp(ig))-eu]};function c8(ik){var e=fJ(ik),ij=e.scale,ii=e.translate,ig=e.clipExtent,ih;e.scale=function(){var il=ij.apply(e,arguments);return il===e?ih?e.clipExtent(null):e:il};e.translate=function(){var il=ii.apply(e,arguments);return il===e?ih?e.clipExtent(null):e:il};e.clipExtent=function(io){var im=ig.apply(e,arguments);if(im===e){if(ih=io==null){var il=gk*ij(),ip=ii();ig([[ip[0]-il,ip[1]-il],[ip[0]+il,ip[1]+il]])}}else{if(ih){im=null}}return im};return e.clipExtent(null)}(hp.geo.mercator=function(){return c8(aU)}).raw=aU;var f7=eC(function(){return 1},Math.asin);(hp.geo.orthographic=function(){return fJ(f7)}).raw=f7;var cb=eC(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(hp.geo.stereographic=function(){return fJ(cb)}).raw=cb;function al(ig,e){var ih=Math.cos(e)*Math.sin(ig);return[Math.log((1+ih)/(1-ih))/2,Math.atan2(Math.tan(e),Math.cos(ig))]}al.invert=function(e,ig){return[Math.atan2(d0(e),Math.cos(ig)),cd(Math.sin(ig)/bC(e))]};(hp.geo.transverseMercator=function(){return c8(al)}).raw=al;hp.geom={};function hX(e){return e[0]}function hW(e){return e[1]}hp.geom.hull=function(ig){var e=hX,ii=hW;if(arguments.length){return ih(ig)}function ih(iF){if(iF.length<3){return[]}var im=T(e),il=T(ii),iv=iF.length,ip,ir=iv-1,iy=[],iq=[],iD,iz,iw,iA=0,iC,ik,iB,ij,iu,it,iE,ix;if(im===hX&&ii===hW){ip=iF}else{for(iz=0,ip=[];iz<iv;++iz){ip.push([+im.call(this,iD=iF[iz],iz),+il.call(this,iD,iz)])}}for(iz=1;iz<iv;++iz){if(ip[iz][1]<ip[iA][1]||ip[iz][1]==ip[iA][1]&&ip[iz][0]<ip[iA][0]){iA=iz}}for(iz=0;iz<iv;++iz){if(iz===iA){continue}ik=ip[iz][1]-ip[iA][1];iC=ip[iz][0]-ip[iA][0];iy.push({angle:Math.atan2(ik,iC),index:iz})}iy.sort(function(iH,iG){return iH.angle-iG.angle});iE=iy[0].angle;it=iy[0].index;iu=0;for(iz=1;iz<ir;++iz){iw=iy[iz].index;if(iE==iy[iz].angle){iC=ip[it][0]-ip[iA][0];ik=ip[it][1]-ip[iA][1];iB=ip[iw][0]-ip[iA][0];ij=ip[iw][1]-ip[iA][1];if(iC*iC+ik*ik>=iB*iB+ij*ij){iy[iz].index=-1;continue}else{iy[iu].index=-1}}iE=iy[iz].angle;iu=iz;it=iw}iq.push(iA);for(iz=0,iw=0;iz<2;++iw){if(iy[iw].index>-1){iq.push(iy[iw].index);iz++}}ix=iq.length;for(;iw<ir;++iw){if(iy[iw].index<0){continue}while(!dK(iq[ix-2],iq[ix-1],iy[iw].index,ip)){--ix}iq[ix++]=iy[iw].index}var io=[];for(iz=ix-1;iz>=0;--iz){io.push(iF[iq[iz]])}return io}ih.x=function(ij){return arguments.length?(e=ij,ih):e};ih.y=function(ij){return arguments.length?(ii=ij,ih):ii};return ih};function dK(ii,ih,ig,iq){var ir,ip,io,im,il,ik,ij;ir=iq[ii];ip=ir[0];io=ir[1];ir=iq[ih];im=ir[0];il=ir[1];ir=iq[ig];ik=ir[0];ij=ir[1];return(ij-io)*(im-ip)-(il-io)*(ik-ip)>0}hp.geom.polygon=function(e){h8(e,ew);return e};var ew=hp.geom.polygon.prototype=[];ew.area=function(){var ih=-1,ij=this.length,ig,e=this[ij-1],ii=0;while(++ih<ij){ig=e;e=this[ih];ii+=ig[1]*e[0]-ig[0]*e[1]}return ii*0.5};ew.centroid=function(ii){var ij=-1,im=this.length,ig=0,il=0,ih,e=this[im-1],ik;if(!arguments.length){ii=-1/(6*this.area())}while(++ij<im){ih=e;e=this[ij];ik=ih[0]*e[1]-e[0]*ih[1];ig+=(ih[0]+e[0])*ik;il+=(ih[1]+e[1])*ik}return[ig*ii,il*ii]};ew.clip=function(im){var ip,ij=gX(im),ii=-1,e=this.length-gX(this),ih,ig,iq=this[e-1],io,il,ik;while(++ii<e){ip=im.slice();im.length=0;io=this[ii];il=ip[(ig=ip.length-ij)-1];ih=-1;while(++ih<ig){ik=ip[ih];if(D(ik,iq,io)){if(!D(il,iq,io)){im.push(gs(il,ik,iq,io))}im.push(ik)}else{if(D(il,iq,io)){im.push(gs(il,ik,iq,io))}}il=ik}if(ij){im.push(im[0])}iq=io}return im};function D(ih,ig,e){return(e[0]-ig[0])*(ih[1]-ig[1])<(e[1]-ig[1])*(ih[0]-ig[0])}function gs(il,ij,iq,im){var ih=il[0],e=iq[0],ii=ij[0]-ih,ir=im[0]-e,ip=il[1],ik=iq[1],io=ij[1]-ip,it=im[1]-ik,ig=(ir*(ip-ik)-it*(ih-e))/(it*ii-ir*io);return[ih+ig*ii,ip+ig*io]}function gX(ih){var ig=ih[0],e=ih[ih.length-1];return !(ig[0]-e[0]||ig[1]-e[1])}var gT,eE,cT,dh=[],hg,d8,ey=[];function gI(){t(this);this.edge=this.site=this.circle=null}function e2(ig){var e=dh.pop()||new gI();e.site=ig;return e}function gH(e){eQ(e);cT.remove(e);dh.push(e);t(e)}function hr(ig){var e=ig.circle,ip=e.x,il=e.cy,ij={x:ip,y:il},ik=ig.P,ii=ig.N,io=[ig];gH(ig);var ir=ik;while(ir.circle&&cI(ip-ir.circle.x)<gu&&cI(il-ir.circle.cy)<gu){ik=ir.P;io.unshift(ir);gH(ir);ir=ik}io.unshift(ir);eQ(ir);var ih=ii;while(ih.circle&&cI(ip-ih.circle.x)<gu&&cI(il-ih.circle.cy)<gu){ii=ih.N;io.push(ih);gH(ih);ih=ii}io.push(ih);eQ(ih);var iq=io.length,im;for(im=1;im<iq;++im){ih=io[im];ir=io[im-1];cp(ih.edge,ir.site,ih.site,ij)}ir=io[0];ih=io[iq-1];ih.edge=hn(ir.site,ih.site,null,ij);Y(ir);Y(ih)}function dx(iq){var io=iq.x,it=iq.y,iv,ir,iB,iw,iu=cT._;while(iu){iB=db(iu,it)-io;if(iB>gu){iu=iu.L}else{iw=io-gl(iu,it);if(iw>gu){if(!iu.R){iv=iu;break}iu=iu.R}else{if(iB>-gu){iv=iu.P;ir=iu}else{if(iw>-gu){iv=iu;ir=iu.N}else{iv=ir=iu}}break}}}var ii=e2(iq);cT.insert(iv,ii);if(!iv&&!ir){return}if(iv===ir){eQ(iv);ir=e2(iv.site);cT.insert(ii,ir);ii.edge=ir.edge=hn(iv.site,ii.site);Y(iv);Y(ir);return}if(!ir){ii.edge=hn(iv.site,ii.site);return}eQ(iv);eQ(ir);var il=iv.site,ip=il.x,im=il.y,iz=iq.x-ip,ix=iq.y-im,e=ir.site,ih=e.x-ip,ig=e.y-im,iA=2*(iz*ig-ix*ih),ik=iz*iz+ix*ix,ij=ih*ih+ig*ig,iy={x:(ig*ik-ix*ij)/iA+ip,y:(iz*ij-ih*ik)/iA+im};cp(ir.edge,il,e,iy);ii.edge=hn(il,iq,null,iy);ir.edge=hn(iq,e,null,iy);Y(iv);Y(ir)}function db(ii,ij){var e=ii.site,ir=e.x,iq=e.y,ip=iq-ij;if(!ip){return ir}var it=ii.P;if(!it){return -Infinity}e=it.site;var il=e.x,ik=e.y,ih=ik-ij;if(!ih){return il}var ig=il-ir,io=1/ip-1/ih,im=ig/ih;if(io){return(-im+Math.sqrt(im*im-2*io*(ig*ig/(-2*ih)-ik+ih/2+iq-ip/2)))/io+ir}return(ir+il)/2}function gl(ig,ih){var ii=ig.N;if(ii){return db(ii,ih)}var e=ig.site;return e.y===ih?e.x:Infinity}function bW(e){this.site=e;this.edges=[]}bW.prototype.prepare=function(){var ih=this.edges,e=ih.length,ig;while(e--){ig=ih[e].edge;if(!ig.b||!ig.a){ih.splice(e,1)}}ih.sort(u);return ih.length};function bx(ix){var il=ix[0][0],ik=ix[1][0],it=ix[0][1],ir=ix[1][1],ii,iq,e,ip,iw=eE,ih=iw.length,iv,iu,io,ig,ij,im;while(ih--){iv=iw[ih];if(!iv||!iv.prepare()){continue}io=iv.edges;ig=io.length;iu=0;while(iu<ig){im=io[iu].end(),e=im.x,ip=im.y;ij=io[++iu%ig].start(),ii=ij.x,iq=ij.y;if(cI(e-ii)>gu||cI(ip-iq)>gu){io.splice(iu,0,new h3(hb(iv.site,im,cI(e-il)<gu&&ir-ip>gu?{x:il,y:cI(ii-il)<gu?iq:ir}:cI(ip-ir)<gu&&ik-e>gu?{x:cI(iq-ir)<gu?ii:ik,y:ir}:cI(e-ik)<gu&&ip-it>gu?{x:ik,y:cI(ii-ik)<gu?iq:it}:cI(ip-it)<gu&&e-il>gu?{x:cI(iq-it)<gu?ii:il,y:it}:null),iv.site,null));++ig}}}}function u(ig,e){return e.angle-ig.angle}function aW(){t(this);this.x=this.y=this.arc=this.site=this.cy=null}function Y(il){var iw=il.P,iu=il.N;if(!iw||!iu){return}var io=iw.site,iz=il.site,e=iu.site;if(io===e){return}var iy=iz.x,ix=iz.y,ir=io.x-iy,ip=io.y-ix,ih=e.x-iy,ig=e.y-ix;var iA=2*(ir*ig-ip*ih);if(iA>=-eI){return}var ik=ir*ir+ip*ip,ij=ih*ih+ig*ig,iq=(ig*ik-ip*ij)/iA,im=(ir*ij-ih*ik)/iA,ig=im+ix;var ii=ey.pop()||new aW();ii.arc=il;ii.site=iz;ii.x=iq+iy;ii.y=ig+Math.sqrt(iq*iq+im*im);ii.cy=ig;il.circle=ii;var it=null,iv=d8._;while(iv){if(ii.y<iv.y||ii.y===iv.y&&ii.x<=iv.x){if(iv.L){iv=iv.L}else{it=iv.P;break}}else{if(iv.R){iv=iv.R}else{it=iv;break}}}d8.insert(it,ii);if(!it){hg=ii}}function eQ(e){var ig=e.circle;if(ig){if(!ig.P){hg=ig.N}d8.remove(ig);ey.push(ig);t(ig);e.circle=null}}function hE(ii){var ig=gT,ij=am(ii[0][0],ii[0][1],ii[1][0],ii[1][1]),ih=ig.length,ik;while(ih--){ik=ig[ih];if(!bn(ik,ii)||!ij(ik)||cI(ik.a.x-ik.b.x)<gu&&cI(ik.a.y-ik.b.y)<gu){ik.a=ik.b=null;ig.splice(ih,1)}}}function bn(ir,iv){var e=ir.b;if(e){return true}var ig=ir.a,iy=iv[0][0],ix=iv[1][0],ik=iv[0][1],ii=iv[1][1],iu=ir.l,ih=ir.r,io=iu.x,im=iu.y,iq=ih.x,ip=ih.y,il=(io+iq)/2,ij=(im+ip)/2,it,iw;if(ip===im){if(il<iy||il>=ix){return}if(io>iq){if(!ig){ig={x:il,y:ik}}else{if(ig.y>=ii){return}}e={x:il,y:ii}}else{if(!ig){ig={x:il,y:ii}}else{if(ig.y<ik){return}}e={x:il,y:ik}}}else{it=(io-iq)/(ip-im);iw=ij-it*il;if(it<-1||it>1){if(io>iq){if(!ig){ig={x:(ik-iw)/it,y:ik}}else{if(ig.y>=ii){return}}e={x:(ii-iw)/it,y:ii}}else{if(!ig){ig={x:(ii-iw)/it,y:ii}}else{if(ig.y<ik){return}}e={x:(ik-iw)/it,y:ik}}}else{if(im<ip){if(!ig){ig={x:iy,y:it*iy+iw}}else{if(ig.x>=ix){return}}e={x:ix,y:it*ix+iw}}else{if(!ig){ig={x:ix,y:it*ix+iw}}else{if(ig.x<iy){return}}e={x:iy,y:it*iy+iw}}}}ir.a=ig;ir.b=e;return true}function H(ig,e){this.l=ig;this.r=e;this.a=this.b=null}function hn(ij,e,ii,ig){var ih=new H(ij,e);gT.push(ih);if(ii){cp(ih,ij,e,ii)}if(ig){cp(ih,e,ij,ig)}eE[ij.i].edges.push(new h3(ih,ij,e));eE[e.i].edges.push(new h3(ih,e,ij));return ih}function hb(ii,ih,e){var ig=new H(ii,null);ig.a=ih;ig.b=e;gT.push(ig);return ig}function cp(ig,ii,e,ih){if(!ig.a&&!ig.b){ig.a=ih;ig.l=ii;ig.r=e}else{if(ig.l===e){ig.b=ih}else{ig.a=ih}}}function h3(ii,ij,e){var ih=ii.a,ig=ii.b;this.edge=ii;this.site=ij;this.angle=e?Math.atan2(e.y-ij.y,e.x-ij.x):ii.l===ij?Math.atan2(ig.x-ih.x,ih.y-ig.y):Math.atan2(ih.x-ig.x,ig.y-ih.y)}h3.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ba(){this._=null}function t(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ba.prototype={insert:function(ij,ii){var ih,ig,e;if(ij){ii.P=ij;ii.N=ij.N;if(ij.N){ij.N.P=ii}ij.N=ii;if(ij.R){ij=ij.R;while(ij.L){ij=ij.L}ij.L=ii}else{ij.R=ii}ih=ij}else{if(this._){ij=df(this._);ii.P=null;ii.N=ij;ij.P=ij.L=ii;ih=ij}else{ii.P=ii.N=null;this._=ii;ih=null}}ii.L=ii.R=null;ii.U=ih;ii.C=true;ij=ii;while(ih&&ih.C){ig=ih.U;if(ih===ig.L){e=ig.R;if(e&&e.C){ih.C=e.C=false;ig.C=true;ij=ig}else{if(ij===ih.R){ak(this,ih);ij=ih;ih=ij.U}ih.C=false;ig.C=true;eU(this,ig)}}else{e=ig.L;if(e&&e.C){ih.C=e.C=false;ig.C=true;ij=ig}else{if(ij===ih.L){eU(this,ih);ij=ih;ih=ij.U}ih.C=false;ig.C=true;ak(this,ig)}}ih=ij.U}this._.C=false},remove:function(ij){if(ij.N){ij.N.P=ij.P}if(ij.P){ij.P.N=ij.N}ij.N=ij.P=null;var ii=ij.U,ih,il=ij.L,e=ij.R,ig,ik;if(!il){ig=e}else{if(!e){ig=il}else{ig=df(e)}}if(ii){if(ii.L===ij){ii.L=ig}else{ii.R=ig}}else{this._=ig}if(il&&e){ik=ig.C;ig.C=ij.C;ig.L=il;il.U=ig;if(ig!==e){ii=ig.U;ig.U=ij.U;ij=ig.R;ii.L=ij;ig.R=e;e.U=ig}else{ig.U=ii;ii=ig;ij=ig.R}}else{ik=ij.C;ij=ig}if(ij){ij.U=ii}if(ik){return}if(ij&&ij.C){ij.C=false;return}do{if(ij===this._){break}if(ij===ii.L){ih=ii.R;if(ih.C){ih.C=false;ii.C=true;ak(this,ii);ih=ii.R}if(ih.L&&ih.L.C||ih.R&&ih.R.C){if(!ih.R||!ih.R.C){ih.L.C=false;ih.C=true;eU(this,ih);ih=ii.R}ih.C=ii.C;ii.C=ih.R.C=false;ak(this,ii);ij=this._;break}}else{ih=ii.L;if(ih.C){ih.C=false;ii.C=true;eU(this,ii);ih=ii.L}if(ih.L&&ih.L.C||ih.R&&ih.R.C){if(!ih.L||!ih.L.C){ih.R.C=false;ih.C=true;ak(this,ih);ih=ii.L}ih.C=ii.C;ii.C=ih.L.C=false;eU(this,ii);ij=this._;break}}ih.C=true;ij=ii;ii=ii.U}while(!ij.C);if(ij){ij.C=false}}};function ak(e,ih){var ij=ih,ii=ih.R,ig=ij.U;if(ig){if(ig.L===ij){ig.L=ii}else{ig.R=ii}}else{e._=ii}ii.U=ig;ij.U=ii;ij.R=ii.L;if(ij.R){ij.R.U=ij}ii.L=ij}function eU(e,ih){var ij=ih,ii=ih.L,ig=ij.U;if(ig){if(ig.L===ij){ig.L=ii}else{ig.R=ii}}else{e._=ii}ii.U=ig;ij.U=ii;ij.L=ii.R;if(ij.L){ij.L.U=ij}ii.R=ij}function df(e){while(e.L){e=e.L}return e}function g5(ik,il){var ig=ik.sort(bk).pop(),ih,ii,ij;gT=[];eE=new Array(ik.length);cT=new ba();d8=new ba();while(true){ij=hg;if(ig&&(!ij||ig.y<ij.y||ig.y===ij.y&&ig.x<ij.x)){if(ig.x!==ih||ig.y!==ii){eE[ig.i]=new bW(ig);dx(ig);ih=ig.x,ii=ig.y}ig=ik.pop()}else{if(ij){hr(ij.arc)}else{break}}}if(il){hE(il),bx(il)}var e={cells:eE,edges:gT};cT=d8=gT=eE=null;return e}function bk(ig,e){return e.y-ig.y||e.x-ig.x}hp.geom.voronoi=function(ii){var e=hX,im=hW,ij=e,ih=im,ig=hH;if(ii){return il(ii)}function il(iu){var io=new Array(iu.length),iq=ig[0][0],it=ig[0][1],ip=ig[1][0],ir=ig[1][1];g5(ik(iu),ig).cells.forEach(function(iv,iz){var iw=iv.edges,ix=iv.site,iy=io[iz]=iw.length?iw.map(function(iB){var iA=iB.start();return[iA.x,iA.y]}):ix.x>=iq&&ix.x<=ip&&ix.y>=it&&ix.y<=ir?[[iq,ir],[ip,ir],[ip,it],[iq,it]]:[];iy.point=iu[iz]});return io}function ik(io){return io.map(function(iq,ip){return{x:Math.round(ij(iq,ip)/gu)*gu,y:Math.round(ih(iq,ip)/gu)*gu,i:ip}})}il.links=function(io){return g5(ik(io)).edges.filter(function(ip){return ip.l&&ip.r}).map(function(ip){return{source:io[ip.l.i],target:io[ip.r.i]}})};il.triangles=function(ip){var io=[];g5(ik(ip)).cells.forEach(function(iz,iv){var iq=iz.site,iu=iz.edges.sort(u),it=-1,ir=iu.length,ix,iA,iw=iu[ir-1].edge,iy=iw.l===iq?iw.r:iw.l;while(++it<ir){ix=iw;iA=iy;iw=iu[it].edge;iy=iw.l===iq?iw.r:iw.l;if(iv<iA.i&&iv<iy.i&&gG(iq,iA,iy)<0){io.push([ip[iv],ip[iA.i],ip[iy.i]])}}});return io};il.x=function(io){return arguments.length?(ij=T(e=io),il):e};il.y=function(io){return arguments.length?(ih=T(im=io),il):im};il.clipExtent=function(io){if(!arguments.length){return ig===hH?null:ig}ig=io==null?hH:io;return il};il.size=function(io){if(!arguments.length){return ig===hH?null:ig&&ig[1]}return il.clipExtent(io&&[[0,0],io])};return il};var hH=[[-1000000,-1000000],[1000000,1000000]];function gG(ig,e,ih){return(ig.x-ih.x)*(e.y-ig.y)-(ig.x-e.x)*(ih.y-ig.y)}hp.geom.delaunay=function(e){return hp.geom.voronoi().triangles(e)};hp.geom.quadtree=function(im,ig,ik,e,ij){var il=hX,ii=hW,io;if(io=arguments.length){il=gb;ii=ga;if(io===3){ij=ik;e=ig;ik=ig=0}return ih(im)}function ih(iI){var iF,iu=T(il),ir=T(ii),iw,iC,iD,iA,ip,iz,iv,iH;if(ig!=null){ip=ig,iz=ik,iv=e,iH=ij}else{iv=iH=-(ip=iz=Infinity);iw=[],iC=[];iA=iI.length;if(io){for(iD=0;iD<iA;++iD){iF=iI[iD];if(iF.x<ip){ip=iF.x}if(iF.y<iz){iz=iF.y}if(iF.x>iv){iv=iF.x}if(iF.y>iH){iH=iF.y}iw.push(iF.x);iC.push(iF.y)}}else{for(iD=0;iD<iA;++iD){var iE=+iu(iF=iI[iD],iD),it=+ir(iF,iD);if(iE<ip){ip=iE}if(it<iz){iz=it}if(iE>iv){iv=iE}if(it>iH){iH=it}iw.push(iE);iC.push(it)}}}var iy=iv-ip,ix=iH-iz;if(iy>ix){iH=iz+iy}else{iv=ip+ix}function iq(iL,iP,iT,iQ,iK,iS,iJ,iR){if(isNaN(iT)||isNaN(iQ)){return}if(iL.leaf){var iO=iL.x,iN=iL.y;if(iO!=null){if(cI(iO-iT)+cI(iN-iQ)<0.01){iG(iL,iP,iT,iQ,iK,iS,iJ,iR)}else{var iM=iL.point;iL.x=iL.y=iL.point=null;iG(iL,iM,iO,iN,iK,iS,iJ,iR);iG(iL,iP,iT,iQ,iK,iS,iJ,iR)}}else{iL.x=iT,iL.y=iQ,iL.point=iP}}else{iG(iL,iP,iT,iQ,iK,iS,iJ,iR)}}function iG(iM,iO,iU,iQ,iL,iT,iK,iR){var iS=(iL+iK)*0.5,iP=(iT+iR)*0.5,iV=iU>=iS,iJ=iQ>=iP,iN=(iJ<<1)+iV;iM.leaf=false;iM=iM.nodes[iN]||(iM.nodes[iN]=fQ());if(iV){iL=iS}else{iK=iS}if(iJ){iT=iP}else{iR=iP}iq(iM,iO,iU,iQ,iL,iT,iK,iR)}var iB=fQ();iB.add=function(iJ){iq(iB,iJ,+iu(iJ,++iD),+ir(iJ,iD),ip,iz,iv,iH)};iB.visit=function(iJ){cO(iJ,iB,ip,iz,iv,iH)};iD=-1;if(ig==null){while(++iD<iA){iq(iB,iI[iD],iw[iD],iC[iD],ip,iz,iv,iH)}--iD}else{iI.forEach(iB.add)}iw=iC=iI=iF=null;return iB}ih.x=function(ip){return arguments.length?(il=ip,ih):il};ih.y=function(ip){return arguments.length?(ii=ip,ih):ii};ih.extent=function(ip){if(!arguments.length){return ig==null?null:[[ig,ik],[e,ij]]}if(ip==null){ig=ik=e=ij=null}else{ig=+ip[0][0],ik=+ip[0][1],e=+ip[1][0],ij=+ip[1][1]}return ih};ih.size=function(ip){if(!arguments.length){return ig==null?null:[e-ig,ij-ik]}if(ip==null){ig=ik=e=ij=null}else{ig=ik=0,e=+ip[0],ij=+ip[1]}return ih};return ih};function gb(e){return e.x}function ga(e){return e.y}function fQ(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function cO(ij,ii,ig,io,e,il){if(!ij(ii,ig,io,e,il)){var im=(ig+e)*0.5,ik=(io+il)*0.5,ih=ii.nodes;if(ih[0]){cO(ij,ih[0],ig,io,im,ik)}if(ih[1]){cO(ij,ih[1],im,io,e,ik)}if(ih[2]){cO(ij,ih[2],ig,ik,im,il)}if(ih[3]){cO(ij,ih[3],im,ik,e,il)}}}hp.interpolateRgb=aP;function aP(ig,e){ig=hp.rgb(ig);e=hp.rgb(e);var ii=ig.r,ih=ig.g,il=ig.b,ik=e.r-ii,ij=e.g-ih,im=e.b-il;return function(io){return"#"+cx(Math.round(ii+ik*io))+cx(Math.round(ih+ij*io))+cx(Math.round(il+im*io))}}hp.interpolateObject=bL;function bL(ig,e){var ii={},ij={},ih;for(ih in ig){if(ih in e){ii[ih]=fL(ig[ih],e[ih])}else{ij[ih]=ig[ih]}}for(ih in e){if(!(ih in ig)){ij[ih]=e[ih]}}return function(ik){for(ih in ii){ij[ih]=ii[ih](ik)}return ij}}hp.interpolateNumber=bE;function bE(ig,e){e-=ig=+ig;return function(ih){return ig+e*ih}}hp.interpolateString=bZ;function bZ(im,il){var ii,ik,ij,ip=0,io=0,iq=[],e=[],ih,ig;im=im+"",il=il+"";f0.lastIndex=0;for(ik=0;ii=f0.exec(il);++ik){if(ii.index){iq.push(il.substring(ip,io=ii.index))}e.push({i:iq.length,x:ii[0]});iq.push(null);ip=f0.lastIndex}if(ip<il.length){iq.push(il.substring(ip))}for(ik=0,ih=e.length;(ii=f0.exec(im))&&ik<ih;++ik){ig=e[ik];if(ig.x==ii[0]){if(ig.i){if(iq[ig.i+1]==null){iq[ig.i-1]+=ig.x;iq.splice(ig.i,1);for(ij=ik+1;ij<ih;++ij){e[ij].i--}}else{iq[ig.i-1]+=ig.x+iq[ig.i+1];iq.splice(ig.i,2);for(ij=ik+1;ij<ih;++ij){e[ij].i-=2}}}else{if(iq[ig.i+1]==null){iq[ig.i]=ig.x}else{iq[ig.i]=ig.x+iq[ig.i+1];iq.splice(ig.i+1,1);for(ij=ik+1;ij<ih;++ij){e[ij].i--}}}e.splice(ik,1);ih--;ik--}else{ig.x=bE(parseFloat(ii[0]),parseFloat(ig.x))}}while(ik<ih){ig=e.pop();if(iq[ig.i+1]==null){iq[ig.i]=ig.x}else{iq[ig.i]=ig.x+iq[ig.i+1];iq.splice(ig.i+1,1)}ih--}if(iq.length===1){return iq[0]==null?(ig=e[0].x,function(ir){return ig(ir)+""}):function(){return il}}return function(ir){for(ik=0;ik<ih;++ik){iq[(ig=e[ik]).i]=ig.x(ir)}return iq.join("")}}var f0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;hp.interpolate=fL;function fL(ig,e){var ih=hp.interpolators.length,ii;while(--ih>=0&&!(ii=hp.interpolators[ih](ig,e))){}return ii}hp.interpolators=[function(ig,e){var ih=typeof e;return(ih==="string"?ao.has(e)||/^(#|rgb\(|hsl\()/.test(e)?aP:bZ:e instanceof G?aP:ih==="object"?Array.isArray(e)?eS:bL:bE)(ig,e)}];hp.interpolateArray=eS;function eS(ij,ih){var ig=[],im=[],ii=ij.length,e=ih.length,il=Math.min(ij.length,ih.length),ik;for(ik=0;ik<il;++ik){ig.push(fL(ij[ik],ih[ik]))}for(;ik<ii;++ik){im[ik]=ij[ik]}for(;ik<e;++ik){im[ik]=ih[ik]}return function(io){for(ik=0;ik<il;++ik){im[ik]=ig[ik](io)}return im}}var hl=function(){return gr};var ad=hp.map({linear:hl,poly:aT,quad:function(){return bX},cubic:function(){return J},sin:function(){return gj},exp:function(){return fC},circle:function(){return eb},elastic:X,back:g2,bounce:function(){return ck}});var j=hp.map({"in":gr,out:C,"in-out":a2,"out-in":function(e){return a2(C(e))}});hp.ease=function(ig){var ii=ig.indexOf("-"),ih=ii>=0?ig.substring(0,ii):ig,e=ii>=0?ig.substring(ii+1):"in";ih=ad.get(ih)||hl;e=j.get(e)||gr;return fI(e(ih.apply(null,bN.call(arguments,1))))};function fI(e){return function(ig){return ig<=0?0:ig>=1?1:e(ig)}}function C(e){return function(ig){return 1-e(1-ig)}}function a2(e){return function(ig){return 0.5*(ig<0.5?e(2*ig):2-e(2-2*ig))}}function bX(e){return e*e}function J(e){return e*e*e}function ax(ig){if(ig<=0){return 0}if(ig>=1){return 1}var ih=ig*ig,e=ih*ig;return 4*(ig<0.5?e:3*(ig-ih)+e-0.75)}function aT(ig){return function(e){return Math.pow(e,ig)}}function gj(e){return 1-Math.cos(e*eu)}function fC(e){return Math.pow(2,10*(e-1))}function eb(e){return 1-Math.sqrt(1-e*e)}function X(e,ih){var ig;if(arguments.length<2){ih=0.45}if(arguments.length){ig=ih/gf*Math.asin(1/e)}else{e=1,ig=ih/4}return function(ii){return 1+e*Math.pow(2,-10*ii)*Math.sin((ii-ig)*gf/ih)}}function g2(e){if(!e){e=1.70158}return function(ig){return ig*ig*((e+1)*ig-e)}}function ck(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375}hp.interpolateHcl=gV;function gV(ih,e){ih=hp.hcl(ih);e=hp.hcl(e);var ig=ih.h,ij=ih.c,il=ih.l,ii=e.h-ig,ik=e.c-ij,im=e.l-il;if(isNaN(ik)){ik=0,ij=isNaN(ij)?e.c:ij}if(isNaN(ii)){ii=0,ig=isNaN(ig)?e.h:ig}else{if(ii>180){ii-=360}else{if(ii<-180){ii+=360}}}return function(io){return bB(ig+ii*io,ij+ik*io,il+im*io)+""}}hp.interpolateHsl=a3;function a3(ii,e){ii=hp.hsl(ii);e=hp.hsl(e);var ih=ii.h,ig=ii.s,il=ii.l,ik=e.h-ih,ij=e.s-ig,im=e.l-il;if(isNaN(ij)){ij=0,ig=isNaN(ig)?e.s:ig}if(isNaN(ik)){ik=0,ih=isNaN(ih)?e.h:ih}else{if(ik>180){ik-=360}else{if(ik<-180){ik+=360}}}return function(io){return bg(ih+ik*io,ig+ij*io,il+im*io)+""}}hp.interpolateLab=hA;function hA(ig,e){ig=hp.lab(ig);e=hp.lab(e);var ij=ig.l,ii=ig.a,ih=ig.b,im=e.l-ij,il=e.a-ii,ik=e.b-ih;return function(io){return aC(ij+im*io,ii+il*io,ih+ik*io)+""}}hp.interpolateRound=fG;function fG(ig,e){e-=ig;return function(ih){return Math.round(ig+e*ih)}}hp.transform=function(e){var ig=bM.createElementNS(hp.ns.prefix.svg,"g");return(hp.transform=function(ih){if(ih!=null){ig.setAttribute("transform",ih);var ii=ig.transform.baseVal.consolidate()}return new o(ii?ii.matrix:gg)})(e)};function o(e){var ii=[e.a,e.b],ig=[e.c,e.d],ik=fx(ii),ih=e3(ii,ig),ij=fx(bR(ig,ii,-ih))||0;if(ii[0]*ig[1]<ig[0]*ii[1]){ii[0]*=-1;ii[1]*=-1;ik*=-1;ih*=-1}this.rotate=(ik?Math.atan2(ii[1],ii[0]):Math.atan2(-ig[0],ig[1]))*hF;this.translate=[e.e,e.f];this.scale=[ik,ij];this.skew=ij?Math.atan2(ih,ij)*hF:0}o.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function e3(ig,e){return ig[0]*e[0]+ig[1]*e[1]}function fx(e){var ig=Math.sqrt(e3(e,e));if(ig){e[0]/=ig;e[1]/=ig}return ig}function bR(ig,e,ih){ig[0]+=ih*e[0];ig[1]+=ih*e[1];return ig}var gg={a:1,b:0,c:0,d:1,e:0,f:0};hp.interpolateTransform=en;function en(iu,it){var iv=[],ig=[],ik,ij=hp.transform(iu),ii=hp.transform(it),ip=ij.translate,io=ii.translate,ih=ij.rotate,e=ii.rotate,im=ij.skew,il=ii.skew,ir=ij.scale,iq=ii.scale;if(ip[0]!=io[0]||ip[1]!=io[1]){iv.push("translate(",null,",",null,")");ig.push({i:1,x:bE(ip[0],io[0])},{i:3,x:bE(ip[1],io[1])})}else{if(io[0]||io[1]){iv.push("translate("+io+")")}else{iv.push("")}}if(ih!=e){if(ih-e>180){e+=360}else{if(e-ih>180){ih+=360}}ig.push({i:iv.push(iv.pop()+"rotate(",null,")")-2,x:bE(ih,e)})}else{if(e){iv.push(iv.pop()+"rotate("+e+")")}}if(im!=il){ig.push({i:iv.push(iv.pop()+"skewX(",null,")")-2,x:bE(im,il)})}else{if(il){iv.push(iv.pop()+"skewX("+il+")")}}if(ir[0]!=iq[0]||ir[1]!=iq[1]){ik=iv.push(iv.pop()+"scale(",null,",",null,")");ig.push({i:ik-4,x:bE(ir[0],iq[0])},{i:ik-2,x:bE(ir[1],iq[1])})}else{if(iq[0]!=1||iq[1]!=1){iv.push(iv.pop()+"scale("+iq+")")}}ik=ig.length;return function(ix){var iw=-1,iy;while(++iw<ik){iv[(iy=ig[iw]).i]=iy.x(ix)}return iv.join("")}}function hx(ig,e){e=e-(ig=+ig)?1/(e-ig):0;return function(ih){return(ih-ig)*e}}function aA(ig,e){e=e-(ig=+ig)?1/(e-ig):0;return function(ih){return Math.max(0,Math.min(1,(ih-ig)*e))}}hp.layout={};hp.layout.bundle=function(){return function(e){var ih=[],ig=-1,ii=e.length;while(++ig<ii){ih.push(eO(e[ig]))}return ih}};function eO(ii){var ik=ii.source,e=ii.target,ij=fT(ik,e),ih=[ik];while(ik!==ij){ik=ik.parent;ih.push(ik)}var ig=ih.length;while(e!==ij){ih.splice(ig,0,e);e=e.parent}return ih}function fw(ih){var ig=[],e=ih.parent;while(e!=null){ig.push(ih);ih=e;e=e.parent}ig.push(ih);return ig}function fT(ii,ig){if(ii===ig){return ii}var ih=fw(ii),e=fw(ig),ij=ih.pop(),ik=e.pop(),il=null;while(ij===ik){il=ij;ij=ih.pop();ik=e.pop()}return il}hp.layout.chord=function(){var ik={},il,ii,iq,ih,ip=0,e,ig,ij;function io(){var iw={},iz=[],iH=hp.range(ih),iD=[],ix,iF,iv,iA,iy;il=[];ii=[];ix=0,iA=-1;while(++iA<ih){iF=0,iy=-1;while(++iy<ih){iF+=iq[iA][iy]}iz.push(iF);iD.push(hp.range(ih));ix+=iF}if(e){iH.sort(function(iJ,iI){return e(iz[iJ],iz[iI])})}if(ig){iD.forEach(function(iJ,iI){iJ.sort(function(iL,iK){return ig(iq[iI][iL],iq[iI][iK])})})}ix=(gf-ip*ih)/ix;iF=0,iA=-1;while(++iA<ih){iv=iF,iy=-1;while(++iy<ih){var iE=iH[iA],iC=iD[iE][iy],iG=iq[iE][iC],iu=iF,it=iF+=iG*ix;iw[iE+"-"+iC]={index:iE,subindex:iC,startAngle:iu,endAngle:it,value:iG}}ii[iE]={index:iE,startAngle:iv,endAngle:iF,value:(iF-iv)/ix};iF+=ip}iA=-1;while(++iA<ih){iy=iA-1;while(++iy<ih){var ir=iw[iA+"-"+iy],iB=iw[iy+"-"+iA];if(ir.value||iB.value){il.push(ir.value<iB.value?{source:iB,target:ir}:{source:ir,target:iB})}}}if(ij){im()}}function im(){il.sort(function(it,ir){return ij((it.source.value+it.target.value)/2,(ir.source.value+ir.target.value)/2)})}ik.matrix=function(ir){if(!arguments.length){return iq}ih=(iq=ir)&&iq.length;il=ii=null;return ik};ik.padding=function(ir){if(!arguments.length){return ip}ip=ir;il=ii=null;return ik};ik.sortGroups=function(ir){if(!arguments.length){return e}e=ir;il=ii=null;return ik};ik.sortSubgroups=function(ir){if(!arguments.length){return ig}ig=ir;il=null;return ik};ik.sortChords=function(ir){if(!arguments.length){return ij}ij=ir;if(il){im()}return ik};ik.chords=function(){if(!il){io()}return il};ik.groups=function(){if(!ii){io()}return ii};return ik};hp.layout.force=function(){var ig={},iv=hp.dispatch("start","tick","end"),iq=[1,1],ix,ij,im=0.9,iy=fZ,ii=cu,iu=-30,ik=0.1,io=0.8,it=[],ih=[],il,e,ip;function iw(iz){return function(iC,iH,iG,iF){if(iC.point!==iz){var iE=iC.cx-iz.x,iB=iC.cy-iz.y,iA=1/Math.sqrt(iE*iE+iB*iB);if((iF-iH)*iA<io){var iD=iC.charge*iA*iA;iz.px-=iE*iD;iz.py-=iB*iD;return true}if(iC.point&&isFinite(iA)){var iD=iC.pointCharge*iA*iA;iz.px-=iE*iD;iz.py-=iB*iD}}return !iC.charge}}ig.tick=function(){if((ij*=0.99)<0.005){iv.end({type:"end",alpha:ij=0});return true}var iB=it.length,iC=ih.length,iz,iF,iA,iJ,iI,iD,iE,iH,iG;for(iF=0;iF<iC;++iF){iA=ih[iF];iJ=iA.source;iI=iA.target;iH=iI.x-iJ.x;iG=iI.y-iJ.y;if(iD=iH*iH+iG*iG){iD=ij*e[iF]*((iD=Math.sqrt(iD))-il[iF])/iD;iH*=iD;iG*=iD;iI.x-=iH*(iE=iJ.weight/(iI.weight+iJ.weight));iI.y-=iG*iE;iJ.x+=iH*(iE=1-iE);iJ.y+=iG*iE}}if(iE=ij*ik){iH=iq[0]/2;iG=iq[1]/2;iF=-1;if(iE){while(++iF<iB){iA=it[iF];iA.x+=(iH-iA.x)*iE;iA.y+=(iG-iA.y)*iE}}}if(iu){gF(iz=hp.geom.quadtree(it),ij,ip);iF=-1;while(++iF<iB){if(!(iA=it[iF]).fixed){iz.visit(iw(iA))}}}iF=-1;while(++iF<iB){iA=it[iF];if(iA.fixed){iA.x=iA.px;iA.y=iA.py}else{iA.x-=(iA.px-(iA.px=iA.x))*im;iA.y-=(iA.py-(iA.py=iA.y))*im}}iv.tick({type:"tick",alpha:ij})};ig.nodes=function(iz){if(!arguments.length){return it}it=iz;return ig};ig.links=function(iz){if(!arguments.length){return ih}ih=iz;return ig};ig.size=function(iz){if(!arguments.length){return iq}iq=iz;return ig};ig.linkDistance=function(iz){if(!arguments.length){return iy}iy=typeof iz==="function"?iz:+iz;return ig};ig.distance=ig.linkDistance;ig.linkStrength=function(iz){if(!arguments.length){return ii}ii=typeof iz==="function"?iz:+iz;return ig};ig.friction=function(iz){if(!arguments.length){return im}im=+iz;return ig};ig.charge=function(iz){if(!arguments.length){return iu}iu=typeof iz==="function"?iz:+iz;return ig};ig.gravity=function(iz){if(!arguments.length){return ik}ik=+iz;return ig};ig.theta=function(iz){if(!arguments.length){return io}io=+iz;return ig};ig.alpha=function(iz){if(!arguments.length){return ij}iz=+iz;if(ij){if(iz>0){ij=iz}else{ij=0}}else{if(iz>0){iv.start({type:"start",alpha:ij=iz});hp.timer(ig.tick)}}return ig};ig.start=function(){var iD,iG=it.length,iA=ih.length,iB=iq[0],iE=iq[1],iC,iF;for(iD=0;iD<iG;++iD){(iF=it[iD]).index=iD;iF.weight=0}for(iD=0;iD<iA;++iD){iF=ih[iD];if(typeof iF.source=="number"){iF.source=it[iF.source]}if(typeof iF.target=="number"){iF.target=it[iF.target]}++iF.source.weight;++iF.target.weight}for(iD=0;iD<iG;++iD){iF=it[iD];if(isNaN(iF.x)){iF.x=iz("x",iB)}if(isNaN(iF.y)){iF.y=iz("y",iE)}if(isNaN(iF.px)){iF.px=iF.x}if(isNaN(iF.py)){iF.py=iF.y}}il=[];if(typeof iy==="function"){for(iD=0;iD<iA;++iD){il[iD]=+iy.call(this,ih[iD],iD)}}else{for(iD=0;iD<iA;++iD){il[iD]=iy}}e=[];if(typeof ii==="function"){for(iD=0;iD<iA;++iD){e[iD]=+ii.call(this,ih[iD],iD)}}else{for(iD=0;iD<iA;++iD){e[iD]=ii}}ip=[];if(typeof iu==="function"){for(iD=0;iD<iG;++iD){ip[iD]=+iu.call(this,it[iD],iD)}}else{for(iD=0;iD<iG;++iD){ip[iD]=iu}}function iz(iM,iK){if(!iC){iC=new Array(iG);for(iJ=0;iJ<iG;++iJ){iC[iJ]=[]}for(iJ=0;iJ<iI;++iJ){var iN=ih[iJ];iC[iN.source.index].push(iN.target);iC[iN.target.index].push(iN.source)}}var iL=iC[iD],iJ=-1,iI=iL.length,iH;while(++iJ<iI){if(!isNaN(iH=iL[iJ][iM])){return iH}}return Math.random()*iK}return ig.resume()};ig.resume=function(){return ig.alpha(0.1)};ig.stop=function(){return ig.alpha(0)};ig.drag=function(){if(!ix){ix=hp.behavior.drag().origin(gr).on("dragstart.force",r).on("drag.force",ir).on("dragend.force",ej)}if(!arguments.length){return ix}this.on("mouseover.force",cy).on("mouseout.force",eq).call(ix)};function ir(iz){iz.px=hp.event.x,iz.py=hp.event.y;ig.resume()}return hp.rebind(ig,iv,"on")};function r(e){e.fixed|=2}function ej(e){e.fixed&=~6}function cy(e){e.fixed|=4;e.px=e.x,e.py=e.y}function eq(e){e.fixed&=~4}function gF(ip,ij,io){var ik=0,ih=0;ip.charge=0;if(!ip.leaf){var e=ip.nodes,ig=e.length,il=-1,im;while(++il<ig){im=e[il];if(im==null){continue}gF(im,ij,io);ip.charge+=im.charge;ik+=im.charge*im.cx;ih+=im.charge*im.cy}}if(ip.point){if(!ip.leaf){ip.point.x+=Math.random()-0.5;ip.point.y+=Math.random()-0.5}var ii=ij*io[ip.point.index];ip.charge+=ip.pointCharge=ii;ik+=ii*ip.point.x;ih+=ii*ip.point.y}ip.cx=ik/ip.charge;ip.cy=ih/ip.charge}var fZ=20,cu=1;hp.layout.hierarchy=function(){var ih=dU,ig=a7,ij=hM;function ii(io,iq,il){var iu=ig.call(e,io,iq);io.depth=iq;il.push(io);if(iu&&(im=iu.length)){var ir=-1,im,iv=io.children=new Array(im),iw=0,ip=iq+1,it;while(++ir<im){it=iv[ir]=ii(iu[ir],ip,il);it.parent=io;iw+=it.value}if(ih){iv.sort(ih)}if(ij){io.value=iw}}else{delete io.children;if(ij){io.value=+ij.call(e,io,iq)||0}}return io}function ik(iq,ir){var ip=iq.children,il=0;if(ip&&(it=ip.length)){var io=-1,it,im=ir+1;while(++io<it){il+=ik(ip[io],im)}}else{if(ij){il=+ij.call(e,iq,ir)||0}}if(ij){iq.value=il}return il}function e(im){var il=[];ii(im,0,il);return il}e.sort=function(il){if(!arguments.length){return ih}ih=il;return e};e.children=function(il){if(!arguments.length){return ig}ig=il;return e};e.value=function(il){if(!arguments.length){return ij}ij=il;return e};e.revalue=function(il){ik(il,0);return il};return e};function gy(ig,e){hp.rebind(ig,e,"sort","children","value");ig.nodes=ig;ig.links=gB;return ig}function a7(e){return e.children}function hM(e){return e.value}function dU(ig,e){return e.value-ig.value}function gB(e){return hp.merge(e.map(function(ig){return(ig.children||[]).map(function(ih){return{source:ig,target:ih}})}))}hp.layout.partition=function(){var ih=hp.layout.hierarchy(),ii=[1,1];function e(im,ir,iu,it){var ik=im.children;im.x=ir;im.y=im.depth*it;im.dx=iu;im.dy=it;if(ik&&(il=ik.length)){var io=-1,il,iq,ip;iu=im.value?iu/im.value:0;while(++io<il){e(iq=ik[io],ir,ip=iq.value*iu,it);ir+=ip}}}function ij(im){var il=im.children,io=0;if(il&&(ip=il.length)){var ik=-1,ip;while(++ik<ip){io=Math.max(io,ij(il[ik]))}}return 1+io}function ig(im,il){var ik=ih.call(this,im,il);e(ik[0],0,ii[0],ii[1]/ij(ik[0]));return ik}ig.size=function(ik){if(!arguments.length){return ii}ii=ik;return ig};return gy(ig,ih)};hp.layout.pie=function(){var ij=Number,ii=W,ih=0,ig=gf;function e(iq){var im=iq.map(function(it,ir){return +ij.call(e,it,ir)});var ik=+(typeof ih==="function"?ih.apply(this,arguments):ih);var il=((typeof ig==="function"?ig.apply(this,arguments):ig)-ik)/hp.sum(im);var io=hp.range(iq.length);if(ii!=null){io.sort(ii===W?function(it,ir){return im[ir]-im[it]}:function(it,ir){return ii(iq[it],iq[ir])})}var ip=[];io.forEach(function(ir){var it;ip[ir]={data:iq[ir],value:it=im[ir],startAngle:ik,endAngle:ik+=it*il}});return ip}e.value=function(ik){if(!arguments.length){return ij}ij=ik;return e};e.sort=function(ik){if(!arguments.length){return ii}ii=ik;return e};e.startAngle=function(ik){if(!arguments.length){return ih}ih=ik;return e};e.endAngle=function(ik){if(!arguments.length){return ig}ig=ik;return e};return e};var W={};hp.layout.stack=function(){var ii=gr,ih=bQ,ik=fN,ij=fO,ig=ap,il=an;function e(iv,ix){var iw=iv.map(function(iA,iz){return ii.call(e,iA,iz)});var iy=iw.map(function(iz){return iz.map(function(iA,iB){return[ig.call(e,iA,iB),il.call(e,iA,iB)]})});var ir=ih.call(e,iy,ix);iw=hp.permute(iw,ir);iy=hp.permute(iy,ir);var iq=ik.call(e,iy,ix);var io=iw.length,ip=iw[0].length,iu,it,im;for(it=0;it<ip;++it){ij.call(e,iw[0][it],im=iq[it],iy[0][it][1]);for(iu=1;iu<io;++iu){ij.call(e,iw[iu][it],im+=iy[iu-1][it][1],iy[iu][it][1])}}return iv}e.values=function(im){if(!arguments.length){return ii}ii=im;return e};e.order=function(im){if(!arguments.length){return ih}ih=typeof im==="function"?im:a5.get(im)||bQ;return e};e.offset=function(im){if(!arguments.length){return ik}ik=typeof im==="function"?im:ai.get(im)||fN;return e};e.x=function(im){if(!arguments.length){return ig}ig=im;return e};e.y=function(im){if(!arguments.length){return il}il=im;return e};e.out=function(im){if(!arguments.length){return ij}ij=im;return e};return e};function ap(e){return e.x}function an(e){return e.y}function fO(ig,e,ih){ig.y0=e;ig.y=ih}var a5=hp.map({"inside-out":function(ij){var ih=ij.length,ik,ii,ip=ij.map(bV),il=ij.map(dw),im=hp.range(ih).sort(function(it,ir){return ip[it]-ip[ir]}),io=0,e=0,iq=[],ig=[];for(ik=0;ik<ih;++ik){ii=im[ik];if(io<e){io+=il[ii];iq.push(ii)}else{e+=il[ii];ig.push(ii)}}return ig.reverse().concat(iq)},reverse:function(e){return hp.range(e.length).reverse()},"default":bQ});var ai=hp.map({silhouette:function(ij){var ig=ij.length,ih=ij[0].length,il=[],im=0,ik,ii,e,io=[];for(ii=0;ii<ih;++ii){for(ik=0,e=0;ik<ig;ik++){e+=ij[ik][ii][1]}if(e>im){im=e}il.push(e)}for(ii=0;ii<ih;++ii){io[ii]=(im-il[ii])/2}return io},wiggle:function(il){var ig=il.length,ip=il[0],ih=ip.length,im,ik,ij,it,ir,io,iu,e,ii,iq=[];iq[0]=e=ii=0;for(ik=1;ik<ih;++ik){for(im=0,it=0;im<ig;++im){it+=il[im][ik][1]}for(im=0,ir=0,iu=ip[ik][0]-ip[ik-1][0];im<ig;++im){for(ij=0,io=(il[im][ik][1]-il[im][ik-1][1])/(2*iu);ij<im;++ij){io+=(il[ij][ik][1]-il[ij][ik-1][1])/iu}ir+=io*il[im][ik][1]}iq[ik]=e-=it?ir/it*iu:0;if(e<ii){ii=e}}for(ik=0;ik<ih;++ik){iq[ik]-=ii}return iq},expand:function(ik){var im=ik.length,e=ik[0].length,ig=1/im,ii,ih,il,ij=[];for(ih=0;ih<e;++ih){for(ii=0,il=0;ii<im;ii++){il+=ik[ii][ih][1]}if(il){for(ii=0;ii<im;ii++){ik[ii][ih][1]/=il}}else{for(ii=0;ii<im;ii++){ik[ii][ih][1]=ig}}}for(ih=0;ih<e;++ih){ij[ih]=0}return ij},zero:fN});function bQ(e){return hp.range(e.length)}function fN(ii){var ig=-1,e=ii[0].length,ih=[];while(++ig<e){ih[ig]=0}return ih}function bV(ik){var ii=1,ih=0,ig=ik[0][1],e,ij=ik.length;for(;ii<ij;++ii){if((e=ik[ii][1])>ig){ih=ii;ig=e}}return ih}function dw(e){return e.reduce(fM,0)}function fM(e,ig){return e+ig[1]}hp.layout.histogram=function(){var ij=true,ig=Number,e=bj,ih=hy;function ii(io,ip){var iv=[],it=io.map(ig,this),iq=e.call(this,it,ip),iu=ih.call(this,iq,it,ip),iw,ip=-1,ik=it.length,il=iu.length-1,im=ij?1:1/ik,ir;while(++ip<il){iw=iv[ip]=[];iw.dx=iu[ip+1]-(iw.x=iu[ip]);iw.y=0}if(il>0){ip=-1;while(++ip<ik){ir=it[ip];if(ir>=iq[0]&&ir<=iq[1]){iw=iv[hp.bisect(iu,ir,1,il)-1];iw.y+=im;iw.push(io[ip])}}}return iv}ii.value=function(ik){if(!arguments.length){return ig}ig=ik;return ii};ii.range=function(ik){if(!arguments.length){return e}e=T(ik);return ii};ii.bins=function(ik){if(!arguments.length){return ih}ih=typeof ik==="number"?function(il){return h(il,ik)}:T(ik);return ii};ii.frequency=function(ik){if(!arguments.length){return ij}ij=!!ik;return ii};return ii};function hy(ig,e){return h(ig,Math.ceil(Math.log(e.length)/Math.LN2+1))}function h(ii,ik){var ih=-1,ig=+ii[0],e=(ii[1]-ig)/ik,ij=[];while(++ih<=ik){ij[ih]=e*ih+ig}return ij}function bj(e){return[hp.min(e),hp.max(e)]}hp.layout.tree=function(){var ih=hp.layout.hierarchy().sort(null).value(null),ij=dB,ii=[1,1],ig=false;function e(it,iq){var il=ih.call(this,it,iq),iv=il[0];function ir(iD,iz){var iB=iD.children,iG=iD._tree;if(iB&&(iC=iB.length)){var iC,iI=iB[0],iH,iF=iI,iA,iE=-1;while(++iE<iC){iA=iB[iE];ir(iA,iH);iF=ik(iA,iH,iF);iH=iA}dE(iD);var iJ=0.5*(iI._tree.prelim+iA._tree.prelim);if(iz){iG.prelim=iz._tree.prelim+ij(iD,iz);iG.mod=iG.prelim-iJ}else{iG.prelim=iJ}}else{if(iz){iG.prelim=iz._tree.prelim+ij(iD,iz)}}}function iu(iC,iz){iC.x=iC._tree.prelim+iz;var iB=iC.children;if(iB&&(iD=iB.length)){var iA=-1,iD;iz+=iC._tree.mod;while(++iA<iD){iu(iB[iA],iz)}}}function ik(iD,iz,iG){if(iz){var iC=iD,iB=iD,iF=iz,iE=iD.parent.children[0],iI=iC._tree.mod,iH=iB._tree.mod,iK=iF._tree.mod,iJ=iE._tree.mod,iA;while(iF=aB(iF),iC=h0(iC),iF&&iC){iE=h0(iE);iB=aB(iB);iB._tree.ancestor=iD;iA=iF._tree.prelim+iK-iC._tree.prelim-iI+ij(iF,iC);if(iA>0){h2(f6(iF,iD,iG),iD,iA);iI+=iA;iH+=iA}iK+=iF._tree.mod;iI+=iC._tree.mod;iJ+=iE._tree.mod;iH+=iB._tree.mod}if(iF&&!aB(iB)){iB._tree.thread=iF;iB._tree.mod+=iK-iH}if(iC&&!h0(iE)){iE._tree.thread=iC;iE._tree.mod+=iI-iJ;iG=iD}}return iG}hG(iv,function(iA,iz){iA._tree={ancestor:iA,prelim:0,mod:0,change:0,shift:0,number:iz?iz._tree.number+1:0}});ir(iv);iu(iv,-iv._tree.prelim);var ip=d7(iv,bF),iy=d7(iv,c3),ix=d7(iv,E),io=ip.x-ij(ip,iy)/2,im=iy.x+ij(iy,ip)/2,iw=ix.depth||1;hG(iv,ig?function(iz){iz.x*=ii[0];iz.y=iz.depth*ii[1];delete iz._tree}:function(iz){iz.x=(iz.x-io)/(im-io)*ii[0];iz.y=iz.depth/iw*ii[1];delete iz._tree});return il}e.separation=function(ik){if(!arguments.length){return ij}ij=ik;return e};e.size=function(ik){if(!arguments.length){return ig?null:ii}ig=(ii=ik)==null;return e};e.nodeSize=function(ik){if(!arguments.length){return ig?ii:null}ig=(ii=ik)!=null;return e};return gy(e,ih)};function dB(ig,e){return ig.parent==e.parent?1:2}function h0(ig){var e=ig.children;return e&&e.length?e[0]:ig._tree.thread}function aB(ig){var e=ig.children,ih;return e&&(ih=e.length)?e[ih-1]:ig._tree.thread}function d7(ih,ii){var ig=ih.children;if(ig&&(ij=ig.length)){var ik,ij,e=-1;while(++e<ij){if(ii(ik=d7(ig[e],ii),ih)>0){ih=ik}}}return ih}function c3(ig,e){return ig.x-e.x}function bF(ig,e){return e.x-ig.x}function E(ig,e){return ig.depth-e.depth}function hG(ig,ih){function e(im,il){var ik=im.children;if(ik&&(io=ik.length)){var ip,ij=null,ii=-1,io;while(++ii<io){ip=ik[ii];e(ip,ij);ij=ip}}ih(im,il)}e(ig,null)}function dE(ii){var e=0,ik=0,ih=ii.children,ig=ih.length,ij;while(--ig>=0){ij=ih[ig]._tree;ij.prelim+=e;ij.mod+=e;e+=ij.shift+(ik+=ij.change)}}function h2(ig,ih,e){ig=ig._tree;ih=ih._tree;var ii=e/(ih.number-ig.number);ig.change+=ii;ih.change-=ii;ih.shift+=e;ih.prelim+=e;ih.mod+=e}function f6(e,ih,ig){return e._tree.ancestor.parent==ih.parent?e._tree.ancestor:ig}hp.layout.pack=function(){var ig=hp.layout.hierarchy().sort(eF),ij=0,ii=[1,1],e;function ih(it,io){var im=ig.call(this,it,io),il=im[0],ik=ii[0],ip=ii[1],iq=e==null?Math.sqrt:typeof e==="function"?e:function(){return e};il.x=il.y=0;hG(il,function(iu){iu.r=+iq(iu.value)});hG(il,V);if(ij){var ir=ij*(e?1:Math.max(2*il.r/ik,2*il.r/ip))/2;hG(il,function(iu){iu.r+=ir});hG(il,V);hG(il,function(iu){iu.r-=ir})}fv(il,ik/2,ip/2,e?1:1/Math.max(2*il.r/ik,2*il.r/ip));return im}ih.size=function(ik){if(!arguments.length){return ii}ii=ik;return ih};ih.radius=function(ik){if(!arguments.length){return e}e=ik==null||typeof ik==="function"?ik:+ik;return ih};ih.padding=function(ik){if(!arguments.length){return ij}ij=+ik;return ih};return gy(ih,ig)};function eF(ig,e){return ig.value-e.value}function bP(ig,e){var ih=ig._pack_next;ig._pack_next=e;e._pack_prev=ig;e._pack_next=ih;ih._pack_prev=e}function be(ig,e){ig._pack_next=e;e._pack_prev=ig}function er(ih,e){var ii=e.x-ih.x,ig=e.y-ih.y,ij=ih.r+e.r;return 0.999*ij*ij>ii*ii+ig*ig}function V(ir){if(!(iq=ir.children)||!(ip=iq.length)){return}var iq,iw=Infinity,iA=-Infinity,e=Infinity,ij=-Infinity,iz,iy,ix,iv,iu,it,ip;function ih(iB){iw=Math.min(iB.x-iB.r,iw);iA=Math.max(iB.x+iB.r,iA);e=Math.min(iB.y-iB.r,e);ij=Math.max(iB.y+iB.r,ij)}iq.forEach(aS);iz=iq[0];iz.x=-iz.r;iz.y=0;ih(iz);if(ip>1){iy=iq[1];iy.x=iy.r;iy.y=0;ih(iy);if(ip>2){ix=iq[2];bd(iz,iy,ix);ih(ix);bP(iz,ix);iz._pack_prev=ix;bP(ix,iy);iy=iz._pack_next;for(iv=3;iv<ip;iv++){bd(iz,iy,ix=iq[iv]);var ig=0,ik=1,ii=1;for(iu=iy._pack_next;iu!==iy;iu=iu._pack_next,ik++){if(er(iu,ix)){ig=1;break}}if(ig==1){for(it=iz._pack_prev;it!==iu._pack_prev;it=it._pack_prev,ii++){if(er(it,ix)){break}}}if(ig){if(ik<ii||ik==ii&&iy.r<iz.r){be(iz,iy=iu)}else{be(iz=it,iy)}iv--}else{bP(iz,ix);iy=ix;ih(ix)}}}}var im=(iw+iA)/2,il=(e+ij)/2,io=0;for(iv=0;iv<ip;iv++){ix=iq[iv];ix.x-=im;ix.y-=il;io=Math.max(io,ix.r+Math.sqrt(ix.x*ix.x+ix.y*ix.y))}ir.r=io;iq.forEach(eT)}function aS(e){e._pack_next=e._pack_prev=e}function eT(e){delete e._pack_next;delete e._pack_prev}function fv(ij,e,il,ig){var ii=ij.children;ij.x=e+=ig*ij.x;ij.y=il+=ig*ij.y;ij.r*=ig;if(ii){var ih=-1,ik=ii.length;while(++ih<ik){fv(ii[ih],e,il,ig)}}}function bd(ij,ih,e){var il=ij.r+e.r,ip=ih.x-ij.x,im=ih.y-ij.y;if(il&&(ip||im)){var io=ih.r+e.r,ik=ip*ip+im*im;io*=io;il*=il;var ii=0.5+(il-io)/(2*ik),ig=Math.sqrt(Math.max(0,2*io*(il+ik)-(il-=ik)*il-io*io))/(2*ik);e.x=ij.x+ii*ip+ig*im;e.y=ij.y+ii*im-ig*ip}else{e.x=ij.x+il;e.y=ij.y}}hp.layout.cluster=function(){var ih=hp.layout.hierarchy().sort(null).value(null),ij=dB,ii=[1,1],ig=false;function e(iq,ip){var ik=ih.call(this,iq,ip),ir=ik[0],it,iu=0;hG(ir,function(ix){var iw=ix.children;if(iw&&iw.length){ix.x=bv(iw);ix.y=bu(iw)}else{ix.x=it?iu+=ij(ix,it):0;ix.y=0;it=ix}});var io=eH(ir),iv=dI(ir),im=io.x-ij(io,iv)/2,il=iv.x+ij(iv,io)/2;hG(ir,ig?function(iw){iw.x=(iw.x-ir.x)*ii[0];iw.y=(ir.y-iw.y)*ii[1]}:function(iw){iw.x=(iw.x-im)/(il-im)*ii[0];iw.y=(1-(ir.y?iw.y/ir.y:1))*ii[1]});return ik}e.separation=function(ik){if(!arguments.length){return ij}ij=ik;return e};e.size=function(ik){if(!arguments.length){return ig?null:ii}ig=(ii=ik)==null;return e};e.nodeSize=function(ik){if(!arguments.length){return ig?ii:null}ig=(ii=ik)!=null;return e};return gy(e,ih)};function bu(e){return 1+hp.max(e,function(ig){return ig.y})}function bv(e){return e.reduce(function(ig,ih){return ig+ih.x},0)/e.length}function eH(ig){var e=ig.children;return e&&e.length?eH(e[0]):ig}function dI(ig){var e=ig.children,ih;return e&&(ih=e.length)?dI(e[ih-1]):ig}hp.layout.treemap=function(){var io=hp.layout.hierarchy(),it=Math.round,iv=[1,1],ip=null,e=fh,iq=false,il,ik="squarify",im=0.5*(1+Math.sqrt(5));function ig(iy,iw){var ix=-1,iB=iy.length,iA,iz;while(++ix<iB){iz=(iA=iy[ix]).value*(iw<0?0:iw);iA.area=isNaN(iz)||iz<=0?0:iz}}function ii(iA){var ix=iA.children;if(ix&&ix.length){var iD=e(iA),iF=[],iC=ix.slice(),iw,iB=Infinity,iz,iE=ik==="slice"?iD.dx:ik==="dice"?iD.dy:ik==="slice-dice"?iA.depth&1?iD.dy:iD.dx:Math.min(iD.dx,iD.dy),iy;ig(iC,iD.dx*iD.dy/iA.value);iF.area=0;while((iy=iC.length)>0){iF.push(iw=iC[iy-1]);iF.area+=iw.area;if(ik!=="squarify"||(iz=ih(iF,iE))<=iB){iC.pop();iB=iz}else{iF.area-=iF.pop().area;ij(iF,iE,iD,false);iE=Math.min(iD.dx,iD.dy);iF.length=iF.area=0;iB=Infinity}}if(iF.length){ij(iF,iE,iD,true);iF.length=iF.area=0}ix.forEach(ii)}}function iu(iz){var iw=iz.children;if(iw&&iw.length){var iy=e(iz),ix=iw.slice(),iB,iA=[];ig(ix,iy.dx*iy.dy/iz.value);iA.area=0;while(iB=ix.pop()){iA.push(iB);iA.area+=iB.area;if(iB.z!=null){ij(iA,iB.z?iy.dx:iy.dy,iy,!ix.length);iA.length=iA.area=0}}iw.forEach(iu)}}function ih(iB,ix){var iz=iB.area,iA,iD=0,iw=Infinity,iy=-1,iC=iB.length;while(++iy<iC){if(!(iA=iB[iy].area)){continue}if(iA<iw){iw=iA}if(iA>iD){iD=iA}}iz*=iz;ix*=ix;return iz?Math.max(ix*iD*im/iz,iz/(ix*iw*im)):Infinity}function ij(iF,iE,iA,iD){var iy=-1,ix=iF.length,iB=iA.x,iz=iA.y,iC=iE?it(iF.area/iE):0,iw;if(iE==iA.dx){if(iD||iC>iA.dy){iC=iA.dy}while(++iy<ix){iw=iF[iy];iw.x=iB;iw.y=iz;iw.dy=iC;iB+=iw.dx=Math.min(iA.x+iA.dx-iB,iC?it(iw.area/iC):0)}iw.z=true;iw.dx+=iA.x+iA.dx-iB;iA.y+=iC;iA.dy-=iC}else{if(iD||iC>iA.dx){iC=iA.dx}while(++iy<ix){iw=iF[iy];iw.x=iB;iw.y=iz;iw.dx=iC;iz+=iw.dy=Math.min(iA.y+iA.dy-iz,iC?it(iw.area/iC):0)}iw.z=false;iw.dy+=iA.y+iA.dy-iz;iA.x+=iC;iA.dx-=iC}}function ir(iy){var ix=il||io(iy),iw=ix[0];iw.x=0;iw.y=0;iw.dx=iv[0];iw.dy=iv[1];if(il){io.revalue(iw)}ig([iw],iw.dx*iw.dy/iw.value);(il?iu:ii)(iw);if(iq){il=ix}return ix}ir.size=function(iw){if(!arguments.length){return iv}iv=iw;return ir};ir.padding=function(iw){if(!arguments.length){return ip}function iz(iA){var iB=iw.call(ir,iA,iA.depth);return iB==null?fh(iA):a0(iA,typeof iB==="number"?[iB,iB,iB,iB]:iB)}function iy(iA){return a0(iA,iw)}var ix;e=(ip=iw)==null?fh:(ix=typeof iw)==="function"?iz:ix==="number"?(iw=[iw,iw,iw,iw],iy):iy;return ir};ir.round=function(iw){if(!arguments.length){return it!=Number}it=iw?Math.round:Number;return ir};ir.sticky=function(iw){if(!arguments.length){return iq}iq=iw;il=null;return ir};ir.ratio=function(iw){if(!arguments.length){return im}im=iw;return ir};ir.mode=function(iw){if(!arguments.length){return ik}ik=iw+"";return ir};return gy(ir,io)};function fh(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function a0(ii,ij){var e=ii.x+ij[3],ik=ii.y+ij[0],ih=ii.dx-ij[1]-ij[3],ig=ii.dy-ij[0]-ij[2];if(ih<0){e+=ih/2;ih=0}if(ig<0){ik+=ig/2;ig=0}return{x:e,y:ik,dx:ih,dy:ig}}hp.random={normal:function(ig,e){var ih=arguments.length;if(ih<2){e=1}if(ih<1){ig=0}return function(){var ii,ik,ij;do{ii=Math.random()*2-1;ik=Math.random()*2-1;ij=ii*ii+ik*ik}while(!ij||ij>1);return ig+e*ii*Math.sqrt(-2*Math.log(ij)/ij)}},logNormal:function(){var e=hp.random.normal.apply(hp,arguments);return function(){return Math.exp(e())}},irwinHall:function(e){return function(){for(var ih=0,ig=0;ig<e;ig++){ih+=Math.random()}return ih/e}}};hp.scale={};function ex(ig){var ih=ig[0],e=ig[ig.length-1];return ih<e?[ih,e]:[e,ih]}function aZ(e){return e.rangeExtent?e.rangeExtent():ex(e.range())}function aG(ij,e,ik,ih){var ig=ik(ij[0],ij[1]),ii=ih(e[0],e[1]);return function(il){return ii(ig(il))}}function gp(il,ij){var ik=0,ii=il.length-1,ih=il[ik],ig=il[ii],e;if(ig<ih){e=ik,ik=ii,ii=e;e=ih,ih=ig,ig=e}il[ik]=ij.floor(ih);il[ii]=ij.ceil(ig);return il}function a6(e){return e?{floor:function(ig){return Math.floor(ig/e)*e},ceil:function(ig){return Math.ceil(ig/e)*e}}:eG}var eG={floor:gr,ceil:gr};function N(il,ig,im,ij){var ii=[],ik=[],ih=0,e=Math.min(il.length,ig.length)-1;if(il[e]<il[0]){il=il.slice().reverse();ig=ig.slice().reverse()}while(++ih<=e){ii.push(im(il[ih-1],il[ih]));ik.push(ij(ig[ih-1],ig[ih]))}return function(io){var ip=hp.bisect(il,io,1,e)-1;return ik[ip](ii[ip](io))}}hp.scale.linear=function(){return ep([0,1],[0,1],fL,false)};function ep(ik,ii,ij,im){var ih,ig;function e(){var io=Math.min(ik.length,ii.length)>2?N:aG,ip=im?aA:hx;ih=io(ik,ii,ip,ij);ig=io(ii,ik,ip,fL);return il}function il(io){return ih(io)}il.invert=function(io){return ig(io)};il.domain=function(io){if(!arguments.length){return ik}ik=io.map(Number);return e()};il.range=function(io){if(!arguments.length){return ii}ii=io;return e()};il.rangeRound=function(io){return il.range(io).interpolate(fG)};il.clamp=function(io){if(!arguments.length){return im}im=io;return e()};il.interpolate=function(io){if(!arguments.length){return ij}ij=io;return e()};il.ticks=function(io){return e7(ik,io)};il.tickFormat=function(io,ip){return fj(ik,io,ip)};il.nice=function(io){aO(ik,io);return e()};il.copy=function(){return ep(ik,ii,ij,im)};return e()}function gh(ig,e){return hp.rebind(ig,e,"range","rangeRound","interpolate","clamp")}function aO(ig,e){return gp(ig,a6(q(ig,e)[2]))}function q(ik,e){if(e==null){e=10}var ih=ex(ik),ig=ih[1]-ih[0],ij=Math.pow(10,Math.floor(Math.log(ig/e)/Math.LN10)),ii=e/ig*ij;if(ii<=0.15){ij*=10}else{if(ii<=0.35){ij*=5}else{if(ii<=0.75){ij*=2}}}ih[0]=Math.ceil(ih[0]/ij)*ij;ih[1]=Math.floor(ih[1]/ij)*ij+ij*0.5;ih[2]=ij;return ih}function e7(ig,e){return hp.range.apply(hp,q(ig,e))}function fj(ih,e,ii){var ig=-Math.floor(Math.log(q(ih,e)[2])/Math.LN10+0.01);return hp.format(ii?ii.replace(cB,function(iu,it,ir,iq,ip,io,im,il,ik,ij){return[it,ir,iq,ip,io,im,il,ik||"."+(ig-(ij==="%")*2),ij].join("")}):",."+ig+"f")}hp.scale.log=function(){return gL(hp.scale.linear().domain([0,1]),10,true,[1,10])};function gL(ig,ik,e,ij){function ih(im){return(e?Math.log(im<0?0:im):-Math.log(im>0?0:-im))/Math.log(ik)}function ii(im){return e?Math.pow(ik,im):-Math.pow(ik,-im)}function il(im){return ig(ih(im))}il.invert=function(im){return ii(ig.invert(im))};il.domain=function(im){if(!arguments.length){return ij}e=im[0]>=0;ig.domain((ij=im.map(Number)).map(ih));return il};il.base=function(im){if(!arguments.length){return ik}ik=+im;ig.domain(ij.map(ih));return il};il.nice=function(){var im=gp(ij.map(ih),e?Math:gP);ig.domain(im);ij=im.map(ii);return il};il.ticks=function(){var it=ex(ij),iu=[],iq=it[0],io=it[1],ir=Math.floor(ih(iq)),ip=Math.ceil(ih(io)),iv=ik%1?2:ik;if(isFinite(ip-ir)){if(e){for(;ir<ip;ir++){for(var im=1;im<iv;im++){iu.push(ii(ir)*im)}}iu.push(ii(ir))}else{iu.push(ii(ir));for(;ir++<ip;){for(var im=iv-1;im>0;im--){iu.push(ii(ir)*im)}}}for(ir=0;iu[ir]<iq;ir++){}for(ip=iu.length;iu[ip-1]>io;ip--){}iu=iu.slice(ir,ip)}return iu};il.tickFormat=function(ir,iq){if(!arguments.length){return dv}if(arguments.length<2){iq=dv}else{if(typeof iq!=="function"){iq=hp.format(iq)}}var im=Math.max(0.1,ir/il.ticks().length),io=e?(ip=1e-12,Math.ceil):(ip=-1e-12,Math.floor),ip;return function(it){return it/ii(io(ih(it)+ip))<=im?iq(it):""}};il.copy=function(){return gL(ig.copy(),ik,e,ij)};return gh(il,ig)}var dv=hp.format(".0e"),gP={floor:function(e){return -Math.ceil(-e)},ceil:function(e){return -Math.floor(-e)}};hp.scale.pow=function(){return gx(hp.scale.linear(),1,[0,1])};function gx(e,ii,ih){var ig=f2(ii),ij=f2(1/ii);function ik(il){return e(ig(il))}ik.invert=function(il){return ij(e.invert(il))};ik.domain=function(il){if(!arguments.length){return ih}e.domain((ih=il.map(Number)).map(ig));return ik};ik.ticks=function(il){return e7(ih,il)};ik.tickFormat=function(il,im){return fj(ih,il,im)};ik.nice=function(il){return ik.domain(aO(ih,il))};ik.exponent=function(il){if(!arguments.length){return ii}ig=f2(ii=il);ij=f2(1/ii);e.domain(ih.map(ig));return ik};ik.copy=function(){return gx(e.copy(),ii,ih)};return gh(ik,e)}function f2(ig){return function(e){return e<0?-Math.pow(-e,ig):Math.pow(e,ig)}}hp.scale.sqrt=function(){return hp.scale.pow().exponent(0.5)};hp.scale.ordinal=function(){return ct([],{t:"range",a:[[]]})};function ct(ik,ih){var ij,ig,ii;function il(im){return ig[((ij.get(im)||ih.t==="range"&&ij.set(im,ik.push(im)))-1)%ig.length]}function e(io,im){return hp.range(ik.length).map(function(ip){return io+im*ip})}il.domain=function(im){if(!arguments.length){return ik}ik=[];ij=new aI();var ip=-1,iq=im.length,io;while(++ip<iq){if(!ij.has(io=im[ip])){ij.set(io,ik.push(io))}}return il[ih.t].apply(il,ih.a)};il.range=function(im){if(!arguments.length){return ig}ig=im;ii=0;ih={t:"range",a:arguments};return il};il.rangePoints=function(im,iq){if(arguments.length<2){iq=0}var ir=im[0],io=im[1],ip=(io-ir)/(Math.max(1,ik.length-1)+iq);ig=e(ik.length<2?(ir+io)/2:ir+ip*iq/2,ip);ii=0;ih={t:"rangePoints",a:arguments};return il};il.rangeBands=function(io,it,im){if(arguments.length<2){it=0}if(arguments.length<3){im=it}var ip=io[1]<io[0],iu=io[ip-0],iq=io[1-ip],ir=(iq-iu)/(ik.length-it+2*im);ig=e(iu+ir*im,ir);if(ip){ig.reverse()}ii=ir*(1-it);ih={t:"rangeBands",a:arguments};return il};il.rangeRoundBands=function(io,iu,im){if(arguments.length<2){iu=0}if(arguments.length<3){im=iu}var iq=io[1]<io[0],iv=io[iq-0],ir=io[1-iq],it=Math.floor((ir-iv)/(ik.length-iu+2*im)),ip=ir-iv-(ik.length-iu)*it;ig=e(iv+Math.round(ip/2),it);if(iq){ig.reverse()}ii=Math.round(it*(1-iu));ih={t:"rangeRoundBands",a:arguments};return il};il.rangeBand=function(){return ii};il.rangeExtent=function(){return ex(ih.a[0])};il.copy=function(){return ct(ik,ih)};return il.domain(ik)}hp.scale.category10=function(){return hp.scale.ordinal().range(cC)};hp.scale.category20=function(){return hp.scale.ordinal().range(ch)};hp.scale.category20b=function(){return hp.scale.ordinal().range(he)};hp.scale.category20c=function(){return hp.scale.ordinal().range(hc)};var cC=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dy);var ch=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dy);var he=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dy);var hc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dy);hp.scale.quantile=function(){return B([],[])};function B(ih,ig){var ii;function e(){var ik=0,il=ig.length;ii=[];while(++ik<il){ii[ik-1]=hp.quantile(ih,ik/il)}return ij}function ij(ik){if(!isNaN(ik=+ik)){return ig[hp.bisect(ii,ik)]}}ij.domain=function(ik){if(!arguments.length){return ih}ih=ik.filter(function(il){return !isNaN(il)}).sort(hp.ascending);return e()};ij.range=function(ik){if(!arguments.length){return ig}ig=ik;return e()};ij.quantiles=function(){return ii};ij.invertExtent=function(ik){ik=ig.indexOf(ik);return ik<0?[NaN,NaN]:[ik>0?ii[ik-1]:ih[0],ik<ii.length?ii[ik]:ih[ih.length-1]]};ij.copy=function(){return B(ih,ig)};return e()}hp.scale.quantize=function(){return dH(0,1,[0,1])};function dH(ij,ih,ig){var ik,ii;function il(im){return ig[Math.max(0,Math.min(ii,Math.floor(ik*(im-ij))))]}function e(){ik=ig.length/(ih-ij);ii=ig.length-1;return il}il.domain=function(im){if(!arguments.length){return[ij,ih]}ij=+im[0];ih=+im[im.length-1];return e()};il.range=function(im){if(!arguments.length){return ig}ig=im;return e()};il.invertExtent=function(im){im=ig.indexOf(im);im=im<0?NaN:im/ik+ij;return[im,im+1/ik]};il.copy=function(){return dH(ij,ih,ig)};return e()}hp.scale.threshold=function(){return gc([0.5],[0,1])};function gc(ig,e){function ih(ii){if(ii<=ii){return e[hp.bisect(ig,ii)]}}ih.domain=function(ii){if(!arguments.length){return ig}ig=ii;return ih};ih.range=function(ii){if(!arguments.length){return e}e=ii;return ih};ih.invertExtent=function(ii){ii=e.indexOf(ii);return[ig[ii-1],ig[ii]]};ih.copy=function(){return gc(ig,e)};return ih}hp.scale.identity=function(){return eX([0,1])};function eX(ig){function e(ih){return +ih}e.invert=e;e.domain=e.range=function(ih){if(!arguments.length){return ig}ig=ih.map(e);return e};e.ticks=function(ih){return e7(ig,ih)};e.tickFormat=function(ih,ii){return fj(ig,ih,ii)};e.copy=function(){return eX(ig)};return e}hp.svg={};hp.svg.arc=function(){var ij=bz,ii=cU,ih=gn,e=aq;function ig(){var io=ij.apply(this,arguments),im=ii.apply(this,arguments),il=ih.apply(this,arguments)+hJ,ik=e.apply(this,arguments)+hJ,iv=(ik<il&&(iv=il,il=ik,ik=iv),ik-il),ir=iv<gk?"0":"1",iq=Math.cos(il),iu=Math.sin(il),ip=Math.cos(ik),it=Math.sin(ik);return iv>=hO?io?"M0,"+im+"A"+im+","+im+" 0 1,1 0,"+-im+"A"+im+","+im+" 0 1,1 0,"+im+"M0,"+io+"A"+io+","+io+" 0 1,0 0,"+-io+"A"+io+","+io+" 0 1,0 0,"+io+"Z":"M0,"+im+"A"+im+","+im+" 0 1,1 0,"+-im+"A"+im+","+im+" 0 1,1 0,"+im+"Z":io?"M"+im*iq+","+im*iu+"A"+im+","+im+" 0 "+ir+",1 "+im*ip+","+im*it+"L"+io*ip+","+io*it+"A"+io+","+io+" 0 "+ir+",0 "+io*iq+","+io*iu+"Z":"M"+im*iq+","+im*iu+"A"+im+","+im+" 0 "+ir+",1 "+im*ip+","+im*it+"L0,0Z"}ig.innerRadius=function(ik){if(!arguments.length){return ij}ij=T(ik);return ig};ig.outerRadius=function(ik){if(!arguments.length){return ii}ii=T(ik);return ig};ig.startAngle=function(ik){if(!arguments.length){return ih}ih=T(ik);return ig};ig.endAngle=function(ik){if(!arguments.length){return e}e=T(ik);return ig};ig.centroid=function(){var il=(ij.apply(this,arguments)+ii.apply(this,arguments))/2,ik=(ih.apply(this,arguments)+e.apply(this,arguments))/2+hJ;return[Math.cos(ik)*il,Math.sin(ik)*il]};return ig};var hJ=-eu,hO=gf-gu;function bz(e){return e.innerRadius}function cU(e){return e.outerRadius}function gn(e){return e.startAngle}function aq(e){return e.endAngle}function fi(ig){var e=hX,im=hW,il=aj,ii=hU,ik=ii.key,ij=0.7;function ih(ir){var iu=[],ix=[],it=-1,io=ir.length,iw,iq=T(e),ip=T(im);function iv(){iu.push("M",ii(ig(ix),ij))}while(++it<io){if(il.call(this,iw=ir[it],it)){ix.push([+iq.call(this,iw,it),+ip.call(this,iw,it)])}else{if(ix.length){iv();ix=[]}}}if(ix.length){iv()}return iu.length?iu.join(""):null}ih.x=function(io){if(!arguments.length){return e}e=io;return ih};ih.y=function(io){if(!arguments.length){return im}im=io;return ih};ih.defined=function(io){if(!arguments.length){return il}il=io;return ih};ih.interpolate=function(io){if(!arguments.length){return ik}if(typeof io==="function"){ik=ii=io}else{ik=(ii=cc.get(io)||hU).key}return ih};ih.tension=function(io){if(!arguments.length){return ij}ij=io;return ih};return ih}hp.svg.line=function(){return fi(gr)};var cc=hp.map({linear:hU,"linear-closed":ab,step:dd,"step-before":bl,"step-after":hz,basis:fn,"basis-open":bi,"basis-closed":cP,bundle:cS,cardinal:dX,"cardinal-open":b2,"cardinal-closed":s,monotone:dm});cc.forEach(function(e,ig){ig.key=e;ig.closed=/-closed$/.test(e)});function hU(e){return e.join("L")}function ab(e){return hU(e)+"Z"}function dd(ig){var e=0,ij=ig.length,ii=ig[0],ih=[ii[0],",",ii[1]];while(++e<ij){ih.push("H",(ii[0]+(ii=ig[e])[0])/2,"V",ii[1])}if(ij>1){ih.push("H",ii[0])}return ih.join("")}function bl(ig){var e=0,ij=ig.length,ii=ig[0],ih=[ii[0],",",ii[1]];while(++e<ij){ih.push("V",(ii=ig[e])[1],"H",ii[0])}return ih.join("")}function hz(ig){var e=0,ij=ig.length,ii=ig[0],ih=[ii[0],",",ii[1]];while(++e<ij){ih.push("H",(ii=ig[e])[0],"V",ii[1])}return ih.join("")}function b2(ig,e){return ig.length<4?hU(ig):ig[1]+c0(ig.slice(1,ig.length-1),bU(ig,e))}function s(ig,e){return ig.length<3?hU(ig):ig[0]+c0((ig.push(ig[0]),ig),bU([ig[ig.length-2]].concat(ig,[ig[1]]),e))}function dX(ig,e){return ig.length<3?hU(ig):ig[0]+c0(ig,bU(ig,e))}function c0(il,ik){if(ik.length<1||il.length!=ik.length&&il.length!=ik.length+2){return hU(il)}var im=il.length!=ik.length,iq="",io=il[0],e=il[1],ij=ik[0],ip=ij,ih=1;if(im){iq+="Q"+(e[0]-ij[0]*2/3)+","+(e[1]-ij[1]*2/3)+","+e[0]+","+e[1];io=il[1];ih=2}if(ik.length>1){ip=ik[1];e=il[ih];ih++;iq+="C"+(io[0]+ij[0])+","+(io[1]+ij[1])+","+(e[0]-ip[0])+","+(e[1]-ip[1])+","+e[0]+","+e[1];for(var ig=2;ig<ik.length;ig++,ih++){e=il[ih];ip=ik[ig];iq+="S"+(e[0]-ip[0])+","+(e[1]-ip[1])+","+e[0]+","+e[1]}}if(im){var ii=il[ih];iq+="Q"+(e[0]+ip[0]*2/3)+","+(e[1]+ip[1]*2/3)+","+ii[0]+","+ii[1]}return iq}function bU(il,ij){var ih=[],ii=(1-ij)/2,io,im=il[0],ik=il[1],ig=1,e=il.length;while(++ig<e){io=im;im=ik;ik=il[ig];ih.push([ii*(ik[0]-io[0]),ii*(ik[1]-io[1])])}return ih}function fn(im){if(im.length<3){return hU(im)}var ih=1,ig=im.length,ii=im[0],e=ii[0],ik=ii[1],il=[e,e,e,(ii=im[1])[0]],ij=[ik,ik,ik,ii[1]],io=[e,",",ik,"L",gt(ho,il),",",gt(ho,ij)];im.push(im[ig-1]);while(++ih<=ig){ii=im[ih];il.shift();il.push(ii[0]);ij.shift();ij.push(ii[1]);bO(io,il,ij)}im.pop();io.push("L",ii);return io.join("")}function bi(ii){if(ii.length<4){return hU(ii)}var ik=[],ih=-1,il=ii.length,ij,ig=[0],e=[0];while(++ih<3){ij=ii[ih];ig.push(ij[0]);e.push(ij[1])}ik.push(gt(ho,ig)+","+gt(ho,e));--ih;while(++ih<il){ij=ii[ih];ig.shift();ig.push(ij[0]);e.shift();e.push(ij[1]);bO(ik,ig,e)}return ik.join("")}function cP(ij){var il,ii=-1,im=ij.length,e=im+4,ik,ih=[],ig=[];while(++ii<4){ik=ij[ii%im];ih.push(ik[0]);ig.push(ik[1])}il=[gt(ho,ih),",",gt(ho,ig)];--ii;while(++ii<e){ik=ij[ii%im];ih.shift();ih.push(ik[0]);ig.shift();ig.push(ik[1]);bO(il,ih,ig)}return il.join("")}function cS(il,ik){var ih=il.length-1;if(ih){var ig=il[0][0],ij=il[0][1],ip=il[ih][0]-ig,io=il[ih][1]-ij,ii=-1,e,im;while(++ii<=ih){e=il[ii];im=ii/ih;e[0]=ik*e[0]+(1-ik)*(ig+im*ip);e[1]=ik*e[1]+(1-ik)*(ij+im*io)}}return fn(il)}function gt(ig,e){return ig[0]*e[0]+ig[1]*e[1]+ig[2]*e[2]+ig[3]*e[3]}var hs=[0,2/3,1/3,0],hq=[0,1/3,2/3,0],ho=[0,1/6,2/3,1/6];function bO(ig,e,ih){ig.push("C",gt(hs,e),",",gt(hs,ih),",",gt(hq,e),",",gt(hq,ih),",",gt(ho,e),",",gt(ho,ih))}function h6(ig,e){return(e[1]-ig[1])/(e[0]-ig[0])}function ee(ii){var ih=0,ig=ii.length-1,e=[],il=ii[0],ik=ii[1],ij=e[0]=h6(il,ik);while(++ih<ig){e[ih]=(ij+(ij=h6(il=ik,ik=ii[ih+1])))/2}e[ih]=ij;return e}function av(im){var ij=[],ii,il,ik,io,e=ee(im),ih=-1,ig=im.length-1;while(++ih<ig){ii=h6(im[ih],im[ih+1]);if(cI(ii)<gu){e[ih]=e[ih+1]=0}else{il=e[ih]/ii;ik=e[ih+1]/ii;io=il*il+ik*ik;if(io>9){io=ii*3/Math.sqrt(io);e[ih]=io*il;e[ih+1]=io*ik}}}ih=-1;while(++ih<=ig){io=(im[Math.min(ig,ih+1)][0]-im[Math.max(0,ih-1)][0])/(6*(1+e[ih]*e[ih]));ij.push([io||0,e[ih]*io||0])}return ij}function dm(e){return e.length<3?hU(e):e[0]+c0(e,av(e))}hp.svg.line.radial=function(){var e=fi(Q);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function Q(ii){var e,ih=-1,ik=ii.length,ij,ig;while(++ih<ik){e=ii[ih];ij=e[0];ig=e[1]+hJ;e[0]=ij*Math.cos(ig);e[1]=ij*Math.sin(ig)}return ii}function h9(ij){var ih=hX,ig=hX,iq=0,io=hW,ii=aj,ik=hU,ir=ik.key,im=ik,il="L",ip=0.7;function e(ix){var iz=[],it=[],iG=[],iy=-1,iu=ix.length,iB,iw=T(ih),iF=T(iq),iv=ih===ig?function(){return iD}:T(ig),iE=iq===io?function(){return iC}:T(io),iD,iC;function iA(){iz.push("M",ik(ij(iG),ip),il,im(ij(it.reverse()),ip),"Z")}while(++iy<iu){if(ii.call(this,iB=ix[iy],iy)){it.push([iD=+iw.call(this,iB,iy),iC=+iF.call(this,iB,iy)]);iG.push([+iv.call(this,iB,iy),+iE.call(this,iB,iy)])}else{if(it.length){iA();it=[];iG=[]}}}if(it.length){iA()}return iz.length?iz.join(""):null}e.x=function(it){if(!arguments.length){return ig}ih=ig=it;return e};e.x0=function(it){if(!arguments.length){return ih}ih=it;return e};e.x1=function(it){if(!arguments.length){return ig}ig=it;return e};e.y=function(it){if(!arguments.length){return io}iq=io=it;return e};e.y0=function(it){if(!arguments.length){return iq}iq=it;return e};e.y1=function(it){if(!arguments.length){return io}io=it;return e};e.defined=function(it){if(!arguments.length){return ii}ii=it;return e};e.interpolate=function(it){if(!arguments.length){return ir}if(typeof it==="function"){ir=ik=it}else{ir=(ik=cc.get(it)||hU).key}im=ik.reverse||ik;il=ik.closed?"M":"L";return e};e.tension=function(it){if(!arguments.length){return ip}ip=it;return e};return e}bl.reverse=hz;hz.reverse=bl;hp.svg.area=function(){return h9(gr)};hp.svg.area.radial=function(){var e=h9(Q);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};hp.svg.chord=function(){var e=hK,im=hT,il=I,io=gn,ij=aq;function ik(iu,ir){var it=ip(this,e,iu,ir),iq=ip(this,im,iu,ir);return"M"+it.p0+ig(it.r,it.p1,it.a1-it.a0)+(ih(it,iq)?ii(it.r,it.p1,it.r,it.p0):ii(it.r,it.p1,iq.r,iq.p0)+ig(iq.r,iq.p1,iq.a1-iq.a0)+ii(iq.r,iq.p1,it.r,it.p0))+"Z"}function ip(iu,ix,iy,iv){var it=ix.call(iu,iy,iv),iw=il.call(iu,it,iv),ir=io.call(iu,it,iv)+hJ,iq=ij.call(iu,it,iv)+hJ;return{r:iw,a0:ir,a1:iq,p0:[iw*Math.cos(ir),iw*Math.sin(ir)],p1:[iw*Math.cos(iq),iw*Math.sin(iq)]}}function ih(ir,iq){return ir.a0==iq.a0&&ir.a1==iq.a1}function ig(ir,it,iq){return"A"+ir+","+ir+" 0 "+ +(iq>gk)+",1 "+it}function ii(ir,iu,iq,it){return"Q 0,0 "+it}ik.radius=function(iq){if(!arguments.length){return il}il=T(iq);return ik};ik.source=function(iq){if(!arguments.length){return e}e=T(iq);return ik};ik.target=function(iq){if(!arguments.length){return im}im=T(iq);return ik};ik.startAngle=function(iq){if(!arguments.length){return io}io=T(iq);return ik};ik.endAngle=function(iq){if(!arguments.length){return ij}ij=T(iq);return ik};return ik};function I(e){return e.radius}hp.svg.diagonal=function(){var ih=hK,ii=hT,e=m;function ig(io,ik){var ip=ih.call(this,io,ik),il=ii.call(this,io,ik),ij=(ip.y+il.y)/2,im=[ip,{x:ip.x,y:ij},{x:il.x,y:ij},il];im=im.map(e);return"M"+im[0]+"C"+im[1]+" "+im[2]+" "+im[3]}ig.source=function(ij){if(!arguments.length){return ih}ih=T(ij);return ig};ig.target=function(ij){if(!arguments.length){return ii}ii=T(ij);return ig};ig.projection=function(ij){if(!arguments.length){return e}e=ij;return ig};return ig};function m(e){return[e.x,e.y]}hp.svg.diagonal.radial=function(){var ih=hp.svg.diagonal(),e=m,ig=ih.projection;ih.projection=function(ii){return arguments.length?ig(n(e=ii)):e};return ih};function n(e){return function(){var ii=e.apply(this,arguments),ih=ii[0],ig=ii[1]+hJ;return[ih*Math.cos(ig),ih*Math.sin(ig)]}}hp.svg.symbol=function(){var ig=aV,e=fd;function ih(ij,ii){return(hQ.get(ig.call(this,ij,ii))||ce)(e.call(this,ij,ii))}ih.type=function(ii){if(!arguments.length){return ig}ig=T(ii);return ih};ih.size=function(ii){if(!arguments.length){return e}e=T(ii);return ih};return ih};function fd(){return 64}function aV(){return"circle"}function ce(e){var ig=Math.sqrt(e/gk);return"M0,"+ig+"A"+ig+","+ig+" 0 1,1 0,"+-ig+"A"+ig+","+ig+" 0 1,1 0,"+ig+"Z"}var hQ=hp.map({circle:ce,cross:function(e){var ig=Math.sqrt(e/5)/2;return"M"+-3*ig+","+-ig+"H"+-ig+"V"+-3*ig+"H"+ig+"V"+-ig+"H"+3*ig+"V"+ig+"H"+ig+"V"+3*ig+"H"+-ig+"V"+ig+"H"+-3*ig+"Z"},diamond:function(e){var ig=Math.sqrt(e/(2*cm)),ih=ig*cm;return"M0,"+-ig+"L"+ih+",0 0,"+ig+" "+-ih+",0Z"},square:function(e){var ig=Math.sqrt(e)/2;return"M"+-ig+","+-ig+"L"+ig+","+-ig+" "+ig+","+ig+" "+-ig+","+ig+"Z"},"triangle-down":function(e){var ih=Math.sqrt(e/b6),ig=ih*b6/2;return"M0,"+ig+"L"+ih+","+-ig+" "+-ih+","+-ig+"Z"},"triangle-up":function(e){var ih=Math.sqrt(e/b6),ig=ih*b6/2;return"M0,"+-ig+"L"+ih+","+ig+" "+-ih+","+ig+"Z"}});hp.svg.symbolTypes=hQ.keys();var b6=Math.sqrt(3),cm=Math.tan(30*K);function gU(e,ig){h8(e,ez);e.id=ig;return e}var ez=[],hd=0,at,ea;ez.call=d2.call;ez.empty=d2.empty;ez.node=d2.node;ez.size=d2.size;hp.transition=function(e){return arguments.length?at?e.transition():e:gW.transition()};hp.transition.prototype=ez;ez.select=function(il){var e=this.id,ii=[],iq,ig,ij;il=y(il);for(var im=-1,ik=this.length;++im<ik;){ii.push(iq=[]);for(var ip=this[im],io=-1,ih=ip.length;++io<ih;){if((ij=ip[io])&&(ig=il.call(ij,ij.__data__,io,im))){if("__data__" in ij){ig.__data__=ij.__data__}fK(ig,io,e,ij.__transition__[e]);iq.push(ig)}else{iq.push(null)}}}return gU(ii,e)};ez.selectAll=function(io){var ig=this.id,ik=[],iv,e,im,ih,it;io=c4(io);for(var iq=-1,il=this.length;++iq<il;){for(var iu=this[iq],ir=-1,ij=iu.length;++ir<ij;){if(im=iu[ir]){it=im.__transition__[ig];e=io.call(im,im.__data__,ir,iq);ik.push(iv=[]);for(var ip=-1,ii=e.length;++ip<ii;){if(ih=e[ip]){fK(ih,ip,ig,it)}iv.push(ih)}}}}return gU(ik,ig)};ez.filter=function(e){var ih=[],io,im,ii;if(typeof e!=="function"){e=a8(e)}for(var ik=0,ij=this.length;ik<ij;ik++){ih.push(io=[]);for(var im=this[ik],il=0,ig=im.length;il<ig;il++){if((ii=im[il])&&e.call(ii,ii.__data__,il)){io.push(ii)}}}return gU(ih,this.id)};ez.tween=function(e,ig){var ih=this.id;if(arguments.length<2){return this.node().__transition__[ih].tween.get(e)}return cK(this,ig==null?function(ii){ii.__transition__[ih].tween.remove(e)}:function(ii){ii.__transition__[ih].tween.set(e,ig)})};function hP(e,ig,ii,ih){var ij=e.id;return cK(e,typeof ii==="function"?function(im,il,ik){im.__transition__[ij].tween.set(ig,ih(ii.call(im,im.__data__,il,ik)))}:(ii=ih(ii),function(ik){ik.__transition__[ij].tween.set(ig,ii)}))}ez.attr=function(e,ik){if(arguments.length<2){for(ik in e){this.attr(ik,e[ik])}return this}var ii=e=="transform"?en:fL,ih=hp.ns.qualify(e);function ig(){this.removeAttribute(ih)}function im(){this.removeAttributeNS(ih.space,ih.local)}function ij(io){return io==null?ig:(io+="",function(){var ip=this.getAttribute(ih),iq;return ip!==io&&(iq=ii(ip,io),function(ir){this.setAttribute(ih,iq(ir))})})}function il(io){return io==null?im:(io+="",function(){var ip=this.getAttributeNS(ih.space,ih.local),iq;return ip!==io&&(iq=ii(ip,io),function(ir){this.setAttributeNS(ih.space,ih.local,iq(ir))})})}return hP(this,"attr."+e,ik,ih.local?il:ij)};ez.attrTween=function(e,ih){var ig=hp.ns.qualify(e);function ii(im,ik){var il=ih.call(this,im,ik,this.getAttribute(ig));return il&&function(io){this.setAttribute(ig,il(io))}}function ij(im,ik){var il=ih.call(this,im,ik,this.getAttributeNS(ig.space,ig.local));return il&&function(io){this.setAttributeNS(ig.space,ig.local,il(io))}}return this.tween("attr."+e,ig.local?ij:ii)};ez.style=function(ih,ij,ii){var ik=arguments.length;if(ik<3){if(typeof ih!=="string"){if(ik<2){ij=""}for(ii in ih){this.style(ii,ih[ii],ij)}return this}ii=""}function ig(){this.style.removeProperty(ih)}function e(il){return il==null?ig:(il+="",function(){var im=fH.getComputedStyle(this,null).getPropertyValue(ih),io;return im!==il&&(io=fL(im,il),function(ip){this.style.setProperty(ih,io(ip),ii)})})}return hP(this,"style."+ih,ij,e)};ez.styleTween=function(e,ih,ig){if(arguments.length<3){ig=""}function ii(il,ij){var ik=ih.call(this,il,ij,fH.getComputedStyle(this,null).getPropertyValue(e));return ik&&function(im){this.style.setProperty(e,ik(im),ig)}}return this.tween("style."+e,ii)};ez.text=function(e){return hP(this,"text",e,ie)};function ie(e){if(e==null){e=""}return function(){this.textContent=e}}ez.remove=function(){return this.each("end.transition",function(){var e;if(this.__transition__.count<2&&(e=this.parentNode)){e.removeChild(this)}})};ez.ease=function(e){var ig=this.id;if(arguments.length<1){return this.node().__transition__[ig].ease}if(typeof e!=="function"){e=hp.ease.apply(hp,arguments)}return cK(this,function(ih){ih.__transition__[ig].ease=e})};ez.delay=function(e){var ig=this.id;return cK(this,typeof e==="function"?function(ij,ii,ih){ij.__transition__[ig].delay=+e.call(ij,ij.__data__,ii,ih)}:(e=+e,function(ih){ih.__transition__[ig].delay=e}))};ez.duration=function(e){var ig=this.id;return cK(this,typeof e==="function"?function(ij,ii,ih){ij.__transition__[ig].duration=Math.max(1,e.call(ij,ij.__data__,ii,ih))}:(e=Math.max(1,e),function(ih){ih.__transition__[ig].duration=e}))};ez.each=function(ig,ih){var ij=this.id;if(arguments.length<2){var e=ea,ii=at;at=ij;cK(this,function(im,il,ik){ea=im.__transition__[ij];ig.call(im,im.__data__,il,ik)});ea=e;at=ii}else{cK(this,function(ik){var il=ik.__transition__[ij];(il.event||(il.event=hp.dispatch("start","end"))).on(ig,ih)})}return this};ez.transition=function(){var iq=this.id,ip=++hd,ig=[],io,im,ii,il;for(var ij=0,ih=this.length;ij<ih;ij++){ig.push(io=[]);for(var im=this[ij],ik=0,e=im.length;ik<e;ik++){if(ii=im[ik]){il=Object.create(ii.__transition__[iq]);il.delay+=il.duration;fK(ii,ik,ip,il)}io.push(ii)}}return gU(ig,ip)};function fK(ii,ih,il,e){var ig=ii.__transition__||(ii.__transition__={active:0,count:0}),ik=ig[il];if(!ik){var ij=e.time;ik=ig[il]={tween:new aI(),time:ij,ease:e.ease,delay:e.delay,duration:e.duration};++ig.count;hp.timer(function(ix){var iu=ii.__data__,ip=ik.ease,ir=ik.delay,iq=ik.duration,im=dn,iw=[];im.t=ir+ij;if(ir<=ix){return io(ix-ir)}im.c=io;function io(iy){if(ig.active>il){return iv()}ig.active=il;ik.event&&ik.event.start.call(ii,iu,ih);ik.tween.forEach(function(iz,iA){if(iA=iA.call(ii,iu,ih)){iw.push(iA)}});hp.timer(function(){im.c=it(iy||1)?aj:it;return 1},0,ij)}function it(iy){if(ig.active!==il){return iv()}var iz=iy/iq,iA=ip(iz),iB=iw.length;while(iB>0){iw[--iB].call(ii,iA)}if(iz>=1){ik.event&&ik.event.end.call(ii,iu,ih);return iv()}}function iv(){if(--ig.count){delete ig[il]}else{delete ii.__transition__}return 1}},0,ij)}}hp.svg.axis=function(){var ih=hp.scale.linear(),ij=hZ,e=6,ik=6,io=3,im=[10],ii=null,il;function ig(ip){ip.each(function(){var iH=hp.select(this);var iE=this.__chart__||ih,iD=this.__chart__=ih.copy();var iJ=ii==null?iD.ticks?iD.ticks.apply(iD,im):iD.domain():ii,iC=il==null?iD.tickFormat?iD.tickFormat.apply(iD,im):gr:il,iF=iH.selectAll(".tick").data(iJ,iD),iz=iF.enter().insert("g",".domain").attr("class","tick").style("opacity",gu),iB=hp.transition(iF.exit()).style("opacity",gu).remove(),it=hp.transition(iF).style("opacity",1),iq;var iy=aZ(iD),iA=iH.selectAll(".domain").data([0]),iK=(iA.enter().append("path").attr("class","domain"),hp.transition(iA));iz.append("line");iz.append("text");var ir=iz.select("line"),iI=it.select("line"),ix=iF.select("text").text(iC),iu=iz.select("text"),iG=it.select("text");switch(ij){case"bottom":iq=fu;ir.attr("y2",e);iu.attr("y",Math.max(e,0)+io);iI.attr("x2",0).attr("y2",e);iG.attr("x",0).attr("y",Math.max(e,0)+io);ix.attr("dy",".71em").style("text-anchor","middle");iK.attr("d","M"+iy[0]+","+ik+"V0H"+iy[1]+"V"+ik);break;case"top":iq=fu;ir.attr("y2",-e);iu.attr("y",-(Math.max(e,0)+io));iI.attr("x2",0).attr("y2",-e);iG.attr("x",0).attr("y",-(Math.max(e,0)+io));ix.attr("dy","0em").style("text-anchor","middle");iK.attr("d","M"+iy[0]+","+-ik+"V0H"+iy[1]+"V"+-ik);break;case"left":iq=ft;ir.attr("x2",-e);iu.attr("x",-(Math.max(e,0)+io));iI.attr("x2",-e).attr("y2",0);iG.attr("x",-(Math.max(e,0)+io)).attr("y",0);ix.attr("dy",".32em").style("text-anchor","end");iK.attr("d","M"+-ik+","+iy[0]+"H0V"+iy[1]+"H"+-ik);break;case"right":iq=ft;ir.attr("x2",e);iu.attr("x",Math.max(e,0)+io);iI.attr("x2",e).attr("y2",0);iG.attr("x",Math.max(e,0)+io).attr("y",0);ix.attr("dy",".32em").style("text-anchor","start");iK.attr("d","M"+ik+","+iy[0]+"H0V"+iy[1]+"H"+ik);break}if(iD.rangeBand){var iw=iD.rangeBand()/2,iv=function(iL){return iD(iL)+iw};iz.call(iq,iv);it.call(iq,iv)}else{iz.call(iq,iE);it.call(iq,iD);iB.call(iq,iD)}})}ig.scale=function(ip){if(!arguments.length){return ih}ih=ip;return ig};ig.orient=function(ip){if(!arguments.length){return ij}ij=ip in e8?ip+"":hZ;return ig};ig.ticks=function(){if(!arguments.length){return im}im=arguments;return ig};ig.tickValues=function(ip){if(!arguments.length){return ii}ii=ip;return ig};ig.tickFormat=function(ip){if(!arguments.length){return il}il=ip;return ig};ig.tickSize=function(ip){var iq=arguments.length;if(!iq){return e}e=+ip;ik=+arguments[iq-1];return ig};ig.innerTickSize=function(ip){if(!arguments.length){return e}e=+ip;return ig};ig.outerTickSize=function(ip){if(!arguments.length){return ik}ik=+ip;return ig};ig.tickPadding=function(ip){if(!arguments.length){return io}io=+ip;return ig};ig.tickSubdivide=function(){return arguments.length&&ig};return ig};var hZ="bottom",e8={top:1,right:1,bottom:1,left:1};function fu(ig,e){ig.attr("transform",function(ih){return"translate("+e(ih)+",0)"})}function ft(e,ig){e.attr("transform",function(ih){return"translate(0,"+ig(ih)+")"})}hp.svg.brush=function(){var ig=hk(io,"brushstart","brush","brushend"),ir=null,ip=null,ih=[0,0],im=[0,0],iq,ij,e=true,il=true,it=au[0];function io(iw){iw.each(function(){var iC=hp.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",iu).on("touchstart.brush",iu);var iB=iC.selectAll(".background").data([0]);iB.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");iC.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var iA=iC.selectAll(".resize").data(it,gr);iA.exit().remove();iA.enter().append("g").attr("class",function(iD){return"resize "+iD}).style("cursor",function(iD){return e0[iD]}).append("rect").attr("x",function(iD){return/[ew]$/.test(iD)?-3:null}).attr("y",function(iD){return/^[ns]/.test(iD)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");iA.style("display",io.empty()?"none":null);var iz=hp.transition(iC),ix=hp.transition(iB),iy;if(ir){iy=aZ(ir);ix.attr("x",iy[0]).attr("width",iy[1]-iy[0]);ik(iz)}if(ip){iy=aZ(ip);ix.attr("y",iy[0]).attr("height",iy[1]-iy[0]);ii(iz)}iv(iz)})}io.event=function(iw){iw.each(function(){var ix=ig.of(this,arguments),iy={x:ih,y:im,i:iq,j:ij},iz=this.__chart__||iy;this.__chart__=iy;if(at){hp.select(this).transition().each("start.brush",function(){iq=iz.i;ij=iz.j;ih=iz.x;im=iz.y;ix({type:"brushstart"})}).tween("brush:brush",function(){var iA=eS(ih,iy.x),iB=eS(im,iy.y);iq=ij=null;return function(iC){ih=iy.x=iA(iC);im=iy.y=iB(iC);ix({type:"brush",mode:"resize"})}}).each("end.brush",function(){iq=iy.i;ij=iy.j;ix({type:"brush",mode:"resize"});ix({type:"brushend"})})}else{ix({type:"brushstart"});ix({type:"brush",mode:"resize"});ix({type:"brushend"})}})};function iv(iw){iw.selectAll(".resize").attr("transform",function(ix){return"translate("+ih[+/e$/.test(ix)]+","+im[+/^s/.test(ix)]+")"})}function ik(iw){iw.select(".extent").attr("x",ih[0]);iw.selectAll(".extent,.n>rect,.s>rect").attr("width",ih[1]-ih[0])}function ii(iw){iw.select(".extent").attr("y",im[0]);iw.selectAll(".extent,.e>rect,.w>rect").attr("height",im[1]-im[0])}function iu(){var iP=this,ix=hp.select(hp.event.target),iE=ig.of(iP,arguments),iK=hp.select(iP),iM=ix.datum(),iI=!/^(n|s)$/.test(iM)&&ir,iG=!/^(e|w)$/.test(iM)&&ip,iH=ix.classed("extent"),iz=bK(),iN,iO=hp.mouse(iP),iy;var iC=hp.select(fH).on("keydown.brush",iF).on("keyup.brush",iB);if(hp.event.changedTouches){iC.on("touchmove.brush",iD).on("touchend.brush",iw)}else{iC.on("mousemove.brush",iD).on("mouseup.brush",iw)}iK.interrupt().selectAll("*").interrupt();if(iH){iO[0]=ih[0]-iO[0];iO[1]=im[0]-iO[1]}else{if(iM){var iL=+/w$/.test(iM),iJ=+/^n/.test(iM);iy=[ih[1-iL]-iO[0],im[1-iJ]-iO[1]];iO[0]=ih[iL];iO[1]=im[iJ]}else{if(hp.event.altKey){iN=iO.slice()}}}iK.style("pointer-events","none").selectAll(".resize").style("display",null);hp.select("body").style("cursor",ix.style("cursor"));iE({type:"brushstart"});iD();function iF(){if(hp.event.keyCode==32){if(!iH){iN=null;iO[0]-=ih[1];iO[1]-=im[1];iH=2}w()}}function iB(){if(hp.event.keyCode==32&&iH==2){iO[0]+=ih[1];iO[1]+=im[1];iH=0;w()}}function iD(){var iQ=hp.mouse(iP),iR=false;if(iy){iQ[0]+=iy[0];iQ[1]+=iy[1]}if(!iH){if(hp.event.altKey){if(!iN){iN=[(ih[0]+ih[1])/2,(im[0]+im[1])/2]}iO[0]=ih[+(iQ[0]<iN[0])];iO[1]=im[+(iQ[1]<iN[1])]}else{iN=null}}if(iI&&iA(iQ,ir,0)){ik(iK);iR=true}if(iG&&iA(iQ,ip,1)){ii(iK);iR=true}if(iR){iv(iK);iE({type:"brush",mode:iH?"move":"resize"})}}function iA(iY,iS,iU){var iV=aZ(iS),iR=iV[0],iQ=iV[1],iW=iO[iU],iZ=iU?im:ih,i0=iZ[1]-iZ[0],iT,iX;if(iH){iR-=iW;iQ-=i0+iW}iT=(iU?il:e)?Math.max(iR,Math.min(iQ,iY[iU])):iY[iU];if(iH){iX=(iT+=iW)+i0}else{if(iN){iW=Math.max(iR,Math.min(iQ,2*iN[iU]-iT))}if(iW<iT){iX=iT;iT=iW}else{iX=iW}}if(iZ[0]!=iT||iZ[1]!=iX){if(iU){ij=null}else{iq=null}iZ[0]=iT;iZ[1]=iX;return true}}function iw(){iD();iK.style("pointer-events","all").selectAll(".resize").style("display",io.empty()?"none":null);hp.select("body").style("cursor",null);iC.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);iz();iE({type:"brushend"})}}io.x=function(iw){if(!arguments.length){return ir}ir=iw;it=au[!ir<<1|!ip];return io};io.y=function(iw){if(!arguments.length){return ip}ip=iw;it=au[!ir<<1|!ip];return io};io.clamp=function(iw){if(!arguments.length){return ir&&ip?[e,il]:ir?e:ip?il:null}if(ir&&ip){e=!!iw[0],il=!!iw[1]}else{if(ir){e=!!iw}else{if(ip){il=!!iw}}}return io};io.extent=function(iB){var iy,iw,iA,iz,ix;if(!arguments.length){if(ir){if(iq){iy=iq[0],iw=iq[1]}else{iy=ih[0],iw=ih[1];if(ir.invert){iy=ir.invert(iy),iw=ir.invert(iw)}if(iw<iy){ix=iy,iy=iw,iw=ix}}}if(ip){if(ij){iA=ij[0],iz=ij[1]}else{iA=im[0],iz=im[1];if(ip.invert){iA=ip.invert(iA),iz=ip.invert(iz)}if(iz<iA){ix=iA,iA=iz,iz=ix}}}return ir&&ip?[[iy,iA],[iw,iz]]:ir?[iy,iw]:ip&&[iA,iz]}if(ir){iy=iB[0],iw=iB[1];if(ip){iy=iy[0],iw=iw[0]}iq=[iy,iw];if(ir.invert){iy=ir(iy),iw=ir(iw)}if(iw<iy){ix=iy,iy=iw,iw=ix}if(iy!=ih[0]||iw!=ih[1]){ih=[iy,iw]}}if(ip){iA=iB[0],iz=iB[1];if(ir){iA=iA[1],iz=iz[1]}ij=[iA,iz];if(ip.invert){iA=ip(iA),iz=ip(iz)}if(iz<iA){ix=iA,iA=iz,iz=ix}if(iA!=im[0]||iz!=im[1]){im=[iA,iz]}}return io};io.clear=function(){if(!io.empty()){ih=[0,0],im=[0,0];iq=ij=null}return io};io.empty=function(){return !!ir&&ih[0]==ih[1]||!!ip&&im[0]==im[1]};return hp.rebind(io,ig,"on")};var e0={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var au=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var fP=hp.time={},ht=Date,p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function cj(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}cj.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){f9.setUTCDate.apply(this._,arguments)},setDay:function(){f9.setUTCDay.apply(this._,arguments)},setFullYear:function(){f9.setUTCFullYear.apply(this._,arguments)},setHours:function(){f9.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){f9.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){f9.setUTCMinutes.apply(this._,arguments)},setMonth:function(){f9.setUTCMonth.apply(this._,arguments)},setSeconds:function(){f9.setUTCSeconds.apply(this._,arguments)},setTime:function(){f9.setTime.apply(this._,arguments)}};var f9=Date.prototype;var S="%a %b %e %X %Y",eZ="%m/%d/%Y",de="%H:%M:%S";var cl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],cV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cq=["January","February","March","April","May","June","July","August","September","October","November","December"],aK=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function c2(ik,e,ig){function io(ip){var ir=ik(ip),iq=ii(ir,1);return ip-ir<iq-ip?ir:iq}function im(ip){e(ip=ik(new ht(ip-1)),1);return ip}function ii(iq,ip){e(iq=new ht(+iq),ip);return iq}function ij(ir,iq,ip){var it=im(ir),iu=[];if(ip>1){while(it<iq){if(!(ig(it)%ip)){iu.push(new Date(+it))}e(it,1)}}else{while(it<iq){iu.push(new Date(+it)),e(it,1)}}return iu}function ih(it,ir,iq){try{ht=cj;var ip=new cj();ip._=it;return ij(ip,ir,iq)}finally{ht=Date}}ik.floor=ik;ik.round=io;ik.ceil=im;ik.offset=ii;ik.range=ij;var il=ik.utc=dW(ik);il.floor=il;il.round=dW(io);il.ceil=dW(im);il.offset=dW(ii);il.range=ih;return ik}function dW(e){return function(ih,ig){try{ht=cj;var ii=new cj();ii._=ih;return e(ii,ig)._}finally{ht=Date}}}fP.year=c2(function(e){e=fP.day(e);e.setMonth(0,1);return e},function(e,ig){e.setFullYear(e.getFullYear()+ig)},function(e){return e.getFullYear()});fP.years=fP.year.range;fP.years.utc=fP.year.utc.range;fP.day=c2(function(ig){var e=new ht(2000,0);e.setFullYear(ig.getFullYear(),ig.getMonth(),ig.getDate());return e},function(e,ig){e.setDate(e.getDate()+ig)},function(e){return e.getDate()-1});fP.days=fP.day.range;fP.days.utc=fP.day.utc.range;fP.dayOfYear=function(e){var ig=fP.year(e);return Math.floor((e-ig-(e.getTimezoneOffset()-ig.getTimezoneOffset())*60000)/86400000)};p.forEach(function(ig,ih){ig=ig.toLowerCase();ih=7-ih;var e=fP[ig]=c2(function(ii){(ii=fP.day(ii)).setDate(ii.getDate()-(ii.getDay()+ih)%7);return ii},function(ii,ij){ii.setDate(ii.getDate()+Math.floor(ij)*7)},function(ij){var ii=fP.year(ij).getDay();return Math.floor((fP.dayOfYear(ij)+(ii+ih)%7)/7)-(ii!==ih)});fP[ig+"s"]=e.range;fP[ig+"s"].utc=e.utc.range;fP[ig+"OfYear"]=function(ij){var ii=fP.year(ij).getDay();return Math.floor((fP.dayOfYear(ij)+(ii+ih)%7)/7)}});fP.week=fP.sunday;fP.weeks=fP.sunday.range;fP.weeks.utc=fP.sunday.utc.range;fP.weekOfYear=fP.sundayOfYear;fP.format=id;function id(e){var ih=e.length;function ig(ik){var ij=[],il=-1,ii=0,ip,io,im;while(++il<ih){if(e.charCodeAt(il)===37){ij.push(e.substring(ii,il));if((io=aN[ip=e.charAt(++il)])!=null){ip=e.charAt(++il)}if(im=gD[ip]){ip=im(ik,io==null?ip==="e"?" ":"0":io)}ij.push(ip);ii=il+1}}ij.push(e.substring(ii,il));return ij.join("")}ig.parse=function(ik){var im={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},il=d9(im,e,ik,0);if(il!=ik.length){return null}if("p" in im){im.H=im.H%12+im.p*12}var ii=im.Z!=null&&ht!==cj,ij=new (ii?cj:ht)();if("j" in im){ij.setFullYear(im.y,0,im.j)}else{if("w" in im&&("W" in im||"U" in im)){ij.setFullYear(im.y,0,1);ij.setFullYear(im.y,0,"W" in im?(im.w+6)%7+im.W*7-(ij.getDay()+5)%7:im.w+im.U*7-(ij.getDay()+6)%7)}else{ij.setFullYear(im.y,im.m,im.d)}}ij.setHours(im.H+Math.floor(im.Z/100),im.M+im.Z%100,im.S,im.L);return ii?ij._:ij};ig.toString=function(){return e};return ig}function d9(ii,io,il,ij){var im,e,ip,ik=0,ig=io.length,ih=il.length;while(ik<ig){if(ij>=ih){return -1}im=io.charCodeAt(ik++);if(im===37){ip=io.charAt(ik++);e=hR[ip in aN?io.charAt(ik++):ip];if(!e||(ij=e(ii,il,ij))<0){return -1}}else{if(im!=il.charCodeAt(ij++)){return -1}}}return ij}function cM(e){return new RegExp("^(?:"+e.map(hp.requote).join("|")+")","i")}function gY(ih){var ig=new aI(),e=-1,ii=ih.length;while(++e<ii){ig.set(ih[e].toLowerCase(),e)}return ig}function dA(ij,ik,ih){var e=ij<0?"-":"",ig=(e?-ij:ij)+"",ii=ig.length;return e+(ii<ih?new Array(ih-ii+1).join(ik)+ig:ig)}var hD=cM(cl),bb=gY(cl),fR=cM(cV),ef=gY(cV),ha=cM(cq),fE=gY(cq),e4=cM(aK),fb=gY(aK),fg=/^%/;var aN={"-":"",_:" ","0":"0"};var gD={a:function(e){return cV[e.getDay()]},A:function(e){return cl[e.getDay()]},b:function(e){return aK[e.getMonth()]},B:function(e){return cq[e.getMonth()]},c:id(S),d:function(ig,e){return dA(ig.getDate(),e,2)},e:function(ig,e){return dA(ig.getDate(),e,2)},H:function(ig,e){return dA(ig.getHours(),e,2)},I:function(ig,e){return dA(ig.getHours()%12||12,e,2)},j:function(ig,e){return dA(1+fP.dayOfYear(ig),e,3)},L:function(ig,e){return dA(ig.getMilliseconds(),e,3)},m:function(ig,e){return dA(ig.getMonth()+1,e,2)},M:function(ig,e){return dA(ig.getMinutes(),e,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(ig,e){return dA(ig.getSeconds(),e,2)},U:function(ig,e){return dA(fP.sundayOfYear(ig),e,2)},w:function(e){return e.getDay()},W:function(ig,e){return dA(fP.mondayOfYear(ig),e,2)},x:id(eZ),X:id(de),y:function(ig,e){return dA(ig.getFullYear()%100,e,2)},Y:function(ig,e){return dA(ig.getFullYear()%10000,e,4)},Z:f4,"%":function(){return"%"}};var hR={a:g4,A:cF,b:a1,B:e5,c:eA,d:b1,e:b1,H:aQ,I:aQ,j:F,L:gZ,m:gN,M:cZ,p:hB,S:d1,U:br,w:dV,W:dL,x:ia,X:gK,y:P,Y:by,Z:a4,"%":fA};function g4(ig,e,ih){fR.lastIndex=0;var ii=fR.exec(e.substring(ih));return ii?(ig.w=ef.get(ii[0].toLowerCase()),ih+ii[0].length):-1}function cF(ig,e,ih){hD.lastIndex=0;var ii=hD.exec(e.substring(ih));return ii?(ig.w=bb.get(ii[0].toLowerCase()),ih+ii[0].length):-1}function dV(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+1));return ii?(ig.w=+ii[0],ih+ii[0].length):-1}function br(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih));return ii?(ig.U=+ii[0],ih+ii[0].length):-1}function dL(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih));return ii?(ig.W=+ii[0],ih+ii[0].length):-1}function a1(ig,e,ih){e4.lastIndex=0;var ii=e4.exec(e.substring(ih));return ii?(ig.m=fb.get(ii[0].toLowerCase()),ih+ii[0].length):-1}function e5(ig,e,ih){ha.lastIndex=0;var ii=ha.exec(e.substring(ih));return ii?(ig.m=fE.get(ii[0].toLowerCase()),ih+ii[0].length):-1}function eA(ig,e,ih){return d9(ig,gD.c.toString(),e,ih)}function ia(ig,e,ih){return d9(ig,gD.x.toString(),e,ih)}function gK(ig,e,ih){return d9(ig,gD.X.toString(),e,ih)}function by(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+4));return ii?(ig.y=+ii[0],ih+ii[0].length):-1}function P(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.y=c5(+ii[0]),ih+ii[0].length):-1}function a4(ig,e,ih){return/^[+-]\d{4}$/.test(e=e.substring(ih,ih+5))?(ig.Z=+e,ih+5):-1}function c5(e){return e+(e>68?1900:2000)}function gN(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.m=ii[0]-1,ih+ii[0].length):-1}function b1(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.d=+ii[0],ih+ii[0].length):-1}function F(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+3));return ii?(ig.j=+ii[0],ih+ii[0].length):-1}function aQ(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.H=+ii[0],ih+ii[0].length):-1}function cZ(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.M=+ii[0],ih+ii[0].length):-1}function d1(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+2));return ii?(ig.S=+ii[0],ih+ii[0].length):-1}function gZ(ig,e,ih){gd.lastIndex=0;var ii=gd.exec(e.substring(ih,ih+3));return ii?(ig.L=+ii[0],ih+ii[0].length):-1}var gd=/^\s*\d+/;function hB(ig,e,ih){var ii=f.get(e.substring(ih,ih+=2).toLowerCase());return ii==null?-1:(ig.p=ii,ih)}var f=hp.map({am:0,pm:1});function f4(ij){var ii=ij.getTimezoneOffset(),ih=ii>0?"-":"+",ig=~~(cI(ii)/60),e=cI(ii)%60;return ih+dA(ig,"0",2)+dA(e,"0",2)}function fA(ig,e,ih){fg.lastIndex=0;var ii=fg.exec(e.substring(ih,ih+1));return ii?ih+ii[0].length:-1}id.utc=dj;function dj(ig){var e=id(ig);function ih(ii){try{ht=cj;var ij=new ht();ij._=ii;return e(ij)}finally{ht=Date}}ih.parse=function(ij){try{ht=cj;var ii=e.parse(ij);return ii&&ii._}finally{ht=Date}};ih.toString=e.toString;return ih}var dT=dj("%Y-%m-%dT%H:%M:%S.%LZ");id.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dz:dT;function dz(e){return e.toISOString()}dz.parse=function(ig){var e=new Date(ig);return isNaN(e)?null:e};dz.toString=dT.toString;fP.second=c2(function(e){return new ht(Math.floor(e/1000)*1000)},function(e,ig){e.setTime(e.getTime()+Math.floor(ig)*1000)},function(e){return e.getSeconds()});fP.seconds=fP.second.range;fP.seconds.utc=fP.second.utc.range;fP.minute=c2(function(e){return new ht(Math.floor(e/60000)*60000)},function(e,ig){e.setTime(e.getTime()+Math.floor(ig)*60000)},function(e){return e.getMinutes()});fP.minutes=fP.minute.range;fP.minutes.utc=fP.minute.utc.range;fP.hour=c2(function(e){var ig=e.getTimezoneOffset()/60;return new ht((Math.floor(e/3600000-ig)+ig)*3600000)},function(e,ig){e.setTime(e.getTime()+Math.floor(ig)*3600000)},function(e){return e.getHours()});fP.hours=fP.hour.range;fP.hours.utc=fP.hour.utc.range;fP.month=c2(function(e){e=fP.day(e);e.setDate(1);return e},function(e,ig){e.setMonth(e.getMonth()+ig)},function(e){return e.getMonth()});fP.months=fP.month.range;fP.months.utc=fP.month.utc.range;function bo(e,ig,ih){function ii(ik){return e(ik)}ii.invert=function(ik){return f8(e.invert(ik))};ii.domain=function(ik){if(!arguments.length){return e.domain().map(f8)}e.domain(ik);return ii};function ij(im,io){var il=im[1]-im[0],ip=il/io,ik=hp.bisect(fk,ip);return ik==fk.length?[ig.year,q(im.map(function(iq){return iq/31536000000}),io)[2]]:!ik?[cA,q(im,io)[2]]:ig[ip/fk[ik-1]<fk[ik]/ip?ik-1:ik]}ii.nice=function(il,io){var ip=ii.domain(),im=ex(ip),iq=il==null?ij(im,10):typeof il==="number"&&ij(im,il);if(iq){il=iq[0],io=iq[1]}function ik(ir){return !isNaN(ir)&&!il.range(ir,f8(+ir+1),io).length}return ii.domain(gp(ip,io>1?{floor:function(ir){while(ik(ir=il.floor(ir))){ir=f8(ir-1)}return ir},ceil:function(ir){while(ik(ir=il.ceil(ir))){ir=f8(+ir+1)}return ir}}:il))};ii.ticks=function(ik,im){var il=ex(ii.domain()),io=ik==null?ij(il,10):typeof ik==="number"?ij(il,ik):!ik.range&&[{range:ik},im];if(io){ik=io[0],im=io[1]}return ik.range(il[0],f8(+il[1]+1),im<1?1:im)};ii.tickFormat=function(){return ih};ii.copy=function(){return bo(e.copy(),ig,ih)};return gh(ii,e)}function f8(e){return new Date(e)}function cY(e){return function(ig){var ih=e.length-1,ii=e[ih];while(!ii[1](ig)){ii=e[--ih]}return ii[0](ig)}}var fk=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000];var cE=[[fP.second,1],[fP.second,5],[fP.second,15],[fP.second,30],[fP.minute,1],[fP.minute,5],[fP.minute,15],[fP.minute,30],[fP.hour,1],[fP.hour,3],[fP.hour,6],[fP.hour,12],[fP.day,1],[fP.day,2],[fP.week,1],[fP.month,1],[fP.month,3],[fP.year,1]];var fF=[[id("%Y"),aj],[id("%B"),function(e){return e.getMonth()}],[id("%b %d"),function(e){return e.getDate()!=1}],[id("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[id("%I %p"),function(e){return e.getHours()}],[id("%I:%M"),function(e){return e.getMinutes()}],[id(":%S"),function(e){return e.getSeconds()}],[id(".%L"),function(e){return e.getMilliseconds()}]];var U=cY(fF);cE.year=fP.year;fP.scale=function(){return bo(hp.scale.linear(),cE,U)};var cA={range:function(ih,e,ig){return hp.range(+ih,+e,ig).map(f8)}};var hY=cE.map(function(e){return[e[0].utc,e[1]]});var cg=[[dj("%Y"),aj],[dj("%B"),function(e){return e.getUTCMonth()}],[dj("%b %d"),function(e){return e.getUTCDate()!=1}],[dj("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[dj("%I %p"),function(e){return e.getUTCHours()}],[dj("%I:%M"),function(e){return e.getUTCMinutes()}],[dj(":%S"),function(e){return e.getUTCSeconds()}],[dj(".%L"),function(e){return e.getUTCMilliseconds()}]];var fa=cY(cg);hY.year=fP.year.utc;fP.scale.utc=function(){return bo(hp.scale.linear(),hY,fa)};hp.text=Z(function(e){return e.responseText});hp.json=function(e,ig){return h1(e,"application/json",dP,ig)};function dP(e){return JSON.parse(e.responseText)}hp.html=function(e,ig){return h1(e,"text/html",ic,ig)};function ic(ig){var e=bM.createRange();e.selectNode(bM.body);return e.createContextualFragment(ig.responseText)}hp.xml=Z(function(e){return e.responseXML});return hp}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-amd.js' */
define("jira-agile/d3",d3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/figue.js' */
/*!
 * Figue v1.0.1
 *
 * Copyright 2010, Jean-Yves Delort
 * Licensed under the MIT license.
 *
 */
var figue=function(){function e(t,s){var v=t.length;var u=0;for(var r=0;r<v;r++){u+=Math.pow(t[r]-s[r],2)}u=Math.sqrt(u);return u}function i(t,s){var v=t.length;var u=0;for(var r=0;r<v;r++){u+=Math.abs(t[r]-s[r])}return u}function c(t,s){var v=t.length;var u=0;for(var r=0;r<v;r++){u=Math.max(u,Math.abs(t[r]-s[r]))}return u}function k(u,t){var v=u.length;var s=new Array(v);for(var r=0;r<v;r++){s[r]=u[r]+t[r]}return s}function h(u,t){var w=t.length;var r=new Array(w);for(var s=0;s<w;s++){r[s]=u*t[s]}return r}function g(u,t){var s="";for(var r=0;r<t;r++){s+=u}return s}function p(s,x,v,w){var r=new Array(x.length);var t=s+v;for(var u=0;u<x.length;u++){r[u]=(s*x[u]+v*w[u])/t}return r}function o(u,s){var t=s-u.length;if(t<0){return}var r=Math.floor(t/2);return g(" ",r)+u+g(" ",t-r)}function q(u,s,r){var t=s-u.length;if(t<0){return}return g(" ",r)+u+g(" ",s-(u.length+r))}function d(s){var u=new Array(s.length);var r=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION);for(var t=0;t<s.length;t++){u[t]=Math.round(s[t]*r)/r}return u.join(",")}function b(s){var r=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION);return String(Math.round(s*r)/r)}function f(D,E,w,t,v,L){var u=new Array;var N=d(D.centroid);if(D.isLeaf()){var I=String(D.label);var M=1;if(v){M=Math.max(N.length,M)}if(t){M=Math.max(I.length,M)}u.push(o("|",M));if(v){u.push(o(N,M))}if(t){u.push(o(I,M))}}else{var s=b(D.dist);var C=f(D.left,E,w,t,v,L);var x=f(D.right,E,w,t,v,L);var A=C[0].indexOf("|");var J=x[0].indexOf("|");var M=E+x[0].length+C[0].length;if(v){M=Math.max(N.length,M)}if(L){M=Math.max(s.length,M)}var B=A+Math.floor((C[0].length-(A)+E+(1+J))/2);u.push(q("|",M,B));if(v){u.push(q(N,M,B-Math.floor(N.length/2)))}if(L){u.push(q(s,M,B-Math.floor(s.length/2)))}var z=E+(C[0].length-A)+J+1;var F=g("_",z);u.push(q(F,M,A));if(w&&(C.length!=x.length)){var r;var P;if(C.length>x.length){P=C;r=x}else{P=x;r=C}header=r[0];var G=P.length-r.length;for(var K=0;K<G;K++){r.splice(0,0,header)}}for(var K=0;K<Math.max(C.length,x.length);K++){var y="";if(K<C.length){y=C[K]}else{y=g(" ",C[0].length)}var O="";if(K<x.length){O=x[K]}else{O=g(" ",x[0].length)}u.push(y+g(" ",E)+O);var H=y+g(" ",E)+O}}return u}function j(I,v,s,F){var w=v.length;var J=new Array(w);var K=new Array(w);var u=new figue.Matrix(w,w);var y=u.mtx;var t=new Array(w);var H;var C,B,x,L,G,E,z,D,r;if(s==figue.EUCLIDIAN_DISTANCE){s=e}else{if(s==figue.MANHATTAN_DISTANCE){s=i}else{if(s==figue.MAX_DISTANCE){s=c}}}for(G=0;G<w;G++){J[G]=0;for(E=0;E<w;E++){if(G==E){y[G][E]=Infinity}else{y[G][E]=s(v[G],v[E])}if(y[G][J[G]]>y[G][E]){J[G]=E}}}for(G=0;G<w;G++){t[G]=[];t[G][0]=new l(I[G],null,null,0,v[G]);K[G]=1}for(z=0;z<w-1;z++){C=0;for(G=0;G<w;G++){if(y[G][J[G]]<y[C][J[C]]){C=G}}B=J[C];x=t[C][0];L=t[B][0];r=p(x.size,x.centroid,L.size,L.centroid);H=new l(-1,x,L,y[C][B],r);t[C].splice(0,0,H);K[C]+=K[B];for(E=0;E<w;E++){if(F==figue.SINGLE_LINKAGE){if(y[C][E]>y[B][E]){y[E][C]=y[C][E]=y[B][E]}}else{if(F==figue.COMPLETE_LINKAGE){if(y[C][E]<y[B][E]){y[E][C]=y[C][E]=y[B][E]}}else{if(F==figue.AVERAGE_LINKAGE){var A=(K[C]*y[C][E]+K[B]*y[B][E])/(K[C]+K[E]);y[E][C]=y[C][E]=A}}}}y[C][C]=Infinity;for(G=0;G<w;G++){y[G][B]=y[B][G]=Infinity}for(E=0;E<w;E++){if(J[E]==B){J[E]=C}if(y[C][E]<y[C][J[C]]){J[C]=E}}D=H}return D}function n(y,E){var w=E.length;if(y>=w){return null}var t=new Array(y);var B=new Object;var G=0;while(G<y){var F=Math.floor(Math.random()*(w));if(F in B){continue}B[F]=1;t[G]=E[F];G++}var s=new Array(w);var H=new Array(y);var u=true;var D=0;while(u){for(var z=0;z<y;z++){H[z]=0}for(var A=0;A<w;A++){var v=E[A];var C=Number.MAX_VALUE;var x;for(var z=0;z<y;z++){dist=e(t[z],v);if(dist<C){C=dist;x=z}}H[x]++;s[A]=x}var r=new Array(y);for(var z=0;z<y;z++){r[z]=null}for(var A=0;A<w;A++){G=s[A];if(r[G]==null){r[G]=E[A]}else{r[G]=k(r[G],E[A])}}for(var z=0;z<y;z++){r[z]=h(1/H[z],r[z])}u=false;for(var z=0;z<y;z++){if(!m.call(r[z],t[z])){u=true;break}}t=r;D++;if(D>figue.KMEANS_MAX_ITERATIONS){u=false}}return{centroids:t,assignments:s}}function a(t,u){this.rows=t;this.cols=u;this.mtx=new Array(t);for(var s=0;s<t;s++){var v=new Array(u);for(var r=0;r<u;r++){v[r]=0}this.mtx[s]=v}}function l(r,u,s,v,t){this.label=r;this.left=u;this.right=s;this.dist=v;this.centroid=t;if(u==null&&s==null){this.size=1;this.depth=0}else{this.size=u.size+s.size;this.depth=1+Math.max(u.depth,s.depth)}}function m(s){if(this.length!=s.length){return false}for(var r=0;r<s.length;r++){if(this[r] instanceof Array){if(!m.call(this[r],s[r])){return false}}if(this[r]!==s[r]){return false}}return true}return{SINGLE_LINKAGE:0,COMPLETE_LINKAGE:1,AVERAGE_LINKAGE:2,EUCLIDIAN_DISTANCE:0,MANHATTAN_DISTANCE:1,MAX_DISTANCE:2,PRINT_VECTOR_VALUE_PRECISION:2,KMEANS_MAX_ITERATIONS:10,Matrix:a,Node:l,generateDendogram:f,agglomerate:j,kmeans:n}}();figue.Matrix.prototype.toString=function(){var a=[];for(var b=0;b<this.rows;b++){a.push(this.mtx[b].join("\t"))}return a.join("\n")};figue.Node.prototype.isLeaf=function(){if((this.left==null)&&(this.right==null)){return true}else{return false}};figue.Node.prototype.buildDendogram=function(d,c,e,a,f){var b=figue.generateDendogram(this,d,c,e,a,f);return b.join("\n")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/cluster.js' */
var clusterVectors=function(h,f,c,i,b){var e=_.map(h,function(k){return[i(k[0]),b(k[1])]});function g(l,k){if(!l){return}if(l.dist&&l.dist>c){g(l.left,k);g(l.right,k)}else{if(l.left||l.right){k.push({issues:a(l),point:[i.invert(l.centroid[0]),b.invert(l.centroid[1])],size:l.size,distance:l.dist,cluster:true})}else{k.push({issue:l.label,point:[i.invert(l.centroid[0]),b.invert(l.centroid[1])],size:l.size,distance:l.dist,cluster:false})}}}function a(k){if(!k){return[]}if(k.size===1&&k.label){return[k.label]}return a(k.left).concat(a(k.right))}if(h.length===0){return[]}if(h.length===1){return[{issue:f[0],point:h[0],size:1,distance:0,cluster:false}]}var d=figue.agglomerate(f,e,figue.MAX_DISTANCE,figue.COMPLETE_LINKAGE);var j=[];g(d,j);return j};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/core.js' */
var c3={};c3.defaults={x:function(a){return a[0]},y:function(a){return a[1]}};c3.checkIsNumber=function(a){if(typeof a!=="number"){throw new Error("Expected a number, but received: "+a)}return a};c3.isEmpty=function(a){return !a||!a.length};c3.prop=function(b){var c=b;var a=function(f){return f};var e=function(g,f){return g};function d(f){if(arguments.length===0){return a.call(this,c)}c=e.call(this,f,c);return this}d.get=function(f){a=f;return this};d.set=function(f){e=f;return this};return d};c3.inherit=function(d,a){var b;var c=c3.prop().get(function(f){if(f!=null){return f}for(var e=this.parent();e;e=e.parent()){if(typeof e[d]==="function"){f=e[d]();if(f!=null){return f}}}return b?b.call(this):a});c.onDefault=function(e){b=e;return this};return c};c3.event=function(c){var a=[];function e(g,f){a.push({handler:g,context:f})}function b(g){var f=this;g=g||{};_.each(a,function(h){h.handler.call(h.context||f,g)});if(c){c.call(this,g)}}function d(){if(typeof arguments[0]==="function"){e.apply(this,arguments)}else{b.apply(this,arguments)}return this}d.off=function(g,f){a=_.reject(a,function(h){var j=g==null||h.handler==g;var i=f==null||h.context==f;return j&&i});return this};return d};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/areaPlot.js' */
c3.areaPlot=function(){return c3.component("areaPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(a){return[a]}).extend({areaConstructor:c3.prop(d3.svg.area)}).update(function(b){var a=this.areaConstructor()().x(this.x());if(this.cartesian()){a.y0(this.height()).y1(this.y())}else{a.y0(this.y()).y1(0)}b.selection.attr("d",a(this.data()))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/axis.js' */
c3.axis=function(){return c3.component("axis").extend(c3.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:c3.inherit("axisConstructor",d3.svg.axis),orient:c3.prop("bottom"),horizontal:function(){var a=this.orient();return a==="bottom"||a==="top"},axis:function(){var a=this.horizontal();return this.axisConstructor().call(this).scale(a?this.xScale():this.yScale()).orient(this.orient())}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/borderLayout.js' */
c3.borderLayout=function(){var b=function(){return c3.prop().set(function(d){return d.parent(this)})};var c=c3.drawable().extend({data:function(){return a.occupiedRegions()}}).dataKey(function(e){return e.name}).update(function(e){var d=a.positions();e.selection.each(function(h){var g=d3.select(this);var f=d[h.name];g.attr("transform","translate("+f.left+","+f.top+")");h.component.width(f.width).height(f.height);h.component(g)})});var a=c3.component("borderLayout").extend(c3.plottable()).extend(function(){c(this.selection())}).extend({center:b(),north:b(),south:b(),west:b(),east:b(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var d=this;return _.compact(_.map(["north","south","west","east","center"],function(f){var e=d[f]();return e?{name:f,component:d[f]()}:null}))},positions:function(){var h={top:c3.checkIsNumber(this.north()?this.north().height():0),bottom:c3.checkIsNumber(this.south()?this.south().height():0),left:c3.checkIsNumber(this.west()?this.west().width():0),right:c3.checkIsNumber(this.east()?this.east().width():0)};var f=c3.checkIsNumber(this.width());var g=c3.checkIsNumber(this.height());var e={};var d=e.center={left:h.left,top:h.top,width:f-h.left-h.right,height:g-h.top-h.bottom};if(this.north()){e.north={top:h.top,left:h.left,height:h.top,width:d.width}}if(this.south()){e.south={top:g-h.bottom,left:h.left,height:h.bottom,width:d.width}}if(this.west()){e.west={top:h.top,left:h.left,height:d.height,width:h.left}}if(this.east()){e.east={top:h.top,left:f-h.right,height:d.height,width:h.right}}return e}});return a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/circlePlot.js' */
c3.circlePlot=function(){return c3.component("circlePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("circle").update(function(a){a.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:c3.prop(function(){return 4})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/clippable.js' */
c3.clippable=(function(){var a=0;return function(){return c3.component("clippable").extend({clipped:c3.prop(false)}).extend(function(){if(!this.clipped()){return}var c=this;var b=c3.singular().elementTag("clipPath").enter(function(e){var d="c3clip"+a;a++;c.selection().attr("clip-path","url(#"+d+")");e.selection.attr("id",d).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(d){d.selection.select("rect").attr("width",c.width()).attr("height",c.height())});b(this.selection())})}}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/component.js' */
c3.component=function(b){var a=[];function f(){var g=function(h){return g.applyTo(g,h)};return g}var d=f();function e(h,j,g){for(var i in j){if(g&&i in g){continue}h[i]=j[i]}return h}var c={displayName:b,selection:c3.prop(null),parent:c3.prop(null),applyTo:function(h,g){d.selection(g);_.each(a,function(i){if(i.applyTo){i.applyTo(h,g)}else{i.call(h,g)}});return d},extend:function(g){if(typeof g==="function"){if(g.parent){g.parent(d)}a.push(g)}return e(d,g,c)}};return _.extend(d,c)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/deviationPlot.js' */
c3.deviationPlot=function(){return c3.component("deviationPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(a){return[a]}).update(function(e){var d=this.yAccessor();var c=this.deviationAccessor();var b=this.yScale();var a=d3.svg.area().x(this.x()).y0(function(f){return b(d(f)+c(f))}).y1(function(f){return b(Math.max(d(f)-c(f),0))});e.selection.attr("d",a(this.data()))}).extend({deviationAccessor:c3.prop(function(a){return a[2]})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/drawable.js' */
c3.drawable=function(){return c3.component("drawable").extend(c3.withData()).extend(c3.withElements()).extend(function(){var a=this.dataBinding();this.enter({selection:this.drawEnter(a.enter())});this.exit({selection:this.drawExit(a.exit())});this.update({selection:a})}).extend({enter:c3.event(),exit:c3.event(),update:c3.event(),dataFilter:c3.prop(_.identity),dataBinding:function(){var a=this.dataFilter().call(this,this.data());return this.elements().data(a,this.dataKey())},drawEnter:function(c){var a=c.append(this.elementTag());var b=this.elementClass();if(b){a.classed(b,true)}return a},drawExit:function(a){return a.remove()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fitToParent.js' */
c3.fitToParent=function(){return c3.component("fitToParent").extend({width:c3.prop(),height:c3.prop()}).extend(function(){var a=this.selection().node().domNode.parentElement;this.height(c3.checkIsNumber(a.clientHeight));this.width(c3.checkIsNumber(a.clientWidth))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/gridLines.js' */
c3.gridLines=function(){return c3.component("gridLines").extend(c3.axis()).axisConstructor(function(){var a;switch(this.orient()){case"left":a=-this.width();break;case"right":a=this.width();break;case"top":a=-this.height();break;case"bottom":a=this.height();break}return d3.svg.axis().tickSize(a).tickFormat("")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/label.js' */
c3.label=function(){return c3.component("label").extend(c3.singular()).extend({text:c3.prop(""),orient:c3.prop("bottom")}).elementTag("text").elementClass("label").enter(function(a){a.selection.attr("text-anchor","middle")}).update(function(c){c.selection.text(this.text());var a=0,e=0,d=0;var b=c.selection.node().getBBox();switch(this.orient()){case"left":d=270;a=-1*this.width()+b.height;e=this.height()/2;break;case"right":d=90;a=this.width()-b.height;e=this.height()/2;break;case"top":d=0;a=this.width()/2;e=-1*this.height()+b.height;break;default:d=0;a=this.width()/2;e=this.height()-b.height/2}c.selection.attr("transform","translate("+a+", "+e+") rotate("+d+", 0, 0)")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/labelledAxis.js' */
c3.labelledAxis=function(){return c3.component("labelledAxis").extend(c3.axis()).extend(c3.label()).elementClass("axis-label")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/layerable.js' */
c3.layerable=function(){var a=c3.drawable().elementClass("layer").update(function(b){b.selection.each(function(e,c){e.component(d3.select(this).classed(e.name,true))})});return c3.component("layerable").extend(function(){a(this.selection())}).extend(c3.plottable()).extend({layers:function(){return a.data()},getLayer:function(b){var c=_.findWhere(this.layers(),{name:b});return c?c.component:undefined},addLayer:function(c,b){if(!this.getLayer(c)){this.layers().push({name:c,component:b.parent(this)})}return this},removeLayer:function(b){var d=this.layers();var c=_.reject(d,function(e){return e.name===b});if(c.length!==d.length){this.layers(c)}return this}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/linePlot.js' */
c3.linePlot=function(){return c3.component("linePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("line").dataFilter(function(a){return[a]}).extend({lineConstructor:c3.prop(d3.svg.line)}).update(function(b){var a=this.lineConstructor()().x(this.x()).y(this.y());b.selection.attr("d",a(this.data())).attr("stroke","black").attr("fill","none")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/plottable.js' */
c3.plottable=function(){return c3.component("plottable").extend(c3.withData()).extend(c3.withDimensions()).extend(c3.clippable()).extend({x:function(){var b=this.xScale();var a=this.xAccessor();return function(e,c){return b(a(e,c))}},y:function(){var b=this.yScale();var a=this.yAccessor();return function(e,c){return b(a(e,c))}},xAccessor:c3.inherit("xAccessor",c3.defaults.x),yAccessor:c3.inherit("yAccessor",c3.defaults.y),xScaleConstructor:c3.inherit("xScaleConstructor",d3.scale.linear),yScaleConstructor:c3.inherit("yScaleConstructor",d3.scale.linear),xDomain:c3.inherit("xDomain").onDefault(function(){if(c3.isEmpty(this.data())){return[0,1]}var b=c3.checkIsNumber(d3.min(this.data(),this.xAccessor()));var a=c3.checkIsNumber(d3.max(this.data(),this.xAccessor()));return[b,a]}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data())){return[0,1]}var b=c3.checkIsNumber(d3.min(this.data(),this.yAccessor()));var a=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[b,a]}),xRange:c3.inherit("xRange").onDefault(function(){var a=c3.checkIsNumber(this.width());return[0,a]}),yRange:c3.inherit("yRange").onDefault(function(){var a=c3.checkIsNumber(this.height());return this.cartesian()?[a,0]:[0,a]}),xScale:function(){return this.xScaleConstructor().call(this).domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor().call(this).domain(this.yDomain()).range(this.yRange())},cartesian:c3.prop(true)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/singular.js' */
c3.singular=function(){return c3.component("singular").extend(c3.withElements()).extend({enter:c3.event(),update:c3.event(),exit:c3.event(),showCondition:c3.prop(function(){return true})}).extend(function(){var a=this.elements();if(this.showCondition().call(this)){if(!a.node()){a=this.selection().append(this.elementTag());if(this.elementClass()){a.classed(this.elementClass(),true)}this.enter({selection:a})}this.update({selection:a})}else{if(a.node()){this.exit({selection:a.remove()})}}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/utils.js' */
c3.utils={wrapText:function(c,b,a){c.each(function(){var j=d3.select(this);var i=j.text().split(/\s+/).reverse();var f=[i.pop()];var e=[f];var h;while(h=i.pop()){f.push(h);j.text(f.join(" "));if(j.node().getComputedTextLength()>b){f.pop();f=[h];e.push(f)}}j.text(null);var g=1.1;var k=j.attr("y")||0;var d=parseFloat(j.attr("dy"))||0;e.forEach(function(m,l){if(a){l-=e.length-1}j.append("tspan").attr({x:b/2,y:k,dy:l*g+d+"em"}).text(m.join(" "))})})},containText:function(c,b,a){c.each(function(){var j=this.__data__;var i=d3.select(this);var f={width:0,height:0};var h=4;try{f=i.node().getBBox()}catch(g){}if(f.height+h>a(j)){i.text("")}else{if(f.width+h>b(j)){i.text("")}}})},defaultViewBox:function(a){var b=a.node().parentNode.getBoundingClientRect();a.attr("viewBox","0 0 "+b.width+" "+b.height)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withData.js' */
c3.withData=function(){return c3.component("withData").extend({data:c3.inherit("data",[]),dataKey:c3.inherit("dataKey")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fillWithRect.js' */
c3.fillWithRect=function(){return c3.singular().elementTag("rect").elementClass("fill-rect").enter(function(a){a.selection.attr("x",0).attr("y",0).attr("fill","none").attr("width","100%").attr("height","100%").style("pointer-events","all")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withDimensions.js' */
c3.withDimensions=function(){return c3.component("withDimensions").extend({width:c3.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:c3.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withElements.js' */
c3.withElements=function(){return c3.component("withElements").extend({elementTag:c3.prop("g"),elementClass:c3.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var a=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===a})}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/interactive.js' */
c3.interactive=function(){var f=c3.component();var c,d=false;var a=_.throttle(function(){c=AJS.$(f.region().selection().node()).offset()},200);function g(k){var l=i(k);var j=l[0];var m=l[1];f.mouseCoordinates([j,m]);return(j>0&&m>0)&&(j<=f.width()&&m<=f.height())}function i(k){a();var j=(k.pageX-c.left);var l=(k.pageY-c.top);return[j,l]}function b(){AJS.$(f.selection().node()).on("dragstart",function(j){j.preventDefault()})}function h(){f.domContext().on("mousemove",function(k){var j=g(k);if(!j&&d){d=false;f.mouseout(k)}else{if(j&&!d){d=true;f.mouseover(k)}}}).on("mouseout",function(j){if(d){d=false;f.mouseout(j)}});b()}function e(j){return function(l,k){f.domContext().on(j+".c3."+l,function(m){if(g(m)){d3.event=m;k.call(this,m)}});return this}}return f.extend(c3.withDimensions()).extend(_.once(h)).extend({mouseCoordinates:c3.prop(),domContext:c3.prop(),region:c3.prop(),mousedown:e("mousedown"),mouseup:e("mouseup"),mousemove:e("mousemove"),mouseover:c3.event(),mouseout:c3.event()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/scrubber.js' */
c3.scrubber=function(){var a=c3.singular();function e(){var f=a.parent().mouseCoordinates();a.elements().attr("x1",f[0]).attr("x2",f[0]);if(!a.shouldHideScrubber()()){a.elements().style("visibility","")}}function c(){a.elements().style("visibility","hidden")}function d(f){f.style("pointer-events","none")}function b(f){d(f.selection);this.interactiveLayer().mousemove("scrubber",function(){e()}).mouseout(function(){c()})}return a.elementTag("line").enter(b).extend(c3.withDimensions()).extend({interactiveLayer:c3.prop(),shouldHideScrubber:c3.prop(function(){}),hideScrubber:c}).update(function(f){f.selection.attr("y1",0).attr("y2",this.height())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/barChart.js' */
c3.barChart=function(){return c3.component("barChart").extend(c3.drawable()).extend(c3.plottable()).elementTag("rect").xAccessor(function(b,a){return a}).yAccessor(function(a){return a}).extend({baselineAccessor:c3.prop(function(){return 0}),barWidth:function(){return this.xScale().rangeBand()},barHeight:function(){var a=this.baselineAccessor();var c=this.yAccessor();var b=this.yScale();return function(e){return b(a(e))-b(c(e))}},maxBarWidth:c3.prop(0),padding:c3.prop(0.25).set(function(a){if(a>=0&&a<=1){return a}else{throw new Error("Expected padding to be between 0 and 1 inclusive, but received "+a)}}),outerPadding:c3.prop(0.25).set(function(a){if(a>=0&&a<=1){return a}else{throw new Error("Expected outerPadding to be between 0 and 1 inclusive, but received "+a)}}),showLabels:c3.prop(false),rotateLabels:c3.prop(false),labelAccessor:function(){return this.xAccessor()},xRange:function(){var a=this.width();var b=a;if(this.maxBarWidth()>0){b=Math.floor(this.maxBarWidth()/(1-this.padding())*(this.xDomain().length-this.padding()+2*this.outerPadding()))}return[0,Math.min(b,a)]},xScale:function(){return d3.scale.ordinal().domain(this.xDomain()).rangeRoundBands(this.xRange(),this.padding(),this.outerPadding())},xDomain:c3.inherit("xDomain").onDefault(function(){if(c3.isEmpty(this.data())){return[0,1]}return d3.range(this.data().length)}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data())){return[0,1]}var b=c3.checkIsNumber(d3.min(this.data(),this.baselineAccessor()));var a=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[b,a]})}).enter(function(a){if(this.elementTag()==="g"&&this.showLabels()){a.selection.append("text").classed("bar-label",true)}}).update(function(d){var a=this.x();var f=this.y();var c=this.barWidth();var e=this.barHeight();var b=d.selection.select("text.bar-label");d.selection.attr("transform",function(h,g){return"translate("+a(h,g)+","+f(h,g)+")"}).attr("height",e).attr("width",c);if(this.showLabels()){b.attr("x",c/2).attr("y",e).text(this.labelAccessor());if(this.rotateLabels()){b.attr("transform",function(h,g){return"rotate(90 "+c/2+","+e(h)+")"}).attr("text-anchor","start").attr("dx",".5em").attr("dy",".25em")}else{b.attr("transform",null).attr("text-anchor","middle").attr("dx",null).attr("dy","1.25em").call(c3.utils.wrapText,c)}}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/floatingBarChart.js' */
c3.floatingBarChart=function(){return c3.component("floatingBarChart").extend(c3.barChart()).yAccessor(function(a){return a[0]+a[1]}).baselineAccessor(function(a){return a[0]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/stack.js' */
c3.stack=function(){return c3.component("stack").extend(c3.floatingBarChart()).elementTag("g").xAccessor(function(){return 0}).extend({classPrefix:c3.prop(),labelAccessor:function(){return this.yAccessor()},labelFormatter:function(){return d3.format(",d")}}).enter(function(b){var a=this.classPrefix();b.selection.insert("rect",":first-child").attr("class",function(e,c){return a+"-series-"+c})}).update(function(c){var a=this.classPrefix();var d=this.barHeight();var b=this.barWidth();c.selection.select("rect").attr("height",d).attr("width",b);if(this.showLabels()){c.selection.select("text").attr("dy","0.45em").attr("y",function(e){return d(e)/2}).attr("class",function(f,e){return a+"-series-label-"+e}).classed("bar-label",true).text(this.labelAccessor()).call(c3.utils.containText,function(){return b},d)}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/brush.js' */
c3.brush=function(){var b=0;var f=false;var a=c3.singular();function d(i){b=i;f=true;c();a.elements().attr("x",i).attr("y",0).attr("width","1");a.onDrag(i)}function g(j){if(f){var l=a.elements();var k=parseInt(j-b,10);if(k<0){l.attr("x",j)}else{l.attr("x",b)}l.attr("width",Math.abs(k));var i=_.sortBy([b,j],_.identity);a.onUpdate(i);a.currentRange(i)}}function h(i){if(f){f=false;e();a.onEndDrag(_.sortBy([b,i],_.identity))}}function c(){a.elements().style("display","")}function e(){a.elements().style("display","none")}return a.elementTag("rect").extend(c3.withDimensions()).enter(function(i){e();i.selection.attr("height",this.height()).style("pointer-events","none");var j=this.interactiveLayer();j.mousedown("brush",function(){d(j.mouseCoordinates()[0])}).mousemove("brush",function(){g(j.mouseCoordinates()[0])}).mouseup("brush",function(){h(j.mouseCoordinates()[0])})}).extend({interactiveLayer:c3.prop(),onDrag:c3.event(),onUpdate:c3.event(),onEndDrag:c3.event(),currentRange:c3.prop(),cancelDrag:function(){f=false;e()},isDragging:function(){return f}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidBoard.soy' */
// This file was automatically generated from RapidBoard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.board.x.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.board == 'undefined') { GH.tpl.board = {}; }
if (typeof GH.tpl.board.x == 'undefined') { GH.tpl.board.x = {}; }


GH.tpl.board.x.renderNoViewsAnonymous = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("No boards are currently available.") + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format("Boards may be visible if you {0}log in{1}.",'<a href="' + opt_data.loginUrl + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViewsAnonymous.soyTemplateName = 'GH.tpl.board.x.renderNoViewsAnonymous';
}


GH.tpl.board.x.renderNoViews = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("No boards are currently available.") + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format("{0}Create a new board{1}.",'<a class="js-view-action-create">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViews.soyTemplateName = 'GH.tpl.board.x.renderNoViews';
}


GH.tpl.board.x.renderRapidBoard = function(opt_data, opt_ignored) {
  return '<div id="ghx-header"><div id="ghx-modes-tools"><div id="ghx-view-modes"></div><span id="ghx-view-pluggable" /><div id="ghx-view-tools"></div><div id="ghx-view-presentation"></div></div><div id="ghx-view-selector"></div></div><div id="ghx-content-main" class="ghx-content-main"><div id="ghx-errors"></div><div id="ghx-notify"></div><div id="ghx-rabid"><div id="ghx-operations"></div><div id="ghx-plan"></div><div id="ghx-report" class="ghx-chart"></div><div id="ghx-work" class="ghx-work"></div></div></div><div class="ghx-throbber"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderRapidBoard.soyTemplateName = 'GH.tpl.board.x.renderRapidBoard';
}


GH.tpl.board.x.renderToolSections = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList19 = opt_data.sections;
  var sectionListLen19 = sectionList19.length;
  for (var sectionIndex19 = 0; sectionIndex19 < sectionListLen19; sectionIndex19++) {
    var sectionData19 = sectionList19[sectionIndex19];
    output += '<div class="ghx-view-section ' + soy.$$escapeHtml(sectionData19.cssClass) + '"><button id="' + soy.$$escapeHtml(sectionData19.id) + '-button" class="aui-button ghx-actions-tools ghx-dropdown-trigger">' + soy.$$escapeHtml(sectionData19.label) + '</button><div class="aui-list" id="' + soy.$$escapeHtml(sectionData19.id) + '-content" style="display: none;"></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderToolSections.soyTemplateName = 'GH.tpl.board.x.renderToolSections';
}


GH.tpl.board.x.renderSectionContent = function(opt_data, opt_ignored) {
  var output = '';
  var subItemList31 = opt_data.subItems;
  var subItemListLen31 = subItemList31.length;
  for (var subItemIndex31 = 0; subItemIndex31 < subItemListLen31; subItemIndex31++) {
    var subItemData31 = subItemList31[subItemIndex31];
    output += GH.tpl.board.x.renderSubItem({subItem: subItemData31, isFirst: subItemIndex31 == 0, isLast: subItemIndex31 == subItemListLen31 - 1});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSectionContent.soyTemplateName = 'GH.tpl.board.x.renderSectionContent';
}


GH.tpl.board.x.renderSubItem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.subItem.type == 'section') {
    output += '<ul id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" class="aui-list-section ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + ' ' + ((opt_data.isFirst) ? ' aui-first' : '') + ((opt_data.isLast) ? ' aui-last' : '') + '">';
    var subItemList52 = opt_data.subItem.subItems;
    var subItemListLen52 = subItemList52.length;
    for (var subItemIndex52 = 0; subItemIndex52 < subItemListLen52; subItemIndex52++) {
      var subItemData52 = subItemList52[subItemIndex52];
      output += '<li class="aui-list-item">' + GH.tpl.board.x.renderSubItem({subItem: subItemData52, isFirst: subItemIndex52 == 0, isLast: subItemIndex52 == subItemListLen52 - 1}) + '</li>';
    }
    output += '</ul>';
  } else if (opt_data.subItem.type == 'webItem') {
    output += '<a role="button" href="' + soy.$$escapeHtml(opt_data.subItem.url) + '" ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="aui-list-item-link ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$escapeHtml(opt_data.subItem.label) + '</a>';
  } else if (opt_data.subItem.type == 'webPanel') {
    output += '<div ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$filterNoAutoescape(opt_data.subItem.html) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSubItem.soyTemplateName = 'GH.tpl.board.x.renderSubItem';
}


GH.tpl.board.x.renderWelcomeProjectMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageScrum';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a sample Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a sample Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum';
}


GH.tpl.board.x.renderWelcomeViewMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageKanban';
}


GH.tpl.board.x.renderWelcomeViewMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageScrum';
}


GH.tpl.board.x.renderCreateViewMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("View \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderCreateViewMessage.soyTemplateName = 'GH.tpl.board.x.renderCreateViewMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardUrlState.js' */
GH.RapidBoardUrlState={};GH.RapidBoardUrlState.self="RapidBoardUrlState";GH.RapidBoardUrlState.isApplicable=function(a){return true};GH.RapidBoardUrlState.getNormalizedFromUrl=function(b,e){e.rapidView=GH.RapidBoard.UrlState.normalizeNumberParam(b.rapidView);delete e.projectKey;var a=GH.RapidBoard.UrlState.normalizeStringParam(b.projectKey,null);if(a!==null){e.projectKey=a}var d=GH.RapidBoard.UrlState.normalizeStringParam(b.view,"");var c=GH.RapidBoard.UrlState.normalizeBooleanParam(b.useStoredSettings,false);if(c&&d===""){return}switch(d){case"reporting":e.mode="report";break;case"planning":e.mode="plan";e.detailOpened=true;break;case"planning.nodetail":e.mode="plan";e.detailOpened=false;break;case"detail":e.mode="work";e.detailOpened=true;break;case"":default:e.mode="work";e.detailOpened=false}};GH.RapidBoardUrlState.toUrl=function(b,a){if(!_.isUndefined(b.rapidView)){a.rapidView=b.rapidView}delete a.projectKey;if(!_.isUndefined(b.projectKey)){a.projectKey=b.projectKey}switch(b.mode){case"work":if(b.detailOpened){a.view="detail"}break;case"report":a.view="reporting";break;case"plan":if(!b.detailOpened){a.view="planning.nodetail"}else{a.view="planning"}break}};GH.RapidBoardUrlState.getNormalizedFromInternal=function(b){b.rapidView=GH.RapidBoard.State.getRapidViewId();b.mode=GH.RapidBoard.State.getMode();delete b.projectKey;var a=GH.RapidBoard.State.getProjectKey();if(!_.isUndefined(a)){b.projectKey=a}if(b.mode=="work"){b.detailOpened=GH.RapidBoard.State.isDetailsViewOpened()}else{if(b.mode=="plan"){b.detailOpened=GH.RapidBoard.State.isDetailsViewPlanOpened()}}};GH.RapidBoardUrlState.updateInternalFromNormalized=function(c){if(!_.isUndefined(c.rapidView)){GH.RapidBoard.State.setRapidViewId(c.rapidView)}var b=c.mode;var a=c.detailOpened;if(!_.isUndefined(b)){GH.RapidBoard.State.setMode(c.mode)}GH.RapidBoard.State.setProjectKey(c.projectKey);if(!_.isUndefined(a)){if(b==="plan"){GH.PlanController.setDetailViewOpenedState(c.detailOpened)}else{GH.WorkController.setDetailViewOpenedState(c.detailOpened)}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsModel.js' */
GH.VersionsModel=function(a){this.projects=a;this.fixVersions=undefined;this.canCreateVersion=false;this.linkToDevStatusVersionAvailable=false};GH.VersionsModel.prototype.setProjects=function(a){this.projects=a};GH.VersionsModel.prototype.updateRawData=function(a){this.canCreateVersion=a.canCreateVersion;this.linkToDevStatusVersionAvailable=a.isLinkToDevStatusVersionAvailable;this.fixVersions=GH.VersionsModel.buildFixVersions(a,this.projects)};GH.VersionsModel.prototype.isValid=function(){return !!this.fixVersions};GH.VersionsModel.prototype.getVersions=function(){return this.fixVersions};GH.VersionsModel.prototype.getProjects=function(){return this.projects};GH.VersionsModel.prototype.canUserCreateVersion=function(){return this.canCreateVersion};GH.VersionsModel.prototype.isLinkToDevStatusVersionAvailable=function(){return this.linkToDevStatusVersionAvailable};GH.VersionsModel.prototype.getVersionsForIds=function(a){var b=_.chain(a).filter(function(c){return _.has(this.fixVersions,c)},this).map(function(c){return this.fixVersions[c]},this).value();return this.getFixVersionFromArray(b)};GH.VersionsModel.prototype.getVersion=function(a){return _.has(this.fixVersions,a)?this.fixVersions[a]:null};GH.VersionsModel.prototype.getFixVersionFromArray=function(a){var c=_.sortBy(a,function(d){return d.sequence});var b={};b.versions=c;b.formattedVersions=_.map(c,this.getToolTip).join(", ");return b};GH.VersionsModel.prototype.getToolTip=function(a){if(a.released){return a.name+" (released)"}return a.name};GH.VersionsModel.prototype.sort=function(b,a){if(b.project){if(b.project.key===a.project.key){return b.sequence-a.sequence}else{if(b.project.key<a.project.key){return -1}else{return 1}}}else{return b.sequence-a.sequence}};GH.VersionsModel.prototype.getUnreleasedVersionList=function(){return _.chain(_.toArray(this.fixVersions)).where({released:false}).value().sort(this.sort)};GH.VersionsModel.prototype.getAllVersions=function(){return _.chain(_.toArray(this.fixVersions)).value().sort(this.sort)};GH.VersionsModel.prototype.containsId=function(a){return _.has(this.fixVersions,a)};GH.VersionsModel.prototype.isEmpty=function(){return _.isEmpty(this.fixVersions)};GH.VersionsModel.prototype.hasMultiProjects=function(){return this.projects.length>1};GH.VersionsModel.prototype.updateVersion=function(a){if(_.isUndefined(this.fixVersions[a.id])){return false}this.fixVersions[a.id]=a;return true};GH.VersionsModel.buildFixVersions=function(c,b){var a={};_.each(c.versionsPerProject,function(d,e){e=parseInt(e,10);_.each(d,function(f){a[f.id]=_.clone(f);a[f.id].project=_.findWhere(b,{id:e})})});return a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsDataService.js' */
(function(c,a,b){function d(){}d.prototype={getVersionsModel:function(e){return c.get({url:"/xboard/plan/backlog/versions.json",data:{rapidViewId:e}},"versionsList").andThen(function(g){var f=new a(g.projects);f.updateRawData(g.versionData);return f})},getSimpleVersions:function(e){return this.getVersionsModel(e).andThen(function(f){return b.map(f.getAllVersions(),function(g){return{id:g.id,name:(g.project)?g.project.key+": "+g.name:g.name}})})},versionExists:function(e,f){return b.some(e,function(g){return g.id===f})}};GH.VersionsDataService=d;GH.versionsDataService=new d()}(GH.Ajax,GH.VersionsModel,_));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/SprintsDataService.js' */
(function(c,b){function a(){}a.prototype={getSimpleSprints:function(d){return c.get({url:"/sprintquery/"+d,data:{includeHistoricSprints:true,includeFutureSprints:false}},"getSimpleSprints").andThen(function(e){return e.sprints})}};GH.SprintsDataService=a;GH.sprintsDataService=new a()}(GH.Ajax,_));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/EpicsDataService.js' */
(function(c,b){var d=null;function a(){}a.prototype={getEpics:function(e){return c.get({url:"/xboard/plan/backlog/epics.json",data:{rapidViewId:e}},"epicsList").andThen(function(f){d=f.supportsPages;return f.epics})},getSimpleEpics:function(e){return this.getEpics(e).andThen(function(f){return b.map(f,function(g){return{id:g.key,name:g.epicLabel?g.key+": "+g.epicLabel:"unlabelled"+"-"+g.key,linkedPagesCount:g.linkedPagesCount}})})},epicExists:function(f,e){return b.some(f,function(g){return g.id===e})},supportsPages:function(){if(d===null){throw"epic data has not been loaded yet"}else{return d}}};GH.EpicsDataService=a;GH.epicsDataService=new a()}(GH.Ajax,_));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/DeleteRapidViewDialog.js' */
GH.RapidBoard.DeleteDialog={};GH.RapidBoard.DeleteDialog.showDeleteDialog=function(b,a){var c=GH.Dialog.create({width:500,height:350,id:"ghx-rapidview-delete"});AJS.$("#"+c.id).addClass("ghx-dialog");c.addHeader("Delete Board");c.addPanel("","panel");c.getCurrentPanel().html(AJS.format("Are you sure you want to delete board \u003cstrong\u003e{0}\u003c/strong\u003e?",AJS.escapeHTML(String(a))));c.addButton("Delete",function(){c.disableControls();c.dispose();GH.RapidBoard.DeleteDialog.doDelete(b,a)},"aui-button");GH.Dialog.addCancelButton(c);c.show();AJS.$("#"+c.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};GH.RapidBoard.DeleteDialog.doDelete=function(b,a){GH.Ajax.del({url:"/rapidview/"+b}).done(function(c){GH.RapidBoard.DeleteDialog.handleSuccess(b,a)})};GH.RapidBoard.DeleteDialog.handleSuccess=function(b,a){AJS.$(GH).trigger("ghx.rapidview.deleted",{rapidViewId:b,rapidViewName:a,message:AJS.format("Successfully deleted board \u003cstrong\u003e{0}\u003c/strong\u003e",AJS.escapeHTML(String(a)))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/OnboardingPlaceholders.js' */
GH.planOnboarding={renderOnboarding:function(){},refresh:function(){},hide:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickEdit.js' */
GH.RapidBoard.QuickEdit={};GH.RapidBoard.QuickEdit.fieldChanges={};GH.RapidBoard.QuickEdit.init=function(){AJS.$(AJS).unbind("QuickEdit.sessionComplete");AJS.$(AJS).bind("QuickEdit.sessionComplete",function(){if(JIRA&&JIRA.IssueNavigator&&JIRA.IssueNavigator.setIssueUpdatedMsg){JIRA.IssueNavigator.setIssueUpdatedMsg()}GH.Notification.showIssueMessage();AJS.$(GH).trigger("issueUpdated",{issueId:GH.IssueOperationShortcuts.getSelectedIssueId(),source:"quickEdit",fieldChanges:GH.RapidBoard.QuickEdit.fieldChanges});GH.RapidBoard.QuickEdit.fieldChanges={};GH.IssueOperationShortcuts.clearOverrideSelectedIssue()});JIRA.bind("Dialog.hide",function(c,a,b){if(a.attr("id")==="edit-issue-dialog"&&(b===JIRA.Dialog.HIDE_REASON.cancel||b===JIRA.Dialog.HIDE_REASON.escape)){GH.IssueOperationShortcuts.clearOverrideSelectedIssue();GH.RapidBoard.QuickEdit.fieldChanges={}}});AJS.$(GH).bind("QuickEdit.fieldChange",function(a,b){GH.RapidBoard.QuickEdit.fieldChanges[b.fieldId]=b.fieldChangeData});if(JIRA&&JIRA.Dialog&&JIRA.Dialog.shouldShowIssueKeyInTitle){JIRA.Dialog.shouldShowIssueKeyInTitle=function(){return true}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.js' */
GH.RapidBoard.QuickCreate={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.QuickCreate.analytics=new a("gh.quickcreate")})();GH.RapidBoard.QuickCreate.init=function(){function a(b){return function(f,c){AJS.$(GH).trigger("issueCreated",{issues:c,isSubtask:b});var d=_.pluck(c,"issueKey");GH.RapidBoard.QuickCreate.analytics.trigger("create",d)}}JIRA.unbind("QuickCreateIssue.sessionComplete");JIRA.bind("QuickCreateIssue.sessionComplete",a(false));JIRA.unbind("QuickCreateSubtask.sessionComplete");JIRA.bind("QuickCreateSubtask.sessionComplete",a(true));JIRA.unbind("QuickCreateEpic.sessionComplete");JIRA.bind("QuickCreateEpic.sessionComplete",a(false))};GH.RapidBoard.QuickCreate.showCreatedIssuesMessage=function(f,b){var e=GH.EpicConfig.getEpicIssueTypeId();var d=GH.SprintConfig.getSprintFieldId();var g={issues:f.issues,isSubtask:!!f.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable()};if(b){var a=_.filter(f.issues,function(h){return h.createdIssueDetails&&h.createdIssueDetails.fields.issuetype.id!=e});var c=!(_.find(f.issues,function(h){if(h.createdIssueDetails&&h.createdIssueDetails.fields[d]){return h.createdIssueDetails.fields[d].length>0}else{return false}}));g=_.extend(g,{isWorkMode:true,issuesExcludingEpics:a,shouldShowAddToSprints:c},b)}GH.Notification.showSuccess(GH.tpl.quickcreate.renderFilteredIssuesSuccess(g),{timeout:10000})};GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage=function(a){GH.Notification.showSuccess(GH.tpl.quickcreate.renderSubtasksAddedMessage({issues:a.issues}),{timeout:10000})};GH.RapidBoard.QuickCreate.showCreatedEpicsMessage=function(b,a){GH.Notification.showSuccess(GH.tpl.quickcreate.renderEpicsAddedMessage({isVisible:a,epics:b.issues}),{timeout:10000})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.soy' */
// This file was automatically generated from QuickCreate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickcreate.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickcreate == 'undefined') { GH.tpl.quickcreate = {}; }


GH.tpl.quickcreate.renderFilteredIssuesSuccess = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy3 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  var sprintHtml__soy6 = '' + ((opt_data.issuesMatch && opt_data.canManageSprints && opt_data.issuesExcludingEpics.length > 0 && opt_data.isRankable) ? GH.tpl.quickcreate.sprintHtml({sprints: opt_data.sprints, issues: opt_data.issuesExcludingEpics}) : '');
  output += (opt_data.isSubtask) ? soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3)) : (opt_data.isWorkMode) ? soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3)) + ((opt_data.shouldShowAddToSprints) ? ' ' + soy.$$filterNoAutoescape(sprintHtml__soy6) : '') : soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderFilteredIssuesSuccess.soyTemplateName = 'GH.tpl.quickcreate.renderFilteredIssuesSuccess';
}


GH.tpl.quickcreate.issueLinksHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueList28 = opt_data.issues;
  var issueListLen28 = issueList28.length;
  for (var issueIndex28 = 0; issueIndex28 < issueListLen28; issueIndex28++) {
    var issueData28 = issueList28[issueIndex28];
    output += '<a class="js-issue-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData28.issueKey) + '">' + soy.$$escapeHtml(issueData28.issueKey) + '</a>' + ((! (issueIndex28 == issueListLen28 - 1)) ? ', ' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueLinksHtml.soyTemplateName = 'GH.tpl.quickcreate.issueLinksHtml';
}


GH.tpl.quickcreate.issueKeysAttribute = function(opt_data, opt_ignored) {
  var output = '';
  var issueList41 = opt_data.issues;
  var issueListLen41 = issueList41.length;
  for (var issueIndex41 = 0; issueIndex41 < issueListLen41; issueIndex41++) {
    var issueData41 = issueList41[issueIndex41];
    output += soy.$$escapeHtml(issueData41.issueKey) + ((! (issueIndex41 == issueListLen41 - 1)) ? ',' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueKeysAttribute.soyTemplateName = 'GH.tpl.quickcreate.issueKeysAttribute';
}


GH.tpl.quickcreate.sprintHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeys__soy48 = '' + GH.tpl.quickcreate.issueKeysAttribute(opt_data);
  if (issueKeys__soy48.length > 0) {
    var sprintList53 = opt_data.sprints;
    var sprintListLen53 = sprintList53.length;
    for (var sprintIndex53 = 0; sprintIndex53 < sprintListLen53; sprintIndex53++) {
      var sprintData53 = sprintList53[sprintIndex53];
      output += '<a class="js-add-new-issue-to-sprint" data-issue-keys="' + soy.$$escapeHtml(issueKeys__soy48) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData53.id) + '">' + soy.$$escapeHtml(AJS.format("Add {0,choice,1# |1\x3call} to {1}",opt_data.issues.length,sprintData53.name)) + '</a> ' + ((! (sprintIndex53 == sprintListLen53 - 1)) ? '| ' : '');
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.sprintHtml.soyTemplateName = 'GH.tpl.quickcreate.sprintHtml';
}


GH.tpl.quickcreate.renderSubtasksAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy66 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy66));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderSubtasksAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderSubtasksAddedMessage';
}


GH.tpl.quickcreate.renderEpicsAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy72 = '' + GH.tpl.quickcreate.issueLinksHtml({issues: opt_data.epics});
  output += (opt_data.isVisible) ? soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created.",opt_data.epics.length,issueLinksHtml__soy72)) : soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.epics.length,issueLinksHtml__soy72));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderEpicsAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderEpicsAddedMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneStalker.js' */
GH.SwimlaneStalker={};GH.SwimlaneStalker.init=function(){};GH.SwimlaneStalker.headerHeight=0;GH.SwimlaneStalker.poolStalker=function(){var c=AJS.$("#ghx-column-header-group");if(c.length>0){var a=AJS.$("#ghx-pool");var d=a.offset();var f=a.find(".ghx-columns").width();var e=parseInt(a.css("padding-left"),10);var b=c.outerHeight();c.addClass("ghx-fixed").css({position:"fixed",top:d.top,left:d.left+e,width:f});a.css({"padding-top":b});GH.SwimlaneStalker.headerHeight=b;GH.SwimlaneStalker.registerSwimlaneStalker()}};GH.SwimlaneStalker.registerSwimlaneStalker=function(){AJS.$("#ghx-pool").unbind("scroll.swimlaneStalker").bind("scroll.swimlaneStalker",GH.SwimlaneStalker.updateSwimlaneHeaderStalker)};GH.SwimlaneStalker.updateSwimlaneHeaderStalker=function(){var e=AJS.$("#js-swimlane-header-stalker");var b=AJS.$("#ghx-pool").scrollTop();if(!b){e.hide();return}e.show();var c=AJS.$(".ghx-swimlane-header");if(!c.length){return}var a=undefined;_.each(c,function(f){f=AJS.$(f);if(f.position().top<=GH.SwimlaneStalker.headerHeight){a=f}else{return false}});if(!a){return}var d=a.clone();d.find(".js-expander").remove();e.empty().append(d)};GH.SwimlaneStalker.updateStalkerContent=function(c){var g=AJS.$("#ghx-swimname");var b=GH.GridDataController.getModel();var e=b.getSwimlaneById(c);var f=b.getSwimlaneIssueCount(c);var a=e.parentKey?GH.GridDataController.getModel().getIssueDataByKey(e.parentKey):false;if(a){if(a.done){g.addClass("ghx-done")}else{g.removeClass("ghx-done")}g.find(".ghx-summary").text(a.summary);g.find(".ghx-type").html('<img height="16" width="16" src="'+a.typeUrl+'">').attr("title",a.typeName)}else{g.removeClass("ghx-done");g.find(".ghx-summary").empty();g.find(".ghx-type").empty()}g.find(".ghx-name").text(e.name);g.find(".ghx-qty").text(GH.SwimlaneView.getIssueCountLabel(e,f));var d=GH.SwimlaneView.getSwimlaneTitle(e,f);g.find(".ghx-name, .ghx-qty, .ghx-summary").attr("title",d)};GH.SwimlaneStalker.refreshStalkerContent=function(){var b=AJS.$("#ghx-swimname");if(!b.visible()){return}var a=parseInt(b.attr("data-swimlane-id",a),10);GH.SwimlaneStalker.updateStalkerContent(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.js' */
define("jira-agile/rapid/ui/work/ActiveSprintEmptyView",["jquery"],function(d){var j=AJS.contextPath();var f=j+"/secure/RapidBoard.jspa?rapidView={0}&view=planning.nodetail";var e=j+"/secure/RapidBoard.jspa?rapidView={0}";var i=j+"/secure/RapidView.jspa?rapidView={0}";var h=j+"/secure/RapidView.jspa?rapidView={0}&tab=columns";var a={HIDDEN:"hidden",DASHBOARD_MODE:"dashboard-mode",NO_MAPPED_COLUMNS_MODE:"no-mapped-columns-mode"};var b=function(k){k.preventDefault();GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE)};var g=function(k){k.preventDefault();GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING)};function c(o,r,q,l,k){var p;var n;var m;if(l){n=AJS.format(h,q);p=GH.tpl.rapid.activesprintemptyview.noMappedColumns}else{if(o){n=AJS.format(f,q);p=GH.tpl.rapid.activesprintemptyview.noActiveSprint;m=b}else{if(r){n=AJS.format(e,q);p=GH.tpl.rapid.activesprintemptyview.clearAllFilters;m=g}else{n=AJS.format(i,q);p=GH.tpl.rapid.activesprintemptyview.noIssue}}}this.linkAddr=n;this.view=d(p({linkAddr:n}));this.secondLineView=this.view.find("p");this.ctaLink=this.secondLineView.find("a").click(m);this.ctaLinkHandler=m;GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,this._reloadView,this);d(k).append(this.view)}c.prototype.handleOnDashboardMode=function(){this.view.addClass(a.DASHBOARD_MODE)};c.prototype.handleNoMappedColumnsMode=function(){this.view.addClass(a.NO_MAPPED_COLUMNS_MODE)};c.prototype._reloadView=function(k){if(k){this.secondLineView.removeClass(a.HIDDEN)}};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.soy' */
// This file was automatically generated from ActiveSprintEmptyView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.activesprintemptyview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.activesprintemptyview == 'undefined') { GH.tpl.rapid.activesprintemptyview = {}; }


GH.tpl.rapid.activesprintemptyview.noMappedColumns = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "Statuses are not mapped to the board columns", contentHtml: AJS.format("Check the \x3ca href\x3d\x22{0}\x22\x3eboard configuration\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noMappedColumns.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noMappedColumns';
}


GH.tpl.rapid.activesprintemptyview.noActiveSprint = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "There are no active sprints", contentHtml: AJS.format("Start sprints in the \x3ca href\x3d\x22{0}\x22\x3eBacklog\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noActiveSprint.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noActiveSprint';
}


GH.tpl.rapid.activesprintemptyview.clearAllFilters = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "Issues are currently filtered", contentHtml: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eClear all filters\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.clearAllFilters.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.clearAllFilters';
}


GH.tpl.rapid.activesprintemptyview.noIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "No issues are currently visible", contentHtml: AJS.format("Check the \x3ca href\x3d\x22{0}\x22\x3eboard configuration\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noIssue.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noIssue';
}


GH.tpl.rapid.activesprintemptyview.emptyMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content"><div class="ghx-no-active-sprint-icon"></div><h3>' + soy.$$escapeHtml(opt_data.heading) + '</h3><p class="hidden">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.emptyMessage.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.emptyMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.js' */
GH.SwimlaneView={};GH.SwimlaneView.visible=false;GH.SwimlaneView.detailViewColumnId=false;GH.SwimlaneView.rapidViewData={};GH.SwimlaneView.init=function(){GH.SwimlaneStalker.init();AJS.$(document).delegate("#ghx-pool .ghx-swimlane-header .js-expander","click",GH.SwimlaneView.toggleCollapsedHandler);AJS.$(document).delegate("#ghx-pool .ghx-swimlane-header .js-expander","keydown",GH.SwimlaneView.toggleCollapsedHandler);AJS.$(document).delegate(".js-view-action-expand-all","click",GH.SwimlaneView.expandAll);AJS.$(document).delegate(".js-view-action-collapse-all","click",GH.SwimlaneView.collapseAll);AJS.$(document).delegate("#ghx-release","click",GH.SwimlaneView.openReleaseVersionDialog);AJS.$(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED,function(){GH.WorkController.reload()});AJS.$(document).delegate("button.js-sync","click",function(){GH.WorkController.analytics.trigger("movetodonebutton.clicked");var b=AJS.$(this).closest(".ghx-swimlane-header").attr("data-issue-key");var a=GH.GridDataController.getModel().getIssueDataByKey(b);GH.WorkController.resolveParentTask(a)})};GH.SwimlaneView.show=function(){GH.SwimlaneView.visible=true;GH.SwimlaneView.renderSwimlanes()};GH.SwimlaneView.hide=function(){GH.SwimlaneView.visible=false};GH.SwimlaneView.setRapidView=function(a){GH.SwimlaneView.rapidViewData=a};GH.SwimlaneView.setRapidViewConfig=function(a){GH.SwimlaneView.rapidViewConfig=a};GH.SwimlaneView.renderSwimlanes=function(){var b=AJS.$("#ghx-pool");if(b.length<1){return}GH.SwimlaneStalker.poolStalker();b.hide();var g=GH.GridDataController.getModel();var a=g.hasSwimlanes();if(a){b.addClass("ghx-has-swimlanes")}else{b.removeClass("ghx-has-swimlanes")}var j=g.isParentChildStrategy();if(j){b.addClass("ghx-parent-child")}else{b.removeClass("ghx-parent-child")}var d=g.getColumns();var f=[GH.tpl.rapid.swimlane.renderColumnsHeader({columns:d,statistics:GH.GridDataController.getStatistics()})];var e=GH.SwimlaneView.getCalculatedDisplayIssueKeys();var k=g.getSwimlanes();var l=g.getCells();var h=g.getIssues();var c=g.getGroupData();var i=0;_.each(k,function(n){var o=g.getSwimlaneIssueCount(n.id);if((j&&!n.defaultSwimlane)||o>0){var m=a&&GH.RapidBoard.State.isSwimlaneCollapsed(n.id);f.push(GH.tpl.rapid.swimlane.renderSwimlane({columns:d,swimlane:n,swimlaneStrategy:g.getSwimlaneStrategy(),swimlaneTitle:GH.SwimlaneView.getSwimlaneTitle(n,o),cells:l,issues:h,index:i,collapsed:m,issueCount:o,groupData:c,displayIssueKeys:e,selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()}));i++}});if(i===0){f.push(GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns({columns:d,}))}f.push(GH.tpl.rapid.swimlane.renderEndOfPool({rendered:new Date().getTime()}));b[0].innerHTML=f.join("");if(i===0){GH.SwimlaneView.renderActiveSprintEmptyMsg(b)}GH.SwimlaneView.setBusted(b);GH.SwimlaneView.renderReleaseAction();b.show();GH.WorkDragAndDrop.initDraggables(b)};GH.SwimlaneView.renderActiveSprintEmptyMsg=function(a){var f=GH.UserData.hasUser();var c=GH.SwimlaneView.rapidViewData.sprintSupportEnabled&&!GH.WorkControls.hasSprints();var e=GH.WorkControls.getActiveQuickFilterCount();var d=GH.RapidBoard.State.getRapidViewId();var b=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView");var g=new b(c,e,d,false,a);if(f){if(!c&&!e){GH.RapidViewConfig.fetchConfiguration(d).done(function(h){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,h.canEdit)})}else{GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,true)}}GH.WorkController.setActiveSprintEmptyMsg(g)};GH.SwimlaneView.rerenderCellOfIssue=function(b){var a=GH.GridDataController.getModel().getIssuePositionByKey(b);if(!a){return}GH.SwimlaneView.rerenderCell(a.swimlaneId,a.columnId)};GH.SwimlaneView.rerenderCell=function(e,g){var d=GH.GridDataController.getModel();var f={swimlane:d.getSwimlaneById(e),column:d.getColumnById(g),cells:d.getCells(),issues:d.getIssues(),groupData:d.getGroupData(),displayIssueKeys:GH.SwimlaneView.getCalculatedDisplayIssueKeys(),selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()};var c=GH.tpl.rapid.swimlane.renderIssueColumn(f);var b=AJS.$(c);var a=AJS.$("#ghx-pool").find('.ghx-swimlane[swimlane-id="'+e+'"]').find(".ghx-columns").find('.ghx-column[data-column-id="'+g+'"]');a.replaceWith(b);GH.WorkDragAndDrop.initDraggables(AJS.$("#ghx-pool"))};GH.SwimlaneView.getSelectedKeysMap=function(){var b=GH.WorkSelectionController.getSelectedIssueKeys();var a={};_.each(b,function(c){a[c]=true});return a};GH.SwimlaneView.getIssueCountLabel=function(a,b){if(a.parentKey){return AJS.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\u003c{0,number} sub-tasks}",b)}else{return AJS.format("{0,choice,0#0 issues|1#1 issue|1\u003c{0,number} issues}",b)}};GH.SwimlaneView.getSwimlaneTitle=function(b,d){var c=GH.SwimlaneView.getIssueCountLabel(b,d);if(b.parentKey){var a=GH.GridDataController.getModel().getIssueDataByKey(b.parentKey);if(a){c+=" - "+a.summary}}else{if(b.description){c+=" - "+b.description}else{if(b.query){c+=" - "+b.query}}}return c};GH.SwimlaneView.renderReleaseAction=function(){if(!GH.UserData.hasUser()){return}if(GH.SwimlaneView.rapidViewData.sprintSupportEnabled){return}var a=AJS.$("#ghx-column-headers").find(".ghx-column").last();a.prepend(GH.tpl.rapid.swimlane.renderReleaseVersionControl({canRelease:GH.GridDataController.canRelease}))};GH.SwimlaneView.openReleaseVersionDialog=function(d){var b=AJS.$(this);if(b.hasClass("ghx-disabled")){return}var c=GH.RapidBoard.State.getRapidViewId();var a=b.closest(".ghx-column").attr("data-id");GH.Dialogs.ReleaseVersionDialog.showDialog(c,a)};GH.SwimlaneView.setBusted=function(a){if(GH.GridDataController.hasBustedColumns()){AJS.$(a).addClass("ghx-busted")}else{AJS.$(a).removeClass("ghx-busted")}};GH.SwimlaneView.getCalculatedDisplayIssueKeys=function(a){var c=GH.GridDataController.getModel();var e=GH.WorkView.getIssueKeyDimensions();var d={};if(a){d[a]=GH.IssueListUtil.buildDisplayIssueKey(a,e)}else{var b=c.getIssues();_.each(b,function(f){d[f.key]=GH.IssueListUtil.buildDisplayIssueKey(f.key,e)})}return d};GH.SwimlaneView.rerenderIssue=function(a){var c=GH.GridDataController.getModel();var b=c.getIssueDataByKey(a);if(!b){return}GH.SwimlaneView.rerenderIssueCard(b);GH.SwimlaneView.updateSwimlaneHeader(b);GH.SwimlaneView.rerenderFakeParents(b)};GH.SwimlaneView.rerenderFakeParents=function(b){if(b.parentKey){return}var a=AJS.$('.js-fake-parent[data-issue-key="'+b.key+'"]');if(a.length<1){return}var d=a.find(".ghx-parent-stub");d.attr("title",b.key+" \u2014 "+b.summary);var c=d.find(".ghx-summary");c.text(b.summary)};GH.SwimlaneView.rerenderIssueCard=function(b){var a=AJS.$('.js-issue[data-issue-key="'+b.key+'"]');if(a.length>0){var c=GH.SwimlaneView.getCalculatedDisplayIssueKeys(b.key);var d=AJS.$(GH.tpl.rapid.swimlane.renderIssue({issue:b,displayIssueKeys:c,selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),statLabel:GH.SwimlaneView.getStatisticLabel(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()}));a.replaceWith(d);GH.WorkDragAndDrop.registerSingleCardDraggable(d)}};GH.SwimlaneView.updateSwimlaneHeader=function(a){var b=GH.GridDataController.getModel();var c=b.getParentSwimlaneByIssueKey(a.key);if(c){AJS.$(".ghx-swimlane").each(function(){var f=AJS.$(this);if(f.attr("swimlane-id")==c.id){var g=b.getSwimlaneIssueCount(c.id);var e=GH.SwimlaneView.getSwimlaneTitle(c,g);var d=GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane:c,swimlaneTitle:e,parent:a,issueCount:g});$header=f.find(".ghx-swimlane-header");$header.html(d);if(a.flagged){$header.addClass("ghx-flagged")}else{$header.removeClass("ghx-flagged")}}});GH.SwimlaneStalker.updateSwimlaneHeaderStalker()}};GH.SwimlaneView.handleResizeEvent=function(){if(!GH.SwimlaneView.visible){return}};GH.SwimlaneView.toggleCollapsedHandler=function(b){if(b.type==="keydown"){if(b.keyCode!==13&&b.keyCode!==32){return}b.preventDefault()}var c=AJS.$(this).closest(".ghx-swimlane");var d=!c.hasClass("ghx-closed");var a=AJS.$(b.target).closest(".js-expander");a.attr("aria-expanded",!d);GH.SwimlaneView.setCollapsed(c,d)};GH.SwimlaneView.setCollapsed=function(b,c){var a=parseInt(b.attr("swimlane-id"),10);if(c){b.addClass("ghx-closed")}else{b.removeClass("ghx-closed")}GH.SwimlaneView.setCollapsedState(a,c);GH.Layout.fireDelayedWindowResize()};GH.SwimlaneView.setCollapsedById=function(a,b){AJS.$(".ghx-swimlane").each(function(){var c=AJS.$(this);if(c.attr("swimlane-id")==a){if(c.hasClass("ghx-closed")!=b){GH.SwimlaneView.setCollapsed(c,b)}}})};GH.SwimlaneView.collapseAll=function(a){if(a&&AJS.$(a.target).closest("li").hasClass("disabled")){return false}AJS.$(".ghx-swimlane").addClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsedState(parseInt(AJS.$(this).attr("swimlane-id")),true)})};GH.SwimlaneView.expandAll=function(a){if(a&&AJS.$(a.target).closest("li").hasClass("disabled")){return false}AJS.$(".ghx-swimlane").removeClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsedState(parseInt(AJS.$(this).attr("swimlane-id")),false)})};GH.SwimlaneView.toggleAllSwimlanes=function(){var b=GH.GridDataController.getModel();if(!b.hasSwimlanes()){return false}var a=b.getSwimlanes();var c=true;_.any(a,function(d){if(!GH.RapidBoard.State.isSwimlaneCollapsed(d.id)){var e=(d.issueIds)?d.issueIds.length>0:true;if(e){c=false;return true}}});if(c){GH.SwimlaneView.expandAll()}else{GH.SwimlaneView.collapseAll()}};GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey=function(a){var e=GH.GridDataController.getModel();var d=e.getSwimlaneIdByIssueKey(a);var c=e.hasSwimlanes();var b=c&&GH.RapidBoard.State.isSwimlaneCollapsed(d);if(!b){return false}GH.SwimlaneView.setCollapsedById(d,false);return true};GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey=function(a,f){var e=GH.GridDataController.getModel();var d=e.getSwimlaneIdByIssueKey(a);var c=e.hasSwimlanes();var b=c&&GH.RapidBoard.State.isSwimlaneCollapsed(d);if(b!=f){GH.SwimlaneView.setCollapsedState(d,f)}};GH.SwimlaneView.setCollapsedState=function(a,b){GH.RapidBoard.State.setSwimlaneCollapsed(a,b)};GH.SwimlaneView.getStatisticLabel=function(){return GH.SwimlaneView.rapidViewConfig.trackingStatistic&&GH.SwimlaneView.rapidViewConfig.trackingStatistic.isEnabled?GH.SwimlaneView.rapidViewConfig.trackingStatistic.name:GH.SwimlaneView.rapidViewConfig.estimationStatistic.name};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.soy' */
// This file was automatically generated from SwimlaneView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.swimlane.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.swimlane == 'undefined') { GH.tpl.rapid.swimlane = {}; }


GH.tpl.rapid.swimlane.renderSwimlane = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-swimlane' + ((opt_data.index == 0) ? ' ghx-first' : '') + ((opt_data.collapsed) ? ' ghx-closed' : '') + '" swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >';
  if (! (opt_data.index == 0 && opt_data.swimlane.defaultSwimlane)) {
    var parent__soy15 = opt_data.issues[opt_data.swimlane.parentKey];
    var lastColumn__soy16 = opt_data.columns[opt_data.columns.length - 1];
    var parentOutOfSync__soy17 = opt_data.swimlane.parentOutOfSync;
    output += '<div class="ghx-swimlane-header' + ((opt_data.swimlane.defaultSwimlane) ? ' ghx-swimlane-default' : '') + ((parent__soy15 && parent__soy15.done) ? ' ghx-done' : '') + ((parent__soy15 && parent__soy15.flagged) ? ' ghx-flagged' : '') + ((parent__soy15 && parentOutOfSync__soy17) ? ' ghx-out-of-sync' : '') + ((opt_data.selectedIssueKeys[opt_data.swimlane.parentKey]) ? ' ghx-selected' : '') + '"' + ((parent__soy15) ? 'data-issue-key="' + soy.$$filterNoAutoescape(parent__soy15.key) + '" data-issue-id="' + soy.$$filterNoAutoescape(parent__soy15.id) + '" aria-label="' + soy.$$escapeHtml(AJS.format("Swimlane for {0}",opt_data.swimlaneStrategy + ': ' + parent__soy15.key + ' ' + parent__soy15.summary)) + '" role="group"' : 'aria-label="' + soy.$$escapeHtml(AJS.format("Swimlane for {0}",opt_data.swimlaneStrategy + ': ' + opt_data.swimlane.name)) + '"') + 'tabindex="0" data-swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >' + GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane: opt_data.swimlane, swimlaneTitle: opt_data.swimlaneTitle, parent: parent__soy15, issueCount: opt_data.issueCount}) + ((parent__soy15 && parentOutOfSync__soy17) ? ' <div class="ghx-bandaid"><button class="aui-button js-sync">' + soy.$$escapeHtml(AJS.format("Move to {0}",lastColumn__soy16.name)) + '</button></div>' : '') + '</div>';
  }
  output += GH.tpl.rapid.swimlane.renderIssueColumns(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlane';
}


GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent = function(opt_data, opt_ignored) {
  return '<div role="button" tabindex="0" class="ghx-expander js-expander" aria-expanded="true" title="' + soy.$$escapeHtml("Toggle swimlane visibility") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-heading"' + ((opt_data.parent) ? 'title="' + soy.$$escapeHtml(opt_data.swimlaneTitle) + '"><span class="ghx-type" title="' + soy.$$escapeHtml(opt_data.parent.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.parent.typeUrl) + '"></span><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.parent.key) + '" role="button" class="ghx-parent-key js-detailview">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : 'title="' + soy.$$escapeHtml(opt_data.swimlaneTitle) + '"><span role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</span>') + '<span class="ghx-info">' + ((opt_data.parent) ? GH.tpl.status.renderText({status: opt_data.parent.status}) : '') + '<span class="ghx-description">' + ((opt_data.swimlane.parentKey) ? soy.$$escapeHtml(AJS.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\x3c{0,number} sub-tasks}",opt_data.issueCount)) : soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}",opt_data.issueCount))) + '</span></span>' + ((opt_data.parent) ? '<span class="ghx-summary"><span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml("Flagged") + '</span>' + soy.$$escapeHtml(opt_data.parent.summary) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent';
}


GH.tpl.rapid.swimlane.renderStalkerSwimlane = function(opt_data, opt_ignored) {
  return '<div id="ghx-swimname"><b class="ghx-flip"></b><b class="ghx-flop"></b><h2><span class="ghx-type"></span><span class="ghx-name"></span><span class="ghx-qty"></span><span class="ghx-summary"></span></h2></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStalkerSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStalkerSwimlane';
}


GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns ghx-sad-columns">';
  var columnList126 = opt_data.columns;
  var columnListLen126 = columnList126.length;
  for (var columnIndex126 = 0; columnIndex126 < columnListLen126; columnIndex126++) {
    var columnData126 = columnList126[columnIndex126];
    output += '<li class="ghx-column' + ((columnData126.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData126.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData126.id) + '" ></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns';
}


GH.tpl.rapid.swimlane.renderColumnsHeader = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-column-header-group" class="ghx-column-header-group' + ((opt_data.statistics.fieldConfigured) ? ' ghx-has-stats' : '') + '"><ul id="ghx-column-headers" class="ghx-column-headers">';
  var columnList145 = opt_data.columns;
  var columnListLen145 = columnList145.length;
  for (var columnIndex145 = 0; columnIndex145 < columnListLen145; columnIndex145++) {
    var columnData145 = columnList145[columnIndex145];
    output += '<li class="ghx-column' + ((columnData145.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData145.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData145.id) + '" >' + ((opt_data.statistics.fieldConfigured) ? GH.tpl.rapid.swimlane.renderColumnCount({column: columnData145}) : '') + '<h2>' + soy.$$escapeHtml(columnData145.name) + '</h2>' + ((opt_data.statistics.fieldConfigured) ? '<div class="ghx-limits">' + GH.tpl.rapid.swimlane.renderColumnConstraints({column: columnData145}) + '</div>' : '') + '</li>';
  }
  output += '</ul><div id="js-swimlane-header-stalker"></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnsHeader.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnsHeader';
}


GH.tpl.rapid.swimlane.renderColumnCount = function(opt_data, opt_ignored) {
  return '<div class="ghx-qty">' + ((opt_data.column.stats.total > opt_data.column.stats.visible) ? soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.column.stats.visible,opt_data.column.stats.total)) : soy.$$escapeHtml(opt_data.column.stats.total)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnCount.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnCount';
}


GH.tpl.rapid.swimlane.renderColumnConstraints = function(opt_data, opt_ignored) {
  return '' + ((opt_data.column.min || opt_data.column.min == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-min" title="' + soy.$$escapeHtml("Minimum Constraint") + '">' + soy.$$escapeHtml("Min") + ' ' + soy.$$escapeHtml(opt_data.column.min) + '</span>' : '') + ((opt_data.column.max || opt_data.column.max == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-max" title="' + soy.$$escapeHtml("Maximum Constraint") + '">' + soy.$$escapeHtml("Max") + ' ' + soy.$$escapeHtml(opt_data.column.max) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnConstraints.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnConstraints';
}


GH.tpl.rapid.swimlane.renderIssueColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns">';
  var columnList201 = opt_data.columns;
  var columnListLen201 = columnList201.length;
  for (var columnIndex201 = 0; columnIndex201 < columnListLen201; columnIndex201++) {
    var columnData201 = columnList201[columnIndex201];
    output += GH.tpl.rapid.swimlane.renderIssueColumn({swimlane: opt_data.swimlane, column: columnData201, cells: opt_data.cells, issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumns';
}


GH.tpl.rapid.swimlane.renderIssueColumn = function(opt_data, opt_ignored) {
  return '<li class="ghx-column' + ((opt_data.column.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((opt_data.column.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '">' + GH.tpl.rapid.swimlane.renderIssues({issueKeys: opt_data.cells[opt_data.swimlane.id][opt_data.column.id], issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + '</li>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumn.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumn';
}


GH.tpl.rapid.swimlane.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeyList239 = opt_data.issueKeys;
  var issueKeyListLen239 = issueKeyList239.length;
  for (var issueKeyIndex239 = 0; issueKeyIndex239 < issueKeyListLen239; issueKeyIndex239++) {
    var issueKeyData239 = issueKeyList239[issueKeyIndex239];
    var issue__soy240 = opt_data.issues[issueKeyData239];
    if (opt_data.groupData.beginGroups[issue__soy240.id]) {
      if (! issue__soy240.parentId) {
        output += '<div class="ghx-parent-group ghx-home js-parent-drag" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(issue__soy240.key) + ' ' + soy.$$escapeHtml(issue__soy240.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issue__soy240.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issue__soy240.key) + '">';
      } else {
        var parentIssue__soy257 = opt_data.issues[issue__soy240.parentKey];
        output += ((opt_data.groupData.fakeParents[issue__soy240.id] && parentIssue__soy257) ? '<div class="ghx-parent-group ghx-away js-fake-parent js-parent-drag" data-issue-key="' + soy.$$filterNoAutoescape(parentIssue__soy257.key) + '">' + ((opt_data.groupData.drawFakeParents) ? '<div class="ghx-parent-stub" title="' + soy.$$filterNoAutoescape(parentIssue__soy257.key) + ' &mdash; ' + soy.$$escapeHtml(parentIssue__soy257.summary) + '"><div class="ghx-group"><span class="ghx-key">' + soy.$$filterNoAutoescape(parentIssue__soy257.key) + '</span><span class="ghx-summary">' + soy.$$escapeHtml(parentIssue__soy257.summary) + '</span></div></div>' : '') : '') + '<div class="ghx-subtask-group">';
      }
    }
    output += GH.tpl.rapid.swimlane.renderIssue({issue: issue__soy240, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + ((opt_data.groupData.endGroups[issue__soy240.id]) ? '</div></div>' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssues.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssues';
}


GH.tpl.rapid.swimlane.renderIssue = function(opt_data, opt_ignored) {
  var output = '<div class="js-detailview ghx-issue js-issue ghx-has-avatar' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.timeInColumn) ? ' ghx-days-' + soy.$$escapeHtml(opt_data.issue.timeInColumn.days) : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + '" data-issue-id="' + soy.$$filterNoAutoescape(opt_data.issue.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(opt_data.issue.key) + '" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(opt_data.issue.key) + ' ' + soy.$$escapeHtml(opt_data.issue.summary) + '"><div class="ghx-issue-content"><div class="ghx-issue-fields">' + ((opt_data.issue.typeUrl) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + '<div class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" tabindex="-1" class="js-key-link">' + soy.$$escapeHtml(opt_data.displayIssueKeys[opt_data.issue.key]) + '</a></div><div class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div>' + ((opt_data.showEpic && opt_data.issue.epic && opt_data.issue.epicField) ? '<div class="ghx-highlighted-fields"><div class="ghx-highlighted-field">' + GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField, removableIfAllowed: false}) + '</div></div>' : '');
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-extra-fields">';
    var extraFieldList359 = opt_data.issue.extraFields;
    var extraFieldListLen359 = extraFieldList359.length;
    for (var extraFieldIndex359 = 0; extraFieldIndex359 < extraFieldListLen359; extraFieldIndex359++) {
      var extraFieldData359 = extraFieldList359[extraFieldIndex359];
      output += '<div class="ghx-extra-field-row">' + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData359}) + '</div>';
    }
    output += '</div>';
  }
  output += '</div><div class="ghx-avatar">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '</div>' + GH.tpl.rapid.swimlane.renderStatisticsValue({stat: opt_data.issue.trackingStatistic ? opt_data.issue.trackingStatistic : opt_data.issue.estimateStatistic, label: opt_data.statLabel}) + '<div class="ghx-flags">' + ((opt_data.issue.flagged) ? '<span class="ghx-flag"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag" title="' + soy.$$escapeHtml("Flagged") + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '') + '</div>' + ((opt_data.issue.timeInColumn) ? '<div class="ghx-days" title="' + soy.$$filterNoAutoescape(AJS.format("{0,choice,0#{0} days|1#{0} day|1\x3c{0} days} in this column",opt_data.issue.timeInColumn.days)) + '"><b></b></div>' : '') + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssue.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssue';
}


GH.tpl.rapid.swimlane.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    output += '<div class="ghx-end"><div class="ghx-corner">';
    var corner__soy408 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : ' ');
    var tooltip__soy414 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.label) : soy.$$escapeHtml("Unestimated"));
    output += aui.badges.badge({extraAttributes: {title: tooltip__soy414}, text: corner__soy408}) + '</div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStatisticsValue.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStatisticsValue';
}


GH.tpl.rapid.swimlane.renderReleaseVersionControl = function(opt_data, opt_ignored) {
  return '<a id="ghx-release" class="ghx-release ' + ((! opt_data.canRelease) ? 'ghx-disabled' : '') + '" role="button" title="' + ((opt_data.canRelease) ? soy.$$escapeHtml("Create and release a version from this column") : soy.$$escapeHtml("You must have Project Administrator permissions to release a version")) + '">' + soy.$$escapeHtml("Release\u2026") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderReleaseVersionControl.soyTemplateName = 'GH.tpl.rapid.swimlane.renderReleaseVersionControl';
}


GH.tpl.rapid.swimlane.renderEndOfPool = function(opt_data, opt_ignored) {
  return '<span id="js-pool-end" data-rendered="' + soy.$$escapeHtml(opt_data.rendered) + '"></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEndOfPool.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEndOfPool';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={};GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased";GH.Dialogs.ReleaseVersionDialog.dialog=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new a("gh.release")})();GH.Dialogs.ReleaseVersionDialog.showDialog=function(b,a){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>');GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:b,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)};GH.Dialogs.ReleaseVersionDialog.renderDialog=function(a){_.each(a.projectIssueDetails,function(d){d.name=AJS.escapeHTML(String(d.name))});var b=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=undefined;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",a.projectIssueDetails.length)}});AJS.$("#"+b.id).addClass("ghx-dialog");b.addHeader("Release");b.addPanel("","panel");b.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:a}));b.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(a)},"aui-button aui-button-primary");b.addCancel("Cancel",function(){b.cancel()});AJS.$(".aui-dialog").addClass("ghx-dialog");var c=new Calendar();Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:true,positionStyle:"fixed",ifFormat:a.datePickerFormat});GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",a.projectIssueDetails.length);b.show();AJS.$(".aui-blanket").empty();AJS.$("#ghx-release-name").focus()};GH.Dialogs.ReleaseVersionDialog.release=function(a){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",a.projectIssueDetails.length);var b=GH.Dialogs.ReleaseVersionDialog.dialog;b.disableControls();b.showSpinner();GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:a.rapidViewId,columnId:a.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(c){var d=GH.Dialogs.ReleaseVersionDialog.dialog;if(d){d.dispose();GH.Dialogs.ReleaseVersionDialog.dialog=undefined}GH.Notification.showSuccess(c.success.message);AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var c=GH.Dialogs.ReleaseVersionDialog.dialog;if(c){c.hideSpinner();c.enableControls()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml("View in Issue Navigator") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format("will be released from \x3cstrong\x3e{0}\x3c/strong\x3e",projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml("Version name") + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml("Release Date") + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml("Description") + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/complete-sprint-dialog",["require"],function(d){var f=d("jquery");var g=d("jira-agile/rapid/ui/component/sprint-select");var b=GH.Ajax;var c=GH.Dialog;var m=GH.Notification;var j=GH.tpl;var l={};l.sprintSelect=null;l.EVENT_SPRINT_COMPLETED="sprintCompleted";l.BACKLOG_ID=-1;l.analyticsMetaData=function(o){AJS.trigger("analyticsEvent",{name:"gh.sprint.complete",data:o})};l.showDialog=function(o,p){AJS.dim();f(".aui-blanket").html('<span class="ghx-wait"></span>');b.get({url:"/sprint/"+p+"/complete",data:{rapidViewId:o,sprintId:p}},"completesprintdialog").done(l.renderDialog).fail(function(){AJS.undim();f(".aui-blanket").empty()})};l.renderDialog=function(p){var o=p.finishedParentsWithUnfinishedSubtasks!==undefined&&p.finishedParentsWithUnfinishedSubtasks.length>0;var q=c.create({width:630,height:300,id:"ghx-dialog-complete-sprint"});q.addHeader(AJS.format("Complete Sprint: {0}",p.sprint.name));q.addPanel("","panel");if(!o){var r=new Calendar();q.getCurrentPanel().html(j.dialogs.completesprint.renderCompleteSprintDialog({model:e(p)}));q.addButton("Complete",function(){q.disableControls();q.showSpinner();l.complete(q,p)},"aui-button ghx-complete-button");l.$completeButton=f("#ghx-dialog-complete-sprint").find(".ghx-complete-button");if(n(p)){a(p)}}else{q.getCurrentPanel().html(j.dialogs.completesprint.renderCanNotCompleteSprintDialog({issues:p.finishedParentsWithUnfinishedSubtasks}))}c.addCancelButton(q);f(".aui-dialog").addClass("ghx-dialog");q.show();f(".aui-blanket").empty();f("#ghx-release-name").focus()};l.complete=function(p,o){b.put({url:"/sprint/"+o.sprint.id+"/complete",data:{rapidViewId:o.rapidViewId,sprintId:o.sprint.id,incompleteIssuesDestination:o.incompleteIssuesDestination},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(q){l.analyticsMetaData({sprintId:o.sprint.id,completeIssueCount:o.completeIssues,incompleteIssueCount:o.incompleteIssues,partiallyCompleteIssueCount:o.partiallyCompleteIssues});p.dispose();m.showSuccess(q.success.message);f(GH).trigger(l.EVENT_SPRINT_COMPLETED,o.sprint.id)}).fail(function(){p.hideSpinner();p.enableControls()})};function a(o){l.sprintSelect=new g();l.sprintSelect.initDropdown();l.sprintSelect.on("change",i.bind(null,o))}function n(o){var p=o.incompleteIssues+o.partiallyCompleteIssues>0;return p&&o.hasDestinationSprints}function i(o,p){if(p){o.incompleteIssuesDestination=p;k()}else{h()}}function k(){l.$completeButton.enable(true)}function h(){l.$completeButton.enable(false)}function e(p){var o={completeIssues:p.completeIssues,totalIncompleteIssues:p.incompleteIssues+p.partiallyCompleteIssues,unfinishedParentsWithFinishedSubtasks:p.unfinishedParentsWithFinishedSubtasks?p.unfinishedParentsWithFinishedSubtasks.length:0,hasDestinationSprints:p.hasDestinationSprints,incompleteIssueDestinations:p.incompleteIssueDestinations,shouldShowSprintSelector:n(p),defaultIncompleteIssueDestination:p.defaultIncompleteIssueDestination};return o}return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.soy' */
// This file was automatically generated from CompleteSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completesprint == 'undefined') { GH.tpl.dialogs.completesprint = {}; }


GH.tpl.dialogs.completesprint.renderCompleteSprintDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues were |1#{0} issue was|2#{0} issues were} done",'<strong>' + opt_data.model.completeIssues + '</strong>',opt_data.model.completeIssues)) + ((opt_data.model.totalIncompleteIssues > 0 && opt_data.model.unfinishedParentsWithFinishedSubtasks > 0) ? '<br/>' + ((opt_data.model.totalIncompleteIssues == opt_data.model.unfinishedParentsWithFinishedSubtasks) ? soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1#issue was|2#issues were} incomplete (and had all of {1,choice,1#its|2#their} sub-tasks complete)",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1#issue was|2#issues were} incomplete ({2} of which had all of {3,choice,1#its|2#their} sub-tasks complete)",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues,'<strong>' + opt_data.model.unfinishedParentsWithFinishedSubtasks + '</strong>',opt_data.model.unfinishedParentsWithFinishedSubtasks))) : (opt_data.model.totalIncompleteIssues > 0) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,0#issues were|1#issue was|2#issues were} incomplete",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : '') + '</p><p>' + ((opt_data.model.totalIncompleteIssues > 0) ? soy.$$escapeHtml(opt_data.model.hasDestinationSprints ? "Select where all the incomplete issues should be moved:" : "Incomplete issues will be moved to the backlog") : '') + '</p>' + ((opt_data.model.shouldShowSprintSelector) ? GH.tpl.component.sprintselect.renderSingleSelect({items: opt_data.model.incompleteIssueDestinations, selectedItem: opt_data.model.defaultIncompleteIssueDestination}) : '') + '<p class="ghx-description">' + soy.$$escapeHtml("Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div><p>' + soy.$$escapeHtml("Sprint cannot be completed as there are incomplete subtasks on the following issues:") + '</p><ul>';
  var issueKeyList37 = opt_data.issues;
  var issueKeyListLen37 = issueKeyList37.length;
  for (var issueKeyIndex37 = 0; issueKeyIndex37 < issueKeyListLen37; issueKeyIndex37++) {
    var issueKeyData37 = issueKeyList37[issueKeyIndex37];
    output += '<li>' + soy.$$escapeHtml(issueKeyData37) + '</li>';
  }
  output += '<ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.js' */
GH.Dialogs.ReopenSprintDialog={};GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED="sprintReopened";GH.Dialogs.ReopenSprintDialog.analyticsMetaData=function(a){AJS.trigger("analyticsEvent",{name:"gh.sprint.reopen",data:a})};GH.Dialogs.ReopenSprintDialog.showDialog=function(a,b){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>');GH.Ajax.get({url:"/sprint/"+b+"/reopen",data:{rapidViewId:a,sprintId:b}},"reopensprintdialog").done(GH.Dialogs.ReopenSprintDialog.renderDialog).fail(function(){AJS.undim();AJS.$(".aui-blanket").empty()})};GH.Dialogs.ReopenSprintDialog.renderDialog=function(a){var b=GH.Dialog.create({width:630,height:270,id:"ghx-dialog-reopen-sprint"});b.addHeader("Reopen Sprint");b.addPanel("","panel");if(a.issuesMovedBack!==0){var c=new Calendar();b.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderReopenSprintDialog({model:a}));b.addButton("Reopen",function(){b.disableControls();b.showSpinner();GH.Dialogs.ReopenSprintDialog.complete(b,a)},"aui-button")}else{b.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog({model:a}))}GH.Dialog.addCancelButton(b);AJS.$(".aui-dialog").addClass("ghx-dialog");b.show();AJS.$(".aui-blanket").empty();AJS.$("#ghx-release-name").focus()};GH.Dialogs.ReopenSprintDialog.complete=function(b,a){GH.Ajax.put({url:"/sprint/"+a.sprint.id+"/reopen",data:{rapidViewId:a.rapidViewId,sprintId:a.sprint.id},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(c){GH.Dialogs.ReopenSprintDialog.analyticsMetaData({sprintId:a.sprint.id,issuesMovedBack:a.issuesMovedBack,completedIssuesNotMovedBack:a.completedIssuesNotMovedBack,incompleteIssuesNotMovedBack:a.incompleteIssuesNotMovedBack,});b.dispose();GH.Notification.showSuccess(c.success.message);AJS.$(GH).trigger(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,a.sprint.id)}).fail(function(){b.hideSpinner();b.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.soy' */
// This file was automatically generated from ReopenSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.reopensprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.reopensprint == 'undefined') { GH.tpl.dialogs.reopensprint = {}; }


GH.tpl.dialogs.reopensprint.renderReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml(opt_data.model.sprint.name) + '</h4><div class="issue-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be moved back to the sprint you\x27\x27re reopening.",'<strong>' + opt_data.model.issuesMovedBack + '</strong>',opt_data.model.issuesMovedBack)) + '</div>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '<p class="ghx-description">' + soy.$$escapeHtml("Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderReopenSprintDialog';
}


GH.tpl.dialogs.reopensprint.reopenDetails_ = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.completedIssuesNotMovedBack > 0) ? '<div class="completed-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} already completed in another sprint, and cannot be moved back.",'<strong>' + opt_data.model.completedIssuesNotMovedBack + '</strong>',opt_data.model.completedIssuesNotMovedBack)) + '</div>' : '') + ((opt_data.model.incompleteIssuesNotMovedBack > 0) ? '<div class="incompleted-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} part of another active sprint, and cannot be moved back.",'<strong>' + opt_data.model.incompleteIssuesNotMovedBack + '</strong>',opt_data.model.incompleteIssuesNotMovedBack)) + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.reopenDetails_.soyTemplateName = 'GH.tpl.dialogs.reopensprint.reopenDetails_';
}


GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml("Reopening the sprint is not possible because there are no issues in this sprint.") + '</p><p>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.js' */
GH.Dialogs.CompleteParentDialog={};GH.Dialogs.CompleteParentDialog.EVENT_PARENT_COMPLETED="parentCompleted";GH.Dialogs.CompleteParentDialog.showDialog=function(a,c,b){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>');GH.Dialogs.CompleteParentDialog.renderDialog(a,c,b.name)};GH.Dialogs.CompleteParentDialog.renderDialog=function(a,d,b){var c=GH.Dialog.create({width:500,height:250,id:"ghx-dialog-complete-parent"});c.addHeader(AJS.format("Update Parent Issue",a.key));c.addPanel("","panel");c.getCurrentPanel().html(GH.tpl.dialogs.completeparent.renderCompleteParentDialog({issue:a,transitions:d,columnName:AJS.escapeHTML(String(b))}));if(d.length>0){c.addButton("Update",function(){c.disableControls();if(d.length==1){GH.Dialogs.CompleteParentDialog.complete(c,a,d[0].id)}else{GH.Dialogs.CompleteParentDialog.complete(c,a,AJS.$(".js-complete-parent").find("input:checked").val())}},"aui-button");GH.Dialog.addCancelButton(c)}else{c.addButton("Acknowledge",function(){c.disableControls();c.dispose()},"aui-button")}AJS.$(".aui-dialog").addClass("ghx-dialog");c.show();AJS.$(".aui-blanket").empty();AJS.$("#ghx-release-name").focus()};GH.Dialogs.CompleteParentDialog.complete=function(c,b,a){GH.IssueOperationShortcuts.setOverrideSelectedIssue(b);c.dispose();GH.WorkDragAndDrop.executeWorkflowTransition(b.id,a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.soy' */
// This file was automatically generated from CompleteParentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completeparent.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completeparent == 'undefined') { GH.tpl.dialogs.completeparent = {}; }


GH.tpl.dialogs.completeparent.renderCompleteParentDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui">';
  if (opt_data.transitions.length > 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml("To update this parent issue to match, select a transition:") + '</p><fieldset class="group js-complete-parent">';
    var transitionList12 = opt_data.transitions;
    var transitionListLen12 = transitionList12.length;
    for (var transitionIndex12 = 0; transitionIndex12 < transitionListLen12; transitionIndex12++) {
      var transitionData12 = transitionList12[transitionIndex12];
      output += '<div class="radio"><input type="radio" name="transition" id="' + soy.$$escapeHtml(transitionData12.id) + '" value="' + soy.$$escapeHtml(transitionData12.id) + '" ' + ((transitionIndex12 == 0) ? 'checked="checked"' : '') + '><label for="' + soy.$$escapeHtml(transitionData12.id) + '">' + soy.$$escapeHtml(transitionData12.name) + '</label></div>';
    }
    output += '</fieldset>';
  } else if (opt_data.transitions.length == 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml("Do you want to update this parent issue to match?") + '</p>';
  } else {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format("However, the parent issue cannot be moved into the \x3cstrong\x3e{0}\x3c/strong\x3e column as there are no matching transitions.",opt_data.columnName)) + '</p>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completeparent.renderCompleteParentDialog.soyTemplateName = 'GH.tpl.dialogs.completeparent.renderCompleteParentDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidViewConfig.js' */
GH.RapidViewConfig={};GH.RapidViewConfig.currentData={};GH.RapidViewConfig.fetchConfiguration=function(e){if(_.isNull(e)){e={viewId:null,fromLocalStorage:true}}else{if(_.isNumber(e)){e={viewId:e,fromLocalStorage:false}}}var a=e.viewId;var d=e.fromLocalStorage;var b=WRM.data.claim("com.atlassian.greenhopper:rapid-view-config");if(b){GH.RapidViewConfig.handleData(b);GH.RapidViewConfig.currentData.promise=AJS.$.Deferred().resolve(b.currentViewConfig).promise()}if(GH.RapidViewConfig.currentData.id!==a){var c={returnDefaultBoard:d};if(a){c.rapidViewId=a}var f=GH.Ajax.get({url:"/xboard/config.json",data:c,deferErrorHandling:true},"rapidViewConfig");f.done(GH.RapidViewConfig.handleData);GH.RapidViewConfig.currentData={id:a,promise:f.pipe(function(g){return g.currentViewConfig},GH.RapidViewConfig.handleRapidLoadError),data:null}}return GH.RapidViewConfig.currentData.promise};GH.RapidViewConfig.handleRapidLoadError=function(b,c){if(c.status!==404){return}var a;if(GH.Ajax.getUserFromAJS()==="anonymous"){a=AJS.format("The requested board cannot be viewed because it either does not exist or you do not have permission to view it. This board may be visible if you \u003ca href=\"{0}\"\u003elog in\u003c/a\u003e.",GH.Navigation.getLoginUrl())}else{a="The requested board cannot be viewed because it either does not exist or you do not have permission to view it."}GH.Notification.addPageLoadMessage(a,"warning");GH.RapidBoard.gotoManageViewsPage()};GH.RapidViewConfig.handleData=function(a){GH.RapidViewConfig.storeGlobalConfig(a.globalConfig);GH.RapidViewConfig.currentData.id=a.currentViewConfig.id;GH.RapidViewConfig.currentData.data=a.currentViewConfig;GH.RapidViewConfig.canEdit=a.currentViewConfig.canEdit;GH.RapidViewConfig.canManageSprints=a.currentViewConfig.canManageSprints;GH.RapidViewConfig.modifySprintSupport()};GH.RapidViewConfig.storeGlobalConfig=function(a){GH.NumberFormat.groupingSeparator=a.numberGroupingSeparator;GH.NumberFormat.decimalSeparator=a.numberDecimalSeparator;GH.TimeFormat.timeTrackingConfigOpts=a.timeTrackingConfig;GH.TimeFormat.dateTimePickerFormat=a.dateTimePickerFormat;GH.TimeFormat.userTimeZoneLabel=a.userTimeZoneLabel;GH.ChartTimeFrames.dateFormat=a.dateFormat;GH.ChartTimeFrames.timeFormat=a.dateTimePickerFormat;GH.VersionQuickCreate.setDatePickerFormat(a.dateFormat);GH.VersionView.setDatePickerFormat(a.dateFormat);GH.RapidBoard.parallelSprints=a.parallelSprints;GH.EpicConfig.setEpicConfig(a.epicConfig);GH.SprintConfig.setSprintConfig(a.sprintConfig);GH.UserData.setGlobalConfig(a);GH.Config.isSampleDataAvailable=a.isSampleDataAvailable};GH.RapidViewConfig.modifySprintSupport=function(){var a=AJS.$("body");a.removeClass("ghx-days-in-column-disabled ghx-days-in-column-enabled ghx-sprint-support ghx-no-sprint-support");if(GH.RapidViewConfig.currentData.data.sprintSupportEnabled){a.addClass("ghx-sprint-support")}else{a.addClass("ghx-no-sprint-support")}if(GH.RapidViewConfig.currentData.data.showDaysInColumn){a.addClass("ghx-days-in-column-enabled")}else{a.addClass("ghx-days-in-column-disabled")}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFieldsHelper.js' */
define("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper",["require"],function(c){var b=c("underscore");var a={epiclink:function(f){return GH.EpicConfig.getEpicNameString(f.text,f.epicKey)},html:function(f){if(f.html&&f.html!=="&nbsp;"){f.useSoyNoAutoescape=true;return f.html}else{return""}}};var d=function(f){return f.html||f.text};var e={prepareExtraFields:function(f){b.each(f,function(g){var h=a[g.renderer]||d;g.renderedContent=h(g)})}};return e});AJS.namespace("GH.ExtraFieldsHelper",null,require("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFields.soy' */
// This file was automatically generated from ExtraFields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.extraFields.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.extraFields == 'undefined') { GH.tpl.extraFields = {}; }


GH.tpl.extraFields.renderExtraField = function(opt_data, opt_ignored) {
  var output = '';
  var contentOrNone__soy3 = opt_data.extraField.renderedContent || "None";
  var tooltip__soy4 = '' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$escapeHtml(contentOrNone__soy3));
  output += '<span class="ghx-extra-field ' + ((! opt_data.extraField.renderedContent) ? 'ghx-fa' : '') + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy4) + '"><span class="ghx-extra-field-content">' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(contentOrNone__soy3)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.extraFields.renderExtraField.soyTemplateName = 'GH.tpl.extraFields.renderExtraField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.js' */
define("jira-agile/rapid/ui/plan/BacklogView",["require"],function(d){var k=d("underscore");var f=d("jquery");var j=d("jira-agile/rapid/global-events");var h=d("jira-agile/rapid/ui/plan/backlog-model");var m=d("jira-agile/rapid/ui/plan/backlog-model2");var i=d("jira-agile/rapid/ui/plan/sprint-view");var g=d("jira-agile/rapid/ui/plan/sprint-backlog-view");var c=d("jira-agile/rapid/ui/plan/sprint-model");var a=d("jira-agile/rapid/ui/plan/backlog-selection-controller");var b=d("jira-agile/rapid/ui/plan/plan-drag-and-drop");var e;j.on("pre-initialization",function(){e=d("jira-agile/rapid/ui/plan/backlog-controller")});var l={};l.containerSelector="#ghx-backlog";l.getContainer=function(){if(!l.container){l.container=f(l.containerSelector)}return l.container};l.draw=function(){GH.Logger.log("BacklogView.draw",GH.Logger.Contexts.ui);var n=f(l.containerSelector);n.html(GH.tpl.backlogview.renderBacklogView({}));var o=e.calculateIssueRenderData();i.renderAllSprints(o);g.renderBacklog(o);GH.planOnboarding.renderOnboarding();k.delay(function(){b.enableDragAndDrop();l.registerClickHandlers();i.registerTwixies();GH.sprintActions.createDropdown();f("#ghx-backlog").attr("data-rendered",new Date().getTime())})};l.registerClickHandlers=function(){f(l.containerSelector).delegate(".js-clear-all-filters","click",function(n){e.clearFilters()})};l.redrawChangedModel=function(n){l.redrawChangedModels([n])};l.redrawChangedModels=function(n){k.each(n,function(o){if(c.isSprintModel(o)){i.updateSprintViewForModel(o)}else{if(m.isBacklogModel(o)){g.updateBacklog()}}});GH.planOnboarding.renderOnboarding();b.enableDragAndDrop();GH.sprintActions.createDropdown()};l.updateSprintsAfterAddRemove=function(){var n=e.calculateIssueRenderData();i.renderAllSprints(n);GH.planOnboarding.renderOnboarding();b.enableDragAndDrop();GH.sprintActions.createDropdown()};l.updateIssueSelectionState=function(n){var o=false;var q=null;var p=a.getSelectedIssueKey();o=p;f(l.containerSelector).find(".js-issue").removeClass("ghx-selected ghx-selected-primary").each(function(t,u){var s=f(u);var r=s.data("issue-key");if(a.isInSelection(r)){s.addClass("ghx-selected");if(p==r){s.addClass("ghx-selected-primary")}}if(o!=null&&r===o){q=s}});if(q&&n){l._scrollToView(q)}};l._scrollToView=function(n){var q=f("#ghx-backlog");var p=q[0].getBoundingClientRect();var o=n[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(q,p,o)};l.updateHiddenIssues=function(){var p=e.calculateIssueRenderData();var o=f("#ghx-backlog");o.css({display:"none"});var n=o.find(".js-issue-list");k.each(n,function(r){var s=f(r);if(s.is(".js-empty-list")){return}var q=l._updateIssuesVisibilityInIssueList(s,p);if(q){s.removeClass("ghx-has-issues").addClass("ghx-no-issues")}else{s.removeClass("ghx-no-issues").addClass("ghx-has-issues")}});i.updateSprintStatistics();g.updateBacklogHeader();GH.planOnboarding.renderOnboarding();o.css({display:""})};l._updateIssuesVisibilityInIssueList=function(q,p){var o=q.children(".js-issue");var n=true;k.each(o,function(s){var t=f(s);var r=t.attr("data-issue-key");if(p.hiddenIssues[r]){t.addClass("ghx-filtered")}else{t.removeClass("ghx-filtered");n=false}});return n};l.checkBacklogWidth=function(){var n=l.getContainer().width();if(n<600){f("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2")}else{f("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1")}GH.planOnboarding.refresh()};return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.soy' */
// This file was automatically generated from BacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.backlogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.backlogview == 'undefined') { GH.tpl.backlogview = {}; }


GH.tpl.backlogview.renderBacklogView = function(opt_data, opt_ignored) {
  return '<div id="ghx-content-group"><div class="ghx-sprint-group"/><div class="ghx-backlog-group"/></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderBacklogView.soyTemplateName = 'GH.tpl.backlogview.renderBacklogView';
}


GH.tpl.backlogview.renderDragOverlay = function(opt_data, opt_ignored) {
  return '<div class="ghx-drag-overlay"><span class="ghx-shim ghx-shim-1"></span><span class="ghx-shim ghx-shim-2"></span></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderDragOverlay.soyTemplateName = 'GH.tpl.backlogview.renderDragOverlay';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogController.js' */
define("jira-agile/rapid/ui/plan/backlog-controller",["require"],function(h){var r=h("underscore");var e=h("jquery");var a=h("jira-agile/rapid/ui/plan/backlog-model");var m=h("jira-agile/rapid/ui/plan/BacklogView");var c=h("jira-agile/rapid/ui/plan/backlog-selection-controller");var g=h("jira-agile/rapid/ui/plan/sprint-backlog-controller");var o=h("jira-agile/rapid/ui/plan/sprint-view");var d=h("jira-agile/rapid/ui/plan/sprint-backlog-view");var p=h("jira-agile/rapid/ui/plan/sprint-config");var b=h("jira-agile/rapid/ui/plan/plan-rank-controller");var n=h("jira-agile/rapid/ui/plan/plan-controls");var q=h("jira-agile/rapid/ui/plan/plan-view");var l=h("jira-agile/rapid/ui/plan/plan-controller");var k=h("jira-agile/rapid/ui/plan/plan-issue-list-filtering");var f=h("jira-agile/rapid/ui/plan/sprint-controller");var i={};i.visible=false;i.rapidViewData=undefined;i.rapidViewConfig=undefined;i.lastExecutedSearchFilter=undefined;i.issueCreatedCallbacks={};i.init=function(){c.init();g.init();f.init();b.init();var s=e(GH);s.bind("issueUpdated",i.handleIssueUpdated);s.bind("issueCreated",i.handleIssueCreated);s.bind("issuesRemovedFromSprint",i.handleIssuesRemovedFromSprint);s.bind(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED,i.handleSprintStarted);e(n.quickfilters).bind("quickFilterChange",function(){if(i.visible){i.loadData()}})};i.setRapidView=function(s){i.rapidViewData=s};i.setRapidViewConfig=function(s){i.rapidViewConfig=s};i.show=function(s){if(!i.rapidViewData){return false}i.visible=true;i.loadData().done(s)};i.hide=function(){GH.EpicView.hide();i.visible=false};i.loadData=function(){var u={rapidViewId:i.rapidViewData.id,activeQuickFilters:n.quickfilters.getActiveQuickFilters(),selectedProjectKey:GH.RapidBoard.projectKey};if(r.isEmpty(u.activeQuickFilters)){delete u.activeQuickFilters}q.showLoadingBacklog();GH.planOnboarding.refresh();var s={url:"/xboard/plan/backlog/data.json",data:u};var t=GH.Ajax.get(s,"backlogDataModel").done(i.processData);t.fail(function(){q.hideLoadingBacklog();l.hide()});return t.promise()};i.processData=function(s){GH.log("loaded data for backlog",GH.Logger.Contexts.ajax);if(!i.visible){return}i.lastExecutedSearchFilter=undefined;a.setRankCustomFieldId(s.rankCustomFieldId);a.setEstimationStatistic(i.rapidViewConfig.estimationStatistic);a.setTrackingStatistic(i.rapidViewConfig.trackingStatistic);GH.VersionController.setProjects(s.projects);GH.VersionController.setVersions(s.versionData);GH.EpicController.setEpicData(s.epicData);a.setData(s);a.setCanManageSprints(s.canManageSprints);a.setCanCreateIssue(s.canCreateIssue);a.setSupportsPages(s.supportsPages);c.validateCurrentSelection();GH.VersionController.validateSelectedVersion();GH.EpicController.validateSelectedEpic();GH.VersionView.show();GH.EpicView.show();i.updateVersionFiltering(true);i.updateEpicFiltering(true);m.draw();GH.VersionController.registerVersionsCount();GH.EpicController.registerEpicsCount(s.epicData);n.searchFilter.clearLastSearch();n.searchFilter.searchQuery();q.hideLoadingBacklog();GH.RapidBoard.ViewController.updateContentContainer();l.updateDetailsView(c.getSelectedIssueKey());m.updateIssueSelectionState(true)};i.updateUIAfterSelectionChange=function(s){m.updateIssueSelectionState(s.doScroll);l.updateDetailsView(c.getSelectedIssueKey(),s.openDetailsView)};i.updateEpicData=function(){if(!i.visible){return(new e.Deferred()).resolve()}var s={rapidViewId:i.rapidViewData.id};return GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:s},"epics").done(function(t){if(!i.visible){return}GH.log("loaded data for epics",GH.Logger.Contexts.ajax);i.setEpicData(t)})};i.setEpicData=function(s){GH.EpicController.setEpicData(s);GH.EpicView.updateEpics()};i.updateVersionData=function(){if(!i.visible){return(new e.Deferred()).resolve()}var s={rapidViewId:i.rapidViewData.id,activeQuickFilters:n.quickfilters.getActiveQuickFilters()};return GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:s},"versions").done(function(t){if(!i.visible){return}GH.log("loaded data for versions",GH.Logger.Contexts.ajax);i.setVersionData(t.versionData)})};i.setVersionData=function(s){GH.VersionController.setVersions(s);GH.VersionController.validateSelectedVersion();GH.VersionView.updateView()};i.moveIssues=function(t,w,s,v){var u=a.moveIssuesNew(t,w,s,v);m.redrawChangedModels(u)};i.revertStatistics=function(){o.updateSprintStatistics();d.updateBacklogHeader()};i.handleSprintStarted=function(){c.clearSelection();GH.RapidBoard.ViewController.setMode("work");GH.RapidBoard.State.pushState()};i.handleIssueForEpicCreated=function(s,t){if(!i.visible){return}if(r.isUndefined(i.handleIssueForEpicCreated.deferred)){i.handleIssueForEpicCreated.deferred=new e.Deferred();setTimeout(function(){i.loadData().then(function(){i.handleIssueForEpicCreated.deferred.resolve();i.handleIssueForEpicCreated.deferred=undefined},function(){i.handleIssueForEpicCreated.deferred.reject()})},0)}return i.handleIssueForEpicCreated.deferred};i.registerIssueCreatedCallback=function(t,s){i.issueCreatedCallbacks[t]=s};i.unregisterIssueCreatedCallback=function(s){delete i.issueCreatedCallbacks[s]};i.handleIssueCreated=function(t,u){if(!i.visible){return}var s=r.clone(i.issueCreatedCallbacks);setTimeout(function(){i.handleIssueCreatedImpl(u,s)},0)};i.handleIssueCreatedImpl=function(u,s){if(u.isSubtask){return i.subtasksCreated(u)}function t(v){var w=r.map(v,function(y){return{issueKey:y.key,issueId:y.id,issueType:y.fields.issuetype.id}});var x=GH.EpicConfig.getEpicIssueTypeId();return r.reduce(w,function(z,y){if(y.issueType==x){z.epics.push(y)}else{z.issues.push(y)}return z},{issues:[],epics:[]})}return i.getIssueDetails(u.issues,"issuetype").done(function(v){var w=t(v.issues);i.issuesAndEpicsCreated(w.issues,w.epics,s)})};i.getIssueDetails=function(u,s){var t=r.pluck(u,"issueKey");return i.getIssueDetailsByKeys(t,s)};i.getIssueDetailsByKeys=function(u,s){var v=u.join(",");var t="issueKey in ("+v+")";return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl("/rest/api/2/search"),data:{jql:t,fields:s}},"getissues")};i.issuesAndEpicsCreated=function(t,x,w){if(r.isEmpty(t)&&r.isEmpty(x)){return}if(r.isEmpty(t)){return i.reloadAndShowCreatedEpics(x)}var u=r.map(w,function(y){if(r.isFunction(y)){return y(t,x)}return false});var v=r.filter(u,function(y){return y&&((y instanceof e.Deferred)||r.isFunction(y.promise))});var s=r.map(v,function(z){var y=e.Deferred();if(z.always){z.always(y.resolve)}else{z.then(y.resolve,y.resolve)}return y});return e.when.apply(e,s).then(function(){i.reloadAndSelectCreatedIssues(t)})};i.subtasksCreated=function(s){GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage(s);l.reloadDetailView(GH.DetailsView.TAB_SUBTASKS);return i.loadData()};i.reloadAndSelectCreatedIssues=function(s){return i.loadData().done(function(){var t=r.last(s);var u=a.isIssueVisible(t.issueKey);if(u){c.selectIssue(t.issueKey)}else{GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:s})}})};i.reloadAndShowCreatedEpics=function(s){i.updateEpicData().done(function(){i._showCreatedEpicsMessage(s);GH.EpicView.renderNewEpics(s)})};i._showCreatedEpicsMessage=function(v){var u=r.last(v);var t=GH.EpicController.getEpicModel().getEpicList();var s=t.isIssueVisible(u.issueKey);GH.RapidBoard.QuickCreate.showCreatedEpicsMessage({issues:v},s);if(s){GH.EpicView.scrollToBottom()}};i.handleIssueUpdated=function(t,w){if(!i.visible){return}GH.log(t.type+" from source "+w.source+" handled","BacklogController");var B=parseInt(w.issueId,10);var x=a.findModelWithIssue(B);var A=false;var y=false;var v=false;var C=false;var u;var s=false;if(w.source==="quickEdit"){A=true;s=true;if(!x&&a.trackingStatistic.isEnabled){C=true}}else{s=(w.fieldId===i.rapidViewConfig.estimationStatistic.fieldId)}if(s&&x){u=x.getIssueList().getIssueDataForId(B);if(u&&u.epic){y=true}if(u&&u.fixVersions&&u.fixVersions.length>0){v=true}}if(w.fieldChanges){var z=w.fieldChanges[p.getSprintFieldId()];if(z&&z.original!=z.updated){C=true}}if(C){i.loadData()}else{i.reloadSingleIssue(w.issueId);if(A){l.reloadDetailView()}if(y){i.updateEpicData()}if(v){i.updateVersionData()}}};i.handleIssuesRemovedFromSprint=function(s,t){if(!i.visible){return}i.loadData()};i.reloadSingleIssue=function(t){var s={rapidViewId:i.rapidViewData.id,issueId:t};GH.Ajax.get({url:"/xboard/plan/backlog/issue.json",data:s},"updateSingleIssue."+t).done(function(u){GH.log("loaded data for single issue with id "+t,GH.Logger.Contexts.ajax);i.updateIssues(u)})};i.updateIssues=function(t){if(!r.isArray(t)){t=[t]}var v=[];var u=false;r.each(t,function(w){var x=a.findModelWithIssue(w.key);if(!x){return}if(w.typeId===GH.EpicConfig.getEpicIssueTypeId()){x.getIssueList().removeIssues(w.key);u=true}else{x.getIssueList().updateIssue(w)}v.push(x)});a.updateFiltering();if(u){i.updateEpicData();c.validateCurrentSelection();var s=c.getSelectedIssueKey();GH.DetailsView.setSelectedIssueKey(s);l.reloadDetailView()}m.redrawChangedModels(v)};i.removeIssues=function(t,s){t.getIssueList().removeIssues(s);m.redrawChangedModel(t)};i.isFiltersActive=function(){return !r.isEmpty(n.quickfilters.getActiveQuickFilters())};i.executeSearch=function(t){GH.Logger.timeStart("BacklogController.executeSearch regex");if(r.isNull(t)){i.lastExecutedSearchFilter=null}else{var s=" ";i.lastExecutedSearchFilter=function(v){return t.test(v.key+s+v.summary+s+v.typeName)}}k.setInstantFilter(i.lastExecutedSearchFilter);var u=a.updateFiltering();GH.Logger.timeStop("BacklogController.executeSearch regex");GH.Logger.timeStart("BacklogController.executeSearch ui update");if(u){m.updateHiddenIssues()}GH.Logger.timeStop("BacklogController.executeSearch ui update");return false};i.clearFilters=function(){var t=n.quickfilters.clearFilters();n.searchFilter.clearSearchBox();GH.VersionController.setFilteredVersionId(null);GH.EpicController.setFilteredEpicKey(null);GH.EpicController.clearVersionFiltering();if(t){k.clearAllFilters();i.loadData().done(function(){GH.RapidBoard.State.pushState()})}else{var u=k.clearAllFilters();if(u){GH.EpicView.deselectAllEpics();GH.VersionView.deselectAllVersions();var s=a.updateFiltering();if(s){m.updateHiddenIssues()}GH.RapidBoard.State.pushState()}}};i.updateEpicFiltering=function(t){var s=GH.EpicController.getFilteredEpicKey();k.setEpicFilter(s);var u=a.updateFiltering();if(u&&!t){m.updateHiddenIssues()}};i.updateVersionFiltering=function(t){var s=GH.VersionController.getFilteredVersionId();k.setVersionFilter(s);var u=a.updateFiltering();if(u&&!t){m.updateHiddenIssues()}GH.EpicController.applyVersionFiltering()};i.calculateIssueRenderData=function(){var t=c.getSelectedIssueKeys();var u={};r.each(t,function(w){u[w]=true});var s=c.getSelectedIssueKey();var v=a.getHiddenBySearchIssues();return{selectedIssueKeys:u,mainSelectedIssue:s,hiddenIssues:v}};i.extractPrintableIssuesFromAllSprints=function(){var s=[];r.each(a.getSprintModels(),function(t){var v=t.getSprintData();var u=j(t.getIssueList().getAllIssues(),t.getIssueList().getVisibleRankables(),a.getHiddenBySearchIssues());if(!r.isEmpty(u)){s.push({sprintId:v.id,sprintName:v.name,issues:u})}});return s};function j(s,u,v){var t=[];r.each(u,function(w){if(!v[w]){t.push(s[w])}});return t}i.getPrintableIssuesFromPlanBacklog=function(){var s=a.getBacklogModel2().getIssueList();return j(s.getAllIssues(),s.getVisibleRankables(),a.getHiddenBySearchIssues())};i.getEpicMap=function(){return GH.EpicController.getEpicModel().getEpicList().getAllIssues()};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogStatistics.js' */
define("jira-agile/rapid/ui/plan/backlog-statistics",["require"],function(b){var a=b("jira-agile/rapid/ui/plan/backlog-model");var c={};c.ignoredStatisticTypes={issueCount:true,none:true};c.getIssueListEstimateStatistics=function(e){var h=c._calculateSprintModelStatistics(e);var i=a.estimationStatistic;var f={};f.shown=(i&&i.isEnabled&&!c.ignoredStatisticTypes[i.typeId])||false;if(f.shown){f.name=i?i.name:"";f.total={raw:h.estimate.total,formatted:c.formatStatisticForRendering(i,h.estimate.total)};f.visible={raw:h.estimate.visible,formatted:c.formatStatisticForRendering(i,h.estimate.visible)}}var g=a.trackingStatistic;var d={};d.shown=(g&&g.isEnabled&&!c.ignoredStatisticTypes[i.typeId]&&((h.estimate.total!=h.tracking.total)||(h.estimate.visible!=h.tracking.visible)))||false;if(d.shown){d.name=g?g.name:"";d.total={raw:h.tracking.total,formatted:c.formatStatisticForRendering(g,h.tracking.total)};d.visible={raw:h.tracking.visible,formatted:c.formatStatisticForRendering(g,h.tracking.visible)}}return{estimate:f,tracking:d}};c._calculateSprintModelStatistics=function(h){var f=h.getAllIssues();var k=0,i=0,d=0,l=0,g=0,j=0;var e;_.each(f,function(m){var n=h.isIssueVisible(m.key);if(!_.isUndefined(m.estimateStatistic)&&!_.isUndefined(m.estimateStatistic.statFieldValue.value)){e=m.estimateStatistic.statFieldValue.value;k+=e;if(n){i+=e}}if(!_.isUndefined(m.trackingStatistic)&&!_.isUndefined(m.trackingStatistic.statFieldValue.value)){e=m.trackingStatistic.statFieldValue.value;d+=e;if(n){l+=e}}g++;if(n){j++}});return{estimate:{total:k,visible:i},tracking:{total:d,visible:l},issueCount:{total:g,visible:j}}};c.formatStatisticForRendering=function(d,e){if(d.renderer=="duration"){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e)}else{return GH.NumberFormat.format(e)}};c.getAllIssuesBeforeIndex=function(e,d,g,j){var h=[];j=j||function(i){return !c._isRankableId(d[i])};for(var f=g-1;f>=0&&j(f);f--){h=[d[f]].concat(h)}return c._mapIssueKeysToIssues(e,h)};c._isRankableId=function(d){return _.isNumber(d)};c._mapIssueKeysToIssues=function(e,d){var f=_.map(d,function(g){return e[g]});return _.filter(f,function(g){return !_.isUndefined(g)})};c.getIssueListStats=function(e,h,k){var f=e.getAllIssues();var i=_.keys(f).length;var g=e.getNumVisibleIssues();var j=i>0;var d;if(h){if(k){d=c.getActiveSprintEmptyMessage(!j)}else{d=c.getFutureSprintEmptyMessage(!j)}}else{d=c.getBacklogEmptyMessage(!j)}return{totalCount:i,visibleCount:g,allVisible:i===g,noneVisible:g===0,hasIssues:j,empty:!j,emptyMessage:d}};c.getBacklogEmptyMessage=function(d){if(d){return "There are currently no issues in the backlog"}else{return "All issues in the backlog are currently filtered"}};c.getFutureSprintEmptyMessage=function(d){if(d){return "Plan a sprint by dragging the sprint footer down below some issues, or by dragging issues here"}else{return "All issues in this sprint are currently filtered"}};c.getActiveSprintEmptyMessage=function(d){if(d){return "This sprint contains no issues"}else{return "All issues in this sprint are currently filtered"}};c.calculateSprintProgress=function(d,f,e){var i=c._getTodoInProgressDoneMapping(f);var h=[{nameKey:"gh.boards.notstarted",name:"Not Started",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.inprog",name:"In Progress",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.done",name:"Done",title:"",total:{value:0,text:"0"}}];_.each(d.getAllIssues(),function(k){var l=i[k.statusId];if(_.isUndefined(l)){return}if(!k.estimateStatistic||!k.estimateStatistic.statFieldValue||!k.estimateStatistic.statFieldValue.value){return}h[l].total.value+=k.estimateStatistic.statFieldValue.value});var g=_.reduce(h,function(k,l){return k+l.total.value},0);if(!g){_.each(h,function(k){k.total.text=""});return h}var j=c.formatStatisticForRendering(e,g);_.each(h,function(k){k.total.text=c.formatStatisticForRendering(e,k.total.value);k.title=GH.tpl.sprintview.renderProgressIndicatorTitle({indicator:k,allIndicatorsTotalText:j,statLabel:e.name})});return h};c._getTodoInProgressDoneMapping=function(f){var j={};var h=function(i){j[i]=k};for(var e=0;e<f.length;e++){var g=f[e];var d=g.statusIds;var k;if(e===0){k=0}else{if(e===f.length-1){k=2}else{k=1}}_.each(d,h)}return j};c.splitIssuesIntoNotDoneAndDone=function(e,g){var h=c._getTodoInProgressDoneMapping(g);var f=[];var d=[];_.each(e,function(i){var j=h[i.statusId];if(j==2){d.push(i)}else{f.push(i)}});return{notDone:f,done:d}};c.getAssignedWorkStats=function(d){function h(l,k){return{assignee:l,assigneeName:k,totalEstimate:0,issues:[]}}function j(k){k.totalEstimateText=c.formatStatisticForRendering(a.estimationStatistic,k.totalEstimate)}var f=d.getVisibleIssues();var e=_.reduce(f,function(m,k){var l=k.assignee;var n;if(!l){n=m.unassigned}else{if(!m.assignees[l]){m.assignees[l]=h(l,k.assigneeName)}n=m.assignees[l]}n.issues.push(k);m.all.issues.push(k);var o=k.estimateStatistic&&k.estimateStatistic.statFieldValue&&k.estimateStatistic.statFieldValue.value;if(o){n.totalEstimate+=o;m.all.totalEstimate+=o}return m},{unassigned:h(null,null),assignees:{},all:h(null,null)});var g=_.toArray(e.assignees).sort(function(l,k){return k.totalEstimate-l.totalEstimate||l.assigneeName.localeCompare(k.assigneeName)});var i=a.estimationStatistic;if(!c.ignoredStatisticTypes[i.typeId]){_.each(g,j);j(e.unassigned);j(e.all)}return{unassigned:e.unassigned,assigned:g,all:e.all}};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogController.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-controller",["require"],function(b){var a=b("jira-agile/rapid/ui/plan/sprint-backlog-view");var c={};c.init=function(){a.init()};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-view",["require"],function(b){var e=b("jquery");var k=b("jira-agile/rapid/global-events");var i=b("jira-agile/rapid/ui/plan/sprint-controller");var j=b("jira-agile/rapid/ui/plan/backlog-model");var d=b("jira-agile/rapid/ui/plan/backlog-statistics");var f;k.on("pre-initialization",function(){f=b("jira-agile/rapid/ui/plan/backlog-controller")});var g={};g.containerSelector=".ghx-backlog-group";g.init=function(){e(document).on("click",".js-add-sprint",i.addSprint)};g.renderBacklog=function(m){var l=c(m);var n=e(".ghx-backlog-group");n.append(e(l));a()};g.updateBacklog=function(){var m=f.calculateIssueRenderData();var l=c(m);var n=e(".ghx-backlog-group");n.empty().append(e(l));a()};g.updateBacklogHeader=function(){e(".js-marker-backlog-header").replaceWith(h());a()};function c(n){var o=j.getBacklogModel2();var l=o.getIssueList();var m=d.getIssueListStats(l,false);var p={issueKeys:l.getVisibleRankables(),issues:l.getAllIssues(),issueListStats:m,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:n,statLabel:j.estimationStatistic.name,isRankable:j.isRankable(),canManageSprints:j.canManageSprints(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()};return GH.tpl.sprintbacklogview.renderBacklogIssues(p)}function h(){var n=j.getBacklogModel2();var l=n.getIssueList();var m=d.getIssueListStats(l,false);var o={issueListStats:m,isRankable:j.isRankable(),canManageSprints:j.canManageSprints()};return GH.tpl.sprintbacklogview.renderBacklogHeader(o)}function a(){e(".js-add-sprint").tooltip({html:true,title:"data-tooltip"})}return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.soy' */
// This file was automatically generated from SprintBacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintbacklogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintbacklogview == 'undefined') { GH.tpl.sprintbacklogview = {}; }


GH.tpl.sprintbacklogview.renderBacklogIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog-group"/><div class="ghx-backlog-container ghx-everything-else">' + GH.tpl.sprintbacklogview.renderBacklogHeader(opt_data) + '<div class="js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '">' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogIssues.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogIssues';
}


GH.tpl.sprintbacklogview.renderBacklogHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-marker-backlog-header"><div class="ghx-name">' + soy.$$escapeHtml("Backlog") + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + '<div class="ghx-controls aui-group"><div class="aui-item"><button class="js-add-sprint aui-button ' + ((! opt_data.isRankable || ! opt_data.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.isRankable || ! opt_data.canManageSprints) ? ((! opt_data.isRankable) ? 'data-tooltip="' + soy.$$escapeHtml("The board must be ordered by Rank in order to add a sprint") + '"' : 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml("Create Sprint") + '</button></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogHeader.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListView.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-view",["require"],function(b){var e=b("jquery");var a=b("underscore");var d=b("jira-agile/rapid/ui/plan/plan-drag-and-drop");var c={};c.findPreviousVisibleIssueElementInList=function(g){var f=a.find(g.prevAll(),function(i){var h=e(i);return h.is(".js-issue")&&d._findShownElement(h)});f=e(f);if(f.length>0){return f}else{return null}};c.findPrevRankableElement=function(g){var f=a.find(g.prevAll(),function(i){var h=e(i);return h.is(".ghx-marker, .js-issue")&&d._findShownElement(h)});f=e(f);if(f.length>0){return f}f=a.last(g.parent().prevAll().eq(0).children());f=e(f);return f};c.findNextRankableElement=function(g){var f=a.find(g.nextAll(),function(i){var h=e(i);return h.is(".ghx-marker, .js-issue")&&d._findShownElement(h)});f=e(f);if(f.length>0){return f}f=a.first(g.parent().nextAll().eq(0).children().filter(".ghx-marker, .js-issue"));f=e(f);return f};c.getIssueKey=function(f){return f.closest(".js-issue").data("issue-key")};c.getRankableId=function(g){if(!g){return false}var f=g.closest(".js-issue");if(f.length>0){return f.attr("data-issue-key")}return false};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListView.soy' */
// This file was automatically generated from PlanIssueListView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planissuelist.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planissuelist == 'undefined') { GH.tpl.planissuelist = {}; }


GH.tpl.planissuelist.renderIssueList = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeyList3 = opt_data.issueKeys;
  var issueKeyListLen3 = issueKeyList3.length;
  for (var issueKeyIndex3 = 0; issueKeyIndex3 < issueKeyListLen3; issueKeyIndex3++) {
    var issueKeyData3 = issueKeyList3[issueKeyIndex3];
    output += GH.tpl.planissuelist.renderIssue({issue: opt_data.issues[issueKeyData3], epic: opt_data.issues[issueKeyData3].epic ? opt_data.epics[opt_data.issues[issueKeyData3].epic] : null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueList.soyTemplateName = 'GH.tpl.planissuelist.renderIssueList';
}


GH.tpl.planissuelist.renderIssue = function(opt_data, opt_ignored) {
  var output = '';
  var hasVersionOrEpic__soy15 = opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 || opt_data.epic;
  output += '<div class=" js-issue js-sortable js-parent-drag ghx-issue-compact' + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + ((opt_data.hiddenIssues[opt_data.issue.key]) ? ' ghx-filtered' : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" ><div class="ghx-issue-content"><div class="ghx-row">' + ((opt_data.issue.typeUrl) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + '<div class="ghx-flags">' + ((opt_data.issue.flagged) ? '<span class="ghx-flag"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag" title="' + soy.$$escapeHtml("Flagged") + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '') + '</div><div class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" class="js-key-link">' + soy.$$escapeHtml(opt_data.issue.key) + '</a></div><div class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div>';
  if (hasVersionOrEpic__soy15 || ! opt_data.issue.extraFields) {
    output += '<div class="ghx-end ghx-row">';
    var extraClass__soy77 = opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 && opt_data.epic && opt_data.epic.epicLabel ? 'ghx-label-double' : 'ghx-label-single';
    if (opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0) {
      var extraClasses__soy80 = '[\'ghx-label-0\', \'ghx-label\', $extraClass]';
      var extraAttributes__soy82 = '[ \'title\': $issue.fixVersionsUI.formattedVersions ]';
      if (opt_data.issue.fixVersionsUI.versions.length > 1) {
        var text__soy86 = soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml("Versions");
        output += aui.labels.label({extraClasses: extraClasses__soy80, text: text__soy86, extraAttributes: extraAttributes__soy82}) + ' ';
      } else {
        output += aui.labels.label({extraClasses: extraClasses__soy80, text: opt_data.issue.fixVersionsUI.versions[0].name, extraAttributes: extraAttributes__soy82}) + ' ';
      }
    }
    output += ((opt_data.showEpic && opt_data.epic && opt_data.epic.epicLabel) ? GH.tpl.field.epicLink.renderEpicLinkFromIssue({epic: opt_data.epic, extraClasses: 'ghx-label ' + extraClass__soy77}) + ' ' : '') + '<span class="ghx-end">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span></div>';
  }
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-plan-extra-fields ghx-plan-extra-fields-' + soy.$$escapeHtml(opt_data.issue.extraFields.length) + ' ghx-row">';
    var extraFieldList117 = opt_data.issue.extraFields;
    var extraFieldListLen117 = extraFieldList117.length;
    for (var extraFieldIndex117 = 0; extraFieldIndex117 < extraFieldListLen117; extraFieldIndex117++) {
      var extraFieldData117 = extraFieldList117[extraFieldIndex117];
      output += ((! (extraFieldIndex117 == 0)) ? '<span class="ghx-extra-field-seperator">&middot;</span>' : '') + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData117});
    }
    output += ((! hasVersionOrEpic__soy15) ? '<span class="ghx-end ghx-extra-field-estimate">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span>' : '') + '</div>';
  }
  output += '</div>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssue.soyTemplateName = 'GH.tpl.planissuelist.renderIssue';
}


GH.tpl.planissuelist.renderAvatarAndEstimate = function(opt_data, opt_ignored) {
  return '' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + GH.tpl.planissuelist.renderStatisticsValue({stat: opt_data.issue.estimateStatistic, label: opt_data.statLabel});
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderAvatarAndEstimate.soyTemplateName = 'GH.tpl.planissuelist.renderAvatarAndEstimate';
}


GH.tpl.planissuelist.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    var badgetext__soy154 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : ' ');
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy154, extraAttributes: {title: opt_data.label}, extraClasses: ['ghx-statistic-badge']});
  } else {
    output += aui.badges.badge({text: '', extraClasses: ['ghx-spacer', 'ghx-statistic-badge']});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderStatisticsValue.soyTemplateName = 'GH.tpl.planissuelist.renderStatisticsValue';
}


GH.tpl.planissuelist.renderIssueCount = function(opt_data, opt_ignored) {
  return '<div class="ghx-issue-count">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}",opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format("{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible",opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount)) + '<a class="ghx-reset js-clear-all-filters" title="' + soy.$$escapeHtml("Issues are currently filtered. Click to clear all filters on this board.") + '">' + soy.$$escapeHtml("Clear all filters") + '</a>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderIssueCount';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListFiltering.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-filtering",["require"],function(b){var a=b("underscore");var c={};c.EPIC_FILTER_KEY_NONE="none";c.VERSION_FILTER_ID_NONE="none";c.allFilters={};c.isNoneEpicFilterKey=function(d){return d===c.EPIC_FILTER_KEY_NONE};c.isNoneVersionFilterId=function(d){return d===c.VERSION_FILTER_ID_NONE};c.setFilter=function(d,e){if(!e){delete c.allFilters[d]}else{c.allFilters[d]=e}};c.clearAllFilters=function(){var d=!a.isEmpty(a.keys(c.allFilters));c.allFilters={};return d};c._getCompoundFilter=function(){return function(d){var e=a.any(c.allFilters,function(f){return !f(d)});return !e}};c.setEpicFilter=function(e){var d=null;if(c.isNoneEpicFilterKey(e)){d=function(f){return a.isEmpty(f.epic)}}else{if(c.isEpicIssueSelectable(e)){d=function(f){return f.epic===e}}}return c.setFilter("epics",d)};c.isEpicIssueSelectable=function(e){var d=GH.EpicController.getEpicModel().getEpicList();return(d.isIssueValid(e)&&d.isIssueVisible(e))};c.setVersionFilter=function(d){var e=null;if(c.isNoneVersionFilterId(d)){e=function(f){return a.isEmpty(f.fixVersions)}}else{if(c.isVersionSelectable(d)){e=function(f){return a.some(f.fixVersions,function(g){return g===parseInt(d,10)})}}}return c.setFilter("versions",e)};c.isVersionSelectable=function(d){return d!=null};c.setInstantFilter=function(d){c.setFilter("instant",d)};c.applyToIssueLists=function(d){var e=c._getCompoundFilter();var f=false;a.each(d,function(h){var g=h.applySearchFilter(e);f=f||g});return f};c.applyToIssueList=function(d){c.applyToIssueLists([d])};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.js' */
GH.VersionView={};GH.VersionView.dropdowns=[];GH.VersionView.datePickerFormat=undefined;GH.VersionView.setDatePickerFormat=function(a){GH.VersionView.datePickerFormat=a};GH.VersionView.init=function(){GH.VersionView.initializeInlineEdits()};GH.VersionView.getContainer=function(a){if(a||_.isUndefined(GH.VersionView.container)){GH.VersionView.container=AJS.$("#ghx-version-column")}return GH.VersionView.container};GH.VersionView.show=function(){var a=GH.VersionController.getVersionModel();var b=GH.VersionView.getContainer(true);b.html(GH.tpl.versionview.renderSkeleton({canCreateVersion:a.canUserCreateVersion()}));var c=b.find(".ghx-classification-scrollview");c.delegate(".ghx-classification-item","click",function(d){if(AJS.$(d.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length>0){return}GH.VersionView.toggleFiltering(AJS.$(this))});c.delegate(".js-version-details-toggle","click",function(d){GH.VersionView.toggleVersionDisplay(AJS.$(this));return false});c.delegate(".js-version-name","click",function(d){d.preventDefault()});GH.VersionQuickCreate.setAccessibleProjects(a.projects);GH.VersionView.renderVersions();GH.VersionQuickCreate.registerCreateVersionDialog()};GH.VersionView.updateView=function(){GH.VersionView.renderVersions();GH.PlanDragAndDrop.initializeClassificationDnD()};GH.VersionView.renderVersions=function(){var d=GH.VersionController.getVersionModel();if(_.isUndefined(d)||!d.isValid()){return}var a={},c=GH.VersionController.getFilteredVersionId(),b=d.getUnreleasedVersionList();_.each(b,function(e){a[e.id]=GH.VersionView.getTwixieState(e.id)=="open";e.versionStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.doneEstimate);e.versionStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.totalEstimate);e.versionStats.isIssueCountStatistic=GH.BacklogModel.estimationStatistic.typeId==="issueCount";e.versionStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name});GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderVersions({versions:b,isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(c),isAllSelected:!c,selectedVersionId:c,isVersionExpandedById:a,canEditVersions:d.canUserCreateVersion(),showProjects:d.hasMultiProjects(),isLinkToDevStatusVersionAvailable:d.isLinkToDevStatusVersionAvailable()}));AJS.$(".js-version-actions").each(function(){var e=this;var h="#"+AJS.$(e).attr("id").replace(/^dd-trigger-/,"dd-content-");var f=AJS.$(h);var g=AJS.Dropdown.create({trigger:e,content:f,alignment:AJS.LEFT});AJS.$(g).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()});GH.VersionView.dropdowns.push(g[0])})};GH.VersionView.toggleFiltering=function(a){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();GH.VersionView.deselectAllVersions();var b=a.attr("data-version-id");var c;if(GH.VersionController.getFilteredVersionId()===b){c=null}else{c=b;AJS.$("#ghx-version-column").find(".ghx-classification-all").removeClass("ghx-selected");a.addClass("ghx-selected")}GH.VersionController.setFilteredVersionId(c);GH.RapidBoard.State.pushState();GH.BacklogController.updateVersionFiltering(false)};GH.VersionView.deselectAllVersions=function(){var a=AJS.$("#ghx-version-column");var b=a.find(".ghx-classification-item");b.removeClass("ghx-selected");a.find(".ghx-classification-all").addClass("ghx-selected")};GH.VersionView.setTwixieState=function(b,c){var a="versionTwix-"+b;GH.BoardState.setPerViewValue(a,c)};GH.VersionView.getTwixieState=function(b){var a="versionTwix-"+b;return GH.BoardState.getPerViewValue(a,"closed")};GH.VersionView.toggleVersionDisplay=function(a){var b=a.parents(".ghx-classification-item");GH.VersionView.toggleVersionDisplayByElementWithAnimation(b)};GH.VersionView.toggleVersionDisplayByElement=function(b){var a=b.attr("data-version-id");if(b.hasClass("ghx-open")){b.removeClass("ghx-open").addClass("ghx-closed");GH.VersionView.setTwixieState(a,"closed")}else{if(b.hasClass("ghx-closed")){b.removeClass("ghx-closed").addClass("ghx-open");GH.VersionView.setTwixieState(a,"open")}}};GH.VersionView.toggleVersionDisplayByElementWithAnimation=function(c){var a=c.attr("data-version-id");var b=c.find(".ghx-expanded");if(c.hasClass("ghx-open")){GH.RapidBoard.Animation.animateHeight(b,195,0).done(function(){c.removeClass("ghx-open").addClass("ghx-closed");GH.VersionView.setTwixieState(a,"closed")})}else{if(c.hasClass("ghx-closed")){c.removeClass("ghx-closed").addClass("ghx-open");GH.RapidBoard.Animation.animateHeight(b,0,195).done(function(){GH.VersionView.setTwixieState(a,"open")})}}};GH.VersionView.hideDropdown=function(){_.each(GH.VersionView.dropdowns,function(a){a.hide()})};GH.VersionView.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-version-name",{renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,getViewElement:function(e){var d=AJS.$(this).parents(".js-version-actions-list").attr("data-version-id");return AJS.$('.ghx-classification-item[data-version-id="'+d+'"]').find(".js-edit-versionName-trigger")},getData:function(d){var e=GH.RapidBoard.Util.InlineEditable.defaultFieldData(d);e.versionId=d.parents(".ghx-classification-item").attr("data-version-id");GH.RapidBoard.Util.InlineEditable.submitActiveEdits();AJS.$(d).closest(".ghx-header").addClass("ghx-editing-name");e.maxLength=30;return e},validate:function(d){var e=d.editElement.val();if(!GH.Validation.notBlank(d.editElement,"Version Name is required")){return false}d.newValue=e;return true},save:function(d){GH.VersionView.updateVersion(d.versionId,{name:d.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(d)})},postEdit:function(d){AJS.$(d.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}});var a={getData:function(d){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var e=GH.RapidBoard.Util.InlineEditable.defaultFieldData(d);e.versionId=d.parents(".ghx-classification-item").attr("data-version-id");return e}};GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-description-trigger",_.extend({},a,{save:function(d){GH.VersionView.updateVersion(d.versionId,{description:d.newValue});GH.RapidBoard.Util.InlineEditable.updateView(d)}}));var b=new Calendar();var c=_.extend({},a,{renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:function(d){GH.RapidBoard.Util.InlineEditable.datePickerActivate(d,{ifFormat:GH.VersionView.datePickerFormat,showsTime:false})},validate:function(d){d.newValue=d.editElement.find("input").val();return true},postEdit:function(d){AJS.$(d.viewElement).closest(".js-version-date").siblings(".ghx-error").remove()}});GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-startDateFormatted-trigger",_.extend({},c,{save:function(d){GH.VersionView.updateVersion(d.versionId,{startDateFormatted:d.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(d)})}}));GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-releaseDateFormatted-trigger",_.extend({},c,{save:function(d){GH.VersionView.updateVersion(d.versionId,{releaseDateFormatted:d.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(d)})}}))};GH.VersionView.updateVersion=function(b,a){var c='.ghx-classification-item[data-version-id="'+b+'"]';return GH.VersionController.updateVersion(b,a,{name:c+" .js-version-name",description:c+" .js-version-description",startDate:c+" .js-version-start-date",releaseDate:c+" .js-version-release-date"},function(){AJS.$(c+" .ghx-error").empty()})};GH.VersionView.renderNewVersions=function(a){var b=AJS.$("#ghx-version-column");_.each(a,function(c){var d=b.find('.ghx-classification-item[data-version-id="'+c.id+'"]');if(!d.hasClass("ghx-open")){GH.VersionView.toggleVersionDisplayByElement(d)}GH.RapidBoard.Animation.animateHeight(d,0,251,GH.RapidBoard.Animation.LONG_DURATION)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.soy' */
// This file was automatically generated from VersionView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionview == 'undefined') { GH.tpl.versionview = {}; }


GH.tpl.versionview.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateVersion) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-version'], text: "Create version"}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-release-toggle" title="' + soy.$$escapeHtml("Hide versions panel") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml("Versions") + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderSkeleton.soyTemplateName = 'GH.tpl.versionview.renderSkeleton';
}


GH.tpl.versionview.renderVersions = function(opt_data, opt_ignored) {
  var output = GH.tpl.versionview.renderAllVersions(opt_data) + '<div class="ghx-classification-cards">';
  var versionList19 = opt_data.versions;
  var versionListLen19 = versionList19.length;
  for (var versionIndex19 = 0; versionIndex19 < versionListLen19; versionIndex19++) {
    var versionData19 = versionList19[versionIndex19];
    output += GH.tpl.versionview.renderVersion({version: versionData19, isSelected: opt_data.selectedVersionId == versionData19.id, isVersionExpanded: opt_data.isVersionExpandedById[versionData19.id], canEditVersions: opt_data.canEditVersions, showProjects: opt_data.showProjects, isLinkToDevStatusVersionAvailable: opt_data.isLinkToDevStatusVersionAvailable});
  }
  output += '</div>' + ((opt_data.versions.length > 0) ? GH.tpl.versionview.renderVersionPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersions.soyTemplateName = 'GH.tpl.versionview.renderVersions';
}


GH.tpl.versionview.renderVersion = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item' + ((opt_data.isVersionExpanded) ? ' ghx-open' : ' ghx-closed') + ((! opt_data.canEditVersions) ? ' ghx-read-only' : '') + ((opt_data.isSelected) ? ' ghx-selected' : '') + '" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><div class="ghx-inner"><div class="ghx-expander js-version-details-toggle" title="' + soy.$$escapeHtml("Hide/show version information") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name">' + ((opt_data.version.project && opt_data.showProjects) ? '<span class="ghx-project-key" title="' + soy.$$escapeHtml(opt_data.version.project.name) + '">' + soy.$$escapeHtml(opt_data.version.project.key) + '</span>' : '') + '<span class="js-version-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'versionName', fieldValue: opt_data.version.name, displayValue: opt_data.version.name}) + '</span>' + ((opt_data.canEditVersions) ? '<span id="dd-trigger-' + soy.$$escapeHtml(opt_data.version.id) + '" class="ghx-swatch js-version-actions"></span>' : '') + '</h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.version.id) + '" class="aui-list ghx-href-fix-list js-version-actions-list" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><ul class="aui-list-section aui-last">' + ((opt_data.canEditVersions) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-version-name">' + soy.$$escapeHtml("Edit name") + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary js-version-description">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'description', fieldValue: opt_data.version.description, displayValue: opt_data.version.description, maxDisplayLength: 200, defaultValue: "No description"}) + '</div>' + ((opt_data.version.project && opt_data.isLinkToDevStatusVersionAvailable) ? '<div><a class="js-version-details-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.version.project.key) + '/fixforversion/' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml("Details") + '</a></div><hr />' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Start Date") + '</div><div class="aui-item ghx-version-date js-version-date js-version-start-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'startDateFormatted', fieldValue: opt_data.version.startDateFormatted, displayValue: opt_data.version.startDateFormatted, defaultValue: "None"}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Release Date") + '</div><div class="aui-item ghx-version-date js-version-date js-version-release-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'releaseDateFormatted', fieldValue: opt_data.version.releaseDateFormatted, displayValue: opt_data.version.releaseDateFormatted, defaultValue: "None"}) + '</div></div><div class="aui-group js-version-issues-count"><div class="aui-item">' + soy.$$escapeHtml("Issues") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Completed") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.done}) + '</div></div>' + ((! opt_data.version.versionStats.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.version.versionStats.estimateStatisticName}, text: opt_data.version.versionStats.estimateTotal}) + '</div></div></div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format("{0} ({1} {2} {3} {4})",AJS.format("{0}% of {1} done",opt_data.version.versionStats.percentageCompleted,opt_data.version.versionStats.isIssueCountStatistic ? "issues" : "estimated work"),opt_data.version.versionStats.estimateDone,"of",opt_data.version.versionStats.estimateTotal,opt_data.version.versionStats.isIssueCountStatistic ? '' : opt_data.version.versionStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersion.soyTemplateName = 'GH.tpl.versionview.renderVersion';
}


GH.tpl.versionview.renderAllVersions = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml("All issues") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderAllVersions.soyTemplateName = 'GH.tpl.versionview.renderAllVersions';
}


GH.tpl.versionview.renderVersionPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-version-id="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml("Issues without versions") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersionPending.soyTemplateName = 'GH.tpl.versionview.renderVersionPending';
}


GH.tpl.versionview.renderDontAskAgain = function(opt_data, opt_ignored) {
  return '<div class="ghx-dialog-tip"><input id="ghx-dont-ask-for-confirmation" type="checkbox" name="dontask"><label for="ghx-dont-ask-for-confirmation" type="checkbox" checked=false><span class="checkbox-label">Don\u2019t show again</span></label></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderDontAskAgain.soyTemplateName = 'GH.tpl.versionview.renderDontAskAgain';
}


GH.tpl.versionview.renderQuickCreateView = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><fieldset><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Project") + '<span class="aui-icon icon-required"></span></label><select id="ghx-version-project" class="hidden">';
  var projectList169 = opt_data.projects;
  var projectListLen169 = projectList169.length;
  for (var projectIndex169 = 0; projectIndex169 < projectListLen169; projectIndex169++) {
    var projectData169 = projectList169[projectIndex169];
    output += '<option value="' + soy.$$escapeHtml(projectData169.id) + '">' + soy.$$escapeHtml(projectData169.name) + '</option>';
  }
  output += '</select><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-name">' + soy.$$escapeHtml("Name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-version-name"><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-description">' + soy.$$escapeHtml("Description") + '</label><input class="text" type="text" maxlength="130" id="ghx-version-description"></div><div class="field-group"><label for="ghx-version-start-date">' + soy.$$escapeHtml("Start Date") + '</label><input id="ghx-version-start-date" class="text medium-field" type="text"><span id="ghx-version-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit Start Date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-version-start-date-error"></span></div><div class="field-group"><label for="ghx-version-release-date">' + soy.$$escapeHtml("Release Date") + '</label><input id="ghx-version-release-date" class="text medium-field" type="text"><span id="ghx-version-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit Release Date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-version-release-date-error"></span></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderQuickCreateView.soyTemplateName = 'GH.tpl.versionview.renderQuickCreateView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionController.js' */
GH.VersionController={};GH.VersionController.model=null;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.VersionController.analytics=new a("gh.rapidboard.versions","versionCount","")})();GH.VersionController.init=function(){GH.VersionController.model=new GH.VersionsModel([]);var a=AJS.$(GH);a.bind(GH.VersionQuickCreate.EVENT_VERSION_CREATED,function(b,c){GH.VersionController.handleVersionCreated(c.createdVersion)});GH.VersionView.init()};GH.VersionController.setProjects=function(a){GH.VersionController.model.setProjects(a)};GH.VersionController.setVersions=function(a){GH.VersionController.model.updateRawData(a)};GH.VersionController.getVersionModel=function(){return GH.VersionController.model};GH.VersionController.registerVersionsCount=function(){var b=GH.VersionController.model;var a=b.getUnreleasedVersionList().length;GH.VersionController._triggerVersionCount(a)};GH.VersionController._triggerVersionCount=_.once(function(a){GH.VersionController.analytics.trigger(a)});GH.VersionController.getFilteredVersionId=function(){return GH.BoardState.getPerViewValue("planSelectedVersion",null)};GH.VersionController.setFilteredVersionId=function(a){GH.BoardState.setPerViewValue("planSelectedVersion",a)};GH.VersionController.hasFilteredVersion=function(){return GH.VersionController.getFilteredVersionId()!=null};GH.VersionController.validateSelectedVersion=function(){var c=GH.VersionController.getVersionModel();var b=GH.VersionController.getFilteredVersionId();var a=GH.PlanIssueListFiltering.isNoneVersionFilterId(b)&&!c.isEmpty()||c.containsId(b);if(!a){GH.VersionController.setFilteredVersionId(undefined);GH.RapidBoard.UrlState.replaceState()}};GH.VersionController.setIssuesVersion=function(b,a){if(!_.isEmpty(a)){_.each(a,function(d){d.fixVersions=[b]});GH.BacklogController.updateIssues(a)}var c=_.pluck(a,"key");GH.VersionController.setIssuesVersionOnServer(b,c).done(function(){GH.Notification.showSuccess("Selection successfully added to the version");if(GH.PlanController.isActive()){GH.BacklogController.updateVersionData();GH.PlanController.reloadDetailView()}}).fail(function(){if(GH.PlanController.isActive()){GH.BacklogController.loadData()}})};GH.VersionController.clearIssuesVersion=function(b){if(_.isEmpty(b)){return}var a=[];_.each(b,function(d){if(d.fixVersions&&d.fixVersions.length>0){d.fixVersions=[];a.push(d)}});if(_.isEmpty(a)){return}GH.BacklogController.updateIssues(a);var c=_.pluck(b,"key");GH.VersionController.clearIssuesVersionOnServer(c).done(function(){GH.Notification.showSuccess("Selection successfully removed from all versions");if(GH.PlanController.isActive()){GH.BacklogController.updateVersionData();GH.PlanController.reloadDetailView()}else{if(GH.WorkController.isActive()){GH.WorkController.reloadDetailView()}}}).fail(function(){if(GH.PlanController.isActive()){GH.BacklogController.loadData()}})};GH.VersionController.updateVersion=function(e,b,d,a){var g=GH.VersionController.getVersionModel();var c=g.getVersion(e);var h=_.keys(b);var f={};_.each(h,function(i){f[i]=c[i]||undefined});_.extend(c,b);g.updateVersion(c);GH.BacklogView.draw();GH.PlanController.reloadDetailView();a();return GH.VersionController.updateVersionOnServer(c,d).fail(function(){_.extend(c,f);g.updateVersion(c);GH.BacklogView.draw();GH.PlanController.reloadDetailView()})};GH.VersionController.updateVersionOnServer=function(b,a){return GH.Ajax.post({url:"/versions/"+b.id,data:{id:b.id,projectId:b.project.id,name:b.name,description:b.description,releaseDate:b.releaseDateFormatted,startDate:b.startDateFormatted},errorContextMap:a})};GH.VersionController.setIssuesVersionOnServer=function(b,a){return GH.Ajax.put({url:"/xboard/issue/fixversion/set",data:{issueKeys:a,versionId:b}})};GH.VersionController.clearIssuesVersionOnServer=function(a){return GH.Ajax.put({url:"/xboard/issue/fixversion/clear",data:{issueKeys:a}})};GH.VersionController.handleVersionCreated=function(a){if(!GH.BacklogController.visible){return}setTimeout(function(){GH.VersionController.handleVersionCreatedImpl(a)},0)};GH.VersionController.handleVersionCreatedImpl=function(a){GH.BacklogController.updateVersionData().done(function(){GH.VersionView.renderNewVersions([a])})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionQuickCreate.js' */
GH.VersionQuickCreate={};GH.VersionQuickCreate.EVENT_VERSION_CREATED="versionCreated";GH.VersionQuickCreate.datePickerFormat=undefined;GH.VersionQuickCreate.accessibleProjects=[];GH.VersionQuickCreate.setDatePickerFormat=function(a){GH.VersionQuickCreate.datePickerFormat=a};GH.VersionQuickCreate.setAccessibleProjects=function(a){GH.VersionQuickCreate.accessibleProjects=a};GH.VersionQuickCreate.showDialog=function(){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>');GH.VersionQuickCreate.renderDialog()};GH.VersionQuickCreate.renderDialog=function(){var a=GH.Dialog.create({width:450,height:350,id:"ghx-dialog-create-version"});a.addHeader("Create Version");a.addPanel("","panel");a.getCurrentPanel().html(GH.tpl.versionview.renderQuickCreateView({projects:GH.VersionQuickCreate.accessibleProjects}));a.addButton("Create",function(){a.disableControls();GH.VersionQuickCreate.submit(a)},"aui-button");GH.Dialog.addCancelButton(a);GH.VersionQuickCreate.registerProjectControls();GH.VersionQuickCreate.registerCalendarControls();AJS.$(".aui-dialog").addClass("ghx-dialog");a.show();a.updateHeight();AJS.$(".aui-blanket").empty();AJS.$("#ghx-version-name").focus()};GH.VersionQuickCreate.submit=function(b){GH.Validation.clearContextualErrors(AJS.$("#ghx-dialog-create-version"));var a=GH.VersionQuickCreate._extractModel();GH.Ajax.post({url:"/versions",data:a,errorContextMap:{projectId:"#ghx-version-project",name:"#ghx-version-name",startDate:"#ghx-version-start-date-error",releaseDate:"#ghx-version-release-date-error"}}).done(function(c){var d=c.success;b.dispose();GH.Notification.showSuccess(AJS.format("Version \'\'{0}\'\' was successfully created.","<strong>"+AJS.escapeHTML(String(d.name))+"</strong>"));AJS.$(GH).trigger(GH.VersionQuickCreate.EVENT_VERSION_CREATED,[{createdVersion:d}])}).fail(b.enableControls)};GH.VersionQuickCreate.registerCalendarControls=function(){var a=new Calendar();Calendar.setup({firstDay:0,inputField:"ghx-version-release-date",button:"ghx-version-release-date_trigger_c",align:"Tl",singleClick:true,showsTime:false,timeFormat:12,positionStyle:"fixed",ifFormat:GH.VersionQuickCreate.datePickerFormat});Calendar.setup({firstDay:0,inputField:"ghx-version-start-date",button:"ghx-version-start-date_trigger_c",align:"Tl",singleClick:true,showsTime:false,timeFormat:12,positionStyle:"fixed",ifFormat:GH.VersionQuickCreate.datePickerFormat})};GH.VersionQuickCreate.registerProjectControls=function(){return new AJS.SingleSelect({element:AJS.$("#ghx-version-project"),revertOnInvalid:true,width:250})};GH.VersionQuickCreate.registerCreateVersionDialog=function(){var a=AJS.$("#ghx-version-column");a.find(".js-create-version").click(function(){GH.VersionQuickCreate.showDialog()})};GH.VersionQuickCreate._extractModel=function(){var a=AJS.$("#ghx-dialog-create-version");return{projectId:a.find("#ghx-version-project :selected").val(),name:a.find("#ghx-version-name").val(),description:a.find("#ghx-version-description").val(),releaseDate:a.find("#ghx-version-release-date").val(),startDate:a.find("#ghx-version-start-date").val()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.js' */
GH.Dialogs.ConvertWorkflow={};GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED="workflowConverted";GH.Dialogs.ConvertWorkflow.statusSelect=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ConvertWorkflow.analytics=new a("gh.config.simplify.workflow.dialog.change")})();GH.Dialogs.ConvertWorkflow.showDialog=function(a){GH.Dialog.dim();GH.Ajax.get({url:"/workflow/convert.json",data:{rapidViewId:a}},"convertWorkflow").done(GH.Dialogs.ConvertWorkflow.renderDialog).fail(GH.Dialog.undim);GH.Dialogs.ConvertWorkflow.analytics.trigger("start")};GH.Dialogs.ConvertWorkflow.renderDialog=function(a){var c=function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("cancel")};var b=GH.Dialog.create({width:575,height:300,id:"ghx-dialog-convert-workflow",onCancelFn:c});var d=(a.numIssuesToMigrate&&a.numIssuesToMigrate>0);GH.Dialogs.ConvertWorkflow.renderDialogIntroPage(b,a);GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage(b,a,d);if(d){GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage(b,a)}GH.Dialogs.ConvertWorkflow.renderDialogProgressPage(b,a);AJS.$(".aui-dialog").addClass("ghx-dialog");b.gotoPage(0);b.gotoPanel(0);b.show();b.updateHeight();AJS.$(".aui-blanket").empty()};GH.Dialogs.ConvertWorkflow.renderDialogIntroPage=function(b,a){b.addHeader("Simplify workflow");b.addPanel("",GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro({projectName:AJS.escapeHTML(String(a.projectName)),workflowSchemeName:AJS.escapeHTML(String(a.workflowSchemeName)),adminWorkflowUrl:GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+a.projectKey+"/workflows",simplifyWorkflowLearnMoreUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Using+the+Simplified+Workflow","isLocal":false}.url}));b.addButton("Next",function(){b.nextPage();_.each(a.statuses,function(c){if(c.resolutionDoneCandidate){GH.Dialogs.ConvertWorkflow.statusSelect.addItem(new AJS.ItemDescriptor({value:c.id,label:c.name}))}});b.updateHeight()},"ghx-dialog-convert-next aui-button");GH.Dialog.addCancelButton(b)};GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage=function(c,b,d){c.addPage();c.addHeader("Simplify workflow");c.addPanel("",GH.tpl.dialogs.convertworkflow.renderStatusResolution({urls:{simplifiedWorkflow:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Using+the+Simplified+Workflow","isLocal":false}.url}}));var a=AJS.$("#ghx-resolution-done-statuses-select");GH.Dialogs.ConvertWorkflow.statusSelect=new AJS.MultiSelect({element:a,width:350,itemAttrDisplayed:"label",suggestions:function(){return _.map(b.statuses,function(e){return new AJS.ItemDescriptor({value:e.id,label:e.name})})}});AJS.$("#ghx-resolution-done-statuses-select-multi-select").keydown(function(e){if(e.keyCode==13&&!GH.Dialogs.ConvertWorkflow.statusSelect.suggestionsVisible){e.preventDefault();return false}});if(d){c.addButton("Next",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("showWarning");c.nextPage();c.updateHeight()},"ghx-dialog-convert-next aui-button")}else{GH.Dialogs.ConvertWorkflow.addSimplifyButton(c,b)}GH.Dialog.addCancelButton(c)};GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage=function(b,a){b.addPage();b.addHeader("Simplify workflow");var c=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues({projectName:AJS.escapeHTML(String(a.projectName)),workflowSchemeName:AJS.escapeHTML(String(a.workflowSchemeName)),numIssuesToMigrate:GH.NumberFormat.format(a.numIssuesToMigrate),isSysAdmin:a.isSysAdmin,backupUrl:GH.Ajax.CONTEXT_PATH+"/secure/admin/XmlBackup!default.jspa"});b.addPanel("",c);GH.Dialogs.ConvertWorkflow.addSimplifyButton(b,a);GH.Dialog.addCancelButton(b)};GH.Dialogs.ConvertWorkflow.renderDialogProgressPage=function(b,a){b.addPage();b.addHeader("Simplify workflow");var c=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress({});b.addPanel("",c);GH.Dialogs.ConvertWorkflow.addAcknowledgeButton(b,a)};GH.Dialogs.ConvertWorkflow.addSimplifyButton=function(b,a){b.addButton("Simplify",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("simplify");b.nextPage();b.updateHeight();b.disableControls();GH.Dialogs.ConvertWorkflow.submit(b,a)},"aui-button")};GH.Dialogs.ConvertWorkflow.addAcknowledgeButton=function(b,a){b.addButton("Acknowledge",function(){b.disableControls();b.dispose();AJS.$(GH).trigger(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED)},"aui-button")};GH.Dialogs.ConvertWorkflow.submit=function(c,b){var d=AJS.$("#ghx-resolution-done-statuses-select");var a=d.val();GH.Ajax.post({url:"/workflow/convert.json",data:{projectKey:b.projectKey,resolutionDoneStatusIds:a}}).done(function(e){GH.Dialogs.ConvertWorkflow.handleConversionResult(c,e)}).fail(c.enableControls)};GH.Dialogs.ConvertWorkflow.handleConversionResult=function(e,b){var a=b.success.numIssuesToMigrate,d=b.success.taskId;var c=function(g){GH.Dialogs.ConvertWorkflow.analytics.trigger("complete");var f=AJS.$("#ghx-convert-workflow-progress");f.find(".ghx-current-progress").css({width:"100%"});e.enableControls();if(g.successful){f.append(GH.Notification.auiMessage({title:"Workflow migration complete.",type:"success"}))}else{var h=GH.Ajax._convertJiraErrors(g.errorCollection).getGlobalErrors();f.append(GH.Notification.auiMessage({title:"Workflow migration did not complete successfully.",type:"error",messageHtml:true,message:GH.tpl.rapid.notification.renderErrorMessages({errors:h})}))}e.updateHeight()};if(!a||a==0){c({finished:true,successful:true})}else{if(d){GH.Dialogs.ConvertWorkflow.getTaskStatus(d,c)}}};GH.Dialogs.ConvertWorkflow.getTaskStatus=function(b,a){GH.Ajax.get({url:"/configuration/jiraTask/"+b+".json"}).done(function(d){if(!d.finished){console.log("Workflow migration progress: "+d.progress);var c=AJS.$("#ghx-convert-workflow-progress");c.find(".ghx-current-progress").css({width:""+d.progress+"%"});setTimeout(function(){GH.Dialogs.ConvertWorkflow.getTaskStatus(b,a)},2000)}else{console.log("Workflow migration finished. Successful? "+d.successful);a(d)}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.soy' */
// This file was automatically generated from ConvertWorkflow.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.convertworkflow.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.convertworkflow == 'undefined') { GH.tpl.dialogs.convertworkflow = {}; }


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Simplifying the workflow for project {0}{1}{2} will make it managed by JIRA Software. This will allow Project Administrators to add and remove steps from the workflow by configuring the columns of the board.",'<b>',opt_data.projectName,'</b>')) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format("The original workflow and scheme for this project will be copied and not modified. You can revert this change by re-associating the workflow scheme {0}{1}{2} to this project using JIRA\x27\x27s {3}administration interface{4}.",'<b>',opt_data.workflowSchemeName,'</b>','<a href="' + opt_data.adminWorkflowUrl + '">','</a>')) + '</p><p>' + soy.$$escapeHtml("The simplified workflow will:") + '<ul><li>' + soy.$$escapeHtml("allow free movement of issues between any column") + '</li><li>' + soy.$$escapeHtml("remove all transition conditions, validators, post functions and screens") + '</li></ul></p><p>' + soy.$$filterNoAutoescape(AJS.format("Read {0}the documentation{1} for more information.",'<a href="' + opt_data.simplifyWorkflowLearnMoreUrl + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro';
}


GH.tpl.dialogs.convertworkflow.renderStatusResolution = function(opt_data, opt_ignored) {
  return '<p class="description">' + soy.$$filterNoAutoescape(AJS.format("Choose statuses that will trigger the {0}resolution{1} to be set to \x22Done\x22.",'<a href="' + opt_data.urls.simplifiedWorkflow + '">','</a>')) + '</p><div class="aui-item"><form class="aui"><fieldset><div class="field-group" id="ghx-status-picker"><label for="ghx-resolution-done-statuses-select">' + soy.$$escapeHtml("Statuses for \x27Done\x27") + '<span class="aui-icon icon-required"></span></label><select id="ghx-resolution-done-statuses-select" multiple="multiple" class="hidden"></select><div id="ghx-resolution-done-statuses-error"></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderStatusResolution.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderStatusResolution';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><p><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format("{0}Note{1}: You are about to change all {2} issues in project {0}{3}{1}.",'<b>','</b>',opt_data.numIssuesToMigrate,opt_data.projectName)) + '</p></div>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$filterNoAutoescape(AJS.format("This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you have a {0}backup{1} of your data before proceeding.",'<a href="' + opt_data.backupUrl + '">','</a>')) + '</p>' : '<p>' + soy.$$filterNoAutoescape("This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you contact a System Administrator to create an XML backup of your data before proceeding.") + '</p>') + '<p>' + soy.$$filterNoAutoescape(AJS.format("If the process fails or JIRA is shutdown before the process completes, you can attempt to associate the workflow scheme {0} with project {1} again.",opt_data.workflowSchemeName,opt_data.projectName)) + '</p>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$escapeHtml("If the process fails again, please restore from backup to ensure that issues in the project remain in a consistent state.") + '</p>' : '<p>' + soy.$$filterNoAutoescape("If the process fails again, please contact a System Administrator so they can restore from backup to ensure that issues in the project remain in a consistent state.") + '</p>');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress = function(opt_data, opt_ignored) {
  return '<div id="ghx-convert-workflow-progress"><div class="ghx-progress-bar"><div class="ghx-current-progress" style="width: 1%;"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.js' */
GH.Dialogs.CreateStatus={};GH.Dialogs.CreateStatus.dialog=null;GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED="statusCreated";GH.Dialogs.CreateStatus.statusCategoryPicker=null;GH.Dialogs.CreateStatus.statusNamePicker=null;GH.Dialogs.CreateStatus.statusNameChangedTimeout=null;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.CreateStatus.analytics=new a("gh.config.add.status.dialog.change")})();GH.Dialogs.CreateStatus.showDialog=function(a){GH.Dialogs.CreateStatus.renderDialog(a);GH.Dialogs.CreateStatus.analytics.trigger("start")};GH.Dialogs.CreateStatus.renderDialog=function(e){var d=function(){GH.Dialogs.CreateStatus.analytics.trigger("cancel")};var c=GH.Dialogs.CreateStatus.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-create-status",onCancelFn:d});c.addHeader("Add status");c.addPanel("","panel");var b=AJS.$(GH.tpl.dialogs.createstatus.renderCreateStatusDialog({}));c.getCurrentPanel().html(b);var a=function(){c.disableControls();GH.Dialogs.CreateStatus.submit(c,e);return false};c.addButton("Add",a,"aui-button");b.submit(a);GH.Dialog.addCancelButton(c);GH.Dialogs.CreateStatus.registerStatusCategoryControls(c);AJS.$(".aui-dialog").addClass("ghx-dialog");c.show();AJS.$(".aui-blanket").empty();GH.Dialogs.CreateStatus.registerStatusNameField();AJS.$("#ghx-status-name-field").focus()};GH.Dialogs.CreateStatus.registerStatusNameField=function(){GH.Dialogs.CreateStatus.statusNamePicker=new AJS.SingleSelect({removeOnUnSelect:false,element:"#ghx-status-name",submitInputVal:true,userEnteredOptionsMsg:"New Status",ajaxOptions:{url:GH.Ajax.buildBareRestUrl("/rest/api/2/status"),query:true,formatResponse:function(a){var b=new AJS.GroupDescriptor({weight:0,label:"Existing Statuses"});_.each(a,function(c){b.addItem(new AJS.ItemDescriptor({value:c.name,label:c.name,html:AJS.escapeHTML(String(c.name))}))});return[b]}}})};GH.Dialogs.CreateStatus.bindStatusNameEvents=function(){var b=AJS.$("#ghx-status-name-field");AJS.$("#ghx-status-name").change(GH.Dialogs.CreateStatus.handleStatusNameChanged);var a=GH.RapidBoard.Browsers.isInputEventSupported();b.on(a?"input":"keypress",function(){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout);GH.Dialogs.CreateStatus.statusNameChangedTimeout=setTimeout(GH.Dialogs.CreateStatus.handleStatusNameChanged,275)})};GH.Dialogs.CreateStatus.handleStatusNameChanged=function(){var c=AJS.$("#ghx-status-name-field").val()||"";var b=AJS.$.trim(c.toLowerCase());var a;if(!c){a=AJS.$.Deferred().resolve([])}else{a=AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status"))}a.done(function(d){var e=_.find(d,function(f){return f.name.toLowerCase()===b});if(e){GH.Dialogs.CreateStatus.statusCategoryPicker.disableWithValue(e.statusCategory.id);GH.Dialogs.CreateStatus.addStatusExistsErrors()}else{GH.Dialogs.CreateStatus.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId);GH.Dialogs.CreateStatus.clearErrors()}})};GH.Dialogs.CreateStatus.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")};GH.Dialogs.CreateStatus.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")};GH.Dialogs.CreateStatus.registerStatusCategoryControls=function(){GH.Dialogs.CreateStatus.fetchStatusCategoryConfig().done(function(a){if(a){GH.Dialogs.CreateStatus.renderStatusCategoryPicker().done(function(){GH.Dialogs.CreateStatus.dialog.updateHeight()})}})};GH.Dialogs.CreateStatus.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(b){var a=_.reject(b,function(c){return c.key==="undefined"});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker());GH.Dialogs.CreateStatus.bindStatusNameEvents();GH.Dialogs.CreateStatus.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:a})})};GH.Dialogs.CreateStatus.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(a){return _.find(a,function(b){return _.isObject(b.statusCategory)})})};GH.Dialogs.CreateStatus.submit=function(b,e){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout);var a=AJS.$("#ghx-status-name").val()||[];var c=AJS.$("#ghx-status-category-picker").val();var d={rapidViewId:e,name:AJS.$.trim(a.pop()),statusCategoryId:parseInt(c,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/workflow/status/create.json",data:d,errorContextMap:{name:"#ghx-status-name"}}).done(function(f){GH.Dialogs.CreateStatus.analytics.trigger("complete");b.dispose();AJS.$(GH).trigger(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,f.success)}).fail(function(){GH.Dialogs.CreateStatus.dialog.updateHeight();b.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.soy' */
// This file was automatically generated from CreateStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.createstatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.createstatus == 'undefined') { GH.tpl.dialogs.createstatus = {}; }


GH.tpl.dialogs.createstatus.renderCreateStatusDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-status-name">' + soy.$$escapeHtml("Name") + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-name"></select></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCreateStatusDialog.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCreateStatusDialog';
}


GH.tpl.dialogs.createstatus.renderCategoryPicker = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="ghx-status-category">' + soy.$$escapeHtml("Category") + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-category-picker" class="hidden"></select><div id="js-status-category-error" class="description">' + soy.$$escapeHtml("Helps identify where an issue is in its lifecycle") + '</div></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCategoryPicker.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCategoryPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.js' */
GH.Dialogs.AddColumn={};GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED="columnAdded";GH.Dialogs.AddColumn.statusCategoryPicker=null;GH.Dialogs.AddColumn.statusNameChangedTimeout=null;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.AddColumn.analytics=new a("gh.config.add.column.dialog.change")})();GH.Dialogs.AddColumn.showDialog=function(b,c){var a={rapidViewId:b,alsoAddStatus:c};GH.Dialogs.AddColumn.renderDialog(a);GH.Dialogs.AddColumn.analytics.trigger("start")};GH.Dialogs.AddColumn.renderDialog=function(c){var e=function(){GH.Dialogs.AddColumn.analytics.trigger("cancel")};var d=GH.Dialogs.AddColumn.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-add-column",onCancelFn:e});d.addHeader("Add column");d.addPanel("","panel");var b=AJS.$(GH.tpl.dialogs.addcolumn.renderAddColumnDialog({}));d.getCurrentPanel().html(b);var a=function(){d.disableControls();GH.Dialogs.AddColumn.submit(d,c);return false};d.addButton("Add",a,"aui-button");b.submit(a);GH.Dialog.addCancelButton(d);GH.Dialogs.AddColumn.registerStatusCategoryControls();AJS.$(".aui-dialog").addClass("ghx-dialog");d.show();AJS.$(".aui-blanket").empty();AJS.$("#ghx-column-name").focus()};GH.Dialogs.AddColumn.submit=function(c,b){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout);var a=AJS.$("#ghx-column-name").val();var d=AJS.$("#ghx-status-category-picker").val();var e={rapidViewId:b.rapidViewId,name:AJS.$.trim(a),alsoAddStatus:b.alsoAddStatus,statusCategoryId:parseInt(d,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/rapidviewconfig/columns",data:e,errorContextMap:{name:"#ghx-column-name"}}).done(function(f){GH.Dialogs.AddColumn.analytics.trigger("complete");c.dispose();AJS.$(GH).trigger(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,f.success)}).fail(function(){GH.Dialogs.AddColumn.dialog.updateHeight();c.enableControls()})};GH.Dialogs.AddColumn.handleColumnNameChanged=function(){var c=AJS.$("#ghx-column-name").val()||"";var b=AJS.$.trim(c.toLowerCase());var a;if(!c){a=AJS.$.Deferred().resolve([])}else{a=AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status"))}a.done(function(d){var e=_.find(d,function(f){return f.name.toLowerCase()===b});if(e){GH.Dialogs.AddColumn.statusCategoryPicker.disableWithValue(e.statusCategory.id);GH.Dialogs.AddColumn.addStatusExistsErrors()}else{GH.Dialogs.AddColumn.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId);GH.Dialogs.AddColumn.clearErrors()}})};GH.Dialogs.AddColumn.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")};GH.Dialogs.AddColumn.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")};GH.Dialogs.AddColumn.registerStatusCategoryControls=function(){GH.Dialogs.AddColumn.fetchStatusCategoryConfig().done(function(a){if(a){GH.Dialogs.AddColumn.renderStatusCategoryPicker().done(function(){GH.Dialogs.AddColumn.dialog.updateHeight()})}})};GH.Dialogs.AddColumn.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(b){var a=_.reject(b,function(c){return c.key==="undefined"});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker());GH.Dialogs.AddColumn.bindColumnNameEvents();GH.Dialogs.AddColumn.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:a})})};GH.Dialogs.AddColumn.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(a){return _.find(a,function(b){return _.isObject(b.statusCategory)})})};GH.Dialogs.AddColumn.bindColumnNameEvents=function(){var b=AJS.$("#ghx-column-name");var a=GH.RapidBoard.Browsers.isInputEventSupported();b.on(a?"input":"keypress",function(){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout);GH.Dialogs.AddColumn.statusNameChangedTimeout=setTimeout(GH.Dialogs.AddColumn.handleColumnNameChanged,275)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.soy' */
// This file was automatically generated from AddColumn.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addcolumn.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addcolumn == 'undefined') { GH.tpl.dialogs.addcolumn = {}; }


GH.tpl.dialogs.addcolumn.renderAddColumnDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-column-name">' + soy.$$escapeHtml("Name") + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-column-name" value=""></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addcolumn.renderAddColumnDialog.soyTemplateName = 'GH.tpl.dialogs.addcolumn.renderAddColumnDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.js' */
GH.Dialogs.RemoveStatus={};GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED="statusRemoved";(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.RemoveStatus.analytics=new a("gh.config.remove.status.dialog.change")})();GH.Dialogs.RemoveStatus.showDialog=function(a,b){GH.Dialog.dim();GH.Ajax.get({url:"/workflow/status/remove.json",data:{rapidViewId:a,statusId:b}},"removeStatusDialog").done(GH.Dialogs.RemoveStatus.renderDialog).fail(GH.Dialog.undim);GH.Dialogs.RemoveStatus.analytics.trigger("start")};GH.Dialogs.RemoveStatus.renderDialog=function(c){var e=function(){GH.Dialogs.RemoveStatus.analytics.trigger("cancel")};var d=GH.Dialog.create({width:575,height:250,id:"ghx-dialog-remove-status",onCancelFn:e});d.addHeader("Remove status");d.addPanel("","panel");var b=AJS.escapeHTML(String(c.statusName)),g="",f="";if(c.isInitialStatus){var a=AJS.escapeHTML(String(c.newInitialStatusName));g=AJS.format("{0} is the initial status for project {1}.",c.statusName,c.projectName);f=AJS.format("Any issues which are created in this project will now default to status {0}{1}{2}.","<b>",a,"</b>")}d.getCurrentPanel().html(GH.tpl.dialogs.removestatus.renderRemoveStatusDialog({statusName:b,isInitialStatus:c.isInitialStatus,newInitialStatusTitle:g,newInitialStatusDesc:f}));d.addButton("Remove",function(){d.disableControls();GH.Dialogs.RemoveStatus.submit(d,c)},"aui-button");GH.Dialog.addCancelButton(d);AJS.$(".aui-dialog").addClass("ghx-dialog");d.show();d.updateHeight()};GH.Dialogs.RemoveStatus.submit=function(b,a){var c={statusId:a.statusId,workflowName:a.workflowName,isInitialStatus:false};if(a.isInitialStatus){c.isInitialStatus=a.isInitialStatus;c.newInitialStatusId=a.newInitialStatusId}GH.Ajax.post({url:"/workflow/status/remove.json",data:c}).done(function(d){GH.Dialogs.RemoveStatus.analytics.trigger("complete");b.dispose();AJS.$(GH).trigger(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,a.statusId)}).fail(b.enableControls)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.soy' */
// This file was automatically generated from RemoveStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removestatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removestatus == 'undefined') { GH.tpl.dialogs.removestatus = {}; }


GH.tpl.dialogs.removestatus.renderRemoveStatusDialog = function(opt_data, opt_ignored) {
  return ((opt_data.isInitialStatus) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'info', title: opt_data.newInitialStatusTitle, message: opt_data.newInitialStatusDesc, messageHtml: true, icon: true}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("Are you sure you want to remove status {0}{1}{2} from the current workflow?",'<b>',opt_data.statusName,'</b>')) + '</p><p>' + soy.$$escapeHtml("This will not affect any other workflows that use this status.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removestatus.renderRemoveStatusDialog.soyTemplateName = 'GH.tpl.dialogs.removestatus.renderRemoveStatusDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.js' */
GH.Dialogs.StartSprintDialog={};GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED="sprintStarted";GH.Dialogs.StartSprintDialog.dateTimePickerFormat=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.StartSprintDialog.analytics=new a("gh.start.sprint.dialog.change")})();GH.Dialogs.StartSprintDialog.analyticsMetaData=function(a){AJS.trigger("analyticsEvent",{name:"gh.sprint.start",data:a})};GH.Dialogs.StartSprintDialog.showDialog=function(b,c,a){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>');GH.Ajax.get({url:"/sprint/"+c+"/start",data:{rapidViewId:b,sprintId:c}},"showStartSprintDialog").done(function(d){GH.Dialogs.StartSprintDialog.renderDialog(d,a<d.numIssues)}).fail(GH.Dialog.undim);GH.Dialogs.StartSprintDialog.analytics.trigger("start")};GH.Dialogs.StartSprintDialog.renderDialog=function(b,a){var d=function(){GH.Dialogs.StartSprintDialog.analytics.trigger("cancel")};var c=GH.Dialog.create({width:575,height:390+(a?70:0)+(b.countNotEstimatedIssues>0?90:0)+(b.noTrackingEstimateIssueCount>0?90:0),id:"ghx-dialog-start-sprint",onCancelFn:d});c.addHeader("Start Sprint");c.addPanel("","panel");var e=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}];c.getCurrentPanel().html(GH.tpl.dialogs.startsprint.renderStartSprintDialog({numIssues:b.numIssues,defaultName:b.defaultName,defaultStartDate:b.defaultStartDate,defaultEndDate:b.defaultEndDate,showFilteredIssuesWarning:a,numNotEstimatedIssues:b.countNotEstimatedIssues,numExtraNotEstimatedIssues:b.countNotEstimatedIssues-b.issuesNotEstimated.length,snapshotIssuesNotEstimated:_.flatten([_.first(b.issuesNotEstimated,b.issuesNotEstimated.length-1)]).join(", "),lastIssueNotEstimated:_.last(b.issuesNotEstimated),numNoTrackingEstimateIssues:b.noTrackingEstimateIssueCount,numExtraNoTrackingEstimateIssues:b.noTrackingEstimateIssueCount-b.noTrackingEstimateIssues.length,snapshotIssuesNoTrackingEstimate:_.flatten([_.first(b.noTrackingEstimateIssues,b.noTrackingEstimateIssues.length-1)]).join(", "),lastIssueNoTrackingEstimate:_.last(b.noTrackingEstimateIssues),listOfSprintDurations:e,hasNoSubtaskDoneStatus:b.hasNoSubtaskDoneStatus,endSprintHelpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Ending+a+Sprint","isLocal":false}.url}));c.addButton("Start",function(){c.disableControls();GH.Dialogs.StartSprintDialog.submit(c,b)},"aui-button");GH.Dialog.addCancelButton(c);GH.Dialogs.StartSprintDialog.registerCalendarControls(b.dateTimePickerFormat);GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),e);AJS.$(".aui-dialog").addClass("ghx-dialog");c.show();AJS.$(".aui-blanket").empty();AJS.$("#ghx-sprint-name").focus();GH.Dialogs.StartSprintDialog.registerWorkdayCounter(b.rapidViewId,c)};GH.Dialogs.StartSprintDialog.submit=function(b,a){var c=AJS.$("#ghx-dialog-start-sprint");var d={rapidViewId:a.rapidViewId,sprintId:a.sprintId,name:c.find("#ghx-sprint-name").val(),startDate:c.find("#ghx-sprint-start-date").val(),endDate:c.find("#ghx-sprint-end-date").val()};GH.Validation.clearContextualErrors(c);GH.Ajax.put({url:"/sprint/"+a.sprintId+"/start",data:d,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(e){var f=a.numIssues;var g=GH.Dialogs.StartSprintDialog.calculateSprintDuration(d.startDate,d.endDate);var h=a.totalStatistic;GH.Dialogs.StartSprintDialog.analytics.trigger("complete");GH.Dialogs.StartSprintDialog.analyticsMetaData({sprintId:a.sprintId,numIssues:f,sprintDuration:g,totalStatistic:a.totalStatistic});b.dispose();GH.Notification.showSuccess(AJS.format("Sprint \'\'{0}\'\' has successfully been started.",AJS.escapeHTML(String(e.success.name))));AJS.$(GH).trigger(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED)}).fail(b.enableControls)};GH.Dialogs.StartSprintDialog.registerCalendarControls=function(a){GH.Dialogs.StartSprintDialog.dateTimePickerFormat=a;var b=new Calendar();Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:true,showsTime:true,timeFormat:12,positionStyle:"fixed",ifFormat:GH.Dialogs.StartSprintDialog.dateTimePickerFormat});Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:true,showsTime:true,timeFormat:12,positionStyle:"fixed",ifFormat:GH.Dialogs.StartSprintDialog.dateTimePickerFormat})};GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining=function(a,e,d,b){var c=Date.parseDate(a,GH.Dialogs.StartSprintDialog.dateTimePickerFormat).getTime();var f=Date.parseDate(e,GH.Dialogs.StartSprintDialog.dateTimePickerFormat).getTime();GH.Ajax.get({url:"/rapidviewconfig/workingdays/period",data:{rapidViewId:d,startDate:c,endDate:f}},"workingdaysperiod").done(function(g){AJS.$("#ghx-sprint-work-days-remaining").remove();b.getCurrentPanel().body.append(GH.tpl.dialogs.startsprint.renderWorkDaysInSprint({numWorkDaysInSprint:g.days,helpLinkUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Configuring+Working+Days","isLocal":false}.url}));AJS.$("#ghx-sprint-work-days-loading").hide()}).fail(function(){AJS.$("#ghx-sprint-work-days-remaining").remove()})};GH.Dialogs.StartSprintDialog.calculateSprintDuration=function(a,b){return Math.ceil(GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(a,b)).toString()};GH.Dialogs.StartSprintDialog.calculateSprintDurationExact=function(a,d){var e=moment(Date.parseDate(a,GH.Dialogs.StartSprintDialog.dateTimePickerFormat));var b=moment(Date.parseDate(d,GH.Dialogs.StartSprintDialog.dateTimePickerFormat));var c=b.diff(e,"days",true);return c};GH.Dialogs.StartSprintDialog.registerDurationDropdown=function(h,f){var d=h.find("#ghx-sprint-duration");var e=h.find("#ghx-sprint-start-date");var c=h.find("#ghx-sprint-end-date");var g=h.find("#ghx-sprint-end-date_trigger_c");var i=function(){if(d.val()!=="custom"){var j=moment(Date.parseDate(e.val(),GH.Dialogs.StartSprintDialog.dateTimePickerFormat));j.add(parseInt(d.val()),"days");c.val(j.toDate().print(GH.Dialogs.StartSprintDialog.dateTimePickerFormat))}};d.change(function(){var j=(d.val()!=="custom");c.prop("disabled",j);i()});e.change(i);var b=function(l){var k=GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(e.val(),c.val());var j=_.find(l,function(m){return(k===m.value)});return j?j.value:"custom"};var a=function(){d.val(b(f)).trigger("change")};a();g.click(function(){if(c.prop("disabled")){d.val("custom").trigger("change");c.prop("disabled",false).focus();g.trigger("click")}});e.focusout(a);c.focusout(a)};GH.Dialogs.StartSprintDialog.registerWorkdayCounter=function(e,c){var f=AJS.$("#ghx-sprint-start-date");var a=AJS.$("#ghx-sprint-end-date");var d=AJS.$("#ghx-sprint-duration");var b=function(){GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining(f.val(),a.val(),e,c)};b();f.change(b);a.change(b);d.change(function(){if(d.val()!=="custom"){b()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.soy' */
// This file was automatically generated from StartSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.startsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.startsprint == 'undefined') { GH.tpl.dialogs.startsprint = {}; }


GH.tpl.dialogs.startsprint.renderStartSprintDialog = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.numNotEstimatedIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format("{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Estimate\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.",opt_data.numNotEstimatedIssues,opt_data.numExtraNotEstimatedIssues,opt_data.snapshotIssuesNotEstimated,opt_data.lastIssueNotEstimated)) + '</p></div>' : '') + ((opt_data.numNoTrackingEstimateIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format("{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Remaining\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.",opt_data.numNoTrackingEstimateIssues,opt_data.numExtraNoTrackingEstimateIssues,opt_data.snapshotIssuesNoTrackingEstimate,opt_data.lastIssueNoTrackingEstimate)) + '</p></div>' : '') + ((opt_data.showFilteredIssuesWarning) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Includes issue(s) currently hidden by a Quick Filter or the Instant Filter.") + '</p></div>' : '') + ((opt_data.hasNoSubtaskDoneStatus) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("You will not be able to complete this sprint, as it includes sub-tasks that cannot be transitioned to the \x22Done\x22 column.") + ' <a href="' + soy.$$escapeHtml(opt_data.endSprintHelpUrl) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a></p></div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be included in this sprint.",'<strong>' + opt_data.numIssues + '</strong>',opt_data.numIssues)) + '</p><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml("Sprint Name") + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.defaultName) + '"></div><div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml("Duration") + ':<span class="aui-icon icon-required"></span></label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
  var durationList37 = opt_data.listOfSprintDurations;
  var durationListLen37 = durationList37.length;
  for (var durationIndex37 = 0; durationIndex37 < durationListLen37; durationIndex37++) {
    var durationData37 = durationList37[durationIndex37];
    output += '<option value="' + soy.$$escapeHtml(durationData37.value) + '">' + soy.$$escapeHtml(durationData37.text) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml("Start Date") + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultStartDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit start date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml("End Date") + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultEndDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit end date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-sprint-end-date-error"></span></div></fieldset></form><span id="ghx-sprint-work-days-loading" class="aui-icon aui-icon-wait">' + soy.$$escapeHtml("Loading...") + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderStartSprintDialog.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderStartSprintDialog';
}


GH.tpl.dialogs.startsprint.renderWorkDaysInSprint = function(opt_data, opt_ignored) {
  return '<p id="ghx-sprint-work-days-remaining" class="ghx-sprint-dialog-working-days">' + soy.$$filterNoAutoescape(AJS.format("There {1,choice,0#are|1#is|1\x3care} {0}{1} working {1,choice,0#days|1#day|1\x3cdays}{2} in this sprint",'<strong>',opt_data.numWorkDaysInSprint,'</strong>')) + '<span id=\'ghx-sprint-work-days-help\'><span class="aui-icon aui-icon-small aui-iconfont-help ghx-sprint-help-icon"></span><a href=' + soy.$$escapeHtml(opt_data.helpLinkUrl) + ' target="_blank">' + soy.$$escapeHtml("More about working days") + '</a></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderWorkDaysInSprint.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderWorkDaysInSprint';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.soy' */
// This file was automatically generated from RemoveIssuesFromSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removeissuesfromsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removeissuesfromsprint == 'undefined') { GH.tpl.dialogs.removeissuesfromsprint = {}; }


GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Sprint scope will be affected by this action.") + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog.soyTemplateName = 'GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.js' */
GH.RemoveIssuesFromSprintDialog={};GH.RemoveIssuesFromSprintDialog.Analytics={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RemoveIssuesFromSprintDialog.Analytics.remove=new a("gh.sprint.issue.remove")})();GH.RemoveIssuesFromSprintDialog.constructDialog=function(f,b){var e=GH.Dialog.create({width:600,height:250,id:"ghx-remove-issues-from-sprint",onCancelFn:function(g){b.reject(f)}});var a=_.reduce(f.changes,function(g,h){return g+h.issueKeys.length},0);e.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",a));e.addPanel("","panel");var d=GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog(f);e.getCurrentPanel().html(d);var c="Confirm";e.addButton(c,function(){e.disableControls();e.dispose();b.resolve(f)},"aui-button");GH.Dialog.addCancelButton(e);e.show();e.updateHeight();AJS.$("#"+e.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.soy' */
// This file was automatically generated from AddIssuesToActiveSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addissuestoactivesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addissuestoactivesprint == 'undefined') { GH.tpl.dialogs.addissuestoactivesprint = {}; }


GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Sprint scope will be affected by this action.") + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog.soyTemplateName = 'GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.js' */
GH.AddIssuesToActiveSprintDialog={};GH.AddIssuesToActiveSprintDialog.Analytics={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.AddIssuesToActiveSprintDialog.Analytics.add=new a("gh.activesprint.issue.add")})();GH.AddIssuesToActiveSprintDialog.showDialog=function(f,b){var a=GH.IssueMoveController.getAllIssueKeys(f);var e=GH.Dialog.create({width:600,height:250,id:"ghx-add-issues-to-active-sprint",onCancelFn:function(g){b.reject(a)}});e.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",a.length));e.addPanel("","panel");var d=GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog(f);e.getCurrentPanel().html(d);var c="Confirm";e.addButton(c,function(){e.disableControls();e.dispose();b.resolve(f)},"aui-button");GH.Dialog.addCancelButton(e);e.show();e.updateHeight();AJS.$("#"+e.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/IssueMoveDialog.soy' */
// This file was automatically generated from IssueMoveDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.issuemovedialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.issuemovedialog == 'undefined') { GH.tpl.dialogs.issuemovedialog = {}; }


GH.tpl.dialogs.issuemovedialog.renderChange = function(opt_data, opt_ignored) {
  return '' + ((opt_data.change.issueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderMoveMessage({issueKeys: opt_data.change.issueKeys, fromSprint: opt_data.change.currentSprint, toSprint: opt_data.change.targetSprint}) + '</p>' : '') + ((opt_data.change.doneIssueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderRemoveMessage({issueKeys: opt_data.change.doneIssueKeys}) + '</p>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderChange.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderChange';
}


GH.tpl.dialogs.issuemovedialog.renderRemoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy18 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1# is|2\x3c are} done and will be removed and only appear in reports.",issuesHtml__soy18,opt_data.issueKeys.length));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderRemoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderRemoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderMoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy24 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  var fromSprintHtml__soy27 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.fromSprint});
  var toSprintHtml__soy30 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.toSprint});
  output += soy.$$filterNoAutoescape(AJS.format("{0} will be moved from {1} to {2}.",issuesHtml__soy24,fromSprintHtml__soy27,toSprintHtml__soy30));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderMoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderMoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderSprintBacklog = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprint) {
    var sprintHtml__soy38 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.sprint.name});
    output += soy.$$filterNoAutoescape(AJS.format("sprint {0}",sprintHtml__soy38));
  } else {
    output += soy.$$escapeHtml("the backlog");
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderSprintBacklog.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderSprintBacklog';
}


GH.tpl.dialogs.issuemovedialog.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueKeys.length == 1) {
    var firstHtml__soy48 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    output += soy.$$filterNoAutoescape(AJS.format("{0}",firstHtml__soy48));
  } else if (opt_data.issueKeys.length == 2) {
    var firstHtml__soy54 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy57 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    output += soy.$$filterNoAutoescape(AJS.format("{0} and {1}",firstHtml__soy54,secondHtml__soy57));
  } else if (opt_data.issueKeys.length > 2) {
    var firstHtml__soy63 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy66 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    var moreCountHtml__soy69 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys.length - 2});
    output += soy.$$filterNoAutoescape(AJS.format("{0}, {1} and {2} more {3,choice,1# issue|2\x3c issues}",firstHtml__soy63,secondHtml__soy66,moreCountHtml__soy69,opt_data.issueKeys.length - 2));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderIssues.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderIssues';
}


GH.tpl.dialogs.issuemovedialog.emphasis = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.value) + '</strong>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.emphasis.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.emphasis';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConfirmDialog.js' */
GH.ConfirmDialog={};GH.ConfirmDialog.create=function(f,c){var a={header:"Confirmation",content:"Are you sure?",contentEscaping:true,onConfirmFn:function(){},onCancelFn:function(){},width:433,height:184};var e=_.defaults(c,a);var b=GH.Dialog.create({id:f,width:e.width,height:e.height,closeOnOutsideClick:false,onCancelFn:e.onCancelFn});b.addHeader(e.header);var d;if(e.contentEscaping){d=AJS.$("<div />").text(e.content)}else{d=AJS.$("<div />").html(e.content)}b.addPanel("",d,"ghx-confirm-dialog-panel");b.addButton("Confirm",function(g){g.dispose();e.onConfirmFn()},"aui-button");GH.Dialog.addCancelButton(b);AJS.$("#"+b.id).addClass("ghx-dialog");return b};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueSelectionManager.js' */
GH.IssueSelectionManagerModel={isIssueValid:function(a){return false},getIssueIndex:function(a){return -1},canAddToSelection:function(b,a){return false},getIssueRange:function(b,a){return[b,a]}};GH.IssueSelectionManager=function(a,b){this.model=a;this.selectedIssuesStateKey=b;this.lastNonShiftSelectedKey=undefined;this.lastShiftSelectedKey=undefined};GH.IssueSelectionManager.prototype.validateCurrentSelection=function(){var b=this.getSelectedIssueKeys();var a=b.slice(0).reverse();var c=[];_.each(a,function(d){if(this.model.isIssueValid(d)){if(c.length===0||this.model.canAddToSelection(c,d)){c.push(d)}}},this);c.reverse();if(_.isEqual(b,c)){return false}this.storeSelectedIssueStack(c);return true};GH.IssueSelectionManager.prototype.selectIssue=function selectIssue(a){var b=a?[a]:[];this._replaceSelectedIssueKeys(b);this._setLastNonShiftSelectedKey(a)};GH.IssueSelectionManager.prototype.getSelectedIssueKeys=function(){return GH.BoardState.getPerViewValue(this.selectedIssuesStateKey,[])};GH.IssueSelectionManager.prototype.storeSelectedIssueStack=function(a){GH.BoardState.setPerViewValue(this.selectedIssuesStateKey,a)};GH.IssueSelectionManager.prototype.getSelectedIssuesInOrder=function(){var a=this.getSelectedIssueKeys();return _.sortBy(a,this.model.getIssueIndex)};GH.IssueSelectionManager.prototype.isInSelection=function(a){var b=this.getSelectedIssueKeys();return _.contains(b,a)};GH.IssueSelectionManager.prototype.hasSelection=function(){var a=this.getSelectedIssueKeys();return !_.isEmpty(a)};GH.IssueSelectionManager.prototype._addToSelection=function(a){if(!this.isInSelection(a)){var b=this.getSelectedIssueKeys();b.push(a);this.storeSelectedIssueStack(b)}};GH.IssueSelectionManager.prototype._addSelectedIssueKeys=function(a){var b=this;_.each(a,function(c){b._addToSelection(c)})};GH.IssueSelectionManager.prototype._removeFromSelection=function(a){var b=this.getSelectedIssueKeys();b=_.without(b,a);this.storeSelectedIssueStack(b)};GH.IssueSelectionManager.prototype.removeSelectedIssueKeys=function(a){var b=this;_.each(a,function(c){b._removeFromSelection(c)})};GH.IssueSelectionManager.prototype._replaceSelectedIssueKeys=function(a){this._clearSelectedIssueKeys();this._addSelectedIssueKeys(a)};GH.IssueSelectionManager.prototype._clearSelectedIssueKeys=function(){this.storeSelectedIssueStack([])};GH.IssueSelectionManager.prototype.getSelectedIssueKey=function(){var b=this.getSelectedIssueKeys();var a=b[b.length-1];return a||null};GH.IssueSelectionManager.prototype._getLastNonShiftSelectedKey=function(){if(!this.lastNonShiftSelectedKey){var a=this.getSelectedIssueKey();if(a&&this.model.isIssueValid(a)){this._setLastNonShiftSelectedKey(a);return a}}return this.lastNonShiftSelectedKey};GH.IssueSelectionManager.prototype._setLastNonShiftSelectedKey=function(a){this.lastNonShiftSelectedKey=a;this.lastShiftSelectedKey=undefined};GH.IssueSelectionManager.prototype._getLastShiftSelectedKey=function(){return this.lastShiftSelectedKey};GH.IssueSelectionManager.prototype._setLastShiftSelectedKey=function(a){this.lastShiftSelectedKey=a};GH.IssueSelectionManager.prototype.handleIssueClick=function(e,c){var d=GH.MouseUtils.isMetaPressed(e);var g=GH.IssueSelectionManager.getMultiSelectType(e);if(!this.model.isIssueValid(c)){return false}if(g){if(!this.model.canAddToSelection(this.getSelectedIssueKeys(),c)){return false}}if(!g){this.selectIssue(c)}else{if(g===GH.IssueSelectionManager._META_MULTI_SELECT){if(this.isInSelection(c)){this.removeSelectedIssueKeys([c])}else{this._addSelectedIssueKeys([c])}this._setLastNonShiftSelectedKey(c)}else{var i=this._getLastNonShiftSelectedKey();var f=this.getSelectedIssueKeys();if(f.length===0||!i||!this.model.isIssueValid(i)){this.selectIssue(c)}else{var h=this.model.getIssueRange(i,c);if(d){var a=[];var b=this._getLastShiftSelectedKey();if(b){a=this.model.getIssueRange(i,b)||[];a=_.without(a,h)}this.removeSelectedIssueKeys(a);this._addSelectedIssueKeys(h)}else{this._replaceSelectedIssueKeys(h)}}this._setLastShiftSelectedKey(c)}}return true};GH.IssueSelectionManager._NO_MULTI_SELECT=0;GH.IssueSelectionManager._META_MULTI_SELECT=1;GH.IssueSelectionManager._SHIFT_MULTI_SELECT=2;GH.IssueSelectionManager.getMultiSelectType=function(a){var b=GH.MouseUtils.isMetaPressed(a);var c=GH.MouseUtils.isShiftPressed(a);var d=GH.IssueSelectionManager._NO_MULTI_SELECT;if(c){d=GH.IssueSelectionManager._SHIFT_MULTI_SELECT}else{if(b&&!c){d=GH.IssueSelectionManager._META_MULTI_SELECT}}return d};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanDragAndDrop.js' */
define("jira-agile/rapid/ui/plan/plan-drag-and-drop",["require"],function(i){var g=i("jquery");var q=i("underscore");var c=i("jira-agile/rapid/global-events");var d=i("jira-agile/rapid/analytics-tracker");var a=i("jira-agile/rapid/ui/plan/backlog-model");var r=i("jira-agile/rapid/ui/plan/issue-actions");var f=i("jira-agile/rapid/ui/plan/issue-move-controller");var l=i("jira-agile/rapid/ui/plan/plan-controller");var o=i("jira-agile/rapid/ui/plan/plan-controls");var k=i("jira-agile/rapid/ui/plan/plan-issue-list-filtering");var p=i("jira-agile/rapid/ui/plan/sprint-view");var h=i("jira-agile/rapid/ui/plan/sprint-controller");var j;var b;var m;var n;c.on("pre-initialization",function(){j=i("jira-agile/rapid/ui/plan/backlog-controller");b=i("jira-agile/rapid/ui/plan/backlog-selection-controller");m=i("jira-agile/rapid/ui/plan/BacklogView");n=i("jira-agile/rapid/ui/plan/plan-issue-list-view")});var e={};e.currentDragElement=undefined;e.rankingComplete=true;e.REJECTION_REASON_ATTRIBUTE="data-target-rejected-reason";e.DropRejectionReasons={VERSION_PROJECT_MISMATCH:"versionProjectMismatch",ISSUE_PROJECT_MISMATCH:"issueProjectMismatch"};e.analytics={};e.analytics.sprints=new d("gh.sprint.issues");e.analytics.ranking=new d("gh.rapidboard.rankissues");e.cancel=false;e.skipNextRank=false;e.getCancelSelector=function(){var s=":input,button,.ghx-helper";var u=a.isRankable();var t=a.canManageSprints();if(!u){e.NotRankableHandler.register(".js-sortable.js-issue");s+=",.js-issue"}else{if(!t){s+=",.ghx-marker"}}return s};e.enableDragAndDrop=function(){var v=g("#ghx-content-group");var s=e.getCancelSelector();e.skipNextRank=false;var t=function(){if(document.activeElement&&document.activeElement.id==="ghx-backlog-search-input"){g("#ghx-backlog-search-input").blur()}};v.mousedown(function(w){if(g(w.target).is(".js-editing-field")){return}t();if(GH.RapidBoard.Util.InlineEditable.submitActiveEdits()){w.stopPropagation()}});var u=v.find(".js-issue").first();v.sortable({revert:0,zIndex:3000,appendTo:"body",helper:"clone",scroll:true,additionalScrollParents:function(){return g("#ghx-backlog, .ghx-classification-scrollview")},ignoreOriginalScroll:true,forceHelperSize:true,helperProportions:{width:u.width(),height:u.height()},initializeTopAndLeft:true,containment:function(){if(!this.helper.hasClass("ghx-marker")){return false}var y=this.currentItem.parent();var z=y.offset();var w=y.find(".js-issue-list");var B=w.offset();var A=y.find(".js-sprint-header");var x=y.find(".ghx-helper");return[0,B.top,10000,10000]},start:function(w,x){e.skipNextRank=false;v.addClass("ghx-drag-in-progress");e.dragStartHandler.apply(this,[w,x])},stop:function(w,x){v.removeClass("ghx-drag-in-progress");e.dragStopHandler.apply(this,[w,x])},intersectionOverride:function(y){var z=g.ui.isOverAxis(this.positionAbs.top+(this.helperProportions.height/2),y.top,y.height),x=g.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,y.left,y.width),B=z&&x,w=this._getDragVerticalDirection(),A=this._getDragHorizontalDirection();if(!B){return false}return this.floating?(((A&&A=="right")||w=="down")?2:1):(w&&(w=="down"?2:1))},helperAdjusted:function(){if(e.markerMove){e.adjustMarkerDragOverlayHeight.apply(this)}},axisAdjusted:function(){var w="y";if(this.currentItem.is(".js-issue")){w="both"}this.options.axis=w},items:".js-parent-drag:not(.ghx-filtered), .js-sortable:not(.ghx-filtered), .ghx-backlog-group .ghx-helper",cancel:s,update:function(w,x){if(e.skipNextRank){v.sortable("cancel")}else{e.updateHandler.apply(this,[w,x])}},change:e.changeHandler,disabled:!a.isRankable()});g(".js-sprint-container").droppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",drop:function(y,A){var B=g(this);if(B.hasClass("ghx-open")&&B.find(".ghx-no-issues").length===0){return}if(e.cancel){return}var z=b.getSelectedIssueKeys();var C=parseInt(g(this).attr("data-sprint-id"),10);var w=a.getSprintModel(C);if(!w){return}e.analytics.sprints.trigger("addbydragndrop","selectedIssuesCount",z.length);var x=q.last(w.getIssueList().getOrder());e.sprintRankIssues(z,C,x,null);e.skipNextRank=true}});e.initializeClassificationDnD()};e.initializeClassificationDnD=function(){var u=e.getCancelSelector();var v=g(".ghx-classification-cards");var s=g("#ghx-epic-column").find(".ghx-classification-cards");s.sortable({helper:"clone",axis:"y",revert:0,zIndex:3000,containment:"parent",start:function(x,y){e.dragStartHandler.apply(this,[x,y])},stop:e.dragStopHandler,tolerance:"pointer",items:".js-parent-drag, .js-sortable",cancel:u,update:function(x,y){e.updateHandler.apply(this,[x,y])}});var w=v.find(".ghx-classification-item").add(g(".ghx-classification-pending"));var t=0;w.droppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",over:function(x,y){if(g(this).hasClass("ghx-target-hover-rejected")){t++;if(t>0){y.helper.css("cursor","not-allowed")}}},out:function(x,y){if(g(this).hasClass("ghx-target-hover-rejected")){t--;if(t<=0){y.helper.css("cursor","")}}},drop:function(){t=0;var H=g(this);var y=H.attr("data-epic-key");var x=H.attr("data-version-id");if(e.cancel){return}var F=b.getSelectedIssueKeys();if(!q.isEmpty(y)){if(k.isNoneEpicFilterKey(y)){GH.EpicController.removeIssuesFromAssociatedEpics(F)}else{GH.EpicController.addIssuesToEpic(y,F)}}else{if(!q.isEmpty(x)){if(H.hasClass("ghx-target-hover-rejected")){var B=H.attr(e.REJECTION_REASON_ATTRIBUTE);var I;if(B===e.DropRejectionReasons.VERSION_PROJECT_MISMATCH){I=AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}",F.length)}else{if(B===e.DropRejectionReasons.ISSUE_PROJECT_MISMATCH){I=AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}",F.length)}}if(I){GH.Notification.showWarnings(I,{autoHide:true,preRendered:true})}}else{var A=[];q.each(F,function(K){var L=a.getIssueData(K);if(L){A.push(L)}});var J=q.some(A,function(K){return K.fixVersions.length>1});var z=function(){if(k.isNoneVersionFilterId(x)){GH.VersionController.clearIssuesVersion(A)}else{GH.VersionController.setIssuesVersion(parseInt(x,10),A)}};if(J&&!GH.storage.get("gh.dialog.versionChangeConfirm.dontAsk",false)){var E;if(k.isNoneVersionFilterId(x)){E=AJS.format("This action will remove any versions from the {0,choice,0#issues|1#issue|2#issues}",A.length)}else{var D=GH.VersionController.getVersionModel().getVersion(parseInt(x,10));E=AJS.format("Adding the selected {1,choice,0#issues|1#issue|2#issues} to version {0} will remove the {1,choice,0#issues|1#issue|2#issues} from any other versions","<b>"+AJS.escapeHTML(String(D.name))+"</b>",A.length)}var G="ghx-version-change-confirm-dialog";GH.ConfirmDialog.create(G,{content:E,contentEscaping:false,onConfirmFn:function(){z()}}).show();g("#"+G).find(".dialog-button-panel").prepend(GH.tpl.versionview.renderDontAskAgain());var C=g("#ghx-dont-ask-for-confirmation");C.change(function(){GH.storage.put("gh.dialog.versionChangeConfirm.dontAsk",C.is(":checked"),false)})}else{z()}}}}e.skipNextRank=true}})};e.dragStartHandler=function(v,w){e.cancel=false;var u=g(w.item);var s=g(this);var t=u.hasClass("ghx-marker")||u.hasClass("js-parent-drag");setTimeout(function(){o.stopEdits()},0);GH.EpicView.hideDropdown();GH.VersionView.hideDropdown();GH.PlanContextMenuController.hideContextMenu();g(document).bind("keydown.planDragAndDrop",function(x){if(x.keyCode==27){e.cancel=true;s.sortable("cancel");if(t){j.revertStatistics()}}});if(u.hasClass("js-issue")){e.markerMove=false;e.issueDragStartHandler.apply(this,[v,w])}else{if(t){e.markerMove=true;e.markerDragStartHandler.apply(this,[v,w])}}GH.LinkedPagesController.hideCurrentDialog()};e.dragStopHandler=function(t,u){var s=g(u.item);g(document).unbind("keydown.planDragAndDrop");if(s.hasClass("js-issue")){e.issueDragStopHandler.apply(this,[t,u])}else{if(s.hasClass("ghx-marker")||s.hasClass("js-parent-drag")){e.markerDragStopHandler.apply(this,[t,u])}}};e.updateHandler=function(t,u){var s=g(u.item);if(e.cancel){return}if(s.hasClass("js-issue")){e.issueUpdateHandler(t,u)}else{if(s.hasClass("ghx-marker")||s.hasClass("js-parent-drag")){e.markerUpdateHandler(t,u)}else{if(s.hasClass("ghx-classification-item")){e.epicUpdateHandler(t,u)}}}};e.changeHandler=function(s,A){var v=g(A.item);var z=v.hasClass("js-issue");var x=A.placeholder;var D=x.parent();var B=D.hasClass("js-issue-list");if(z){if(!B){var C=x.prevAll(".js-issue-list");if(C.length){C.append(x)}}}else{var u=p.getSprintIdForMarker(g(A.item));var w=p.getSprintIdForElement(x);var y=u===w;if(y){if(B){var t=!x.next(".js-issue").length;if(t){D.after(x)}}}else{if(!B){var C=x.prevAll(".js-issue-list");if(C.length){C.append(x)}}}}if(v.hasClass("js-issue")){}else{if(v.hasClass("ghx-marker")||v.hasClass("js-parent-drag")){e.markerChangeHandler(s,A)}}};e.issueDragStartHandler=function(x,y){var w=g(y.helper);e.currentDragElement=w;var u=n.getIssueKey(w);b.ensureIssueSelected(x,u);var v=b.getSelectedIssueKeys();if(v.length>1){if(w.hasClass("ghx-parent-group")){w.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(v.length)}else{w.addClass("ghx-move-main").find(".ghx-move-count > b").text(v.length)}}var t=q.chain(v).map(function(A){return a.getIssueData(A).projectId}).uniq().value();var z=g("#ghx-version-column").find(".ghx-classification-cards .ghx-classification-item");if(t.length>1){z.addClass("ghx-target-hover-rejected").attr("data-target-rejected-reason","issueProjectMismatch")}else{var s=z.filter(function(){var A=g(this);var C=A.attr("data-version-id");var B=GH.VersionController.getVersionModel().getVersion(parseInt(C,10));if("project" in B&&q.first(t)!==B.project.id){return true}else{return false}});s.addClass("ghx-target-hover-rejected").attr("data-target-rejected-reason","versionProjectMismatch")}};e.issueDragStopHandler=function(t,u){var s=u.item;s.css("cursor","");if(s.hasClass("ghx-parent-group")){s.children(".js-issue").removeClass("ghx-move-main")}else{s.removeClass("ghx-move-main")}e.currentDragElement=null;g(".ghx-classification-cards").find(".ghx-target-hover-rejected").removeClass("ghx-target-hover-rejected").removeAttr(e.REJECTION_REASON_ATTRIBUTE)};e.issueUpdateHandler=function(t,z){e.rankingComplete=false;var w=g(z.item);var y=b.getSelectedIssuesInOrder();e.analytics.ranking.trigger("dragAndDrop",y.length);var C=n.findPrevRankableElement(w);var u=n.getRankableId(C);var x=n.findNextRankableElement(w);var v=n.getRankableId(x);var A=p.getSprintIdForElement(w);var B=!!u;var s=!!v;if(B&&s){v=false}e.sprintRankIssues(y,A,u,v)};e.epicUpdateHandler=function(t,A){function C(E){return{key:E.attr("data-epic-key"),id:E.attr("data-epic-id")}}var B=g(A.item);var x=C(B);var D=B.prev();var u=D.length>0?C(D):false;var v=B.next();var s=v.length>0?C(v):false;var z=[x.key];GH.EpicController.reorderEpics(z,u.key,s.key);var y=function(){l.reload()};var w=function(E){var F=GH.RankController.getErrorRankResultFromResponse(E);if(F){GH.Notification.showWarning(F.errors[0]);l.reload()}};GH.RankController.rankEpics(a.getRankCustomFieldId(),x.id,s.id,u.id).fail(y).done(w)};e.sprintRankIssues=function(u,x,t,w){var v=f.calculateIssueMoveModel(u,x);var s=f.confirmMove(v);s.fail(function(){l.reload()});s.done(function(C){var y=[];var z=[];var A=f.isMoveBetweenActiveSprints(C)||f.isOnlyRankOperation(C);if(A){y=u}else{var E=C.changes[0];y=E.issueKeys;z=E.doneIssueKeys}if(!q.isEmpty(y)){j.moveIssues(y,x,t,w)}if(!q.isEmpty(z)){var B=a.findModelWithIssue(z[0]);j.removeIssues(B,z)}var D=[];if(!q.isEmpty(y)){D.push(GH.RankController.sprintRankIssues(a.getRankCustomFieldId(),y,x,w,t))}else{D.push(g.Deferred().resolve(null))}if(!q.isEmpty(z)){D.push(GH.RankController.sprintRankIssues(a.getRankCustomFieldId(),z,null,null,null))}else{D.push(g.Deferred().resolve(null))}g.when.apply(null,D).done(function(G,F){h.triggerAnalytics(C);var H=G&&GH.RankController.getErrorRankResultFromResponse(G[0]);if(!H){H=F&&GH.RankController.getErrorRankResultFromResponse(F[0])}if(H){GH.Notification.showWarning(H.errors[0]);l.reload()}else{e.refreshDetailsView(C);r.showSprintRankSuccessMessage(C)}}).fail(function(){l.reload()})});s.done(function(){e.rankingComplete=true});return s};e.refreshDetailsView=function(u){if(!l.isDetailsViewOpened()){return}if(f.isOnlyRankOperation(u)){return}var t=GH.DetailsView.selectedIssueKey;var s=f.getAllIssueKeys(u);if(q.contains(s,t)){GH.DetailsView.reload()}};e.markerDragStartHandler=function(t,B){var v=g(B.item),u=v.parent(),z=u.offset(),w=u.children(".js-issue-list"),G=w.offset(),D=v.height(),C=g(GH.tpl.backlogview.renderDragOverlay({}));var x=g("#ghx-backlog").offset().top;var s=function(H){var I=H.top;return I<x?x:I};var F=function(H){return B.helper.offset().top-H+D};var A=s(G);var E=F(A);C.css({top:A,left:z.left+1,height:E,width:u.outerWidth()-2}).appendTo("body");e.adjustMarkerDragOverlayHeight=function(){if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}var I=w.offset();var J=s(I);var H=F(J);C[0].style.top=J+"px";C[0].style.height=H+"px"};var y=g(B.helper);v.closest(".ghx-sprint-planned").addClass("ghx-active-drag");e.currentDragElement=y};e.markerChangeHandler=function(u,w){var x=g(w.placeholder);var v=p.getSprintIdForMarker(w.item);if(!v){return}var t=p.getSprintIdForElement(x);var y=n.findPreviousVisibleIssueElementInList(x);var s=n.getRankableId(y);e.updateTemporarySprintStatistics(v,t,s)};e.markerDragStopHandler=function(){var s=g(".ghx-backlog-container");s.removeClass("ghx-active-drag ghx-overtaken");g(".ghx-drag-overlay").remove();e.currentDragElement=null};e.markerUpdateHandler=function(u,x){e.analytics.sprints.trigger("footerdrag");var w=g(x.item);var v=p.getSprintIdForMarker(w);if(!v){return}var t=p.getSprintIdForElement(w);var y=n.findPreviousVisibleIssueElementInList(w);var s=n.getRankableId(y);e.handleMarkerDragRanking(v,t,s)};e.handleMarkerDragRanking=function(x,w,t){var s=a.calculateRankingDataForSprintMarkerMove(x,w,t);if(s){var u=e.sprintRankIssues(s.issueKeys,s.sprintId,s.prevRankableId,s.nextRankableId);u.done(function(){var y=b.validateCurrentSelection();if(y){m.updateIssueSelectionState()}})}if(x!=w&&!t){var v=[];if(w){v.push(a.getSprintModel(w))}else{v.push(a.getBacklogModel2())}if(!s){v.push(a.getSprintModel(x))}m.redrawChangedModels(v)}};e.updateTemporarySprintStatistics=function(w,u,s){var t=a.getSprintModel(w);if(!t){return}var v=a.calculateTemporaryDataForSprintWithMarker(w,u,s);p.markAsOvertaken(v.modelsData.otherAffectedModels);p.updateSprintStatisticForDraggedSprint(t,v.issueList)};e._findShownElementByClass=function(s){return function(u){var t=g(u);return t.hasClass(s)&&!t.is(":hidden")}};e._findShownElement=function(t){var s=g(t);return !s.is(":hidden")};e.NotRankableHandler={mouseXStart:0,mouseYStart:0,register:function(s){g(document).delegate(s,"mousedown",e.NotRankableHandler.mouseDownHandler)},registerOutUpHandlers:function(s){s.bind("mouseout",e.NotRankableHandler.mouseOutHandler);s.bind("mouseup",e.NotRankableHandler.mouseUpHandler)},unregisterOutUpHandlers:function(s){s.unbind("mouseout",e.NotRankableHandler.mouseOutHandler);s.unbind("mouseup",e.NotRankableHandler.mouseUpHandler)},mouseDownHandler:function(){var s=g(this);e.NotRankableHandler.registerOutUpHandlers(s)},mouseOutHandler:function(){var s=g(this);e.NotRankableHandler.unregisterOutUpHandlers(s);e.NotRankableHandler.showNotRankableWarning()},mouseUpHandler:function(){var s=g(this);e.NotRankableHandler.unregisterOutUpHandlers(s)},showNotRankableWarning:function(){var t=GH.RapidBoard.getRapidViewConfigurationUrl(j.rapidViewData.id,"filter");var s='<a href="'+t+'">';var v="</a>";var u=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",s,v);GH.Notification.showWarning(u)}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.js' */
define("jira-agile/rapid/ui/plan/plan-controller",["require"],function(d){var h=d("jquery");var j=d("jira-agile/rapid/global-events");var a=d("jira-agile/rapid/analytics-tracker");var i=d("jira-agile/rapid/ui/plan/plan-controls");var c=d("jira-agile/rapid/ui/plan/plan-issue-list-filtering");var f=d("jira-agile/rapid/ui/plan/plan-view");var b;var g;j.on("pre-initialization",function(){b=d("jira-agile/rapid/ui/plan/backlog-selection-controller");g=d("jira-agile/rapid/ui/plan/backlog-controller")});var k={};k.isVisible=false;k.viewData=undefined;k.currentViewConfig={};k.analytics=function(l){return new a("gh.planningboard."+l)};k.init=_.once(function(){f.init();i.init();GH.VersionController.init();GH.EpicController.init();g.init()});k.isActive=function(){return k.isVisible};k.setRapidView=function(l){k.rapidViewData=l;g.setRapidView(l)};k.show=function(){GH.log("PlanController.show",GH.Logger.Contexts.ui);if(!k.rapidViewData){return}k.isVisible=true;f.show();k.configureUI();k.loadRapidViewConfig();k.attachControlFHandler()};k.configureUI=function(){var l=b.getSelectedIssueKey();GH.DetailsView.setRapidViewId(k.rapidViewData.id);if(l){GH.DetailsView.setSelectedIssueKey(l)}f.updateDetailViewState();f.updateVersionColumnState();f.updateEpicsColumnState()};k.lastPushUpdate=0;k.pushTimeoutHandler=undefined;k.updateDetailsView=function(l,n){var m=300;var o=new Date().getTime();if(k.lastPushUpdate<(o-m)){k.doUpdateDetailsView(l,n);k.lastPushUpdate=o+m;return}if(k.pushTimeoutHandler){window.clearTimeout(k.pushTimeoutHandler)}k.pushTimeoutHandler=window.setTimeout(function(){k.doUpdateDetailsView(l,n);k.lastPushUpdate=new Date().getTime()},m)};k.doUpdateDetailsView=function(l,m){if(!GH.RapidBoard.State.isDetailsViewPlanOpened()&&!m){return}GH.DetailsView.setSelectedIssueKey(l);if(b.getSelectedIssueKey()==null){k.setDetailViewOpenedState(false);GH.DetailsView.hide()}else{k.setDetailViewOpenedState(true);GH.DetailsView.show()}if(l){setTimeout(function(){GH.RapidBoard.State.pushState()},0)}f.doUpdateDetailsView()};k.reloadDetailView=function(l){if(!k.isDetailsViewOpened()){return}if(l){GH.DetailsView.setStoredTabId(l)}k.setDetailViewOpenedState(true);GH.DetailsView.show()};k.reload=function(l){if(!k.isVisible){return}g.show(l)};k.hide=function(){GH.log("PlanController.hide",GH.Logger.Contexts.ui);if(k.isVisible){k.isVisible=false;g.hide();GH.DetailsView.hide();k.detachControlFHandler();f.hide();GH.planOnboarding.refresh()}};k.loadRapidViewConfig=function(){var l=function(m){k.currentViewConfig=m;k.initializePlanMode()};GH.RapidViewConfig.fetchConfiguration(k.rapidViewData.id).done(l)};k.initializePlanMode=function(){if(!k.isVisible){return}i.setRapidViewConfig(k.currentViewConfig);g.setRapidViewConfig(k.currentViewConfig);GH.DetailsView.setRapidViewConfig(k.currentViewConfig);i.renderControls();if(GH.RapidBoard.ViewController.shouldShowSubnavigator()){GH.RapidBoard.SubnavigatorController.render()}f.hideLoadingFilter();c.setInstantFilter(null);g.show();GH.RapidBoard.ViewController.updateContentContainer()};k.isDetailsViewOpened=function(){return GH.RapidBoard.State.isDetailsViewPlanOpened()};k.setDetailViewOpenedState=function(l){l=l||false;GH.RapidBoard.State.setPlanViewDetailsViewOpened(l);f.updateDetailViewState()};k.closeDetailsView=function e(){if(GH.DetailsView.hasCurrentError()){return}if(!k.isDetailsViewOpened()){return}k.setDetailViewOpenedState(false);GH.RapidBoard.State.pushState();GH.DetailsView.hide();f.updateHorizontalPositioning()};k.toggleDetailsView=function(){if(k.isDetailsViewOpened()){k.closeDetailsView()}else{var l=b.getSelectedIssueKey();k.updateDetailsView(l,true)}};k.toggleEpicsShowOnBacklog=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard();k.reload()};k.isVersionsColumnVisible=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",false)};k.isEpicsColumnVisible=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",false)};k.isVersionsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",false)};k.isEpicsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",false)};k.setVersionsColumnVisible=function(l){GH.BoardState.setPerViewValue("planVersionsVisible",!!l)};k.setEpicsColumnVisible=function(l){GH.BoardState.setPerViewValue("planEpicsVisible",!!l)};k.toggleVersionsColumn=function(){var l=k.isVersionsColumnVisible();l=!l;k.setVersionsColumnVisible(l);GH.RapidBoard.State.pushState();f.updateVersionColumnState();f.updateHorizontalPositioning()};k.toggleEpicsColumn=function(){var l=k.isEpicsColumnVisible();l=!l;k.setEpicsColumnVisible(l);GH.RapidBoard.State.pushState();f.updateEpicsColumnState();f.updateHorizontalPositioning()};k.attachControlFHandler=function(){h(document).bind("keydown",k.controlFHandler)};k.detachControlFHandler=function(){h(document).unbind("keydown",k.controlFHandler)};k.controlFHandler=function(l){if(l.ctrlKey&&String.fromCharCode(l.which).toLowerCase()==="f"){k.analytics("shortcuts").trigger("controlf")}};k.collectPrintableIssues=function(){return{sprintIssues:g.extractPrintableIssuesFromAllSprints(),backlogIssues:g.getPrintableIssuesFromPlanBacklog(),epics:g.getEpicMap(),viewMode:"plan",boardType:"scrum"}};return k});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.soy' */
// This file was automatically generated from PlanController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plancontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plancontroller == 'undefined') { GH.tpl.plancontroller = {}; }


GH.tpl.plancontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-plan-group" class="ghx-plan-group"><div id="ghx-classification-menu-column"><ul id="ghx-classification-menu" class="ghx-ide-menu ghx-classification-menu"><li role="button" class="js-release-toggle ghx-release-toggle"><span class="ghx-inner">' + soy.$$escapeHtml("Versions") + '</span></li><li role="button" class="js-epic-toggle ghx-epic-toggle"><span class="ghx-inner">' + soy.$$escapeHtml("Epics") + '</span></li></ul></div><div id="ghx-version-column" class="ghx-version-column ghx-classification-column"></div><div id="ghx-epic-column" class="ghx-epic-column ghx-classification-column"></div><div id="ghx-backlog-column" class="ghx-backlog-column"><div id="ghx-backlog" class="ghx-backlog"></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderSkeleton.soyTemplateName = 'GH.tpl.plancontroller.renderSkeleton';
}


GH.tpl.plancontroller.renderEpicPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("Show epics panel") + '<b>' + soy.$$escapeHtml("Use epics to plan features across multiple sprints.") + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderEpicPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderEpicPanelTipsyExpand';
}


GH.tpl.plancontroller.renderVersionPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("Show versions panel") + '<b>' + soy.$$escapeHtml("Use versions to keep track of code releases.") + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderVersionPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderVersionPanelTipsyExpand';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanView.js' */
define("jira-agile/rapid/ui/plan/plan-view",["require"],function(e){var f=e("jquery");var a=e("jira-agile/rapid/global-events");var d=e("jira-agile/rapid/ui/plan/plan-controls");var c;var g;a.on("pre-initialization",function(){g=e("jira-agile/rapid/ui/plan/plan-controller");c=e("jira-agile/rapid/ui/plan/BacklogView")});var b={};b.detailViewPositioned=false;b.viewData=undefined;b.currentViewConfig={};b.init=function(){var h=f(document);h.delegate(".js-view-action-toggle-releases-column, .js-release-toggle","click",g.toggleVersionsColumn);h.delegate(".js-view-action-toggle-epics-column, .js-epic-toggle","click",g.toggleEpicsColumn);h.delegate(".js-view-actions-plan .js-view-action-toggle-epics-lozenge","click",g.toggleEpicsShowOnBacklog)};b.show=function(){b.detailViewPositioned=false;f("body").addClass("ghx-mode-planning");var j=GH.tpl.plancontroller.renderSkeleton();f("#ghx-plan").empty().append(j);var h=f(".js-release-toggle");GH.Tooltip.tipsify({selector:h,gravity:"w",html:true,className:"ghx-tipsy-alt"});var i=f(".js-epic-toggle");GH.Tooltip.tipsify({selector:i,gravity:"w",html:true,className:"ghx-tipsy-alt"});GH.DetailsView.setContainerSelector("#ghx-detail-view");GH.DetailsView.setOptions({canClose:true,showActionsCog:true,showSubtaskTab:true,showLogWorkTrigger:false,updateSizeHandler:b.updateDetailViewSize,closeHandler:g.closeDetailsView});delete c.container};b.updateDetailViewState=function(){var h=g.isDetailsViewOpened();if(h){f("#ghx-plan-group").addClass("ghx-has-detail");f("#ghx-detail-view").css({display:""})}else{f("#ghx-plan-group").removeClass("ghx-has-detail");f("#ghx-detail-view").css({display:"none"})}GH.ViewActions.setDetailViewVisible(h)};b.updateVersionColumnState=function(){var k=f("#ghx-version-column");var h=f("#ghx-plan-group");var i=f(".js-release-toggle");var j=g.isVersionsColumnVisible();if(j){k.css({display:""});h.addClass("ghx-version-expanded");i.addClass("ghx-active");GH.Tooltip.disable(i)}else{k.css({display:"none"});h.removeClass("ghx-version-expanded");i.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()).removeClass("ghx-active");GH.Tooltip.enable(i)}GH.ViewActions.setVersionsPanelVisible(j)};b.updateEpicsColumnState=function(){var k=f("#ghx-epic-column");var i=f("#ghx-plan-group");var h=f(".js-epic-toggle");var j=g.isEpicsColumnVisible();if(j){k.css({display:""});i.addClass("ghx-epic-expanded");h.addClass("ghx-active")}else{k.css({display:"none"});i.removeClass("ghx-epic-expanded");h.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand()).removeClass("ghx-active")}GH.ViewActions.setEpicsPanelVisible(j)};b.updateViewActions=function(){GH.ViewActions.setDetailViewVisible(g.isDetailsViewOpened());GH.ViewActions.setEpicsPanelVisible(g.isEpicsColumnVisible());GH.ViewActions.setVersionsPanelVisible(g.isVersionsColumnVisible());if(GH.GridDataController.getModel()){GH.ViewActions.setSwimlanes(GH.GridDataController.getModel().hasSwimlanes())}};b.updateHorizontalPositioning=function(){GH.DetailsView.updateSize()};b.updateDetailViewSize=function(){var j=f("#ghx-detail-issue");if(j.length>0){var k=j.outerHeight();var l=f("#ghx-detail-head");var i=l.outerHeight();var h=f("#js-detail-nav-content");h.css({height:k-i-13})}};b.doUpdateDetailsView=function(){if(!b.detailViewPositioned){b.detailViewPositioned=true;b.updateFixedElementPositioning()}};b.hide=function(){f("body").removeClass("ghx-mode-planning");f("#ghx-plan").empty()};b.hideLoadingFilter=function(){f("body").removeClass("ghx-loading-quickfilter")};b.showLoadingBacklog=function(){f("body").addClass("ghx-loading-backlog");f(".ghx-throbber").spin("large")};b.hideLoadingBacklog=function(){f("body").removeClass("ghx-loading-backlog");f(".ghx-throbber").spin(false)};b.updateFixedElementPositioning=function(){if(!g.isVisible){return}d.resizeQuickFilters({mode:"plan"});b.updateHorizontalPositioning()};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanControls.js' */
define("jira-agile/rapid/ui/plan/plan-controls",["require"],function(b){var c=b("jquery");var a={};a.rapidViewConfig={};a.quickfilters=undefined;a.searchFilter=undefined;a.init=function(){a.quickfilters=new GH.Components.QuickFilters("planQuickFilters");a.searchFilter=new GH.Components.SearchFilter(GH.BacklogController.executeSearch)};a.setRapidViewConfig=function(d){a.rapidViewConfig=d;a.quickfilters.setRapidViewConfig(d)};a.renderControls=function(){var d=c("#ghx-controls-plan");d.empty();d.append(a.quickfilters.renderQuickFilters({mode:"plan"}));d.append(a.searchFilter.render());GH.PresentationMode.render(true,d);GH.ViewActions.setMode(GH.ViewActions.PLAN_MODE)};a.stopEdits=function(){a.searchFilter.stopEdit(c("#ghx-controls-plan"))};a.resizeQuickFilters=function(){a.quickfilters.quickExpanderLayout({mode:"plan"})};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanUrlState.js' */
define("jira-agile/rapid/ui/plan/plan-url-state",["require"],function(d){var c=d("underscore");var f=d("jira-agile/rapid/ui/plan/plan-controller");var b=d("jira-agile/rapid/ui/plan/plan-controls");var a=d("jira-agile/rapid/ui/plan/backlog-selection-controller");var e={};e.self="PlanUrlState";e.isApplicable=function(g){return g.mode=="plan"};e.getNormalizedFromUrl=function(g,h){h["plan.selectedIssue"]=GH.RapidBoard.UrlState.normalizeStringParam(g.selectedIssue,null);h.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(g.quickFilter);h.versions=GH.RapidBoard.UrlState.normalizeStringParam(g.versions,"")==="visible";h.epics=GH.RapidBoard.UrlState.normalizeStringParam(g.epics,"")==="visible";h["plan.selectedEpic"]=GH.RapidBoard.UrlState.normalizeStringParam(g.selectedEpic,null);h["plan.selectedVersion"]=GH.RapidBoard.UrlState.normalizeStringParam(g.selectedVersion,null)};e.toUrl=function(h,g){if(!c.isNull(h["plan.selectedIssue"])){g.selectedIssue=h["plan.selectedIssue"]}if(h.quickFilter.length>0){g.quickFilter=h.quickFilter}if(h.versions){g.versions="visible"}if(h.epics){g.epics="visible"}if(!c.isNull(h["plan.selectedEpic"])){g.selectedEpic=h["plan.selectedEpic"]}if(!c.isNull(h["plan.selectedVersion"])){g.selectedVersion=h["plan.selectedVersion"]}};e.getNormalizedFromInternal=function(g){f.init();g["plan.selectedIssue"]=a.getSelectedIssueKey();g.quickFilter=b.quickfilters.getActiveQuickFilters();g.versions=f.isVersionsColumnVisiblePersisted();g.epics=f.isEpicsColumnVisiblePersisted();g["plan.selectedEpic"]=GH.EpicController.getFilteredEpicKey();g["plan.selectedVersion"]=GH.VersionController.getFilteredVersionId()};e.updateInternalFromNormalized=function(g){f.init();a.setIssueFromUrlState(g["plan.selectedIssue"]);b.quickfilters.setActiveQuickFilters(g.quickFilter);f.setVersionsColumnVisible(g.versions);f.setEpicsColumnVisible(g.epics);GH.EpicController.setFilteredEpicKey(g["plan.selectedEpic"]);GH.VersionController.setFilteredVersionId(g["plan.selectedVersion"])};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanRankController.js' */
define("jira-agile/rapid/ui/plan/plan-rank-controller",["require"],function(b){var c=b("jquery");var h=b("underscore");var g=b("jira-agile/rapid/global-events");var d;var f=b("jira-agile/rapid/ui/plan/backlog-model");var i=b("jira-agile/rapid/ui/plan/backlog-model2");var a=b("jira-agile/rapid/ui/plan/backlog-selection-controller");g.on("pre-initialization",function(){d=b("jira-agile/rapid/ui/plan/backlog-controller")});var e={};e.init=function(){d.registerIssueCreatedCallback("rankIssues",e.rankCreatedIssues)};e.rankCreatedIssues=function(k){var j=a.getSelectedIssuesInOrder();if(j&&j.length>0){return e.rankCreatedIssuesBySelection(k,j)}else{return e.rankCreatedIssuesByVisibility(k)}};e.rankCreatedIssuesBySelection=function(m,o){var n=h.last(o);var l=f.findModelWithIssue(h.first(o));var j;var k;if(l&&i.isBacklogModel(l)){j=n;k=false}else{j=f.getBacklogModel2().getIssueList().getFirstRankableIssueKeyInColumn();k=true}if(j){return e.rankCreatedIssuesAgainstIssue(m,j,k)}};e.rankCreatedIssuesByVisibility=function(o){var k=c(".ghx-backlog-group");var p=c(".js-issue",k);var j=c(document).height();var q=c(document).scrollTop();function m(s){var t=s.offset().top;return t>q&&t<j+q}var n=p.filter(function(){var s=c(this);return m(s)});var l;if(n.length>0){l=n.first()}else{l=p.first()}if(l&&l.length==1){var r=l.attr("data-issue-key");return e.rankCreatedIssuesAgainstIssue(o,r,true)}};e.rankCreatedIssuesAgainstIssue=function(k,l,m){var j=h.pluck(k,"issueKey");var n=j.reverse();return GH.RankController.rankIssues(f.getRankCustomFieldId(),n,m?l:null,m?null:l,{deferErrorHandling:true})};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogModel.js' */
define("jira-agile/rapid/ui/plan/backlog-model2",["require"],function(b){var c=b("jira-agile/rapid/ui/plan/issue-list-model");var a=function(d){this.issueList=new c("backlog",d,GH.VersionController.getVersionModel())};a.isBacklogModel=function(d){return d.getType()==="backlog"};a.prototype.getIssueList=function(){return this.issueList};a.prototype.getId=function(){return"backlog"};a.prototype.getType=function(){return"backlog"};return a});define("jira-agile/rapid/ui/plan/backlog-model",["require"],function(d){var c=d("underscore");var a=d("jira-agile/rapid/global-events");var e=d("jira-agile/rapid/ui/plan/sprint-model");var g=d("jira-agile/rapid/ui/plan/plan-issue-list-filtering");var h=d("jira-agile/rapid/ui/plan/issue-list-model");var f;a.on("pre-initialization",function(){f=d("jira-agile/rapid/ui/plan/sprint-controller")});var b={};b.rankCustomFieldId=undefined;b.estimationStatistic={};b.trackingStatistic={};b.sprintModels=[];b.backlogModel2=null;b.setData=function(i){b.calculateIssueLists(i);b.hasBulkChangePermission=i.hasBulkChangePermission};b.calculateIssueLists=function(m){var j=m.issues;var o=m.sprints;var p={};c.each(o,function(q){c.each(q.issuesIds,function(r){p[r]=q.id})});var k={};c.each(o,function(q){k[q.id]=[]});var i=[];c.each(j,function(q){GH.ExtraFieldsHelper.prepareExtraFields(q.extraFields);var r=p[q.id];if(r){k[r].push(q)}else{i.push(q)}});var l=[];c.each(o,function(r){var q=new e(r,k[r.id]);l.push(q)});var n=new GH.BacklogModel2(i);b.sprintModels=l;b.backlogModel2=n};b.addNewSprint=function(j){var i=new e(j,[]);b.sprintModels.push(i)};b.removeSprintAndMoveIssues=function(p){var j=b.getAllModels();var q,l;for(var m=0;m<j.length;m++){var n=j[m];if(e.isSprintModel(n)&&n.getSprintId()===p){q=n;l=j[m+1];break}}var k=false;if(q){var o=q.getIssueList().getIssuesInOrder();if(!c.isEmpty(o)){var r=l.getIssueList();r.prependIssues(o);k=GH.BacklogModel2.isBacklogModel(l)}b.sprintModels=c.reject(b.sprintModels,function(i){return i.getSprintId()===p})}return k};b.updateDataForSprint=function(k,j){var i=b.getSprintModel(k);if(i){i.setSprintData(j)}return i};b.moveSprintUp=function(i){return b._swapSprint(i,-1)};b.moveSprintDown=function(i){return b._swapSprint(i,1)};b._swapSprint=function(m,l){var j=GH.Util.indexOf(b.sprintModels,function(i){if(i.getSprintId()===m){return i}});if(GH.Util.swapArrayItems(b.sprintModels,j,j+l)){var k=b.sprintModels[j];return k.getSprintId()}return null};b.getSprintModels=function(){return b.sprintModels};b.getActiveSprintModels=function(){return c.filter(b.sprintModels,function(i){return i.getSprintData().state==="ACTIVE"})};b.getFutureSprintModels=function(){return c.filter(b.sprintModels,function(i){return i.getSprintData().state==="FUTURE"})};b.getSprintModel=function(i){return c.find(b.sprintModels,function(j){return i===j.getSprintId()})};b.getBacklogModel2=function(){return b.backlogModel2};b.getAllModels=function(){var i=b.getSprintModels();var j=b.getBacklogModel2();return c.flatten([i,j],true)};b.getAllIssueListsNew=function(){var i=[];c.each(b.getSprintModels(),function(j){i.push(j.getIssueList())});i.push(b.getBacklogModel2().getIssueList());return i};b.findModelWithIssue=function(j){var i=null;c.any(b.getAllModels(),function(k){if(k.getIssueList().isIssueValid(j)){i=k;return true}return false});return i};b.getNextModel=function(j){var l=b.getAllModels();for(var k=0;k<l.length;k++){if(j.getId()===l[k].getId()){if((k+1)<l.length){return l[k+1]}else{break}}}return null};b.calculateRankingDataForSprintMarkerMove=function(j,p,i){var n=b._calculateIncludedModelsData(j,p);if(j===p){var u=[];if(i){u=n.draggedSprintModel.getIssueList().getVisibleIssuesDataAfterKey(i)}else{u=n.draggedSprintModel.getIssueList().getAllVisibleIssuesData()}if(!c.isEmpty(u)){var l=b.getNextModel(n.draggedSprintModel);if(l){var t=e.isSprintModel(l)?l.getSprintId():null;var k=c.first(l.getIssueList().getIssuesInOrder());var s=k?k.key:null;var q=c.map(u,function(v){return v.key});if(!c.isEmpty(q)){return{sprintId:t,nextRankableId:s,issueKeys:q}}}}}else{var m=b.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.otherAffectedModels,p,i);var t=j;var r=c.last(n.draggedSprintModel.getIssueList().getIssuesInOrder());var o=r?r.key:null;var q=c.map(m,function(v){return v.key});if(!c.isEmpty(q)){return{sprintId:t,prevRankableId:o,issueKeys:q}}}return null};b.calculateTemporaryDataForSprintWithMarker=function(k,n,i){var m=b._calculateIncludedModelsData(k,n);var q=m.draggedSprintModel.getIssueList().getAllInvisibleIssuesData();var j=b.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(m.models,n,i);var p=c.flatten([q,j],true);var l=c.map(q,function(r){return r.key});var o=new h("fakesprint-"+k,p,GH.VersionController.getVersionModel());o.setHiddenBySearchIssues(l);return{issueList:o,modelsData:m}};b._calculateIncludedModelsData=function(o,m){var n=b.getSprintModels();var p=false;var k={draggedSprintModel:null,otherAffectedModels:[],models:[]};for(var l=0;l<n.length;l++){var j=n[l];var q=j.getSprintId();if(q==o){k.draggedSprintModel=j;k.models.push(j);p=true}else{if(p){if(f.isTwixieOpen(q)){k.otherAffectedModels.push(j);k.models.push(j)}}}if(q==m){break}}if(!m){k.otherAffectedModels.push(b.getBacklogModel2());k.models.push(b.getBacklogModel2())}return k};b.getIssueDataForVisisbleIssuesInModelsUpToIssueKey=function(q,n,l){var o=[];for(var m=0;m<q.length;m++){var k=q[m];var j=k.getIssueList();var p=e.isSprintModel(k);if((p&&k.getSprintId()===n)||(!p&&!n)){if(l){o.push(j.getVisibleIssuesDataBeforeIncludingKey(l))}else{}}else{o.push(j.getAllVisibleIssuesData())}}o=c.flatten(o,true);return o};b.moveIssuesNew=function(o,p,k,l){if(o.length===0){return}var m=[];var n=[];var i=p||"backlog";var j=null;c.each(b.getAllModels(),function(s){if(s.getId()==i){j=s}else{var t=s.getIssueList();var r=t.removeIssues(o);if(!c.isEmpty(r)){n.push(s);m.push(r)}}});m=c.flatten(m,true);if(j){var q=j.getIssueList();q.addIssues(m);q.reorderIssues(o,k,l);n.push(j)}return n};b.isIssueSelectable=function(i){var j=b.getAllIssueListsNew();return c.any(j,function(k){return(k.isIssueValid(i)&&k.isIssueVisible(i))})};b.getIssueIndex=function(i){var k=-1;var j=b.getAllIssueListsNew();c.any(j,function(l){if(!l.isIssueValid(i)){return false}k=l.getIssueIndex(i);return true});return k};b.canAddToSelection=function(k,i){var j=b.getAllIssueListsNew();return c.any(j,function(l){return(l.isIssueValid(i)&&l.canAddToSelection(k,i))})};b.getIssueRange=function(l,i){var k=[];var j=b.getAllIssueListsNew();c.any(j,function(m){if(!m.isIssueValid(l)||!m.isIssueValid(i)){return false}k=m.getIssueRange(l,i);return true});return k};b.getNextIssueKey=function(l){var k=b.getAllModels();for(var q=0;q<k.length;q++){var r=k[q];if(!r.getIssueList().isIssueValid(l)){continue}var m=false;var s=e.isSprintModel(r);var o=f.isTwixieOpen(r.getId());if((s&&o)||!s){m=r.getIssueList().getNextIssueKey(l);if(m){return m}}for(var p=q+1;p<k.length;p++){var n=k[p];s=e.isSprintModel(n);o=f.isTwixieOpen(n.getId());if(s&&!o){continue}m=n.getIssueList().getFirstVisibleIssueKey();if(m){break}}return m}};b.getPreviousIssueKey=function(m){var l=b.getAllModels();for(var p=0;p<l.length;p++){var q=l[p];if(!q.getIssueList().isIssueValid(m)){continue}var k=false;var r=e.isSprintModel(q);var n=f.isTwixieOpen(q.getId());if((r&&n)||!r){k=q.getIssueList().getPreviousIssueKey(m);if(k){return k}}for(var o=p-1;o>=0;o--){var s=l[o];r=e.isSprintModel(s);n=f.isTwixieOpen(s.getId());if(r&&!n){continue}k=s.getIssueList().getLastVisibleIssueKey();if(k){break}}return k}};b.getFirstRankableIssueKeyInColumn=function(i){var l=i!=null;var j=l?[i]:[];var m=false;var k=b.getAllIssueListsNew();c.any(k,function(n){if(l&&!n.isIssueValid(i)){return false}m=n.getFirstRankableIssueKeyInColumn(j);return true});return m};b.getLastRankableIssueKeyInColumn=function(i){var l=i!=null;var j=l?[i]:[];var m=false;var k=b.getAllIssueListsNew();c.any(k,function(n){if(l&&!n.isIssueValid(i)){return false}m=n.getLastRankableIssueKeyInColumn(j);return true});return m};b.getBestFitSelectionAfterRank=function(j){var i=b.findModelWithIssue(c.first(j));if(i){return i.getIssueList().getBestFitSelectionAfterRank(j)}return null};b.setRankCustomFieldId=function(i){b.rankCustomFieldId=i};b.setEstimationStatistic=function(i){b.estimationStatistic={isEnabled:i.isEnabled,typeId:i.typeId,name:i.name,renderer:i.renderer}};b.setTrackingStatistic=function(i){b.trackingStatistic={isEnabled:i.isEnabled,typeId:i.typeId,name:i.name,renderer:i.renderer}};b.isRankable=function(){return !c.isUndefined(b.rankCustomFieldId)};b.getRankCustomFieldId=function(){return b.rankCustomFieldId};b.getHiddenBySearchIssues=function(){var i={};c.each(b.getAllIssueListsNew(),function(j){var k=j.getHiddenBySearchIssues();i=c.extend(i,k)});return i};b.getIssueData=function(i){return b._anyIssueList(i,function(j){return j.getIssueData(i)})};b.getIssueIdForKey=function(i){return b._anyIssueList(i,function(j){return j.getIssueIdForKey(i)})};b._anyIssueList=function(j,k){var i=null;c.any(b.getAllIssueListsNew(),function(l){if(!l.isIssueValid(j)){return false}i=k(l);return true});return i};b.isIssueVisible=function(i){var k=b.findModelWithIssue(i);if(k){var j=k.getIssueList();return j.isIssueValid(i)&&j.isIssueVisible(i)}else{return false}};b.canManageSprints=function(){return b._canManageSprints};b.setCanManageSprints=function(i){b._canManageSprints=i};b.canCreateIssue=function(){return b._canCreateIssue};b.setCanCreateIssue=function(i){b._canCreateIssue=i};b.supportsPages=function(){return b._supportsPages};b.setSupportsPages=function(i){b._supportsPages=i};b.updateFiltering=function(){var i=b.getAllIssueListsNew();return g.applyToIssueLists(i)};b.getEpicsFilteredForVersion=function(l){var k=false;if(c.isString(l)){if(g.isNoneVersionFilterId(l)){k=true}else{l=parseInt(l,10)}}var i=GH.EpicController.getEpicModel().getEpicList();if(i.getIssueCount()===0){return[]}var m=i.getOrder();var j=[];c.each(b.getAllIssueListsNew(),function(n){if(m.length>0){var o=n.getAllIssues();c.each(o,function(p){if(p.epic&&c.contains(m,p.epic)){var q=false;if(k&&c.isEmpty(p.fixVersions)){q=true}else{if(!k&&c.contains(p.fixVersions,l)){q=true}}if(q){j.push(p.epic);m=c.without(m,p.epic);if(m.length===0){return false}}}})}});return{filtered:m,unfiltered:j}};b.removeEpicFromIssues=function(i){var j=[];c.each(i,function(k){var l=b.getIssueData(k);if(l&&l.epic){delete l.epic;j.push(l)}});return j};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintController.js' */
define("jira-agile/rapid/ui/plan/sprint-controller",["require"],function(b){var c=b("jquery");var h=b("jira-agile/rapid/global-events");var a=b("jira-agile/rapid/analytics-tracker");var g=b("jira-agile/rapid/ui/plan/sprint-view");var f=b("jira-agile/rapid/ui/plan/backlog-model");var d;var i;h.on("pre-initialization",function(){d=b("jira-agile/rapid/ui/plan/backlog-controller");i=b("jira-agile/rapid/ui/plan/BacklogView")});var e={};e.analytics=new a("gh.rapidboard.sprint.controller");e.activeSprintInlineEdits=undefined;e.init=function(){g.init();c(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,e.handleSprintUpdated);e.initInlineEdits()};e.initInlineEdits=function(){var j=function(l){var k=f.getSprintModel(l);if(k){return k.getSprintData()}else{return null}};e.activeSprintInlineEdits=new GH.Components.ActiveSprintInlineEdit(j);e.activeSprintInlineEdits.initializeInlineEdits()};e.handleSprintUpdated=function(l,k){var j=f.updateDataForSprint(k.id,k);if(j){i.redrawChangedModel(j)}};e.addSprint=function(){var j=c(this);if(GH.Util.UI.isDisabled(j)){return}GH.Util.UI.ariaDisable(j);GH.Ajax.post({url:"/sprint/"+d.rapidViewData.id}).done(function(k){e.analytics.trigger("addsprint");var l=k.success;f.addNewSprint(l);i.updateSprintsAfterAddRemove()}).always(function(){GH.Util.UI.ariaEnable(j)})};e.openStartSprintDialog=function(n){var m=GH.RapidBoard.State.getRapidViewId();var j=f.getSprintModel(n);var k=j.getIssueList();if(k.getAllIssues().length<1){return}var l=k.getNumVisibleIssues();GH.Dialogs.StartSprintDialog.showDialog(m,n,l)};e.deleteSprint=function(l){var k=GH.RapidBoard.State.getRapidViewId();var j=f.getSprintModel(l);GH.ConfirmDialog.create("ghx-remove-planned-sprint-confirm-dialog",{contentEscaping:false,content:AJS.format("Are you sure you want to delete sprint {0}{1}{2}?","<b>",AJS.escapeHTML(String(j.getName())),"</b>"),header:"Delete Sprint",onConfirmFn:function(){e.doDeleteSprint(k,l)}}).show()};e.doDeleteSprint=function(j,l){var k=f.removeSprintAndMoveIssues(l);if(k){i.draw()}else{i.updateSprintsAfterAddRemove()}e.analytics.trigger("deletesprint");GH.Ajax.del({url:"/sprint/"+l+"?rapidViewId="+j})};e.isTwixieOpen=function(j){return e._getTwixieState(j)==="open"};e.toggleTwixie=function(k){var j=e.isTwixieOpen(k);e.setTwixieOpen(k,!j)};e.setTwixieOpen=function(l,j){var k=j?"open":"closed";e._setTwixieState(l,k);g.updateTwixieState(l)};e._setTwixieState=function(l,k){var j="sprintTwix-"+l;GH.BoardState.setPerViewValue(j,k)};e._getTwixieState=function(k){var j="sprintTwix-"+k;return GH.BoardState.getPerViewValue(j,"open")};e.moveSprintUp=function(j){e._moveSprint(j,f.moveSprintUp)};e.moveSprintDown=function(j){e._moveSprint(j,f.moveSprintDown)};e._moveSprint=function(l,k){var j=k(l);if(j!=null){i.updateSprintsAfterAddRemove();GH.Ajax.put({url:"/sprint/"+l+"/swap",data:{otherSprintId:j}}).done(function(){e.analytics.trigger("movesprint")}).fail(function(){k(j);i.updateSprintsAfterAddRemove()})}};e.triggerAnalytics=function(l){if(l.changes.length===1){var j=l.changes[0];var n=j.currentSprint;var m=j.targetSprint;var k;if(n&&m&&n.state==="FUTURE"&&m.state==="FUTURE"){k="movebetweenfuturesprints"}if(n&&m&&n.state==="ACTIVE"&&m.state==="ACTIVE"){k="movebetweenactivesprints"}if(n&&m&&n.state==="FUTURE"&&m.state==="ACTIVE"){k="movefromfuturetoactivesprint"}if(n&&m&&n.state==="ACTIVE"&&m.state==="FUTURE"){k="movefromactivetofuturesprint"}if(!n&&m&&m.state==="ACTIVE"){k="addtoactivesprint"}if(!n&&m&&m.state==="FUTURE"){k="addtofuturesprint"}if(n&&!m&&n.state==="FUTURE"){k="removefromfuturesprint"}if(n&&!m&&n.state==="ACTIVE"){k="removefromactivesprint"}if(k){e.analytics.trigger(k)}}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintModel.js' */
define("jira-agile/rapid/ui/plan/sprint-model",["require"],function(b){var a=b("underscore");var d=b("jira-agile/rapid/ui/plan/issue-list-model");var c=function(f,e){this.sprintData=f;this.issueList=new d("sprint-"+f.id,e,GH.VersionController.getVersionModel())};c.isSprintModel=function(e){return e.getType()==="sprint"};c.prototype.getSprintData=function(){return this.sprintData};c.prototype.setSprintData=function(e){this.sprintData=e};c.prototype.getIssueList=function(){return this.issueList};c.prototype.getId=function(){return this.sprintData.id};c.prototype.getType=function(){return"sprint"};c.prototype.getName=function(){return this.sprintData.name};c.prototype.getSprintId=function(){return this.sprintData.id};c.prototype.isFutureSprint=function(){return this.sprintData.state==="FUTURE"};c.prototype.isActiveSprint=function(){return this.sprintData.state==="ACTIVE"};c.prototype.getLinkedPagesCount=function(){var g=this.sprintData.linkedPagesCount;var e=GH.PageIssueLinksModel.list(this.sprintData.id).length;var f=g;if(!a.isNumber(g)||g<e){f=e}return f};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.js' */
define("jira-agile/rapid/ui/plan/assigned-work-dialog",["require"],function(b){var a=b("underscore");var c=b("jira/dialog/form-dialog");var d=c.extend({_getDefaultOptions:function(){return a.extend(this._super(),{content:function(f){var e=GH.tpl.assignedWorkDialog.renderDialogContents({assignedWorkStats:this.options.assignedWorkStats,sprintName:this.options.sprintName,estimateStatisticName:this.options.estimateStatisticName});f(e)}})}});return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.soy' */
// This file was automatically generated from AssignedWorkDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.assignedWorkDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.assignedWorkDialog == 'undefined') { GH.tpl.assignedWorkDialog = {}; }


GH.tpl.assignedWorkDialog.renderDialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml("Workload by assignee") + ' - ' + soy.$$escapeHtml(opt_data.sprintName) + '</h2><div class="form-body ghx-assigned-work-table"><table class="aui"><thead><tr><th>' + soy.$$escapeHtml("Assignee") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Issues") + '</th>' + ((opt_data.assignedWorkStats.all.totalEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</th>' : '') + '</tr></thead><tbody>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.unassigned, noAssigneeText: '' + soy.$$escapeHtml("Unassigned")});
  var assignedWorkEntryList22 = opt_data.assignedWorkStats.assigned;
  var assignedWorkEntryListLen22 = assignedWorkEntryList22.length;
  for (var assignedWorkEntryIndex22 = 0; assignedWorkEntryIndex22 < assignedWorkEntryListLen22; assignedWorkEntryIndex22++) {
    var assignedWorkEntryData22 = assignedWorkEntryList22[assignedWorkEntryIndex22];
    output += GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: assignedWorkEntryData22});
  }
  output += '</tbody><tfoot>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.all, noAssigneeText: '' + soy.$$escapeHtml("Total")}) + '</tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderDialogContents.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderDialogContents';
}


GH.tpl.assignedWorkDialog.renderTableRow = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.noAssigneeText) ? '<span class="ghx-no-avatar">' + soy.$$escapeHtml(opt_data.noAssigneeText) + '</span>' : GH.tpl.avatar.renderIssueAvatar({issue: opt_data.assignedWorkEntry.issues[0]}) + soy.$$escapeHtml(opt_data.assignedWorkEntry.assigneeName)) + '</td><td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.issues.length) + '</td>' + ((opt_data.assignedWorkEntry.totalEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalEstimateText) + '</td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderTableRow.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderTableRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.js' */
define("jira-agile/rapid/ui/plan/sprint-view",["require"],function(c){var k=c("underscore");var j=c("jira-agile/rapid/global-events");var a=c("jira-agile/rapid/analytics-tracker");var b=c("jira-agile/rapid/ui/plan/sprint-model");var d=c("jira-agile/rapid/ui/plan/assigned-work-dialog");var h=c("jira-agile/rapid/ui/plan/backlog-model");var e=c("jira-agile/rapid/ui/plan/backlog-statistics");var g;var f;j.on("pre-initialization",function(){g=c("jira-agile/rapid/ui/plan/sprint-controller");f=c("jira-agile/rapid/ui/plan/backlog-controller")});var i={};i.init=function(){var l=AJS.$(document);l.on("click",".js-sprint-start",i.handleStartSprintClick);l.on("click",".js-sprint-container .js-view-entity-pages",i.handleViewSprintLinkedPages);l.on("click",".js-assigned-work-dialog-trigger",i.handleViewAllAssignedWork)};i.handleStartSprintClick=function(l){if(AJS.$(l.target).hasClass("disabled")){return}var m=i.getSprintIdForElement(l.target);g.openStartSprintDialog(m)};i.handleViewSprintLinkedPages=function(n){var l=AJS.$(n.target);var o=i.getSprintIdForElement(l);var m=true;GH.LinkedPagesController.showDialogForSprint(GH.LinkedPagesController.PLAN,o,l)};i.handleDeleteSprintClick=function(l){if(AJS.$(l.target).hasClass("disabled")){return}var m=i.getSprintIdForElement(l.target);g.deleteSprint(m)};i.handleViewAllAssignedWork=function(n){n.preventDefault();var o=i.getSprintIdForElement(n.target);var l=h.getSprintModel(o);var m=new d({assignedWorkStats:e.getAssignedWorkStats(l.getIssueList()),sprintName:l.getName(),estimateStatisticName:h.estimationStatistic.name});m.show();GH.Tooltip.hide(".js-assigned-work-dialog-trigger");new a("gh.assignedWork.dialog").trigger("show")};i.registerTwixies=function(){AJS.$("#ghx-backlog").undelegate(".ghx-backlog-container .ghx-expander","click.sprintTwix");AJS.$("#ghx-backlog").delegate(".ghx-backlog-container .ghx-expander","click.sprintTwix",i.handleTwixieClick)};i.handleTwixieClick=function(m){var l=AJS.$(this).closest(".ghx-backlog-container");var n=l.attr("data-sprint-id");g.toggleTwixie(n)};i.updateTwixieState=function(n){var l=g.isTwixieOpen(n);var m=AJS.$('.js-sprint-container[data-sprint-id="'+n+'"]');if(l){m.removeClass("ghx-closed").addClass("ghx-open")}else{m.removeClass("ghx-open").addClass("ghx-closed")}};i.updateSprintViewForModel=function(l){i._updateSprint(l)};i.renderAllSprints=function(n){var m=h.getSprintModels();var l=AJS.$("#ghx-backlog").find(".ghx-sprint-group").empty();k.each(m,function(o){var q=AJS.$(GH.tpl.sprintview.renderSprintContainer({sprintData:o.getSprintData(),isMetaExpanded:g.isTwixieOpen(o.getSprintId())}));var p=i._renderSprintContent(o,n);q.append(p);l.append(q)});i.enableTooltips()};i._updateSprint=function(l){GH.Logger.log("Redrawing sprint "+l.getSprintId(),GH.Logger.Contexts.ui);var n=AJS.$('.js-sprint-container[data-sprint-id="'+l.getSprintId()+'"]');if(n.length===0){return}var m=f.calculateIssueRenderData();var o=i._renderSprintContent(l,m);n.empty().append(o);i.enableTooltips()};i._renderSprintContent=function(l,p){var o=i.calculateSprintIssueListStats(l,l.getIssueList());var m=l.getSprintData();var n=i._getManageSprintData(m);var q={sprintData:m,manageSprintData:n,isRankable:h.isRankable(),supportsPages:h.supportsPages(),linkedPagesCount:l.getLinkedPagesCount(),issueKeys:l.getIssueList().getVisibleRankables(),issues:l.getIssueList().getAllIssues(),issueListStats:o,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:p,statLabel:h.estimationStatistic.name,showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()};return AJS.$(GH.tpl.sprintview.renderSprintContent(q))};i.updateSprintStatistics=function(){var l=h.getSprintModels();k.each(l,function(m){var n=i.calculateSprintIssueListStats(m,m.getIssueList());i._updateSprintStatisticsDom(m,n,false)})};i.updateSprintStatisticForDraggedSprint=function(l,m){var n=i.calculateSprintIssueListStats(l,m);i._updateSprintStatisticsDom(l,n,true)};i.markAsOvertaken=function(l){var n=false;var m=[];k.each(l,function(o){if(b.isSprintModel(o)){m.push(o.getSprintId())}else{n=true}});AJS.$(".js-sprint-container").each(function(){var o=AJS.$(this);if(k.contains(m,i.getSprintIdForElement(o))){o.addClass("ghx-overtaken")}else{o.removeClass("ghx-overtaken")}});AJS.$(".ghx-everything-else").each(function(){var o=AJS.$(this);if(n){o.addClass("ghx-overtaken")}else{o.removeClass("ghx-overtaken")}})};i._updateSprintStatisticsDom=function(n,q,m){var o=AJS.$('.js-sprint-container[data-sprint-id="'+n.getSprintId()+'"]');var l=i._renderSprintIssueCount(q);o.find(".ghx-issue-count").replaceWith(l);o.find(".ghx-assigned-work-stats").replaceWith(GH.tpl.sprintview.renderAssignedWork({assignedWork:q.assignedWorkStats.assigned,estimateStatisticName:h.estimationStatistic.name}));if(n.isFutureSprint()){var p=i._renderFutureSprintFooterContent(q);o.find(".js-marker-divider").empty().append(p);if(m){AJS.$('.js-marker-divider[data-sprint-id="'+n.getSprintId()+'"]').empty().append(p)}}i.enableTooltips()};i._renderSprintMetaInfos=function(l){return GH.tpl.sprintview.renderSprintMetaInfos({sprintData:l.getSprintData()})};i._renderSprintIssueCount=function(l){return GH.tpl.planissuelist.renderIssueCount({issueListStats:l})};i._renderFutureSprintFooterContent=function(l){return GH.tpl.sprintview.renderFutureSprintFooterContent({issueListStats:l})};i._getManageSprintData=function(o){var s=h.getActiveSprintModels();var r=h.getFutureSprintModels();var n=s.length>0;var m=GH.RapidBoard.parallelSprints;var l=r.length>0?r[0].getSprintData().id:null;var p=(m||!n)&&o.canUpdateSprint;var q=h.canManageSprints();return{canStartSprint:p,canUpdateSprint:o.canUpdateSprint,canManageSprints:q,hasOpenSprints:n,parallelSprints:m,firstFutureSprintId:l}};i.calculateSprintIssueListStats=function(l,n){var o=e.getIssueListStats(n,true,l.isActiveSprint());if(l.isFutureSprint()){var m=e.getIssueListEstimateStatistics(n);k.extend(o,m)}else{o.progressIndicators=e.calculateSprintProgress(n,f.rapidViewConfig.columns,h.estimationStatistic)}o.assignedWorkStats=e.getAssignedWorkStats(n);return o};i.getSprintIdForElement=function(m){var l=AJS.$(m).closest(".js-sprint-container");if(!l.length){return null}return parseInt(l.attr("data-sprint-id"),10)};i.getSprintIdForMarker=function(m){var l=AJS.$(m).closest(".js-marker");if(!l.length){return null}var n=parseInt(l.attr("data-sprint-id"),10);return n};i.enableTooltips=function(){AJS.$(".js-sprint-start").tooltip({html:true,title:"data-tooltip"});GH.Tooltip.tipsify({selector:".js-assigned-work-dialog-trigger"})};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.soy' */
// This file was automatically generated from SprintView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintview == 'undefined') { GH.tpl.sprintview = {}; }


GH.tpl.sprintview.renderSprintContainer = function(opt_data, opt_ignored) {
  return '<div data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '" class="ghx-backlog-container ' + soy.$$escapeHtml(opt_data.sprintData.state == 'FUTURE' ? 'ghx-sprint-planned' : 'ghx-sprint-active') + ' js-sprint-container ' + soy.$$escapeHtml(opt_data.isMetaExpanded ? 'ghx-open' : 'ghx-closed') + '" ></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContainer.soyTemplateName = 'GH.tpl.sprintview.renderSprintContainer';
}


GH.tpl.sprintview.renderSprintContent = function(opt_data, opt_ignored) {
  return GH.tpl.sprintview.renderSprintHeader(opt_data) + '<div class="ghx-meta' + ((! opt_data.manageSprintData.canManageSprints) ? ' ghx-disabled' : '') + '" ><div class="ghx-sprint-info aui-group aui-group-split"><div class="ghx-dates aui-item">' + ((opt_data.sprintData.state != 'FUTURE') ? GH.tpl.sprintview.renderSprintMetaInfos(opt_data) : '') + '</div>' + ((opt_data.supportsPages) ? GH.tpl.sprintview.renderSprintMetaLinkedTrigger(opt_data) : '') + '</div>' + GH.tpl.sprintview.renderAssignedWork({assignedWork: opt_data.issueListStats.assignedWorkStats.assigned, estimateStatisticName: opt_data.statLabel}) + '<div class="ghx-issues js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '">' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div>' + ((opt_data.sprintData.state == 'FUTURE') ? '<div class="ghx-marker js-parent-drag js-marker ' + ((! opt_data.isRankable) ? 'ghx-not-rankable' : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + GH.tpl.sprintview.renderFutureSprintFooter(opt_data) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContent.soyTemplateName = 'GH.tpl.sprintview.renderSprintContent';
}


GH.tpl.sprintview.renderSprintHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-sprint-header" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="ghx-expander"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-name">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprintData.name, displayValue: opt_data.sprintData.name}) + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + ((opt_data.sprintData.state == 'FUTURE') ? GH.tpl.sprintview.renderFutureSprintControls(opt_data) : GH.tpl.sprintview.renderSprintProgress(opt_data)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintHeader.soyTemplateName = 'GH.tpl.sprintview.renderSprintHeader';
}


GH.tpl.sprintview.renderFutureSprintControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls aui-group">' + GH.tpl.sprintview.renderStartSprintItem(opt_data) + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintControls.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintControls';
}


GH.tpl.sprintview.renderSprintMetaInfos = function(opt_data, opt_ignored) {
  return '<div class="ghx-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprintData.startDate, displayValue: opt_data.sprintData.startDate}) + '</div><div class="ghx-divider">&bull;</div><div class="ghx-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprintData.endDate, displayValue: opt_data.sprintData.endDate}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaInfos.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaInfos';
}


GH.tpl.sprintview.renderSprintMetaLinkedTrigger = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: "Create and view pages linked to this sprint"}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaLinkedTrigger.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaLinkedTrigger';
}


GH.tpl.sprintview.renderSprintProgress = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueListStats.progressIndicators) {
    output += '<div class="ghx-badge-group ghx-right">';
    var indicatorList124 = opt_data.issueListStats.progressIndicators;
    var indicatorListLen124 = indicatorList124.length;
    for (var indicatorIndex124 = 0; indicatorIndex124 < indicatorListLen124; indicatorIndex124++) {
      var indicatorData124 = indicatorList124[indicatorIndex124];
      var state__soy125 = '' + ((indicatorIndex124 == 0) ? ' ghx-not-started' : (indicatorIndex124 == indicatorListLen124 - 1) ? ' ghx-done' : ' ghx-in-progress');
      var text__soy133 = '' + ((indicatorData124.total.text) ? soy.$$escapeHtml(indicatorData124.total.text) : ' ');
      output += aui.badges.badge({text: text__soy133, extraAttributes: {title: indicatorData124.title}, extraClasses: [state__soy125]});
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintProgress.soyTemplateName = 'GH.tpl.sprintview.renderSprintProgress';
}


GH.tpl.sprintview.renderProgressIndicatorTitle = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.indicator.name) + ': ' + soy.$$escapeHtml(opt_data.indicator.total.text) + ' ' + soy.$$escapeHtml("of") + ' ' + soy.$$escapeHtml(opt_data.allIndicatorsTotalText) + ' (' + soy.$$escapeHtml(opt_data.statLabel) + ')';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderProgressIndicatorTitle.soyTemplateName = 'GH.tpl.sprintview.renderProgressIndicatorTitle';
}


GH.tpl.sprintview.renderStartSprintItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.manageSprintData.firstFutureSprintId == opt_data.sprintData.id || opt_data.manageSprintData.parallelSprints) ? '<div class="aui-item">' + ((opt_data.manageSprintData.canStartSprint && opt_data.issueListStats.hasIssues) ? '<button class="js-sprint-start aui-button" data-tooltip="">' + soy.$$escapeHtml("Start Sprint") + '</button>' : '<button class="js-sprint-start aui-button disabled" aria-disabled="true"' + ((! opt_data.issueListStats.hasIssues) ? 'data-tooltip="' + soy.$$escapeHtml("Sprint cannot be started because it contains no issues") + '"' : (opt_data.manageSprintData.hasOpenSprints && ! opt_data.manageSprintData.parallelSprints) ? 'data-tooltip="' + soy.$$escapeHtml("Can be planned but not started until the completion of above active sprint") + '"' : (! opt_data.manageSprintData.canStartSprint) ? 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"' : '') + '>' + soy.$$escapeHtml("Start Sprint") + '</button>') + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderStartSprintItem.soyTemplateName = 'GH.tpl.sprintview.renderStartSprintItem';
}


GH.tpl.sprintview.renderSprintActions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-item">';
  var url__soy186 = soy.$$escapeHtml("") + '/rest/greenhopper/1.0/xboard/plan/sprints/actions?sprintId=' + soy.$$escapeHtml(opt_data.sprintData.id);
  output += aui.buttons.button({extraClasses: ['aui-button-compact', 'js-sprint-actions-trigger'], tagName: 'a', text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', extraAttributes: {href: url__soy186, 'data-sprint-id': opt_data.sprintData.id}}) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintActions.soyTemplateName = 'GH.tpl.sprintview.renderSprintActions';
}


GH.tpl.sprintview.renderAssignedWork = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-assigned-work-stats">';
  var assignedWorkEntryList200 = opt_data.assignedWork;
  var assignedWorkEntryListLen200 = assignedWorkEntryList200.length;
  for (var assignedWorkEntryIndex200 = 0; assignedWorkEntryIndex200 < assignedWorkEntryListLen200; assignedWorkEntryIndex200++) {
    var assignedWorkEntryData200 = assignedWorkEntryList200[assignedWorkEntryIndex200];
    output += GH.tpl.avatar.renderIssueAvatar({issue: assignedWorkEntryData200.issues[0], tooltipHtml: soy.$$escapeHtml(assignedWorkEntryData200.assigneeName) + '<table>' + ((assignedWorkEntryData200.totalEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData200.totalEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</td></tr>' : '') + '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData200.issues.length) + '</td><td>' + soy.$$escapeHtml("Issues") + '</td></tr></table>'});
  }
  if (opt_data.assignedWork.length) {
    var tooltip__soy221 = '' + soy.$$escapeHtml("View summary of assigned work");
    output += aui.buttons.button({extraAttributes: {'data-tooltip': tooltip__soy221}, extraClasses: ['js-assigned-work-dialog-trigger', 'aui-button-subtle', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', iconText: tooltip__soy221});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAssignedWork.soyTemplateName = 'GH.tpl.sprintview.renderAssignedWork';
}


GH.tpl.sprintview.renderFutureSprintFooter = function(opt_data, opt_ignored) {
  return '<div class="js-marker-divider js-marker" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + GH.tpl.sprintview.renderFutureSprintFooterContent(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooter.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooter';
}


GH.tpl.sprintview.renderFutureSprintFooterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-stats ' + ((! opt_data.issueListStats.allVisible) ? 'ghx-is-filtered' : '') + '"><div class="ghx-stat-total"><span class="ghx-label">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}",opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format("{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible",opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount))) + '</span>';
  if (opt_data.issueListStats.tracking.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml("Remaining") + '</span>';
    var label__soy255 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.tracking.name) : soy.$$escapeHtml(AJS.format("{0} of {1} {2} visible",opt_data.issueListStats.tracking.visible.formatted,opt_data.issueListStats.tracking.total.formatted,opt_data.issueListStats.tracking.name)));
    var badgetext__soy263 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.tracking.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted));
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy263, extraAttributes: {title: label__soy255}});
  }
  if (opt_data.issueListStats.estimate.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml("Estimate") + '</span>';
    var label__soy280 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.estimate.name) : soy.$$escapeHtml(AJS.format("{0} of {1} {2} visible",opt_data.issueListStats.estimate.visible.formatted,opt_data.issueListStats.estimate.total.formatted,opt_data.issueListStats.estimate.name)));
    var badgetext__soy288 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.estimate.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted));
    output += aui.badges.badge({text: badgetext__soy288, extraAttributes: {title: label__soy280}});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooterContent.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooterContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.js' */
define("jira-agile/rapid/ui/component/sprintactions/sprint-actions",["require"],function(d){var f=d("jquery");var c=d("underscore");var b=d("jira-agile/rapid/ui/plan/backlog-model");var e=d("jira-agile/rapid/ui/plan/sprint-controller");var a=AJS.Dropdown;var g=function(){};g.CORE_SPRINT_ACTIONS={"gh-sprint-move-up":e.moveSprintUp,"gh-sprint-move-down":e.moveSprintDown,"gh-sprint-delete":e.deleteSprint,"gh-sprint-delete-disabled":f.noop};g.prototype={createDropdown:function(){var h=this;a.create({trigger:f(".js-sprint-actions-trigger"),ajaxOptions:{dataType:"json",cache:false,formatSuccess:function(i){var k=i.id;var j=h.getSprintData(k);i.sections=h.filterActions(i.sections,j);return f(GH.tpl.component.sprintactions.sprintActionsDropdown(i))}}});f(document).off("click",".js-sprint-action");f(document).on("click",".js-sprint-action",function(i){h.clickSprintAction(i)})},getSprintData:function(l){var j=false;var i=false;var k=b.getFutureSprintModels();var h=b.getSprintModel(l);if(k.length>1&&h.isFutureSprint()){j=k[0].getSprintId()!==l;i=c.last(k).getSprintId()!==l}return{canMoveUp:j,canMoveDown:i,canManageSprints:b.canManageSprints()}},filterActions:function(i,h){c.each(i,function(j){j.actions=c.reject(j.actions,function(k){return(k.id==="gh-sprint-move-up"&&!(h.canMoveUp&&h.canManageSprints))||(k.id==="gh-sprint-move-down"&&!(h.canMoveDown&&h.canManageSprints))});c.each(j.actions,function(k){k.disabled=k.styleClass&&k.styleClass.indexOf("disabled")>=0})});return c.filter(i,function(j){return j.actions.length>0})},clickSprintAction:function(h){var l=f(h.currentTarget);var k=l.data("sprint-id");var j=l.attr("id");var i=g.CORE_SPRINT_ACTIONS[j];if(i){h.preventDefault();i(k)}}};return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.soy' */
// This file was automatically generated from SprintActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintactions == 'undefined') { GH.tpl.component.sprintactions = {}; }


GH.tpl.component.sprintactions.sprintActionsDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list js-sprint-actions-list">';
  if (opt_data.sections && opt_data.sections.length > 0) {
    var sectionList6 = opt_data.sections;
    var sectionListLen6 = sectionList6.length;
    for (var sectionIndex6 = 0; sectionIndex6 < sectionListLen6; sectionIndex6++) {
      var sectionData6 = sectionList6[sectionIndex6];
      output += '<ul class=" aui-list-section' + ((sectionIndex6 == sectionListLen6 - 1) ? ' aui-last' : '') + '">';
      var actionList12 = sectionData6.actions;
      var actionListLen12 = actionList12.length;
      for (var actionIndex12 = 0; actionIndex12 < actionListLen12; actionIndex12++) {
        var actionData12 = actionList12[actionIndex12];
        output += '<li class="aui-list-item' + ((actionData12.disabled) ? ' disabled' : '') + '"><a href="' + soy.$$escapeHtml(actionData12.url) + '" class="aui-list-item-link js-sprint-action' + ((actionData12.styleClass) ? ' ' + soy.$$escapeHtml(actionData12.styleClass) : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(actionData12.id) + '"' + ((actionData12.desc) ? 'title="' + soy.$$escapeHtml(actionData12.desc) + '"' : '') + '>' + soy.$$escapeHtml(actionData12.name) + '</a></li>';
      }
      output += '</ul>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintactions.sprintActionsDropdown.soyTemplateName = 'GH.tpl.component.sprintactions.sprintActionsDropdown';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanKBShortcuts.js' */
define("jira-agile/rapid/ui/plan/plan-kb-shortcuts",["require"],function(d){var g=d("jira-agile/rapid/analytics-tracker");var a=d("jira-agile/rapid/ui/plan/backlog-model");var c=d("jira-agile/rapid/ui/plan/backlog-selection-controller");var h=d("jira-agile/rapid/ui/plan/plan-controller");var f=d("jira-agile/rapid/ui/plan/plan-drag-and-drop");var e=d("jira-agile/rapid/ui/plan/sprint-model");var b={};b.analytics=new g("gh.rapidboard.rankissues");b.sendToTop=function(m){if(!a.isRankable()){return}var i=c.getSelectedIssueKey();if(!i){return}var l=a.getFirstRankableIssueKeyInColumn(i);var o=c.getSelectedIssuesInOrder();b.analytics.trigger("sendToTop"+(m?m:""),o.length);var k=a.getBestFitSelectionAfterRank(o);if(k){c.selectIssue(k)}if(!l){return}var j=a.findModelWithIssue(i);var n=e.isSprintModel(j);var p=n?j.getSprintId():null;f.sprintRankIssues(o,p,null,l).done(function(q){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")}).fail(function(){h.reload()})};b.sendToBottom=function(m){if(!a.isRankable()){return}var i=c.getSelectedIssueKey();if(!i){return}var j=a.getLastRankableIssueKeyInColumn(i);var o=c.getSelectedIssuesInOrder();b.analytics.trigger("sendToBottom"+(m?m:""),o.length);var l=a.getBestFitSelectionAfterRank(o);if(!j){return}if(l){c.selectIssue(l)}var k=a.findModelWithIssue(i);var n=e.isSprintModel(k);var p=n?k.getSprintId():null;f.sprintRankIssues(o,p,j,null).done(function(q){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")}).fail(function(){h.reload()})};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogSelectionController.js' */
define("jira-agile/rapid/ui/plan/backlog-selection-controller",["require"],function(b){var e=b("jquery");var i=b("jira-agile/rapid/global-events");var h=b("jira-agile/rapid/ui/plan/backlog-model");var c=b("jira-agile/rapid/ui/plan/plan-issue-list-view");var g=b("jira-agile/rapid/ui/plan/plan-context-menu-controller");var f;var j;i.on("pre-initialization",function(){f=b("jira-agile/rapid/ui/plan/backlog-controller");j=b("jira-agile/rapid/ui/plan/BacklogView")});var a={};a.selectionDataModel={};a.selectionManager=undefined;a.init=function(){a.selectionDataModel={isIssueValid:h.isIssueSelectable,getIssueIndex:h.getIssueIndex,canAddToSelection:h.canAddToSelection,getIssueRange:h.getIssueRange};a.selectionManager=new GH.IssueSelectionManager(a.selectionDataModel,"backlog.selectedIssues");e(document).delegate(j.containerSelector+" .js-issue","click",a.handleIssueClick);e(document).delegate(j.containerSelector+" .js-issue","contextmenu",a.handleIssueContextMenu)};a.handleIssueContextMenu=function(m){var k=c.getIssueKey(e(this));var l=a.isInSelection(k);if(!l){a.selectionManager.handleIssueClick(GH.MouseUtils.getMetaKeys(m),k);a.updateUIAndState({openDetailsView:false,doScroll:true})}g.showContextMenuAt(m)};a.handleIssueClick=function(m){var k=c.getIssueKey(e(this));var l=e(m.target).hasClass("js-key-link");var n=!GH.MouseUtils.openInSameTab(m);if(l&&n){return true}m.preventDefault();a.handleIssueSelectionEvent(m,k,true)};a.validateCurrentSelection=function d(){var k=a.selectionManager.validateCurrentSelection();if(k){GH.RapidBoard.State.replaceState();a.deferredPushState()}return k};a.handleIssueSelectionEvent=function(p,m,l){var k=GH.MouseUtils.getMetaKeys(p);var o=a.selectionManager.handleIssueClick(k,m);var n=GH.IssueSelectionManager.getMultiSelectType(k);if(n){l=false}if(o){a.updateUIAndState({openDetailsView:l,doScroll:false})}};a.selectIssue=function(k){a.selectionManager.selectIssue(k);a.updateUIAndState({openDetailsView:false,doScroll:true})};a.clearSelection=function(){a.selectIssue(null)};a.selectNextIssue=function(){var l=null;var k=a.getSelectedIssueKey();if(k){l=h.getNextIssueKey(k)}else{l=h.getFirstRankableIssueKeyInColumn(null)}if(!l){l=k}a.selectIssue(l)};a.selectPreviousIssue=function(){var l=null;var k=a.getSelectedIssueKey();if(k){l=h.getPreviousIssueKey(k)}else{l=h.getLastRankableIssueKeyInColumn(null)}if(!l){l=k}a.selectIssue(l)};a.updateUIAndState=function(k){f.updateUIAfterSelectionChange(k);a.deferredPushState()};a.pushTimeoutHandler=undefined;a.deferredPushState=function(){var k=1000;var l=new Date();if(GH.RapidBoard.UrlState.pushTimeoutHandler){window.clearTimeout(GH.RapidBoard.UrlState.pushTimeoutHandler)}GH.RapidBoard.UrlState.pushTimeoutHandler=window.setTimeout(function(){GH.RapidBoard.UrlState.deferredPushState(l)},k)};a.ensureIssueSelected=function(m,k){if(!a.selectionManager.isInSelection(k)){if(h.canAddToSelection(a.selectionManager.getSelectedIssueKeys(),k)){a.handleIssueSelectionEvent(m,k)}else{a.selectionManager.selectIssue(k);var l=true;if(!GH.RapidBoard.State.isDetailsViewPlanOpened()){l=false}a.updateUIAndState({openDetailsView:l,doScroll:true})}}};a.getSelectedIssueKeys=function(){return a.selectionManager.getSelectedIssueKeys()};a.getSelectedIssueKey=function(){return a.selectionManager.getSelectedIssueKey()};a.isInSelection=function(k){return a.selectionManager.isInSelection(k)};a.setIssueFromUrlState=function(k){a.selectionManager.selectIssue(k)};a.getSelectedIssuesInOrder=function(){return a.selectionManager.getSelectedIssuesInOrder()};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueListModel.js' */
define("jira-agile/rapid/ui/plan/issue-list-model",["require"],function(b){var a=b("underscore");var c=function(g,e,d){this.fixVersions=d;var f=this.data={};f.id=g;f.issueByKey={};f.order=[];f.visibleIssueKeys=new GH.Collection.OrderedSet();f.hiddenIssueKeys={};this.addIssues(e)};c.prototype.addIssues=function(f){var e=this.data.issueByKey;var d=this.data.order;a.each(f,function(h){if(this.fixVersions){this.processFixVersion(h)}var g=h.key;e[g]=h;d.push(g)},this);this.buildCache()};c.prototype.prependIssues=function(f){var e=this.data.issueByKey;var d=this.data.order;a.each(f,function(i){if(this.fixVersions){this.processFixVersion(i)}var h=i.key;e[h]=i},this);var g=a.map(f,function(h){return h.key});this.data.order=a.flatten([g,d],true);this.buildCache()};c.getOrderKeyForMarkerId=function(d){return"%%-"+d};c.prototype.getIssuesInOrder=function(){var e=[];var d=this.data.order;var f=this.data.issueByKey;a.forEach(d,function(h,g){e.push(f[h])},this);return e};c.prototype.getId=function(){return this.data.id};c.prototype.buildCache=function(){var d=this.data.visibleIssueKeys.clear();var e=this.data.orderByKey={};a.forEach(this.data.order,function(h,g){if(!this._isMarkerId(h)){e[h]=g;var f=this.data.issueByKey[h];if(f&&!f.hidden){d.push(h)}}else{e[c.getOrderKeyForMarkerId(h)]=g}},this)};c.prototype._isMarkerId=function(d){return a.isNumber(d)};c.prototype.indexOfRankable=function(e){if(this._isMarkerId(e)){e=c.getOrderKeyForMarkerId(e)}var d=this.data.orderByKey[e];return !a.isUndefined(d)?d:-1};c.prototype.containsRankable=function(d){return this.indexOfRankable(d)!==-1};c.prototype.insertMarker=function(h,f){var e=0;var d=this.data.order;if(this.containsRankable(h)){d=a.without(d,h)}if(f){e=a.indexOf(d,f);if(e<0){e=0}else{e++}}if(e===0){d.unshift(h)}else{d=a.flatten([d.slice(0,e),h,d.slice(e)])}var g={};a.forEach(d,function(j,i){if(this._isMarkerId(j)){j=c.getOrderKeyForMarkerId(j)}g[j]=i},this);this.data.order=d;this.data.orderByKey=g};c.prototype.removeMarker=function(f){if(this.containsRankable(f)){var d=a.without(this.data.order,f);var e={};a.forEach(d,function(h,g){if(this._isMarkerId(h)){h=c.getOrderKeyForMarkerId(h)}e[h]=g},this);this.data.order=d;this.data.orderByKey=e}};c.prototype.reorderIssues=function(g,i,h){var e=this.data.order;var k;if(i){k=a.indexOf(e,i);k++}else{k=a.indexOf(e,h)}var j=e.slice(0,k);var d=e.slice(k);j=this.withoutArray(j,g);d=this.withoutArray(d,g);var f=a.flatten([j,g,d]);this.setOrder(f)};c.prototype.getRankableBeforeId=function(d){var e=this.indexOfRankable(d);if(e>0){return this.data.order[e-1]}return false};c.prototype.isIssueHiddenBySearchByKey=function(d){return this.data.hiddenIssueKeys[d]||false};c.prototype.updateIssue=function(d){GH.ExtraFieldsHelper.prepareExtraFields(d.extraFields);this.processFixVersion(d);if(a.isUndefined(this.data.issueByKey[d.key])){return false}this.data.issueByKey[d.key]=d;this.buildCache();return true};c.prototype.processFixVersion=function(d){d.fixVersionsUI=this.fixVersions.getVersionsForIds(d.fixVersions)};c.prototype.getNumVisibleIssues=function(){return this.getNumVisibleIssuesBeforeRankable(false)};c.prototype.getNumVisibleIssuesBeforeRankable=function(f){var d=this;var e;if(f!==false){var h=this.indexOfRankable(f);if(h<0){return false}e=d._first(d.data.order,h)}else{e=d.data.order}var g=a.filter(e,function(i){return d.isIssueVisible(i)});return g.length};c.prototype.getAllIssues=function(){return this.data.issueByKey};c.prototype.getVisibleIssues=function(){var d={};a.each(this.data.issueByKey,function(f,e){if(this.isIssueVisible(e)){d[e]=f}},this);return d};c.prototype.getVisibleRankables=function(){var d=this;return a.filter(d.data.order,function(e){if(d._isMarkerId(e)){return true}return d.getIssueIndex(e)!==-1})};c.prototype.getVisibleIssueKeys=function(){return this.data.visibleIssueKeys};c.prototype.getHiddenBySearchIssues=function(){return this.data.hiddenIssueKeys};c.prototype.setHiddenBySearchIssues=function(d){this.data.hiddenIssueKeys=d};c.prototype.getIssueKeyAtIndex=function(e){var d=this.data.visibleIssueKeys;return d.length>e?d.get(e):d.last()};c.prototype.getFirstVisibleIssueKey=function(){var e=this.data.visibleIssueKeys;for(var f=0;f<e.length;f++){var d=e.get(f);if(!this.isIssueHiddenBySearchByKey(d)){return d}}return false};c.prototype.getLastVisibleIssueKey=function(){var e=this.data.visibleIssueKeys;for(var f=e.length-1;f>0;f--){var d=e.get(f);if(!this.isIssueHiddenBySearchByKey(d)){return d}}return false};c.prototype.getIssueIndex=function(d){return this.data.visibleIssueKeys.indexOf(d)};c.prototype.getIssueData=function(d){return this.data.issueByKey[d]};c.prototype.getIssueDataForId=function(d){return a.find(this.data.issueByKey,function(e){return e.id===d})||undefined};c.prototype.getIssueIdForKey=function(d){var e=this.getIssueData(d);if(e){return e.id}return undefined};c.prototype.isIssueVisible=function(d){return this.getIssueIndex(d)!==-1&&!this.isIssueHiddenBySearchByKey(d)};c.prototype.isIssueValid=function(d){if(a.isString(d)){return !a.isUndefined(this.data.issueByKey[d])}else{return a.any(this.data.issueByKey,function(e){return d==e.id})}};c.prototype.areIssuesValid=function(e){if(e.length===0){return false}var d=this;return a.all(e,function(f){return d.isIssueValid(f)})};c.prototype.getFirstRankableIssueKeyInColumn=function(g){var f;if(a.isArray(g)){f=g}else{f=a.isString(g)?[g]:[]}var d=this.data.visibleIssueKeys;for(var h=0,e=d.length;h<e;h++){if(a.indexOf(f,d.get(h))===-1){return d.get(h)}}return false};c.prototype.getLastRankableIssueKeyInColumn=function(f){var e;if(a.isArray(f)){e=f}else{e=a.isString(f)?[f]:[]}var d=this.data.visibleIssueKeys;for(var g=d.length-1;g>=0;g--){if(a.indexOf(e,d.get(g))===-1){return d.get(g)}}return false};c.prototype.getBestFitSelectionAfterRank=function(e){var d=this.getNextIssueKeyAfterRank(e);if(!d){d=this.getPreviousIssueKeyAfterRank(e)}return d};c.prototype.getNextIssueKeyAfterRank=function(e){var d=a.last(e);return this.getNextIssueKey(d)};c.prototype.getNextIssueKey=function(e){var f=this.getIssueIndex(e);var d=this.data.visibleIssueKeys;while(++f<d.length){var g=d.get(f);if(!this.isIssueHiddenBySearchByKey(g)){return g}}return false};c.prototype.getPreviousIssueKeyAfterRank=function(e){var d=a.first(e);return this.getPreviousIssueKey(d)};c.prototype.getPreviousIssueKey=function(e){var f=this.getIssueIndex(e);var d=this.data.visibleIssueKeys;while(--f>=0){var g=d.get(f);if(!this.isIssueHiddenBySearchByKey(g)){return g}}return false};c.prototype.getIssueRange=function(l,e){var h=[],f,k;var d=this.data.visibleIssueKeys;var g=this.getIssueIndex(l);var j=this.getIssueIndex(e);if(a.isUndefined(g)||a.isUndefined(j)){return h}if(g<j){for(f=g;f<=j;f++){k=d.get(f);if(!this.isIssueHiddenBySearchByKey(k)){h.push(k)}}}else{for(f=g;j<=f;f--){k=d.get(f);if(!this.isIssueHiddenBySearchByKey(k)){h.push(k)}}}return h};c.prototype.canAddToSelection=function(e,d){var f=a.filter(e,function(g){return this.getIssueIndex(g)!==-1},this);if(e.length>0&&f.length!=e.length){return false}return this.isIssueVisible(d)};c.prototype.removeIssues=function(e){var f=this;e=typeof e==="object"?e:[e];var d=[];a.each(e,function(g){var h=f.data.issueByKey[g];if(h){d.push(h);delete f.data.issueByKey[g];f.data.order=a.without(f.data.order,g)}});this.buildCache();return d};c.prototype.getLastVisibleKeyBefore=function(g){if(g===undefined){return undefined}var f;for(var e=0;e<this.data.order.length;e++){var d=this.data.order[e];if(!this._isMarkerId(d)&&this.isIssueVisible(d)){f=d}if(d===g){break}}return f};c.prototype.getOrder=function(){return this.data.order};c.prototype.setOrder=function(d){this.data.order=d;this.buildCache()};c.prototype.applySearchFilter=function(e){var d=this;var f=false;d.data.visibleIssueKeys.forEach(function(g){var h=d.data.issueByKey[g];var i=d.data.hiddenIssueKeys[g]||false;var j=!e(h);f=f||i!==j;if(j){d.data.hiddenIssueKeys[g]=true}else{delete d.data.hiddenIssueKeys[g]}});return f};c.prototype.areIssuesBetweenMarkers=function(d,g,h){var f=this.getIssuesBetweenMarkers(g,h);var e=true;a.forEach(d,function(i){if(!a.contains(f,i)){e=false}});return e};c.prototype.getIssuesBetweenMarkers=function(f,g){var e=this.indexOfRankable(f);var h=this.indexOfRankable(g);if(e>h){var d=h;h=e;e=d}return this.getOrder().slice(e+1,h)};c.prototype.getMarkerIdBeforeId=function(f){if(this._isMarkerId(f)){f=c.getOrderKeyForMarkerId(f)}var d=this.data.orderByKey[f];if(a.isUndefined(d)){return false}for(var e=d-1;e>=0;e--){if(this._isMarkerId(this.data.order[e])){return this.data.order[e]}}return false};c.prototype.getLastMarkerId=function(){var g=false;var d=this.data.order;var f=d.length;for(var e=f-1;e>=0;e--){var h=d[e];if(this._isMarkerId(h)){g=h;break}}return g};c.prototype.getMarkerIds=function(){var d=[];a.each(this.data.order,function(e){if(this._isMarkerId(e)){d.push(e)}},this);return d};c.prototype.withoutArray=function(e,d){var f=e;a.each(d,function(g){f=a.without(f,g)});return f};c.prototype._first=function(e,d){d=parseInt(d,10);return d===0?[]:a.first(e,d)};c.prototype.getIssueCount=function(){var d=0;a.each(this.data.issueByKey,function(e){d++});return d};c.prototype.getAllInvisibleIssuesData=function(){var d=this.data.order;return this._getInvisibleIssuesDataForKeys(d)};c.prototype.getAllVisibleIssuesData=function(){var d=this.data.order;return this._getVisibleIssuesDataForKeys(d)};c.prototype.getVisibleIssuesDataBeforeIncludingKey=function(e){var f=this.indexOfRankable(e);if(f<0){return[]}var d=this.data.order.slice(0,f+1);return this._getVisibleIssuesDataForKeys(d)};c.prototype.getVisibleIssuesDataAfterKey=function(e){var f=this.indexOfRankable(e);if(f<0){return[]}var d=this.data.order.slice(f+1);return this._getVisibleIssuesDataForKeys(d)};c.prototype._getVisibleIssuesDataForKeys=function(e){var d=[];a.each(e,function(f){if(this.isIssueVisible(f)){var g=this.getIssueData(f);d.push(g)}},this);return d};c.prototype._getInvisibleIssuesDataForKeys=function(e){var d=[];a.each(e,function(f){var g=this.getIssueData(f);if(g.hidden||this.isIssueHiddenBySearchByKey(f)){d.push(g)}},this);return d};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueMoveController.js' */
define("jira-agile/rapid/ui/plan/issue-move-controller",["require"],function(b){var i=b("underscore");var d=b("jquery");var h=b("jira-agile/rapid/global-events");var g=b("jira-agile/rapid/ui/plan/backlog-model");var c=b("jira-agile/rapid/ui/plan/backlog-statistics");var a=b("jira-agile/rapid/ui/plan/sprint-model");var e;h.on("pre-initialization",function(){e=b("jira-agile/rapid/ui/plan/backlog-controller")});var f={};f.confirmMove=function(l){var k=d.Deferred();var m=f.isMoveFromActiveSprints(l);var j=f.isAddToActiveSprint(l);if(m){GH.RemoveIssuesFromSprintDialog.constructDialog(l,k)}else{if(j){GH.AddIssuesToActiveSprintDialog.showDialog(l,k)}else{k.resolve(l)}}return k};f.calculateIssueMoveModel=function(t,v){var m=null,k=null;var u=false,j=false;i.each(g.getAllModels(),function(w){var x=a.isSprintModel(w);if(w.getIssueList().areIssuesValid(t)){m=w;u=x}if(v&&x&&w.getSprintId()===v){k=w;j=true}else{if(!v&&!x){k=w;j=false}}});var r=u&&!m.isFutureSprint()&&(!j||k.isFutureSprint());var l=[],q=[];if(!r){l=t}else{var p=[];var o=m.getIssueList();i.each(t,function(w){var x=o.getIssueData(w);if(x){p.push(x)}});var n=e.rapidViewConfig.columns;var s=c.splitIssuesIntoNotDoneAndDone(p,n);l=i.map(s.notDone,function(w){return w.key});q=i.map(s.done,function(w){return w.key})}return{changes:[{currentSprint:u?m.getSprintData():null,targetSprint:j?k.getSprintData():null,issueKeys:l,doneIssueKeys:q}]}};f.isMoveBetweenActiveSprints=function(j){return i.some(j.changes,function(m){var l=m.currentSprint&&m.currentSprint.state!="FUTURE";var k=m.targetSprint&&m.targetSprint.state!="FUTURE";return l&&k})};f.isMoveFromActiveSprints=function(j){return i.some(j.changes,function(m){var l=m.currentSprint&&m.currentSprint.state!="FUTURE";var k=(m.currentSprint&&m.targetSprint&&m.currentSprint.id===m.targetSprint.id);return l&&!k})};f.isOnlyRankOperation=function(j){return i.some(j.changes,function(m){var k=(m.currentSprint&&m.targetSprint&&m.currentSprint.id===m.targetSprint.id);var l=(!m.currentSprint&&!m.targetSprint);return k||l})};f.isRankBetweenFutureAndBacklog=function(j){return i.some(j.changes,function(m){var k=!m.currentSprint||m.currentSprint.state==="FUTURE";var l=!m.targetSprint||m.targetSprint.state==="FUTURE";return k&&l})};f.isAddToActiveSprint=function(j){return i.some(j.changes,function(m){var l=(m.targetSprint&&m.targetSprint.state!=="FUTURE");var k=(!m.currentSprint||!m.targetSprint||m.currentSprint.id!==m.targetSprint.id);return k&&l})};f.getAllIssueKeys=function(k){var j=[];i.each(k.changes,function(l){j.push(l.issueKeys);j.push(l.doneIssueKeys)});return i.flatten(j,true)};return f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.js' */
GH.WorkController=new GH.Events();GH.WorkController.viewData=undefined;GH.WorkController.currentViewConfig={};GH.WorkController.isVisible=false;GH.WorkController.CALLBACK_POOL_RENDERED="gh.work.pool.rendered";GH.WorkController.CALLBACK_POOL_LOADED="gh.work.pool.loaded";GH.WorkController.EVENT_NAMES={ON_PLAN_MODE:"OnPlanMode",ON_ALL_FILTERS_CLEARING:"OnAllFiltersClearing",ON_RELOAD_EMPTY_STATE_VIEW:"OnReloadEmptyStateMessage"};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.WorkController.analytics=new a("gh.workmode")})();GH.WorkController.init=_.once(function(){GH.WorkControls.init();GH.WorkKBNavigation.init();GH.WorkView.init();GH.SwimlaneView.init();GH.WorkSelectionController.init();GH.WorkDragAndDrop.init();AJS.$(GH).bind("issueSelected",GH.WorkController.handleIssueSelectionEvent);AJS.$(GH.WorkControls.quickfilters).bind("quickFilterChange",function(){if(GH.WorkController.isVisible){GH.WorkController.reload()}});AJS.$(GH.WorkControls.sprintfilters).bind("sprintFilterChange",function(){if(GH.WorkController.isVisible){GH.WorkController.reload()}});AJS.$(GH).bind("issueCreated",GH.WorkController.handleIssueCreatedEvent);AJS.$(GH).bind("issueUpdated",GH.WorkController.handleIssueUpdatedEvent);AJS.$(GH).bind("issuesRemovedFromSprint",GH.WorkController.handleIssuesRemovedFromSprint)});GH.WorkController.setRapidView=function(a){GH.WorkController.rapidViewData=a;GH.SwimlaneView.setRapidView(GH.WorkController.rapidViewData)};GH.WorkController.isSprintSupportEnabled=function(){return GH.WorkController.rapidViewData.sprintSupportEnabled};GH.WorkController.show=function(){GH.log("GH.WorkController.show",GH.Logger.Contexts.ui);if(!GH.WorkController.rapidViewData){return}GH.WorkController.isVisible=true;GH.WorkView.show();GH.DetailsView.setRapidViewId(GH.WorkController.rapidViewData.id);return GH.WorkController.loadRapidViewConfig()};GH.WorkController.hide=function(){GH.log("GH.WorkController.hide",GH.Logger.Contexts.ui);GH.Poller.removePoller("WorkPoller");GH.SwimlaneView.hide();GH.WorkView.hide();GH.DetailsView.hide();GH.WorkController.isVisible=false;GH.WorkDataLoader.markDirty()};GH.WorkController.isActive=function(){return GH.WorkController.isVisible};GH.WorkController.loadRapidViewConfig=function(){var a=new AJS.$.Deferred();var b=function(c){if(!GH.WorkController.isVisible){return}GH.WorkController.currentViewConfig=c;var d=GH.WorkController.initializeWorkMode();d.done(function(){a.resolveWith(this)});d.fail(function(){a.rejectWith(this)})};GH.RapidViewConfig.fetchConfiguration(GH.WorkController.rapidViewData.id).done(b);return a.promise()};GH.WorkController.initializeWorkMode=function(){if(!GH.WorkController.currentViewConfig.columns||GH.WorkController.currentViewConfig.columns.length<0){return}GH.WorkControls.setRapidViewConfig(GH.WorkController.currentViewConfig);GH.SwimlaneView.setRapidViewConfig(GH.WorkController.currentViewConfig);GH.DetailsView.setRapidViewConfig(GH.WorkController.currentViewConfig);GH.WorkControls.renderControls();GH.WorkView.hideLoadingFilter();GH.RapidBoard.ViewController.updateContentContainer();return GH.WorkController.loadPoolData()};GH.WorkController.preload=function(a){GH.WorkDataLoader.getData(a)};GH.WorkController.reload=function(){GH.WorkDataLoader.markDirty();GH.Notification.clearBoardUpdatedMessage();return GH.WorkController.loadPoolData()};GH.WorkController.loadPoolData=function(){GH.WorkView.showLoadingPool();var a=GH.WorkController.rapidViewData.id;var b=GH.WorkDataLoader.getData(a);b.done(function(c){GH.WorkController.setPoolData(c)});b.fail(GH.WorkController.handleInvalidSprint);b.fail(function(){GH.WorkView.hideLoadingPool()});return b};GH.WorkController.handleInvalidSprint=function(c,b,a){var d=c.error.errors&&c.error.errors[0]&&c.error.errors[0].message;if(d&&d==="Sprint does not exist"){GH.WorkControls.sprintfilters.validateActiveSprints()}else{if(d&&d==="This board has no columns with a mapped status."){GH.WorkController.renderNoMappedColumnsMsg()}else{GH.Ajax.handleGlobalErrors(c,b,a)}}};GH.WorkController.checkForUpdates=function(b){var a=GH.WorkController.rapidViewData.id;return GH.WorkDataLoader.checkForUpdates(a).done(function(c){GH.log("WorkController update check: "+c);if(c===GH.WorkDataLoader.NEW_DATA_WITH_CHANGES){if(b){GH.WorkController.applyLoadedData()}else{GH.WorkController.showBoardUpdatedMessage()}return}if(b&&GH.Notification.isBoardUpdatedMessageVisible()){GH.WorkController.applyLoadedData();return}if(c===GH.WorkDataLoader.NEW_DATA_NO_CHANGE){if(b){GH.WorkController.reloadDetailView()}else{}}})};GH.WorkController.showBoardUpdatedMessage=function(){GH.Notification.showBoardUpdatedMessage().done(function(){GH.WorkController.applyLoadedData()})};GH.WorkController.applyLoadedData=function(){var a=GH.WorkController.rapidViewData.id;var b=GH.WorkDataLoader.getData(a);b.done(function(c){GH.WorkController.setPoolData(c);GH.Notification.clearBoardUpdatedMessage()})};GH.WorkController.hasDataChanged=function(a){return GH.GridDataController.hasDataChanged(a)};GH.WorkController.setPoolData=function(a){if(!GH.WorkController.isVisible){return}GH.GridDataController.setData(a);GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_LOADED);GH.WorkController.setSprintData(a);if(a.sprintsData){GH.WorkControls.setSprintData(a.sprintsData.sprints,a.sprintsData.canManageSprints)}else{GH.WorkControls.setSprintData([],false)}GH.WorkController.initializeSelection();GH.WorkController.ensureSelectionExpanded();GH.WorkController.updateUI();GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_RENDERED);GH.WorkController.trigger("after:render");GH.Poller.addPoller("WorkPoller",GH.WorkController.checkForUpdates)};GH.WorkController.setSprintData=function(a){GH.WorkController.sprintData=a.sprintsData};GH.WorkController.initializeSelection=function(){GH.WorkKBNavigation.initCurrentPosition();GH.WorkSelectionController.validateCurrentSelection()};GH.WorkController.ensureSelectionExpanded=function(){var a=GH.WorkSelectionController.getSelectedIssueKey();if(!a){return}GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey(a,false)};GH.WorkController.updateUI=function(){GH.WorkController.configureUI();GH.WorkController.renderUI();GH.WorkView.scrollIssueToView();AJS.$(GH).trigger("workModeUIReady")};GH.WorkController.configureUI=function(){var a=GH.WorkSelectionController.getSelectedIssueKey();var b=GH.WorkController.isDetailsViewOpened();if(!a&&b){GH.WorkController.setDetailViewOpenedState(false);b=false}GH.WorkView.configureUI(b?a:false)};GH.WorkController.renderUI=function(){GH.WorkControls.drawSprints();GH.WorkView.renderPoolAndDetailView();GH.WorkView.scrollIssueToView();GH.WorkControls.updateSwimlaneOptions(GH.GridDataController.getModel().hasSwimlanes());GH.RapidBoard.ViewController.updateContentContainer()};GH.WorkController.setDetailViewOpenedState=function(a){GH.RapidBoard.State.setWorkViewDetailsViewOpened(a||false)};GH.WorkController.isDetailsViewOpened=function(){return GH.RapidBoard.State.isDetailsViewOpened()};GH.WorkController.toggleDetailsView=function(){if(GH.WorkController.isDetailsViewOpened()){GH.WorkController.closeDetailsView()}else{var a=GH.WorkSelectionController.getSelectedIssueKey();GH.WorkController.openDetailsView(a)}};GH.WorkController.openDetailsView=function openDetailsView(a){if(!a){return}var c=GH.WorkSelectionController.getSelectedIssueKey();var b=false;if(!c||c!=a){b=true;GH.WorkSelectionController.selectIssue(a,{pushState:false})}if(GH.WorkController.isDetailsViewOpened()){GH.WorkController.updateDetailViewIssue(a)}else{b=true;GH.WorkController.setDetailViewOpenedState(true);GH.WorkView.openOrCloseDetailView(a)}if(b){GH.RapidBoard.State.pushState()}};GH.WorkController.closeDetailsView=function closeDetailsView(){if(GH.DetailsView.hasCurrentError()){return}if(!GH.WorkController.isDetailsViewOpened()){return}GH.WorkController.setDetailViewOpenedState(false);GH.RapidBoard.State.pushState();GH.WorkView.openOrCloseDetailView(false)};GH.WorkController.reloadDetailView=function(){if(!GH.WorkController.isDetailsViewOpened()){return}GH.DetailsView.reload()};GH.WorkController.updateDetailViewIssue=function(a){if(!GH.WorkController.isDetailsViewOpened()){return}GH.DetailsView.setSelectedIssueKey(a);GH.DetailsView.show()};GH.WorkController.toggleEpicsShowOnWorkboard=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard();GH.WorkController.updateUI()};GH.WorkController.handleIssueSelectionEvent=function(c,a){var b=GH.WorkSelectionController.getSelectedIssueKey();if(GH.WorkController.isDetailsViewOpened()){if(b){GH.WorkController.updateDetailViewIssue(b)}else{GH.WorkController.closeDetailsView()}}};GH.WorkController.resolveParentTask=function(a){if(!GH.WorkController.isVisible){return}GH.Ajax.get({url:"/xboard/issue/subtasksInFinalColumn.json",data:{issueId:a.id,rapidViewId:GH.WorkController.rapidViewData.id}},"subtaskCompletionCheck").done(function(b){GH.WorkController.loadTransitions(a,b)}).fail(GH.WorkView.hideLoadingPool)};GH.WorkController.loadTransitions=function(a,b){if(!GH.WorkController.isVisible){return}if(b.subtasksInFinalColumn){GH.Ajax.get({url:"/xboard/issue/transitions.json",data:{issueId:a.id}},"loadTransitions").done(function(h){var d=GH.GridDataController.getModel();var g=_.last(d.data.columns);if(!g){return}var f=[];for(var c=0;c<h.transitions.length;c++){for(var e=0;e<g.statusIds.length;e++){if(g.statusIds[e]==h.transitions[c].targetStatus){f.push(h.transitions[c])}}}GH.Dialogs.CompleteParentDialog.showDialog(a,f,g)})}};GH.WorkController.handleIssueUpdatedEvent=function(b,d){if(!GH.WorkController.isVisible){return}var a=false;GH.log(b.type+" from source "+d.source+" handled",GH.Logger.Contexts.ui);if(d.fieldChanges){var c=d.fieldChanges[GH.SprintConfig.getSprintFieldId()];if(c&&c.original!=c.updated){a=true}}if(a){GH.WorkController.reload()}else{GH.WorkController.loadIssue(d.issueId);if(d.source=="quickEdit"){GH.WorkController.reloadDetailView()}}};GH.WorkController.loadIssue=function(a){GH.Ajax.get({url:"/xboard/work/issue.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueId:a}},"loadIssue."+a).done(function(b){var c=GH.GridDataController.getModel();if(!c){return}c.updateIssueData(b);GH.SwimlaneView.rerenderIssue(b.key)})};GH.WorkController.handleIssueCreatedEvent=function(a,b){if(!GH.WorkController.isVisible){return}setTimeout(function(){GH.WorkController.reloadAndSelectCreatedIssues(b)},0)};GH.WorkController.reloadAndSelectCreatedIssues=function(c){var b=c.issues;var a=_.map(b,function(f){return f.issueKey});var e=GH.WorkController.reload();var d=GH.Ajax.get({url:"/xboard/issue/matchesBoard",data:{rapidViewId:GH.WorkController.rapidViewData.id,issueIdsOrKeys:a}}).andThen(function(f){return f.issueIdsOrKeys&&f.issueIdsOrKeys.length===a.length},function(){return AJS.$.Deferred().resolve(false)});return AJS.$.when(e,d).done(function(g,f){GH.WorkController._issueCreatedCallback(a,c,f)})};GH.WorkController._issueCreatedCallback=function(c,g,b){var h=[];var e=GH.GridDataController.getModel();_.each(c,function(i){if(e.isIssueValid(i)){h.push(i)}});var d=false;if(!_.isEmpty(h)){d=_.last(h);GH.WorkSelectionController.selectIssue(d)}var a=d&&GH.WorkSelectionController.isInSelection(d);if(!a){var f=_.extend({},GH.WorkController.sprintData,{issuesMatch:b});GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(g,f);AJS.$(".js-add-new-issue-to-sprint").unbind("click");AJS.$(".js-add-new-issue-to-sprint").click(GH.WorkController.addNewIssueToSprint)}};GH.WorkController.addNewIssueToSprint=function(f){GH.Notification.clear();GH.WorkController.analytics.trigger("addtosprintaftercreate");var d=AJS.$(f.target);var g=d.attr("data-sprint-id");var a=d.attr("data-issue-keys").split(",");var c=GH.GridDataController.getModel();var b=_.last(c.data.order);GH.RankController.sprintRankIssues(GH.RankingModel.getRankCustomFieldId(),a,g,null,b).done(function(e){var h=GH.RankController.getErrorRankResultFromResponse(e);if(h){GH.log("Rank operation after adding new issues to sprint did not completely succeed.",GH.Logger.Contexts.callback)}var i=GH.WorkController.reload();i.done(function(){c=GH.GridDataController.getModel();var k=false;var j=false;_.each(a,function(l){if(c.isIssueValid(l)){k=l}else{j=true}});if(k){GH.WorkSelectionController.selectIssue(k)}if(j){GH.Notification.showSuccess(AJS.format("Your {0,choice,1#issue has|1\u003cissues have} been added to the sprint but {0,choice,1#it is|1\u003cone or more are} not currently visible.",a.length),{timeout:10000})}})})};GH.WorkController.handleIssuesRemovedFromSprint=function(a,b){if(!GH.WorkController.isVisible){return}GH.WorkController.reload()};GH.WorkController.changeModeToPlan=function(){GH.RapidBoard.ViewController.setMode("plan")};GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE,GH.WorkController.changeModeToPlan);GH.WorkController.clearAllFiltersAndReload=function(){var a=GH.WorkControls.quickfilters;if(a){a.clearFilters();GH.RapidBoard.State.pushState()}GH.WorkController.reload()};GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,GH.WorkController.clearAllFiltersAndReload);GH.WorkController.renderNoMappedColumnsMsg=function(){var b=AJS.$(".ghx-no-active-sprint-message");if(b.length>0){return}var a=AJS.$("#ghx-work");if(a.length<1){return}var c=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView");var d=GH.RapidBoard.State.getRapidViewId();activeSprintEmptyMsg=new c(false,false,d,true,a);GH.RapidViewConfig.fetchConfiguration(d).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)});activeSprintEmptyMsg.handleNoMappedColumnsMode();GH.WorkController.setActiveSprintEmptyMsg(activeSprintEmptyMsg)};GH.WorkController.handleEmptyMessageInDashboard=function(){if(!_.isUndefined(GH.WorkController.activeSprintEmptyMsg)){GH.WorkController.activeSprintEmptyMsg.handleOnDashboardMode()}};GH.WorkController.setActiveSprintEmptyMsg=function(a){GH.WorkController.activeSprintEmptyMsg=a};GH.WorkController.collectPrintableIssues=function(){return{issues:GH.GridDataController.collectPrintableIssues(),viewMode:"work",boardType:GH.WorkControls.getBoardType()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.soy' */
// This file was automatically generated from WorkController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workcontroller == 'undefined') { GH.tpl.workcontroller = {}; }


GH.tpl.workcontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-pool-column"><div id="ghx-pool" data-skate-ignore></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workcontroller.renderSkeleton.soyTemplateName = 'GH.tpl.workcontroller.renderSkeleton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDataLoader.js' */
GH.WorkDataLoader={};GH.WorkDataLoader.NEW_DATA_WITH_CHANGES="new data with changes";GH.WorkDataLoader.NEW_DATA_NO_CHANGE="new data no change";GH.WorkDataLoader.NO_DATA_CHANGE="no data change";GH.WorkDataLoader.currentData=undefined;GH.WorkDataLoader.loadingData=undefined;GH.WorkDataLoader.getData=function(a){return GH.WorkDataLoader.getDataForViewId(a).promise};GH.WorkDataLoader.markDirty=function(){if(GH.WorkDataLoader.currentData){GH.WorkDataLoader.currentData.dirty=true}if(GH.WorkDataLoader.loadingData){GH.WorkDataLoader.loadingData.dirty=true}};GH.WorkDataLoader.getDataForViewId=function(a,f){if(!f&&GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.currentData,a)){return GH.WorkDataLoader.currentData}if(GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.loadingData,a)){return GH.WorkDataLoader.loadingData}var b=GH.WorkDataLoader.currentData?GH.WorkDataLoader.currentData.data:false;var e=b?b.etagData.etag:false;var d=GH.WorkDataLoader.load(a,e);var c=new AJS.$.Deferred();d.requestPromise.done(function(g){if(GH.WorkDataLoader.loadingData===d){GH.WorkDataLoader.currentData=GH.WorkDataLoader.loadingData;if(g.etagData.etag===e){g=b}GH.WorkDataLoader.currentData.data=g;GH.WorkDataLoader.loadingData=undefined;c.resolveWith(this,[g])}else{}});d.requestPromise.fail(c.reject);d.promise=c.promise();GH.WorkDataLoader.loadingData=d;return GH.WorkDataLoader.loadingData};GH.WorkDataLoader.checkForUpdates=function(b){var c=AJS.$.Deferred();if(!GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.currentData,b)){c.resolveWith(this,["ignore"])}else{var d=GH.WorkDataLoader.currentData.data.etagData.etag;var a=GH.WorkDataLoader.getDataForViewId(b,true);a.promise.done(function(e){if(e.etagData.etag===d){c.resolveWith(this,[GH.WorkDataLoader.NO_DATA_CHANGE])}else{if(!GH.WorkController.hasDataChanged(e)){c.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_NO_CHANGE])}else{c.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_WITH_CHANGES])}}})}return c.promise()};GH.WorkDataLoader.isDataUpToDate=function(b,a){if(!b||b.dirty){return false}return GH.WorkDataLoader.areRequestParamsUpToDate(b,a)};GH.WorkDataLoader.areRequestParamsUpToDate=function(b,a){var c=GH.WorkControls.getActiveQuickFilterIds();var d=GH.WorkControls.getActiveSprintIds();return b.viewId===a&&_.isEqual(b.activeQuickFilters,c)&&_.isEqual(b.activeSprints,d)};GH.WorkDataLoader.load=function(a,c){var b={};b.viewId=a;b.activeQuickFilters=GH.WorkControls.getActiveQuickFilterIds().slice();b.activeSprints=GH.WorkControls.getActiveSprintIds().slice();var d={rapidViewId:a,selectedProjectKey:GH.RapidBoard.projectKey};if(c){d.etag=c}if(b.activeQuickFilters&&b.activeQuickFilters.length>0){d.activeQuickFilters=b.activeQuickFilters}if(b.activeSprints&&b.activeSprints.length>0){d.activeSprints=b.activeSprints}b.requestPromise=GH.Ajax.get({url:"/xboard/work/allData.json",data:d,deferErrorHandling:true},"workAllData");return b};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkView.js' */
GH.WorkView={};GH.WorkView.isVisible=false;GH.WorkView.detailViewOpen=false;GH.WorkView.isRendering=false;GH.WorkView.init=function(){AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.WorkView.handleResizeEvent);AJS.$(document).delegate(".js-view-actions-work .js-view-action-toggle-epics-lozenge","click",GH.WorkController.toggleEpicsShowOnWorkboard)};GH.WorkView.show=function(){GH.WorkView.isVisible=true;GH.WorkView.showLoading();var a=GH.tpl.workcontroller.renderSkeleton();AJS.$("#ghx-work").empty().append(a);GH.DetailsView.setContainerSelector("#ghx-detail-view");GH.DetailsView.setOptions({canClose:true,showActionsCog:true,showSubtaskTab:true,showLogWorkTrigger:true,updateSizeHandler:GH.WorkView.updateDetailViewSize,closeHandler:GH.WorkController.closeDetailsView})};GH.WorkView.hide=function(){GH.WorkView.isVisible=false;GH.WorkView.hideLoading();AJS.$("#ghx-detail-view").css({display:"none"});AJS.$("#ghx-work").empty()};GH.WorkView.configureUI=function(a){GH.WorkView.detailViewOpen=!!a;GH.DetailsView.setSelectedIssueKey(a)};GH.WorkView.renderPoolAndDetailView=function(){GH.WorkView.isRendering=true;GH.WorkView.hideLoadingPool();GH.SwimlaneView.show();GH.WorkView.updateDetailViewVisibilityAndSize();GH.WorkView.updateDetailView();GH.WorkView.isRendering=false};GH.WorkView.scrollIssueToView=function(){var a=GH.WorkSelectionController.getSelectedIssueKey();if(a){GH.WorkSelectionController.gotoIssue(a)}};GH.WorkView.openOrCloseDetailView=function(a){GH.WorkView.configureUI(a);GH.WorkView.updateAllSizings();GH.WorkView.updateDetailView()};GH.WorkView.updateFixedElementPositioning=function(){if(!GH.WorkView.isVisible){return}GH.WorkControls.resizeQuickFilters();GH.DetailsView.updateSize();GH.SwimlaneStalker.poolStalker()};GH.WorkView.updateAllSizings=function(){GH.WorkView.updateDetailViewVisibilityAndSize()};GH.WorkView.updateDetailView=function(){if(GH.WorkView.detailViewOpen){GH.DetailsView.show()}else{GH.DetailsView.hide()}GH.SwimlaneStalker.poolStalker()};GH.WorkView.getEstimatedColumnWidth=function(){var a=AJS.$("#ghx-work").width();var e=GH.WorkView.detailViewOpen?GH.DetailsView.minWidth:0;var b=GH.GridDataController.getModel();var d=b.getColumns().length;var f=(d+1)*10+20;var c=Math.floor((a-e-f)/d);return c};GH.WorkView.getIssueKeyDimensions=function(){var a=AJS.$("#ghx-pool .js-issue:visible").eq(0);var b=parseInt(a.find(".js-key-link").css("font-size"),10);return{availableWidth:a.find(".ghx-issue-fields").width(),approxCharacterWidth:b?b*0.7:null}};GH.WorkView.updateMinHeightsSettings=function(){if(GH.WorkView.detailViewOpen){AJS.$("#ghx-work").addClass("ghx-has-detail");AJS.$("#ghx-detail-view").css({display:""})}else{AJS.$("#ghx-detail-view").css({display:"none"});AJS.$("#ghx-work").removeClass("ghx-has-detail")}};GH.WorkView.getBand=function(){var a=GH.WorkView.getEstimatedColumnWidth();if(a<=126){return 1}else{if(a<=165){return 2}else{return 3}}};GH.WorkView.updateDetailViewVisibilityAndSize=function(){var c=GH.DetailsView.getContainer();if(GH.WorkView.detailViewOpen){c.css({display:""});GH.DetailsView.updateSize()}else{c.css({display:"none"})}var a=AJS.$("#ghx-pool");var e=GH.WorkView.getBand();a.toggleClass("ghx-band-1",e===1).toggleClass("ghx-band-2",e===2).toggleClass("ghx-band-3",e===3);var b=GH.WorkView.getIssueKeyDimensions();var d=a.find(".js-issue");d.each(function(){var g=AJS.$(this);var f=g.attr("data-issue-key");g.find(".js-key-link").text(GH.IssueListUtil.buildDisplayIssueKey(f,b))})};GH.WorkView.updateDetailViewSize=function(){var c=AJS.$("#ghx-detail-issue");if(c.length>0){var d=c.outerHeight();var e=AJS.$("#ghx-detail-head");var b=e.outerHeight();var a=AJS.$("#js-detail-nav-content");a.css({height:d-b-13})}};GH.WorkView.showLoading=function(){AJS.$("body").addClass("ghx-loading-pool ghx-loading-quickfilter")};GH.WorkView.hideLoading=function(){AJS.$("body").removeClass("ghx-loading-pool ghx-loading-quickfilter")};GH.WorkView.hideLoadingFilter=function(){AJS.$("body").removeClass("ghx-loading-quickfilter")};GH.WorkView.showLoadingPool=function(){AJS.$("body").addClass("ghx-loading-pool")};GH.WorkView.hideLoadingPool=function(){AJS.$("body").removeClass("ghx-loading-pool")};GH.WorkView.handleResizeEvent=function(){if(!GH.WorkView.isVisible){return}if(!GH.GridDataController.getModel()){return}if(GH.WorkView.isRendering){return}GH.WorkView.updateAllSizings();GH.SwimlaneView.handleResizeEvent();GH.SwimlaneStalker.poolStalker()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkControls.js' */
define("jira-agile/rapid/work/work-controls",["jquery"],function(b){var a={};a.rapidViewConfig={};a.quickfilters=undefined;a.sprintfilters=undefined;a.init=function(){a.quickfilters=new GH.Components.QuickFilters("activeQuickFilters");a.sprintfilters=new GH.Components.SprintFilters("workSprintFilters");GH.Components.sprintFiltersInit();a.sprintfilters.initializeInlineEdits();b(document).delegate("#ghx-complete-sprint","click",a.openCompleteSprintDialog);b(GH).bind(GH.Dialogs.CompleteSprintDialog.EVENT_SPRINT_COMPLETED,function(c,d){b("#ghx-modes-tools .ghx-sprint-meta").remove();GH.ReportController.selectChart("sprintRetrospective");GH.RapidBoard.ViewController.setMode("report");GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(d);GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog(d)});b(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,a.handleSprintUpdated)};a.setRapidViewConfig=function(c){a.rapidViewConfig=c;a.quickfilters.setRapidViewConfig(c);a.sprintfilters.setRapidViewConfig(c)};a.hasSprints=function(){return a.sprintfilters.hasSprints()};a.getBoardType=function(){if(a.hasSprints()){return"scrum"}else{return"kanban"}};a.setSprintData=function(c,d){this.canManageSprints=d;a.sprintfilters.setSprintData(c,d);a.sprintfilters.validateActiveSprints()};a.drawSprints=function(){a.sprintfilters.drawSprints()};a.handleSprintUpdated=function(d,c){a.sprintfilters.updateSprintData(c.id,c)};a.getActiveQuickFilterIds=function(){return a.quickfilters.getActiveQuickFilters()};a.getActiveQuickFilterCount=function(){return a.getActiveQuickFilterIds().length};a.setActiveQuickFilterIds=function(c){a.quickfilters.setActiveQuickFilters(c)};a.getActiveSprintIds=function(){return a.sprintfilters.getActiveSprintFilters()};a.setActiveSprintFilterIds=function(c){a.sprintfilters.setActiveSprintFilters(c)};a.renderControls=function(){var c=b("#ghx-controls-work");c.empty();if(a.rapidViewConfig.sprintSupportEnabled&&!GH.RapidBoard.ViewController.shouldShowSubnavigator()){c.append(a.sprintfilters.renderComponent())}c.append(a.quickfilters.renderQuickFilters({mode:"work"}));GH.PresentationMode.render(true,c);GH.ViewActions.setMode(GH.ViewActions.WORK_MODE);GH.ViewActions.setSwimlanes(false)};a.updateSwimlaneOptions=function(c){GH.ViewActions.setSwimlanes(c)};a.openCompleteSprintDialog=function(f){f.preventDefault();var c=b(this);if(c.hasClass("ghx-disabled")){return}var h=parseInt(c.attr("data-sprint-id"),10);var g=a.sprintfilters.getSprintById(h);if(!g){return}a.sprintfilters.removeDialog();var d=GH.RapidBoard.State.getRapidViewId();GH.Dialogs.CompleteSprintDialog.showDialog(d,g.id)};a.resizeQuickFilters=function(){a.quickfilters.quickExpanderLayout({mode:"work"})};return a});AJS.namespace("GH.WorkControls",null,require("jira-agile/rapid/work/work-controls"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkUrlState.js' */
GH.WorkUrlState={};GH.WorkUrlState.self="WorkUrlState";GH.WorkUrlState.isApplicable=function(a){return !a.mode||a.mode==="work"};GH.WorkUrlState.getNormalizedFromUrl=function(a,b){b.selectedIssue=GH.RapidBoard.UrlState.normalizeStringParam(a.selectedIssue,null);b.sprint=GH.RapidBoard.UrlState.normalizeNumberArrayParam(a.sprint);b.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(a.quickFilter)};GH.WorkUrlState.toUrl=function(b,a){if(b.selectedIssue){a.selectedIssue=b.selectedIssue}if(b.sprint.length>0){a.sprint=b.sprint}if(b.quickFilter.length>0){a.quickFilter=b.quickFilter}};GH.WorkUrlState.getNormalizedFromInternal=function(a){GH.WorkController.init();a.quickFilter=GH.WorkControls.getActiveQuickFilterIds();a.sprint=GH.WorkControls.getActiveSprintIds();a.selectedIssue=GH.WorkSelectionController.getSelectedIssueKey()};GH.WorkUrlState.updateInternalFromNormalized=function(a){GH.WorkController.init();GH.WorkSelectionController.setIssueFromUrlState(a.selectedIssue);GH.WorkControls.setActiveQuickFilterIds(a.quickFilter);GH.WorkControls.setActiveSprintFilterIds(a.sprint)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesService.js' */
GH.LinkedPagesService=(function(){return{initiateRemoteLinkConversation:function(){return GH.Ajax.get({url:"/remoteLinkConversation",dataType:"text"},"remoteLinkConversation")}}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesController.js' */
GH.LinkedPagesController={};GH.LinkedPagesController.EPIC="epic";GH.LinkedPagesController.VERSION="version";GH.LinkedPagesController.SPRINT="sprint";GH.LinkedPagesController.PLAN="plan";GH.LinkedPagesController.REPORT="report";GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION="/plugins/createcontent/init-dialog.action";GH.LinkedPagesController._dialog=null;GH.LinkedPagesController._authenticated=false;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.LinkedPagesController.analytics={show:new a("gh.linkedPages.dialog.show"),count:new a("gh.linkedPages.dialog.count"),action:new a("gh.linkedPages.dialog.action")}})();GH.LinkedPagesController._pollingConversations=false;GH.LinkedPagesController._dialogByLinkCreationToken={};GH.LinkedPagesController.initDialogTrigger=function(d,c,b,a){a.on("click",GH.Util.wrapPreventDefault(function(){GH.LinkedPagesController._showDialog(d,c,b,a)}))};GH.LinkedPagesController._showDialog=function(d,c,b,a){var e=new GH.LinkedPagesInlineDialog({entityType:d,agileMode:c,entityId:b,trigger:a});e.show();GH.LinkedPagesController.analytics.show.trigger([c,d].join("."));GH.LinkedPagesController._dialog=e;if(!GH.LinkedPagesController._authenticated){AJS.$(document).bind("applinks.auth.completion",GH.LinkedPagesController._handleAuthenticationCompleted);GH.LinkedPagesController._authenticated=true}};GH.LinkedPagesController.showDialogForEpic=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.EPIC);GH.LinkedPagesController.showDialogForSprint=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.SPRINT);GH.LinkedPagesController.hideCurrentDialog=function(){GH.LinkedPagesController._dialog&&GH.LinkedPagesController._dialog.hide()};GH.LinkedPagesController.getLinkedPagesForEntity=function(b,a){switch(b){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._getLinkedPagesForEpic(a);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._getLinkedPagesForSprint(a)}};GH.LinkedPagesController._getLinkedPagesForEpic=function(a){return GH.Ajax.get({url:"/epics/"+a+"/pages"},"getEpicLinkedPages").done(function(b){GH.PageIssueLinksModel.set(a,b.pages);GH.LinkedPagesController.analytics.count.trigger("epic","pages",b.pages.length)})};GH.LinkedPagesController._getLinkedPagesForSprint=function(a){return GH.Ajax.get({url:"/sprint/"+a+"/pages"},"getSprintLinkedPages").done(function(b){GH.PageIssueLinksModel.set(a,b.pages);GH.LinkedPagesController.analytics.count.trigger("sprint","pages",b.pages.length)})};GH.LinkedPagesController.startRemoteLinkCreationConversation=function(a){GH.LinkedPagesController._ensurePolling();return GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(b){GH.LinkedPagesController._dialogByLinkCreationToken[b]=a})};GH.LinkedPagesController.removeLinkedPage=function(c,a,d){var b;switch(c){case GH.LinkedPagesController.EPIC:b=GH.Ajax.del({url:"/issuelink/"+d});break;case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:b=GH.Ajax.del({url:"/api/sprints/"+a+"/remotelink/"+d});break}b.done(function(){GH.PageIssueLinksModel.removeLink(a,d);GH.LinkedPagesController.analytics.action.trigger([c,"removeLink"].join("."))});return b};GH.LinkedPagesController.searchPages=function(b,a,c){return GH.PageSearchRequestService.search(a,c).andThen(function(d){var e=GH.PageIssueLinksModel.list(a);d.pages=_.reject(d.pages,function(f){return _.findWhere(e,{pageId:f.id})});GH.PagesSearchModel.set(a,d.pages);return d})};GH.LinkedPagesController.addLink=function(d,b,a,c){switch(d){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._addLinkForEpic(b,a);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._addLinkForSprint(b,a,c)}};GH.LinkedPagesController._addLinkForEpic=function(b,a){return GH.Ajax.post({url:"/epics/"+b+"/pages",data:{pageId:a}},"addConfluencePageToEpic").andThen(function(c){var d=c.success;GH.PageIssueLinksModel.addLink(b,d);GH.PagesSearchModel.removePage(b,a);GH.LinkedPagesController.analytics.action.trigger("epic.addLink");return d})};GH.LinkedPagesController._addLinkForSprint=function(c,a,b){return GH.Ajax.post({url:"/sprint/"+c+"/pages",data:{pageId:a,pageTitle:b}},"addConfluencePageToSprint").andThen(function(d){var e=d.success;GH.PageIssueLinksModel.addLink(c,e);GH.PagesSearchModel.removePage(c,a);GH.LinkedPagesController.analytics.action.trigger("sprint.addLink");return e})};GH.LinkedPagesController._handleAuthenticationCompleted=function(b,f,e,a,c){var d=GH.LinkedPagesController._dialog;if(e&&d){if(d.isSearchMode()){d.showSearch(d.getSearchQuery());d.refresh()}else{d.show()}}else{GH.Notification.showWarning("Authentication with Confluence failed. Please check your credentials or Application Links configuration in Confluence.")}};GH.LinkedPagesController._ensurePolling=function(){if(!GH.LinkedPagesController._pollingConversations){GH.Poller.addPoller("linkedPagePoller",function a(){GH.Ajax.get({url:"/remoteLinkConversation/statuses",traditional:true,data:{token:_.keys(GH.LinkedPagesController._dialogByLinkCreationToken)}},"remoteLinksConversationStatuses").done(function(b){var c=_.pluck(_.where(b,{status:"REDEEMED"}),"token");var d=_.pick(GH.LinkedPagesController._dialogByLinkCreationToken,c);_.each(d,function(f,e){var g=GH.LinkedPagesController._dialog;if(g===f&&g.isVisible()){g.show()}delete GH.LinkedPagesController._dialogByLinkCreationToken[e]})})});GH.LinkedPagesController._pollingConversations=true}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageSearchRequestService.js' */
GH.PageSearchRequestService={};GH.PageSearchRequestService.delay=400;GH.PageSearchRequestService.timeoutId=null;GH.PageSearchRequestService.search=function(a,b){GH.PageSearchRequestService.cancel();var c=AJS.$.Deferred();GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(c,a,b)},GH.PageSearchRequestService.delay);return c.promise()};GH.PageSearchRequestService.cancel=function(){if(GH.PageSearchRequestService.timeoutId!=null){clearTimeout(GH.PageSearchRequestService.timeoutId);GH.PageSearchRequestService.timeoutId=null}};GH.PageSearchRequestService._scheduleRequest=function(a,b){GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(a,b)},GH.PageSearchRequestService.delay)};GH.PageSearchRequestService._execute=function(e,b,c){var d=GH.PageSearchRequestService.timeoutId;var a=GH.Ajax.get({url:"/integration/confluence/pages/search",data:{searchQuery:c},deferErrorHandling:true},"searchConfluencePagesForEpic");a.done(function(f){if(d===GH.PageSearchRequestService.timeoutId){GH.PageSearchRequestService._replaceHighlightTokensWithHtml(f.pages);e.resolveWith(e,arguments)}});a.fail(function(f){if(d===GH.PageSearchRequestService.timeoutId){e.rejectWith(e,arguments)}})};GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START="@@@hl@@@";GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END="@@@endhl@@@";GH.PageSearchRequestService._replaceHighlightTokensWithHtml=function(b){var c=function(d){return d.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"<strong>").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"</strong>")};var a=function(d){return d.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"")};_.each(b,function(d){if(d.title){d.titleHtml=c(d.title);d.title=a(d.title)}if(d.space){d.spaceHtml=c(d.space);d.space=a(d.space)}});return b};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageIssueLinksModel.js' */
GH.PageIssueLinksModel={};GH.PageIssueLinksModel.model={};GH.PageIssueLinksModel.set=function(b,a){GH.PageIssueLinksModel.model[b]=a};GH.PageIssueLinksModel.get=function(a,b){return _.find(GH.PageIssueLinksModel.model[a],function(c){return c.id===b})};GH.PageIssueLinksModel.list=function(a){return GH.PageIssueLinksModel.model[a]||[]};GH.PageIssueLinksModel.removeLink=function(a,b){b=parseInt(b,10);GH.PageIssueLinksModel.model[a]=_.reject(GH.PageIssueLinksModel.model[a],function(c){return c.id===b})};GH.PageIssueLinksModel.addLink=function(a,b){if(!_.isArray(GH.PageIssueLinksModel.model[a])){GH.PageIssueLinksModel.model[a]=[]}GH.PageIssueLinksModel.model[a].push(b)};GH.PageIssueLinksModel.clear=function(a){delete GH.PageIssueLinksModel.model[a]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PagesSearchModel.js' */
GH.PagesSearchModel={};GH.PagesSearchModel.model={};GH.PagesSearchModel.set=function(b,a){GH.PagesSearchModel.model[b]=a};GH.PagesSearchModel.list=function(a){return GH.PagesSearchModel.model[a]};GH.PagesSearchModel.get=function(b,a){a=parseInt(a,10);return _.find(GH.PagesSearchModel.model[b],function(c){return c.id===a})};GH.PagesSearchModel.removePage=function(b,a){a=parseInt(a,10);GH.PagesSearchModel.model[b]=_.reject(GH.PagesSearchModel.model[b],function(c){return c.id===a})};GH.PagesSearchModel.clear=function(a){delete GH.PagesSearchModel.model[a]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesCommon.soy' */
// This file was automatically generated from LinkedPagesCommon.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.createPageInputs = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.entityTypeParam) + '" value="' + soy.$$escapeHtml(opt_data.entityId) + '"><input type="hidden" name="applinkId" value="' + soy.$$escapeHtml(opt_data.applinkId) + '"><input type="hidden" name="agileMode" value="' + soy.$$escapeHtml(opt_data.agileMode) + '">' + ((opt_data.fallbackUrl) ? '<input type="hidden" name="fallbackUrl" value="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' : '');
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.createPageInputs.soyTemplateName = 'GH.tpl.component.linkedpages.createPageInputs';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.js' */
GH.LinkedPagesInlineDialog=function(a){this.entityType=a.entityType;if(this.entityType=="sprint"){this.entityTypeParam="sprintId"}else{if(this.entityType=="epic"){this.entityTypeParam="issueKey"}else{throw new Error("Did not understand entity type: "+this.entityType)}}this.entityId=a.entityId;this.agileMode=a.agileMode;this.$trigger=a.trigger;this.$content=null;this.dialog=null;this.dialogOptions=_.extend({},GH.LinkedPagesInlineDialog.DIALOG_OPTIONS)};GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT=3;GH.LinkedPagesInlineDialog.DIALOG_OPTIONS={fadeTime:0,noBind:true,width:300,cacheContent:false,hideDelay:60000};GH.LinkedPagesInlineDialog.prototype.isVisible=function(){return AJS.$("#inline-dialog-viewPagesDialog").is(":visible")};GH.LinkedPagesInlineDialog.prototype.show=function(){this.showDeferred=AJS.$.Deferred();this.dialog=GH.SideInlineDialog.create("viewPagesDialog",this.$trigger,_.bind(this._render,this),this.dialogOptions);this.dialog.show();return this.showDeferred.promise()};GH.LinkedPagesInlineDialog.prototype.hide=function(){this.dialog.hide()};GH.LinkedPagesInlineDialog.prototype.refresh=function(){this.dialog.refresh()};GH.LinkedPagesInlineDialog.prototype._render=function(c,a,d){this.$content=c;this.showDeferred.notify("EmptyBegin");c.html(GH.tpl.component.linkedpages.renderEmptyDialog({entityId:this.entityId}));this.showDeferred.notify("EmptyRender");c.click(function(e){e.stopPropagation()});c.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");c.find(".ghx-progress-indicator.ghx-initial").spin("medium");if(_.isFunction(d)){d()}this.showDeferred.notify("EmptyDone");this.showDeferred.notify("AjaxCall");var b=GH.LinkedPagesController.getLinkedPagesForEntity(this.entityType,this.entityId);b.done(_.bind(function(k){this.showDeferred.notify("AjaxDone");var l=_.findWhere(k.applicationLinks,{primary:true});var g=l?l.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:false;c.find(".ghx-progress-indicator.ghx-initial").spin("medium");var i=k.pages;this.canModify=k.canModifyPages;this.applicationLinks=k.applicationLinks;var m=i.length>0&&k.applicationLinks.length<=1&&_.all(i,function(q){return q.serverUnavailable});var p=_.where(i,{authenticationRequired:true});var f=_.groupBy(p,"applicationLinkId");var o=_.keys(f);var j=_.map(o,function(s){var q=f[s][0].authenticationUrl;var r=_.findWhere(k.applicationLinks,{id:s});return{applicationLink:r,authenticateUrl:q}});var e=i.length;var h=GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT;if(h+1==e){h++}this.showDeferred.notify("ContentRender");c.html(GH.tpl.component.linkedpages.renderDialog({entityId:this.entityId,entityType:this.entityType,linkedPages:i,initiallyShownCount:h,canEdit:this.canModify,appLink:l,serverUnavailable:m,needAuthenticationApplications:j}));this._updateViewLinkedPagesText(i.length);c.find("a.applink-authenticate").click(function(q){window.open(this.href,"com_atlassian_applinks_authentication");q.preventDefault()});c.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");this._initCreateAndLink({createPageAction:g,entityId:this.entityId,entityType:this.entityType,entityTypeParam:this.entityTypeParam,agileMode:this.agileMode,jiraApplicationId:k.jiraApplicationId,jiraUrl:k.jiraBaseUrl});c.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this));c.find(".js-wiki-view-more-pages-link").click(_.bind(this._handleShowMoreClick,this));var n=c.find(".js-page-search");n.click(function(q){q.preventDefault();return false});n.keydown(_.bind(this._handleSelectNextItem,this));n.keydown(_.bind(this._handleSelectPreviousItem,this));n.keydown(_.bind(this._handleAddSelectedItem,this));n.keyup(_.bind(this._handlePageSearchQueryChanged,this));c.find(".js-search-panel-hide").on("click",_.bind(this._handleCloseSearchPanelClick,this));c.find(".js-search-page-icon").click(_.bind(this._handleClearSearchIconClick,this));this._showLinkedPagesPanel();if(_.isFunction(d)){d()}this.showDeferred.notify("ContentDone");this.dialog.refresh();this.showDeferred.resolve()},this));return false};GH.LinkedPagesInlineDialog.prototype._renderPageSearchResults=function(a){this._hideSearchingSpinner();var c=this.$content.find(".js-entity-view-pages-search-result");if(a.authenticationRequired){var b=_.findWhere(this.applicationLinks,{id:a.applicationLinkId})||{};c.html(GH.tpl.component.linkedpages.renderSearchAuthenticationRequest({authenticationUrl:a.authenticationUrl,authenticationLinkUrl:b.url,authenticationLinkName:b.name}));c.find("a.applink-authenticate").click(function(d){window.open(this.href,"com_atlassian_applinks_authentication");d.preventDefault()})}else{c.html(GH.tpl.component.linkedpages.renderPageResults({pages:a.pages,isComplete:a.isComplete}));if(a.pages.length){this._reselectItem("first",_.identity)}c.find(".ghx-doco-list-item").click(_.bind(this._handlePageSearchResultClick,this))}};GH.LinkedPagesInlineDialog.prototype._renderPageSearchFailed=function(a){this._hideSearchingSpinner();var b=a.getGlobalErrors();AJS.messages.warning(AJS.$(".js-link-page-panel"),{title:AJS.format("Error while searching",""),body:b&&b[0].message})};GH.LinkedPagesInlineDialog.prototype._handleCloseSearchPanelClick=GH.Util.wrapPreventDefault(function(a){this._showLinkedPagesPanel()});GH.LinkedPagesInlineDialog.prototype._handleClearSearchIconClick=function(a){GH.PageSearchRequestService.cancel();this._emptySearchResults();this._hideSearchingSpinner();this.$content.find(".js-search-existing-pages-input").val("");a.preventDefault();return false};GH.LinkedPagesInlineDialog.prototype._handleRemovePageClick=function(d){var c=AJS.$(d.target);var b=c.attr("data-page-id");c.hide().closest("li").find(".js-wiki-spin").removeClass("ghx-hidden").find(".ghx-progress-indicator.ghx-small").spin("small");var a=GH.LinkedPagesController.removeLinkedPage(this.entityType,this.entityId,b);a.done(_.bind(function(){c.closest("li").remove();var e=GH.PageIssueLinksModel.list(this.entityId);if(e.length===0){this.$content.find(".js-no-linked-pages").removeClass("hidden")}this._updateViewLinkedPagesText(e.length)},this));this._showMoreLinkedPages();d.preventDefault();return false};GH.LinkedPagesInlineDialog.prototype._handleShowMoreClick=function(a){a.preventDefault();a.stopPropagation();this._showMoreLinkedPages();return false};GH.LinkedPagesInlineDialog.prototype._handlePageSearchQueryChanged=function(a){if(a.keyCode==13||a.keyCode==38||a.keyCode==40){return}var b=AJS.$(a.target).val();this._performSearch(b)};GH.LinkedPagesInlineDialog.prototype._performSearch=function(a){this._emptySearchResults();if(a.length>0){GH.LinkedPagesController.searchPages(this.entityType,this.entityId,a).done(_.bind(this._renderPageSearchResults,this)).fail(_.bind(this._renderPageSearchFailed,this));this._showSearchingSpinner();this._showClearSearchIcon()}else{this._hideClearSearchIcon()}};GH.LinkedPagesInlineDialog.prototype._handleSelectNextItem=function(a){if(a.keyCode!=40){return}a.preventDefault();return this._reselectItem("first",function(b){return b+1})};GH.LinkedPagesInlineDialog.prototype._handleSelectPreviousItem=function(a){if(a.keyCode!=38){return}a.preventDefault();return this._reselectItem("last",function(b){return b-1})};GH.LinkedPagesInlineDialog.prototype._reselectItem=function(e,f){var d=AJS.$(".ghx-doco-list-result");if(d.length===0){return}var c=d.filter(".ghx-doco-list-selected");var i=null;if(c.length===0){i=d[e]()}else{var g=d.index(c);c.removeClass("ghx-doco-list-selected");var k=f(g);if(k<0||k>d.length-1){i=d[e]()}else{i=AJS.$(d[k])}}if(i){i.addClass("ghx-doco-list-selected");var j=i.parent();var l=j.position().top;var h=l+j.height();var a=i.position().top;var b=i.height();if(a<l||h<a+b){i.get(0).scrollIntoView()}}};GH.LinkedPagesInlineDialog.prototype._handleAddSelectedItem=function(c){if(c.keyCode!=13){return}c.preventDefault();var a=AJS.$(".ghx-doco-list-result");var b=a.filter(".ghx-doco-list-selected");if(b.length!==0){this._addSearchResult(b)}};GH.LinkedPagesInlineDialog.prototype._handlePageSearchResultClick=function(b){b.preventDefault();var a=AJS.$(b.target).closest("[data-page-id]");this._addSearchResult(a)};GH.LinkedPagesInlineDialog.prototype._addSearchResult=function(a){var c=a.attr("data-page-id");var f=GH.PagesSearchModel.get(this.entityId,c);var g=this.$content.find(".js-linked-pages-list");var e=f.title;this._showMoreLinkedPages();var d=AJS.$(GH.tpl.component.linkedpages.renderStubLinkedPageListItem({pageTitle:e}));g.append(d);var b=GH.LinkedPagesController.addLink(this.entityType,this.entityId,c,e);b.done(_.bind(function(i){var h=AJS.$(GH.tpl.component.linkedpages.renderLinkedPageListItem({page:i,entityId:this.entityId,canEdit:this.canModify,hidden:false}));d.replaceWith(h);h.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this));h.hide().fadeIn(200);this._updateViewLinkedPagesText(GH.PageIssueLinksModel.list(this.entityId).length)},this));a.parent().fadeOut(200,function(){a.parent().remove()});this.$content.find(".js-no-linked-pages").addClass("hidden");this._showLinkedPagesPanel()};GH.LinkedPagesInlineDialog.prototype._emptySearchResults=function(){this.$content.find(".js-entity-view-pages-search-result").empty();this._hideClearSearchIcon();this.$content.find(".js-link-page-panel").find(".aui-message").remove()};GH.LinkedPagesInlineDialog.prototype._showClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-search-small ghx-iconfont-inactive").addClass("aui-iconfont-remove")};GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive aui-iconfont-search-small")};GH.LinkedPagesInlineDialog.prototype._initCreateAndLink=function(a){this.$content.find(".js-create-page-link").click(_.bind(function(){var b=window.open("","_blank");GH.LinkedPagesController.startRemoteLinkCreationConversation(this).done(function(c){GH.LinkedPagesController.analytics.action.trigger([a.entityType,"createPage"].join("."));var d={applinkId:a.jiraApplicationId,agileMode:a.agileMode,fallbackUrl:a.jiraUrl,creationToken:c};d[a.entityTypeParam]=a.entityId;b.location=a.createPageAction+"?"+AJS.$.param(d)});return false},this));this.$content.find(".js-link-pages-link").click(_.bind(function(){this._showLinkPagePanel();return false},this))};GH.LinkedPagesInlineDialog.prototype._updateViewLinkedPagesText=function(b){var a=(b>0)?AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}",b):AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}","");this.$trigger.text(a);var c=(b>0)?AJS.format("{0} linked {0,choice,0# pages|1# page|1\u003c pages}",b):"Linked pages";this.$content.find(".js-entity-pages-header").text(c)};GH.LinkedPagesInlineDialog.prototype._showLinkPagePanel=function(){this.$content.find(".js-link-page-panel").show();this.$content.find(".js-search-panel-hide").show();this.$content.find(".js-linked-pages-actions").hide();this.$content.find(".js-linked-pages-panel").hide();this.$content.find(".js-search-existing-pages-input").focus();this.dialog.refresh()};GH.LinkedPagesInlineDialog.prototype._showLinkedPagesPanel=function(){this.$content.find(".js-linked-pages-panel").show();this.$content.find(".js-search-panel-hide").hide();this.$content.find(".js-linked-pages-actions").show();this.$content.find(".js-link-page-panel").hide();this.$content.find(".js-entity-view-pages-search-result").empty();this.$content.find(".js-search-existing-pages-input").val("");this._hideClearSearchIcon();this.dialog.refresh()};GH.LinkedPagesInlineDialog.prototype._showMoreLinkedPages=function(){this.$content.find(".ghx-doco-list-item").show();this.$content.find(".ghx-doco-list-view-more").hide()};GH.LinkedPagesInlineDialog.prototype._showSearchingSpinner=function(){var a=this.$content.find(".js-entity-view-pages-searching");if(a.hasClass("hidden")){a.removeClass("hidden").spin("medium")}};GH.LinkedPagesInlineDialog.prototype._hideSearchingSpinner=function(){this.$content.find(".js-entity-view-pages-searching").addClass("hidden")};GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive").addClass("aui-iconfont-search-small")};GH.LinkedPagesInlineDialog.prototype.isSearchMode=function(){return this.$content.find(".js-link-page-panel").is(":visible")};GH.LinkedPagesInlineDialog.prototype.getSearchQuery=function(){return this.$content.find(".js-search-existing-pages-input").val()};GH.LinkedPagesInlineDialog.prototype.showSearch=function(a){this._showLinkPagePanel();this.$content.find(".js-search-existing-pages-input").val(a).focus();this._performSearch(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.soy' */
// This file was automatically generated from LinkedPagesInlineDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.renderDialogHeader = function(opt_data, opt_ignored) {
  return '<h2>' + aui.buttons.button({extraClasses: ['js-search-panel-hide', 'ghx-search-return', 'aui-button-link'], text: "Back"}) + '<span class="js-pages-header">' + soy.$$escapeHtml("Linked pages") + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialogHeader.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialogHeader';
}


GH.tpl.component.linkedpages.renderEmptyDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-progress-indicator ghx-initial"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderEmptyDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderEmptyDialog';
}


GH.tpl.component.linkedpages.renderDialog = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-inline-dialog-container ghx-full-width js-linked-pages-panel">';
  if (opt_data.serverUnavailable) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml("The Confluence server is currently unreachable.") + '</p>';
  } else if (! opt_data.appLink) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml("No Confluence server is configured. Please check your Application Links configuration.") + '</p>';
  } else {
    output += ((opt_data.needAuthenticationApplications.length > 0) ? GH.tpl.component.linkedpages.renderAuthenticationRequest(opt_data) : '') + '<div class="ghx-embedded js-no-linked-pages ' + ((opt_data.linkedPages.length > 0) ? 'hidden' : '') + '">' + ((opt_data.canEdit) ? '<p>' + soy.$$escapeHtml("No linked pages yet.") + ' ' + ((opt_data.entityType == 'sprint') ? soy.$$filterNoAutoescape(AJS.format("Try linking meeting notes or {0}create a new page{1}.",'<a class="js-create-page-link">','</a>')) : soy.$$filterNoAutoescape(AJS.format("Try linking requirements pages or {0}create a new page{1}.",'<a class="js-create-page-link">','</a>'))) + '</p>' : '<p>' + soy.$$escapeHtml("No linked pages yet.") + ' ' + soy.$$escapeHtml("Edit Issue permissions are required to add pages.") + '</p>') + '</div><ul class="ghx-doco-list js-linked-pages-list">';
    var pageList61 = opt_data.linkedPages;
    var pageListLen61 = pageList61.length;
    for (var pageIndex61 = 0; pageIndex61 < pageListLen61; pageIndex61++) {
      var pageData61 = pageList61[pageIndex61];
      output += GH.tpl.component.linkedpages.renderLinkedPageListItem({page: pageData61, entityId: opt_data.entityId, canEdit: opt_data.canEdit, hidden: pageIndex61 > opt_data.initiallyShownCount - 1});
    }
    output += '</ul>';
    if (opt_data.linkedPages.length > opt_data.initiallyShownCount) {
      output += '<div class="ghx-doco-list-view-more">';
      var viewMoreText__soy72 = '' + soy.$$escapeHtml(AJS.format("{0} more\u2026",opt_data.linkedPages.length - opt_data.initiallyShownCount));
      output += aui.buttons.button({extraClasses: ['js-wiki-view-more-pages-link', 'aui-button-link'], text: viewMoreText__soy72}) + '</div>';
    }
  }
  output += '</div>' + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderPagesActions(null) : '') + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderSearchPagesPanel(null) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialog';
}


GH.tpl.component.linkedpages.renderAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">' + soy.$$escapeHtml("Please authenticate to view more:") + '<ul>';
  var appList90 = opt_data.needAuthenticationApplications;
  var appListLen90 = appList90.length;
  for (var appIndex90 = 0; appIndex90 < appListLen90; appIndex90++) {
    var appData90 = appList90[appIndex90];
    var authenticateLink__soy91 = '<a href="' + soy.$$escapeHtml(appData90.authenticateUrl) + '" class="applink-authenticate">';
    var serverLink__soy95 = '<a href="' + soy.$$escapeHtml(appData90.applicationLink.url) + '" target="_blank">' + soy.$$escapeHtml(appData90.applicationLink.name) + '</a>';
    output += '<li>' + soy.$$filterNoAutoescape(AJS.format("{0}Authenticate{1} with {2}",authenticateLink__soy91,'</a>',serverLink__soy95)) + '</li>';
  }
  output += '</ul></span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderAuthenticationRequest';
}


GH.tpl.component.linkedpages.renderPagesActions = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-divided js-linked-pages-actions" >' + aui.buttons.button({extraClasses: ['js-link-pages-link'], text: "Link page"}) + aui.buttons.button({extraClasses: ['js-create-page-link'], text: "Create page"}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPagesActions.soyTemplateName = 'GH.tpl.component.linkedpages.renderPagesActions';
}


GH.tpl.component.linkedpages.renderSearchPagesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-full-width ghx-final-container js-link-page-panel"><div class="js-page-search"><form class="aui ghx-page-search-form"><input class="ghx-search aui-field check-list-field text js-search-existing-pages-input" type="text" placeholder="' + soy.$$escapeHtml("Search") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small js-search-page-icon js-search-trigger ghx-clickable"></span></form></div><div class="js-entity-view-pages-search-result"></div><div class="js-entity-view-pages-searching hidden"><div class="ghx-progress-indicator ghx-initial"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchPagesPanel.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchPagesPanel';
}


GH.tpl.component.linkedpages.renderPageResults = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-search-pages-result-panel"><div class="ghx-list-suggestions js-entity-view-pages-search-no-matches ' + ((opt_data.pages.length > 0) ? 'hidden' : '') + '">' + soy.$$escapeHtml("No matches") + '</div><ul class="ghx-doco-list">';
  var pageList128 = opt_data.pages;
  var pageListLen128 = pageList128.length;
  for (var pageIndex128 = 0; pageIndex128 < pageListLen128; pageIndex128++) {
    var pageData128 = pageList128[pageIndex128];
    output += '<li class="ghx-doco-list-item ghx-doco-list-result" data-page-id="' + soy.$$escapeHtml(pageData128.id) + '"><div class="ghx-doco-list-item-text"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span><span class="ghx-name" title="' + soy.$$escapeHtml(pageData128.title) + '">' + soy.$$filterNoAutoescape(pageData128.title) + '</span><span class="ghx-sub">' + soy.$$escapeHtml(pageData128.space) + '</span></div></li>';
  }
  output += ((! opt_data.isComplete) ? '<li class="ghx-list-suggestions">' + soy.$$escapeHtml("Continue typing to refine further") + '</li>' : '') + '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPageResults.soyTemplateName = 'GH.tpl.component.linkedpages.renderPageResults';
}


GH.tpl.component.linkedpages.renderLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item ' + ((opt_data.hidden) ? ' ghx-hidden' : '') + '">' + ((opt_data.canEdit) ? '<div class="js-wiki-remove ghx-remove"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml("Remove link to this wiki page") + '" data-page-id="' + soy.$$escapeHtml(opt_data.page.id) + '" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '"></span></div><div class="js-wiki-spin ghx-remove-spin ghx-hidden"><span class="ghx-spinner"></span></div>' : '') + '<div class="ghx-doco-list-item-text">' + ((opt_data.page.permissionDenied || opt_data.page.authenticationRequired) ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml("Restricted wiki page") + '"></span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span>') + ((! opt_data.page.appLinkExists || opt_data.page.pageDeleted || opt_data.page.serverUnavailable) ? '<span class="ghx-name">' + soy.$$escapeHtml("Wiki page failed to load") + '</span>' : '<span class="ghx-name" title="' + soy.$$escapeHtml(opt_data.page.title) + '"><a target="_blank" href="' + soy.$$escapeHtml(opt_data.page.url) + '">' + soy.$$escapeHtml(opt_data.page.title) + '</a></span>') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderStubLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item"><div class="js-wiki-spin ghx-remove-spin"><span class="ghx-spinner"></span></div><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span><span class="ghx-name"><a href="#">' + soy.$$escapeHtml(opt_data.pageTitle) + '</a></span></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderStubLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderStubLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderTrigger = function(opt_data, opt_ignored) {
  var output = '';
  var buttonText__soy194 = AJS.format("{0}{0,choice,0# Linked|1# linked|1\x3c linked} {0,choice,0# pages|1# page|1\x3c pages}",opt_data.linkedPagesCount ? opt_data.linkedPagesCount : '');
  output += aui.buttons.button({extraAttributes: {title: opt_data.title}, extraClasses: ['aui-button-link', 'js-view-entity-pages', 'ghx-linked-pages-trigger'], text: buttonText__soy194});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderTrigger.soyTemplateName = 'GH.tpl.component.linkedpages.renderTrigger';
}


GH.tpl.component.linkedpages.renderSearchAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">';
  var authenticateLink__soy201 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationUrl) + '" class="applink-authenticate">';
  var serverLink__soy205 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationLinkUrl) + '" target="_blank">' + soy.$$escapeHtml(opt_data.authenticationLinkName) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format("Please {0}Authenticate{1} with {2} to perform search",authenticateLink__soy201,'</a>',serverLink__soy205)) + '</span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchAuthenticationRequest';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.js' */
define("jira-agile/rapid/ui/chart/report-controller",["require"],function(i){var e=i("jquery");var r=i("underscore");var c=i("jira-agile/rapid/analytics-tracker");var o=i("jira-agile/rapid/ui/chart/burndown-chart-controller");var a=i("jira-agile/rapid/ui/chart/cfd-controller");var n=i("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller");var q=i("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller");var g=i("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller");var f=i("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-controller");var m=i("jira-agile/rapid/ui/chart/version-report-controller");var d=i("jira/ajs/dark-features");var l={};l.charts=[];l.rapidViewData={};l.visible=false;l.rapidViewConfig={};l.analytics=new c("gh.report");l.ANALYTICS_TIME_SPENT_MILESTONES=[10*1000,30*1000,60*1000,2*60*1000,4*60*1000,8*60*1000];l.init=r.once(function(){l.initCharts();r.each(l.getCharts(),function(s){s.controller.setRapidView(l.rapidViewData)});GH.ChartTimeFrames.init();GH.ChartFilters.init();e(GH).bind("issueCreated",l.handleIssueCreated);e(GH).bind(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,l.handleSprintReopened)});l.initCharts=function(){l.charts=[{id:o.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:o},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.EpicReportController.id,name:"Epic Report",description:"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:q.id,name:"Epic Burndown",description:"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Epic+Burndown","isLocal":false}.url,controller:new q()},{id:m.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:m},{id:g.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Release+Burndown","isLocal":false}.url,controller:new g()},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:n.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyze the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Control+Chart","isLocal":false}.url,controller:n},{id:a.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:a}];if(d.isEnabled("com.atlassian.jira.agile.darkfeature.burnupchart")){l.getCharts().unshift({id:"burnupChart",name:"Burnup Chart",description:"Track the total scope independently from the total work done. This helps your team manage its progress and better understand the effect of scope change.  The Burnup Chart is a JIRA Software Labs feature and is subject to change. Currently, the Burnup Chart tracks only the scope within a sprint. Please give us your valuable feedback.",tooltip:"Track the total scope independently from the total work done. This helps your team manage its progress and better understand the effect of scope change.  The Burnup Chart is a JIRA Software Labs feature and is subject to change. Currently, the Burnup Chart tracks only the scope within a sprint. Please give us your valuable feedback.",documentation:{"isLocal":false}.url,controller:new f()})}r.each(l.getCharts(),function(s){if(s.controller.init){s.controller.init()}})};l.getCharts=function(){return l.charts};l.getApplicableCharts=function(){return r.filter(l.getCharts(),function(s){return s.controller.isApplicable(l.rapidViewConfig)})};l.isApplicableChart=function(t){var s=false;r.each(l.getApplicableCharts(),function(u){if(u.id===t){s=true}});return s};l.getChart=function(s){return r.findWhere(l.charts,{id:s})};l.getSelectedChart=function(){return GH.RapidBoard.State.getChartType()};l.renderReportView=function(){var t=!GH.RapidBoard.ViewController.shouldShowSubnavigator();e("#ghx-report").html(GH.tpl.reportcontroller.renderReportView({shouldShowNavigation:t}));var s=e("#ghx-controls-report");GH.PresentationMode.render(true,s)};l.renderReopenButton=function j(t,v,s,x){t.empty();if(x.state==="CLOSED"){var u=GH.RapidBoard.parallelSprints;var w=r.any(s,function(y){return y.state==="ACTIVE"});t.append(GH.tpl.reportcontroller.renderReopenSprintButton({noSprintReopenPermissions:!GH.RapidViewConfig.canManageSprints,noParallelSprintsAndSprintActive:!u&&w}));t.find("#ghx-reopen-sprint").on("click",function(y){y.preventDefault();GH.Dialogs.ReopenSprintDialog.showDialog(v,x.id)})}};l.setRapidView=function(s){l.rapidViewData=s||{};r.each(l.getCharts(),function(t){t.controller.setRapidView(l.rapidViewData)})};l.show=function(){if(!l.rapidViewData.id){return}l.visible=true;GH.ChartTimeFrameService.setRapidViewId(l.rapidViewData.id);l.renderReportView();l.loadRapidViewConfig()};l.loadRapidViewConfig=function(){var s=function(t){if(!l.visible){return}l.rapidViewConfig=t;l.configureContent()};GH.RapidViewConfig.fetchConfiguration(l.rapidViewData.id).done(s)};l.configureContent=function(){GH.ViewActions.setMode(GH.ViewActions.REPORT_MODE);var s=GH.RapidBoard.State.getChartType();if(!l.isApplicableChart(s)){s=false}if(!s){var t=l.getApplicableCharts();GH.RapidBoard.State.setChartType(r.first(t).id)}if(GH.RapidBoard.ViewController.shouldShowSubnavigator()){GH.RapidBoard.SubnavigatorController.render()}GH.RapidBoard.ViewController.updateContentContainer();l.showChart()};l.hide=function(){if(l.visible){l.hideCharts();l.visible=false;e("#ghx-report").empty();if(l.analyticsTimer){l.analyticsTimer.destroy()}}};l.hideCharts=function(s){r.each(l.getCharts(),function(t){if(t.id!==s){t.controller.hide()}})};l.selectChart=function(s){GH.SprintRetrospectiveView.clearDialog();GH.RapidBoard.State.setChartType(s);l.showChart()};l.getCurrentChart=function(){var s=GH.RapidBoard.State.getChartType();if(!s){return}return l.getChart(s)};l.showChart=function(){var s=l.getCurrentChart();if(!s){return}l.updateChartMenu(s.id);l.updateChartHeader(s);l.hideCharts();s.controller.show();l.handleIntroState();if(l.analyticsTimer){l.analyticsTimer.destroy()}l.analyticsTimer=new GH.DurationsTimer(l.ANALYTICS_TIME_SPENT_MILESTONES).on("tick",function(u){var t=s.id+(s.inLabs?".new":"")+".view."+(l.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");l.analytics.trigger(t,"duration",u/1000)})};l.updateChartMenu=function(s){var u=e("#ghx-chart-nav");u.html(e(GH.tpl.reportcontroller.renderChartMenu({activeChart:s,availableCharts:l.getApplicableCharts(),board:l.rapidViewConfig})));var t=u.find("li");t.bind("simpleClick",GH.Util.wrapPreventDefault(function(v){l.handleChartSelection(v,e(this))}));e(".tipsy").remove();GH.Tooltip.tipsify({selector:t,gravity:"w",className:"ghx-tipsy-left"})};l.updateChartHeader=function(s){var t=e("#ghx-chart-message");t.empty();e("#ghx-chart-header .ghx-linked-pages-trigger").remove();e("#ghx-chart-selector").empty();e("#ghx-chart-snapshot").empty();e("#ghx-chart-title").html(GH.tpl.reportcontroller.renderChartTitle({activeChart:s}));e(".ghx-chart-legend").hide();e("#ghx-chart-reopen-sprint").empty();e("#ghx-chart-title").html(GH.tpl.reportcontroller.renderChartTitle({activeChart:s}));e("#ghx-chart-intro").html(GH.tpl.reportcontroller.renderChartIntro({activeChart:s}));e("#ghx-chart-help").html(GH.tpl.reportcontroller.renderChartDescriptionClosed());e("#ghx-chart-panel-content").find(".js-chart-intro-toggle").on("click",function(u){l.toggleIntroState(u)})};l.handleChartSelection=function b(u,t){var s=t.find("a").attr("data-chart");l.selectChart(s)};l.handleIssueCreated=function(s,t){if(!l.visible){return}GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(t)};l.handleSprintReopened=function(s,t){GH.RapidBoard.ViewController.setMode("work");GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_RENDERED,"afterSprintReopened",function u(){GH.WorkControls.sprintfilters.setActiveSprintFilters([t]);e(GH.WorkControls.sprintfilters).trigger("sprintFilterChange");GH.RapidBoard.State.pushState()})};l.handleIntroState=function p(){if(GH.RapidBoard.State.getStoredChartIntroState()===false){l.closeIntro()}};l.toggleIntroState=function k(){var t=e(".ghx-intro-content");var s=e("#ghx-chart-help");if(t.hasClass("ghx-closed")){t.removeClass("ghx-closed");GH.RapidBoard.Animation.animateHeightToAuto(t);s.addClass("ghx-closed");GH.RapidBoard.State.setChartIntroState(true)}else{GH.RapidBoard.Animation.animateHeightToZero(t).done(function(){t.addClass("ghx-closed");s.removeClass("ghx-closed")});GH.RapidBoard.State.setChartIntroState(false)}};l.closeIntro=function h(){e(".ghx-intro-content").height(0).addClass("ghx-closed");e("#ghx-chart-help").removeClass("ghx-closed")};return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.soy' */
// This file was automatically generated from ReportController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reportcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reportcontroller == 'undefined') { GH.tpl.reportcontroller = {}; }


GH.tpl.reportcontroller.renderReportView = function(opt_data, opt_ignored) {
  return '<div id="ghx-report-scrollarea"><div class="aui-page-panel"><div class="aui-page-panel-inner">' + ((opt_data.shouldShowNavigation) ? '<div class="aui-page-panel-nav js-reports-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml("Reports") + '</strong></div><ul id="ghx-chart-nav" class="aui-nav"></ul></div></nav></div>' : '') + '<section id="ghx-chart-panel-content" class="aui-page-panel-content"><div id="ghx-chart-message"></div><div id="ghx-chart-intro"></div><div id="ghx-chart-header" class="aui-group aui-group-split ghx-fluid"><div id="ghx-chart-header-primary" class="aui-item"><div id="ghx-chart-title"></div><div id="ghx-chart-selector"></div><div id="ghx-chart-controls"></div><div id="ghx-chart-help" class="ghx-closed"></div><div id="ghx-chart-snapshot"></div></div><div id="ghx-chart-header-secondary" class="aui-item"><div id="ghx-chart-reopen-sprint"></div><div class="ghx-chart-legend"></div></div></div><div id="ghx-chart-content"></div></section></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReportView.soyTemplateName = 'GH.tpl.reportcontroller.renderReportView';
}


GH.tpl.reportcontroller.renderReopenSprintButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'ghx-reopen-sprint', isDisabled: opt_data.noSprintReopenPermissions || opt_data.noParallelSprintsAndSprintActive, type: 'link', text: "Reopen Sprint", extraClasses: 'js-reopen-sprint', extraAttributes: {title: opt_data.noSprintReopenPermissions ? "You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e" : opt_data.noParallelSprintsAndSprintActive ? "This sprint cant be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently." : ''}});
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReopenSprintButton.soyTemplateName = 'GH.tpl.reportcontroller.renderReopenSprintButton';
}


GH.tpl.reportcontroller.renderChartMenu = function(opt_data, opt_ignored) {
  var output = '';
  var chartList19 = opt_data.availableCharts;
  var chartListLen19 = chartList19.length;
  for (var chartIndex19 = 0; chartIndex19 < chartListLen19; chartIndex19++) {
    var chartData19 = chartList19[chartIndex19];
    output += '<li ' + ((opt_data.activeChart == chartData19.id) ? 'class="aui-nav-selected"' : '') + ' data-tooltip="' + soy.$$escapeHtml(chartData19.tooltip) + '"><a data-chart="' + soy.$$escapeHtml(chartData19.id) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.board.id) + '&amp;view=reporting&amp;chart=' + soy.$$escapeHtml(chartData19.id) + '">' + soy.$$escapeHtml(chartData19.name) + ((chartData19.inLabs) ? ' <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml("New") + '</span>' : '') + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartMenu.soyTemplateName = 'GH.tpl.reportcontroller.renderChartMenu';
}


GH.tpl.reportcontroller.renderChartTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.activeChart.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartTitle.soyTemplateName = 'GH.tpl.reportcontroller.renderChartTitle';
}


GH.tpl.reportcontroller.renderChartIntro = function(opt_data, opt_ignored) {
  return '<div class="ghx-intro-content ghx-open"><div class="aui-group ghx-content-open">' + GH.tpl.reportcontroller.renderChartDescription(opt_data) + '<div class="aui-item ghx-item-how"><div class="aui-group ghx-group-how">' + GH.tpl.reportcontroller.renderChartHow(opt_data) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartIntro.soyTemplateName = 'GH.tpl.reportcontroller.renderChartIntro';
}


GH.tpl.reportcontroller.renderChartDescription = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><h4 class="ghx-margin-none"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help ghx-margin-right"></span>' + soy.$$escapeHtml("How to read this chart") + '</h4><p>' + soy.$$escapeHtml(opt_data.activeChart.description) + '</p><p>' + ((opt_data.activeChart.documentation) ? aui.buttons.button({extraAttributes: {href: opt_data.activeChart.documentation, target: '_blank'}, text: "Learn more", tagName: 'a'}) : '') + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: "Hide this information"}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescription.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescription';
}


GH.tpl.reportcontroller.renderChartDescriptionClosed = function(opt_data, opt_ignored) {
  return '<div class="ghx-howto-trigger ghx-closed"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help"></span> ' + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: "How to read this chart", tagName: 'a'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescriptionClosed.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescriptionClosed';
}


GH.tpl.reportcontroller.renderChartHow = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.activeChart.howTos) {
    var howToList81 = opt_data.activeChart.howTos;
    var howToListLen81 = howToList81.length;
    for (var howToIndex81 = 0; howToIndex81 < howToListLen81; howToIndex81++) {
      var howToData81 = howToList81[howToIndex81];
      output += GH.tpl.reportcontroller.renderChartHowItem({howTitle: howToData81.title, howDescription: howToData81.description});
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHow.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHow';
}


GH.tpl.reportcontroller.renderChartHowItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><svg class="ghx-svg-chart"></svg><strong class="ghx-how-title">' + soy.$$escapeHtml(opt_data.howTitle) + '</strong><div class="ghx-how-description">' + soy.$$escapeHtml(opt_data.howDescription) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHowItem.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHowItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportUrlState.js' */
GH.ReportUrlState={};GH.ReportUrlState.self="ReportUrlState";GH.ReportUrlState.isApplicable=function(a){return a.mode==="report"};GH.ReportUrlState.getNormalizedFromUrl=function(a,c){GH.ReportController.init();var d=c.chart=GH.RapidBoard.UrlState.normalizeStringParam(a.chart,"");var b=GH.ReportController.getChart(d);if(b){_.defaults(c,b.controller.getNormalizedFromUrl(a))}};GH.ReportUrlState.toUrl=function(c,a){var d=a.chart=c.chart;var b=GH.ReportController.getChart(d);if(b){_.defaults(a,b.controller.toUrl(c))}};GH.ReportUrlState.getNormalizedFromInternal=function(b){GH.ReportController.init();var a=GH.ReportController.getCurrentChart();b.chart=GH.RapidBoard.State.getChartType();if(a){_.defaults(b,a.controller.getNormalizedFromInternal())}};GH.ReportUrlState.updateInternalFromNormalized=function(b){GH.ReportController.init();GH.RapidBoard.State.setChartType(b.chart);var a=GH.ReportController.getChart(b.chart);if(a){a.controller.updateInternalFromNormalized(b)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/Chart.js' */
define("jira-agile/rapid/ui/chart/chart",["require"],function(c){var f=c("jquery");var e=GH.Layout;var d=GH.log;var b=GH.Logger;var a={};a.EVENT_RESIZE_REDRAW="gh.chart.resize_redraw";a.defaultOptions={colors:["#9eb6d4","#afd8f8","#cb4b4b","#4da74d","#9440ed"],grid:{backgroundColor:"#fff",borderColor:"#bbb",borderWidth:1,internalLineWidth:0,labelMargin:2,minBorderMargin:1},legend:{container:"#ghx-chart-legend",noColumns:1},shadowSize:0,xaxis:{tickLength:4},yaxis:{tickLength:4}};a.draw=function(l,g,i,h){g=f(g);var k=f.extend(true,{},a.defaultOptions);if(h){f.extend(true,k,h)}var j=f.plot(g,i,k);a.bindToWindowSize(l,j);return j};a.bindToWindowSize=function(h,g){f(GH).bind(e.EVENT_DELAYED_RESIZE+"."+h,function(){d("adjusting chart ["+h+"] to window size");f(GH).trigger(a.EVENT_RESIZE_REDRAW,{id:h,chart:g});try{g.resize();g.setupGrid();g.draw()}catch(i){d("Got an error while trying to resize chart: "+i,b.Contexts.ui)}})};a.destroy=function(g){f(GH).unbind(e.EVENT_DELAYED_RESIZE+"."+g)};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartUtils.js' */
GH.ChartUtils={};GH.ChartUtils.oneMinuteInMillis=60*1000;GH.ChartUtils.oneHourInMillis=GH.ChartUtils.oneMinuteInMillis*60;GH.ChartUtils.oneDayInMillis=24*GH.ChartUtils.oneHourInMillis;GH.ChartUtils.fixButtons=function(d){var b=AJS.$(d).find(".aui-buttons");var c;var f;var e;var a;var g;b.each(function(){f=AJS.$(this).position();e=f.left;c=AJS.$(this).find(".aui-button");c.each(function(){a=AJS.$(this).position();g=a.left;if(g===e){AJS.$(this).addClass("first");AJS.$(this).prev(".aui-button").addClass("last")}})})};GH.ChartUtils.registerInlineDialogHacks=function(a){AJS.$(document).bind("showLayer",function(c,b,d){GH.log(c.type+" handled","anonymous function");if(b==="inlineDialog"&&AJS&&AJS.InlineDialog&&AJS.InlineDialog.current&&AJS.InlineDialog.current.id===a){d._validateClickToClose=function(f){if(AJS.$(f.target).parents(".calendar").length>0){return false}if(AJS.$(f.target).parents("#inline-dialog-"+AJS.InlineDialog.current.id).length>0){return false}return true};AJS.$("body").unbind("click."+AJS.InlineDialog.current.id+".inline-dialog-check");setTimeout(function(){if(AJS.InlineDialog.current&&AJS.InlineDialog.current.id){GH.ChartUtils.fixButtons("#inline-dialog-"+AJS.InlineDialog.current.id)}},0)}})};GH.ChartUtils.createIssueJql=function(a){var b=_.pluck(a,"key");return"issueKey in ("+b.join(",")+")"};GH.ChartUtils.createEpicJql=function(a){return'"'+GH.EpicConfig.getEpicLinkFieldName()+'" = "'+a.key+'"'};GH.ChartUtils.createVersionJql=function(a){return"fixVersion="+encodeURIComponent(a.jqlEncodedName)+" AND project="+a.projectKey};GH.ChartUtils.createStatusJql=function(b){var a=_.pluck(b,"name");return'Status IN ("'+a.join('","')+'")'};GH.ChartUtils.getStatisticConsumer=function(a){var b=require("jira-agile/rapid/ui/chart/burndown-timeline-producer");if(a){return b.TimeTrackingStatisticConsumer}else{return b.EstimateStatisticConsumer}};GH.ChartUtils.renderStatisticText=function(b,a,e){a=_.isUndefined(a)?false:a;var d=a?Math.abs(b):b;if(e==="duration"){var c=(!a&&b<0)?"-":"";d=Math.abs(d);return c+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(d)}else{return GH.NumberFormat.format(d)}};GH.ChartUtils.renderUTCMillisAsDate=function(a){return GH.ChartUtils.renderUTCMillisInFormat(a,GH.ChartTimeFrames.momentTimeFormat)};GH.ChartUtils.renderUTCMillisAsDateWithoutTime=function(a){return GH.ChartUtils.renderUTCMillisInFormat(a,GH.ChartTimeFrames.momentDateFormat)};GH.ChartUtils.renderUTCMillisInFormat=function(a,c){var b=moment.utc(a).format(c);return b};GH.ChartUtils.getTimeFrameReportUrlParams=function(b){var a={days:GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),swimlane:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.swimlanes",[]),column:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.columns."+b,[]),quickFilter:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.quickFilters",[])};if(a.days===-1){a.from=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from");a.to=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to")}else{a.from=0;a.to=0}return a};GH.ChartUtils.timeFrameReportParamsToUrl=function(b){var a={};if(b.swimlane.length>0){a.swimlane=b.swimlane}if(b.column.length>0){a.column=b.column}if(b.quickFilter.length>0){a.quickFilter=b.quickFilter}if(b.days===-1){a.from=new Date(b.from).print(GH.RapidBoard.UrlState.dateFormat);a.to=new Date(b.to).print(GH.RapidBoard.UrlState.dateFormat)}else{if(b.days>0){a.days=b.days}}return a};GH.ChartUtils.getNormalizedFromUrlForTimeFrameReport=function(b){var a={swimlane:GH.RapidBoard.UrlState.normalizeNumberArrayParam(b.swimlane),column:GH.RapidBoard.UrlState.normalizeNumberArrayParam(b.column),quickFilter:GH.RapidBoard.UrlState.normalizeNumberArrayParam(b.quickFilter)};var e=GH.RapidBoard.UrlState.normalizeNumberParam(b.days,0);var d=GH.RapidBoard.UrlState.normalizeDateParam(b.from,null);var c=GH.RapidBoard.UrlState.normalizeDateParam(b.to,null);if(d!==null&&c!==null){a.days=-1;a.from=d.getTime();a.to=c.getTime()}else{a.days=e;a.from=0;a.to=0}return a};GH.ChartUtils.getChartOptions=function(a){var b=require("jira-agile/rapid/ui/chart/chart-controller");return{xaxis:{mode:"time",min:a.getXAxisStart(),max:a.getXAxisEnd()},yaxes:a.getYAxes(),legend:{container:AJS.$("#ghx-chart-legend"),backgroundOpacity:0.5,position:"se"},grid:{markings:b.getNonWorkingBlocks,hoverable:true,clickable:false,autoHighlight:false},mouseEnterExitEvents:true}};GH.ChartUtils.updateFromNormalizedStateDateTimeParams=function(a){GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",a.days);GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",a.from);GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",a.to);GH.RapidBoard.State.setBoardSetting("chart.filters.swimlanes",a.swimlane);GH.RapidBoard.State.setBoardSetting("chart.filters.columns."+a.chart,a.column);GH.RapidBoard.State.setBoardSetting("chart.filters.quickFilters",a.quickFilter)};GH.ChartUtils.calculateYProjection=function(h,f,d){function c(i){if(_.isArray(i)){return{x:i[0],y:i[1]}}return i}h=c(h);f=c(f);d=c(d);var g=f.x-h.x;var e=d.x-h.x;var b=f.y-h.y;var a=b*e/g;return a+h.y};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){var a={estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/FlotChartUtils.js' */
GH.FlotChartUtils={};GH.FlotChartUtils.handlePlotClick=function(b,c,a){};GH.FlotChartUtils.deferredRenderPoints=function(b,a){a.save();a.translate(b.getPlotOffset().left,b.getPlotOffset().top);a.strokeStyle="rgb(100, 100, 100)";a.fillStyle="rgba(255, 255, 255, 0.5)";_.each(b.realPointsPerSeries,function(c){_.each(c,function(d){GH.FlotChartUtils.drawPoint(a,d)})});a.restore()};GH.FlotChartUtils.drawPoint=function(b,a){b.beginPath();b.arc(a.x,a.y,3,0,Math.PI*2,false);b.fill();b.closePath();b.stroke()};GH.FlotChartUtils.handleMouseOverStateChange=function(a,b){GH.Logger.log("Handling mouse over state change in ChartView",GH.Logger.Contexts.ui);b.realPointsPerSeries={};b.draw()};GH.FlotChartUtils.setAndAlignAxisLabels=function(b,c,a){AJS.$("#ghx-axis-x").text(b);AJS.$("#ghx-axis-y").find(".ghx-inner").text(c);if(a){AJS.$("#ghx-axis-y-right").find(".ghx-inner").text(a)}};GH.FlotChartUtils.calculateYAxis=function(b,a){var c={};if(a.renderer==="duration"){return GH.FlotChartUtils.createYAxisForDuration(b)}else{if(a.typeId==="issueCount"){return GH.FlotChartUtils.createYAxisForIssueCount(b)}else{return{tickFormatter:GH.FlotChartUtils.numberFormatter}}}return c};GH.FlotChartUtils.issueCountFormatter=function(a,b){return a.toFixed(0)};GH.FlotChartUtils.durationFormatter=function(a,b){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(a,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})};GH.FlotChartUtils.numberFormatter=function(a,b){return GH.NumberFormat.format(a)};GH.FlotChartUtils.createYAxisForIssueCount=function(b){var a={tickFormatter:GH.FlotChartUtils.issueCountFormatter};if(b<15){a.minTickSize=1}else{numTicks=8;minTickSize=Math.ceil(b/numTicks);a.tickSize=minTickSize}return a};GH.FlotChartUtils.createYAxisForDuration=function(a){var d=8,c=parseInt(a/d,10);if(a===0){c=3600}var b=(c%3600);if(b!==0){c+=3600-b}return{tickSize:c,tickFormatter:GH.FlotChartUtils.durationFormatter}};GH.FlotChartUtils.gatherPoints=function(f,b){var g=f.datapoints;var o=g.points,a=g.pointsize;var n=f.xaxis;var l=f.yaxis;var p=[];for(var e=0;e<o.length;e+=a){var k=Math.ceil(e/a);var d=b[k];if(_.isEmpty(d)){continue}var c=o[e],m=o[e+1];if(c==null||c<n.min||c>n.max||m<l.min||m>l.max){continue}var j=n.p2c(c);var h=l.p2c(m);p.push({x:j,y:h,time:c,statValue:m})}return p};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.js' */
define("jira-agile/rapid/ui/component/chart-picker",["require"],function(f){var h=f("jquery");var e=f("underscore");var b=f("jira-agile/rapid/global-events");var g=f("jira/ajs/select/single-select");var c;var d=GH.tpl;b.on("pre-initialization",function(){c=GH.BoardState});var a=function(j,i){this.selectedItemStateKey=j;this.items=[];this.defaultItem=undefined;this.emptyItemsMsg=i||"There are no available sprints for this board."};a.prototype.setItems=function(i){this.items=i||[]};a.prototype.getItems=function(){return this.items};a.prototype.hasItems=function(){return !e.isEmpty(this.items)};a.prototype.getDefaultItem=function(){return this.defaultItem};a.prototype.getDefaultItemId=function(){return this.defaultItem?this.defaultItem.id:false};a.prototype.setDefaultItem=function(i){this.defaultItem=i||undefined};a.prototype.getItemById=function(j){var i=e.find(this.items,function(k){return k.id.toString()===j.toString()});return e.isUndefined(i)?false:i};a.prototype.getSelectedItem=function(){var j;var i=this.getStoredSelectedItemId();if(i){j=this.getItemById(i)}if(!j){if(this.getDefaultItem()){j=this.getDefaultItem()}else{if(this.hasItems()){j=e.last(this.getItems())}}}if(j){var k=this.getDefaultItemId()===j.id?-1:j.id;this.storeSelectedItemId(k)}return j||false};a.prototype.setSelectedItem=function(j,l){this.previousSelectedItem=this.getSelectedItem();var i=this.getItemById(j);if(i){var k=this.getDefaultItemId()===i.id?-1:i.id;this.storeSelectedItemId(k)}else{this.storeSelectedItemId(false)}if(!l){h(this).trigger("selectedItemChanged",{item:i})}};a.prototype.removeSelectedItemAndRevert=function(j){if(this.previousSelectedItem){var i=this.getSelectedItem().id;this.items=e.reject(this.items,function(k){return k.id===i});this.setSelectedItem(this.previousSelectedItem.id);this.render(j)}};a.prototype.getStoredSelectedItemId=function(){return c.getPerViewValue(this.selectedItemStateKey,false)};a.prototype.storeSelectedItemId=function(i){c.setPerViewValue(this.selectedItemStateKey,i||false)};a.prototype.render=function(j){var n=this.items.length>1;var m=this.getSelectedItem();var k=this;var l=function(p,o){k.setSelectedItem(o.value())};var i=function(o){k.showDropdown(o,function(){k.render(j)},l)};if(n){j.html(d.component.chartpicker.renderSingleSelect({items:this.items,selectedItem:m}));h("#ghx-items-trigger").click(i)}else{if(m){j.html(d.component.chartpicker.renderSingleItem({selectedItemId:m.id,selectedItemName:m.name||""}))}else{h("#ghx-chart-content").html(d.component.chartpicker.renderEmpty({emptyItemsMsg:this.emptyItemsMsg}))}}h("#ghx-chart-picker-form").submit(function(){return false})};a.prototype.showDropdown=function(m,i,n){h(m.target).hide();var j=h("#ghx-chart-picker");var l=new g({element:j,width:250,errorMessage:"",setMaxHeightToWindow:true});var k=h("#ghx-chart-picker-field");j.bind("selected",function(p,o){if(o.value()){n(p,o)}k.blur()});k.blur(i);k.focus().select();setTimeout(function(){h("#ghx-chart-picker-field").trigger("click")},20)};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.soy' */
// This file was automatically generated from ChartPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.chartpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.chartpicker == 'undefined') { GH.tpl.component.chartpicker = {}; }


GH.tpl.component.chartpicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleItem';
}


GH.tpl.component.chartpicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderEmpty.soyTemplateName = 'GH.tpl.component.chartpicker.renderEmpty';
}


GH.tpl.component.chartpicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderDropdown.soyTemplateName = 'GH.tpl.component.chartpicker.renderDropdown';
}


GH.tpl.component.chartpicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-chart-picker-form" class="aui ghx-chart-picker">' + aui.buttons.button({id: 'ghx-items-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-chart-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.js' */
define("jira-agile/rapid/ui/component/estimate-picker",["require"],function(c){var e=c("jquery");var h=c("underscore");var i=c("jira-agile/rapid/ui/chart/chart-view");var j=c("jira/ajs/select/single-select");var b=GH.Ajax;var a=GH.BoardState;var g=GH.RapidBoard.State;var f=GH.tpl;var d=function(k,l){this.selectedItemStateKey=k;this.items=[];this.defaultItem=undefined;this.supportTimeTracking=l};d.prototype.setItems=function(k){this.items=k||[]};d.prototype.getItems=function(){return this.items};d.prototype.hasItems=function(){return !h.isEmpty(this.items)};d.prototype.getDefaultItem=function(){return this.defaultItem};d.prototype.getDefaultItemId=function(){return this.defaultItem?this.defaultItem.id:false};d.prototype.setDefaultItem=function(k){this.defaultItem=k||undefined};d.prototype.getItemById=function(l){var k=h.find(this.items,function(m){return m.id===l});return k};d.prototype.getSelectedItem=function(){var k=this.getStoredSelectedItemId();var l=k?this.getItemById(k):null;if(!l){if(this.getDefaultItem()){l=this.getDefaultItem()}else{if(this.hasItems()){l=h.last(this.getItems())}}this.storeSelectedItemId();g.pushState()}return l||false};d.prototype.setSelectedItem=function(l,m){this.previousSelectedItem=this.getSelectedItem();var k=this.getItemById(l);if(k){this.storeSelectedItemId(l)}else{this.storeSelectedItemId()}if(!m){e(this).trigger("selectedItemChanged",{item:k})}};d.prototype.getStoredSelectedItemId=function(){return a.getPerViewValue(this.selectedItemStateKey,null)};d.prototype.storeSelectedItemId=function(k){a.setPerViewValue(this.selectedItemStateKey,k)};d.prototype.render=function(l){var p=this.items.length>1;var o=this.getSelectedItem();var m=this;var n=function(r,q){m.setSelectedItem(q.value())};var k=function(q){m.showDropdown(q,function(){m.render(l)},n)};if(p){l.html(f.component.estimatePicker.renderSingleSelect({items:this.items,selectedItem:o}));e("#ghx-estimate-picker-trigger").click(k)}else{if(o){l.html(f.component.estimatePicker.renderSingleItem({selectedItemId:o.id,selectedItemName:o.name||""}))}}e("#ghx-estimate-picker-form").submit(function(){return false})};d.prototype.showDropdown=function(o,k,p){e(o.target).hide();var l=e("#ghx-estimate-picker");var n=new j({element:l,width:250,errorMessage:"",setMaxHeightToWindow:true});var m=e("#ghx-estimate-picker-field");l.bind("selected",function(r,q){if(q.value()){p(r,q)}m.blur()});m.blur(k);m.focus().select();setTimeout(function(){e("#ghx-estimate-picker-field").trigger("click")},20)};d.prototype.load=function(m,l){var k=this;return b.get({url:"/rapidviewconfig/estimation.json",data:{rapidViewId:m}},"rapidBoardEstimateStatistics").done(function(p){if(p.availableEstimationStatistics){var o=p.availableEstimationStatistics;var n=p.currentEstimationStatistic;if(k.supportTimeTracking&&p.currentTrackingStatistic.isEnabled){o.push(p.currentTrackingStatistic);n=p.currentTrackingStatistic}k.setItems(o);k.setDefaultItem(n);var q=function(){var r=k.getSelectedItem().id;l(r)};e(k).bind("selectedItemChanged",q);k.render(i.getChartControls(true));i.showChartControls()}})};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.soy' */
// This file was automatically generated from EstimatePicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.estimatePicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.estimatePicker == 'undefined') { GH.tpl.component.estimatePicker = {}; }


GH.tpl.component.estimatePicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleItem';
}


GH.tpl.component.estimatePicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderEmpty.soyTemplateName = 'GH.tpl.component.estimatePicker.renderEmpty';
}


GH.tpl.component.estimatePicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-estimate-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderDropdown.soyTemplateName = 'GH.tpl.component.estimatePicker.renderDropdown';
}


GH.tpl.component.estimatePicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-estimate-picker-form" class="aui ghx-estimate-picker">' + aui.buttons.button({id: 'ghx-estimate-picker-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-estimate-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.js' */
define("jira-agile/rapid/ui/component/sprint-select",["require"],function(b){var d=b("jquery");var c=b("jira/ajs/select/single-select");var a=b("jira-agile/rapid/events");var e=function(){a(this);this.singleSelect=undefined};e.prototype.initDropdown=function(){var h=this;var g=function(){h.trigger("change",this.value)};var f=d("#ghx-sprint-select");this.singleSelect=new c({element:f,itemAttrDisplayed:"label"});f.on("change",g);f.on("unselect",g);d("#ghx-sprint-select-form").submit(function(){return false})};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.soy' */
// This file was automatically generated from SprintSelect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintselect == 'undefined') { GH.tpl.component.sprintselect = {}; }


GH.tpl.component.sprintselect.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<div><form id="ghx-sprint-select-form" class="aui ghx-sprint-select"><div class="field-group"><label>' + soy.$$escapeHtml("Move to") + '</label><select id="ghx-sprint-select" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList10 = opt_data.items;
  var itemListLen10 = itemList10.length;
  for (var itemIndex10 = 0; itemIndex10 < itemListLen10; itemIndex10++) {
    var itemData10 = itemList10[itemIndex10];
    output += (itemData10.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData10.id) + '">' + soy.$$escapeHtml(itemData10.name) + '</option>' : '';
  }
  output += '</select></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSingleSelect.soyTemplateName = 'GH.tpl.component.sprintselect.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.js' */
GH.ChartTooltip=function(b,c,a){this.item=b;this.data=c;this.type=a};GH.ChartTooltip.prototype.render=function(){var f=require("jira-agile/rapid/ui/chart/change-event");var e;if(this.type===f.releaseDate){e=AJS.$(GH.tpl.charttooltip.renderReleaseDatePredictionTooltip({data:this.data}))}else{if(this.type===f.startDate){e=AJS.$(GH.tpl.charttooltip.renderStartDateTooltip({data:this.data}))}else{if(this.type===f.uncertainty){e=AJS.$(GH.tpl.charttooltip.renderUncertainty({tooltipData:this.data}))}else{e=AJS.$(GH.tpl.charttooltip.renderTooltip({tooltipData:this.data}))}}}var a=this.item.pageX;var g=this.item.pageY;var c=this.item.series;e.css({position:"absolute",display:"none",top:g+5,"border-left-color":c.color});e.appendTo("body");var d=e.width();var b=AJS.$("#ghx-chart-view canvas.base");if(a+d>b.offset().left+b.width()){e.css({left:a-(30+d)})}else{e.css({left:a+15})}e.fadeIn(200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.soy' */
// This file was automatically generated from ChartTooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttooltip.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttooltip == 'undefined') { GH.tpl.charttooltip = {}; }


GH.tpl.charttooltip.renderTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  if (opt_data.tooltipData.initial || opt_data.tooltipData.complete) {
    output += '<strong>' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}",opt_data.tooltipData.issueCount)) + '</strong><br/>' + soy.$$escapeHtml(opt_data.tooltipData.event.type) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.statisticName) + ': ' + soy.$$escapeHtml(opt_data.tooltipData.statisticValue) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText);
  } else {
    var changeList17 = opt_data.tooltipData.changes;
    var changeListLen17 = changeList17.length;
    for (var changeIndex17 = 0; changeIndex17 < changeListLen17; changeIndex17++) {
      var changeData17 = changeList17[changeIndex17];
      output += '<strong>' + soy.$$escapeHtml(changeData17.key) + '</strong><br/>' + ((changeData17.event.typeAsHtml) ? soy.$$filterNoAutoescape(changeData17.event.type) : soy.$$escapeHtml(changeData17.event.type)) + '<br/>' + soy.$$escapeHtml(changeData17.event.detail) + '<br/>&#x394; ' + soy.$$escapeHtml(changeData17.statisticName) + ': ' + soy.$$escapeHtml(changeData17.statisticDelta) + '<br />';
    }
    output += soy.$$escapeHtml(opt_data.tooltipData.dateText);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderTooltip';
}


GH.tpl.charttooltip.renderReleaseDatePredictionTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.predictedReleaseDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderReleaseDatePredictionTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderReleaseDatePredictionTooltip';
}


GH.tpl.charttooltip.renderStartDateTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.dateText) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderStartDateTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderStartDateTooltip';
}


GH.tpl.charttooltip.renderUncertainty = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  var changeList51 = opt_data.tooltipData.changes;
  var changeListLen51 = changeList51.length;
  for (var changeIndex51 = 0; changeIndex51 < changeListLen51; changeIndex51++) {
    var changeData51 = changeList51[changeIndex51];
    output += '<strong>' + soy.$$escapeHtml(changeData51.key) + '</strong><br/>' + soy.$$escapeHtml(changeData51.event.detail) + '<br/>';
  }
  output += soy.$$filterNoAutoescape(AJS.format("{0}% Unestimated Issues",opt_data.tooltipData.unestimated)) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderUncertainty.soyTemplateName = 'GH.tpl.charttooltip.renderUncertainty';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartController.js' */
define("jira-agile/rapid/ui/chart/chart-controller",["require"],function(c){var b=c("underscore");var d=c("jira-agile/rapid/ui/chart/burndown-rate");var f=c("jira-agile/rapid/ui/chart/chart-colors");var a=GH.RapidViewConfig;var e={};e.loadRapidViewConfig=function(i,h){var g=function(j){if(!i.displayed){return}i.rapidViewConfig=j;h(j)};a.fetchConfiguration(i.rapidViewData.id).done(g)};e.getNonWorkingBlocks=function(){var h=d.getNonWorkingDays();var g=b.map(h,function(i){return{xaxis:{from:i.start,to:i.end},color:f.nonWorkingDays}});return g};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.js' */
define("jira-agile/rapid/ui/chart/chart-view",["require"],function(b){var c=b("jquery");var a={};a.getChartContentElem=function(d){if(!a.chartContentElem||d){a.chartContentElem=c("#ghx-chart-content")}return a.chartContentElem};a.getChartGroup=function(d){if(!a.chartGroup||d){a.chartGroup=c("#ghx-chart-group")}return a.chartGroup};a.getChartStatus=function(d){if(!a.chartStatus||d){a.chartStatus=c("#ghx-chart-status")}return a.chartStatus};a.getChartView=function(d){if(!a.chartView||d){a.chartView=c("#ghx-chart-view")}return a.chartView};a.getChartControls=function(d){if(!a.chartControls||d){a.chartControls=c("#ghx-chart-controls")}return a.chartControls};a.getChartAllControlsElem=function(d){if(!a.chartAllControlsElem||d){a.chartAllControlsElem=c("#ghx-chart-options")}return a.chartAllControlsElem};a.getChartTimeControlsElem=function(d){if(!a.chartTimeControlsElem||d){a.chartTimeControlsElem=c("#ghx-chart-options-time")}return a.chartTimeControlsElem};a.getChartSelector=function(d){if(!a.chartSelector||d){a.chartSelector=c("#ghx-chart-selector")}return a.chartSelector};a.getChartLegend=function(d){if(!a.chartLegend||d){a.chartLegend=c("#ghx-chart-legend")}return a.chartLegend};a.getChartLegendD3=function(d){if(!a.chartLegendD3||d){a.chartLegendD3=c(".ghx-chart-legend")}return a.chartLegendD3};a.getChartSnapshot=function(d){if(!a.chartSnapshot||d){a.chartSnapshot=c("#ghx-chart-snapshot")}return a.chartSnapshot};a.getReopenButton=function(d){if(!a.reopenButton||d){a.reopenButton=c("#ghx-chart-reopen-sprint")}return a.reopenButton};a.showChartGroup=function(){a.getChartGroup().show()};a.hideChartGroup=function(){a.getChartGroup().hide()};a.showChartStatus=function(){a.getChartStatus().show()};a.hideChartStatus=function(){a.getChartStatus().hide()};a.hideChartControls=function(){a.getChartControls().hide()};a.showChartControls=function(){a.getChartControls().show()};a.showSpinner=function(){var d=a.getChartGroup(true).spin("medium");if(d.find(".ghx-chart-blanket.js-blanket-spinner").length===0){c("<div></div>").addClass("ghx-chart-blanket js-blanket-spinner").appendTo(d)}};a.hideSpinner=function(){a.getChartGroup(true).spinStop().find(".ghx-chart-blanket.js-blanket-spinner").remove()};a.showBlankStateMessage=function(d){var e=a.getChartGroup(true);var f=e.find(".ghx-chart-blanket.ghx-blank-state").empty();if(f.length===0){f=c("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(e)}f.append(d)};a.hideBlankStateMessage=function(){a.getChartGroup(true).find(".ghx-chart-blanket.ghx-blank-state").remove()};a.showIE8SupportMessage=function(e){var d=a.getChartContentElem();var f=d.find(".ghx-chart-blanket.ghx-no-ie8").empty();if(f.length===0){f=c("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(d)}f.append(e)};a.hideIE8SupportMessage=function(){a.getChartContentElem(true).find(".ghx-chart-blanket.ghx-no-ie8").remove()};a.showToast=(function(){var i=1000;var f=500;var d=1000;var e=20;var g=null;function h(l){var j=c("#ghx-report-scrollarea");var k=j.offset().top-l.offset().top;return Math.max(k,0)+e}return function(k){var l=a.getChartGroup(true);var j=l.find(".ghx-chart-toast");if(j.length===0){j=c("<div></div>").addClass("ghx-chart-toast").appendTo(l)}j.stop().text(k).css({opacity:0,top:h(l),right:e}).animate({opacity:0.9},f);if(g!==null){clearTimeout(g)}g=setTimeout(function(){if(j.closest("html").length){j.fadeOut(d,function(){j.remove()})}},i)}}());a.showChartUpdatedToast=function(){a.showToast("Chart updated")};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.soy' */
// This file was automatically generated from ChartView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartview == 'undefined') { GH.tpl.chartview = {}; }


GH.tpl.chartview.renderChartControls = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-timeframe">' + GH.tpl.charttimeframes.renderChartTimeFrame(null) + '</div><div id="ghx-chart-filter">' + GH.tpl.chartfilters.renderChartFilter(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartControls.soyTemplateName = 'GH.tpl.chartview.renderChartControls';
}


GH.tpl.chartview.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartBody.soyTemplateName = 'GH.tpl.chartview.renderChartBody';
}


GH.tpl.chartview.renderDataExceeded = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning closeable"><p><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Maximum number of viewable issues exceeded for this chart.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderDataExceeded.soyTemplateName = 'GH.tpl.chartview.renderDataExceeded';
}


GH.tpl.chartview.renderCfdTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip"' + ((opt_data.changes.length > 8) ? 'class="ghx-alt"' : '') + '>';
  if (opt_data.changes.length > 8) {
    var changeList22 = opt_data.changes;
    var changeListLen22 = changeList22.length;
    for (var changeIndex22 = 0; changeIndex22 < changeListLen22; changeIndex22++) {
      var changeData22 = changeList22[changeIndex22];
      output += ((! (changeIndex22 == 0)) ? ', ' : '') + '<strong>' + soy.$$escapeHtml(changeData22.key) + '</strong>: ' + ((changeData22.columnFrom) ? soy.$$escapeHtml(changeData22.columnFrom) + ' >> ' : '') + ((changeData22.columnTo) ? soy.$$escapeHtml(changeData22.columnTo) : '');
    }
  } else {
    var changeList38 = opt_data.changes;
    var changeListLen38 = changeList38.length;
    for (var changeIndex38 = 0; changeIndex38 < changeListLen38; changeIndex38++) {
      var changeData38 = changeList38[changeIndex38];
      output += ((! (changeIndex38 == 0)) ? '<br/>' : '') + '<strong>' + soy.$$escapeHtml(changeData38.key) + '</strong><br/>' + ((changeData38.columnFrom) ? soy.$$escapeHtml(changeData38.columnFrom) + ' >> ' : '') + ((changeData38.columnTo) ? soy.$$escapeHtml(changeData38.columnTo) : '');
    }
  }
  output += '<br/>' + soy.$$escapeHtml(opt_data.time) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderCfdTooltip.soyTemplateName = 'GH.tpl.chartview.renderCfdTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.js' */
GH.ChartFilters={};GH.ChartFilters.rapidViewConfig={};GH.ChartFilters.columns=[];GH.ChartFilters.quickFilters=[];GH.ChartFilters.swimlanes=[];GH.ChartFilters.chartType=null;GH.ChartFilters.defaultColumns=[];GH.ChartFilters.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartFiltersInlineDialog")};GH.ChartFilters.update=function(f,d,b){GH.ChartFilters.chartType=f;GH.ChartFilters.rapidViewConfig=d;GH.ChartFilters.defaultColumns=b.defaultColumns;GH.ChartFilters.initializeColumns(f);GH.ChartFilters.initializeQuickFilters(f);GH.ChartFilters.initializeSwimlanes(f);var h=GH.ChartFilters.getDefaultColumnIds();var c=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.columns."+f,h);if(c.length<1){c=h}GH.ChartFilters.setActiveColumnIds(c);var i=GH.ChartFilters.getDefaultQuickFilterIds();var e=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.quickFilters",i);GH.ChartFilters.setActiveQuickFilterIds(e);var a=GH.ChartFilters.getDefaultSwimlaneIds();var g=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.swimlanes",a);if(g.length<1){g=a}GH.ChartFilters.setActiveSwimlaneIds(g);GH.ChartFilters.updateFilterInfo()};GH.ChartFilters.updateFilterInfo=function(){var d=GH.ChartFilters.isDefaultColumns()&&GH.ChartFilters.isDefaultQuickFilters()&&GH.ChartFilters.isDefaultSwimlanes();var c=AJS.$("#js-chart-filter");var a=AJS.$(c).find(".aui-icon");var b=AJS.$(a).text();if(d){c.addClass("ghx-icon-hide");a.removeAttr("title")}else{c.removeClass("ghx-icon-hide");a.attr("title",b)}};GH.ChartFilters.addRequestParams=function(c){var d=[];_.each(GH.ChartFilters.swimlanes,function(f,e){if(f.active){d.push(f.id)}});if(d.length>0){c.swimlaneId=d}var b=[];_.each(GH.ChartFilters.quickFilters,function(f,e){if(f.active){b.push(f.id)}});if(b.length>0){c.quickFilterId=b}var a=[];_.each(GH.ChartFilters.columns,function(e){if(e.active){a.push(e.id)}});if(a.length>0){c.columnId=a}};GH.ChartFilters.initializeColumns=function(d){var e=GH.ChartFilters.rapidViewConfig.columns;var b=[];for(var a=0;a<e.length;a++){var f=e[a];b.push({id:f.id,name:f.name,active:false})}GH.ChartFilters.columns=b};GH.ChartFilters.getColumns=function(){return GH.ChartFilters.columns};GH.ChartFilters.isDefaultColumns=function(){var b=GH.ChartFilters.getDefaultColumns();for(var a=0;a<GH.ChartFilters.columns.length;a++){if(GH.ChartFilters.columns[a].active!=b[a]){return false}}return true};GH.ChartFilters.getDefaultColumnIds=function(){var a=GH.ChartFilters.getDefaultColumns();var c=[];for(var b=0;b<GH.ChartFilters.columns.length;b++){if(a[b]){c.push(GH.ChartFilters.columns[b].id)}}return c};GH.ChartFilters.getActiveColumns=function(){return _.filter(GH.ChartFilters.columns,function(a){return a.active})};GH.ChartFilters.getActiveColumnIds=function(){var a=[];for(var b=0;b<GH.ChartFilters.columns.length;b++){if(GH.ChartFilters.columns[b].active){a.push(GH.ChartFilters.columns[b].id)}}return a};GH.ChartFilters.setActiveColumnIds=function(a){_.each(GH.ChartFilters.columns,function(b){b.active=false;_.each(a,function(c){if(c==b.id){b.active=true}})});GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.columns."+GH.ChartFilters.chartType,a)};GH.ChartFilters.getDefaultColumns=function(){return GH.ChartFilters.defaultColumns};GH.ChartFilters.isColumnActive=function(b){var a=GH.ChartFilters.getColumn(b);if(a){return a.active}return false};GH.ChartFilters.getColumn=function(d){for(var a=0;a<GH.ChartFilters.columns.length;a++){var b=GH.ChartFilters.columns[a];if(b.id==d){return b}}return false};GH.ChartFilters.initializeQuickFilters=function(d){var b=GH.ChartFilters.rapidViewConfig.quickFilters;var a=[];for(var c=0;c<b.length;c++){var e=b[c];a.push({id:e.id,name:e.name,active:false})}GH.ChartFilters.quickFilters=a};GH.ChartFilters.isDefaultQuickFilters=function(){return GH.ChartFilters.getActiveQuickFilterIds().length===0};GH.ChartFilters.getDefaultQuickFilterIds=function(){return[]};GH.ChartFilters.getActiveQuickFilterIds=function(){var a=[];_.each(GH.ChartFilters.quickFilters,function(b){if(b.active){a.push(b.id)}});return a};GH.ChartFilters.setActiveQuickFilterIds=function(a){_.each(GH.ChartFilters.quickFilters,function(b){b.active=false;_.each(a,function(c){if(c==b.id){b.active=true}})});GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.quickFilters",a)};GH.ChartFilters.getQuickFilters=function(){return GH.ChartFilters.quickFilters};GH.ChartFilters.isQuickFilterActive=function(b){var a=GH.ChartFilters.getQuickFilter(b);if(a){return a.active}return false};GH.ChartFilters.getQuickFilter=function(c){for(var a=0;a<GH.ChartFilters.quickFilters.length;a++){var b=GH.ChartFilters.quickFilters[a];if(b.id==c){return b}}return false};GH.ChartFilters.initializeSwimlanes=function(d){var a=GH.ChartFilters.rapidViewConfig.swimlanes;var b=[];for(var c=0;c<a.length;c++){var e=a[c];b.push({id:e.id,name:e.name,active:false})}GH.ChartFilters.swimlanes=b};GH.ChartFilters.isDefaultSwimlanes=function(){return GH.ChartFilters.getDefaultSwimlaneIds().length==GH.ChartFilters.getActiveSwimlaneIds().length};GH.ChartFilters.getDefaultSwimlaneIds=function(){var a=[];_.each(GH.ChartFilters.swimlanes,function(b){a.push(b.id)});return a};GH.ChartFilters.getActiveSwimlaneIds=function(){var a=[];_.each(GH.ChartFilters.swimlanes,function(b){if(b.active){a.push(b.id)}});return a};GH.ChartFilters.setActiveSwimlaneIds=function(b){var a=_.filter(b,function(c){return _.find(GH.ChartFilters.swimlanes,function(d){return(c==d.id)})});if(a.length===0){a=_.pluck(GH.ChartFilters.swimlanes,"id")}_.each(GH.ChartFilters.swimlanes,function(c){c.active=false;_.each(a,function(d){if(d==c.id){c.active=true}})});GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.swimlanes",a)};GH.ChartFilters.getSwimlanes=function(){return GH.ChartFilters.swimlanes};GH.ChartFilters.isSwimlaneActive=function(b){var a=GH.ChartFilters.getSwimlane(b);if(a){return a.active}return false};GH.ChartFilters.getSwimlane=function(c){for(var a=0;a<GH.ChartFilters.swimlanes.length;a++){var b=GH.ChartFilters.swimlanes[a];if(b.id==c){return b}}return false};GH.ChartFilters.initializeDialog=function(){AJS.$("#inline-dialog-chartFiltersInlineDialog").remove();if(AJS.InlineDialog.current){AJS.InlineDialog.current.hide()}var a={width:500,cacheContent:false,hideDelay:60000};AJS.InlineDialog("#js-chart-filter","chartFiltersInlineDialog",GH.ChartFilters.renderChartFiltersDialog,a)};GH.ChartFilters.renderChartFiltersDialog=function(e,c,f){var d=GH.ChartFilters.getColumns();var b=GH.ChartFilters.getSwimlanes();var a=GH.ChartFilters.getQuickFilters();e.html(GH.tpl.chartfilters.renderChartFilters({columns:d,swimlanes:b,quickFilters:a}));e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");e.find(".js-toggle").click(function(j){j.preventDefault();var g=AJS.$(this);var h=g.hasClass("active");var i=!h;if(i){g.addClass("active")}else{g.removeClass("active")}GH.ChartFilters.checkFilterValidity(e)});e.find(".js-save-button").click(function(g){g.preventDefault();GH.ChartFilters.handleDialogSave(e)});e.find(".js-cancel-button").click(function(g){AJS.InlineDialog.current.hide()});f()};GH.ChartFilters.checkFilterValidity=function(b){b.find(".ghx-error").remove();var a=true;if(b.find(".js-column-options .js-toggle.active").length<1){a=false;b.find(".js-column-options").after('<div class="ghx-error">'+"At least one column must be selected"+"</div>")}if(b.find(".js-swimlane-options .js-toggle.active").length<1){a=false;b.find(".js-swimlane-options").after('<div class="ghx-error">'+"At least one swimlane must be selected"+"</div>")}return a};GH.ChartFilters.handleDialogSave=function handleDialogSave(f){if(!GH.ChartFilters.checkFilterValidity(f)){return}var a=[];f.find(".js-column-options .js-toggle").each(function(h,k){var i=AJS.$(k);var l=i.attr("data-column-id");var j=i.hasClass("active");if(j){a.push(parseInt(l,10))}});var g=[];f.find(".js-swimlane-options .js-toggle").each(function(h,k){var i=AJS.$(k);var l=i.attr("data-swimlane-id");var j=i.hasClass("active");if(j){g.push(parseInt(l,10))}});var e=[];f.find(".js-quickfilter-options .js-toggle").each(function(h,k){var i=AJS.$(k);var l=i.attr("data-quickfilter-id");var j=i.hasClass("active");if(j){e.push(parseInt(l,10))}});var b=!_.isEqual(g,GH.ChartFilters.getActiveSwimlaneIds());var d=!_.isEqual(e,GH.ChartFilters.getActiveQuickFilterIds());var c=!_.isEqual(a,GH.ChartFilters.getActiveColumnIds());GH.ChartFilters.setActiveColumnIds(a);GH.ChartFilters.setActiveSwimlaneIds(g);GH.ChartFilters.setActiveQuickFilterIds(e);GH.RapidBoard.State.pushState();AJS.$(GH).trigger("chartFiltersChanged",{swimlanesChanged:b,quickFiltersChanged:d,columnsChanged:c});GH.ChartFilters.updateFilterInfo();AJS.InlineDialog.current.hide()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.soy' */
// This file was automatically generated from ChartFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartfilters == 'undefined') { GH.tpl.chartfilters = {}; }


GH.tpl.chartfilters.renderChartFilter = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = ' ' + soy.$$escapeHtml("Chart is using non-default settings");
  var buttonText__soy6 = ' ' + soy.$$escapeHtml("Refine report");
  output += aui.buttons.button({id: ['js-chart-filter'], extraClasses: ['aui-button-icon', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: buttonText__soy6, iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-info', iconText: tooltip__soy3, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilter.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilter';
}


GH.tpl.chartfilters.renderChartFilters = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml("Report Filters") + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml("Columns") + '</h3><div class="ghx-group aui-buttons js-column-options">';
  var columnList22 = opt_data.columns;
  var columnListLen22 = columnList22.length;
  for (var columnIndex22 = 0; columnIndex22 < columnListLen22; columnIndex22++) {
    var columnData22 = columnList22[columnIndex22];
    if (columnData22.active) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy27 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy36 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml("Swimlanes") + '</h3><div class="ghx-group aui-buttons js-swimlane-options">';
  var swimlaneList46 = opt_data.swimlanes;
  var swimlaneListLen46 = swimlaneList46.length;
  for (var swimlaneIndex46 = 0; swimlaneIndex46 < swimlaneListLen46; swimlaneIndex46++) {
    var swimlaneData46 = swimlaneList46[swimlaneIndex46];
    if (swimlaneData46.active) {
      var buttonText__soy49 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy51 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy51], text: buttonText__soy49});
    } else {
      var buttonText__soy58 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy60 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy60], text: buttonText__soy58});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml("Quick Filters") + '</h3><div class="ghx-group aui-buttons js-quickfilter-options">';
  var quickFilterList70 = opt_data.quickFilters;
  var quickFilterListLen70 = quickFilterList70.length;
  for (var quickFilterIndex70 = 0; quickFilterIndex70 < quickFilterListLen70; quickFilterIndex70++) {
    var quickFilterData70 = quickFilterList70[quickFilterIndex70];
    if (quickFilterData70.active) {
      var buttonText__soy73 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy75 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy75], text: buttonText__soy73});
    } else {
      var buttonText__soy82 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy84 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy84], text: buttonText__soy82});
    }
  }
  output += '</div></fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml("Apply") + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml("Cancel") + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilters.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.js' */
GH.ChartTimeFrames={};GH.ChartTimeFrames.day=1000*60*60*24;GH.ChartTimeFrames.dateFormat="%d.%m.%Y";GH.ChartTimeFrames.timeFormat="%d/%m/%Y %H:%M";GH.ChartTimeFrames.momentDateFormat="LL";GH.ChartTimeFrames.momentTimeFormat="LLL";GH.ChartTimeFrames.from=null;GH.ChartTimeFrames.to=null;GH.ChartTimeFrames.days=7;GH.ChartTimeFrames.now=new Date().getTime();GH.ChartTimeFrames.isRelative=true;GH.ChartTimeFrames.minXValue=null;GH.ChartTimeFrames.chartId=null;GH.ChartTimeFrames.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartTimeFramesInlineDialog")};GH.ChartTimeFrames.isValidDate=function(a){var b=function(c){return c.getHours()===0&&c.getMinutes()===0&&c.getSeconds()===0&&c.getMilliseconds()===0};return b(Date.parseDate(a,GH.ChartTimeFrames.dateFormat))&&b(Date.parseDate(a,GH.ChartTimeFrames.dateFormat))};GH.ChartTimeFrames.getDateAsText=function(a){return new Date(a).print(GH.ChartTimeFrames.dateFormat)};GH.ChartTimeFrames.roundMillisToNextDay=function(a){var c=GH.ChartTimeFrames.roundMillisToBeginOfDay(a);var b;if(c<a){b=c+GH.ChartTimeFrames.day}else{b=c}return b};GH.ChartTimeFrames.roundMillisToBeginOfDay=function(a){var b=Math.floor(a/GH.ChartTimeFrames.day);return b*GH.ChartTimeFrames.day};GH.ChartTimeFrames.millisToDays=function(a){if(a){return a/GH.ChartTimeFrames.day}else{return a}};GH.ChartTimeFrames.daysToMillis=function(a){if(a){return a*GH.ChartTimeFrames.day}else{return a}};GH.ChartTimeFrames.timeFrames=[{relative:true,days:7,name:"Past Week"},{relative:true,days:14,name:"Past 2 Weeks"},{relative:true,days:30,name:"Past Month"},{relative:true,days:90,name:"Past 3 Months"},{relative:true,days:180,name:"Past 6 Months"},{relative:true,days:0,name:"All Time"},{relative:false,days:-1,name:"Custom"}];GH.ChartTimeFrames.getSelectedTimeFrame=function(){for(var a=0;a<GH.ChartTimeFrames.timeFrames.length;a++){if(!GH.ChartTimeFrames.isRelative&&!GH.ChartTimeFrames.timeFrames[a].relative){return GH.ChartTimeFrames.timeFrames[a]}else{if(GH.ChartTimeFrames.timeFrames[a].days==GH.ChartTimeFrames.days){return GH.ChartTimeFrames.timeFrames[a]}}}return false};GH.ChartTimeFrames.getChartStartDate=function(){var b=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){if(GH.ChartTimeFrames.days==0){var c=GH.ChartTimeFrames.minXValue;var a=GH.ChartTimeFrames.now-1*b;if(!c||c>a){c=a}return c}else{return GH.ChartTimeFrames.now-GH.ChartTimeFrames.days*b}}else{return GH.ChartTimeFrames.from}};GH.ChartTimeFrames.getChartEndDate=function(){var a=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){return GH.ChartTimeFrames.now}else{return GH.ChartTimeFrames.to}};GH.ChartTimeFrames.update=function(){var c=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7);var b=new Date().getTime();b=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from",b);var a=new Date().getTime()-7*GH.ChartTimeFrames.day;a=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to",a);GH.ChartTimeFrames.setNewChartLimits(c,b,a,true)};GH.ChartTimeFrames.setBoundaries=function(a,b){GH.ChartTimeFrames.now=b;GH.ChartTimeFrames.minXValue=a||b-7*GH.ChartTimeFrames.day;GH.ChartTimeFrames.updateDatesInfo()};GH.ChartTimeFrames.updateDialogFromAndToDates=function(e){var d=e.find(".js-timeframe-button.active");var c=d.attr("data-timeframe-id");if(c==-1){return}var g=GH.ChartTimeFrames.now;var f;if(c>0){f=g-c*GH.ChartTimeFrames.day}else{f=GH.ChartTimeFrames.minXValue}var a=new Date(f).print(GH.ChartTimeFrames.dateFormat);var b=new Date(g).print(GH.ChartTimeFrames.dateFormat);e.find("#ghx-field-from").val(a);e.find("#ghx-field-to").val(b)};GH.ChartTimeFrames.updateDatesInfo=function(){var c=GH.ChartTimeFrames.getSelectedTimeFrame();if(c.relative){GH.ChartTimeFrames.to=GH.ChartTimeFrames.now;if(c.days>0){GH.ChartTimeFrames.from=GH.ChartTimeFrames.to-c.days*GH.ChartTimeFrames.day}else{GH.ChartTimeFrames.from=GH.ChartTimeFrames.minXValue}}var a=new Date(GH.ChartTimeFrames.from).print(GH.ChartTimeFrames.dateFormat);var b=new Date(GH.ChartTimeFrames.to).print(GH.ChartTimeFrames.dateFormat);var d=AJS.format("{0} to {1} ({2})",a,b,c.name);AJS.$(".js-timeframe-info").text(d)};GH.ChartTimeFrames.setNewChartLimits=function(b,d,c,a){if(b<0){GH.ChartTimeFrames.from=d;GH.ChartTimeFrames.to=c;GH.ChartTimeFrames.isRelative=false;GH.ChartTimeFrames.days=-1}else{GH.ChartTimeFrames.isRelative=true;GH.ChartTimeFrames.days=b}GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",GH.ChartTimeFrames.days);GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",d);GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",c);GH.ChartTimeFrames.updateDatesInfo();if(!a){AJS.$(GH).trigger("chartTimeFramesChanged")}};GH.ChartTimeFrames.initializeDialog=function(b){AJS.$("#inline-dialog-chartTimeFramesInlineDialog").remove();GH.ChartTimeFrames.chartId=b;var a={width:710,cacheContent:false,hideDelay:60000};AJS.InlineDialog("#js-chart-timeframe","chartTimeFramesInlineDialog",GH.ChartTimeFrames.renderChartTimeFramesDialog,a)};GH.ChartTimeFrames.renderChartTimeFramesDialog=function(e,c,g){var a=GH.ChartTimeFrames.from?new Date(GH.ChartTimeFrames.from).print(GH.ChartTimeFrames.dateFormat):"";var b=GH.ChartTimeFrames.to?new Date(GH.ChartTimeFrames.to).print(GH.ChartTimeFrames.dateFormat):"";var d=false;if(GH.ChartTimeFrames.chartId==GH.CFDController.id){d="Alternatively, click and drag cursor across chart to select date range (double-click overview to reset)."}else{if(GH.ChartTimeFrames.chartId==GH.Reports.ControlChartController.id){d="Alternatively, click and drag cursor across chart to select date range (double-click to reset)."}}e.html(GH.tpl.charttimeframes.renderChartTimeFrames({timeFrames:GH.ChartTimeFrames.timeFrames,relative:GH.ChartTimeFrames.isRelative,days:GH.ChartTimeFrames.days,from:a,to:b,desc:d}));e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");GH.ChartTimeFrames.updateDialogFromAndToDates(e);var f=function(h){if(h.hasClass("disabled")){return}e.find(".js-timeframe-button").removeClass("active");h.addClass("active");GH.ChartTimeFrames.updateDialogFromAndToDates(e)};e.find(".js-timeframe-button").click(function(h){h.preventDefault();f(AJS.$(this))});Calendar.setup({firstDay:0,inputField:"ghx-field-from",button:"ghx-field-from-button",align:"Tl",singleClick:true,cache:false,positionStyle:"fixed",ifFormat:GH.ChartTimeFrames.dateFormat,showsTime:false,onUpdate:function(){f(e.find('.js-timeframe-button[data-timeframe-id="-1"]'))}});Calendar.setup({firstDay:0,inputField:"ghx-field-to",button:"ghx-field-to-button",align:"Tl",singleClick:true,cache:false,positionStyle:"fixed",ifFormat:GH.ChartTimeFrames.dateFormat,showsTime:false,onUpdate:function(){f(e.find('.js-timeframe-button[data-timeframe-id="-1"]'))}});e.find(".js-save-button").click(function(h){h.preventDefault();GH.ChartTimeFrames.handleDialogSave(e)});e.find(".js-cancel-button").click(function(h){AJS.InlineDialog.current.hide()});g()};GH.ChartTimeFrames.handleDialogSave=function handleDialogSave(e){var d=e.find(".js-timeframe-button.active");var b=parseInt(d.attr("data-timeframe-id"),10);var g=null,f=null;e.find(".ghx-error").remove();if(b<0){var c=e.find("#ghx-field-from").val();if(!c||!GH.ChartTimeFrames.isValidDate(c)){e.find("#ghx-field-from").closest(".field-group").append('<div class="ghx-error">'+"From-date required"+"</div>");return}c=Date.parseDate(c,GH.ChartTimeFrames.dateFormat);var a=e.find("#ghx-field-to").val();if(!a||!GH.ChartTimeFrames.isValidDate(a)){e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"To-date required"+"</div>");return}a=Date.parseDate(a,GH.ChartTimeFrames.dateFormat);if(c.getTime()>a.getTime()){e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"From-date must be before to-date"+"</div>");return}g=c.getTime();f=a.getTime()}GH.ChartTimeFrames.setNewChartLimits(b,g,f);GH.RapidBoard.State.pushState();if(AJS.InlineDialog.current){AJS.InlineDialog.current.hide()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.soy' */
// This file was automatically generated from ChartTimeFrames.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttimeframes.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttimeframes == 'undefined') { GH.tpl.charttimeframes = {}; }


GH.tpl.charttimeframes.renderChartTimeFrame = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: ['js-chart-timeframe'], extraClasses: ['aui-button-subtle', 'ghx-dropdown-trigger', 'js-timeframe-info', 'ghx-pull-left'], text: ''});
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrame.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrame';
}


GH.tpl.charttimeframes.renderChartTimeFrames = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml("Report Timeframe") + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml("Timeframe") + '</h3><div class="ghx-group aui-buttons js-timeframe-options">';
  var timeFrameList13 = opt_data.timeFrames;
  var timeFrameListLen13 = timeFrameList13.length;
  for (var timeFrameIndex13 = 0; timeFrameIndex13 < timeFrameListLen13; timeFrameIndex13++) {
    var timeFrameData13 = timeFrameList13[timeFrameIndex13];
    if (timeFrameData13.days == opt_data.days) {
      var buttonText__soy16 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy18 = 'js-timeframe-button active';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy18], text: buttonText__soy16});
    } else if (timeFrameData13.disabled) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy27 = 'js-timeframe-button disabled';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy36 = 'js-timeframe-button';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><div class="field-group"><label for="ghx-field-from">' + soy.$$escapeHtml("From") + '</label><input class="text medium-field" type="text" id="ghx-field-from" value="' + soy.$$escapeHtml(opt_data.from) + '"><span id="ghx-field-from-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div><div class="field-group"><label for="ghx-field-to">' + soy.$$escapeHtml("To") + '</label><input class="text medium-field" type="text" id="ghx-field-to" value="' + soy.$$escapeHtml(opt_data.to) + '"><span id="ghx-field-to-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div>' + ((opt_data.desc) ? '<div class="field-group"><div class="description">' + soy.$$escapeHtml(opt_data.desc) + '</div></div>' : '') + '</fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml("Apply") + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml("Cancel") + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrames.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrames';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDController.js' */
define("jira-agile/rapid/ui/chart/cfd-controller",["require"],function(g){var k=g("jquery");var c=g("jira-agile/rapid/analytics-tracker");var n=g("jira-agile/rapid/ui/chart/cfd-data");var q=g("jira-agile/rapid/ui/chart/cfd-view");var o=g("jira-agile/rapid/ui/chart/chart-controller");var p=g("jira-agile/rapid/ui/chart/chart-view");var d=GH.Ajax;var f=GH.ChartFilters;var j=GH.ChartTimeFrames;var a=GH.ChartUtils;var i=GH.log;var e=GH.Logger;var m=GH.RapidBoard.State;var l=GH.tpl;var b={};b.id="cumulativeFlowDiagram";b.displayed=false;b.rapidViewData={};b.rapidViewConfig={};b.analytics=new c("gh.report.cumulativeFlowDiagram");b.setRapidView=function(r){b.rapidViewData=r||{}};b.isApplicable=function(r){return true};b.getNormalizedFromInternal=function(){return a.getTimeFrameReportUrlParams(b.id)};b.toUrl=function(r){return a.timeFrameReportParamsToUrl(r)};b.updateInternalFromNormalized=function(r){a.updateFromNormalizedStateDateTimeParams(r)};b.getNormalizedFromUrl=function(r){return a.getNormalizedFromUrlForTimeFrameReport(r)};b.show=function(){i("CFDController.show",e.Contexts.ui);b.displayed=true;if(!b.rapidViewData){return}k(GH).unbind("."+b.id).bind("chartTimeFramesChanged."+b.id,b.handleChartTimeFramesChangedEvent).bind("chartFiltersChanged."+b.id,b.handleChartFiltersChangedEvent);q.show();b.renderChartView();var r="show."+(b.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");b.analytics.trigger(r)};b.hide=function(){i("CFDController.hide",e.Contexts.ui);b.displayed=false;q.hide();k("#ghx-chart-controls").hide();k(GH).unbind("."+b.id)};b.renderChartView=function(){b.initializeControls();p.getChartContentElem(true).html(l.chartview.renderChartBody());p.showSpinner();o.loadRapidViewConfig(b,b.loadChartData)};b.initializeControls=function(){p.hideChartControls();p.getChartControls(true).html(l.chartview.renderChartControls());f.initializeDialog();j.initializeDialog(b.id)};b.loadChartData=function(){b.updateTools();p.showChartControls();var r={rapidViewId:m.getRapidViewId()};f.addRequestParams(r);d.get({url:"/rapid/charts/cumulativeflowdiagram.json",data:r},"rapidChartData").done(b.processChartData).always(p.hideSpinner)};b.updateTools=function h(){j.update();var s=b.rapidViewConfig;var r=b.buildChartFilterConfig(s);f.update(b.id,s,r);m.pushState()};b.buildChartFilterConfig=function(t){var s={};s.defaultColumns=[];for(var r=0;r<t.columns.length;r++){s.defaultColumns.push(true)}return s};b.processChartData=function(r){if(!b.displayed){return}n.setRawData(r);j.setBoundaries(r.firstChangeTime,r.now);q.renderChart(r)};b.handleChartFiltersChangedEvent=function(r,s){if(!b.displayed){return}i("CFDController.handleChartFiltersChangedEvent",e.Contexts.event);b.loadChartData()};b.handleChartTimeFramesChangedEvent=function(r){if(!b.displayed){return}i("CFDController.handleChartTimeFramesChangedEvent",e.Contexts.event);var s=n.getRawData();q.renderChart(s)};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDData.js' */
define("jira-agile/rapid/ui/chart/cfd-data",["require"],function(c){var e=c("jquery");var b=c("underscore");var a=AJS.escapeHtml;var d={};d.raw={};d.getRawData=function(){return d.raw};d.setRawData=function(f){d.raw=f};d.computeSeries=function(g,f){var k=[];var m=g.columnChanges;var j=g.columns;b.each(j,function(i){i.issueCount=0;i.data=[]});b.each(m,function(o,i){i=parseInt(i,10);b.each(o,function(p){b.each(j,function(r,q){if(p.columnFrom==q){r.issueCount--}if(p.columnTo==q){r.issueCount++}r.data.push([i,r.issueCount])})})});for(var h=j.length-1;h>=0;h--){var l=j[h];var n=l.data;if(n.length>0&&n[n.length-1][0]<f){n.push([f,n[n.length-1][1]])}k.push({data:n,label:a(String(l.name)),columnIndex:h})}return k};d.getChangeDetails=function(h){var g=d.raw;var f=[];b.each(g.columnChanges[h],function(i){i=e.extend(true,{},i);if(i.columnFrom!=undefined){i.columnFrom=g.columns[i.columnFrom].name}if(i.columnTo!=undefined){i.columnTo=g.columns[i.columnTo].name}f.push(i)});return f};d.isRealDatapoint=function(i,g){var h=d.raw;var f=h.columnChanges[i];return b.any(f,function(j){return g==j.columnTo})};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDView.js' */
define("jira-agile/rapid/ui/chart/cfd-view",["require"],function(d){var g=d("jquery");var l=d("underscore");var a;var j;var h=d("jira-agile/rapid/ui/chart/chart");var m=d("jira-agile/rapid/ui/chart/chart-view");var k=d("jira-agile/rapid/global-events");k.on("pre-initialization",function(){a=d("jira-agile/rapid/ui/chart/cfd-controller");j=d("jira-agile/rapid/ui/chart/cfd-data")});var c=GH.ChartFilters;var f=GH.ChartTimeFrames;var e=GH.FlotChartUtils;var b=GH.Logger;var i=GH.tpl;var n={};n.COLUMN_COLORS=["#FF800D","#23819C","#9669FE","#59955C","#B9264F","#B05F3C","#2966B8","#9A03FE","#FF2626","#FF5353","#C8B400","#79FC4E","#8C8CFF","#C48484","#4FBDDD","#FFBE28","#99C7FF","#AE70ED","#FFA8A8","#DAAF85"];n.context={};n.previousPlotHoverPoint=null;n.init=function(){};n.show=function(){g(GH).unbind(h.EVENT_RESIZE_REDRAW+"."+a.id);g(GH).bind(h.EVENT_RESIZE_REDRAW+"."+a.id,function(o,p){if(p.id!==a.id){return}b.log("Updating CFD after window resize event",b.Contexts.ui);n.resetRealPoints();n._reverseLegendTable()})};n.hide=function(){g(GH).unbind(h.EVENT_RESIZE_REDRAW+"."+a.id);h.destroy(a.id+"Overview");h.destroy(a.id)};n.renderChart=function(r){h.destroy(a.id+"Overview");h.destroy(a.id);var p=f.getChartStartDate();var t=f.getChartEndDate();var s=j.computeSeries(r,r.now);var o=n.getColors(c.getColumns(),c.getActiveColumns());var A={colors:o,xaxis:{mode:"time",min:p,max:t},yaxis:{tickDecimals:0,minTickSize:1,min:0,tickLength:"full"},series:{stack:true,lines:{show:true,fill:1,lineWidth:1}},grid:{hoverable:true,clickable:true,autoHighlight:false},mouseEnterExitEvents:true,selection:{mode:"x"},legend:{container:null,backgroundOpacity:0.5,position:"nw"}};var u={colors:o,xaxis:{mode:"time"},yaxis:{show:false},series:{stack:true,lines:{show:true,fill:1,lineWidth:1}},selection:{mode:"x"},legend:{show:false}};m.hideChartStatus();m.showChartGroup();e.setAndAlignAxisLabels("Time","Number of Issues");var w=m.getChartView(true);var q=g("#ghx-chart-overview-group");var x=g("#ghx-chart-overview");var y=g(q).find("h4");var v=g(q).find(".ghx-description");g(y).text("Overview");g(v).text("Click and drag cursor across chart or chart overview to select date range (double-click overview to reset).");y.show();v.show();w.show();q.show();var z=n.context={chartContainer:w,series:s,options:A,realPoints:[],showPoints:false};w.unbind("plothover plotselected");w.bind("plotselected",n.handleSelection);w.bind("plothover",n.handlePlotHover);z.mainChart=h.draw(a.id,w,s,A);w.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter",n.handleMouseEnter).bind("flotMouseLeave",n.handleMouseLeave);z.mainChart.hooks.drawSeries.push(n.gatherPoints);z.mainChart.hooks.draw.push(n.deferredRenderPoints);n._reverseLegendTable();x.unbind("plotselected dblclick");x.bind("plotselected",n.handleSelection);x.bind("dblclick",n.resetSelection);z.overviewChart=h.draw(a.id+"Overview",x,s,u);z.overviewChart.setSelection({xaxis:{from:p,to:t}},true)};n.getColors=function(o,q){var p=[];l.each(o,function(s,r){var t=l.any(q,function(u){return u.id==s.id});if(t){p.push(n.COLUMN_COLORS.slice(r))}});return p.reverse()};n._reverseLegendTable=function(){var o=m.getChartView().find(".legend").find("tbody");o.children().each(function(){o.prepend(g(this))})};n.updateTimeFrameSelection=function(){var q=f.getChartStartDate();var r=f.getChartEndDate();var o=n.context;o.options.xaxis.min=q;o.options.xaxis.max=r;var p=f.getSelectedTimeFrame();if(p.days!=0){o.overviewChart.setSelection({xaxis:{from:q,to:r}},true)}o.mainChart=h.draw(a.id,o.chartContainer,o.series,o.options);n._reverseLegendTable()};n.handleSelection=function(p,o){var r=o.xaxis.from;var q=o.xaxis.to;f.setNewChartLimits(-1,r,q)};n.resetSelection=function(o){var p=n.context.overviewChart.getXAxes()[0];f.setNewChartLimits(-1,p.min,p.max)};n.handlePlotHover=function(p,q,o){if(o){if(o.dataIndex!=n.previousPlotHoverPoint&&n.isRealPoint(o)){g("#ghx-tooltip").remove();n.previousPlotHoverPoint=o.dataIndex;n.renderTooltip(o.datapoint[0],o.pageX,o.pageY)}}else{g("#ghx-tooltip").remove();n.previousPlotHoverPoint=null}};n.isRealPoint=function(r){var s=r.series.xaxis;var q=r.series.yaxis;var p=s.p2c(r.datapoint[0]);var o=q.p2c(r.datapoint[1]);return l.any(n.context.realPoints,function(t){var v=s.p2c(t.time);var u=q.p2c(t.issueCount);return Math.abs(p-v)<1&&Math.abs(o-u)<1})};n.handleMouseEnter=function(p){var o=n.context;if(!o.showPoints){o.showPoints=true;o.realPoints=[];o.mainChart.draw()}};n.handleMouseLeave=function(p){var o=n.context;if(o.showPoints){o.showPoints=false;o.mainChart.draw()}};n.renderTooltip=function(q,v,t){var o=new Date(q);var r=new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds());var u=j.getChangeDetails(q);var w=g(i.chartview.renderCfdTooltip({changes:u,time:r.print(f.timeFormat)})).css({position:"absolute",display:"none",top:t+5});w.appendTo("body");var s=w.width();var p=g("#ghx-chart-view canvas.base");if(v+s>p.offset().left+p.width()){w.css({left:v-(30+s)})}else{w.css({left:v+15})}w.fadeIn(200)};n.resetRealPoints=function(p,o){n.context.realPoints=[]};n.gatherPoints=function(s,B,r){if(!a.displayed||!n.context.showPoints){return}var t=r.datapoints;var A=t.points;var o=t.pointsize;var z=r.xaxis;var w=r.yaxis;for(var q=0;q<A.length;q+=o){var p=A[q];var C=A[q+1];if(!j.isRealDatapoint(p,r.columnIndex)){continue}if(p==null||p<z.min||p>z.max||C<w.min||C>w.max){continue}var v=z.p2c(p);var u=w.p2c(C);n.context.realPoints.push({x:v,y:u,time:p,issueCount:C})}};n.deferredRenderPoints=function(p,o){if(!a.displayed||!n.context.showPoints){return}o.save();o.translate(p.getPlotOffset().left,p.getPlotOffset().top);o.strokeStyle="rgb(100, 100, 100)";o.fillStyle="rgba(255, 255, 255, 0.5)";l.each(n.context.realPoints,function(q){e.drawPoint(o,q)});o.restore()};g(n.init);return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-controller",["require"],function(e){var k=e("jquery");var o=e("underscore");var b=e("jira-agile/rapid/analytics-tracker");var i=e("jira-agile/rapid/ui/chart/burndown-chart-view");var p=e("jira-agile/rapid/ui/chart/burndown-report-chart-controller");var l=e("jira-agile/rapid/ui/chart/chart");var j=e("jira-agile/rapid/ui/component/chart-picker");var n=e("jira-agile/rapid/ui/chart/chart-view");var f=e("jira-agile/rapid/ui/component/estimate-picker");var a=GH.Ajax;var h=GH.log;var c=GH.Logger;var m=GH.RapidBoard.State;var d=GH.RapidBoard.UrlState;var g={};g.id="burndownChart";g.displayed=false;g.rapidViewId=undefined;g.analytics=new b("gh.report.burndownChart");g.setRapidView=function(q){g.rapidViewId=q.id;p.setRapidView(q.id)};g.getNormalizedFromInternal=function(){return{sprint:g.getSprintIdForUrl()||null,estimate:g.getEstimateIdForUrl()||null}};g.getSprintIdForUrl=function(){var r=g.sprintPicker.getSelectedItem();if(r){return r.id}var q=g.sprintPicker.getStoredSelectedItemId();return(q!==-1)?q:null};g.getEstimateIdForUrl=function(){var q=g.estimatePicker.getStoredSelectedItemId();return(q!==-1)?q:null};g.toUrl=function(r){var q={};if(r.sprint!==null){q.sprint=r.sprint}if(r.estimate!==null){q.estimate=r.estimate}return q};g.updateInternalFromNormalized=function(q){g.setSelectedSprintFromUrlState(q.sprint);g.setSelectedEstimateFromUrlState(q.estimate)};g.setSelectedSprintFromUrlState=function(q){if(q){g.sprintPicker.storeSelectedItemId(q)}};g.setSelectedEstimateFromUrlState=function(q){if(q){g.estimatePicker.storeSelectedItemId(q)}};g.getNormalizedFromUrl=function(q){return{sprint:d.normalizeNumberParam(q.sprint,null),estimate:d.normalizeStringParam(q.estimate,null)}};g.isApplicable=function(q){return q.sprintSupportEnabled};g.init=function(){g.sprintPicker=new j("burndown.selectedSprintId");g.estimatePicker=new f("burndown.selectedEstimate",true)};g.show=function(){h("BurndownChartController.show",c.Contexts.ui);g.displayed=true;p.show();if(!g.rapidViewId){return}var q="."+g.id;k(GH).unbind(q);k(GH).bind(l.EVENT_RESIZE_REDRAW+q,g.handleResizeEvent);g.loadChart();g.analytics.trigger("show")};g.hide=function(){h("BurndownChartController.hide",c.Contexts.ui);p.hide();g.displayed=false;k(GH).unbind("."+g.id);l.destroy(i.id);k(GH).unbind("."+g.id)};g.loadChart=function(){i.renderChartLoading();k(g.sprintPicker).bind("selectedItemChanged",g.handleSprintChanged);p.setNonWorkingDaysShown(m.getNonWorkingDaysShown("burndown"));var q=g.rapidViewId;g.loadSprintOptions(q).done(function(r){g.processSprintsData(r);if(r.sprints&&r.sprints.length>0){g.estimatePicker.load(g.rapidViewId,g.handleEstimateChanged).done(function(){var t=g.sprintPicker.getSelectedItem();var s=g.estimatePicker.getSelectedItem();if(t){p.setSprintId(t.id);p.setEstimationStatistic(s.id);p.loadChartData()}else{n.hideSpinner()}})}})};g.loadSprintOptions=function(q){return a.get({url:"/sprintquery/"+q,data:{includeHistoricSprints:false,includeFutureSprints:false}},"sprintOptions")};g.processSprintsData=function(q){if(!g.displayed){return}q.sprints.reverse();g.sprintPicker.setItems(q.sprints);g.sprintPicker.setDefaultItem(g.getDefaultSprintForPicker(q.sprints));i.renderAndShowSprintPicker();if(!q.sprints||q.sprints.length===0){g.estimatePicker.shouldRender=false}m.replaceState()};g.handleSprintChanged=function(){if(!g.displayed){return}h("BurndownChartController.handleSprintChanged",c.Contexts.event);m.pushState();p.setSprintId(g.sprintPicker.getSelectedItem().id);p.loadChartData()};g.getDefaultSprintForPicker=function(q){var r=o.filter(q,function(s){return !s.closed});if(r.length>0){return o.first(r)}return o.first(q)};g.handleEstimateChanged=function(q){if(!g.displayed){return}h("BurndownChartController.handleEstimateChanged",c.Contexts.event);m.pushState();p.setEstimationStatistic(q);p.loadChartData()};g.handleResizeEvent=function(q,r){if(r.id!==g.id){return}c.log("Updating BurndownChart after window resize event",c.Contexts.ui);r.chart.realPointsPerSeries={};setTimeout(i.addNonWorkingDaysToLegend,0)};return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownReportChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-report-chart-controller",["require"],function(d){var c=d("jira-agile/rapid/ui/chart/burndown-chart-model");var f=d("jira-agile/rapid/ui/chart/burndown-chart-view");var b=d("jira-agile/rapid/ui/chart/chart-view");var e=GH.Ajax;var a={};a.displayed=false;a.rapidViewId=undefined;a.sprintId=undefined;a.estimationStatisticId=undefined;a.nonWorkingDaysShown=undefined;a.setRapidView=function(g){a.rapidViewId=g};a.setSprintId=function(g){a.sprintId=g};a.setEstimationStatistic=function(g){a.estimationStatisticId=g};a.show=function(){a.displayed=true};a.hide=function(){a.displayed=false};a.setNonWorkingDaysShown=function(g){a.nonWorkingDaysShown=g};a.loadChartData=function(){if(!a.sprintId){return}var g={rapidViewId:a.rapidViewId,sprintId:a.sprintId,statisticFieldId:a.estimationStatisticId};return e.get({url:"/rapid/charts/scopechangeburndownchart.json",data:g},"rapidChartData").done(a.processChartData).fail(b.hideSpinner)};a.processChartData=function(g){if(!a.displayed){return}c.setRawData(g);f.setNonWorkingDaysShown(a.nonWorkingDaysShown);f.showChart()};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartModel.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-model",["require"],function(d){var j=d("underscore");var f=d("jira-agile/rapid/ui/chart/burndown-chart-view");var e=d("jira-agile/rapid/ui/chart/burndown-rate");var k;var b;var i=d("jira-agile/rapid/ui/chart/chart-colors");var h=d("jira-agile/rapid/global-events");var a=GH.ChartUtils;var g=GH.FlotChartUtils;h.on("pre-initialization",function(){k=d("jira-agile/rapid/ui/chart/burndown-table-producer");b=d("jira-agile/rapid/ui/chart/burndown-timeline-producer")});var c={};c.rawData={};c.tableHandler={};c.timelineData={};c.series=[];c.seriesData={};c.yAxisData={};c.dataTable={};c.setRawData=function(l){c.rawData=l;e.setRateData(l.workRateData);c.prepareData()};c.getStatistic=function(){return c.rawData.statisticField};c.isTimeTracking=function(){return c.getStatistic().fieldId==="timeestimate"};c.getParentIssueKey=function(l){if(!j.isUndefined(c.rawData.issueToParentKeys)){return c.rawData.issueToParentKeys[l]||false}return false};c.prepareData=function(){var o=c.isTimeTracking();if(o){c.tableHandler=k.TimeTrackingTableHandler}else{c.tableHandler=k.EstimateStatisticTableHandler}var m=a.getStatisticConsumer(o);c.timelineData=b.calculateTimelineData(c.rawData,m);c.calculateSeries();var l=c.rawData.lastUserWhoClosedHtml;var n=k.getDataTable(c.timelineData,c.tableHandler,m,l);c.renderDataTableValues(n);c.dataTable=n};c.getChartStartTime=function(){var l=c.timelineData;return l.startTime};c.calculateGuidelineSeries=function(n){var p=n.startValue;var q=e.getRateDefinitions();var m=e.limitToTimeRange(q,n.startTime,n.endTime);var o=c.calculateTimePerUnit(m,p);var l=[[n.startTime,n.startValue]].concat(j.map(m,function(t){if(t.rate===e.WORKING_DAY){var s=t.start-t.end;var r=s/o;p-=r}return[j.min([t.end,n.endTime]),j.max([p,0])]}));l=j.reject(l,function(r){return r.length===0});return{id:"guideline",data:l,color:"#999",label:"Guideline"}};c.calculateTimePerUnit=function(n,l){var o=e.limitToWorkingDays(n);var m=j.reduce(o,function(p,q){return p+(q.start-q.end)},0);return m/l};c.calculateSeries=function(){var n=c.timelineData;var r=n.timeline;if(j.isEmpty(r)){return}var m=r[0];var o=[];o.push(c.calculateGuidelineSeries({startTime:n.startTime,startValue:m.values.estimate,endTime:n.endTime}));var s=["estimate"];if(c.isTimeTracking()){s.push("timeSpent")}var u={};var l={};j.each(s,function(v){u[v]=[];l[v]=[]});j.each(r,function(v){if(!v.openCloseEntries){j.each(s,function(w){if(v.deltas&&j.isNumber(v.deltas[w])&&v.deltas[w]!==0){u[w].push([v.time,v.values[w]-v.deltas[w]]);l[w].push({})}u[w].push([v.time,v.values[w]]);l[w].push(v)})}});if(!n.completeTime){var p=j.last(r);j.each(s,function(v){u[v].push([Math.max(n.startTime,n.now),p.values[v]])})}if(c.isTimeTracking()){o.push({id:"timeSpent",data:u.timeSpent,color:"#14892c",label:"Time Spent"})}o.push({id:"estimate",data:u.estimate,color:"#d04437",label:"Remaining Values"});var t;if(f.wallboardMode){t=i.nonWorkingDaysWallboard}else{t=i.nonWorkingDays}o.push({id:"markings",color:t,data:[],label:"Non-Working Days"});var q=0;j.each(s,function(v){q=Math.max(q,n.maxValues[v]||0)});c.calculateYAxis(q);c.series=o;c.seriesData=l};c.calculateYAxis=function(l){c.yAxisData=g.calculateYAxis(l,c.getStatistic())};c.getDataTable=function(){return c.dataTable};c.getSeries=function(){return c.series};c.getYAxis=function(){return c.yAxisData};c.getDataBySeries=function(l){return c.seriesData[l]};c.getDataBySeriesAtIndex=function(m,l){if(c.seriesData[m]){return c.seriesData[m][l]}};c.getStatisticDefinitionForSeries=function(n){var m=c.getStatisticDefinitions();var l=j.find(m,function(o){return(n===o.valueId)});return l};c.getStatisticDefinitions=function(){return c.dataTable.statistics};c.getWarning=function(){return c.rawData.warningMessage};c.isEmpty=function(){return Object.keys(c.rawData.changes).length===0};c.renderDataTableValues=function(m){var l="";j.each(m.rows,function(p){var o=a.renderUTCMillisAsDate(p.time);var n;if(p.recordedTime){n=a.renderUTCMillisAsDate(p.recordedTime)}if(o!==l||n){p.dateString=o;p.recordedDateString=n;l=o}p.valuesText={};j.each(j.keys(p.values),function(q){p.valuesText[q]=c.renderStatisticText(p.values[q])});if(p.initial||p.complete){j.each(p.issues,function(q){q.valuesText={};j.each(j.keys(q.values),function(r){q.valuesText[r]=c.renderStatisticText(q.values[r])});q.parentKey=c.getParentIssueKey(q.key)});p.issues=j.sortBy(p.issues,function(q){return q.parentKey||q.key})}else{if(!p.openClose){p.deltasType={};p.deltasText={};j.each(j.keys(p.deltas),function(q){p.deltasText[q]=c.renderStatisticText(p.deltas[q],true);p.deltasType[q]=p.deltas[q]<0?"dec":"inc"});p.parentKey=c.getParentIssueKey(p.key)}}})};c.renderStatisticText=function(m,l){return a.renderStatisticText(m,l,c.getStatistic().renderer)};c.getTooltipData=function(p,l){var o=l;var n={};var m=c.getStatisticDefinitionForSeries(p);n.statistic=m;if(o.initial||o.complete){if(o.initial){n.initial=true;n.event=k.getSprintStartChangeEvent()}else{n.complete=true;n.event=k.getSprintCompleteChangeEvent()}n.issueCount=j.size(o.issues);n.statisticName=m.name;n.statisticValue=c.renderStatisticText(o.values[m.valueId])}else{n.changes=[];j.each(o.issues,function(q){var r={};r.key=q.key;r.statisticName=m.name;r.statisticDelta=c.renderStatisticText(q.deltas[m.valueId]);r.event=c.tableHandler.getChangeEvent(q);n.changes.push(r)})}n.dateText=a.renderUTCMillisAsDate(o.time);return n};c.hasAnyWorkingDays=function(){return e.getWorkingDays().length>0};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownRate.js' */
define("jira-agile/rapid/ui/chart/burndown-rate",["require"],function(b){var a=b("underscore");var c={};c.WORKING_DAY=1;c.NON_WORKING_DAY=0;c.setRateData=function(d){c.rateData=d};c.getRateDefinitions=function(){return c.rateData.rates};c.getNonWorkingDays=function(){var d=c.getRateDefinitions();return c.limitToNonWorkingDays(d)};c.getWorkingDays=function(){var d=c.getRateDefinitions();return c.limitToWorkingDays(d)};c.limitToWorkingDays=function(d){return a.filter(d,function(e){return e.rate===c.WORKING_DAY})};c.limitToNonWorkingDays=function(d){return a.filter(d,function(e){return e.rate===c.NON_WORKING_DAY})};c.limitToTimeRange=function(e,f,d){var g=a.reject(e,function(h){return d<h.start||h.end<f});return a.map(g,function(h){return{start:Math.max(f,h.start),rate:h.rate,end:Math.min(d,h.end)}})};c.isDateInNonWorkingBlock=function(f){var e=false;var d=c.getNonWorkingDays();for(var g=0;g<d.length;g++){var h=d[g];if(h.start<=f&&h.end>f){e=true;break}}return e};c.getAdjustedNonWorkingDays=function(d){var e=c.getNonWorkingDays();var f=a.filter(e,function(g){return g.end>d});return a.map(f,function(g){return{moveTo:(g.start===d)?g.end:g.start,start:g.start,end:g.end}})};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTableProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-table-producer",["require"],function(d){var c=d("underscore");var a=d("jira-agile/rapid/ui/chart/burndown-chart-model");var g=d("jira-agile/rapid/ui/chart/burndown-timeline-producer");var f=GH.ChartUtils;var b=GH.tpl;var e={};e.getDataTable=function(m,j,i,h){var k={rows:[],pastChangeRows:{},currentValues:[]};c.each(m.timeline,function(p){if(p.initial){var o={initial:true,time:p.time,event:e.getSprintStartChangeEvent(),values:p.values,issues:p.issues};k.rows.push(o);k.currentValues=c.clone(p.values)}else{if(p.complete){var n={complete:true,time:p.time,event:e.getSprintCompleteChangeEvent(h),values:p.values,issues:p.issues};k.rows.push(n)}else{if(p.openCloseInstances){c.each(p.openCloseInstances,function(q){k.rows.push({time:p.time,event:e.getSprintStateChangeEvent(q),openClose:true,values:{}})})}else{c.each(p.issues,function(q){g.addStatisticValueDeltas(q.deltas,k.currentValues,1,i);var r={time:p.time,key:q.key,deltas:q.deltas,values:c.clone(k.currentValues)};r.event=j.getChangeEvent(q);j.addAdditionalRowInformation(k,p,q,r);k.rows.push(r)})}}}});var l={statistics:j.getStatisticDefinitions(),rows:k.rows};return l};e.getSprintStartChangeEvent=function(){return{type:"Sprint start",detail:""}};e.getSprintCompleteChangeEvent=function(h){return{type:b.burndownchart.renderSprintCompleteEventType({closingUserHtml:h}),typeAsHtml:true,detail:""}};e.getSprintReopenChangeEvent=function(h){return{type:GH.tpl.burndownchart.renderSprintReopenEventType({reopenUserHtml:h}),typeAsHtml:true,detail:""}};e.getSprintStateChangeEvent=function(h){if(h.operation==="CLOSE"){return e.getSprintCompleteChangeEvent(h.user||h.userDisplayNameHtml)}else{return e.getSprintReopenChangeEvent(h.user||h.userDisplayNameHtml)}};e.getSprintOrColumnChangeEvent=function(h,i){if(h.scopeChange){if(h.inScope){return{type:"Scope change",detail:"Issue added to sprint"}}else{return{type:"Scope change",detail:"Issue removed from sprint"}}}return e.getColumnChangeEvent(h,i)};e.getColumnChangeEvent=function(h,i){if(h.columnChange){if(h.column==="notDone"){if(h.oldColumn){return{type:i,detail:"Issue reopened"}}else{return{type:"Scope change",detail:"Open issue moved into board (from an unmapped status)"}}}if(h.column==="done"){if(h.oldColumn){return{type:i,detail:"Issue completed"}}else{return{type:"Scope change",detail:"Done issue moved into board (from an unmapped status)"}}}else{if(h.oldColumn==="notDone"){return{type:"Scope change",detail:"Open issue moved out of board (into an unmapped status)"}}else{return{type:"Scope change",detail:"Done issue moved out of board (into an unmapped status)"}}}}return false};e.TimeTrackingTableHandler={getStatisticDefinitions:function(){var h=[{id:"timeSpent",name:"Time Spent",isSum:true},a.getStatistic()];h[0].valueId="timeSpent";h[1].valueId="estimate";return h},addAdditionalRowInformation:function(j,m,h,l){if(h.change&&h.change.timeC&&h.change.timeC.changeDate){var k=h.change.timeC.changeDate;if((m.time-(m.time%60000))!==(k-(k%60000))){l.recordedTime=k}j.pastChangeRows[h.key+"-"+k]=l}var i=g.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(h,h.change);c.each(i,function(o){var n=j.pastChangeRows[o.issueKey+"-"+o.date];if(n){if(n.event.loggedNoteAdded){return}n.event.loggedNoteAdded=true;if(!n.event.notes){n.event.notes=[]}n.event.notes.push(AJS.format("Backdated event, recorded at {0}",f.renderUTCMillisAsDate(o.date)))}})},getChangeEvent:function(k){var o="Issue state change";var q=e.getSprintOrColumnChangeEvent(k,o);if(q){return q}if(k.estimateChange||k.timeChange){var i=0;var h=false;var m=0;var j=false;var x=0;var s=false;if(k.timeChange){i=k.deltas.timeSpent;h=true}if(k.estimateChange){x=k.values.estimate;m=k.values.estimate-k.deltas.estimate||0;j=!c.isUndefined(m);s=!c.isUndefined(x)}var y={};if(h){y.type="Work logged"}else{var u="Remaining Time Estimate";var r="RTE";var t='<acronym title="'+u+'">'+r+"</acronym>";y.type=AJS.format("{0} change",t);y.typeAsHtml=true}var v="";var p=[];if(h){v+=AJS.format("{0} logged",a.renderStatisticText(i))}if(j||s){var n=j?a.renderStatisticText(m):"no value";var l=s?a.renderStatisticText(x):"no value";v+=v.length>0?", ":"";v+=AJS.format("{0} changed from {1} to {2}",a.getStatistic().name,n,l);var w=g.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(k,k.change);c.each(w,function(z){p.push(AJS.format("Includes {0} backdated to {1}, recorded at {2}",f.renderStatisticText(z.delta),f.renderUTCMillisAsDate(z.worklogDate),f.renderUTCMillisAsDate(z.date)))})}y.detail=v;y.notes=p;return y}return{type:"unknown",detail:["unknown change"]}}};e.EstimateStatisticTableHandler={getStatisticDefinitions:function(){var h=[a.getStatistic()];h[0].valueId="estimate";return h},addAdditionalRowInformation:function(i,k,h,j){},getChangeEvent:function(h){var k="Burndown";var j=e.getSprintOrColumnChangeEvent(h,k);if(j){return j}if(h.estimateChange){var l=h.values.oldEstimateFieldValue;var i=h.values.estimateFieldValue;var n=!c.isUndefined(l);var m=!c.isUndefined(i);if(n&&m){return{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",a.renderStatisticText(l),a.renderStatisticText(i))}}else{if(n){return{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",a.renderStatisticText(l))}}else{return{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",a.renderStatisticText(i))}}}}return{type:"unknown",detail:"unknown change"}}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTimelineProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-timeline-producer",["require"],function(b){var a=b("underscore");var c={};c.calculateTimelineData=function(h,e){var f={timeline:[]};if(h.startTime===h.endTime){return f}var d=a.isUndefined(h.completeTime)?false:h.completeTime;var g=c.calculateTimeline(h.startTime,d,h.changes,h.openCloseChanges,e,h.estimatableIssueKeys);f.timeline=g.timeline;f.now=h.now;f.startTime=h.startTime;f.endTime=h.endTime;f.completeTime=d;f.maxValues=g.maxValues;f.statisticField=h.statisticField;f.finalIssueStates=g.issueState;return f};c.calculateTimeline=function(j,p,t,q,s,m){var u={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:false,statisticConsumer:s,estimatableIssueKeys:m};c.addStatisticValueDeltas({},u.currentValues,1,s);var f=a.keys(t);var g=q?a.keys(q):[];var k=0;for(var n=0;n<f.length;n++){var v=f[n];var r=parseInt(v,10);if(!u.pastSprintStart&&j<=r){c.addSprintStartTimelineEntry(u,j);u.pastSprintStart=true}if(p&&(p<r)){break}var o=t[v];var h=c.processTimeChanges(u,o,r);if(u.pastSprintStart&&h){if(g.length>0){var e=g[k];while(e<v){var l=parseInt(e,10);var d=q[e];c.addSprintStateChangeTimelineEntry(u,l,d);k++;e=g[k]}}c.addChangeTimelineEntry(u,r,h.issues,h.deltas)}}if(!u.pastSprintStart){c.addSprintStartTimelineEntry(u,j);u.pastSprintStart=true}if(p){c.addSprintCompleteTimelineEntry(u,p)}return u};c.processTimeChanges=function(g,d,h){var f={};var e=[];a.each(d,function(m){var k={};var i=g.issueState[m.key];if(!i){i={key:m.key,isInChart:false,burned:false,values:{},estimatable:a.contains(g.estimatableIssueKeys,m.key)};g.issueState[m.key]=i}c.removeStatisticValues(i,k,g.statisticConsumer);c.removeStatisticValues(i,f,g.statisticConsumer);g.statisticConsumer.beforeProcessChange(i,h,m);var l=i.isInChart||false;c.processInChartChanges(i,m);g.statisticConsumer.processChange(i,m);c.addStatisticValues(i,k,g.statisticConsumer);c.addStatisticValues(i,f,g.statisticConsumer);if(l||i.isInChart){var j=c.getCurrentState(g,i,k);j.change=m;e.push(j)}g.statisticConsumer.afterProcessChange(i,h,m)});if(a.isEmpty(e)){return false}c.addStatisticValueDeltas(f,g.currentValues,1,g.statisticConsumer);return{issues:e,deltas:f}};c.processInChartChanges=function(d,e){if(!a.isUndefined(e.added)){d.inScope=e.added;d.scopeChange=true}else{d.scopeChange=false}if(e.column){if(e.column.done===false){e.column.notDone=true}if(e.column.notDone===false){e.column.done=true}if(e.column.notDone){d.column="notDone";if(a.isBoolean(e.column.done)){d.oldColumn="done"}else{d.oldColumn=undefined}}else{if(e.column.done){d.column="done";if(a.isBoolean(e.column.notDone)){d.oldColumn="notDone"}else{d.oldColumn=undefined}}else{d.column=undefined;if(a.isBoolean(e.column.notDone)){d.oldColumn="notDone"}else{d.oldColumn="done"}}}d.columnChange=true}else{d.columnChange=false}d.isInChart=(d.column&&d.inScope)?true:false;d.burned=(d.column==="done")};c.addStatisticValues=function(f,e,d){if(f.isInChart){c.addStatisticValueDeltas(f.values,e,1,d)}};c.removeStatisticValues=function(f,e,d){if(f.isInChart){c.addStatisticValueDeltas(f.values,e,-1,d)}};c.addStatisticValueDeltas=function(g,f,e,d){if(!e){e=1}a.each(d.dataFields,function(h){f[h]=(f[h]||0)+(g[h]||0)*e})};c.getMaxStatisticValues=function(e,d,f){var g={};a.each(f.dataFields,function(h){g[h]=e[h]>d[h]?e[h]:d[h]});return g};c.addChangeTimelineEntry=function(f,g,d,e){var h={time:g,issues:d,values:a.clone(f.currentValues),deltas:e};f.timeline.push(h);f.maxValues=c.getMaxStatisticValues(f.maxValues,f.currentValues,f.statisticConsumer)};c.addSprintStateChangeTimelineEntry=function(d,f,e){var g={time:f,issues:{},values:{},deltas:{},openCloseInstances:e};d.timeline.push(g)};c.addSprintStartTimelineEntry=function(e,f){e.statisticConsumer.beforeSprintStart(e);var d=c.getTimelineEntryForCurrentState(e,f);d.initial=true;e.timeline.push(d);e.maxValues=a.clone(e.currentValues)};c.addSprintCompleteTimelineEntry=function(e,f){var d=c.getTimelineEntryForCurrentState(e,f);d.complete=true;e.timeline.push(d)};c.getTimelineEntryForCurrentState=function(e,f){var d=[];a.each(e.issueState,function(h){if(h.isInChart){d.push(c.getCurrentState(e,h))}});var g={time:f,issues:d,values:a.clone(e.currentValues)};return g};c.getCurrentState=function(g,d,f){var e=a.clone(d);e.values=a.clone(d.values);if(f){e.deltas=f;g.statisticConsumer.copyToCurrentState(e,d)}return e};c.TimeTrackingStatisticConsumer={dataFields:["estimate","timeSpent"],processChange:function(d,e){if(e.timeC){if(!a.isUndefined(e.timeC.timeSpent)){if(d.isInChart){d.values.timeSpent=(d.values.timeSpent||0)+(e.timeC.timeSpent||0);d.timeChange=true}}else{d.timeChange=false}if(!a.isUndefined(e.timeC.newEstimate)){d.values.estimate=(d.values.estimate||0)+((e.timeC.newEstimate||0)-(e.timeC.oldEstimate||0));d.estimateChange=true}else{d.estimateChange=false}}},beforeProcessChange:function(d,e,f){c.TimeTrackingStatisticConsumer.removeExpiredEstimateChanges(d,e)},afterProcessChange:function(d,e,f){c.TimeTrackingStatisticConsumer.addEstimateChange(d,e,f)},beforeSprintStart:function(d){a.each(d.issueState,function(e){if(!a.isUndefined(e.values.timeSpent)){e.values.timeSpent=0}});d.maxValues.timeSpent=0;d.currentValues.timeSpent=0},copyToCurrentState:function(e,d){e.estimateDeltas=a.clone(d.estimateDeltas)},removeExpiredEstimateChanges:function(d,e){if(!d.estimateDeltas){d.estimateDeltas=[]}d.estimateDeltas=a.reject(d.estimateDeltas,function(f){return f.date<=e})},addEstimateChange:function(d,g,h){if(!d.estimateDeltas){d.estimateDeltas=[]}if(!h.timeC||!h.timeC.changeDate){return}var e=h.timeC.changeDate;var f=(h.timeC.newEstimate||0)-(h.timeC.oldEstimate||0);d.estimateDeltas.push({worklogDate:g,date:e,issueKey:h.key,delta:f,change:h})},getAffectingEstimateChanges:function(d,e){if((!e.timeC)||(!e.timeC.changeDate)){return[]}return a.filter(d.estimateDeltas,function(f){return e.timeC.changeDate<f.date})}};c.EstimateStatisticConsumer={dataFields:["realValue","estimate"],processChange:function(d,e){if(e.statC){d.values.oldEstimateFieldValue=e.statC.oldValue;d.values.estimateFieldValue=e.statC.newValue;d.estimateChange=true}else{d.estimateChange=false}if(d.isInChart&&!d.burned){d.values.estimate=d.values.estimateFieldValue}else{d.values.estimate=d.values.estimateFieldValue?0:d.values.estimateFieldValue}},beforeProcessChange:function(d,e,f){},afterProcessChange:function(d,e,f){},beforeSprintStart:function(d){},copyToCurrentState:function(e,d){}};c.ProgressConsumer={dataFields:["issueCount","unestimatedIssueCount","totalEstimate","completedEstimate"],processChange:function(d,f){if(f.statC){d.values.oldEstimateFieldValue=f.statC.oldValue;d.values.estimateFieldValue=f.statC.newValue;d.estimateChange=true}else{d.estimateChange=false}if(d.isInChart){d.values.issueCount=1;d.values.unestimatedIssueCount=(d.estimatable&&a.isUndefined(d.values.estimateFieldValue)&&!d.burned)?1:0;var e=d.values.estimateFieldValue||0;d.values.totalEstimate=e;d.values.completedEstimate=d.burned?e:0}else{d.values.issueCount=0;d.values.unestimatedIssueCount=0;d.values.totalEstimate=0;d.values.completedEstimate=0}if(d.isInChart&&!d.burned){d.values.estimate=d.values.estimateFieldValue}else{d.values.estimate=d.values.estimateFieldValue?0:d.values.estimateFieldValue}},beforeProcessChange:function(d,e,f){},afterProcessChange:function(d,e,f){},beforeSprintStart:function(d){},copyToCurrentState:function(e,d){}};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartView.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-view",["require"],function(e){var c=e("jquery");var q=e("underscore");var n;var i;var h;var o=e("jira-agile/rapid/ui/chart/chart");var l=e("jira-agile/rapid/ui/chart/chart-colors");var j=e("jira-agile/rapid/ui/chart/chart-controller");var k=e("jira-agile/rapid/ui/chart/chart-view");var a=e("jira-agile/rapid/global-events");var g=e("jira-agile/rapid/ui/chart/non-working-days-util");var m=GH.ChartTimeFrames;var f=GH.ChartTooltip;var p=GH.FlotChartUtils;var b=GH.RapidBoard;var r=GH.tpl;a.on("pre-initialization",function(){n=e("jira-agile/rapid/ui/chart/burndown-chart-controller");i=e("jira-agile/rapid/ui/chart/burndown-chart-model");h=e("jira-agile/rapid/ui/chart/report-controller")});var d={};d.gadgetMode=false;d.wallboardMode=false;d.nonWorkingDaysShown=undefined;d.renderStats=true;d.renderNonWorkingDayControls=true;d.renderDataPoints=true;d.setNonWorkingDaysShown=function(s){d.nonWorkingDaysShown=s};d.setGadgetMode=function(s){d.gadgetMode=s;d.renderStats=!s;d.renderNonWorkingDayControls=!s;d.renderDataPoints=!s};d.setWallboardMode=function(s){d.wallboardMode=s};d.renderChartLoading=function(){k.hideChartControls();k.getChartContentElem(true).html(r.burndownchart.renderChartBody());k.showSpinner()};d.showWarning=function(s){var t=AJS.$(r.burndownchart.renderWarningMessage({message:s}));t.prependTo("#ghx-chart-content");k.hideSpinner()};d.showChart=function(){k.hideSpinner();if(i.getWarning()){d.showWarning(i.getWarning())}if(i.isEmpty()){return}d.renderUI();if(!d.gadgetMode){d.handleReopenButton()}};d.handleReopenButton=function(){h.renderReopenButton(k.getReopenButton(true),b.State.getRapidViewId(),n.sprintPicker.getItems(),n.sprintPicker.getSelectedItem())};d.renderUI=function(){k.showChartGroup();d.renderChart();if(d.renderStats){d.renderChartStats()}};d.renderChartStats=function(){var t=i.getDataTable();var s=c(r.burndownchart.renderBurndownChartTable({statistics:t.statistics,rows:t.rows}));c("#ghx-chart-data").empty().append(s)};d.renderChart=function(){if(!i.hasAnyWorkingDays()){c("#ghx-chart-wrap").hide();c("#ghx-chart-empty").html(r.burndownchart.renderNoWorkingDaysMessage({})).show();return}else{c("#ghx-chart-empty").hide();c("#ghx-chart-wrap").show()}if(d.nonWorkingDaysShown){d.renderChartWithNonWorkingDays()}else{d.renderChartWithoutNonWorkingDays()}};d.renderChartWithoutNonWorkingDays=function(){var s=i.getChartStartTime();var u=g.transformSeriesExcludingNonWorkingDays(i.getSeries(),s);d.showNotificationIfEmpty(u);var v=function(w,y){var x=g.transformDateIfInNonWorkingDays(w,i.getChartStartTime());var z="%b %d";if(y.tickSize[1]==="hour"){z+=" %h:%M"}return c.plot.formatDate(x,z)};var t=d.getDefaultPlotOptions();t.xaxis.tickFormatter=v;d.renderBurndownChart(u,t)};d.renderChartWithNonWorkingDays=function(){var t=i.getSeries();d.showNotificationIfEmpty(t);var s=d.getDefaultPlotOptions();if(!s.grid.markings){s.grid.markings=j.getNonWorkingBlocks}d.renderBurndownChart(t,s);if(d.renderNonWorkingDayControls){d.addNonWorkingDaysToLegend()}};d.renderBurndownChart=function(t,s){p.setAndAlignAxisLabels("Time",d.getYAxisLabel());var v=k.getChartView(true);var u=o.draw(n.id,v,t,s);if(d.renderDataPoints){u.hooks.drawSeries.push(d.gatherPoints);u.hooks.draw.push(p.deferredRenderPoints);d.bindEvents(v)}if(d.renderNonWorkingDayControls){d.addNonWorkingDaysToLegend()}};d.addNonWorkingDaysToLegend=function(){var u=k.getChartView().find(".legend").find("tbody");var t=u.find("#ghx-chart-show-non-working-days");if(t.length===0){var s=c((r.burndownchart.renderShowNonWorkingDaysOption({checked:d.nonWorkingDaysShown})));u.append(s);u.find("#ghx-chart-show-non-working-days").click(d.toggleNonWorkingDays)}};d.toggleNonWorkingDays=function(){d.nonWorkingDaysShown=c("#ghx-chart-show-non-working-days").is(":checked");b.State.setNonWorkingDaysShown("burndown",d.nonWorkingDaysShown);d.renderChart()};d.showNotificationIfEmpty=function(s){if(q.isEmpty(s)){var t=c(r.burndownchart.renderBurndownNoSprint()).css({"margin-top":"0px"});t.prependTo("#ghx-chart-content")}};d.renderAndShowSprintPicker=function(){n.sprintPicker.render(k.getChartSelector(true));k.showChartGroup()};d.getDefaultPlotOptions=function(){var s={xaxis:{mode:"time"},yaxis:i.getYAxis(),series:{points:{show:false,radius:3,symbol:"circle"},lines:{show:true}},grid:{hoverable:true,clickable:false,autoHighlight:false},mouseEnterExitEvents:true,legend:{container:null,backgroundOpacity:0.5,position:"ne"}};if(d.gadgetMode||d.wallboardMode){s.series={lines:{show:true,lineWidth:d.wallboardMode?4:2},points:{show:false},shadowSize:0};if(d.wallboardMode){s.grid={backgroundColor:l.wallboard.backgroundColor,borderWidth:1,borderColor:l.wallboard.borderColor,color:l.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:l.wallboard.tickColor,markings:d.getMarkingsForGadget}}else{s.grid={color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee"}}}return s};d.getMarkingsForGadget=function(){var t=l.nonWorkingDaysWallboard;var s=j.getNonWorkingBlocks();return q.map(s,function(u){u.color=t;return u})};d.bindEvents=function(s){s.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",p.handleMouseOverStateChange);s.unbind("plothover plotclick plotselected dblclick");s.bind("plothover",d.handlePlotHover);s.bind("plotclick",p.handlePlotClick);s.bind("plotselected",d.handleRangeSelection);s.bind("dblclick",d.resetRangeSelection)};d.handlePlotHover=function(w,y,v){var u=c("#ghx-tooltip");if(v){var x=v.series.id;var t=v.dataIndex;var s=i.getDataBySeriesAtIndex(x,t);if(!q.isEmpty(s)){if(d.previousPlotHoverPoint!==v.dataIndex){d.previousPlotHoverPoint=v.dataIndex;u.remove();d.showChartTooltip(v,x,s,v.datapoint[0]);if(!u.hasClass("ghx-has-warnings")){k.getChartView().addClass("ghx-clickable")}}return}}u.remove();d.previousPlotHoverPoint=null;k.getChartView().removeClass("ghx-clickable")};d.previousPlotHoverPoint=undefined;d.roundDuration=function(s){return s!==0?Math.round(s*10)/10:0};d.showChartTooltip=function(t,w,s){if(!s){return}var v=i.getTooltipData(w,s);var u=new f(t,v);u.render()};d.gatherPoints=function(w,t,v){if(!w.mouseEntered){return}var x=v.id;var u=i.getDataBySeries(x);if(!u){return}var s=p.gatherPoints(v,u);w.realPointsPerSeries[x]=s};d.getYAxisLabel=function(){return i.getStatistic().name};d.handleRangeSelection=function(t,s){var v=s.xaxis.from;var u=s.xaxis.to;m.setNewChartLimits(-1,v,u)};d.resetRangeSelection=function(s){m.setNewChartLimits(0,0,0)};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChart.soy' */
// This file was automatically generated from BurndownChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.burndownchart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.burndownchart == 'undefined') { GH.tpl.burndownchart = {}; }


GH.tpl.burndownchart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-empty"></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderChartBody.soyTemplateName = 'GH.tpl.burndownchart.renderChartBody';
}


GH.tpl.burndownchart.renderBurndownNoSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("There are no sprints currently in progress.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownNoSprint.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownNoSprint';
}


GH.tpl.burndownchart.renderBurndownChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight ghx-vertical-lines"><thead><tr><th></th><th></th><th></th><th></th>';
  var statisticList10 = opt_data.statistics;
  var statisticListLen10 = statisticList10.length;
  for (var statisticIndex10 = 0; statisticIndex10 < statisticListLen10; statisticIndex10++) {
    var statisticData10 = statisticList10[statisticIndex10];
    output += '<th colspan="3" id="series-' + soy.$$escapeHtml(statisticData10.id) + '" class="ghx-center">' + soy.$$escapeHtml(statisticData10.name) + '</th>';
  }
  output += '</tr><tr><th id="series-date">' + soy.$$escapeHtml("Date") + '</th><th id="series-issue">' + soy.$$escapeHtml("Issue") + '</th><th id="series-event-type">' + soy.$$escapeHtml("Event Type") + '</th><th id="series-event-detail">' + soy.$$escapeHtml("Event Detail") + '</th>';
  var statisticList26 = opt_data.statistics;
  var statisticListLen26 = statisticList26.length;
  for (var statisticIndex26 = 0; statisticIndex26 < statisticListLen26; statisticIndex26++) {
    var statisticData26 = statisticList26[statisticIndex26];
    output += '<th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-inc" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml("Increase") + '">' + soy.$$escapeHtml("Inc.") + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-dec" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml("Decrease") + '">' + soy.$$escapeHtml("Dec.") + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-value" class="ghx-right ghx-minimal">' + ((statisticData26.isSum) ? 'Sum' : soy.$$escapeHtml("Remaining")) + '</th>';
  }
  output += '</tr></thead><tbody>';
  var rowList50 = opt_data.rows;
  var rowListLen50 = rowList50.length;
  for (var rowIndex50 = 0; rowIndex50 < rowListLen50; rowIndex50++) {
    var rowData50 = rowList50[rowIndex50];
    output += '<tr><td headers="series-date">' + ((rowData50.dateString) ? (rowData50.recordedDateString) ? '<span class="ghx-backdated-event" title="' + soy.$$escapeHtml(AJS.format("Recorded at {0}",rowData50.recordedDateString)) + '">' + soy.$$escapeHtml(rowData50.dateString) + '</span>' : soy.$$escapeHtml(rowData50.dateString) : '') + '</td><td headers="series-issue">';
    if (rowData50.initial || rowData50.complete) {
      var issueList66 = rowData50.issues;
      var issueListLen66 = issueList66.length;
      for (var issueIndex66 = 0; issueIndex66 < issueListLen66; issueIndex66++) {
        var issueData66 = issueList66[issueIndex66];
        output += ((issueData66.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.key}) + '<br />';
      }
    } else if (! rowData50.openClose) {
      output += ((rowData50.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.key});
    }
    output += '</td><td headers="series-event-type">' + ((rowData50.event.typeAsHtml) ? soy.$$filterNoAutoescape(rowData50.event.type) : soy.$$escapeHtml(rowData50.event.type)) + '</td><td headers="series-event-detail">' + soy.$$escapeHtml(rowData50.event.detail);
    if (rowData50.event.notes) {
      output += '<div class="description">';
      var noteList96 = rowData50.event.notes;
      var noteListLen96 = noteList96.length;
      for (var noteIndex96 = 0; noteIndex96 < noteListLen96; noteIndex96++) {
        var noteData96 = noteList96[noteIndex96];
        output += ((! (noteIndex96 == 0)) ? '<br />' : '') + soy.$$escapeHtml(noteData96);
      }
      output += '</div>';
    }
    output += '</td>';
    var statisticList104 = opt_data.statistics;
    var statisticListLen104 = statisticList104.length;
    for (var statisticIndex104 = 0; statisticIndex104 < statisticListLen104; statisticIndex104++) {
      var statisticData104 = statisticList104[statisticIndex104];
      if (rowData50.initial) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right">';
        var issueList110 = rowData50.issues;
        var issueListLen110 = issueList110.length;
        for (var issueIndex110 = 0; issueIndex110 < issueListLen110; issueIndex110++) {
          var issueData110 = issueList110[issueIndex110];
          output += '<div class="ghx-nowrap">' + ((issueData110.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData110.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
        output += '</td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else if (rowData50.complete || rowData50.openClose) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else {
        output += (rowData50.deltasType[statisticData104.valueId] == 'inc') ? '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>' : '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td>';
      }
      output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-value" class="ghx-right">';
      if (rowData50.initial) {
        var issueList151 = rowData50.issues;
        var issueListLen151 = issueList151.length;
        for (var issueIndex151 = 0; issueIndex151 < issueListLen151; issueIndex151++) {
          var issueData151 = issueList151[issueIndex151];
          output += '<br />';
        }
      } else if (rowData50.complete) {
        var issueList155 = rowData50.issues;
        var issueListLen155 = issueList155.length;
        for (var issueIndex155 = 0; issueIndex155 < issueListLen155; issueIndex155++) {
          var issueData155 = issueList155[issueIndex155];
          output += '<div class="ghx-nowrap">' + ((issueData155.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData155.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
      }
      output += ((! rowData50.openClose) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.valuesText[statisticData104.valueId]) + '</div>' : '') + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownChartTable.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownChartTable';
}


GH.tpl.burndownchart.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderIssueKeyLink.soyTemplateName = 'GH.tpl.burndownchart.renderIssueKeyLink';
}


GH.tpl.burndownchart.renderShowNonWorkingDaysOption = function(opt_data, opt_ignored) {
  return '<tr><td></td><td><input type="checkbox" id="ghx-chart-show-non-working-days" ' + ((opt_data.checked) ? ' checked="checked"' : '') + '/> <label for="ghx-chart-show-non-working-days"><span class="ghx-description">' + soy.$$escapeHtml("Show Non-Working Days") + '</span></label></td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderShowNonWorkingDaysOption.soyTemplateName = 'GH.tpl.burndownchart.renderShowNonWorkingDaysOption';
}


GH.tpl.burndownchart.renderNoWorkingDaysMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span><strong>' + soy.$$escapeHtml("Chart cannot be displayed") + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format("All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.",'<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidView.jspa?tab=time&rapidView=' + GH.RapidViewConfig.currentData.data.id + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderNoWorkingDaysMessage.soyTemplateName = 'GH.tpl.burndownchart.renderNoWorkingDaysMessage';
}


GH.tpl.burndownchart.renderSprintCompleteEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closingUserHtml) ? soy.$$filterNoAutoescape(AJS.format("Sprint ended by {0}",opt_data.closingUserHtml)) : soy.$$escapeHtml("Sprint ended"));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintCompleteEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintCompleteEventType';
}


GH.tpl.burndownchart.renderSprintReopenEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reopenUserHtml) ? soy.$$filterNoAutoescape(AJS.format("Sprint reopened by {0}",opt_data.reopenUserHtml)) : soy.$$escapeHtml("Sprint reopened"));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintReopenEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintReopenEventType';
}


GH.tpl.burndownchart.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderWarningMessage.soyTemplateName = 'GH.tpl.burndownchart.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportController.js' */
GH.SprintRetrospectiveController={};GH.SprintRetrospectiveController.id="sprintRetrospective";GH.SprintRetrospectiveController.displayed=false;GH.SprintRetrospectiveController.supportsPages=false;GH.SprintRetrospectiveController.rapidViewData={};GH.SprintRetrospectiveController.rapidViewConfig={};GH.SprintRetrospectiveController.referredBySprintCompleteDialog=false;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.SprintRetrospectiveController.analytics=new a("gh.report.sprintRetrospective");GH.SprintRetrospectiveController.linkPagesAnalytics={action:new a("gh.linkedPages.discovery.action"),show:new a("gh.linkedPages.discovery.show")}})();GH.SprintRetrospectiveController.setRapidView=function(a){GH.SprintRetrospectiveController.rapidViewData=a||{}};GH.SprintRetrospectiveController.isApplicable=function(a){return a.sprintSupportEnabled};GH.SprintRetrospectiveController.getNormalizedFromInternal=function(){return{sprint:GH.SprintRetrospectiveController.getSelectedSprintId()||null}};GH.SprintRetrospectiveController.toUrl=function(a){if(_.isNull(a.sprint)){return{}}return{sprint:a.sprint}};GH.SprintRetrospectiveController.updateInternalFromNormalized=function(a){GH.SprintRetrospectiveController.setSelectedSprintFromUrlState(a.sprint)};GH.SprintRetrospectiveController.getNormalizedFromUrl=function(a){return{sprint:GH.RapidBoard.UrlState.normalizeNumberParam(a.sprint,null)}};GH.SprintRetrospectiveController.init=function(){var a=require("jira-agile/rapid/ui/component/chart-picker");GH.SprintRetrospectiveController.sprintPicker=new a("sprintRetrospective.selectedSprintId")};GH.SprintRetrospectiveController.show=function(){GH.log("GH.SprintRetrospectiveController.show",GH.Logger.Contexts.ui);GH.SprintRetrospectiveController.displayed=true;if(!GH.SprintRetrospectiveController.rapidViewData){return}GH.SprintRetrospectiveController.renderChartView();GH.SprintRetrospectiveController.analytics.trigger("show")};GH.SprintRetrospectiveController.hide=function(){GH.log("GH.SprintRetrospectiveController.hide",GH.Logger.Contexts.ui);GH.SprintRetrospectiveController.displayed=false;GH.SprintRetrospectiveView.hide();AJS.$(GH).unbind("."+GH.SprintRetrospectiveController.id)};GH.SprintRetrospectiveController.renderChartView=function(){GH.SprintRetrospectiveController.initializeControls();GH.ChartView.getChartContentElem(true).html(GH.tpl.sprintretrospective.renderReportBody());GH.ChartView.showSpinner();GH.SprintRetrospectiveController.loadRapidViewConfig()};GH.SprintRetrospectiveController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide();AJS.$(GH.SprintRetrospectiveController.sprintPicker).bind("selectedItemChanged",GH.SprintRetrospectiveController.handleSprintChanged)};GH.SprintRetrospectiveController.loadRapidViewConfig=function(){var a=function(b){if(!GH.SprintRetrospectiveController.displayed){return}GH.SprintRetrospectiveController.rapidViewConfig=b;GH.SprintRetrospectiveController.loadSprintOptions()};GH.RapidViewConfig.fetchConfiguration(GH.SprintRetrospectiveController.rapidViewData.id).done(a)};GH.SprintRetrospectiveController.loadSprintOptions=function(){var a=GH.RapidBoard.State.getRapidViewId();GH.Ajax.get({url:"/sprintquery/"+a,data:{includeHistoricSprints:false,includeFutureSprints:false}},"rapidChartData").done(GH.SprintRetrospectiveController.processSprintsData)};GH.SprintRetrospectiveController.processSprintsData=function processSprintsData(a){if(!GH.SprintRetrospectiveController.displayed){return}a.sprints.reverse();GH.SprintRetrospectiveController.sprintPicker.setItems(a.sprints);GH.SprintRetrospectiveController.sprintPicker.setDefaultItem(GH.SprintRetrospectiveController.getDefaultSprintForPicker(a.sprints));var b=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.SprintRetrospectiveController.sprintPicker.render(AJS.$("#ghx-chart-selector"));GH.ChartView.showChartGroup();GH.RapidBoard.State.pushState();if(b){GH.SprintRetrospectiveController.loadReportData()}else{GH.ChartView.hideSpinner()}};GH.SprintRetrospectiveController.loadReportData=function(){var a=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.Ajax.get({url:"rapid/charts/sprintreport",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:a.id}},"rapidChartData").done(function(b){if(!GH.SprintRetrospectiveController.displayed){return}GH.SprintRetrospectiveController.processReportData(a,b)}).fail(GH.ChartView.hideSpinner);GH.Ajax.get({url:"/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:a.id}},"rapidChartData.burndown").done(function(b){if(!GH.SprintRetrospectiveController.displayed){return}GH.SprintRetrospectiveView.showMiniBurndown(b)}).fail(GH.ChartView.hideSpinner)};GH.SprintRetrospectiveController.processReportData=function(b,d){GH.SprintRetrospectiveController.supportsPages=d.supportsPages;GH.SprintRetrospectiveView.show();var g;if(GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic.renderer=="duration"){g=GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration}else{g=GH.NumberFormat.format}var f=function(l){if(l==null){return"-"}return g(l)};d.contents.completedIssuesEstimateSum.text=f(d.contents.completedIssuesEstimateSum.value);d.contents.completedIssuesInitialEstimateSum.text=f(d.contents.completedIssuesInitialEstimateSum.value);d.contents.issuesNotCompletedEstimateSum.text=f(d.contents.issuesNotCompletedEstimateSum.value);d.contents.issuesNotCompletedInitialEstimateSum.text=f(d.contents.issuesNotCompletedInitialEstimateSum.value);d.contents.issuesCompletedInAnotherSprintEstimateSum.text=f(d.contents.issuesCompletedInAnotherSprintEstimateSum.value);d.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text=f(d.contents.issuesCompletedInAnotherSprintInitialEstimateSum.value);d.contents.puntedIssuesEstimateSum.text=f(d.contents.puntedIssuesEstimateSum.value);d.contents.puntedIssuesInitialEstimateSum.text=f(d.contents.puntedIssuesInitialEstimateSum.value);d.contents.allIssuesEstimateSum.text=f(d.contents.allIssuesEstimateSum.value);var k=function(l){GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(l,"estimateStatistic",g);GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(l,"currentEstimateStatistic",g)};_.each(d.contents.completedIssues,k);_.each(d.contents.issuesNotCompletedInCurrentSprint,k);_.each(d.contents.issuesCompletedInAnotherSprint,k);_.each(d.contents.puntedIssues,k);var i=GH.ChartUtils.createIssueJql(d.contents.completedIssues.concat(d.contents.issuesNotCompletedInCurrentSprint).concat(d.contents.puntedIssues));var c=GH.ChartUtils.createIssueJql(d.contents.completedIssues);var a=GH.ChartUtils.createIssueJql(d.contents.issuesNotCompletedInCurrentSprint);var e=GH.ChartUtils.createIssueJql(d.contents.issuesCompletedInAnotherSprint);var j=GH.ChartUtils.createIssueJql(d.contents.puntedIssues);var h=true;GH.SprintRetrospectiveView.showSprintReport(b,d,GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic,encodeURIComponent(i),encodeURIComponent(c),encodeURIComponent(a),encodeURIComponent(e),encodeURIComponent(j),h);GH.SprintRetrospectiveController.postProcessReportData(b)};GH.SprintRetrospectiveController.handleSprintChanged=function handleSprintChanged(a){GH.SprintRetrospectiveView.clearDialog();if(!GH.SprintRetrospectiveController.displayed){return}GH.log("GH.SprintRetrospectiveController.handleSprintChanged",GH.Logger.Contexts.event);GH.RapidBoard.State.pushState();GH.SprintRetrospectiveController.loadReportData()};GH.SprintRetrospectiveController.getDefaultSprintForPicker=function(b){var a=_.filter(b,function(c){return"CLOSED"===c.state});if(a.length>0){return _.first(a)}return _.first(b)};GH.SprintRetrospectiveController.getSelectedSprintId=function(){var b=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();if(b){return b.id}var a=GH.SprintRetrospectiveController.sprintPicker.getStoredSelectedItemId();if(a!=-1){return a}return null};GH.SprintRetrospectiveController.setSelectedSprintFromUrlState=function(a){GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(a)};GH.SprintRetrospectiveController.postProcessReportData=function(a){if(GH.SprintRetrospectiveController.supportsPages&&GH.SprintRetrospectiveController.shouldShowCreateRetroDialog(a.id)){GH.SprintRetrospectiveView.showCreateRetrospectiveDialog(a)}};GH.SprintRetrospectiveController.shouldShowCreateRetroDialog=function(a){return !!(_.find(GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog(),function(b){return(b.sprintId===a&&!b.dismissed)}))};GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog=function(){return GH.storage.get("gh.markedSprintsForRetroDialog")||[]};GH.SprintRetrospectiveController.markSprintAsDismissed=function(b){var a=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();_.each(a,function(c){if(c.sprintId===b){c.dismissed=true}});GH.storage.put("gh.markedSprintsForRetroDialog",a)};GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog=function(c){var a=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();function b(d){return d.sprintId===c}if(!_.find(a,b)&&a.length<5){a.push({dismissed:false,sprintId:c})}GH.storage.put("gh.markedSprintsForRetroDialog",a)};GH.SprintRetrospectiveController.getAppLinkData=function(){var b=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();function a(d){var c=_.findWhere(d,{primary:true});return c?c.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:null}return GH.LinkedPagesController.getLinkedPagesForEntity(GH.LinkedPagesController.SPRINT,b.id).andThen(function(c){var d={jiraApplicationId:c.jiraApplicationId,appLinkUrl:a(c.applicationLinks),entityId:b.id,jiraUrl:c.jiraBaseUrl};return d})};GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash=function(b,c,a){if(_.isUndefined(b[c])||_.isUndefined(b[c].statFieldValue.value)){b[c]={statFieldValue:{text:"-"}}}else{b[c].statFieldValue.text=a(b[c].statFieldValue.value)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportView.js' */
GH.SprintRetrospectiveView={};GH.SprintRetrospectiveView.createRetroDialog=null;GH.SprintRetrospectiveView.retroApplinkData=null;GH.SprintRetrospectiveView.showSprintReport=function(b,e,f,i,d,c,g,j){var h=true;var a=true;AJS.$("#ghx-report-content .ghx-sprint-report").empty().append(GH.tpl.sprintretrospective.renderSprintReport({sprint:e,estimationStatistic:f,completedIssuesJql:d,incompletedIssuesJql:c,puntedIssuesJql:j,issuescompletedInAnotherSprintJql:g,hasIssuesAddedAfterSprintStart:_.keys(e.contents.issueKeysAddedDuringSprint).length})).show();AJS.$("#ghx-sprint-report-meta").empty().append(GH.tpl.sprintretrospective.renderSprintReportHeader({sprint:e.sprint,showPages:h,linkedPagesCount:e.sprint.remoteLinks.length,endedByHtml:e.lastUserToClose})).show();GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.SPRINT,GH.LinkedPagesController.REPORT,e.sprint.id,AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"));AJS.$("#ghx-report-controls").empty().append(GH.tpl.sprintretrospective.renderSprintReportControls({allJql:i,sprint:e.sprint})).show();GH.ReportController.renderReopenButton(AJS.$("#ghx-chart-reopen-sprint"),GH.RapidBoard.State.getRapidViewId(),GH.SprintRetrospectiveController.sprintPicker.getItems(),b)};GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom=function(b,a){var c;if(b.length===3){c=0.1*(b[2]-b[0]);return((b[1]-b[0])<c||(b[2]-b[1])<c)}else{if(b[1]<a){c=0.1*(a-b[0]);return(b[1]-b[0])<c}}return false};GH.SprintRetrospectiveView.clearDialog=function(){if(GH.SprintRetrospectiveView.createRetroDialog){GH.SprintRetrospectiveView.createRetroDialog._hide()}};GH.SprintRetrospectiveView.showMiniBurndown=function(c){var b=require("jira-agile/rapid/ui/chart/burndown-chart-controller");var a=require("jira-agile/rapid/ui/chart/burndown-chart-model");var d=require("jira-agile/rapid/ui/chart/chart");var g=require("jira-agile/rapid/ui/chart/chart-controller");a.setRawData(c);if(c.warningMessage){AJS.$("#ghx-report-content").prepend(GH.tpl.sprintretrospective.renderWarningMessage({message:c.warningMessage}));return}var h=[c.startTime,c.endTime];if(_.isNumber(c.completeTime)){h.push(c.completeTime)}h=h.sort();if(GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom(h,c.now)){AJS.$(".ghx-sprint-report-burndown").addClass("ghx-close-ticklabels")}var i={xaxis:{mode:"time",ticks:h,reserveSpace:true},yaxis:a.getYAxis(),series:{points:{show:false,radius:3,symbol:"circle"},lines:{show:true}},grid:{markings:g.getNonWorkingBlocks}};var e=AJS.$("#ghx-report-content .ghx-sprint-report-burndown");var f=d.draw(b.id,e,a.getSeries(),i)};GH.SprintRetrospectiveView.show=function(){GH.ChartView.hideSpinner()};GH.SprintRetrospectiveView.hide=function(){};GH.SprintRetrospectiveView.showCreateRetrospectiveDialog=function(b){var a={noBind:true,width:320,addActiveClass:false,persistent:true,container:"#ghx-report-controls-group",calculatePositions:function(c,e){var f=e.target.offset();var d=AJS.$("#ghx-report-controls-group").offset();return{popupCss:{top:f.top-d.top+40,left:f.left-d.left},arrowCss:{left:40},displayAbove:false}}};GH.SprintRetrospectiveView.createRetroDialog=GH.InlineDialog.create("retroDialog",AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"),GH.SprintRetrospectiveView.renderCreateRetroDialog,a);GH.SprintRetrospectiveView.createRetroDialog.show();GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur();GH.SprintRetrospectiveController.linkPagesAnalytics.show.trigger("sprint.retroDialog");AJS.$(".js-retro-dialog-dismiss, #ghx-sprint-report-meta .js-view-entity-pages").live("click",function(c){GH.SprintRetrospectiveView.createRetroDialog._hide();GH.SprintRetrospectiveController.markSprintAsDismissed(b.id);GH.SprintRetrospectiveController.linkPagesAnalytics.action.trigger("sprint.retroDialog.createPage")});AJS.$(document).on("submit","#js-create-page-form",function(d){var c=window.open("","_blank");GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(e){var f={applinkId:GH.SprintRetrospectiveView.retroApplinkData.jiraApplicationId,agileMode:"report",fallbackUrl:GH.SprintRetrospectiveView.retroApplinkData.jiraUrl,creationToken:e};f.sprintId=GH.SprintRetrospectiveView.retroApplinkData.entityId;c.location=GH.SprintRetrospectiveView.retroApplinkData.appLinkUrl+"?"+AJS.$.param(f)});d.preventDefault()})};GH.SprintRetrospectiveView.renderCreateRetroDialog=function(b,a,c){GH.SprintRetrospectiveController.getAppLinkData().done(function(d){if(d.appLinkUrl){GH.SprintRetrospectiveView.retroApplinkData=d;b.html(GH.tpl.sprintretrospective.renderCreateRetroDialog(d)).addClass("ghx-inline-dialog");c()}})};GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur=function(){GH.SprintRetrospectiveView.createRetroDialog._hide=GH.SprintRetrospectiveView.createRetroDialog.hide;AJS.$(document).bind("showLayer",function(c,b,a){if(b==="inlineDialog"&&a.id==="retroDialog"){AJS.$(document.body).unbind("click.retroDialog.inline-dialog-check");a.hide=function(){return false}}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReport.soy' */
// This file was automatically generated from SprintReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintretrospective.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintretrospective == 'undefined') { GH.tpl.sprintretrospective = {}; }


GH.tpl.sprintretrospective.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div><div id="ghx-sprint-report-meta"></div></div><div id="ghx-report-content"><div class="ghx-sprint-report-burndown"></div><div class="ghx-sprint-report"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderReportBody.soyTemplateName = 'GH.tpl.sprintretrospective.renderReportBody';
}


GH.tpl.sprintretrospective.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.issueNavLink.soyTemplateName = 'GH.tpl.sprintretrospective.issueNavLink';
}


GH.tpl.sprintretrospective.renderSprintReportControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.allJql}) + '">' + soy.$$escapeHtml(AJS.format("View {0} in Issue Navigator",opt_data.sprint.name)) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportControls.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportControls';
}


GH.tpl.sprintretrospective.renderSprintReportHeader = function(opt_data, opt_ignored) {
  return '<span class="ghx-sprint-status">' + ((opt_data.sprint.state == 'CLOSED') ? (opt_data.endedByHtml) ? soy.$$filterNoAutoescape(AJS.format("Closed Sprint, ended by {0}",opt_data.endedByHtml)) : soy.$$escapeHtml("Closed Sprint") : '<em>' + soy.$$escapeHtml("Active Sprint") + '</em>') + '</span><span title="' + soy.$$escapeHtml("Start Date") + '">' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</span> - ' + ((opt_data.sprint.state == 'CLOSED') ? '<span title="' + soy.$$escapeHtml("Completion Date") + '">' + soy.$$escapeHtml(opt_data.sprint.completeDate) + '</span>' : '<span class="ghx-projected" title="' + soy.$$escapeHtml("Projected End Date") + '">' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</span>') + ((opt_data.showPages) ? GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: "Create and view pages linked to this sprint"}) : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportHeader.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportHeader';
}


GH.tpl.sprintretrospective.renderSprintReport = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item"><h3>' + soy.$$escapeHtml("Status Report") + '</h3></div>' + ((opt_data.hasIssuesAddedAfterSprintStart) ? '<div class="ghx-added-legend aui-item">* ' + soy.$$escapeHtml("Issue added to sprint after start time") + '</div>' : '') + '</div><div class="ghx-sprint-report-table ghx-report-issue-list">' + ((opt_data.sprint.contents.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.completedIssuesJql}), issues: opt_data.sprint.contents.completedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.completedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.completedIssuesEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesNotCompletedInCurrentSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues Not Completed"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.incompletedIssuesJql}), issues: opt_data.sprint.contents.issuesNotCompletedInCurrentSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesNotCompletedInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesNotCompletedEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesCompletedInAnotherSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues completed outside of this sprint"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.issuescompletedInAnotherSprintJql}), issues: opt_data.sprint.contents.issuesCompletedInAnotherSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintEstimateSum.text}) : '') + ((opt_data.sprint.contents.puntedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues Removed From Sprint"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.puntedIssuesJql}), issues: opt_data.sprint.contents.puntedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.puntedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.puntedIssuesEstimateSum.text}) : '') + '</table>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReport.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReport';
}


GH.tpl.sprintretrospective.renderCreateRetroDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h2>' + soy.$$escapeHtml("Retrospective time!") + '</h2><p>' + soy.$$escapeHtml("Create a retrospective page to review \x26 improve your iterations!") + '</p><form id="js-create-page-form" class="aui" target="_blank" action="' + soy.$$escapeHtml(opt_data.appLinkUrl) + '" method="post"><div class="buttons-container">' + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], text: "Create"}) + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], tagName: 'a', text: "Close", type: 'link'}) + '</div>' + GH.tpl.component.linkedpages.createPageInputs({entityTypeParam: 'sprintId', entityId: opt_data.entityId, applinkId: opt_data.jiraApplicationId, agileMode: 'report', fallbackUrl: opt_data.jiraUrl}) + '</form></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderCreateRetroDialog.soyTemplateName = 'GH.tpl.sprintretrospective.renderCreateRetroDialog';
}


GH.tpl.sprintretrospective.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderWarningMessage.soyTemplateName = 'GH.tpl.sprintretrospective.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartController.js' */
GH.VelocityChartController={};GH.VelocityChartController.id="velocityChart";GH.VelocityChartController.displayed=false;GH.VelocityChartController.rapidViewData={};GH.VelocityChartController.rapidViewConfig={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.VelocityChartController.analytics=new a("gh.report.velocityChart")})();GH.VelocityChartController.setRapidView=function(a){GH.VelocityChartController.rapidViewData=a||{}};GH.VelocityChartController.isApplicable=function(a){return a.sprintSupportEnabled};GH.VelocityChartController.getNormalizedFromInternal=function(){return{}};GH.VelocityChartController.toUrl=function(){return{}};GH.VelocityChartController.updateInternalFromNormalized=function(a){};GH.VelocityChartController.getNormalizedFromUrl=function(a){return{}};GH.VelocityChartController.init=function(){};GH.VelocityChartController.show=function(){GH.log("GH.VelocityChartController.show",GH.Logger.Contexts.ui);GH.VelocityChartController.displayed=true;if(!GH.VelocityChartController.rapidViewData){return}GH.RapidBoard.State.pushState();GH.VelocityChartController.renderChartView();GH.VelocityChartController.analytics.trigger("show")};GH.VelocityChartController.hide=function(){GH.log("GH.VelocityChartController.hide",GH.Logger.Contexts.ui);GH.VelocityChartController.displayed=false;GH.SprintRetrospectiveView.hide();AJS.$(GH).unbind("."+GH.VelocityChartController.id)};GH.VelocityChartController.renderChartView=function(){GH.VelocityChartController.initializeControls();GH.ChartView.getChartContentElem(true).html(GH.tpl.velocity.renderReportBody());GH.ChartView.showSpinner();GH.VelocityChartController.loadRapidViewConfig()};GH.VelocityChartController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide()};GH.VelocityChartController.loadRapidViewConfig=function(){var a=function(b){if(!GH.VelocityChartController.displayed){return}GH.VelocityChartController.rapidViewConfig=b;GH.VelocityChartController.loadReportData()};GH.RapidViewConfig.fetchConfiguration(GH.VelocityChartController.rapidViewData.id).done(a)};GH.VelocityChartController.loadReportData=function(){GH.Ajax.get({url:"/rapid/charts/velocity.json",data:{rapidViewId:GH.VelocityChartController.rapidViewConfig.id}},"rapidChartData.velocity").done(GH.VelocityChartController.processChartData).fail(GH.ChartView.hideSpinner)};GH.VelocityChartController.processChartData=function(b){if(!GH.VelocityChartController.displayed){return}var a;if(GH.VelocityChartController.rapidViewConfig.estimationStatistic.renderer=="duration"){a=GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration}else{a=GH.NumberFormat.format}_.each(b.velocityStatEntries,function(c){c.estimated.text=a(c.estimated.value);c.completed.text=a(c.completed.value)});GH.VelocityChartView.showVelocityChart(b)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartView.js' */
GH.VelocityChartView={};GH.VelocityChartView.showVelocityChart=function(g){var d=require("jira-agile/rapid/ui/chart/burndown-chart-controller");var h=require("jira-agile/rapid/ui/chart/chart");if(g.sprints.length===0){AJS.$("#ghx-chart-content").html(GH.tpl.velocity.renderNoSprintsMessage({}));GH.ChartView.hideSpinner();return}var f=[];var k=[];var l=[];var n=[];var b=g.sprints.reverse();var c=0;_.each(b,function(t,q){var s=g.velocityStatEntries[t.id];var r=s.estimated.value;var p=s.completed.value;c=Math.max(c,r,p);f[q]=[q,r];k[q]=[q,p];var o=GH.tpl.velocity.formatSprintName({sprintName:t.name});l[q]=[q,o];n[q]={sprint:{name:o,id:t.id},estimated:s.estimated.text,completed:s.completed.text}});var e=[{label:"Commitment",data:f},{label:"Completed",data:k}];GH.ChartView.hideSpinner();var j=GH.VelocityChartController.rapidViewConfig.estimationStatistic;var i=h.draw(d.id,GH.ChartView.getChartView(true),e,{series:{bars:{show:true,barWidth:0.2,align:"center",lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},colors:["#ccc","#14892c"],xaxis:{ticks:l,min:-0.5,max:6.5},yaxis:GH.FlotChartUtils.calculateYAxis(c,j),legend:{container:null,position:"ne"},multiplebars:true});var m=AJS.$(GH.tpl.velocity.renderVelocityChartTable({rows:n,rapidBoardId:GH.RapidViewConfig.currentData.id}));GH.FlotChartUtils.setAndAlignAxisLabels(undefined,j.name);var a=m.find("tbody").find("tr").find(":first").find("a");a.mousedown(function(o){if(o.which!==1){return}var p=parseInt(AJS.$(this).attr("data-value"),10);GH.BoardState.setPerViewValue("sprintRetrospective.selectedSprintId",p);GH.ReportController.selectChart(GH.SprintRetrospectiveController.id)});AJS.$("#ghx-chart-data").empty().append(m);GH.ChartView.hideSpinner()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChart.soy' */
// This file was automatically generated from VelocityChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.velocity.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.velocity == 'undefined') { GH.tpl.velocity = {}; }


GH.tpl.velocity.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderReportBody.soyTemplateName = 'GH.tpl.velocity.renderReportBody';
}


GH.tpl.velocity.renderNoSprintsMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("There are no available sprints for this board.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderNoSprintsMessage.soyTemplateName = 'GH.tpl.velocity.renderNoSprintsMessage';
}


GH.tpl.velocity.renderVelocityChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-auto"><thead><tr><th>' + soy.$$escapeHtml("Sprint") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Commitment") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Completed") + '</th></tr></thead><tbody>';
  var rowList16 = opt_data.rows;
  var rowListLen16 = rowList16.length;
  for (var rowIndex16 = 0; rowIndex16 < rowListLen16; rowIndex16++) {
    var rowData16 = rowList16[rowIndex16];
    output += '<tr><td><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidBoardId) + '&view=reporting&chart=sprintRetrospective&sprint=' + soy.$$escapeHtml(rowData16.sprint.id) + '" data-value=' + soy.$$escapeHtml(rowData16.sprint.id) + '>' + soy.$$escapeHtml(rowData16.sprint.name) + '</a></td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.estimated) + '</td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.completed) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderVelocityChartTable.soyTemplateName = 'GH.tpl.velocity.renderVelocityChartTable';
}


GH.tpl.velocity.formatSprintName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.sprintName);
};
if (goog.DEBUG) {
  GH.tpl.velocity.formatSprintName.soyTemplateName = 'GH.tpl.velocity.formatSprintName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangesReportModel.js' */
define("jira-agile/rapid/ui/chart/changes-report-model",["require"],function(d){var j=d("underscore");var f=d("jira-agile/rapid/ui/chart/burndown-rate");var k=d("jira-agile/rapid/ui/chart/burndown-table-producer");var b=d("jira-agile/rapid/ui/chart/burndown-timeline-producer");var i=d("jira-agile/rapid/ui/chart/chart-colors");var g=GH.FlotChartUtils;var a=GH.ChartUtils;var c=GH.TimeFormat;var e=GH.NumberFormat;var h=function(){};h.prototype.setParams=function(l){this.statistic=l.statistic;this.issueAddedText=l.issueAddedText;this.issueRemovedText=l.issueRemovedText;this.startText=l.startText};h.prototype.setRawData=function(l){this.data=l;this.processData()};h.prototype.processData=function(){this.ensureIssuesHaveEstimateText();this.makeStatisticsValuesRenderable()};h.prototype.setRawChartData=function(l){this.chartData=l;this.processChartData()};h.prototype.getStartTime=function(){return this.chartData.startTime};h.prototype.processChartData=function(){if(!this.chartData.endTime){this.chartData.endTime=this.chartData.now}f.setRateData(this.chartData.workRateData);var l=b.ProgressConsumer;this.timelineData=b.calculateTimelineData(this.chartData,l);this.calculateSeries()};h.prototype.hasIssues=function(){var l=this.getReportContent();if(l){return l.completedIssues.length>0||l.incompleteEstimatedIssues.length>0||l.incompleteUnestimatedIssues.length>0}else{if(this.chartData){return !j.isEmpty(this.chartData.changes)}}return false};h.prototype.getReportContent=function(){if(this.data){return this.data.contents}};h.prototype.getRenderer=function(){return this.statistic.renderer};h.prototype.isIssueCountStatistic=function(){return this.statistic.typeId==="issueCount"};h.prototype.isTimeTracking=function(){return this.statistic.fieldId==="timeSpent"};h.prototype.shouldAddToSeries=function(m,l){var n=false;j.each(l,function(o){n=n||o.deltas&&o.deltas[m.id]!==0});return n};h.prototype.getAllSeriesDefinitions=function(){var l=this.statistic.name;return{totalEstimate:{id:"totalEstimate",label:AJS.format("Total {0}",l),renderer:this.getRenderer(),statisticName:l},completedEstimate:{id:"completedEstimate",label:AJS.format("Completed {0}",l),renderer:this.getRenderer(),statisticName:l},issueCount:{id:"issueCount",label:"Number of issues",renderer:"number",statisticName:"Issue Count"},unestimatedIssueCount:{id:"unestimatedIssueCount",label:"Number of unestimated issues",renderer:"number",statisticName:"Issue Count"}}};h.prototype.calculateSeries=function(){var l=[];var m=this.getAllSeriesDefinitions();if(this.isIssueCountStatistic()){l.push(j.defaults({color:i.scope,yaxis:1,fill:0.3,lineWidth:1},m.totalEstimate));l.push(j.defaults({color:i.completed,yaxis:1,fill:0.2,lineWidth:1},m.completedEstimate))}else{l.push(j.defaults({color:i.scope,yaxis:1,fill:0.3,lineWidth:1},m.totalEstimate));l.push(j.defaults({color:i.completed,yaxis:1,fill:0.2,lineWidth:1},m.completedEstimate));l.push(j.defaults({color:i.issueCount,yaxis:2,lineWidth:1},m.issueCount));l.push(j.defaults({color:i.unestimated,yaxis:2,lineWidth:1},m.unestimatedIssueCount))}this.calculateSeriesFromIds(l)};h.prototype.calculateSeriesFromIds=function(m){var r=this.timelineData;var q=(r)?r.timeline:undefined;var o=this.series=[];if(j.isEmpty(q)){return}var l={};var n={};j.each(m,function(t){l[t.id]=[];n[t.id]=[]});j.each(q,function(t){j.each(m,function(u){if(this.shouldAddToSeries(u,t.issues)){if(t.deltas&&j.isNumber(t.deltas[u.id])&&t.deltas[u.id]!=0){l[u.id].push([t.time,t.values[u.id]-t.deltas[u.id]]);n[u.id].push({})}l[u.id].push([t.time,t.values[u.id]]);n[u.id].push(t)}},this)},this);var p=j.last(q);if(!r.completeTime||r.completeTime>r.now){j.each(m,function(t){l[t.id].push([Math.max(r.startTime,r.now),p.values[t.id]])})}else{j.each(m,function(t){l[t.id].push([r.completeTime,p.values[t.id]])})}if(this.isTimeTracking()){o.push({id:"timeSpent",data:l.timeSpent,color:i.timeSpent,label:"Time Spent"})}j.each(m,function(t){o.push({id:t.id,data:l[t.id],color:t.color,label:t.label,yaxis:t.yaxis,lines:{fill:t.fill,lineWidth:t.lineWidth,show:true}})});o.push({id:"markings",color:i.nonWorkingDays,data:[],label:"Non-Working Days"});var s=r.maxValues.totalEstimate;this.yAxisData=g.calculateYAxis(s,this.statistic);this.yAxisData.min=0;this.yAxisData.max=s;this.series=o;this.seriesData=n};h.prototype.getXAxisStart=function(){var l=0.02;return this.chartData.startTime-((this.chartData.endTime-this.chartData.startTime)*l)};h.prototype.getYAxes=function(){var l=[];l.push(this.yAxisData);if(!this.isIssueCountStatistic()){var n=this.timelineData.maxValues.issueCount;var m=1;if(n>15){m=Math.ceil(n/8)}l.push({position:"right",min:0,tickFormatter:function(o,p){return o.toFixed(0)},tickSize:m})}return l};h.prototype.getDataBySeries=function(l){return this.seriesData&&this.seriesData[l]};h.prototype.getTooltipData=function(n,m){var l={};if(m.initial){if(m.initial){l.initial=true;l.event=this.getEpicStartChangeEvent()}l.issueCount=j.size(m.issues);l.statisticName=this.getSeriesStatisticName(n);l.statisticValue=a.renderStatisticText(m.values[n],false,this.getSeriesRenderer(n))}else{l.changes=[];j.each(m.issues,function(o){var p={};p.key=o.key;p.statisticName=this.getSeriesStatisticName(n);p.statisticDelta=a.renderStatisticText(o.deltas[n],false,this.getSeriesRenderer(n));p.event=this.getChangeEvent(o);l.changes.push(p)},this)}l.dateText=a.renderUTCMillisAsDate(m.time);return l};h.prototype.getSeriesRenderer=function(m){var l=this.getAllSeriesDefinitions();return l[m].renderer};h.prototype.getSeriesStatisticName=function(m){var l=this.getAllSeriesDefinitions();return l[m].statisticName};h.prototype.getDataBySeriesAtIndex=function(n,l){var m=this.getDataBySeries(n);if(m){return m[l]}};h.prototype.getChangeEvent=function(l){var n="Burnup";var p=this.getScopeOrColumnChangeEvent(l,n);if(p){return p}if(l.estimateChange){var o=l.values.oldEstimateFieldValue;var m=l.values.estimateFieldValue;var r=!j.isUndefined(o);var q=!j.isUndefined(m);if(r&&q){return{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",this.renderStatisticText(o),this.renderStatisticText(m))}}else{if(r){return{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",this.renderStatisticText(o))}}else{return{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",this.renderStatisticText(m))}}}}return{type:"unknown",detail:"unknown change"}};h.prototype.getScopeOrColumnChangeEvent=function(l,m){if(l.scopeChange){if(l.inScope){return{type:"Scope change",detail:this.issueAddedText}}else{return{type:"Scope change",detail:this.issueRemovedText}}}return k.getColumnChangeEvent(l,m)};h.prototype.getStartChangeEvent=function(){return{type:this.startText,detail:""}};h.prototype.getSeries=function(){return this.series};h.prototype.getXAxisEnd=function(){return undefined};h.prototype.ensureIssuesHaveEstimateText=function(){var m=this.getReportContent();var n=this._getValueRenderer();function l(o){if(j.isUndefined(o.estimateStatistic)||j.isUndefined(o.estimateStatistic.statFieldValue.value)){o.estimateStatistic={statFieldValue:{text:"-"}}}else{o.estimateStatistic.statFieldValue.text=n(o.estimateStatistic.statFieldValue.value)}return o}m.completedIssues=j.map(this.data.contents.completedIssues,l);m.incompleteUnestimatedIssues=j.map(this.data.contents.incompleteUnestimatedIssues,l);m.incompleteEstimatedIssues=j.map(this.data.contents.incompleteEstimatedIssues,l)};h.prototype._getValueRenderer=function(){var l;if(this.getStatistic().renderer==="duration"){l=c.formatShortDurationForTimeTrackingConfiguration}else{l=e.format}return l};h.prototype.makeStatisticsValuesRenderable=function(){var l=this.getReportContent();var m=this._getValueRenderer();l.completedIssuesEstimateSum.text=m(l.completedIssuesEstimateSum.value);l.incompletedIssuesEstimateSum.text=m(l.incompletedIssuesEstimateSum.value)};h.prototype.getJql=function(){return this.jql};h.prototype.getDoneStatuses=function(){return this.data.doneStatuses};h.prototype.getNotDoneStatuses=function(){return this.data.notDoneStatuses};h.prototype.renderStatisticText=function(m,l){return a.renderStatisticText(m,l,this.getStatistic().renderer)};return h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/NonWorkingDaysUtils.js' */
define("jira-agile/rapid/ui/chart/non-working-days-util",["require"],function(b){var a=b("underscore");var c=b("jira-agile/rapid/ui/chart/burndown-rate");var d={};d.transformSeriesExcludingNonWorkingDays=function(h,e,j){if(a.isUndefined(j)){j=a.pluck(h,"id")}var g=function(k,l){if(k.xValue>=l.start){if(l.start<=e&&l.end>=e){if(k.xValue>=l.end){return l.end-e}}else{if(k.xValue<l.end){return k.xValue-l.moveTo}else{return l.end-l.moveTo}}}return 0};var i=a.map(h,function(k){var l=a.clone(k);l.data=a.map(k.data,function(m){return{xValue:m[0],yValue:m[1],xTransform:0}});return l});var f=c.getAdjustedNonWorkingDays(e);a.each(f,function(k){a.each(i,function(l){l.data=a.map(l.data,function(m){return{xValue:m.xValue,yValue:m.yValue,xTransform:m.xTransform+g(m,k)}})})});return a.map(i,function(k){var l=a.clone(k);if(a.indexOf(j,k.id)>-1){l.data=a.map(k.data,function(m){return[m.xValue-m.xTransform,m.yValue]})}else{l.data=a.map(k.data,function(m){return[m.xValue,m.yValue]})}return l})};d.transformDateIfInNonWorkingDays=function(h,f){if(h<f){return new Date(h)}var g=c.getAdjustedNonWorkingDays(f);var e=h;a.each(g,function(i){if(e>=i.start){e+=(i.end-i.moveTo)}});return new Date(e)};d.deductNonWorkingDays=function(h,f){var g=c.getAdjustedNonWorkingDays(f);var j=a.filter(g,function(m){return f>=m.start&&f<m.end});var k=a.filter(g,function(m){return h>=m.start&&h<m.end});var i=h;if(k.length>0){i=k[0].start}var e=f;if(j.length>0){e=j[0].end;i-=(e-f)}var l=a.filter(g,function(m){return m.end>e&&m.start<i});a.each(l,function(m){i=i-(m.end-m.start)});return i};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportController.js' */
GH.EpicReportController={};GH.EpicReportController.id="epicReport";(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.EpicReportController.analytics=new a("gh.report.epicReport")})();GH.EpicReportController.init=function(){var a=require("jira-agile/rapid/ui/component/chart-picker");GH.EpicReportController.epicPicker=new a("epicReport.selectedEpicId","There are currently no epics on this board");AJS.$(GH.EpicReportController.epicPicker).bind("selectedItemChanged",GH.EpicReportController.handleEpicChanged)};GH.EpicReportController.setRapidView=function(a){GH.EpicReportController.rapidViewData=a||{}};GH.EpicReportController.isApplicable=function(a){return a.sprintSupportEnabled};GH.EpicReportController.getNormalizedFromInternal=function(){return{epic:GH.EpicReportController.getSelectedEpicKey()||null}};GH.EpicReportController.toUrl=function(a){if(_.isNull(a.epic)){return{}}return{epic:a.epic}};GH.EpicReportController.updateInternalFromNormalized=function(a){GH.EpicReportController.setSelectedEpicFromUrlState(a.epic)};GH.EpicReportController.getNormalizedFromUrl=function(a){return{epic:GH.RapidBoard.UrlState.normalizeStringParam(a.epic,null)}};GH.EpicReportController.hide=function(){GH.log("GH.EpicReportController.hide",GH.Logger.Contexts.ui);GH.EpicReportController.displayed=false};GH.EpicReportController.show=function(){var a=require("jira-agile/rapid/ui/chart/chart-controller");GH.log("GH.EpicReportController.show",GH.Logger.Contexts.ui);GH.EpicReportController.displayed=true;if(!GH.EpicReportController.rapidViewData){return}GH.EpicReportView.renderChartLoading();a.loadRapidViewConfig(GH.EpicReportController,GH.EpicReportController.loadEpicsList);GH.EpicReportController.analytics.trigger("show")};GH.EpicReportController.loadEpicsList=function(){var a={rapidViewId:GH.EpicReportController.rapidViewData.id};GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:a},"epicListForEpicReport").done(GH.EpicReportController.processEpicData).fail(GH.ChartView.hideSpinner)};GH.EpicReportController.processEpicData=function(a){if(!GH.EpicReportController.displayed){return}GH.EpicReportController.epicsData=a;var b=_.map(a.epics,function(c){return{id:c.key,name:GH.EpicConfig.getEpicNameString(c.epicLabel,c.key)}});GH.EpicReportController.epicPicker.setItems(b);GH.EpicReportController.epicPicker.setDefaultItem(_.first(b));GH.EpicReportView.renderEpicPicker();GH.EpicReportView.setUserTimeZoneLabel(GH.TimeFormat.userTimeZoneLabel);if(GH.EpicReportController.epicPicker.getSelectedItem()){GH.EpicReportController.loadReportData()}else{GH.ChartView.hideSpinner()}GH.RapidBoard.State.replaceState()};GH.EpicReportController.loadReportData=function(){GH.EpicReport.createModel();var c=GH.EpicReportController.epicPicker.getSelectedItem().id;var d={rapidViewId:GH.EpicReportController.rapidViewData.id,epicKey:c};var a=GH.Ajax.get({url:"/rapid/charts/epicreport",data:d},"epicReportData"+c).done(GH.EpicReportController.processReportData);var b=GH.Ajax.get({url:"/rapid/charts/epicprogresschart",data:d},"epicprogresschart"+c).done(GH.EpicReportController.processChartData);AJS.$.when(a,b).then(GH.EpicReportController.performDataConsistencyCheck,GH.EpicReportController.failedToLoad)};GH.EpicReportController.failedToLoad=function(){GH.ChartView.hideSpinner();GH.EpicReportController.epicPicker.removeSelectedItemAndRevert(GH.ChartView.getChartSelector(true))};GH.EpicReportController.processReportData=function(b){if(!GH.EpicReportController.displayed){return}var a=_.findWhere(GH.EpicReportController.epicsData.epics,{id:b.epic.id});if(a){b.epic.linkedPagesCount=a.linkedPagesCount;_.extend(b,_.pick(GH.EpicReportController.epicsData,"canEditEpics","supportsPages"))}GH.EpicReport.model.setRawData(b);GH.EpicReportView.renderReport()};GH.EpicReportController.processChartData=function(a){if(!GH.EpicReportController.displayed){return}GH.EpicReport.model.setRawEpicChartData(a);GH.EpicReportView.renderChart()};GH.EpicReportController.performDataConsistencyCheck=function(){if(!GH.EpicReportController.displayed){return}var a=GH.EpicReport.model.getIssuesWithStatisticFieldMismatch();if(!_.isEmpty(a)){GH.EpicReportView.renderStatisticMismatchWarning(a)}};GH.EpicReportController.handleEpicChanged=function(){if(!GH.EpicReportController.displayed){return}GH.log("GH.EpicReportController.handleEpicChanged",GH.Logger.Contexts.event);GH.RapidBoard.State.pushState();GH.EpicReportController.loadReportData()};GH.EpicReportController.getSelectedEpicKey=function(){var a=GH.EpicReportController.epicPicker.getSelectedItem();if(a){return a.id}};GH.EpicReportController.setSelectedEpicFromUrlState=function(a){GH.EpicReportController.epicPicker.storeSelectedItemId(a)};GH.EpicReportController.setPointsForChart=function(d,c){var e=c.id;var b=GH.EpicReport.model.getDataBySeries(e);if(!b){return}var a=GH.FlotChartUtils.gatherPoints(c,b);d.realPointsPerSeries[e]=a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportView.js' */
GH.EpicReportView={};GH.EpicReportView.setUserTimeZoneLabel=function(a){GH.EpicReportView.userTimeZoneLabel=a};GH.EpicReportView.renderChartLoading=function(){GH.ChartView.getChartContentElem(true).html(GH.tpl.epicreport.renderReportBody());GH.ChartView.showSpinner()};GH.EpicReportView.toggleChartVisibility=function(){GH.ChartView.hideSpinner();AJS.$("#ghx-chart-mismatch").empty();if(GH.EpicReport.model.hasIssues()){AJS.$("#ghx-epic-report-no-issues").hide();AJS.$("#ghx-report-content").show()}else{AJS.$("#ghx-report-content").hide();AJS.$("#ghx-epic-report-no-issues").show()}};GH.EpicReportView.renderReport=function(){GH.EpicReportView.toggleChartVisibility();GH.EpicReportView.renderMeta();if(GH.EpicReport.model.hasIssues()){GH.EpicReportView.renderIssuesReport();GH.EpicReportView.renderSummary()}};GH.EpicReportView.renderEpicPicker=function(){GH.EpicReportController.epicPicker.render(GH.ChartView.getChartSelector(true))};GH.EpicReportView.renderIssuesReport=function(){var b=GH.EpicReport.model.getReportContent();var c=GH.EpicReport.model.hasIssues();var a=AJS.$("#ghx-report-content .ghx-epic-report");a.empty().html(GH.tpl.epicreport.renderEpicReport({content:b,jql:GH.EpicReport.model.getJql(),estimationStatistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,hasIssues:c}));a.find(".issue-table-title-tooltip").tooltip()};GH.EpicReportView.renderSummary=function(){AJS.$("#ghx-report-content .ghx-epic-summary").empty().html(GH.tpl.epicreport.renderEpicSummary({epic:GH.EpicReport.model.getEpicSummary(),issuesJql:GH.EpicReport.model.getJql().allIssues}))};GH.EpicReportView.renderMeta=function(){var a=GH.EpicReport.model.getEpic();AJS.$("#ghx-epic-meta").empty().append(GH.tpl.epicreport.renderEpicReportHeader({epic:a,showPages:GH.EpicReport.model.supportsPages()})).show();GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,GH.LinkedPagesController.REPORT,a.id,AJS.$("#ghx-epic-meta .js-view-entity-pages"))};GH.EpicReportView.renderStatisticMismatchWarning=function(b){var c=_.pluck(b,"key");var a=GH.tpl.epicreport.renderStatisticValueMismatchMessage({statisticName:GH.EpicReport.model.getStatistic().name,keys:c.join(", ")});AJS.messages.warning("#ghx-chart-mismatch",{body:a,closeable:true,shadowed:false})};GH.EpicReportView.renderChart=function(){var a=require("jira-agile/rapid/ui/chart/chart");GH.EpicReportView.toggleChartVisibility();if(GH.EpicReport.model.hasIssues()){var e=GH.ChartView.getChartView(true);var b=GH.EpicReport.model.getSeries();var d=a.draw(GH.EpicReportController.id,e,b,GH.ChartUtils.getChartOptions(GH.EpicReport.model));var c=false;if(GH.EpicReport.model.getYAxes().length>1){c="Issue Count"}GH.FlotChartUtils.setAndAlignAxisLabels(AJS.format("Time ({0})",GH.EpicReportView.userTimeZoneLabel),GH.EpicReport.model.getStatistic().name,c);d.hooks.drawSeries.push(GH.EpicReportView.gatherPoints);d.hooks.draw.push(GH.FlotChartUtils.deferredRenderPoints);GH.EpicReportView.bindEvents(e)}};GH.EpicReportView.handlePlotHover=function(d,f,c){if(c){var e=c.series.id;var b=c.dataIndex;var a=GH.EpicReport.model.getDataBySeriesAtIndex(e,b);if(!_.isEmpty(a)){if(GH.EpicReportView.previousPlotHoverPoint!=c.dataIndex){GH.EpicReportView.previousPlotHoverPoint=c.dataIndex;AJS.$("#ghx-tooltip").remove();GH.EpicReportView.showChartTooltip(c,e,a,c.datapoint[0]);if(!AJS.$("#ghx-tooltip").hasClass("ghx-has-warnings")){GH.ChartView.getChartView().addClass("ghx-clickable")}}return}}AJS.$("#ghx-tooltip").remove();GH.EpicReportView.previousPlotHoverPoint=null;GH.ChartView.getChartView().removeClass("ghx-clickable")};GH.EpicReportView.showChartTooltip=function(b,e,a){if(!a){return}var d=GH.EpicReport.model.getTooltipData(e,a);var c=new GH.ChartTooltip(b,d);c.render()};GH.EpicReportView.previousPlotHoverPoint=undefined;GH.EpicReportView.gatherPoints=function(c,a,b){if(!c.mouseEntered){return}GH.EpicReportController.setPointsForChart(c,b)};GH.EpicReportView.bindEvents=function(a){a.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",GH.FlotChartUtils.handleMouseOverStateChange);a.unbind("plothover plotclick");a.bind("plothover",GH.EpicReportView.handlePlotHover);a.bind("plotclick",GH.FlotChartUtils.handlePlotClick)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportModel.js' */
GH.EpicReport={};GH.EpicReport.createModel=function(){GH.EpicReport.model=new GH.EpicReportModel();GH.EpicReport.model.setParams({statistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,issueAddedText:"Issue added to epic",issueRemovedText:"Issue removed from epic",startText:"Epic Created"})};GH.EpicReportModel=function(){};(function(){var a=require("jira-agile/rapid/ui/chart/changes-report-model");GH.EpicReportModel.prototype=new a()})();GH.EpicReportModel.prototype.setRawEpicChartData=function(a){a.startTime=a.epicCreationTime;this.setRawChartData(a)};GH.EpicReportModel.prototype.setRawData=function(a){this.data=a;this.processData();this.generateJql();this.generateSummary()};GH.EpicReportModel.prototype.generateSummary=function(){var a={},b={},c=this.getReportContent();function d(f){return _.reduce(f,function(h,g){var i=g.estimateStatistic.statFieldValue.value;if(_.isUndefined(i)){i=0}return h+i},0)}b.done=c.completedIssues.length;b.notEstimated=c.incompleteUnestimatedIssues.length;b.totalIssueCount=b.done+b.notEstimated+c.incompleteEstimatedIssues.length;a.epicStats=b;a.estimateDone=d(c.completedIssues);a.estimateTotal=a.estimateDone+d(c.incompleteEstimatedIssues);a.estimateStatisticName=this.getStatistic().name;a.isIssueCountStatistic=(this.isIssueCountStatistic());a.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,a.estimateDone);a.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,a.estimateTotal);var e=this.getEpic();a.epicName=GH.EpicConfig.getEpicNameString(e.label,e.key);this.data.epicSummary=a};GH.EpicReportModel.prototype.generateJql=function(){var f=this.getStatistic();this.jql={};var a=GH.ChartUtils.createEpicJql(this.data.epic);var b=a+" AND "+GH.ChartUtils.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic()){this.jql.incompleteEstimatedIssues=b}else{var e=f.fieldId;var d=/^customfield_(\d+)/.exec(e),c=d&&d.length>0;if(c){e="cf["+d[1]+"]"}this.jql.incompleteUnestimatedIssues=b+" AND "+e+" IS EMPTY";if(c){if(this.data.contents.incompleteEstimatedIssues.length>0){this.jql.incompleteEstimatedIssues=GH.ChartUtils.createIssueJql(this.data.contents.incompleteEstimatedIssues)}}else{this.jql.incompleteEstimatedIssues=b+" AND "+e+" IS NOT EMPTY"}}this.jql.completedIssues=a+" AND "+GH.ChartUtils.createStatusJql(this.getDoneStatuses());this.jql.allIssues=a};GH.EpicReportModel.prototype.getEpic=function(){return this.data.epic};GH.EpicReportModel.prototype.getEpicSummary=function(){return this.data.epicSummary};GH.EpicReportModel.prototype.getStatistic=function(){return GH.EpicReportController.rapidViewConfig.estimationStatistic};GH.EpicReportModel.prototype.canUserEditEpics=function(){return !!this.data.canEditEpics};GH.EpicReportModel.prototype.supportsPages=function(){return !!this.data.supportsPages};GH.EpicReportModel.prototype.getIssuesWithStatisticFieldMismatch=function(){if(this.isIssueCountStatistic()){return[]}var c=this.timelineData.finalIssueStates;var b=this.data.contents;var d=_.flatten([b.completedIssues,b.incompleteEstimatedIssues,b.incompleteUnestimatedIssues]);var a=[];_.each(d,function(f){var e=c[f.key];if(e){if(f.estimateStatistic&&f.estimateStatistic.statFieldValue){if(f.estimateStatistic.statFieldValue.value!=e.values.estimateFieldValue){a.push({key:e.key,reportValue:f.estimateStatistic.statFieldValue.value,chartValue:e.values.estimateFieldValue,reportIssue:f,chartIssue:e})}}}});return a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReport.soy' */
// This file was automatically generated from EpicReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epicreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epicreport == 'undefined') { GH.tpl.epicreport = {}; }


GH.tpl.epicreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-chart-controls"></div><div id="ghx-epic-meta" class="ghx-epic-meta"></div><div id="ghx-epic-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("This epic does not contain any issues.") + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-epic-summary-wrap"><div id="ghx-chart-legend" class="ghx-epic-chart-legend"></div><div class="ghx-epic-summary"></div></div><div id="ghx-chart-wrap" class="ghx-epic-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-epic-report ghx-margin-top"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderReportBody.soyTemplateName = 'GH.tpl.epicreport.renderReportBody';
}


GH.tpl.epicreport.renderStatisticValueMismatchMessage = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(AJS.format("Some issues have {0} even though their current configuration does not allow a value to be set.",opt_data.statisticName)) + ' ' + soy.$$escapeHtml("As a result the numbers in the chart will be different to the summary and status report.") + '<br>' + soy.$$escapeHtml(AJS.format("Affected issues are: {0}",opt_data.keys));
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderStatisticValueMismatchMessage.soyTemplateName = 'GH.tpl.epicreport.renderStatisticValueMismatchMessage';
}


GH.tpl.epicreport.renderEpicReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Status Report") + '</h3><div class="ghx-epic-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Issues"), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: "Incomplete Unestimated Issues", titleTooltip: "\x22Unestimated issues\x22 also includes issues that cannot be estimated due to their configuration, e.g. no Story Points field.", issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReport.soyTemplateName = 'GH.tpl.epicreport.renderEpicReport';
}


GH.tpl.epicreport.renderEpicSummary = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml("Summary") + '</h4><h5>' + soy.$$escapeHtml("Issues") + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Total") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.totalIssueCount) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Completed") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.done) + '</div></div>' + ((! opt_data.epic.isIssueCountStatistic) ? '<div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.notEstimated) + '</div></div><h5 id="ghx-stat-name">' + soy.$$escapeHtml(opt_data.epic.estimateStatisticName) + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Total") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateTotal) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Done") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateDone) + '</div></div>' : '') + '<div class="ghx-margin-top">';
  var issueNavLink__soy82 = '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.issuesJql});
  output += '<a href="' + soy.$$escapeHtml(issueNavLink__soy82) + '">' + soy.$$escapeHtml(AJS.format("View {0} in Issue Navigator",opt_data.epic.epicName)) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicSummary.soyTemplateName = 'GH.tpl.epicreport.renderEpicSummary';
}


GH.tpl.epicreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.epicreport.issueNavLink.soyTemplateName = 'GH.tpl.epicreport.issueNavLink';
}


GH.tpl.epicreport.renderEpicReportHeader = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-inline-blocks"><div class="aui-item"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.epic.key) + '">' + soy.$$escapeHtml(opt_data.epic.key) + '</a> ' + soy.$$escapeHtml(opt_data.epic.summary) + '</div>' + ((opt_data.showPages) ? '<div class="aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.epic.linkedPagesCount, title: "Create and view pages linked to this epic"}) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReportHeader.soyTemplateName = 'GH.tpl.epicreport.renderEpicReportHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportController.js' */
define("jira-agile/rapid/ui/chart/version-report-controller",["require"],function(f){var c=f("jquery");var t=f("underscore");var b=f("jira-agile/rapid/analytics-tracker");var s=f("jira-agile/rapid/ui/chart/burndown-rate");var k=f("jira-agile/rapid/ui/chart/chart-controller");var n=f("jira-agile/rapid/ui/component/chart-picker");var m=f("jira-agile/rapid/ui/chart/chart-view");var a=f("jira-agile/rapid/ui/chart/version-report");var j=f("jira-agile/rapid/ui/chart/version-report-view");var p=GH.Ajax;var h=GH.ChartUtils;var q=GH.FlotChartUtils;var d=GH.log;var r=GH.Logger;var e=GH.RapidBoard.State;var o=GH.RapidBoard.UrlState;var i=GH.TimeFormat;var g=GH.VersionsModel;var l={};l.nonWorkingDaysShown=true;l.id="versionReport";l.analytics=new b("gh.report.versionReport");l.init=function(){l.versionPicker=new n("versionReport.selectedVersionId","There are currently no versions on this board.")};l.isApplicable=function(u){return u.sprintSupportEnabled};l.setRapidView=function(u){l.rapidViewData=u||{}};l.getRapidView=function(){return l.rapidViewData};l.getNormalizedFromInternal=function(){return{version:l.getSelectedVersionId()||null}};l.toUrl=function(u){if(!t.isNull(u.version)){return{version:u.version}}return{}};l.updateInternalFromNormalized=function(u){l.setSelectedVersionFromState(u.version)};l.getNormalizedFromUrl=function(u){return{version:o.normalizeNumberParam(u.version,null)}};l.getSelectedVersionId=function(){var u=l.versionPicker.getSelectedItem();if(u){return u.id}var v=l.versionPicker.getStoredSelectedItemId();if(v!=-1){return v}return null};l.show=function(){d("VersionReportController.show",r.Contexts.ui);l.displayed=true;if(!l.rapidViewData){return}j.renderChartLoading();k.loadRapidViewConfig(l,l.loadVersionsList);l.analytics.trigger("show")};l.hide=function(){d("VersionReportController.hide",r.Contexts.ui);l.displayed=false};l.loadVersionsList=function(){var u={rapidViewId:l.rapidViewData.id};p.get({url:"/xboard/plan/backlog/versions.json",data:u},"versionsListForReport").done(l.processVersionData).fail(m.hideSpinner)};l.processVersionData=function(w){if(!l.displayed){return}var v=l.versionModel=new g(w.projects);v.updateRawData(w.versionData);var u=t.map(v.getAllVersions(),function(x){return{id:x.id,name:(x.project)?x.project.key+": "+x.name:x.name}});u.reverse();l.versionPicker.setItems(u);l.versionPicker.setDefaultItem(t.first(u));j.setUserTimeZoneLabel(i.userTimeZoneLabel);j.renderVersionPicker();if(l.versionPicker.getSelectedItem()){l.loadReportData()}else{m.hideSpinner()}l.nonWorkingDaysShown=e.getNonWorkingDaysShown("version");e.replaceState()};l.loadReportData=function(){a.createModel(l.rapidViewConfig.estimationStatistic);var w={rapidViewId:l.getRapidView().id,versionId:l.getSelectedVersionId()};var v=p.get({url:"/rapid/charts/versionprogresschart",data:w},"versionChartData").done(l.processChartData);var u=p.get({url:"/rapid/charts/versionreport",data:w},"versionReportData").done(l.processReportData);c.when(v,u).then(l.calculatePredictions,l.failedToLoad)};l.failedToLoad=function(){m.hideSpinner();l.versionPicker.removeSelectedItemAndRevert(m.getChartSelector(true))};l.processChartData=function(u){if(!l.displayed){return}a.model.setRawVersionChartData(u)};l.calculatePredictions=function(){var u=a.model.getFurthestDateForNonWorkingDaysData();if(u<Infinity&&u>a.model.getVersionStartDate()){var w=u;var v=new Date().valueOf()+(h.oneDayInMillis*90);if(u<=v){w=v}p.get({url:"/rapidviewconfig/workingdays/rates",data:{rapidViewId:l.rapidViewData.id,startDate:a.model.getVersionStartDate()-(h.oneDayInMillis*3),endDate:w}},"workingdaysrates").done(function(x){s.setRateData(x);l.renderChart()})}else{l.renderChart()}};l.renderChart=function(){if(!l.displayed){return}j.renderChart();j.renderIssuesLink();j.renderMeta()};l.setSelectedVersionFromState=function(u){l.versionPicker.storeSelectedItemId(u)};l.setPointsForChart=function(x,w){var y=w.id;var v=a.model.getDataBySeries(y);if(!v){return}var u=q.gatherPoints(w,v);x.realPointsPerSeries[y]=u};l.handleVersionChanged=function(u){if(!l.displayed){return}d("VersionReportController.handleVersionChanged",r.Contexts.event);e.pushState();l.loadReportData()};l.processReportData=function(u){if(!l.displayed){return}a.model.setRawData(u);j.renderReport()};return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportView.js' */
define("jira-agile/rapid/ui/chart/version-report-view",["require"],function(e){var h=e("jquery");var o=e("underscore");var q=e("jira-agile/rapid/ui/chart/change-event");var i=e("jira-agile/rapid/ui/chart/chart");var n=e("jira-agile/rapid/ui/chart/chart-colors");var l=e("jira-agile/rapid/ui/chart/chart-controller");var p=e("jira-agile/rapid/ui/chart/chart-view");var m=e("jira-agile/rapid/global-events");var d=e("jira-agile/rapid/ui/chart/non-working-days-util");var k=e("jira-agile/rapid/ui/chart/version-report");var c;var a=GH.ChartTooltip;var b=GH.ChartUtils;var g=GH.FlotChartUtils;var j=GH.tpl;m.on("pre-initialization",function(){c=e("jira-agile/rapid/ui/chart/version-report-controller")});var f={};f.unmodifiedSeries=undefined;f.series=undefined;f.setUserTimeZoneLabel=function(r){f.userTimeZoneLabel=r};f.renderChartLoading=function(){p.getChartContentElem(true).html(j.versionreport.renderReportBody());h(c.versionPicker).bind("selectedItemChanged",c.handleVersionChanged);p.showSpinner()};f.renderVersionPicker=function(){c.versionPicker.render(p.getChartSelector(true))};f.renderChart=function(){f.toggleChartVisibility(true);if(k.model.hasIssues()&&!k.model.notStarted()){var w=p.getChartView(true);var u=k.model.getVersionSeries();if(f.wallboardMode){var r=o.findWhere(u,{id:"markings"});r.color=n.nonWorkingDaysWallboard}var E=f.getChartOptions();f.unmodifiedSeries=u;f.series=u;if(!c.nonWorkingDaysShown){var s=k.model.getXAxisStart();u=d.transformSeriesExcludingNonWorkingDays(u,s);f.series=u;if(o.findWhere(u,{id:"prediction"})){var z=o.findWhere(u,{id:"pessimistic"});var D=o.findWhere(u,{id:"prediction"});var C=o.first(z.data);var B=o.last(z.data);var v=o.last(D.data);var t=b.calculateYProjection(C,B,v);o.findWhere(u,{id:"pessimisticFillerBottom"}).data[0][1]=t}if(o.findWhere(u,{id:"scope"})){var A=o.last(o.findWhere(u,{id:"scope"}).data);A[0]=E.xaxis.max}E.xaxis.tickFormatter=function(F,H){var G=d.transformDateIfInNonWorkingDays(F,s);var I="%b %d";if(H.tickSize[1]==="hour"){I+=" %h:%M"}else{if(H.tickSize[1]==="minute"){I=" %h:%M"}else{if(H.tickSize[1]==="second"){I=" %h:%M:%S"}}}return h.plot.formatDate(G,I)}}var y=i.draw(c.id,w,u,E);var x=false;if(k.model.getYAxes().length>1){x="Percent"}f.renderLabelsForNowAndRelease(y);f.setLegendOpacity();g.setAndAlignAxisLabels(AJS.format("Time ({0})",f.userTimeZoneLabel),k.model.getStatistic().name,x);y.hooks.drawSeries.push(f.gatherPoints);y.hooks.draw.push(g.deferredRenderPoints);y.hooks.draw.push(f.renderLabelsForNowAndRelease);y.hooks.draw.push(f.setLegendOpacity);f.bindEvents(w)}};f.getChartOptions=function(){var s=k.model;var r=b.getChartOptions(s);if(!c.nonWorkingDaysShown){r.xaxis.max=d.deductNonWorkingDays(r.xaxis.max,r.xaxis.min)}if(f.gadgetMode){r.legend.position="nw";r.legend.container=null;r.legend.backgroundOpacity=0.5;r.legend.margin=[6,12];h("#ghx-chart-legend").hide()}if(f.wallboardMode){r.grid={backgroundColor:n.wallboard.backgroundColor,borderWidth:1,borderColor:n.wallboard.borderColor,color:n.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:n.wallboard.tickColor,markings:f.getMarkingsForGadget}}else{r.grid.markings=function(A){var u=l.getNonWorkingBlocks();var w=s.getNow();var v=[];var z=[];if(!s.getVersion().released&&A.xmax>w){if(!c.nonWorkingDaysShown){w=d.deductNonWorkingDays(w,r.xaxis.min)}var x=A.ymax/198;var t=x*4;v=f.drawDashedMarkings(w,t,x,70);var y=s.getVersion().releaseDate;if(!c.nonWorkingDaysShown){y=d.deductNonWorkingDays(y,r.xaxis.min)}if(!o.isUndefined(y)){t=2*t;x=2*x;z=f.drawDashedMarkings(y,t,x,20,n.releaseDate)}}if(c.nonWorkingDaysShown){return u.concat(v,z)}else{return v.concat(z)}}}return r};f.getMarkingsForGadget=function(){var s=n.nonWorkingDaysWallboard;var r=l.getNonWorkingBlocks();return o.map(r,function(t){t.color=s;return t})};f.drawDashedMarkings=function(v,s,x,r,u){var y=[];for(var w=0;w<r;w++){var t=w*(s+x);y.push({color:u||n.dashedMarking,lineWidth:1,xaxis:{from:v,to:v},yaxis:{from:t,to:t+s}})}return y};f.setLegendOpacity=function(){var r=h("#ghx-chart-legend").find(".legendColorBox");h(r[0]).find("div").find("div").css("opacity",0.3);h(r[1]).find("div").find("div").css("opacity",0.8)};f.renderIssuesLink=function(){var r=k.model.getVersion();var t=r.name;var s=true;if(t.length>60){s=false}h("#ghx-report-controls").empty().append(j.versionreport.renderViewIssuesLink({projectKey:k.model.getProjectKey(),version:r,nameUse:s})).show()};f.renderLabelsForNowAndRelease=function(w){var z=w.getXAxes()[0];var y=w.getYAxes()[0];if(k.model.chartData){var t=k.model.getNow();if(!c.nonWorkingDaysShown){t=d.deductNonWorkingDays(t,k.model.getXAxisStart())}var x=k.model.getVersion();var r=x.releaseDate;if(!c.nonWorkingDaysShown){r=d.deductNonWorkingDays(r,k.model.getXAxisStart())}var v;var A=h("#ghx-axis-x-top");A.empty();if(t<z.max){v=h(j.versionreport.renderXaxisTopLabel({text:"Today",left:w.pointOffset({x:t,y:y.max}).left}));A.append(v)}if(!o.isUndefined(r)&&!x.released&&r>z.min&&r<z.max){var u=w.pointOffset({x:r,y:y.max}).left;var s=h(j.versionreport.renderXaxisTopLabel({text:"Release Date",date:b.renderUTCMillisAsDateWithoutTime(k.model.getVersion().releaseDate),left:u}));A.append(s);if(!o.isUndefined(v)){if(f.labelsAreOverlapping(v,s)){s.addClass("ghx-raised")}}}}};f.labelsAreOverlapping=function(r,w){var u=r.position().left;var v=u+r.width();var t=w.position().left;var s=t+w.width();if((t>u&&t<v)||(s>u&&s<v)||(t<u&&s>v)){return true}return false};f.toggleChartVisibility=function(r){h("#ghx-chart-mismatch").empty();if(r&&k.model.notStarted()){h("#ghx-version-report-no-issues").hide();h("#ghx-report-content").hide();h("#ghx-version-report-not-started").show();p.hideSpinner()}else{if(k.model.hasIssues()){h("#ghx-version-report-no-issues").hide();h("#ghx-version-report-not-started").hide();h("#ghx-report-content").show()}else{h("#ghx-report-content").hide();h("#ghx-version-report-not-started").hide();h("#ghx-version-report-no-issues").show();p.hideSpinner()}}};f.gatherPoints=function(t,r,s){if(!t.mouseEntered){return}c.setPointsForChart(t,s)};f.bindEvents=function(r){r.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",g.handleMouseOverStateChange);r.unbind("plothover plotclick");r.bind("plothover",f.handlePlotHover);r.bind("plotclick",g.handlePlotClick)};f.handlePlotHover=function(u,w,t){if(t){var v=t.series.id;var s=t.dataIndex;var r=k.model.getDataBySeriesAtIndex(v,s);if(!o.isEmpty(r)){if(!f.isDataPointSameAsPrevious(t)){f.previousPlotHoverPoint={dataIndex:t.dataIndex,seriesIndex:t.seriesIndex};h("#ghx-tooltip").remove();f.showChartTooltip(t,v,r,t.datapoint[0]);if(!h("#ghx-tooltip").hasClass("ghx-has-warnings")){p.getChartView().addClass("ghx-clickable")}}return}}h("#ghx-tooltip").remove();f.previousPlotHoverPoint=null;p.getChartView().removeClass("ghx-clickable")};f.isDataPointSameAsPrevious=function(r){if(o.isUndefined(f.previousPlotHoverPoint)||o.isNull(f.previousPlotHoverPoint)){return false}return(r.dataIndex==f.previousPlotHoverPoint.dataIndex&&r.seriesIndex==f.previousPlotHoverPoint.seriesIndex)};f.showChartTooltip=function(u,x,r){if(!r){return}var w;var v;if(k.model.isReleaseDatePredictionSeriesId(x)){var t="Predicted Completion Date";var s=o.findWhere(f.unmodifiedSeries,{id:"prediction"}).data[1][0];if(x==="optimistic"){t="Predicted Completion Date"+" ("+"Optimistic"+")";s=o.findWhere(f.unmodifiedSeries,{id:"optimistic"}).data[1][0]}else{if(x==="pessimisticFillerBottom"){t="Predicted Completion Date"+" ("+"Pessimistic"+")";s=o.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}).data[1][0]}}v={predictedReleaseDate:b.renderUTCMillisAsDateWithoutTime(s),description:t};w=new a(u,v,q.releaseDate)}else{if(x==="trendline"){v={description:"Start Date",dateText:b.renderUTCMillisAsDateWithoutTime(u.datapoint[0])};w=new a(u,v,q.startDate)}else{if(x==="unestimatedPercent"){v={unestimated:((r.values.unestimatedIssueCount/r.values.issueCount)*100).toFixed(2),dateText:b.renderUTCMillisAsDate(r.time)};v.changes=o.map(r.issues,function(y){return{key:y.key,event:this.getChangeEvent(y)}},k.model);w=new a(u,v,q.uncertainty)}else{v=k.model.getTooltipData(x,r);w=new a(u,v)}}}w.render()};f.renderMeta=function(){if(!k.model.hasIssues()||k.model.notStarted()){return}var s=k.model.getVersion();var v=o.findWhere(f.unmodifiedSeries,{id:"prediction"});var r=o.findWhere(f.unmodifiedSeries,{id:"optimistic"});var u=o.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"});var w=s.released?"Released":"Unreleased";var t={prediction:v?b.renderUTCMillisAsDateWithoutTime(v.data[1][0]):null,optimistic:r?b.renderUTCMillisAsDateWithoutTime(r.data[1][0]):null,pessimisticFillerBottom:u?b.renderUTCMillisAsDateWithoutTime(u.data[1][0]):null};if(f.gadgetMode){AJS.$("#ghx-gadget-version-meta").empty().append(j.versionreport.renderVersionReportGadgetHeader({version:s,formattedReleaseDate:s.formattedReleaseDate,formattedStartDate:s.formattedStartDate,startTimezone:s.startTimeOffset,releaseTimezone:s.releaseTimeOffset,completionDate:t})).show();AJS.$("#ghx-chart-header .ghx-version-report-version-status").text(" ("+w+")")}else{AJS.$("#ghx-version-meta").empty().append(GH.tpl.versionreport.renderVersionReportHeader({version:s,formattedReleaseDate:s.formattedReleaseDate,formattedStartDate:s.formattedStartDate,startTimezone:s.startTimeOffset,releaseTimezone:s.releaseTimeOffset,})).show();if(!s.released){AJS.$("#ghx-report-content .ghx-version-report-completion-date-estimates").empty().append(GH.tpl.versionreport.renderNonGadgetCompletionDates({completionDate:t})).show()}}};f.renderReport=function(){f.toggleChartVisibility();if(k.model.hasIssues()){f.renderIssuesReport()}};f.renderIssuesReport=function(){var r=k.model.getReportContent();var s=k.model.hasIssues();h("#ghx-report-content .ghx-version-report").empty().html(j.versionreport.renderVersionReport({content:r,jql:k.model.getJql(),estimationStatistic:k.model.getStatistic(),hasIssues:s}));p.hideSpinner()};f.setGadgetMode=function(r){f.gadgetMode=r};f.setWallboardMode=function(r){f.wallboardMode=r};return f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportModel.js' */
define("jira-agile/rapid/ui/chart/version-report-model",["require"],function(b){var a=b("underscore");var h=b("jira-agile/rapid/ui/chart/changes-report-model");var g=b("jira-agile/rapid/ui/chart/chart-colors");var e=b("jira-agile/rapid/ui/chart/chart-controller");var d=b("jira-agile/rapid/ui/chart/release-date-predictor");var f=GH.ChartUtils;var c=function(i){this.estimationStatistic=i};c.prototype=new h();c.prototype.getStatistic=function(){return this.estimationStatistic};c.prototype.getProjectKey=function(){return this.chartData.projectKey};c.prototype.getVersionName=function(){return this.chartData.version.name};c.prototype.getNow=function(){return this.chartData.now};c.prototype.getVersion=function(){if(this.data&&this.data.version){return this.data.version}else{if(this.chartData&&this.chartData.version){return this.chartData.version}}return{}};c.prototype.setRawVersionChartData=function(i){if(i.version.released){i.endTime=i.version.releaseDate;i.completeTime=i.endTime}this.setRawChartData(i)};c.prototype.getXAxisEnd=function(){if(!a.isUndefined(this.xAxisEndDate)){return this.xAxisEndDate}return this.chartData.endTime};c.prototype.getYAxes=function(){var i=[];i.push(this.yAxisData);if(!this.isIssueCountStatistic()){i.push({position:"right",min:0,max:100,tickFormatter:function(j,k){return j.toFixed(0)},tickSize:10})}return i};c.prototype.setRawData=function(i){this.data=i;this.processData();this.generateJql()};c.prototype.generateJql=function(){var n=this.getStatistic();this.jql={};var i=f.createVersionJql(this.getVersion());var j=i+" AND "+f.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic()){this.jql.incompleteEstimatedIssues=j}else{var m=n.fieldId;var l=/^customfield_(\d+)/.exec(m);var k=l&&l.length>0;if(k){m="cf["+l[1]+"]"}this.jql.incompleteUnestimatedIssues=j+" AND "+m+" IS EMPTY";if(k){if(this.data.contents.incompleteEstimatedIssues.length>0){this.jql.incompleteEstimatedIssues=f.createIssueJql(this.data.contents.incompleteEstimatedIssues)}}else{this.jql.incompleteEstimatedIssues=j+" AND "+m+" IS NOT EMPTY"}}this.jql.completedIssues=i+" AND "+f.createStatusJql(this.getDoneStatuses());this.jql.allIssues=i};c.prototype.getDataBySeries=function(k){var i=h.prototype.getDataBySeries.call(this,k);if(i){return i}if(this.isReleaseDatePredictionSeriesId(k)){i=a.findWhere(this.series,{id:k});if(i&&i.data.length>0){var j=new Array(i.data.length-1);j.push(a.last(i.data));return j}}if(k==="trendline"){i=a.findWhere(this.series,{id:k});if(i){return[a.first(i.data)]}}if(k==="unestimatedPercent"){i=a.findWhere(this.series,{id:k});if(i&&i.data.length>0){return a.map(i.data,function(o,m,l){var n=l[m+1];if(!a.isUndefined(n)&&o[0]===n[0]){return}return o})}}return};c.prototype.getDataBySeriesAtIndex=function(p,l){var n=this.getDataBySeries(p);if(!n){return}if(p!=="unestimatedPercent"){return n[l]}var i=n[l];if(!i){return}var o=h.prototype.getDataBySeries.call(this,"issueCount");var m=a.findWhere(o,{time:i[0]});if(!a.isUndefined(m)){return m}var j=h.prototype.getDataBySeries.call(this,"unestimatedIssueCount");var k=a.findWhere(j,{time:i[0]});return k};c.prototype.getVersionSeries=function(k){var i=this.getVersion();if(!this.attemptedTrendlinePrediction&&a.isUndefined(a.findWhere(this.series,{id:"trendline"}))){this.series=this.series.concat(this.getTrendlineSeries());this.attemptedTrendlinePrediction=true}if(!this.isIssueCountStatistic()&&a.isUndefined(a.findWhere(this.series,{id:"unestimatedPercent"}))){this.series=this.series.concat(this.getUnestimatedSeries());this.series=a.reject(this.series,function(l){return l.id==="issueCount"||l.id==="unestimatedIssueCount"})}if(i.released){return this.series}if(a.isUndefined(a.findWhere(this.series,{id:"prediction"}))){this.series=this.series.concat(this.getPredictedSeries());var j=a.findWhere(this.series,{id:"trendline"});if(!a.isUndefined(j)){j.label="Predicted Completion Date"}}return this.series};c.prototype.getPredictedSeries=function(){var r=this.getPredictionData();if(r.xAxisEndDate){this.xAxisEndDate=r.xAxisEndDate}var j=a.last(r.optimistic);var p=a.last(r.standard);var v=a.last(r.pessimistic);if(a.isUndefined(p)){return[]}var k={lineWidth:0};var o={lineWidth:0,fill:0.3};var i={lineWidth:3};var l={color:g.trend,data:r.standard,id:"prediction",lines:i};var t={color:g.trend,data:r.optimistic,id:"optimistic",lines:o,fillBetween:"prediction"};var q={color:g.trend,data:[j,p],id:"optimisticFiller",lines:o,fillBetween:"prediction",hoverable:false};var x={color:g.trend,data:r.pessimistic,id:"pessimistic",lines:o,fillBetween:"prediction",hoverable:false};var s={color:g.trend,data:[p,v],id:"pessimisticFillerTop",lines:k,hoverable:false};var u=a.first(r.pessimistic);var m=f.calculateYProjection(u,v,p);var n={color:g.trend,data:[[p[0],m],v],id:"pessimisticFillerBottom",lines:o,fillBetween:"pessimisticFillerTop"};var w={color:g.scope,data:r.scope,id:"scope",lines:{lineWidth:1,fill:0.3}};return[w,l,t,q,x,n,s]};c.prototype.getPredictionData=function(){var k=a.last(a.findWhere(this.series,{id:"totalEstimate"}).data);var j=a.last(a.findWhere(this.series,{id:"completedEstimate"}).data);var i=this.getPredictedCompletedEstimatePerDay();return d.calculateSeries({startDate:this.getNow(),totalScope:k[1],totalCompleted:j[1],estimatePerDay:i})};c.prototype.getPredictedCompletedEstimatePerDay=function(){var k=this.getVersionStartDate();var i=this.chartData.now+f.oneDayInMillis;var j=a.findWhere(this.series,{id:"completedEstimate"}).data;return d.getPredictedCompletedEstimatePerDay(j,k,i,this.seriesData.completedEstimate)};c.prototype.getFurthestDateForNonWorkingDaysData=function(){if(a.isUndefined(this.series)||this.series.length==0){return Infinity}var l=a.last(a.findWhere(this.series,{id:"totalEstimate"}).data);var j=a.last(a.findWhere(this.series,{id:"completedEstimate"}).data);var k=l[1]-j[1];if(k===0){return this.getXAxisEnd()}var i=this.getPredictedCompletedEstimatePerDay();if(i.pessimistic>0){return d.calculatePredictionDate(this.getVersionStartDate(),i.pessimistic/5,k)}if(i.standard>0){return d.calculatePredictionDate(this.getVersionStartDate(),i.standard/5,k)}return d.calculatePredictionDate(this.getVersionStartDate(),i.optimistic/5,k)};c.prototype.getTrendlineSeries=function(){var p;if(this.isIssueCountStatistic()){p=a.findWhere(this.series,{id:"totalEstimate"}).data}else{p=a.findWhere(this.series,{id:"issueCount"}).data}var l=a.first(p);var n=a.findWhere(this.series,{id:"completedEstimate"}).data;var i=a.last(n);var k=this.getVersionStartDate();var j=[k,0];var o=i;if(k>l[0]){var m=a.chain(n).filter(function(q){return q[0]<k}).last().value();if(a.isUndefined(m)){m=a.first(n)}j=[k,m[1]]}if(o[1]===0||o[1]<=j[1]){return[]}return[{id:"trendline",color:g.trend,data:[j,o],lines:{lineWidth:3},label:"Trend"}]};c.prototype.getUnestimatedSeries=function(){var q=a.findWhere(this.series,{id:"issueCount"}).data;var k=a.findWhere(this.series,{id:"unestimatedIssueCount"}).data;var l=a.first(q)[1];var n=a.first(k)[1];function o(u,t){return a.reduce(u,function(y,w){var v={time:w[0]};v[t]=w[1];var x=a.last(y);if(!a.isUndefined(x)&&x.time===v.time){x[t]=v[t]}else{y.push(v)}return y},[])}var m=o(q,"total");var r=o(k,"unestimated");var j=a.sortBy(a.flatten([m,r],true),"time");var i=a.reduce(j,function(v,t){var u=a.last(v);if(!a.isUndefined(u)&&u.time==t.time){a.defaults(u,t)}else{v.push(t)}return v},[]);var p=a.flatten(a.map(i,function(w,u,t){if(u<t.length-1){var v=t[u+1];return[w,a.defaults({time:v.time},w)]}else{return[w]}}),true);p.unshift({time:p[0].time,total:l,unestimated:n});a.each(p,function(v,u,t){if(u<1){return}var w=t[u-1];if(a.isUndefined(v.total)){v.total=w.total}if(a.isUndefined(v.unestimated)){v.unestimated=w.unestimated}});var s=a.map(p,function(t){return[t.time,t.total===0?0:(t.unestimated/t.total)*100]});return{id:"unestimatedPercent",label:"Percent Unestimated Issues",color:g.unestimatedPercent,data:s,yaxis:2,lines:{lineWidth:1}}};c.prototype.getChartOptions=function(){var i=f.getChartOptions(this);i.grid.markings=this.getMarkings();return i};c.prototype.getMarkings=function(){var i=this;return function(o){var k=e.getNonWorkingBlocks();var l=i.getNow();if(o.xmax>l&&(!i.getVersion().released||(i.getVersion().releaseDate<=o.xmax))){var m=o.ymax/198;var j=m*4;i.drawDashedMarkings(k,l,j,m,70);var n=i.getVersion().releaseDate;if(!a.isUndefined(n)){j=2*j;m=2*m;i.drawDashedMarkings(k,n,j,m,20,g.releaseDate)}}return k}};c.prototype.drawDashedMarkings=function(l,o,k,q,j,n){for(var p=0;p<j;p++){var m=p*(k+q);l.push({color:n||g.dashedMarking,lineWidth:1,xaxis:{from:o,to:o},yaxis:{from:m,to:m+k}})}};c.prototype.isReleaseDatePredictionSeriesId=function(i){switch(i){case"prediction":case"optimistic":case"pessimisticFillerBottom":return true}return false};c.prototype.getStartTime=function(){if(this.chartData.startTime){return this.chartData.startTime}return this.getNow()};c.prototype.getVersionStartDate=function(){if(this.getVersion().startDate){return this.getVersion().startDate}return this.getStartTime()};c.prototype.notStarted=function(){return this.getVersionStartDate()>this.getNow()};c.prototype.getXAxisStart=function(){var j=0.02;var i=this.chartData.startTime;if(this.getVersion().startDate){i=this.getVersion().startDate}return i-((this.chartData.endTime-i)*j)};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.js' */
define("jira-agile/rapid/ui/chart/version-report",["require"],function(b){var c=b("jira-agile/rapid/ui/chart/version-report-model");var a={};a.createModel=function(d){a.model=new c(d);a.model.setParams({statistic:d,issueAddedText:"Issue added to version",issueRemovedText:"Issue removed from version",startText:"Version start date"})};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.soy' */
// This file was automatically generated from VersionReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionreport == 'undefined') { GH.tpl.versionreport = {}; }


GH.tpl.versionreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-report-controls"></div><div id="ghx-version-meta" class="ghx-version-meta"></div><div id="ghx-version-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("This version does not contain any issues.") + '</p></div></div><div id="ghx-version-report-not-started" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("The chart cannot be generated because the version has a start date in the future.") + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-version-summary-wrap"><div id="ghx-chart-legend" class="ghx-release-chart-legend"></div><div class="ghx-release-summary"></div></div><div id="ghx-chart-wrap" class="ghx-version-chart-wrap"><div id="ghx-axis-x-top"></div><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-version-report-completion-date-estimates ghx-margin-top"></div><div class="ghx-version-report ghx-margin-top"></div></div><div id="ghx-gadget-version-meta" class="ghx-version-meta"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderReportBody.soyTemplateName = 'GH.tpl.versionreport.renderReportBody';
}


GH.tpl.versionreport.renderViewIssuesLink = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.versionreport.issueNavLink({jql: 'fixVersion=' + soy.$$escapeUri(opt_data.version.jqlEncodedName) + ' AND project=' + soy.$$escapeHtml(opt_data.projectKey)}) + '">' + ((opt_data.nameUse == true) ? soy.$$escapeHtml(AJS.format("View {0} in Issue Navigator",opt_data.version.name)) : soy.$$escapeHtml("View in Issue Navigator")) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderViewIssuesLink.soyTemplateName = 'GH.tpl.versionreport.renderViewIssuesLink';
}


GH.tpl.versionreport.renderVersionReportHeader = function(opt_data, opt_ignored) {
  return '<p>' + ((opt_data.version.startDate) ? soy.$$escapeHtml("Start Date:") + ' ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '<br />' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format("Released on {0}",opt_data.formattedReleaseDate)) : (opt_data.version.released) ? soy.$$escapeHtml("Released") : (opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format("Scheduled Release Date: {0}",opt_data.formattedReleaseDate)) : soy.$$escapeHtml("Unreleased")) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportHeader';
}


GH.tpl.versionreport.renderVersionReportGadgetHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + ((opt_data.version.startDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml("Start date") + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '</span></p>' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml("Released") + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedReleaseDate) + '</span></p>' : '') + ((! opt_data.version.released) ? GH.tpl.versionreport.renderCompletionDates(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportGadgetHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportGadgetHeader';
}


GH.tpl.versionreport.renderNonGadgetCompletionDates = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + GH.tpl.versionreport.renderCompletionDates(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderNonGadgetCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderNonGadgetCompletionDates';
}


GH.tpl.versionreport.renderCompletionDates = function(opt_data, opt_ignored) {
  return '' + ((opt_data.completionDate.prediction) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Predicted"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.prediction), showTitle: 'true'}) + '<br>' : '') + ((opt_data.completionDate.optimistic) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Optimistic"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.optimistic), showTitle: 'false'}) + '<br>' : '') + ((opt_data.completionDate.pessimisticFillerBottom) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Pessimistic"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.pessimisticFillerBottom), showTitle: 'false'}) + '<br>' : '');
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDates';
}


GH.tpl.versionreport.renderCompletionDate = function(opt_data, opt_ignored) {
  return ((opt_data.showTitle) ? '<span class="ghx-date-title">' + soy.$$escapeHtml(opt_data.dateTitle) + ' ' + soy.$$escapeHtml("completion date") + ':</span>' : '') + '<span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.dateValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDate.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDate';
}


GH.tpl.versionreport.renderVersionReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Status Report") + '</h3><div class="ghx-version-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, showEpicColumn: true, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Unestimated Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReport.soyTemplateName = 'GH.tpl.versionreport.renderVersionReport';
}


GH.tpl.versionreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.versionreport.issueNavLink.soyTemplateName = 'GH.tpl.versionreport.issueNavLink';
}


GH.tpl.versionreport.renderXaxisTopLabel = function(opt_data, opt_ignored) {
  return '<div style="left:' + soy.$$escapeHtml(opt_data.left) + 'px" class="ghx-axis-x-top-label">' + soy.$$escapeHtml(opt_data.text) + ((opt_data.date) ? ': ' + soy.$$escapeHtml(opt_data.date) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderXaxisTopLabel.soyTemplateName = 'GH.tpl.versionreport.renderXaxisTopLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReleaseDatePredictor.js' */
define("jira-agile/rapid/ui/chart/release-date-predictor",["require"],function(b){var a=b("underscore");var d=b("jira-agile/rapid/ui/chart/burndown-rate");var e=b("jira-agile/rapid/ui/chart/change-event");var f=GH.ChartUtils;var c={};c.calculateSeries=function(l){var i={standard:[],optimistic:[],pessimistic:[],scope:[]};if(l.totalCompleted/l.totalScope<0.1||l.totalCompleted===l.totalScope){return i}var h=c.createDataSeries(a.defaults({estimatePerDay:l.estimatePerDay.standard},l));var g=Infinity;if(h.length>0){g=a.last(h)[0]}if(g==Infinity){return i}var k=c.createDataSeries(a.defaults({estimatePerDay:l.estimatePerDay.optimistic},l));var j=c.createDataSeries(a.defaults({estimatePerDay:l.estimatePerDay.pessimistic},l));var n=c.calculateXAxisEndDate(j,g);var m=[];m.push([l.startDate,l.totalScope]);m.push([n,l.totalScope]);return{standard:h,optimistic:k,pessimistic:j,scope:m,xAxisEndDate:n}};c.calculateXAxisEndDate=function(i,h){var g=Infinity;if(i.length>0){g=a.last(i)[0]+f.oneDayInMillis}if(g===Infinity){g=h+f.oneDayInMillis}return g};c.createDataSeries=function(t){var l=[];var o=t.estimatePerDay;l.push([t.startDate,t.totalCompleted]);if(o<=0){l.push([Infinity,t.totalCompleted]);return l}var p=d.getWorkingDays();if(p.length===0){return[]}var q=t.totalScope-t.totalCompleted;var g=t.totalCompleted;for(var m=0;m<p.length;m++){var k=p[m];if(k.end>t.startDate){var n=k.start;if(k.start>t.startDate){l.push([k.start,g])}else{n=t.startDate}var r=(k.end-n)/f.oneDayInMillis;var h=q/o;if(h<=r){var j=new Date(n+(h*f.oneDayInMillis));l.push([j.valueOf(),t.totalScope]);break}else{var s=r*o;g+=s;q-=s;l.push([k.end,g])}}}return[a.first(l),a.last(l)]};c.getCompletedEstimatePerDay=function(y,g,p,q){var h=[];var t=0;var r=0;var s=[];var u=0;function x(i){var j=e.getChangeEvent(i);if(j==e.burndown||j==e.completeScopeAdded){s.push(i.key)}}function o(z,i){if(a.contains(s,i.key)){var j=e.getChangeEvent(i);if(j===e.completeScopeAdded||j===e.scopeAdded){return z-i.completedEstimate}}return z}for(var m=g;m<=p;m+=f.oneDayInMillis){if(!d.isDateInNonWorkingBlock(m)){u++}var w=0;var l;for(var k=r;k<y.length;k++){var n=y[k][0];if(n<=m){if(n>g){var v=y[k][1];l=(q[k])?q[k].issues:[];if(l){v=a.reduce(l,o,v);a.each(l,x)}if(v>t){w+=(v-t)}t=y[k][1]}else{l=(q[k])?q[k].issues:[];if(l){a.each(l,x)}t=y[k][1]}}else{t=y[k][1];r=k;break}}h.push({time:m,estimate:w})}return{completedData:h,workingDays:u}};c.calculateAverageEstimateCompletedPerDay=function(g){var i=g.workingDays;if(i===0){return 0}var h=a.reduce(g.completedData,function(k,j){return k+j.estimate},0);return h/i};c.calculateDeviation=function(g){return g*0.1};c.getPredictedCompletedEstimatePerDay=function(o,g,j,m){var l=c.getCompletedEstimatePerDay(o,g,j,m);var i=c.calculateAverageEstimateCompletedPerDay(l);var h=c.calculateDeviation(i);var k=i+h;var n=Math.max(i-h,0);return{standard:i,optimistic:k,pessimistic:n}};c.calculatePredictionDate=function(h,g,i){if(g<=0){return Infinity}var j=i/g;return new Date(h+(f.oneDayInMillis*j)).valueOf()};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangeEvent.js' */
define("jira-agile/rapid/ui/chart/change-event",["require"],function(b){var a=b("underscore");var c={scopeAdded:"scopeAdded",scopeRemoved:"scopeRemoved",reopened:"reopened",burndown:"burndown",completeScopeAdded:"completeScopeAdded",estimateChanged:"estimateChanged",estimateAdded:"estimateAdded",estimateRemoved:"estimateRemoved",releaseDate:"releaseDate",uncertainty:"uncertainty",unknown:"unknown",startDate:"startDate"};c.getScopeOrColumnChangeEvent=function(d,e){if(d.scopeChange){if(d.inScope){return c.scopeAdded}else{return c.scopeRemoved}}if(d.columnChange){if(d.column==="notDone"){if(d.oldColumn){return c.reopened}else{return c.scopeAdded}}if(d.column==="done"){if(d.oldColumn){return c.burndown}else{return c.completeScopeAdded}}else{if(d.oldColumn==="notDone"){return c.scopeRemoved}else{return c.scopeRemoved}}}return false};c.getChangeEvent=function(d){var f="Burnup";var h=c.getScopeOrColumnChangeEvent(d,f);if(h){return h}if(d.estimateChange){var g=d.values.oldEstimateFieldValue;var e=d.values.estimateFieldValue;var j=!a.isUndefined(g);var i=!a.isUndefined(e);if(j&&i){return c.estimateChanged}else{if(j){return c.estimateRemoved}else{return c.estimateAdded}}}return c.unknown};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/MultipleCharts.js' */
GH.Reports=GH.Reports||{};GH.Reports.multipleCharts=function(){return c3.component("multipleCharts").extend({charts:c3.prop([]),chartSelector:c3.prop(".ghx-svg-chart")}).extend(function(){this.selection().selectAll(this.chartSelector()).data(this.charts()).each(function(a){if(a){a(d3.select(this))}})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartConfigService.js' */
(function(){function b(d,e){var c=GH.RapidBoard.State.getBoardSetting(d,"chart.config."+e,{});return c}function a(){}a.prototype={mapOldConfigToNewConfig:function(e,f){var c=b(e,f);var d=GH.RapidBoard.State.getCycleTimeCalculationType();c.includeNonWorkingDays=(d==="total");GH.RapidBoard.State.setBoardSetting("chart.config."+f,c)},mapNewConfigToOldConfig:function(e,f){var c=b(e,f);var d=c.includeNonWorkingDays?"total":"workingDays";GH.RapidBoard.State.setCycleTimeCalculationType(d)}};GH.ChartNWDConfigService=a;GH.chartNWDConfigService=new a()}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameModel.js' */
(function(j,k,a){var i="%Y-%m-%d";var e=90;var b="custom";var g=k.time.day;function h(l,m){if(!j.isDate(l)){throw m+" must be a Date object"}return l}function f(l){return g.floor(g.offset(l,1))}function d(l){return new Date(f(l)-1)}function c(){}c.prototype={timeFrame:null,fromDate:null,toDate:null,setSimpleDates:function(m,l){this.timeFrame=b;this.fromDate=g.floor(h(m,"fromDate"));this.toDate=d(h(l,"toDate"));return this},setExactDates:function(m,l){this.timeFrame=b;this.fromDate=h(m);this.toDate=h(l);return this},setDays:function(l){this.timeFrame=l;return this},setAllTime:function(){this.timeFrame=0;return this},resetToDefault:function(){this.timeFrame=e;return this},isDefault:function(){return(this.timeFrame===e)},setBounds:function(m,l){this.earliestDate=h(m,"earliestDate");this.currentDate=h(l,"currentDate");return this},getTimeFrame:function(){if(!j.findWhere(a,{days:this.timeFrame})){return b}return this.timeFrame},getTimeFrameDates:function(){if(!this.earliestDate||!this.currentDate){throw"Cannot calculate time frame dates without earliestDate and currentDate"}var m;var l;if(this.timeFrame>0){m=g.offset(f(this.currentDate),-1*this.timeFrame);l=d(this.currentDate)}else{if(this.timeFrame<=0){m=g.floor(this.earliestDate);l=d(this.currentDate)}else{if(this.timeFrame===b){m=this.fromDate;l=this.toDate}}}return{fromDate:m,toDate:l}},getTimeFrameDuration:function(){var l=this.getTimeFrameDates();return l.toDate-l.fromDate+1},fromNormalized:function(m){if(m.days==null){this.resetToDefault()}else{if(m.days>0){this.setDays(Number(m.days))}else{if(m.days===b){try{this.setSimpleDates(Date.parseDate(m.from,i),Date.parseDate(m.to,i))}catch(l){this.resetToDefault()}}else{this.setAllTime()}}}return this},toNormalized:function(){var l={};if(j.isNumber(this.timeFrame)&&this.timeFrame!==e){l.days=this.timeFrame}else{if(this.timeFrame===b){l.days=this.timeFrame;l.from=this.fromDate.print(i);l.to=this.toDate.print(i)}}return l},clone:function(){return new c().fromNormalized(this.toNormalized())}};GH.Reports.ChartTimeFrameModel=c})(_,d3,GH.ChartTimeFrames.timeFrames);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameService.js' */
GH.ChartTimeFrameService={};GH.ChartTimeFrameService.rapidViewId=null;GH.ChartTimeFrameService.normalizedDateFormat="%Y-%m-%d";GH.ChartTimeFrameService.setRapidViewId=function(a){GH.ChartTimeFrameService.rapidViewId=a};GH.ChartTimeFrameService.getTimeFramesConfigForChart=function(b){var a=GH.RapidBoard.State.getBoardSetting(GH.ChartTimeFrameService.rapidViewId,"chart.config."+b,{});return a};GH.ChartTimeFrameService.saveTimeFrameConfigForChart=function(c,a){var b={view:"reporting"};GH.RapidBoard.State.setBoardSetting("chart.config."+c,_.defaults(a,b))};GH.ChartTimeFrameService._getFormattedDate=function(a){a=_.isNumber(a)?new Date(a):a;if(_.isDate(a)){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}return a};GH.ChartTimeFrameService._convertDateFormattedStringToDate=function(a){if(_.isString(a)&&a.length>0){return new Date(Date.parse(a))}return null};GH.ChartTimeFrameService.mapOldConfigToNewConfig=function(f){var b=GH.ChartTimeFrameService.rapidViewId;var e=GH.RapidBoard.State.getBoardSetting(b,"chart.timeframe.days",GH.ChartTimeFrames.days);var d=GH.RapidBoard.State.getBoardSetting(b,"chart.timeframe.from","");var c=GH.RapidBoard.State.getBoardSetting(b,"chart.timeframe.to","");d=GH.ChartTimeFrameService._getFormattedDate(d);c=GH.ChartTimeFrameService._getFormattedDate(c);var a=GH.ChartTimeFrameService.getTimeFramesConfigForChart(f);a.days=e>=0?e:"custom";a.from=d;a.to=c;GH.ChartTimeFrameService.saveTimeFrameConfigForChart(f,a)};GH.ChartTimeFrameService.mapNewConfigToOldConfig=function(g){var a=GH.ChartTimeFrameService.getTimeFramesConfigForChart(g);var f=a.days,d=null,c=null;if(f<0||f==="custom"){f=-1;try{d=GH.ChartTimeFrameService._convertDateFormattedStringToDate(a.from).getTime();c=GH.ChartTimeFrameService._convertDateFormattedStringToDate(a.to).getTime()}catch(b){f=0}}else{if(_.isUndefined(f)){f=0}}GH.ChartTimeFrames.setNewChartLimits(f,d,c,false)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintTransformer.js' */
(function(C,z,t,B,w,n,l,m,g,q){var b="LL";var y=3;function d(F){var I=F.changes;var H=[];var G;var J;function E(K,L){var M={time:+G,key:J.key};M[K]=L;H.push(M)}for(G in I){for(var D=0;D<I[G].length;D++){J=I[G][D];if(J.column){E("done",!J.column.notDone)}if(J.statC){E("estimate",J.statC.newValue)}if("added" in J){E("added",J.added)}}}return C.sortBy(H,"time")}function s(H){var D=[];var E={};function G(I){D=C.reject(D,function(J){if(J.key!==I){return false}if(J.wasDone){J.wasDone=false}return"done" in J});E[I].done=false}function F(J){var I=C.where(H,{key:J,done:true});return C.last(I).time}C.each(H,function(K){if("estimate" in K){return}var I=K.key;if(!E[I]){E[I]={}}var J=E[I];if("added" in K){if(J.added!==K.added){if(J.done){K=C.extend({wasDone:true},K);if(K.added){K.time=F(K.key);D=C.reject(D,function(L){if(L.key!==I){return false}return"done" in L});D.push({key:K.key,done:true,time:K.time})}}D.push(K);J.added=K.added}}else{if("done" in K){if(!K.done){G(I)}else{if(!J.done&&J.added!==false){D.push(K)}}J.done=K.done}}});return{changes:D,issueStates:E}}function u(E){var D={};C.each(E,function(F){if("added" in F){if(F.added){D[F.key]=true}else{delete D[F.key]}}});return C.keys(D)}function k(E,F){var G={};var D=C.groupBy(F);C.each(E,function(H){if("estimate" in H&&C.has(D,H.key)){if(C.isNumber(H.estimate)){G[H.key]=H.estimate}else{delete G[H.key]}}});return G}function v(F,E){var D=C.find(F,function(G){if(E!=null&&G.time<E){return false}return"done" in G});return D?D.time:-1}function p(E,D){if(!E.length||E[0].startTime>D){return"original"}var F=C.find(E,function(H,G){if(G===E.length-1){return true}return H.startTime<=D&&E[G+1].startTime>D});return F.id}function A(G,H){var F={};var D=v(G);if(D===-1){F.original=G}else{var E=p(H,D);C.each(G,function(J){var I=p(H,J.time);if(J.time<D&&I!==E){I="original"}if(!F[I]){F[I]=[]}F[I].push(J)})}return a(F)}function a(E){var D={};C.each(E,function(I,H){D[H]=D[H]||[];C.each(I,function(K){if(!("added" in K)){D[H].push(K)}});var F={};C.each(I,function(K){if("added" in K){F[K.key]=F[K.key]||[];F[K.key].push(K)}});function J(L,K){return C.find(C.clone(L).reverse(),function(M){return M.added===K})}function G(K){return C.reject(K,function(L){return"added" in L})}C.each(F,function(N,K){var O=C.reduce(N,function(P,Q){return P+(Q.added?1:-1)},0);if(O>0){var M=J(N,true);if(M){F[K]=G();F[K].push(M)}}else{if(O<0){var L=J(N,false);if(L){F[K]=G();F[K].push(L)}}else{F[K]=G();if(C.last(N).added===false){D[H]=C.reject(D[H],function(P){return P.key===K})}}}});C.each(C.flatten(F),function(K){D[H].push(K)})});return D}function o(F,E){var D={added:0,removed:0,net:0};C.each(E||[],function(H){if("added" in H){var G=F[H.key]||0;if(H.added){D.added+=G}else{if(!H.wasDone){D.removed+=G}}}});D.net=D.added-D.removed;return D}function c(E,D){return C.reduce(D,function(F,H){if(H.done){var G=E[H.key]||0;return F+G}return F},0)}function r(E){var D;switch(E){case"duration":D={formatFull:function(F){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(F,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,dropMinutesIfLongerThanADay:true})},formatCompact:function(F){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(F,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,timeFormat:GH.TimeFormatDisplays.MOST_SIGNIFICANT})}};break;default:D={formatFull:GH.NumberFormat.format,formatCompact:GH.NumberFormat.format};break}return D}function f(D){function L(N){return Math.round(B.mean(N,function(O){return O.workCompleted}))}var M=C.last(D);var J=M&&M.isActive;var K=J?D.slice(0,-1):D;var G={baseline:M?M.baseline:0};if(K.length<y){return C.extend(G,{forecastError:AJS.format("A forecast cannot be shown until at least {0,choice,1#1 sprint has|1\u003c{0,number} sprints have} been completed.",y)})}if(M.workRemaining===0){return C.extend(G,{sprintsRemaining:0})}var F=L(C.last(K,y));var H=M.workRemaining;var E=false;if(J){if(M.workCompleted>F){F=L(C.last(D,y))}else{var I=M.workAtStart+M.workAdded-M.workRemoved;H=I-Math.min(I,F);E=true}}if(F===0){return C.extend(G,{forecastError:AJS.format("A forecast cannot be shown until at least one of {0,number} most recent {0,choice,1#sprint|1\u003csprints} contains completed work.",y)})}return C.extend(G,{sprintsRemaining:Math.ceil(H/F),velocity:F,workRemaining:H,isLastSprintForecast:E})}function j(E,F){if(E.forecastError||E.sprintsRemaining===0){return C.map(C.range(F),function(G){return{sprintId:"forecast"+G,sprintName:"",baseline:E.baseline,workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:true,isActive:false}})}var D=E.workRemaining;return C.map(C.range(F),function(I){var H=D;var G=Math.min(D,E.velocity);D-=G;return{sprintId:"forecast"+I,sprintName:"",baseline:E.baseline,workAtStart:H,workAdded:0,workRemoved:0,workCompleted:G,workRemaining:D,isForecast:true,isActive:false}})}function i(ae,ad){var af={sprints:[],series:{baseline:[],workAdded:[],workRemaining:[],workCompleted:[]},estimationStatistic:ae.estimationStatistic,labels:ae.labels||{},rapidViewId:ae.rapidViewId};if(ae.epic){af.epic=ae.epic}if(ae.version){af.version=ae.version}var Q=d(ae);var P=s(Q);var E=P.changes;var F=k(Q,ae.estimatableIssueKeys);var aa=C.sortBy(ae.sprints,"startTime");var Z=A(E,aa);var S=o(F,Z.original).net;var W=c(F,Z.original);var J={sprintId:"original",sprintName:af.labels.originalEstimate,baseline:0,workAtStart:S,workAdded:0,workRemoved:0,workCompleted:W,workRemaining:S-W,isForecast:false,isActive:false,issues:C.pluck(C.where(Z.original,{done:true}),"key")};var M=J;af.sprints=C.map(aa,function(ak){var aj=Z[ak.id];var ai=o(F,aj);var ah=c(F,aj);var ag={sprintId:ak.id,sprintName:ak.name,baseline:ad?0:M.baseline-ai.net,workAtStart:M.workRemaining,workAdded:ai.added,workRemoved:ai.removed,workCompleted:ah,workRemaining:M.workRemaining-ah+ai.net,startTime:ak.startTime,endTime:ak.endTime,isForecast:false,isActive:ak.state==="ACTIVE",issues:C.pluck(C.where(aj,{done:true}),"key")};M=ag;return ag});if(af.sprints.length){var T=v(E,af.sprints[0].startTime);var K=p(aa,T);var X=g.indexOf(af.sprints,function(ag){return ag.sprintId===K});var I=g.indexOf(af.sprints,function(ag){return ag.workAdded||ag.workRemoved||ag.workCompleted||ag.workRemaining},true);af.sprints=X>=0&&I>=0?af.sprints.slice(X,I+1):[]}var O=C.last(af.sprints);var L=af.sprints.length?O.workRemaining:J.workRemaining;var V=J.workCompleted+C.reduce(af.sprints,function(ag,ah){return ag+ah.workCompleted},0);var R=af.forecast=f(af.sprints);af.sprints.unshift(J);af.getForecast=C.partial(j,R);var U=u(E);var N=C.intersection(U,C.keys(F));function Y(ag){return function(ah){return ag[ah].added}}if(L===0){var H=C.pluck(C.where(E,{done:true}),"key");var ac=C.filter(H,Y(P.issueStates));var D=C.filter(ae.estimatableIssueKeys,Y(P.issueStates));var ab=C.difference(D,ac);var G=ab.length;af.forecast.remainingEstimatableIssueCount=G}af.snapshot={workRemaining:L,workCompleted:V,estimatedIssueCount:N.length,estimatableIssueCount:C.intersection(U,ae.estimatableIssueKeys).length,issueCount:U.length};return af}function e(D,F){var G=D.contents;var E=C.object(C.pluck(G.completedIssues,"key"),G.completedIssues);D.estimationStatistic=F.estimationStatistic;G.incompleteIssues=C.union(G.incompleteEstimatedIssues,G.incompleteUnestimatedIssues);G.incompleteIssuesSum={text:D.estimationStatistic.formatter.formatFull(G.incompletedIssuesEstimateSum.value),value:G.incompletedIssuesEstimateSum.value};G.incompleteIssuesUrl=q.getUrlForIssues(G.incompleteIssues);D.sprints=C.filter(F.sprints,function(H){return H.sprintId!=="original"||H.issues.length}).reverse();D.sprints=C.map(D.sprints,function(I){var H={sprintId:I.sprintId};H.issues=C.map(I.issues,function(J){return E[J]});H.issues=C.compact(H.issues);H.issueNavUrl=q.getUrlForIssues(H.issues);if(I.sprintId==="original"){H.sprintName="Before initial sprint"}else{H.sprintName=I.sprintName;H.sprintReportUrl=q.prependBaseUrl("/secure/RapidBoard.jspa?rapidView="+D.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+I.sprintId)}if(I.startTime){H.formattedStartTime=z(I.startTime).format(b)}if(I.endTime){H.formattedEndTime=z(I.endTime).format(b)}H.formatedWorkCompleted=D.estimationStatistic.formatter.formatFull(I.workCompleted);return H});return D}function h(E){var G=d(E);var D={};C.each(G,function F(I){var H=D[I.key]=D[I.key]||[];H.push(I)});return D}var x={getScopeBySprintData:i,getIssuesBySprintData:e,getEstimationStatisticFormatter:r,_getIssueHistory:h};GH.Reports=GH.Reports||{};GH.Reports.ScopeBurndownBySprintTransformer=x}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ReportIssueTable.soy' */
// This file was automatically generated from ReportIssueTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.issueTable.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.issueTable == 'undefined') { GH.tpl.reports.issueTable = {}; }


GH.tpl.reports.issueTable.renderIssueTable = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group ghx-issue-table-title"><div class="aui-item">';
  if (opt_data.sprint || opt_data.listName) {
    output += '<h4>';
    if (opt_data.sprint) {
      var sprintName__soy9 = '' + ((opt_data.sprint.isActive) ? soy.$$escapeHtml(AJS.format("{0} (active)",opt_data.sprint.sprintName)) : soy.$$escapeHtml(opt_data.sprint.sprintName));
      output += (opt_data.sprint.sprintReportUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.sprint.sprintReportUrl) + '">' + soy.$$escapeHtml(sprintName__soy9) + '</a>' : soy.$$escapeHtml(sprintName__soy9);
    } else {
      output += soy.$$escapeHtml(opt_data.listName);
    }
    output += '</h4>' + ((opt_data.titleTooltip) ? '<span class="aui-icon aui-icon-small aui-iconfont-help issue-table-title-tooltip" title="' + soy.$$escapeHtml(opt_data.titleTooltip) + '"></span>' : '');
  }
  output += ((opt_data.sprint && opt_data.sprint.formattedStartTime && opt_data.sprint.formattedEndTime) ? ' <span>' + soy.$$escapeHtml(opt_data.sprint.formattedStartTime) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndTime) + '</span>' : '') + '</div><div class="aui-item">' + ((opt_data.issues.length > 0) ? '<a class="ghx-controls" href="' + soy.$$escapeHtml(opt_data.issueNavLink) + '">' + soy.$$escapeHtml("View in Issue Navigator") + '</a>' : '') + '</div></div>' + ((opt_data.issues.length > 0) ? '<table class="aui">' + GH.tpl.reports.issueTable.renderIssueTableHeader({estimateStatisticName: opt_data.estimationStatistic.name, estimateStatisticValue: opt_data.estimationValue, currentEstimateStatisticValue: opt_data.currentEstimationValue, showEpicColumn: opt_data.showEpicColumn}) + GH.tpl.reports.issueTable.renderIssueTableRows(opt_data) + '</table>' : (opt_data.emptyMessage) ? '<p>' + soy.$$escapeHtml(opt_data.emptyMessage) + '</p>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTable.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTable';
}


GH.tpl.reports.issueTable.renderIssueTableHeader = function(opt_data, opt_ignored) {
  var output = '<tr><th>' + soy.$$escapeHtml("Key") + '</th><th>' + soy.$$escapeHtml("Summary") + '</th><th>' + soy.$$escapeHtml("Issue Type") + '</th><th>' + soy.$$escapeHtml("Priority") + '</th><th>' + soy.$$escapeHtml("Status") + '</th>' + ((opt_data.showEpicColumn) ? '<th>' + soy.$$escapeHtml("Epic") + '</th>' : '');
  var headerTooltip__soy82 = opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue ? AJS.format("Estimate modified from {0} to {1}",opt_data.estimateStatisticValue,opt_data.currentEstimateStatisticValue) : '';
  output += '<th class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(headerTooltip__soy82) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + ' <span>(';
  if (opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue) {
    output += GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: opt_data.estimateStatisticValue, currentEstimate: opt_data.currentEstimateStatisticValue});
  } else {
    var className__soy94 = '' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.estimateStatisticValue});
    output += '<span class="' + soy.$$escapeHtml(className__soy94) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticValue) + '</span>';
  }
  output += ')</span></th></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableHeader.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableHeader';
}


GH.tpl.reports.issueTable.renderIssueTableRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList104 = opt_data.issues;
  var issueListLen104 = issueList104.length;
  for (var issueIndex104 = 0; issueIndex104 < issueListLen104; issueIndex104++) {
    var issueData104 = issueList104[issueIndex104];
    var issueAdded__soy105 = opt_data.addedIssues && opt_data.addedIssues[issueData104.key];
    output += '<tr' + ((issueAdded__soy105) ? ' class="ghx-added" title="' + soy.$$escapeHtml("Issue added to sprint after start time") + '"' : '') + '><td class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData104.key) + '">' + soy.$$escapeHtml(issueData104.key) + '</a>' + ((issueAdded__soy105) ? ' *' : '') + '</td><td>' + soy.$$escapeHtml(issueData104.summary) + '</td><td class="ghx-nowrap">' + ((issueData104.typeName) ? '<img src="' + soy.$$escapeHtml(issueData104.typeUrl) + '" />' + soy.$$escapeHtml(issueData104.typeName) : soy.$$escapeHtml("None")) + '</td><td class="ghx-nowrap">' + ((issueData104.priorityName) ? '<img src="' + soy.$$escapeHtml(issueData104.priorityUrl) + '" />' + soy.$$escapeHtml(issueData104.priorityName) : soy.$$escapeHtml("None")) + '</td><td class="ghx-nowrap">' + GH.tpl.status.renderFull({status: issueData104.status}) + '</td>' + ((opt_data.showEpicColumn) ? '<td class="ghx-nowrap">' + ((issueData104.epic) ? aui.labels.label({extraClasses: [issueData104.epicColor], text: '' + GH.tpl.epic.getEpicNameString({epicLabel: issueData104.epicLabel, epicKey: issueData104.epic}), url: GH.Ajax.CONTEXT_PATH + '/browse/' + issueData104.epic, extraAttributes: {title: issueData104.epic}}) : '') + '</td>' : '');
    var tooltip__soy160 = issueData104.estimateStatistic && issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text ? AJS.format("Estimate modified from {0} to {1}",issueData104.estimateStatistic.statFieldValue.text,issueData104.currentEstimateStatistic.statFieldValue.text) : '';
    output += '<td class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(tooltip__soy160) + '">' + ((issueData104.estimateStatistic && issueData104.estimateStatistic.statFieldValue && issueData104.estimateStatistic.statFieldValue.text) ? (issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text) ? GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: issueData104.estimateStatistic.statFieldValue.text, currentEstimate: issueData104.currentEstimateStatistic.statFieldValue.text}) : soy.$$escapeHtml(issueData104.estimateStatistic.statFieldValue.text) : '-') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableRows.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableRows';
}


GH.tpl.reports.issueTable.renderChangedEstimateIndicator = function(opt_data, opt_ignored) {
  return '<span class="ghx-previous-value  ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.initialEstimate}) + '">' + soy.$$escapeHtml(opt_data.initialEstimate) + ((opt_data.initialEstimate == '-') ? ' ' : '') + ' &#8594; </span><span class="ghx-current-value ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.currentEstimate}) + '">' + soy.$$escapeHtml(opt_data.currentEstimate) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderChangedEstimateIndicator.soyTemplateName = 'GH.tpl.reports.issueTable.renderChangedEstimateIndicator';
}


GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.value == '-' ? 'empty-mode' : '');
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar.soyTemplateName = 'GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprint.soy' */
// This file was automatically generated from ScopeBurndownBySprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.scopeBurndownBySprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.scopeBurndownBySprint == 'undefined') { GH.tpl.reports.scopeBurndownBySprint = {}; }


GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy3 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: "at start of sprint", estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy3}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workAdded, estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workRemoved, estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("completed") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy3}) : '') + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("remaining") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy3}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueList = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.sprints.length > 0) ? '<h3>' + soy.$$escapeHtml("Completed Issues") + '</h3>' : '');
  var sprintList77 = opt_data.sprints;
  var sprintListLen77 = sprintList77.length;
  for (var sprintIndex77 = 0; sprintIndex77 < sprintListLen77; sprintIndex77++) {
    var sprintData77 = sprintList77[sprintIndex77];
    output += GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({listName: sprintData77.sprintName, sprint: sprintData77, issues: sprintData77.issues, issueNavLink: sprintData77.issueNavUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: sprintData77.formatedWorkCompleted, showEpicColumn: opt_data.showEpicColumn, emptyMessage: opt_data.emptySprintMessage});
  }
  output += (opt_data.contents.incompleteIssues.length > 0) ? '<h3>' + soy.$$escapeHtml("Incomplete Issues") + '</h3>' + GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({issues: opt_data.contents.incompleteIssues, issueNavLink: opt_data.contents.incompleteIssuesUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.contents.incompleteIssuesSum.text, showEpicColumn: opt_data.showEpicColumn}) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueList.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueList';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueTable = function(opt_data, opt_ignored) {
  return '<div class="ghx-scope-burndown-table-section">' + GH.tpl.reports.issueTable.renderIssueTable(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueTable.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueTable';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints = function(opt_data, opt_ignored) {
  return '<img class="ghx-infographic-trophy" src="' + soy.$$escapeHtml(opt_data.imageURL) + '"><p class="ghx-work-done-message">' + soy.$$escapeHtml(AJS.format("{0,choice,0#All issues are done!|1\x3c All estimated issues are done!}",opt_data.unestimatedIssuesCount)) + ((opt_data.unestimatedIssuesCount) ? ' ' + soy.$$escapeHtml(AJS.format("{0,choice,1#There is 1 unestimated issue.|1\x3cThere are {0} unestimated issues.}",opt_data.unestimatedIssuesCount)) : '') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent = function(opt_data, opt_ignored) {
  return '<h2><span class="aui-icon aui-icon-small aui-iconfont-success"></span> ' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\x3c{0,number} sprints} remaining",opt_data.sprintsRemaining)) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table class="ghx-stat-table"><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.velocity) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml("Velocity per sprint") + '</td></tr><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.workRemaining) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml("remaining") + '</td></tr></table><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage';
}


GH.tpl.reports.scopeBurndownBySprint.renderHelpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.helpUrl) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderHelpLink.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderHelpLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartDialog.js' */
(function(n,e,h,f,b){var j="scope-by-sprint-dlg";var k="#ghx-report-scrollarea > .aui-page-panel";var m="LL";var i;var d=null;h.preventCloseOnClick(j);function a(q,p){var o=p.formatter.formatFull;if(q.startTime&&q.endTime){q.formattedStartDate=moment(q.startTime).format(m);q.formattedEndDate=moment(q.endTime).format(m)}q.formattedWorkAtStart=o(q.workAtStart);q.formattedWorkAdded=o(q.workAdded);q.formattedWorkRemoved=o(q.workRemoved);q.formattedWorkCompleted=o(q.workCompleted);q.formattedWorkRemaining=o(q.workRemaining);return q}function c(r,o,q){var p="";if((!r.isForecast||r.isActive)&&r.sprintId!=="original"){p=b.buildBareRestUrl("secure/RapidBoard.jspa?rapidView="+r.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+r.sprintId)}return GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent({sprint:a(r,o),estimationStatistic:o,url:p,labels:q})}function l(p,s,o,r){if(g()&&s.sprintId===d){i.hide()}else{var q=n.select(p);q.classed("active",true);i=f.create(j,p,function(u,t,v){u.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");u.html(c(s,o,r));v()},{addActiveClass:false,container:k,fadeTime:0,noBind:true,cacheContent:false,hideDelay:60000,persistent:true,offsetX:8,hideCallback:function(){q.classed("active",false)}});d=s.sprintId;i.show()}return i}function g(){return i?i.is(":visible"):false}GH.Reports.ScopeBurndownBySprintChartDialog={show:l,hide:function(){if(i){i.hide();d=null}},isVisible:g}}(d3,GH.Reports,GH.InlineDialog,GH.SideInlineDialog,GH.Ajax));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChart.js' */
(function(g,n,h,m,f,a){var e=80;var o=40;var l=25;var i=320;var k=20;function d(p){return p.workRemaining-j(p)}function j(q){var p=Math.max(0,q.workAdded-q.workRemoved);return Math.min(q.workRemaining,p)}function b(p){return p.isForecast&&!p.isActive}function c(){var v=function(){return h.floatingBarChart().baselineAccessor(function(B){return B.baseline}).xAccessor(function(B){return B.sprintId}).yAccessor(function(B){return B.baseline+B.workCompleted+d(B)+j(B)}).maxBarWidth(e).extend({emptyBarHeight:h.prop(l),labelAccessor:function(){return function(B){return B.isActive?AJS.format("{0} (active)",B.sprintName):B.sprintName}},isCollapsedBar:function(){return function(B){return !!B.collapsed}},isEmptyBar:function(){var C=this.baselineAccessor();var D=this.yAccessor();var B=this.isCollapsedBar();return function(E){return !B(E)&&D(E)===C(E)}},barHeight:function(){var C=this.baselineAccessor();var E=this.yAccessor();var D=this.yScale();var F=this.isEmptyBar();var B=this.emptyBarHeight();return function(G){return F(G)?B:D(C(G))-D(E(G))}},data:function(){return w.sprints()}}).update(function(D){var B=this.x();var F=this.y();var E=this.isEmptyBar();var C=this.emptyBarHeight();D.selection.attr("transform",function(I,G){var H=F(I,G);if(E(I)){H-=C}return"translate("+B(I,G)+","+H+")"})})};var t=function(){var B=h.stack().classPrefix("ghx").showLabels(true).extend({barWidth:h.prop(),labelAccessor:function(){return function(C){return C[2]||""}},labelFormatter:h.prop()});B.data.get(function(G){if(!G){return[]}var E=j(G);var C=d(G);var D=this.labelFormatter();var F=[];F.push([E+C,G.workCompleted,G.workCompleted?"-"+D(G.workCompleted):""]);F.push([E,C,D(C)]);F.push([0,E,E?"+"+D(E):""]);return F});return B};var r=function(){return h.drawable().extend(h.withDimensions()).enter(function(C){var B=C.selection;B.append("rect").classed("ghx-series-0",true);B.append("text").classed("ghx-series-label-0 bar-label",true);B.append("polyline").classed("ghx-bar-underlined",true)}).update(function(E){var C=this.height();var D=this.width();var B=E.selection;B.selectAll("rect").attr("height",C).attr("width",D);B.selectAll("text").attr("x",D/2).attr("y",C/2).attr("dy","0.45em").text(0);B.selectAll("polyline").attr("points","0,"+C+" "+D+","+C)})};var u=function(){var B=n.scale.linear().domain([o,e]).range([3,5]);return h.circlePlot().extend({yRange:function(){var C=this.height();return[0,C]},radiusAccessor:function(){var C=this.width();return function(){return B(C)}}}).elementClass("ghx-ellipsis").data([[0,0],[1,0],[2,0]]).xDomain([-1,3]).yDomain([-1,1])};var A=function(){return h.drawable().extend(h.withDimensions()).elementClass("ghx-collapsed-sprint").extend({ellipsisHeight:function(){return this.width()*0.5}}).enter(function(B){B.selection.append("text").attr({"text-anchor":"middle",y:-this.ellipsisHeight(),dy:"-.4em"})}).update(function(C){var B=this.width();C.selection.select("text").each(function(E){var D=n.select(this).text(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\u003c{0,number} sprints} not shown",E));h.utils.wrapText(D,B,true)});u().height(-this.ellipsisHeight()).width(B)(C.selection)})};var z=function(){return v().elementTag("g").showLabels(true).update(function(F){var E=this.barWidth();var B=this.barHeight();var H=this.isEmptyBar();var C=this.isCollapsedBar();var D=w.data().estimationStatistic.formatter.formatCompact;var G=this.showLabels();F.selection.each(function(M){var J=B(M);var I=C(M);var K=H(M);var L=n.select(this).classed("ghx-prediction",M.isForecast);t().elementClass("ghx-stack").height(J).barWidth(E).showLabels(G).labelFormatter(D).data(!I&&!K?M:null)(L);r().elementClass("ghx-zero-value-sprint").height(J).width(E).data(K?[0]:[])(L);A().width(E).data(I?[M.collapsed]:[])(L)})})};var q=h.labelledAxis().height(60).text("Sprints").orient("bottom").axisConstructor(function(){return n.svg.axis().outerTickSize(0)});var p=h.labelledAxis().width(50).orient("left").extend({text:function(){return w.data().estimationStatistic.name}}).axisConstructor(function(){var B=w.data().estimationStatistic.formatter.formatCompact;return n.svg.axis().outerTickSize(0).tickFormat(function(C){return B(Math.abs(C))}).tickValues([0])});var y=h.layerable().addLayer("grid",h.gridLines().orient("left").extend({width:function(){return w.restrictedWidth()}})).addLayer("divider",h.singular().extend(h.withDimensions()).elementTag("line").elementClass("chart-divider").update(function(B){B.selection.attr({x1:w.restrictedWidth(),x2:w.restrictedWidth(),y1:-k,y2:this.height()+k})})).addLayer("border",h.drawable().extend(h.withDimensions()).data([{from:[0,0],to:[1,0]},{from:[1,0],to:[1,1]}]).elementTag("line").update(function(C){var B=n.scale.linear().domain([0,1]).range([0,this.width()]);var D=n.scale.linear().domain([0,1]).range([0,this.height()]);C.selection.each(function(E){return n.select(this).attr({x1:B(E.from[0]),y1:D(E.from[1]),x2:B(E.to[0]),y2:D(E.to[1])})})})).addLayer("sprints",z().elementClass("ghx-bar-sprint").dataFilter(function(B){return m.reject(B,b)})).addLayer("forecastSprints",z().elementClass("ghx-bar-sprint").showLabels(false).dataFilter(function(B){return m.filter(B,function(C){return b(C)&&C.workAtStart>0})})).addLayer("dialogTargets",v().enter(function(B){a.hide();B.selection.on("click.dialog",function(D){var C=w.data();D.rapidViewId=C.rapidViewId;a.show(this,D,C.estimationStatistic,C.labels)})}).elementClass("ghx-clickable-bar-sprint").dataFilter(function(B){return m.reject(B,b)}));var w=h.component().extend(function(){var B=this.data().sprints;var L=this.positions().center.width;var M=L-i;var P=v();var D=P.padding();var C=P.outerPadding();var J=o/(1-D);var N=e/(1-D);var F=Math.max(Math.min(M/B.length,N),J);var I=Math.max(Math.ceil(i/F),Math.ceil((L-N*B.length)/F));var H=Math.floor((L-J*(2*C-D))/J);var E=B.length+I-H+1;if(E>1){var Q=B[1+E];B=B.slice();B.splice(1,E,{sprintId:"sprints collapsed",sprintName:"",baseline:Math.min(0,Q.baseline),workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:false,isActive:false,collapsed:E})}var G=this.data();var O=G.getForecast(I);var K=B.concat(O);F=L/(K.length+C);if(G.forecast.forecastError){this.restrictedWidth(F*(B.length+C*2-D))}else{this.restrictedWidth(F*(B.length+C-D/2))}this.sprints(K)}).extend(h.borderLayout()).extend(h.utils.defaultViewBox).center(y).north(h.withDimensions().height(25)).south(q).west(p).east(h.withDimensions().width(1)).extend({sprints:h.prop([]),restrictedWidth:h.prop(null),xDomain:function(){return m.pluck(this.sprints(),"sprintId")},yDomain:function(){var D=this.sprints();var C=m.min(m.pluck(D,"baseline"));var B=n.max(D,function(E){return E.baseline+E.workCompleted+j(E)+d(E)});return[C,B]}});var s=h.singular().extend(h.withDimensions()).elementTag("div").elementClass("ghx-infographic-overlay").update(function(B){var E=w.data();if(E.forecast.forecastError){B.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage({title:"No forecast available yet",description:E.forecast.forecastError,helpUrl:E.labels.helpUrl}))}else{if(E.forecast.sprintsRemaining===0){B.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints({unestimatedIssuesCount:E.forecast.remainingEstimatableIssueCount,imageURL:AJS.contextPath()+"/download/resources/"+g.getPluginKey()+"/images/trophy.svg"}))}else{B.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent({sprintsRemaining:E.forecast.sprintsRemaining,velocity:E.estimationStatistic.formatter.formatFull(E.forecast.velocity),workRemaining:E.estimationStatistic.formatter.formatFull(E.forecast.workRemaining),description:E.labels.forecastDescription(E.forecast.sprintsRemaining),estimationStatistic:E.estimationStatistic.name,helpUrl:E.labels.helpUrl}))}}var D=w.height();var H=w.width();var K=w.positions();var J=K.west.width+w.restrictedWidth();var C=H-J;var L=K.center.height;var M=B.selection.node().offsetHeight;var I=B.selection.node().offsetWidth;var G=J+C/2;var F=K.north.height+L/2;B.selection.style({left:G/H*100+"%",top:F/D*100+"%","margin-left":-I/2+"px","margin-top":-M/2+"px"})});var x=h.component().extend(h.withData()).extend(function(){var C=this.selection();var B=h.singular().elementTag("svg").elementClass("ghx-svg-chart");B(C);w.parent(this)(B.elements());s.parent(this)(C)});return x}GH.Reports.ScopeBurndownBySprintChart=c}(GH.Util,d3,c3,_,GH.NumberFormat,GH.Reports.ScopeBurndownBySprintChartDialog));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartHowTo.js' */
(function(e,d,c,b){function a(){var i=function(){return d.floatingBarChart().elementClass("ghx-bar-sprint").elementTag("g").yAccessor(function(j){return j[0]+c.reduce(j[1],function(k,l){return k+l},0)}).yDomain([-1,9]).update(function(l){var k=this.barWidth();var j=this.barHeight();l.selection.each(function(m){d.stack().classPrefix("ghx").height(j(m)).extend({barWidth:function(){return k},data:function(){var n=m[1];return[[n[0]+n[1],n[2]],[n[0],n[1]],[0,n[0]]]}})(e.select(this))})})};var g=i().data([[0,[0,8,0]],[0,[0,6,2]],[0,[0,4,2]],[0,[0,2,2]],[0,[0,0,2]]]);var f=i().data([[2,[0,6,0]],[0,[2,4.5,1.5]],[0,[0,5,1.5]],[2,[0,1.5,1.5]],[2,[0,0,1.5]]]);var h=i().data([[0,[0,6,1.5]],[0,[0,4.5,1.5]],[0,[0,3,1.5]],[0,[0,1.5,1.5]],[0,[0,0,1.5]]]).update(function(j){j.selection.classed("ghx-prediction",function(l,k){return k>=2})});return d.component("scopeBurndownBySprintChartHowTo").extend(b.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-scope-burndown-chart-svg",true)}).charts([g,f,h])}b.ScopeBurndownBySprintChartHowTo=a}(d3,c3,_,GH.Reports));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartLegend.js' */
(function(c,a){function b(){function e(j,l,k){return j.append("g").classed(l,true).append("rect").attr("width","100%").attr("height","100%").classed(k,true)}function i(j,m,n,l){var k=j.append("g").classed(m,true);k.append("rect").classed(n,true).attr({y:0,width:"100%",height:"50%"});k.append("rect").classed(l,true).attr({y:"50%",width:"100%",height:"50%"});return k}var h=function(j){e(j,"ghx-bar-sprint","ghx-series-0")};var g=function(j){e(j,"ghx-bar-sprint","ghx-series-1")};var f=function(j){e(j,"ghx-bar-sprint","ghx-series-2")};var d=function(j){i(j,"ghx-prediction","ghx-series-0","ghx-series-1")};return a.component("scopeBurndownBySprintChartLegend").extend(c()).charts([h,d,g,f])}GH.Reports.ScopeBurndownBySprintChartLegend=b}(GH.Reports.multipleCharts,c3));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/SprintBurnupChart.js' */
define("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-chart",["require"],function(c){var b=c("underscore");var d=c("jira-agile/d3");var a=c("jira-agile/rapid/global-events");var g;var e;a.on("pre-initialization",function(){g=c3;e=GH.FlotChartUtils});function f(){}f.prototype={hide:function(h){GH.Reports.SprintBurnupChartDialog.hide();h.html("")},show:function(m,i){i.html("");var l=GH.Reports.SprintBurnupChartScrubber();i=i.append("svg").attr("height",parseInt(i.style("height"))).attr("width",parseInt(i.style("width")));var k=[m.start,m.end];var q=[d.min(m.scope.concat(m.work),function(t){return t.value}),d.max([{value:8}].concat(m.scope.concat(m.work)),function(t){return t.value})];var p=g.component().extend(function(){l.enableScrubber();GH.Reports.SprintBurnupChartDialog.hide()}).extend(g.borderLayout()).extend(g.utils.defaultViewBox).extend({xDomain:function(){var t=k;b.each(t,function(u){g.checkIsNumber(u)});return t},yDomain:function(){var t=q;b.each(t,function(u){g.checkIsNumber(u)});return t},clusters:g.prop()}).xScaleConstructor(d.time.scale).yScaleConstructor(d.scale.linear);var j=g.labelledAxis().axisConstructor(function(){return d.svg.axis().tickFormat(function(t){return m.formatShortDate(t)})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Time").orient("bottom");var r=this.calculateYTicks(q[1],m.statisticField);var h=g.labelledAxis().axisConstructor(function(){return d.svg.axis().tickValues(r.tickValues).tickFormat(m.formatStatistic).ticks(8)}).width(60).text(m.statisticField.name).orient("left");var o=g.fillWithRect().elementClass("ghx-dragging");var n=this.buildGuideline(m);var s=g.component().extend(g.interactive().domContext(AJS.$("#ghx-chart-group")).region(o)).extend(g.layerable());if(m.now<m.end){s.addLayer("today-line",g.linePlot().extend({data:function(){return[[m.now,q[0]],[m.now,q[1]]]}}).elementClass("today-line")).addLayer("today-line-label",g.label().extend({width:function(){return p.xScale()(m.now)*2},height:function(){return p.yScale()(q[1])},orient:function(){return"bottom"},text:function(){return "Today"}}))}s.extend(l).addLayer("grid",g.gridLines().orient("left")).addLayer("non-work-days",g.areaPlot().extend({data:function(){return p.data().nonWorkPeriods.map(function(t){return[[t.start,q[0]],[t.start,q[1]],[t.end,q[1]],[t.end,q[0]]]}).reduce(function(t,u){return t.concat(u)},[])}}).elementClass("non-working-days")).addLayer("guideline",g.linePlot().extend({data:function(){return n}}).elementClass("guide-line")).addLayer("scope-projection",g.linePlot().extend({data:function(){var t=p.data().scope[m.scope.length-1];return[[t.timestamp,t.value],[m.end,t.value]]}}).elementClass("scope-projection-line")).addLayer("scope",this.steppedLinePlot().extend({data:function(){return p.data().scope.map(function(t){return[t.timestamp,t.value]})}}).elementClass("scope-line")).addLayer("work",this.steppedLinePlot().extend({data:function(){return p.data().work.map(function(t){return[t.timestamp,t.value]})}}).elementClass("work-line")).addLayer("filler",o).addLayer("scope-marker",g.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return p.data().scope.slice(1,-1)}}).enter(function(t){t.selection.on("click.dialog",function(u){GH.Reports.SprintBurnupChartDialog.show(this,m,u);l.hideScrubber()})}).elementClass("scope-line-marker")).addLayer("work-marker",g.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return p.data().work.slice(1,-1)}}).enter(function(t){t.selection.on("click.dialog",function(u){GH.Reports.SprintBurnupChartDialog.show(this,m,u);l.hideScrubber()})}).elementClass("work-line-marker"));p=p.center(s).north(g.withDimensions().height(20)).south(j).east(g.withDimensions().width(40)).west(h);p.data(m);p(i)},buildGuideline:function(j){var l=[[j.start,0]];var k=j.scope[j.scope.length-1].value;var i=j.end-j.start;j.nonWorkPeriods.forEach(function(m){i-=(m.end-m.start)});var h=0;j.nonWorkPeriods.forEach(function(o){var m=o.start-j.start;m-=h;var n=Math.min(m/i,1);l.push([o.start,n*k]);l.push([o.end,n*k]);h+=o.end-o.start});l.push([j.end,k]);return l},steppedLinePlot:function(){return g.component("steppedlinePlot").extend(g.linePlot()).update(function(i){var h=this.lineConstructor()().x(this.x()).y(this.y());h.interpolate("step-after");i.selection.attr("d",h(this.data())).attr("stroke","black").attr("fill","none")})},calculateYTicks:function(m,k){var l=e.calculateYAxis(m,k);var j=l.tickSize||l.minTickSize;var h;if(j){h=[];for(var i=0;i<=m;i+=j){h.push(i)}}return{tickValues:h}}};return f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/SprintBurnupChartLegend.js' */
(function(c,a){function b(){function e(i,k,j){return i.append("g").classed(k,true).append("line").attr("stroke-linecap","round").attr("x1","0").attr("y1","20").attr("x2","20").attr("y2","20").attr("transform","translate(-10,3), rotate(-45)").classed(j,true)}var g=function(i){e(i,"ghx-burnup-line-legend","completed-work")};var h=function(i){e(i,"ghx-burnup-line-legend","guideline")};var f=function(i){e(i,"ghx-burnup-line-legend","scope")};var d=function(i){e(i,"ghx-burnup-line-legend","scope-projection")};return a.component("sprintBurnupChartLegend").extend(c()).charts([f,d,g,h])}GH.Reports.SprintBurnupChartLegend=b}(GH.Reports.multipleCharts,c3));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/SprintBurnupTransformer.js' */
(function(v,t,o,u,r,l,j,k,f,n,i){function c(x){var y=e(x);x.chartData={now:x.now,start:x.startTime,startKeys:y.startKeys,end:x.completeTime||x.endTime,endKeys:y.endKeys,nonWorkPeriods:w(x.workRateData),scope:y.scope,work:y.done,statisticField:x.statisticField,rapidViewId:x.rapidViewId,estimatedIssueEvents:y.scope.filter(function(z){return z.value>0}).length};x.chartData.formatDate=function(z){return t.utc(z).format("lll")};x.chartData.formatShortDate=function(z){if(t.duration((t.utc(x.chartData.end).diff(x.chartData.start))).years()>0){return t.utc(z).format("MMM YYYY")}return t.utc(z).format("MMM D")};x.chartData.formatStatistic=function(z){return i.renderStatisticText(z,false,x.chartData.statisticField.renderer)};x.chartData.formatEventType=function(z){switch(z){case"estimate update":return "Estimate updated";case"issue done":return "Issue completed";case"issue not done":return "Issue re-opened";case"issue removed":return "Removed from sprint";case"issue added":return "Added to sprint";case"start event":return "Sprint Started";case"end event":return "Sprint Finished";default:return z}};return x}function p(A,z){var y=[];var x=[];A.forEach(function(E){var B=z[E.key];if(!B){B={key:E.key,prevEstimate:0,estimate:0,inSprint:false,done:false};z[E.key]=B}var D=false;var C=false;switch(E.type){case"estimate update":if(B.estimate!==E.newEstimate){B.prevEstimate=B.estimate;B.estimate=E.newEstimate;D=B.inSprint;C=B.inSprint&&B.done}break;case"issue done":if(!B.done){B.done=true;C=B.inSprint&&B.estimate>0}break;case"issue not done":if(B.done){B.done=false;C=B.inSprint&&B.estimate>0}break;case"issue removed":if(B.inSprint){B.inSprint=false;D=B.estimate>0;C=B.estimate>0&&B.done}break;case"issue added":if(!B.inSprint){B.inSprint=true;D=true;C=B.done}break}if(D){y.push(d("scope",E.timestamp,g(z,false),E,B))}if(C){x.push(d("done",E.timestamp,g(z,true),E,B))}});return{scope:y,done:x}}function m(x,z,y){return d(x,z,y,{type:"start event"},{})}function q(x,z,y){return d(x,z,y,{type:"end event"},{})}function d(z,A,x,D,y){D=D||{};y=y||{};var C=0;var B=0;if(D.type==="issue removed"){C=0;B=y.estimate}else{if(D.type==="issue added"){C=y.estimate;B=0}else{if(D.type==="issue not done"){C=0;B=y.estimate}else{C=y.estimate;B=y.prevEstimate}}}return{timestamp:A,value:x,change:{type:D.type,line:z,key:y.key,fromValue:B,toValue:C}}}function g(A,z){var B=0;for(var x in A){if(A.hasOwnProperty(x)){var y=A[x];if(y.inSprint){if((z&&y.done)||!z){B+=y.estimate}}}}return B}function e(C){var F=h(C.changes).sort(function(L,K){return L.timestamp>K.timestamp?1:(L.timestamp===K.timestamp)?0:-1});var E=parseInt(C.startTime);var z=C.completeTime||C.endTime;var B=C.now>z?z:C.now;var D={};p(F.filter(function(K){return K.timestamp<=E}),D);for(var I in D){if(D.hasOwnProperty(I)){var G=D[I];if(G.done){G.inSprint=false}}}var H=s(D);var J=[m("scope",E,g(D,false))];var A=[m("done",E,0,"start event")];var y=p(F.filter(function(K){return K.timestamp>E&&K.timestamp<=B}),D);var x=s(D);J=J.concat(y.scope);A=A.concat(y.done);J.push(q("scope",B,J[J.length-1].value));A.push(q("done",B,A[A.length-1].value));return{scope:J,done:A,startKeys:H,endKeys:x}}function s(x){return Object.keys(x).filter(function(z){var y=x[z];return !!y.inSprint}).sort(a)}function a(D,C){if(D===C){return 0}var B=/(\w+)-(\d+)/;var F=B.exec(D);if(!F){return -1}var A=B.exec(C);if(!A){return 1}var y=F[1];var x=A[1];if(y!==x){return y>x?1:-1}var z=parseInt(F[2],10);var E=parseInt(A[2],10);return z===E?0:(z>E?1:-1)}function h(z){var x=[];var y=function(B){if(B.column){if(B.column.notDone){x.push({type:"issue not done",key:B.key,timestamp:parseInt(A)})}else{if(!B.column.notDone){x.push({type:"issue done",key:B.key,timestamp:parseInt(A)})}}}if(B.statC&&B.statC.newValue){x.push({type:"estimate update",key:B.key,timestamp:parseInt(A),newEstimate:B.statC.newValue>0?B.statC.newValue:0})}if(B.added===false){x.push({type:"issue removed",key:B.key,timestamp:parseInt(A)})}if(B.added===true){x.push({type:"issue added",key:B.key,timestamp:parseInt(A)})}};for(var A in z){if(z.hasOwnProperty(A)){z[A].forEach(y)}}return x}function w(x){var y=[];x.rates.forEach(function(z){if(z.rate<1){y.push({start:z.start,end:z.end})}});return y}var b={getBurnupModelFromScopeBurndownModel:c};GH.Reports=GH.Reports||{};GH.Reports.SprintBurnupTransformer=b}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat,GH.ChartUtils));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.js' */
GH.Reports=GH.Reports||{};GH.Reports.controlChart=function(){var d=c3.component().extend(function(){this.clusters(d.data().getClusteredIssueSeries(20,this.xScale(),this.yScale()));if(d.data().issues.length>0){e.enableScrubber()}else{e.disableScrubber()}GH.Reports.ControlChartDialog.hide()}).extend(c3.borderLayout()).extend(c3.utils.defaultViewBox).extend({xDomain:function(){var i=d.data().bounds.x;_.each(i,function(j){c3.checkIsNumber(j)});return i},yDomain:function(){var i=d.data().bounds.y;_.each(i,function(j){c3.checkIsNumber(j)});return i},clusters:c3.prop()}).xScaleConstructor(d3.time.scale).yScaleConstructor(function(){if(d.data().bounds.y[1]<30){return d3.scale.linear()}else{return d3.scale.pow().exponent(1/3)}});var f=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(j){var i=moment(d.data().bounds.x[1]).diff(d.data().bounds.x[0],"days");return moment(j).format(i<2?"LLL":"LL")})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Issue Transition Date").orient("bottom");var b=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(i){return GH.NumberFormat.format(i)})}).width(60).text("Elapsed time (days)").orient("left");var c=function(){return c3.circlePlot().xAccessor(function(i){return i.point[0]}).yAccessor(function(i){return i.point[1]})};var a=d3.scale.log().domain([2,100]).range([6,15]).clamp(true);var h=c3.fillWithRect().elementClass("ghx-dragging");var e=GH.Reports.ControlChartScrubber();var g=c3.component().extend(c3.interactive().domContext(AJS.$("#ghx-chart-group")).region(h)).extend(c3.layerable()).extend(e).clipped(true).addLayer("standard-deviation",c3.deviationPlot().extend({data:function(){return d.data().series.standardDeviationArea}}).elementClass("standard-deviation")).addLayer("grid",c3.gridLines().orient("left")).addLayer("mean",c3.linePlot().extend({data:function(){return d.data().series.meanLine}}).elementClass("control-chart-mean")).addLayer("aggregate-mean",c3.linePlot().extend({data:function(){return d.data().series.rollingAverageLine}}).elementClass("control-chart-aggregate-mean")).addLayer("filler",h).addLayer("issues",c().extend({data:function(){return d.clusters().unclustered}}).enter(function(i){i.selection.on("click.dialog",function(j){GH.Reports.ControlChartDialog.show(this,j.issue);e.hideScrubber()})}).dataKey(function(i){return i.issue.key}).elementClass("issue")).addLayer("issue-clusters",c().extend({data:function(){return d.clusters().clustered}}).enter(function(i){i.selection.on("click.dialog",function(j){GH.Reports.ControlChartDialog.show(this,j.issues);e.hideScrubber()})}).dataKey(function(i){return i.point[0]}).elementClass("cluster").radiusAccessor(function(i){return a(i.size)}));return d.center(g).north(c3.withDimensions().height(10)).south(f).west(b)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartHowTo.js' */
GH.Reports=GH.Reports||{};GH.Reports.controlChartHowTo=function(){var a=_.range(8);var e=c3.circlePlot().data(_.zip(a,[0,2,1,1.5,2,0,11,1.2])).xDomain([-1,8]).yDomain([-2,14]).elementClass("issue").update(function(g){g.selection.each(function(h){if(h[1]===11){d3.select(this).classed("active",true)}})});var f=c3.linePlot().data(_.zip(a,[7,5,5.5,3.5,4,3,3,2])).yDomain([0,10]).elementClass("control-chart-aggregate-mean");var b=[4,6,3,4,5,4,4.5,4];var d=[4,4,3.5,2,2,1.5,1,1];var c=c3.layerable().xDomain([0,a.length-1]).yDomain([0,10]).addLayer("standard-deviation",c3.deviationPlot().data(_.zip(a,b,d)).elementClass("standard-deviation")).addLayer("rolling-average",c3.linePlot().data(_.zip(a,b)).elementClass("control-chart-aggregate-mean"));return c3.component("controlChartHowTo").extend(GH.Reports.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-control-chart-svg",true)}).charts([e,f,c])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartLegend.js' */
GH.Reports=GH.Reports||{};GH.Reports.controlChartLegend=function(){var f=[[0,0],[1,1]];var b=function(g){g.append("circle").attr("cx","50%").attr("cy","50%").attr("r",4).classed("issue",true)};var a=function(g){g.append("circle").attr("cx","50%").attr("cy","50%").attr("r",9).classed("cluster",true)};var c=c3.linePlot().data(f).elementClass("control-chart-mean");var e=c3.linePlot().data(f).elementClass("control-chart-aggregate-mean");var d=function(g){g.append("rect").attr("width","100%").attr("height","100%").classed("standard-deviation",true)};return c3.component("controlChartLegend").extend(GH.Reports.multipleCharts()).charts([b,a,c,e,d])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsModel.js' */
(function(){var b=false;function a(){}a.prototype={includeNonWorkingDays:b,resetToDefaults:function(){this.includeNonWorkingDays=b;return this},fromNormalized:function(c){if("includeNonWorkingDays" in c){this.includeNonWorkingDays=c.includeNonWorkingDays}else{this.resetToDefaults()}return this},toNormalized:function(){var c={};if(this.includeNonWorkingDays){c.includeNonWorkingDays=this.includeNonWorkingDays}return c},isDefault:function(){return(this.includeNonWorkingDays===b)}};GH.Reports.ControlChartViewingOptionsModel=a}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsModel.js' */
(function(a){function b(){}b.prototype={available:null,selected:null,setAvailable:function(c){this.available=c;this.fromNormalized(this.selected);return this},getDefaults:function(){if(!this.available){return null}var d=a.pluck(this.available.columns,"id");var c=d.length<3?[a.last(d)]:d.slice(1,-1);return{columnIds:c,swimlaneIds:a.pluck(this.available.swimlanes,"id"),quickFilterIds:[]}},resetToDefaults:function(){this.selected=this.getDefaults();return this},fromNormalized:function(e){e=e?a.pick(e,"columnIds","swimlaneIds","quickFilterIds"):{};var d={columnIds:"columns",swimlaneIds:"swimlanes",quickFilterIds:"quickFilters"};var c=this.available;if(c){a.each(e,function(h,g){var i=a.pluck(c[d[g]],"id");var f=a.intersection(e[g],i);if(f.length){e[g]=f}else{delete e[g]}})}this.selected=a.defaults(e,this.getDefaults());return this},toNormalized:function(){var e=this.getDefaults();var d=this.selected;var f={};if(!e){return a.extend(f,d)}function c(g){if(!a.isEqual(d[g].sort(),e[g].sort())){f[g]=d[g]}}c("columnIds");c("swimlaneIds");c("quickFilterIds");return f},isDefault:function(){return a.isEmpty(this.toNormalized())}};GH.Reports.ControlChartRefinementsModel=b})(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service",["require"],function(c){var r=c("underscore");var q=c("jira-agile/d3");var a=c("jira-agile/rapid/global-events");var l;var n;a.on("pre-initialization",function(){l=clusterVectors;n=GH.Ajax});var p=24*60*60*1000;var b=function(u){return u.duration};function t(v){var u={url:"/rapid/charts/controlchart.json",data:v};return n.get(u,"rapidChartData")}function k(v,z,x,u){var w=-1;var A=0;var y=[];r.each(x,function(B){var D=v.leaveTimes[B];if(D===z.currentTime){return}var C=u?v.totalTime[B]:v.workingTime[B];A+=C;y.push({name:z.columns[B].name,duration:C});if(D>w){w=D}});if(w===-1){return null}return{key:v.key,summary:v.summary,endTime:w,duration:A,columns:y}}function o(w,x){var u=[];x=x||{};r.each(w.columns,function(z,y){if(r.contains(x.refinements.selected.columnIds,z.id)){u.push(y)}});var v=r.compact(r.map(w.issues,function(y){return k(y,w,u,x.viewingOptions.includeNonWorkingDays)}));return r.sortBy(v,"endTime")}function j(w,x,v){var u=0;var z=0;r.each(x,function(A){if(v){A=v(A)}z=A-w;u+=(z*z)});var y=u/(x.length>0?x.length:1);return Math.sqrt(y)}function s(w,z,u,x,v){var y=new l(w,z,u,x,v);return{clustered:r.filter(y,function(A){return A.cluster}),unclustered:r.reject(y,function(A){return A.cluster})}}function h(D,u,z){var v=5;var E=0.2;var H={rollingAverageLine:[],standardDeviationArea:[],rollingAverageWindow:0,maxStandardDeviation:0};if(!u.length){return H}var w=Math.max(v,u.length*E);var F=Math.floor((w-1)/2);H.rollingAverageWindow=F*2+1;var C=r.indexOf(D,u[0]);var B=u[0].endTime>z.timeFrameTimes.from?Math.max(0,C-1):C;var x=r.last(u).endTime<z.timeFrameTimes.to?Math.min(D.length,C+u.length+1):C+u.length;var G=D.slice(B,x);r.each(G,function(K,M){var P=Math.max(0,B+M-F);var J=Math.min(D.length,B+M+F+1);var N=D.slice(P,J);var I=q.mean(N,b);var O=I/p;var L=j(I,N,b)/p;H.rollingAverageLine.push([K.endTime,O]);H.standardDeviationArea.push([K.endTime,O,L]);H.maxStandardDeviation=Math.max(H.maxStandardDeviation,O+L)});var A=r.last(H.rollingAverageLine);var y=r.last(H.standardDeviationArea);if(A[0]<z.timeFrameTimes.to){H.rollingAverageLine.push([z.timeFrameTimes.to,A[1]]);H.standardDeviationArea.push([z.timeFrameTimes.to,y[1],y[2]])}return H}function e(u,v){u/=p;return[[v.timeFrameTimes.from,u],[v.timeFrameTimes.to,u]]}function i(u,v){return r.filter(u,function(w){return v.timeFrameTimes.from<=w.endTime&&w.endTime<=v.timeFrameTimes.to})}function g(u,v){return{mean:q.mean(u,b),median:q.median(u,b),min:q.min(u,b),max:q.max(u,b),rollingAverageWindow:v}}function m(u){return r.map(u,function(v){return[v.endTime,v.duration/p]})}function f(w,y,z){var v=Math.ceil(q.max(w,b)/p);var u=Math.max(v,y);var x=u*1.1;return{x:[z.timeFrameTimes.from,z.timeFrameTimes.to],y:[0,x]}}function d(){}d._calculateRollingSeries=h;d.prototype={get:function(u,v){v=v||{};return this._getData(u,v).andThen(function(A){var x=o(A,v);var C=x.length?x[0].endTime:A.currentTime;v.timeFrame=v.timeFrame.clone();v.timeFrame.setBounds(new Date(C),new Date(A.currentTime));var B=v.timeFrame.getTimeFrameDates();v.timeFrameTimes={from:B.fromDate.getTime(),to:B.toDate.getTime()};var D=i(x,v);var w=h(x,D,v);var z=g(D,w.rollingAverageWindow);var y=m(D);return{issues:D,series:{meanLine:e(z.mean||0,v),rollingAverageLine:w.rollingAverageLine,standardDeviationArea:w.standardDeviationArea},stats:z,bounds:f(D,w.maxStandardDeviation,v),earliestTime:C,currentTime:A.currentTime,getClusteredIssueSeries:function(E,G,F){return s(y,D,E,G,F)}}})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_getData:function(v,w){var u={rapidViewId:v,swimlaneId:w.refinements.selected.swimlaneIds,quickFilterId:w.refinements.selected.quickFilterIds};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!r.isEqual(this._dataRequestParams,u)){this._dataRequestParams=u;this._dataPromise=t(u)}return this._dataPromise}};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller",["require"],function(f){var a={};var n=f("underscore");var m=f("jira-agile/rapid/global-events");var c=f("jira-agile/rapid/analytics-tracker");var e=f("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view");var g=f("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service");var q=f("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller");var l=f("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller");var o=new g();var i;var b;var d;var h;var k;var j;var p;m.on("pre-initialization",function(){i=GH.Reports.ChartTimeFrameModel;b=GH.Reports.ControlChartRefinementsModel;d=GH.Reports.ControlChartViewingOptionsModel;h=GH.ChartTimeFrames;k=GH.PromiseKeeper;j=GH.RapidBoard.State;p=GH.RapidViewConfig});a.id="controlChart";a.SETTINGS_KEY="chart.config.controlChart";a.displayed=false;a.rapidViewData=null;a.initPhasePromise=null;a.filterOptions=null;a.firstTimeLoadingData=true;a.analytics=new c("gh.report.controlChart");a.setRapidView=function(r){a.rapidViewData=r||{}};a.update=function(){a.saveFilterOptions();j.pushState();a.loadAndProcess()};a.show=function(){var r=a;var s=r.getFilterOptions();if(!r.initPhasePromise){r.initPhasePromise=p.fetchConfiguration(r.rapidViewData.id).done(function(t){s.refinements.setAvailable(n.pick(t,"columns","swimlanes","quickFilters"))})}r._dataPromiseKeeper=new k();r.initPhasePromise.done(function(){r.displayed=true;var v=a.getFilterOptions();var t=p.currentData.data.swimlaneStrategy==="custom";if(!t){s.refinements.selected.swimlaneIds=n.pluck(s.refinements.available.swimlanes,"id")}j.pushState();e.init();q.start(s.refinements);l.start(s.viewingOptions);a.loadAndProcess();var u="show."+(a.rapidViewData.sprintSupportEnabled?"scrum":"kanban");a.analytics.trigger(u)})};a.hide=function(){a.displayed=false;if(a._dataPromiseKeeper){a._dataPromiseKeeper.reset()}e.destroy();o.clearCache()};a.loadAndProcess=function(){e.showSpinner();var r=a.getFilterOptions();var s=o.get(a.rapidViewData.id,r);return a._dataPromiseKeeper.add(s).done(function(t){if(a.displayed){if(t.issues.length>0){e.hideBlankState()}else{e.showBlankState(r);a.analytics.trigger("blank")}a.processChartData(t)}}).always(function(t){if(t!=="abort"){e.hideSpinner()}})};a.getFilterOptions=function(){if(!a.filterOptions){var r=j.getBoardSetting(j.getRapidViewId(),a.SETTINGS_KEY,{});a.filterOptions={timeFrame:new i().fromNormalized(r),refinements:new b().fromNormalized(r),viewingOptions:new d().fromNormalized(r)}}return a.filterOptions};a.saveFilterOptions=function(){j.setBoardSetting(a.SETTINGS_KEY,a.getNormalizedFromInternal())};a.processChartData=function(u){var s=new Date(u.earliestTime);var r=new Date(u.currentTime);var v=a.getFilterOptions();v.timeFrame.setBounds(s,r);if(a.firstTimeLoadingData){var t=(r-s)/h.day;a.firstTimeLoadingData=false;if(v.timeFrame.isDefault()&&t<90){v.timeFrame.setAllTime();j.pushState()}}e.render(u,v.timeFrame)};a.isApplicable=function(r){return true};a.getNormalizedFromInternal=function(){var r=a.getFilterOptions();return n.extend({chart:a.id},r.timeFrame.toNormalized(),r.refinements.toNormalized(),r.viewingOptions.toNormalized())};a.updateInternalFromNormalized=function(r){var s=a.getFilterOptions();s.timeFrame.fromNormalized(r);s.refinements.fromNormalized(r);s.viewingOptions.fromNormalized(r);a.saveFilterOptions()};a.toUrl=function(r){return{days:r.days,from:r.from,to:r.to,column:r.columnIds,swimlane:r.swimlaneIds,quickfilter:r.quickFilterIds,nwd:r.includeNonWorkingDays}};a.getNormalizedFromUrl=function(u){function r(v){return n.isArray(v)?n.map(v,Number):[Number(v)]}function s(v){return(v===true.toString())}var t={};if("days" in u){t.days=isNaN(u.days)?u.days:Number(u.days)}if("to" in u){t.to=u.to}if("from" in u){t.from=u.from}if("column" in u){t.columnIds=r(u.column)}if("swimlane" in u){t.swimlaneIds=r(u.swimlane)}if("quickfilter" in u){t.quickFilterIds=r(u.quickfilter)}if("nwd" in u){t.includeNonWorkingDays=s(u.nwd)}return t};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartView.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view",["require"],function(d){var b={};var h=d("jquery");var q=d("jira-agile/d3");var p=d("jira/moment");var j=d("jira-agile/rapid/global-events");var a;var k;var o;var f;var l;var n;var i;var m;var c;var e;var g;j.on("pre-initialization",function(){a=d("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller");n=d("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller");k=GH.ChartView;o=GH.Reports.controlChart;f=GH.Reports.controlChartHowTo;l=GH.Reports.controlChartLegend;i=GH.Layout;m=GH.RapidViewConfig;c=GH.TimeFormat;e=GH.NumberFormat;g=GH.ChartTimeFrames});b.$timeWindowSelect=null;b.$fromDateInput=null;b.$toDateInput=null;b.$timeFrameResetLink=null;b.ControlChart=null;b.bindingToModel=false;b._firstRender=null;b.init=function(){b._firstRender=true;var t=m.currentData.data.swimlaneStrategy;k.getChartContentElem(true).html(GH.tpl.reports.controlChart.renderChartBody({shouldShowSwimlaneRefine:t==="custom"}));k.getChartLegendD3(true).html(GH.tpl.reports.controlChart.renderLegend());h("#ghx-chart-header-secondary .ghx-chart-legend").show();var r=new f();r(q.select(".ghx-group-how"));var s=new l();s(q.select(".ghx-chart-legend"));b.renderControls();b.renderChartSelector();b.ControlChart=new o();b.bindToWindowResize()};b.destroy=function(){b.unbindToWindowResize()};b.render=function(s,r){b.bindModelToView(s,r);if(!b._firstRender){k.showChartUpdatedToast()}b._firstRender=false};b.renderChart=function(){b.ControlChart(q.select("#control-chart .ghx-svg-chart"))};b.renderChartSelector=function(){k.getChartSelector(true).html(GH.tpl.reports.controlChart.renderChartSelector())};b.bindModelToChartHeader=function(v,u){var w=u.getTimeFrameDates();var r="LL";var t=GH.tpl.reports.controlChart.renderChartTimeWindow({fromDate:p(w.fromDate).format(r),toDate:p(w.toDate).format(r),timeFrame:u.timeFrame});h(".js-chart-time-window").text(t);var x=v.issues.length===0?"":GH.tpl.reports.controlChart.renderChartSnapshots({mean:c.formatSensibleShortDuration(v.stats.mean),median:c.formatSensibleShortDuration(v.stats.median),min:c.formatSensibleShortDuration(v.stats.min),max:c.formatSensibleShortDuration(v.stats.max),issueCount:e.format(v.issues.length)});k.getChartSnapshot(true).html(x);var s=h(".js-chart-legend-rollingaveragewindow");if(!v.stats.rollingAverageWindow){s.text("Not available")}else{s.text(AJS.format("{0,number} issue window",v.stats.rollingAverageWindow))}};b.bindModelToControls=function(s){b.bindingToModel=true;var t=s.getTimeFrameDates();var r=b.$timeFrameResetLink;b.$timeWindowSelect.val(s.getTimeFrame()).trigger("change");b.updateCustomDatesFields(t.fromDate,t.toDate);b.validateCustomDates();if(s.isDefault()){r.attr("aria-disabled","true").attr("title","Time scale is currently using default settings")}else{r.removeAttr("aria-disabled title")}b.bindingToModel=false};b.bindModelToChart=function(r){b.ControlChart.data(r);b.renderChart()};b.bindModelToView=function(s,r){b.bindModelToChart(s);b.bindModelToChartHeader(s,r);b.bindModelToControls(r)};b.bindToWindowResize=function(){i.bindDelayedWindowResize();h(GH).bind(i.EVENT_DELAYED_RESIZE+"."+a.id,function(){b.renderChart()})};b.unbindToWindowResize=function(){h(GH).unbind(i.EVENT_DELAYED_RESIZE+"."+a.id)};b.showBlankState=function(s){var r=h(GH.tpl.reports.controlChart.renderBlankStateMessage({canResetRefinements:!s.timeFrame.isDefault()||!s.refinements.isDefault()}));r.find(".js-options-reset").on("click",function(t){b.resetDefaultTimeWindow(t);n.resetToDefaults()});k.showBlankStateMessage(r)};b.hideBlankState=function(){k.hideBlankStateMessage()};b.showSpinner=function(){k.showSpinner()};b.hideSpinner=function(){k.hideSpinner()};b.handleTimeWindowChanged=function(r){if(b.bindingToModel){return}var t=b.$timeWindowSelect.val();if(t==="custom"){var s=b.getCustomDates();a.getFilterOptions().timeFrame.setSimpleDates(s.fromDate,s.toDate)}else{a.getFilterOptions().timeFrame.setDays(+t)}a.update()};b.renderControls=function(){Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-from",button:"js-option-timeframe-custom-from_trigger_c",align:"Tl",singleClick:true,cache:false,positionStyle:"fixed",ifFormat:g.dateFormat,showsTime:false});Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-to",button:"js-option-timeframe-custom-to_trigger_c",align:"Tl",singleClick:true,cache:false,positionStyle:"fixed",ifFormat:g.dateFormat,showsTime:false});b.$timeWindowSelect=h("#js-option-timeframe");b.$fromDateInput=h("#js-option-timeframe-custom-from");b.$toDateInput=h("#js-option-timeframe-custom-to");b.$timeFrameResetLink=h("#js-option-timeframe-reset");b.$timeWindowSelect.change(b.handleTimeWindowChanged);b.$fromDateInput.change(b.handleCustomDateSelected);b.$toDateInput.change(b.handleCustomDateSelected);b.$timeFrameResetLink.click(b.resetDefaultTimeWindow)};b.handleCustomDateSelected=function(){if(b.bindingToModel){return}if(b.validateCustomDates()){b.$timeWindowSelect.val("custom");var r=b.getCustomDates();a.getFilterOptions().timeFrame.setSimpleDates(r.fromDate,r.toDate);a.update()}};b.getCustomDates=function(){var s=b.$fromDateInput.val();var r=b.$toDateInput.val();return{fromDate:Date.parseDate(s,g.dateFormat),toDate:Date.parseDate(r,g.dateFormat),fromText:s,toText:r}};b.updateCustomDatesFields=function(s,r){b.$fromDateInput.val(s.print(g.dateFormat));b.$toDateInput.val(r.print(g.dateFormat))};b.resetDefaultTimeWindow=function(r){if(b.bindingToModel){return}a.getFilterOptions().timeFrame.resetToDefault();a.update();r.preventDefault()};b.validateCustomDates=function(){var t=b.getCustomDates();var r=true,s="";if(!t.fromDate||!t.toDate){s=AJS.format("Date format should be as follows: {0}",g.getDateAsText(new Date()));r=false}else{if(!g.isValidDate(t.fromText)||!g.isValidDate(t.toText)){s=AJS.format("Date format should be as follows: {0}",g.getDateAsText(new Date()));r=false}else{if(t.fromDate>t.toDate){s="From-date must be before to-date";r=false}}}b.setTimeFrameError(s);return r};b.setTimeFrameError=function(r){h(".js-timeframes-error").html(r)};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsView.js' */
GH.Reports.ControlChartRefinementsView=(function(i,k,j,f){var d=null;var h=null;var a=i.noop;var r;var m;var n;var b;var l=true;function q(y,A,t,x){var z=y.find("select");var v=y.find(".ghx-refinement-selector");var u=_.map(d.available[A],function(B){return{value:B.id,label:B.name,selected:false}});z.empty().append(GH.tpl.reports.controlChart.renderSelectOptions({options:u}));var w=new f({element:z,itemAttrDisplayed:"label"});w.$container.addClass("hidden").append(GH.tpl.reports.controlChart.renderRefineInfoMessage({message:x}));var s=j.create({content:w.$container,offsetTarget:v,width:"auto"});v.on("click",function(B){B.preventDefault();s.toggle();w.$field.focus()});w.model.$element.on("unselect selected",function(){if(l){if(e()){d.selected[t]=_.map(w.model.getSelectedValues(),function(B){return +B});g()}else{setTimeout(function(){c()},0)}}});return{multiSelect:w,$button:v}}function e(){var t=(r.multiSelect.model.getSelectedValues().length>0);var s=m?(m.multiSelect.model.getSelectedValues().length>0):true;return(t&&s)}function p(u){h=null;var t=GH.RapidViewConfig.currentData.data.swimlaneStrategy;var s=t==="custom";r=q(u.find("#js-options-refine-columns"),"columns","columnIds","At least one column must be selected");if(s){m=q(u.find("#js-options-refine-swimlanes"),"swimlanes","swimlaneIds","At least one swimlane must be selected")}n=q(u.find("#js-options-refine-quickfilters"),"quickFilters","quickFilterIds","");b=u.find(".js-reset-btn").on("click",function(v){v.preventDefault();o()})}function g(){if(!_.isEqual(d.toNormalized(),h)){if(h!==null){a("modelChanged")}c();h=d.toNormalized()}}function c(){l=false;t(r,d.selected.columnIds);t(m,d.selected.swimlaneIds);t(n,d.selected.quickFilterIds);function t(w,u){if(w){w.multiSelect.clear();_.each(u,function x(y){var z=w.multiSelect.model.getDescriptor(y.toString());w.multiSelect.selectItem(z,true)});var v=s(w.multiSelect.model.$element);w.$button.find(".ghx-refinement-wrap").text(v||"None")}}function s(u){var v=u.find("option:selected").map(function w(){return this.text}).get().join(", ");return v}if(d.isDefault()){b.attr("aria-disabled","true")}else{b.removeAttr("aria-disabled")}l=true}function o(){a("resetToDefaults")}return{start:function(s){d=s;p(i("#ghx-controlchart-refine-options"))},digest:function(){g()},setHandler:function(s){a=s},getModel:function(){return d}}}(AJS.$,AJS.I18n,AJS.InlineLayer,AJS.CheckboxMultiSelect));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller",["require"],function(e){var b=GH.Reports.ControlChartRefinementsView;var f;var a=e("jira-agile/rapid/global-events");a.on("pre-initialization",function(){f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var d={modelChanged:function(){f.update()},resetToDefaults:function(){b.getModel().resetToDefaults();b.digest()}};function c(){b.setHandler(function(g){d[g]()})}return{start:function(g){c();b.start(g);b.digest()},resetToDefaults:d.resetToDefaults}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsView.js' */
GH.Reports.ControlChartViewingOptionsView=(function(c){var f=null;var i=null;var j=c.noop;var g;var e;var b=true;function a(l){i=null;g=l.find("#js-option-nwd").on("change",function(){if(b){f.includeNonWorkingDays=this.checked;h()}});e=l.find(".js-reset-btn").on("click",function(m){m.preventDefault();k()})}function h(){if(!_.isEqual(f.toNormalized(),i)){if(i!==null){j("modelChanged")}d();i=f.toNormalized()}}function d(){b=false;g.prop("checked",f.includeNonWorkingDays);if(f.isDefault()){e.attr("aria-disabled","true")}else{e.removeAttr("aria-disabled")}b=true}function k(){j("resetToDefaults")}return{start:function(l){f=l;a(c("#ghx-controlchart-viewing-options"))},digest:function(){h()},setHandler:function(l){j=l},getModel:function(){return f}}}(AJS.$));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller",["require"],function(e){var b=GH.Reports.ControlChartViewingOptionsView;var f;var a=e("jira-agile/rapid/global-events");a.on("pre-initialization",function(){f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var d={modelChanged:function(){f.update()},resetToDefaults:function(){b.getModel().resetToDefaults();b.digest()}};function c(){b.setHandler(function(g){d[g]()})}return{start:function(g){c();b.start(g);b.digest()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDialog.js' */
GH.Reports=GH.Reports||{};GH.Reports.ControlChartDialog=(function(){var f="control-chart-issues";var g="#ghx-report-scrollarea > .aui-page-panel";var b=GH.TimeFormat.formatShortDuration;var e;GH.InlineDialog.preventCloseOnClick(f);function c(k){_.each(k.columns,function(l){l.formattedDuration=b(l.duration)});k.formattedDuration=b(k.duration);return k}function a(k){var l=function(m){return m.duration};return[{label:"Max time",value:b(d3.max(k,l))},{label:"Average time",value:b(d3.mean(k,l))},{label:"Min time",value:b(d3.min(k,l))}]}function i(k){return GH.tpl.reports.controlChart.renderDialogIssueContent({issue:c(k),url:GH.Ajax.CONTEXT_PATH+"/browse/"+encodeURIComponent(k.key)})}function h(l){var k=_.pluck(l,"key");return GH.tpl.reports.controlChart.renderDialogClusterContent({issueCount:l.length,stats:a(l),url:GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(k.join(","))})}function j(l,k){var n=d3.select(l);n.classed("active",true);var m=_.isArray(k);e=GH.SideInlineDialog.create(f,l,function(p,o,q){p.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");p.html(m?h(k):i(k));q()},{addActiveClass:false,container:g,fadeTime:0,noBind:true,cacheContent:false,hideDelay:60000,persistent:true,hideCallback:function(){n.classed("active",false)}});e.show();return e}function d(){return e?e.is(":visible"):false}return{show:j,hide:function(){if(e){e.hide()}},isVisible:d}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubberDialog.js' */
GH.Reports.ControlChartScrubberDialog=(function(){var n;var o;var s=true;var t="scrubber-dialog";var a="#ghx-chart-group";var d={container:a,fadeTime:0,noBind:true,cacheContent:false,hideDelay:60000,width:230,closeOthers:false,persistent:true,addActiveClass:false};function b(u){return moment(u).format("LLL")}function p(u){return moment(u).format("LL")}function m(v){o=v;n=GH.SideInlineDialog.create(t,v,function u(x,w,y){x.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog");x.addClass("ghx-scrubber-contents");x.next("#arrow-"+t).addClass("ghx-arrow-scrubber-dialog");y()},d);h()}function f(){s=false}function c(){s=true}function r(){if(!GH.Reports.ControlChartDialog.isVisible()&&s){n.show()}}function h(){GH.InlineDialog.registerInlineDialogHacks(t,{validateClickToCloseFn:function u(){return false}})}function j(){if(n){n.hide()}}function e(u){q();i(u);n.refresh()}function i(u){var v;if(u.time){v=GH.tpl.reports.controlChart.renderScrubberDialogContent({indicatedTime:k(u.time),rollingAverage:GH.Util.roundToDecimalPlaces(u.rollingAverage,1),standardDeviation:GH.Util.roundToDecimalPlaces(u.standardDeviation,1)})}else{v=GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent({startTime:k(u.startTime),endTime:k(u.endTime)})}g().find(".ghx-scrubber-contents").html(v)}function k(v){var u=GH.Reports.ControlChartController.getFilterOptions().timeFrame;var w=u.getTimeFrameDuration()/GH.ChartTimeFrames.day;if(w>30){v=p(v)}else{v=b(v)}return v}function g(){return AJS.$("#inline-dialog-"+t)}function q(){if(!l()){r()}}function l(){return n?n.is(":visible"):false}return{init:m,show:r,hide:j,isVisible:l,refresh:e,disable:f,enable:c}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubber.js' */
GH.Reports.ControlChartScrubber=function(){var a=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.ControlChartDialog.isVisible()});var d=GH.Reports.ControlChartBrush();function h(){GH.Reports.ControlChartScrubberDialog.disable()}function k(){GH.Reports.ControlChartScrubberDialog.enable()}function f(){GH.Reports.ControlChartScrubberDialog.show()}function c(){GH.Reports.ControlChartScrubberDialog.hide()}function e(){a.hideScrubber()}function i(){d.cancelDrag()}function b(n,o){var m={};if(n.rollingAverageLine.length&&n.rollingAverageLine[0][0]<=o){var l=GH.Util.indexOf(n.rollingAverageLine,function(p){return p[0]<=o},true);m.rollingAverage=n.rollingAverageLine[l][1];m.standardDeviation=n.standardDeviationArea[l][2]}return m}function j(){var m=this.mouseCoordinates();var p=this.xScale().invert;if(m){if(d.isDragging()){var l=d.currentRange();GH.Reports.ControlChartScrubberDialog.refresh({startTime:p(l[0]),endTime:p(l[1])})}else{var o=p(m[0]);var n=b(this.data().series,o);GH.Reports.ControlChartScrubberDialog.refresh({time:o,rollingAverage:n.rollingAverage,standardDeviation:n.standardDeviation})}}}function g(){var m=this.selection();a.parent(this);a.interactiveLayer(this);a(m);d.parent(this);d.interactiveLayer(this);d(m);GH.Reports.ControlChartScrubberDialog.init(a.elements()[0]);var l=this;d.onEndDrag(_.bind(j,l));this.mouseover(function(){f.call(l)});this.mousemove("ccscrubber",function(){j.call(l)});this.mouseout(function(){c.call(l)})}return c3.component().extend(_.once(g)).extend(i).extend({hideScrubber:e,disableScrubber:h,enableScrubber:k})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ControlChartBrush.js' */
GH.Reports.ControlChartBrush=function(){return c3.brush().elementClass("ghx-chart-brush").enter(function(){var a=this;AJS.$(document).on("click mouseup",function(b){if(AJS.$(b.target).closest(a.parent().selection().node()).size()===0){a.cancelDrag()}});AJS.$(document).on("keydown",function(b){if(b.keyCode===27){a.cancelDrag()}})}).onDrag(function(){if(AJS.$(d3.event.target).closest(this.parent().selection().node()).size()>0){GH.Reports.ControlChartDialog.hide()}else{this.cancelDrag()}}).onEndDrag(function(b){var a=this;if(b[1]-b[0]<5){return}b=_.map(b,function(c){return a.parent().xScale().invert(c)});GH.Reports.ControlChartController.getFilterOptions().timeFrame.setSimpleDates(b[0],b[1]);GH.Reports.ControlChartController.update()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.soy' */
// This file was automatically generated from ControlChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.controlChart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.controlChart == 'undefined') { GH.tpl.reports.controlChart = {}; }


GH.tpl.reports.controlChart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="control-chart" class="ghx-control-chart-svg"><svg class="ghx-svg-chart"></svg></div></div><div id="ghx-chart-options" class="aui-group"><div id="ghx-chart-options-time" class="aui-item">' + GH.tpl.reports.controlChart.renderChartTimeOptions(null) + '</div><div id="ghx-chart-options-refine" class="aui-item">' + GH.tpl.reports.controlChart.renderChartRefineOptions(opt_data) + '</div><div id="ghx-chart-options-view" class="aui-item">' + GH.tpl.reports.controlChart.renderChartViewingOptions(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartBody.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartBody';
}


GH.tpl.reports.controlChart.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2><p>' + soy.$$escapeHtml("There are either no issues on this board, or all the issues have been filtered out by the chart refinements.") + '</p>' + ((opt_data.canResetRefinements) ? '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-options-reset'], text: "Reset the report filters"}) + '</p>' : '<p>' + soy.$$escapeHtml("Change the filter values for this report below") + '</p>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderBlankStateMessage';
}


GH.tpl.reports.controlChart.renderChartSnapshots = function(opt_data, opt_ignored) {
  return '<div class="ghx-chart-snapshot"><dl><dt class="js-chart-snapshot-mean">' + soy.$$escapeHtml(opt_data.mean) + '</dt><dd>' + soy.$$escapeHtml("Average") + '</dd></dl><dl><dt class="js-chart-snapshot-median">' + soy.$$escapeHtml(opt_data.median) + '</dt><dd>' + soy.$$escapeHtml("Median") + '</dd></dl><dl><dt class="js-chart-snapshot-min-time">' + soy.$$escapeHtml(opt_data.min) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("Min {0}","Time")) + '</dd></dl><dl><dt class="js-chart-snapshot-max-time">' + soy.$$escapeHtml(opt_data.max) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("Max {0}","Time")) + '</dd></dl><dl><dt class="js-chart-snapshot-issue-count">' + soy.$$escapeHtml(opt_data.issueCount) + '</dt><dd>' + soy.$$escapeHtml("Issues") + '</dd></dl></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSnapshots.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSnapshots';
}


GH.tpl.reports.controlChart.renderChartSelector = function(opt_data, opt_ignored) {
  return '<div class="ghx-time-window js-chart-time-window"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSelector.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSelector';
}


GH.tpl.reports.controlChart.renderChartTimeWindow = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.timeFrame) {
    case 0:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"All Time"));
      break;
    case 7:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past Week"));
      break;
    case 14:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 2 Weeks"));
      break;
    case 30:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past Month"));
      break;
    case 90:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 3 Months"));
      break;
    case 180:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 6 Months"));
      break;
    default:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Custom"));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeWindow.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeWindow';
}


GH.tpl.reports.controlChart.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Issue") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Cluster of issues") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Average") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Rolling average") + '<div class="ghx-description js-chart-legend-rollingaveragewindow"></div></li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Standard deviation") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderLegend.soyTemplateName = 'GH.tpl.reports.controlChart.renderLegend';
}


GH.tpl.reports.controlChart.renderChartTimeOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Time scale") + '</h5><form class="aui"><fieldset><div class="field-group"><label for="js-option-timeframe">' + soy.$$escapeHtml("Timeframe") + '</label><select class="select" id="js-option-timeframe" title="' + soy.$$escapeHtml("Timeframe") + '"><option value="7">' + soy.$$escapeHtml("Past Week") + '</option><option value="14">' + soy.$$escapeHtml("Past 2 Weeks") + '</option><option value="30">' + soy.$$escapeHtml("Past Month") + '</option><option value="90">' + soy.$$escapeHtml("Past 3 Months") + '</option><option value="180">' + soy.$$escapeHtml("Past 6 Months") + '</option><option value="0">' + soy.$$escapeHtml("All Time") + '</option><option value="custom">' + soy.$$escapeHtml("Custom") + '</option></select></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml("Custom dates") + '</label><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-from_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit date") + '">' + soy.$$escapeHtml("Edit") + '</span><input class="text" type="text" id="js-option-timeframe-custom-from"></div><span class="ghx-conjunction">' + soy.$$escapeHtml("to") + '</span><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-to_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit date") + '">' + soy.$$escapeHtml("Edit") + '</span><input class="text" type="text" id="js-option-timeframe-custom-to"></div><div class="ghx-error js-timeframes-error"></div></div></fieldset><fieldset>' + aui.buttons.button({id: ['js-option-timeframe-reset'], extraClasses: ['js-reset-btn', 'js-options-timeframe-reset', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeOptions';
}


GH.tpl.reports.controlChart.renderChartRefineOptions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<h5>' + soy.$$escapeHtml("Refine report") + '</h5><form id="ghx-controlchart-refine-options" class="aui">' + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-columns', label: "Columns"}) + ((opt_data.shouldShowSwimlaneRefine) ? GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-swimlanes', label: "Swimlanes"}) : '') + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-quickfilters', label: "Quick Filters"}) + '<fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'js-options-refine-reset', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartRefineOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartRefineOptions';
}


GH.tpl.reports.controlChart.renderRefineOption = function(opt_data, opt_ignored) {
  return '<fieldset><div id="' + soy.$$escapeHtml(opt_data.id) + '" class="field-group"><label>' + soy.$$escapeHtml(opt_data.label) + '</label><button id="' + soy.$$escapeHtml(opt_data.id) + '-selector" type="button" class="ghx-refinement-selector aui-button aui-button-subtle ghx-drop-arrow"><div class="ghx-refinement-wrap"></div></button><select id="' + soy.$$escapeHtml(opt_data.id) + '-select" multiple="multiple" class="hidden"></select></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineOption.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineOption';
}


GH.tpl.reports.controlChart.renderRefineInfoMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-description ghx-sparkler-description js-options-refine-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineInfoMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineInfoMessage';
}


GH.tpl.reports.controlChart.renderSelectOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList158 = opt_data.options;
  var optionListLen158 = optionList158.length;
  for (var optionIndex158 = 0; optionIndex158 < optionListLen158; optionIndex158++) {
    var optionData158 = optionList158[optionIndex158];
    output += '<option' + ((optionData158.value) ? ' value="' + soy.$$escapeHtml(optionData158.value) + '"' : '') + ((optionData158.selected) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData158.label) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderSelectOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderSelectOptions';
}


GH.tpl.reports.controlChart.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-controlchart-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-nwd" /><label for="js-option-nwd">' + soy.$$escapeHtml("Include non-working days in calculations") + '</label></div></fieldset><fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartViewingOptions';
}


GH.tpl.reports.controlChart.renderDialogIssueContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> <span>' + soy.$$escapeHtml(opt_data.issue.summary) + '</span>';
  var columnList192 = opt_data.issue.columns;
  var columnListLen192 = columnList192.length;
  for (var columnIndex192 = 0; columnIndex192 < columnListLen192; columnIndex192++) {
    var columnData192 = columnList192[columnIndex192];
    output += GH.tpl.reports.controlChart.renderDialogItem({label: columnData192.name, value: columnData192.formattedDuration});
  }
  output += GH.tpl.reports.controlChart.renderDialogItem({label: "Cycle time", value: opt_data.issue.formattedDuration}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogIssueContent';
}


GH.tpl.reports.controlChart.renderDialogClusterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><strong>' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}",opt_data.issueCount)) + '</strong> <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml("View in Issue Navigator") + '</a>';
  var statList209 = opt_data.stats;
  var statListLen209 = statList209.length;
  for (var statIndex209 = 0; statIndex209 < statListLen209; statIndex209++) {
    var statData209 = statList209[statIndex209];
    output += GH.tpl.reports.controlChart.renderDialogItem(statData209);
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogClusterContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogClusterContent';
}


GH.tpl.reports.controlChart.renderDialogItem = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml(opt_data.label) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.value) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogItem';
}


GH.tpl.reports.controlChart.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.rollingAverage != null || opt_data.standardDeviation != null) ? '<table class="aui-table">' + ((opt_data.rollingAverage != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "Rolling average", value: AJS.format("{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}",opt_data.rollingAverage)}) : '') + ((opt_data.standardDeviation != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "Standard deviation", value: AJS.format("{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}",opt_data.standardDeviation)}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><table class="aui-table">' + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "From", value: opt_data.startTime}) + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "To", value: opt_data.endTime}) + '</table></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service",["require"],function(d){var h=d("underscore");var g=d("jira-agile/rapid/global-events");var c;var i;var e;g.on("pre-initialization",function(){c=GH.Ajax;i=GH.RapidViewConfig;e=GH.Reports.ScopeBurndownBySprintTransformer});function a(k){var j={url:"/rapid/charts/releaseburndownchart",data:k};return c.get(j,"rapidChartData")}function b(k,j){return e.getScopeBySprintData(k,j)}function f(){}f.prototype={get:function(k,j,l){return this._getData(k,j,l).andThen(function(m){m.rapidViewId=i.currentData.id;m.estimationStatistic=i.currentData.data.estimationStatistic;m.estimationStatistic.formatter=e.getEstimationStatisticFormatter(m.estimationStatistic.renderer);m.labels={originalEstimate:"Original estimate at start of version",workAdded:"added to version",workRemoved:"removed from version",forecastDescription:function(n){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this version.",n)},helpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Release+Burndown","isLocal":false}.url};return b(m,l.zeroBaseline)})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_transformData:b,_getData:function(l,j,m){var k={rapidViewId:l,versionId:j};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!h.isEqual(this._dataRequestParams,k)){this._dataRequestParams=k;this._dataPromise=a(k)}return this._dataPromise}};return f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service",["require"],function(d){var c=d("underscore");var a=d("jira-agile/rapid/global-events");var f;var h;a.on("pre-initialization",function(){f=GH.Ajax;h=GH.Reports.ScopeBurndownBySprintTransformer});function b(j){var i={url:"/rapid/charts/versionreport",data:j};return f.get(i,"versionReportData")}function g(i,j){i.showIssueEpic=true;return h.getIssuesBySprintData(i,j)}function e(){}e.prototype={get:function(k,i,j){return this._getData(k,i).andThen(function(l){l.rapidViewId=k;return g(l,j)})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_transformData:g,_getData:function(k,i){var j={rapidViewId:k,versionId:i};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!c.isEqual(this._dataRequestParams,j)){this._dataRequestParams=j;this._dataPromise=b(j)}return this._dataPromise}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReport.soy' */
// This file was automatically generated from ReleaseBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.releaseBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.releaseBurndownReport == 'undefined') { GH.tpl.reports.releaseBurndownReport = {}; }


GH.tpl.reports.releaseBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-release-burndown-report" class="ghx-scope-burndown-chart-svg ghx-release-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartBody';
}


GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoVersion) ? '<p>' + soy.$$escapeHtml("There are no versions on this board.") + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this version.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoVersion ? "Add versions in the Versions panel of the Backlog" : "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.releaseBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work completed") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work forecast") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work remaining") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work added") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderLegend';
}


GH.tpl.reports.releaseBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy35 = soy.$$escapeHtml(AJS.format("{0}% of issues do not have an estimate ({1} of {2})",opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml("Issue types that do not include the estimation statistic are not counted.") + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy35) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml("unestimated issues") + '</dd></dl>' : '') + '<dl class=\'ghx-completed-overview\'><dt>' + soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("completed ({0})",opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderSnapshot';
}


GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml("Align sprints at the base of the chart") + '</label><p class="ghx-description">' + soy.$$escapeHtml("Use this view to see trends in the scope for the version.") + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.releaseBurndownReport.renderVersionMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.name) + '</h3>' + ((opt_data.description) ? '<p>' + soy.$$escapeHtml(opt_data.description) + '</p>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Planned start date") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedStartDate ? opt_data.formattedStartDate : "None") + '</div></div><div class="aui-group"><div class="aui-item">' + ((opt_data.released) ? soy.$$escapeHtml("Release date") : soy.$$escapeHtml("Planned release date")) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedReleaseDate ? opt_data.formattedReleaseDate : "None") + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderVersionMetadata.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderVersionMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view",["require"],function(d){var g=d("jquery");var l=d("underscore");var p=d("jira-agile/d3");var n=d("jira-agile/rapid/events");var k=d("jira-agile/rapid/global-events");var m=d("jira-agile/rapid/ui/chart/chart-view");var f=d("jira-agile/rapid/ui/component/chart-picker");var c;var b;var h;var j;var a;var o;var e;k.on("pre-initialization",function(){c=GH.Reports.ScopeBurndownBySprintChart;b=GH.Reports.ScopeBurndownBySprintChartLegend;h=GH.Reports.ScopeBurndownBySprintChartHowTo;j=GH.Layout;a=GH.Ajax;o=GH.RapidViewConfig;e=GH.RapidBoard.ViewController});function i(){new n(this)}i.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:true,_model:null,init:function(q){this._model=q;m.getChartContentElem(true).html(GH.tpl.reports.releaseBurndownReport.renderChartBody());m.getChartLegendD3(true).html(GH.tpl.reports.releaseBurndownReport.renderLegend()).show();this._renderOptions();this._versionPicker=new f("releaseBurndown.selectedVersionId","There are currently no versions on this board.");g(this._versionPicker).on("selectedItemChanged",l.bind(this._handleVersionSelected,this));this._chart=new c();this._legend=new b();this._howTo=new h();this._renderLegend();this._renderHowTo()},destroy:function(){this._chart=null;this._legend=null;this._howTo=null;m.getChartContentElem(true).empty();m.getChartLegendD3(true).empty();g(GH).unbind(j.EVENT_DELAYED_RESIZE+".releaseBurndownReport")},setVersions:function(q){this._versionPicker.setItems(q);this._versionPicker.setDefaultItem(q[0])},update:function(q){this._versionPicker.setSelectedItem(q.version.id,true);this._versionPicker.render(m.getChartSelector(true));this._chart.data(q);this._renderChart();this._renderSnapshot(q);this._renderVersionMetadata(q);if(this._firstRender){j.bindDelayedWindowResize();g(GH).bind(j.EVENT_DELAYED_RESIZE+".releaseBurndownReport",l.bind(this._handleWindowResized,this))}else{m.showChartUpdatedToast()}this._firstRender=false},updateTable:function(q){this._renderTable(q)},showBlankState:function(s,q){var r=g(GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage({planModeUrl:a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+o.currentData.data.id+"&view=planning&versions=visible",hasNoVersion:s,hasNoEstimatedStories:q}));r.find(".js-plan-mode").on("simpleClick",function(t){t.preventDefault();e.setMode("plan")});m.showBlankStateMessage(r)},hideBlankState:function(){m.hideBlankStateMessage()},showSpinner:function(){m.showSpinner()},hideSpinner:function(){m.hideSpinner()},_renderSnapshot:function(q){var r=30;var t=q.snapshot.estimatableIssueCount-q.snapshot.estimatedIssueCount;var u=q.snapshot.estimatableIssueCount>0?Math.round((t/q.snapshot.estimatableIssueCount)*100):0;var s=q.snapshot.issueCount===0?"":GH.tpl.reports.releaseBurndownReport.renderSnapshot({estimatableIssuesCount:q.snapshot.estimatableIssueCount,unestimatedIssuesCount:t,unestimatedIssuesPercentage:u,unestimatedIssuesThresholdExceeded:u>r,workCompleted:q.estimationStatistic.formatter.formatFull(q.snapshot.workCompleted),workTotal:q.estimationStatistic.formatter.formatFull(q.snapshot.workCompleted+q.snapshot.workRemaining),estimationStatistic:q.estimationStatistic.name,shouldShowUnestimatedIssues:q.estimationStatistic.typeId!=="issueCount"});g("#ghx-chart-snapshot").html(s);GH.Tooltip.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:true,className:"ghx-tipsy-left"})},_renderTable:function(q){m.getChartContentElem(true).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(l.extend({emptySprintMessage:"No issues completed this sprint for current version."},q)))},_renderLegend:function(){this._legend(p.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(p.select(".ghx-group-how"))},_renderChart:function(){this._chart(p.select("#ghx-release-burndown-report"))},_renderVersionMetadata:function(q){m.getChartContentElem(true).find(".ghx-version-metadata").html(GH.tpl.reports.releaseBurndownReport.renderVersionMetadata(q.version))},_renderOptions:function(){var q=this;g("#ghx-chart-options").html(GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions(this._model));g("#js-option-zero-baseline").on("change",function(){q.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleVersionSelected:function(q,r){this.trigger("versionSelected",r.item.id)},_handleWindowResized:function(){this._renderChart()}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller",["require"],function(d){var m=d("underscore");var l=d("jira-agile/rapid/global-events");var c=d("jira-agile/rapid/analytics-tracker");var j=d("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view");var i=d("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service");var a=d("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service");var f=new i();var e=new a();var h;var g;var k;l.on("pre-initialization",function(){h=GH.PromiseKeeper;g=GH.RapidBoard.State;k=new GH.VersionsDataService()});function b(){}b.id="releaseBurndown";b.prototype={SETTINGS_KEY:"chart.config.releaseBurndown",displayed:false,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(n){this._rapidViewData=n||{}},show:function(){this.displayed=true;this._tracker=new c("gh.report.releaseburndown");g.pushState();var n=this._view=new j();n.on("versionSelected",m.bind(function(p){this._model.versionId=p;this.update()},this)).on("optionChanged",m.bind(function(p){this._model.zeroBaseline=p.zeroBaseline;this._tracker.trigger("zeroBaseline."+(p.zeroBaseline?"on":"off"));this.update()},this));n.init(this._model);n.showSpinner();this._tracker.trigger("show");this._dataPromiseKeeper=new h();var o=k.getSimpleVersions(this._rapidViewData.id);this._dataPromiseKeeper.add(o).done(m.bind(function(p){if(!p.length){this._model.versionId=null;n.showBlankState(true,true);this._tracker.trigger("blank");n.hideSpinner()}else{p.reverse();if(this._model.versionId==null||!k.versionExists(p,this._model.versionId)){this._model.versionId=p[0].id}n.setVersions(p);this.update(true)}},this))},hide:function(){this.displayed=false;if(this._dataPromiseKeeper){this._dataPromiseKeeper.reset()}if(this._view){this._view.destroy();this._view=null}f.clearCache();e.clearCache()},update:function(p){if(p){g.replaceState()}else{g.pushState()}this.saveState();if(this._model.versionId==null){return}var n=this;n._view.showSpinner();var o=f.get(n._rapidViewData.id,n._model.versionId,{zeroBaseline:n._model.zeroBaseline});return n._dataPromiseKeeper.add(o).done(function(r){if(r.snapshot.estimatedIssueCount===0){n._view.showBlankState(false,true);n._tracker.trigger("blank")}else{n._view.hideBlankState()}n._view.update(r);var q=e.get(n._rapidViewData.id,n._model.versionId,r);n._dataPromiseKeeper.add(q).done(function(s){n._view.updateTable(s)})}).always(function(q){if(q!=="abort"){n._view.hideSpinner()}})},saveState:function(){g.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=g.getBoardSetting(g.getRapidViewId(),this.SETTINGS_KEY,{versionId:null,zeroBaseline:false})},isApplicable:function(n){return n.sprintSupportEnabled},getNormalizedFromInternal:function(){if(this._model===null){this.loadState()}return m.defaults(m.clone(this._model),{zeroBaseline:false})},updateInternalFromNormalized:function(n){this._model=n},toUrl:function(n){return{version:n.versionId!==null?n.versionId:undefined,zeroBaseline:n.zeroBaseline?true:undefined}},getNormalizedFromUrl:function(n){return{versionId:isNaN(n.version)?null:+n.version,zeroBaseline:n.zeroBaseline==="true"}}};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service",["require"],function(d){var h=d("underscore");var f=d("jira-agile/rapid/global-events");var c;var i;var e;f.on("pre-initialization",function(){c=GH.Ajax;i=GH.RapidViewConfig;e=GH.Reports.ScopeBurndownBySprintTransformer});function a(k){var j={url:"/rapid/charts/epicburndownchart",data:k};return c.get(j,"epicBurndownChartData")}function b(k,j){return e.getScopeBySprintData(k,j)}function g(){}g.prototype={get:function(k,j,l){return this._getData(k,j,l).andThen(function(m){m.rapidViewId=i.currentData.id;m.estimationStatistic=i.currentData.data.estimationStatistic;m.estimationStatistic.formatter=e.getEstimationStatisticFormatter(m.estimationStatistic.renderer);m.labels={originalEstimate:"Original estimate at start of epic",workAdded:"added to epic",workRemoved:"removed from epic",forecastDescription:function(n){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this epic.",n)},helpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-071/Epic+Burndown","isLocal":false}.url};m.epic={key:m.epicKey,summary:m.epicSummary,creationTime:m.epicCreationTime};return b(m,l.zeroBaseline)})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_transformData:b,_getData:function(l,j,m){var k={rapidViewId:l,epicKey:j};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!h.isEqual(this._dataRequestParams,k)){this._dataRequestParams=k;this._dataPromise=a(k)}return this._dataPromise}};return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service",["require"],function(e){var d=e("underscore");var a=e("jira-agile/rapid/global-events");var f;var h;a.on("pre-initialization",function(){f=GH.Ajax;h=GH.Reports.ScopeBurndownBySprintTransformer});function c(j){var i={url:"/rapid/charts/epicreport",data:j};return f.get(i,"epicBurndownData")}function g(i,j){i.showIssueEpic=false;return h.getIssuesBySprintData(i,j)}function b(){}b.prototype={get:function(k,i,j){return this._getData(k,i).andThen(function(l){l.rapidViewId=k;return g(l,j)})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_transformData:g,_getData:function(k,i){var j={rapidViewId:k,epicKey:i};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!d.isEqual(this._dataRequestParams,j)){this._dataRequestParams=j;this._dataPromise=c(j)}return this._dataPromise}};return b});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReport.soy' */
// This file was automatically generated from EpicBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.epicBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.epicBurndownReport == 'undefined') { GH.tpl.reports.epicBurndownReport = {}; }


GH.tpl.reports.epicBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-epic-burndown-report" class="ghx-scope-burndown-chart-svg ghx-epic-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="js-epic-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartBody';
}


GH.tpl.reports.epicBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoEpic) ? '<p>' + soy.$$escapeHtml("There are currently no epics on this board") + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this epic.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoEpic ? "Add epics in the Epics panel of the Backlog" : "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.epicBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work completed") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work forecast") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work remaining") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work added") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderLegend';
}


GH.tpl.reports.epicBurndownReport.renderDialogSprintContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy35 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "at start of sprint", estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy35}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "added", estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "removed", estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("completed") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy35}) : '') + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("remaining") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy35}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogSprintContent.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogSprintContent';
}


GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate';
}


GH.tpl.reports.epicBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy104 = soy.$$escapeHtml(AJS.format("{0}% of issues do not have an estimate ({1} of {2})",opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml("Issue types that do not include the estimation statistic are not counted.") + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy104) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml("unestimated issues") + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("completed ({0})",opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderSnapshot';
}


GH.tpl.reports.epicBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml("Align sprints at the base of the chart") + '</label><p class="ghx-description">' + soy.$$escapeHtml("Use this view to see trends in the scope for the epic.") + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.epicBurndownReport.renderEpicMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Epic") + '</h3><p><span class="ghx-issue-list-epic-information"><a role="button" class="ghx-epic-key-link" title="' + soy.$$escapeHtml("View epic details") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="ghx-issue-list-epic-summary"> ' + soy.$$escapeHtml(opt_data.summary) + ' </span></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderEpicMetadata.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderEpicMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view",["require"],function(d){var g=d("jquery");var l=d("underscore");var f=d("jira-agile/rapid/ui/component/chart-picker");var m=d("jira-agile/rapid/ui/chart/chart-view");var q=d("jira-agile/d3");var o=d("jira-agile/rapid/events");var k=d("jira-agile/rapid/global-events");var j;var a;var i;var e;var p;var c;var b;var h;k.on("pre-initialization",function(){j=GH.Layout;a=GH.Ajax;i=GH.LinkedPagesController;e=GH.RapidBoard.ViewController;p=GH.RapidViewConfig;c=GH.Reports.ScopeBurndownBySprintChart;b=GH.Reports.ScopeBurndownBySprintChartLegend;h=GH.Reports.ScopeBurndownBySprintChartHowTo});function n(){new o(this)}n.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:true,_model:null,init:function(r){this._model=r;m.getChartContentElem(true).html(GH.tpl.reports.epicBurndownReport.renderChartBody());m.getChartLegendD3(true).html(GH.tpl.reports.epicBurndownReport.renderLegend()).show();this._renderOptions();this._epicPicker=new f("epicBurndown.selectedEpicId","There are currently no epics on this board");g(this._epicPicker).on("selectedItemChanged",l.bind(this._handleEpicSelected,this));this._chart=new c();this._legend=new b();this._howTo=new h();this._renderLegend();this._renderHowTo()},destroy:function(){this._chart=null;this._legend=null;this._howTo=null;m.getChartContentElem(true).empty();m.getChartLegendD3(true).empty();g(GH).unbind(j.EVENT_DELAYED_RESIZE+".epicBurndownReport")},setEpics:function(r){this._epics=r;this._epicPicker.setItems(r);this._epicPicker.setDefaultItem(r[0])},update:function(t,r){if(r){var s=l.findWhere(this._epics,{id:t.epic.key}).linkedPagesCount;this._renderLinkedPagesTrigger(t.epic.key,s)}this._epicPicker.setSelectedItem(t.epic.key,true);this._epicPicker.render(m.getChartSelector(true));this._chart.data(t);this._renderChart();this._renderSnapshot(t);this._renderEpicMetadata(t.epic);if(this._firstRender){j.bindDelayedWindowResize();g(GH).bind(j.EVENT_DELAYED_RESIZE+".epicBurndownReport",l.bind(this._handleWindowResized,this))}else{m.showChartUpdatedToast()}this._firstRender=false},updateTable:function(r){this._renderTable(r)},showBlankState:function(t,r){var s=g(GH.tpl.reports.epicBurndownReport.renderBlankStateMessage({planModeUrl:a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+p.currentData.data.id+"&view=planning"+(t?"&epics=visible":""),hasNoEpic:t,hasNoEstimatedStories:r}));s.find(".js-plan-mode").on("simpleClick",function(u){u.preventDefault();if(t){GH.PlanController.setEpicsColumnVisible(true)}e.setMode("plan")});m.showBlankStateMessage(s)},hideBlankState:function(){m.hideBlankStateMessage()},showSpinner:function(){m.showSpinner()},hideSpinner:function(){m.hideSpinner()},_renderSnapshot:function(r){var s=30;var u=r.snapshot.estimatableIssueCount-r.snapshot.estimatedIssueCount;var v=r.snapshot.estimatableIssueCount>0?Math.round((u/r.snapshot.estimatableIssueCount)*100):0;var t=r.snapshot.issueCount===0?"":GH.tpl.reports.epicBurndownReport.renderSnapshot({estimatableIssuesCount:r.snapshot.estimatableIssueCount,unestimatedIssuesCount:u,unestimatedIssuesPercentage:v,unestimatedIssuesThresholdExceeded:v>s,workCompleted:r.estimationStatistic.formatter.formatFull(r.snapshot.workCompleted),workTotal:r.estimationStatistic.formatter.formatFull(r.snapshot.workCompleted+r.snapshot.workRemaining),estimationStatistic:r.estimationStatistic.name,shouldShowUnestimatedIssues:r.estimationStatistic.typeId!=="issueCount"});g("#ghx-chart-snapshot").html(t);GH.Tooltip.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:true,className:"ghx-tipsy-left"})},_renderEpicMetadata:function(r){g(".js-epic-metadata").html(GH.tpl.reports.epicBurndownReport.renderEpicMetadata(r))},_renderLinkedPagesTrigger:function(s,t){var u=GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount:t,title:"Create and view pages linked to this epic"});var r=g("#ghx-chart-header-primary .ghx-linked-pages-trigger");r.remove();r=g(u);g("#ghx-chart-selector").after(r);i.initDialogTrigger(i.EPIC,GH.LinkedPagesController.REPORT,s,r)},_renderTable:function(r){m.getChartContentElem(true).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(l.extend({emptySprintMessage:"No issues completed this sprint for current epic."},r)))},_renderLegend:function(){this._legend(q.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(q.select(".ghx-group-how"))},_renderChart:function(){this._chart(q.select("#ghx-epic-burndown-report"))},_renderOptions:function(){var r=this;g("#ghx-chart-options").html(GH.tpl.reports.epicBurndownReport.renderChartViewingOptions(this._model));g("#js-option-zero-baseline").on("change",function(){r.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleEpicSelected:function(r,s){this.trigger("epicSelected",s.item)},_handleWindowResized:function(){this._renderChart()}};return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller",["require"],function(f){var l=f("underscore");var c=f("jira-agile/rapid/analytics-tracker");var m=f("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service");var a=f("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service");var k=f("jira-agile/rapid/global-events");var h=new m();var d=new a();var j;var i;var n;var b;var g;k.on("pre-initialization",function(){j=GH.PromiseKeeper;i=GH.RapidBoard.State;n=GH.Reports.EpicBurndownReportView;b=GH.EpicsDataService;g=new b()});function e(){}e.id="epicBurndown";e.prototype={SETTINGS_KEY:"chart.config.epicBurndown",displayed:false,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(o){this._rapidViewData=o||{}},show:function(){this.displayed=true;this._tracker=new c("gh.report.epicburndown");i.pushState();var p=this._view=new n();p.on("epicSelected",l.bind(function(q){this._model.epicKey=q.id;this.update()},this)).on("optionChanged",l.bind(function(q){this._model.zeroBaseline=q.zeroBaseline;this._tracker.trigger("zeroBaseline."+(q.zeroBaseline?"on":"off"));this.update()},this));p.init(this._model);p.showSpinner();this._tracker.trigger("show");this._dataPromiseKeeper=new j();var o=g.getSimpleEpics(this._rapidViewData.id);this._dataPromiseKeeper.add(o).done(l.bind(function(q){if(!q.length){this._model.epicKey=null;p.showBlankState(true,true);this._tracker.trigger("blank");p.hideSpinner()}else{q.reverse();if(this._model.epicKey==null||!g.epicExists(q,this._model.epicKey)){this._model.epicKey=q[0].id}p.setEpics(q);this.update(true)}},this))},hide:function(){this.displayed=false;if(this._dataPromiseKeeper){this._dataPromiseKeeper.reset()}if(this._view){this._view.destroy();this._view=null}h.clearCache();d.clearCache()},update:function(p){if(p){i.replaceState()}else{i.pushState()}this.saveState();if(this._model.epicKey==null){return}var o=this;o._view.showSpinner();var q=h.get(o._rapidViewData.id,o._model.epicKey,{zeroBaseline:o._model.zeroBaseline});return o._dataPromiseKeeper.add(q).done(function(s){if(s.snapshot.estimatedIssueCount===0){o._view.showBlankState(false,true);o._tracker.trigger("blank")}else{o._view.hideBlankState()}o._view.update(s,g.supportsPages());var r=d.get(o._rapidViewData.id,o._model.epicKey,s);o._dataPromiseKeeper.add(r).done(function(t){o._view.updateTable(t)})}).always(function(r){if(r!=="abort"){o._view.hideSpinner()}})},saveState:function(){i.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=i.getBoardSetting(i.getRapidViewId(),this.SETTINGS_KEY,{epicKey:null,zeroBaseline:false})},isApplicable:function(o){return o.sprintSupportEnabled},getNormalizedFromInternal:function(){if(this._model===null){this.loadState()}return l.defaults(l.clone(this._model),{zeroBaseline:false})},updateInternalFromNormalized:function(o){this._model=o},toUrl:function(o){return{epic:o.epicKey!==null?o.epicKey:undefined,zeroBaseline:o.zeroBaseline?true:undefined}},getNormalizedFromUrl:function(o){return{epicKey:o.epic||null,zeroBaseline:o.zeroBaseline==="true"}}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-chart-data-service",["require"],function(d){var g=d("underscore");var f=d("jira-agile/rapid/global-events");var c;var h;var i;f.on("pre-initialization",function(){c=GH.Ajax;h=GH.RapidViewConfig;i=GH.Reports.SprintBurnupTransformer});function a(k){var j={url:"/rapid/charts/scopechangeburndownchart",data:k};return c.get(j,"sprintburnupchart")}function b(j){return i.getBurnupModelFromScopeBurndownModel(j)}function e(){}e.prototype={get:function(j,l,k){return this._getData(j,l,k).andThen(function(m){m.rapidViewId=h.currentData.id;return b(m)})},clearCache:function(){if(this._dataPromise){this._dataPromise=null;this._dataRequestParams=null}},_transformData:b,_getData:function(k,m,l){var j={rapidViewId:k,sprintId:m,statisticFieldId:l};if(!this._dataPromise||this._dataPromise.state()==="rejected"||!g.isEqual(this._dataRequestParams,j)){this._dataRequestParams=j;this._dataPromise=a(j)}return this._dataPromise}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupReport.soy' */
// This file was automatically generated from SprintBurnupReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.sprintBurnupReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.sprintBurnupReport == 'undefined') { GH.tpl.reports.sprintBurnupReport = {}; }


GH.tpl.reports.sprintBurnupReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-sprint-burnup-report" class="ghx-burnup-chart ghx-svg-chart" /></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderChartBody';
}


GH.tpl.reports.sprintBurnupReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this sprint.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderBlankStateMessage';
}


GH.tpl.reports.sprintBurnupReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Work scope") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Scope projection") + '</li></ul></div><div><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Completed Work") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Guideline") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderLegend.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderLegend';
}


GH.tpl.reports.sprintBurnupReport.renderDialogIssueContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h5>' + GH.tpl.reports.sprintBurnupReport.renderIssueKeyLink({key: opt_data.issueKey}) + '</h5><h5>' + soy.$$escapeHtml(opt_data.eventDescription) + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.fromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.toValue) + '</div></div><h5>' + soy.$$escapeHtml("Effect on sprint") + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalFromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.totalToValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderDialogIssueContent';
}


GH.tpl.reports.sprintBurnupReport.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><div class="aui-group"><div class="aui-item">\u2211 ' + soy.$$escapeHtml(opt_data.statistic) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderDialogContent.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderDialogContent';
}


GH.tpl.reports.sprintBurnupReport.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.scope != null || opt_data.completedWork != null) ? '<table class="aui-table">' + ((opt_data.scope != null) ? GH.tpl.reports.sprintBurnupReport.renderScrubberDialogItem({label: "Work scope", value: opt_data.scope}) : '') + ((opt_data.completedWork != null) ? GH.tpl.reports.sprintBurnupReport.renderScrubberDialogItem({label: "Completed Work", value: opt_data.completedWork}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderScrubberDialogContent';
}


GH.tpl.reports.sprintBurnupReport.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderScrubberDialogItem';
}


GH.tpl.reports.sprintBurnupReport.renderChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight"><thead><tr><th id="series-date">' + soy.$$escapeHtml("Date") + '</th><th id="series-event-type">' + soy.$$escapeHtml("Event Type") + '</th><th id="series-issue">' + soy.$$escapeHtml("Issue") + '</th><th id="series-completed-work" class="ghx-minimal">' + soy.$$escapeHtml("Completed Work") + '</th><th id="series-scope" class="ghx-minimal">' + soy.$$escapeHtml("Work scope") + '</th></tr></thead><tbody>';
  var rowList94 = opt_data.rows;
  var rowListLen94 = rowList94.length;
  for (var rowIndex94 = 0; rowIndex94 < rowListLen94; rowIndex94++) {
    var rowData94 = rowList94[rowIndex94];
    output += '<tr><td headers="series-date">' + ((rowData94.dateString) ? soy.$$escapeHtml(rowData94.dateString) : '') + '</td><td headers="series-event-type">' + ((rowData94.eventString) ? soy.$$escapeHtml(rowData94.eventString) : '') + '</td><td headers="series-issue">';
    if (rowData94.issueKeys) {
      var keyList106 = rowData94.issueKeys;
      var keyListLen106 = keyList106.length;
      for (var keyIndex106 = 0; keyIndex106 < keyListLen106; keyIndex106++) {
        var keyData106 = keyList106[keyIndex106];
        output += GH.tpl.reports.sprintBurnupReport.renderIssueKeyLink({key: keyData106}) + '<br />';
      }
    }
    output += '</td><td headers="series-completed-work"><div class="ghx-nowrap">' + ((rowData94.doneChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData94.doneChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData94.doneChange.to) : soy.$$escapeHtml(rowData94.doneValue)) + '</div></td><td headers="series-scope"><div class="ghx-nowrap">' + ((rowData94.scopeChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData94.scopeChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData94.scopeChange.to) : soy.$$escapeHtml(rowData94.scopeValue)) + '</div></td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderChartTable.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderChartTable';
}


GH.tpl.reports.sprintBurnupReport.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.sprintBurnupReport.renderIssueKeyLink.soyTemplateName = 'GH.tpl.reports.sprintBurnupReport.renderIssueKeyLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupReportView.js' */
define("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-view",["require"],function(d){var b=d("jquery");var k=d("underscore");var o=d("jira-agile/d3");var m=d("jira-agile/rapid/events");var j=d("jira-agile/rapid/global-events");var l=d("jira-agile/rapid/ui/chart/chart-view");var c=d("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-chart");var i;var a;var n;var h=GH.RapidBoard;var g;var f;j.on("pre-initialization",function(){g=GH.Reports.SprintBurnupChartLegend;f=GH.Reports.ScopeBurndownBySprintChartHowTo;i=GH.Layout;a=GH.Ajax;n=GH.RapidViewConfig});function e(){new m(this)}e.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:true,_model:null,init:function(p){this._model=p;l.getChartContentElem(true).html(GH.tpl.reports.sprintBurnupReport.renderChartBody());l.getChartLegendD3(true).html(GH.tpl.reports.sprintBurnupReport.renderLegend()).show();var q=n.currentData.data.id;this._sprintPicker=new GH.ChartPicker("sprintBurnup.selectedSprintId");b(this._sprintPicker).on("selectedItemChanged",k.bind(this._handleSprintSelected,this));this._estimatePicker=new GH.EstimatePicker("sprintBurnup.selectedEstimate");this._estimatePicker.load(q,this._handleEstimateSelected.bind(this));this._chart=new c();this._legend=g();this._howTo=f()},destroy:function(){this._chart=null;this._legend=null;this._howTo=null;this._model=null;l.getChartContentElem(true).empty();l.getChartLegendD3(true).empty();b(GH).unbind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport")},setSprints:function(p){this._sprintPicker.setItems(p);this._sprintPicker.setDefaultItem(p[0])},update:function(p){this._sprintPicker.setSelectedItem(p.sprintId,true);this._sprintPicker.render(l.getChartSelector(true));this._estimatePicker.setSelectedItem(p.statisticField.id,true);this._estimatePicker.render(l.getChartControls(true));this._renderLegend();this._renderHowTo();this._renderChart(p);this.data=p;if(this._firstRender){i.bindDelayedWindowResize();b(GH).bind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport",k.bind(this._handleWindowResized,this))}else{l.showChartUpdatedToast()}this._firstRender=false},updateTable:function(p){this._renderTable(p)},showBlankState:function(p){this._blankState=true;var q=b(GH.tpl.reports.sprintBurnupReport.renderBlankStateMessage({planModeUrl:a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+n.currentData.data.id+"&view=planning&versions=visible",hasNoEstimatedStories:p}));q.find(".js-plan-mode").on("simpleClick",function(r){r.preventDefault();h.ViewController.setMode("plan")});this._chart.hide(o.select("#ghx-sprint-burnup-report"));l.getChartLegendD3(true).hide();l.getChartContentElem(true).find(".ghx-report-issue-list").hide();l.showBlankStateMessage(q)},hideBlankState:function(){this._blankState=false;l.hideBlankStateMessage();l.getChartLegendD3(true).show();l.getChartContentElem(true).find(".ghx-report-issue-list").show()},showSpinner:function(){l.showSpinner()},hideSpinner:function(){l.hideSpinner()},_renderTable:function(p){if(this._blankState){return}var r=p.chartData;var q=r.scope[0].value;var u=0;var t=r.scope.concat(r.work).sort(function(w,v){return w.timestamp>v.timestamp?1:(w.timestamp===v.timestamp)?0:-1}).map(function(v){var w={timestamp:v.timestamp,dateString:r.formatDate(v.timestamp),issueKeys:[v.change.key],event:v.change.type,eventString:r.formatEventType(v.change.type)};var x=parseInt(v.change.toValue)-parseInt(v.change.fromValue)||0;if(v.change.line==="done"){u+=x;if(x===0){w.doneValue=r.formatStatistic(u)}else{w.doneChange={from:r.formatStatistic(u-x),to:r.formatStatistic(u)}}w.scopeValue=r.formatStatistic(q)}if(v.change.line==="scope"){q+=x;if(x===0){w.scopeValue=r.formatStatistic(q)}else{w.scopeChange={from:r.formatStatistic(q-x),to:r.formatStatistic(q)}}w.doneValue=r.formatStatistic(u)}return w});t=t.reduce(function(v,w){var x=v.pop();if(!x){v.push(w);return v}if(x.timestamp===w.timestamp&&x.event===w.event&&x.issueKey===w.issueKey){if(!(x.doneChange&&w.doneChange)&&!(x.scopeChange&&w.scopeChange)){if(!x.doneChange){x.doneChange=w.doneChange}if(!x.scopeChange){x.scopeChange=w.scopeChange}v.push(x);return v}}v.push(x);v.push(w);return v},[]);t[0].issueKeys=r.startKeys;if(r.now<r.end){t.pop()}else{t[t.length-1].issueKeys=r.endKeys}var s=AJS.$(GH.tpl.reports.sprintBurnupReport.renderChartTable({rows:t}));l.getChartContentElem(true).find(".ghx-report-issue-list").empty().append(s)},_renderLegend:function(){if(this._blankState){return}this._legend(o.select(".ghx-chart-legend"))},_renderHowTo:function(){if(this._blankState){return}this._howTo(o.select(".ghx-group-how"))},_renderChart:function(q){if(this._blankState){return}var p=o.select("#ghx-sprint-burnup-report");if(p.empty()){return}this._chart.show(q,p)},_handleSprintSelected:function(p,q){this.trigger("sprintSelected",q.item.id)},_handleEstimateSelected:function(p){this.trigger("estimateSelected",p)},_handleWindowResized:function(){this._renderChart(this.data)}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupReportController.js' */
define("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-controller",["require"],function(c){var l=c("underscore");var k=c("jira-agile/rapid/global-events");var a=c("jira-agile/rapid/analytics-tracker");var d=c("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-view");var h=c("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-chart-data-service");var b=new h();var i;var g;var j;var f=GH.RapidBoard;var e;k.on("pre-initialization",function(){i=GH.PromiseKeeper;g=GH.RapidBoard.State;j=new GH.VersionsDataService();e=new GH.SprintsDataService()});function m(){}m.prototype={SETTINGS_KEY:"chart.config.sprintBurnup",displayed:false,_sprints:null,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(n){this._rapidViewData=n||{}},show:function(){this.displayed=true;this._tracker=new a("gh.report.sprintburnup");f.State.pushState();var n=this._view=new d();n.on("sprintSelected",l.bind(function(p){this._model.sprint=p;this.update()},this)).on("estimateSelected",l.bind(function(p){this._model.estimate=p;this.update()},this)).on("optionChanged",l.bind(function(p){this._model.zeroBaseline=p.zeroBaseline;this._tracker.trigger("zeroBaseline."+(p.zeroBaseline?"on":"off"));this.update()},this));n.init(this._model);n.showSpinner();this._tracker.trigger("show");this._dataPromiseKeeper=new i();var o=e.getSimpleSprints(this._rapidViewData.id);this._dataPromiseKeeper.add(o).done(l.bind(function(p){if(!p.length){this._model.sprint=null;n.showBlankState(true,true);this._tracker.trigger("blank");n.hideSpinner()}else{p.reverse();if(this._model.sprint==null){this._model.sprint=p[0].id}this._sprints=p;n.setSprints(p);this.update(true)}},this))},hide:function(){this.displayed=false;if(this._dataPromiseKeeper){this._dataPromiseKeeper.reset()}if(this._view){this._view.destroy();this._view=null}b.clearCache()},update:function(p){var n=this;if(!this.isSprintSelectable(n._model.sprint)){n._model.sprint=n._sprints[0].id}if(p){f.State.replaceState()}else{f.State.pushState()}if(this._model.sprint==null){return}this.saveState();n._view.showSpinner();var o=b.get(n._rapidViewData.id,n._model.sprint,n._model.estimate);return n._dataPromiseKeeper.add(o).done(function(q){if(q.chartData.estimatedIssueEvents===0){n._view.showBlankState(true);n._tracker.trigger("blank")}else{n._view.hideBlankState()}q.chartData.sprintId=n._model.sprint;n._view.setSprints(n._sprints);n._view.update(q.chartData);n._view.updateTable(q)}).always(function(q){if(q!=="abort"){n._view.hideSpinner()}})},saveState:function(){f.State.setBoardSetting(this.SETTINGS_KEY,this._model)},loadState:function(){this._model=f.State.getBoardSetting(f.State.getRapidViewId(),this.SETTINGS_KEY)},isApplicable:function(n){return n.sprintSupportEnabled},getNormalizedFromInternal:function(){if(this._model===null){this.loadState()}return l.defaults(l.clone(this._model),{})},updateInternalFromNormalized:function(n){if(!this._model){this.loadState()}this._model=l.defaults(l.clone(n),this._model)},toUrl:function(n){return{sprint:n.sprint!==null?n.sprint:undefined,estimate:n.estimate!==null?n.estimate:undefined}},isSprintSelectable:function(n){return this._sprints.filter(function(o){return o.id===n}).length>0},getNormalizedFromUrl:function(n){return{sprint:isNaN(n.sprint)?undefined:+n.sprint,estimate:n.estimate}}};return m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupChartDialog.js' */
GH.Reports=GH.Reports||{};GH.Reports.SprintBurnupChartDialog=(function(){var d="sprint-burnup-issue";var c="#ghx-report-scrollarea > .aui-page-panel";var e;GH.InlineDialog.preventCloseOnClick(d);function f(i,h){var g=i.formatStatistic;if(h.change.key){var j=h.change.toValue-h.change.fromValue;return GH.tpl.reports.sprintBurnupReport.renderDialogIssueContent({issueKey:h.change.key,fromValue:g(h.change.fromValue),toValue:g(h.change.toValue),totalFromValue:g(h.value-j),totalToValue:g(h.value),eventDescription:i.formatEventType(h.change.type)})}return GH.tpl.reports.sprintBurnupReport.renderDialogContent({totalValue:h.value,statistic:i.statisticField.name})}function b(g,i,h){var j=d3.select(g);j.classed("active",true);e=GH.SideInlineDialog.create(d,g,function(l,k,m){l.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");l.html(f(i,h));m()},{addActiveClass:false,container:c,fadeTime:0,noBind:true,cacheContent:false,hideDelay:60000,persistent:true,hideCallback:function(){j.classed("active",false)}});e.show();return e}function a(){return e?e.is(":visible"):false}return{show:b,hide:function(){if(e){e.hide()}},isVisible:a}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupChartScrubberDialog.js' */
GH.Reports.SprintBurnupChartScrubberDialog=(function(){var j;var a;var p=true;var k="scrubber-dialog";var l="#ghx-chart-group";var g={container:l,fadeTime:0,noBind:true,cacheContent:false,hideDelay:60000,width:230,closeOthers:false,persistent:true,addActiveClass:false};function q(s){a=s;j=GH.SideInlineDialog.create(k,s,function r(u,t,v){u.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog");u.addClass("ghx-scrubber-contents");u.next("#arrow-"+k).addClass("ghx-arrow-scrubber-dialog");v()},g);c()}function h(){p=false}function o(){p=true}function n(){if(!GH.Reports.SprintBurnupChartDialog.isVisible()&&p){j.show()}}function c(){GH.InlineDialog.registerInlineDialogHacks(k,{validateClickToCloseFn:function r(){return false}})}function f(){if(j){j.hide()}}function i(r){d();m(r);j.refresh()}function m(r){var s;if(r.time){s=GH.tpl.reports.sprintBurnupReport.renderScrubberDialogContent({indicatedTime:r.time,scope:r.scope,completedWork:r.completedWork})}b().find(".ghx-scrubber-contents").html(s)}function b(){return AJS.$("#inline-dialog-"+k)}function d(){if(!e()){n()}}function e(){return j?j.is(":visible"):false}return{init:q,show:n,hide:f,isVisible:e,refresh:i,disable:h,enable:o}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/sprintburnup/SprintBurnupChartScrubber.js' */
GH.Reports.SprintBurnupChartScrubber=function(){var b=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.SprintBurnupChartDialog.isVisible()});var d=c3.brush().elementClass("ghx-chart-brush").onDrag(function(){GH.Reports.SprintBurnupChartDialog.hide()});function h(){GH.Reports.SprintBurnupChartScrubberDialog.disable()}function k(){GH.Reports.SprintBurnupChartScrubberDialog.enable()}function f(){GH.Reports.SprintBurnupChartScrubberDialog.show()}function c(){GH.Reports.SprintBurnupChartScrubberDialog.hide()}function e(){b.hideScrubber()}function i(){d.cancelDrag()}function a(m,n){for(var l=m.length-1;l>=0;l--){if(m[l].timestamp<=n){return m[l].value}}return m[0].value}function j(){var l=this.mouseCoordinates();var o=this.xScale().invert;var m=this.data();if(l){var n=o(l[0]);GH.Reports.SprintBurnupChartScrubberDialog.refresh({time:m.formatDate(n),scope:m.formatStatistic(a(this.data().scope,n)),completedWork:m.formatStatistic(a(this.data().work,n))})}}function g(){var m=this.selection();b.parent(this);b.interactiveLayer(this);b(m);d.parent(this);d.interactiveLayer(this);d(m);GH.Reports.SprintBurnupChartScrubberDialog.init(b.elements()[0]);var l=this;this.mouseover(function(){f.call(l)});this.mousemove("ccscrubber",function(){j.call(l)});this.mouseout(function(){c.call(l)})}return c3.component().extend(_.once(g)).extend(i).extend({hideScrubber:e,disableScrubber:h,enableScrubber:k})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.js' */
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */
(function(b){b.color={};b.color.make=function(d,e,g,f){var c={};c.r=d||0;c.g=e||0;c.b=g||0;c.a=f!=null?f:1;c.add=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]+=j}return c.normalize()};c.scale=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]*=j}return c.normalize()};c.toString=function(){if(c.a>=1){return"rgb("+[c.r,c.g,c.b].join(",")+")"}else{return"rgba("+[c.r,c.g,c.b,c.a].join(",")+")"}};c.normalize=function(){function h(k,j,l){return j<k?k:(j>l?l:j)}c.r=h(0,parseInt(c.r),255);c.g=h(0,parseInt(c.g),255);c.b=h(0,parseInt(c.b),255);c.a=h(0,c.a,1);return c};c.clone=function(){return b.color.make(c.r,c.b,c.g,c.a)};return c.normalize()};b.color.extract=function(d,e){var c;do{c=d.css(e).toLowerCase();if(c!=""&&c!="transparent"){break}d=d.parent()}while(!b.nodeName(d.get(0),"body"));if(c=="rgba(0, 0, 0, 0)"){c="transparent"}return b.color.parse(c)};b.color.parse=function(c){var d,f=b.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10))}if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]))}if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55)}if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55,parseFloat(d[4]))}if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c)){return f(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16))}if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c)){return f(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16))}var e=b.trim(c).toLowerCase();if(e=="transparent"){return f(255,255,255,0)}else{d=a[e]||[0,0,0];return f(d[0],d[1],d[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(c){function b(av,ai,J,af){var Q=[],O={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},az=null,ad=null,y=null,H=null,A=null,p=[],aw=[],q={left:0,right:0,top:0,bottom:0},G=0,I=0,h=0,w=0,ak={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},aq=this;aq.setData=aj;aq.setupGrid=t;aq.draw=W;aq.getPlaceholder=function(){return av};aq.getCanvas=function(){return az};aq.getPlotOffset=function(){return q};aq.width=function(){return h};aq.height=function(){return w};aq.offset=function(){var aB=y.offset();aB.left+=q.left;aB.top+=q.top;return aB};aq.getData=function(){return Q};aq.getAxes=function(){var aC={},aB;c.each(p.concat(aw),function(aD,aE){if(aE){aC[aE.direction+(aE.n!=1?aE.n:"")+"axis"]=aE}});return aC};aq.getXAxes=function(){return p};aq.getYAxes=function(){return aw};aq.c2p=C;aq.p2c=ar;aq.getOptions=function(){return O};aq.highlight=x;aq.unhighlight=T;aq.triggerRedrawOverlay=f;aq.pointOffset=function(aB){return{left:parseInt(p[aA(aB,"x")-1].p2c(+aB.x)+q.left),top:parseInt(aw[aA(aB,"y")-1].p2c(+aB.y)+q.top)}};aq.shutdown=ag;aq.resize=function(){B();g(az);g(ad)};aq.hooks=ak;F(aq);Z(J);X();aj(ai);t();W();ah();function an(aD,aB){aB=[aq].concat(aB);for(var aC=0;aC<aD.length;++aC){aD[aC].apply(this,aB)}}function F(){for(var aB=0;aB<af.length;++aB){var aC=af[aB];aC.init(aq);if(aC.options){c.extend(true,O,aC.options)}}}function Z(aC){var aB;c.extend(true,O,aC);if(O.xaxis.color==null){O.xaxis.color=O.grid.color}if(O.yaxis.color==null){O.yaxis.color=O.grid.color}if(O.xaxis.tickColor==null){O.xaxis.tickColor=O.grid.tickColor}if(O.yaxis.tickColor==null){O.yaxis.tickColor=O.grid.tickColor}if(O.grid.borderColor==null){O.grid.borderColor=O.grid.color}if(O.grid.tickColor==null){O.grid.tickColor=c.color.parse(O.grid.color).scale("a",0.22).toString()}for(aB=0;aB<Math.max(1,O.xaxes.length);++aB){O.xaxes[aB]=c.extend(true,{},O.xaxis,O.xaxes[aB])}for(aB=0;aB<Math.max(1,O.yaxes.length);++aB){O.yaxes[aB]=c.extend(true,{},O.yaxis,O.yaxes[aB])}if(O.xaxis.noTicks&&O.xaxis.ticks==null){O.xaxis.ticks=O.xaxis.noTicks}if(O.yaxis.noTicks&&O.yaxis.ticks==null){O.yaxis.ticks=O.yaxis.noTicks}if(O.x2axis){O.xaxes[1]=c.extend(true,{},O.xaxis,O.x2axis);O.xaxes[1].position="top"}if(O.y2axis){O.yaxes[1]=c.extend(true,{},O.yaxis,O.y2axis);O.yaxes[1].position="right"}if(O.grid.coloredAreas){O.grid.markings=O.grid.coloredAreas}if(O.grid.coloredAreasColor){O.grid.markingsColor=O.grid.coloredAreasColor}if(O.lines){c.extend(true,O.series.lines,O.lines)}if(O.points){c.extend(true,O.series.points,O.points)}if(O.bars){c.extend(true,O.series.bars,O.bars)}if(O.shadowSize!=null){O.series.shadowSize=O.shadowSize}for(aB=0;aB<O.xaxes.length;++aB){V(p,aB+1).options=O.xaxes[aB]}for(aB=0;aB<O.yaxes.length;++aB){V(aw,aB+1).options=O.yaxes[aB]}for(var aD in ak){if(O.hooks[aD]&&O.hooks[aD].length){ak[aD]=ak[aD].concat(O.hooks[aD])}}an(ak.processOptions,[O])}function aj(aB){Q=Y(aB);ax();z()}function Y(aE){var aC=[];for(var aB=0;aB<aE.length;++aB){var aD=c.extend(true,{},O.series);if(aE[aB].data!=null){aD.data=aE[aB].data;delete aE[aB].data;c.extend(true,aD,aE[aB]);aE[aB].data=aD.data}else{aD.data=aE[aB]}aC.push(aD)}return aC}function aA(aC,aD){var aB=aC[aD+"axis"];if(typeof aB=="object"){aB=aB.n}if(typeof aB!="number"){aB=1}return aB}function m(){return c.grep(p.concat(aw),function(aB){return aB})}function C(aE){var aC={},aB,aD;for(aB=0;aB<p.length;++aB){aD=p[aB];if(aD&&aD.used){aC["x"+aD.n]=aD.c2p(aE.left)}}for(aB=0;aB<aw.length;++aB){aD=aw[aB];if(aD&&aD.used){aC["y"+aD.n]=aD.c2p(aE.top)}}if(aC.x1!==undefined){aC.x=aC.x1}if(aC.y1!==undefined){aC.y=aC.y1}return aC}function ar(aF){var aD={},aC,aE,aB;for(aC=0;aC<p.length;++aC){aE=p[aC];if(aE&&aE.used){aB="x"+aE.n;if(aF[aB]==null&&aE.n==1){aB="x"}if(aF[aB]!=null){aD.left=aE.p2c(aF[aB]);break}}}for(aC=0;aC<aw.length;++aC){aE=aw[aC];if(aE&&aE.used){aB="y"+aE.n;if(aF[aB]==null&&aE.n==1){aB="y"}if(aF[aB]!=null){aD.top=aE.p2c(aF[aB]);break}}}return aD}function V(aC,aB){if(!aC[aB-1]){aC[aB-1]={n:aB,direction:aC==p?"x":"y",options:c.extend(true,{},aC==p?O.xaxis:O.yaxis)}}return aC[aB-1]}function ax(){var aG;var aM=Q.length,aB=[],aE=[];for(aG=0;aG<Q.length;++aG){var aJ=Q[aG].color;if(aJ!=null){--aM;if(typeof aJ=="number"){aE.push(aJ)}else{aB.push(c.color.parse(Q[aG].color))}}}for(aG=0;aG<aE.length;++aG){aM=Math.max(aM,aE[aG]+1)}var aC=[],aF=0;aG=0;while(aC.length<aM){var aI;if(O.colors.length==aG){aI=c.color.make(100,100,100)}else{aI=c.color.parse(O.colors[aG])}var aD=aF%2==1?-1:1;aI.scale("rgb",1+aD*Math.ceil(aF/2)*0.2);aC.push(aI);++aG;if(aG>=O.colors.length){aG=0;++aF}}var aH=0,aN;for(aG=0;aG<Q.length;++aG){aN=Q[aG];if(aN.color==null){aN.color=aC[aH].toString();++aH}else{if(typeof aN.color=="number"){aN.color=aC[aN.color].toString()}}if(aN.lines.show==null){var aL,aK=true;for(aL in aN){if(aN[aL]&&aN[aL].show){aK=false;break}}if(aK){aN.lines.show=true}}aN.xaxis=V(p,aA(aN,"x"));aN.yaxis=V(aw,aA(aN,"y"))}}function z(){var aO=Number.POSITIVE_INFINITY,aI=Number.NEGATIVE_INFINITY,aB=Number.MAX_VALUE,aU,aS,aR,aN,aD,aJ,aT,aP,aH,aG,aC,a0,aX,aL;function aF(a3,a2,a1){if(a2<a3.datamin&&a2!=-aB){a3.datamin=a2}if(a1>a3.datamax&&a1!=aB){a3.datamax=a1}}c.each(m(),function(a1,a2){a2.datamin=aO;a2.datamax=aI;a2.used=false});for(aU=0;aU<Q.length;++aU){aJ=Q[aU];aJ.datapoints={points:[]};an(ak.processRawData,[aJ,aJ.data,aJ.datapoints])}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];var aZ=aJ.data,aW=aJ.datapoints.format;if(!aW){aW=[];aW.push({x:true,number:true,required:true});aW.push({y:true,number:true,required:true});if(aJ.bars.show||(aJ.lines.show&&aJ.lines.fill)){aW.push({y:true,number:true,required:false,defaultValue:0});if(aJ.bars.horizontal){delete aW[aW.length-1].y;aW[aW.length-1].x=true}}aJ.datapoints.format=aW}if(aJ.datapoints.pointsize!=null){continue}aJ.datapoints.pointsize=aW.length;aP=aJ.datapoints.pointsize;aT=aJ.datapoints.points;insertSteps=aJ.lines.show&&aJ.lines.steps;aJ.xaxis.used=aJ.yaxis.used=true;for(aS=aR=0;aS<aZ.length;++aS,aR+=aP){aL=aZ[aS];var aE=aL==null;if(!aE){for(aN=0;aN<aP;++aN){a0=aL[aN];aX=aW[aN];if(aX){if(aX.number&&a0!=null){a0=+a0;if(isNaN(a0)){a0=null}else{if(a0==Infinity){a0=aB}else{if(a0==-Infinity){a0=-aB}}}}if(a0==null){if(aX.required){aE=true}if(aX.defaultValue!=null){a0=aX.defaultValue}}}aT[aR+aN]=a0}}if(aE){for(aN=0;aN<aP;++aN){a0=aT[aR+aN];if(a0!=null){aX=aW[aN];if(aX.x){aF(aJ.xaxis,a0,a0)}if(aX.y){aF(aJ.yaxis,a0,a0)}}aT[aR+aN]=null}}else{if(insertSteps&&aR>0&&aT[aR-aP]!=null&&aT[aR-aP]!=aT[aR]&&aT[aR-aP+1]!=aT[aR+1]){for(aN=0;aN<aP;++aN){aT[aR+aP+aN]=aT[aR+aN]}aT[aR+1]=aT[aR-aP+1];aR+=aP}}}}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];an(ak.processDatapoints,[aJ,aJ.datapoints])}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];aT=aJ.datapoints.points,aP=aJ.datapoints.pointsize;var aK=aO,aQ=aO,aM=aI,aV=aI;for(aS=0;aS<aT.length;aS+=aP){if(aT[aS]==null){continue}for(aN=0;aN<aP;++aN){a0=aT[aS+aN];aX=aW[aN];if(!aX||a0==aB||a0==-aB){continue}if(aX.x){if(a0<aK){aK=a0}if(a0>aM){aM=a0}}if(aX.y){if(a0<aQ){aQ=a0}if(a0>aV){aV=a0}}}}if(aJ.bars.show){if(aJ.bars.barLeft==undefined){aJ.bars.barLeft=aJ.bars.align=="left"?0:-aJ.bars.barWidth/2}var aY=aJ.bars.barLeft;if(aJ.bars.horizontal){aQ+=aY;aV+=aY+aJ.bars.barWidth}else{aK+=aY;aM+=aY+aJ.bars.barWidth}}aF(aJ.xaxis,aK,aM);aF(aJ.yaxis,aQ,aV)}c.each(m(),function(a1,a2){if(a2.datamin==aO){a2.datamin=null}if(a2.datamax==aI){a2.datamax=null}})}function j(aB,aC){var aD=document.createElement("canvas");aD.className=aC;aD.width=G;aD.height=I;if(!aB){c(aD).css({position:"absolute",left:0,top:0})}c(aD).appendTo(av);if(!aD.getContext){aD=window.G_vmlCanvasManager.initElement(aD)}aD.getContext("2d").save();return aD}function B(){G=av.width();I=av.height();if(G<=0||I<=0){throw"Invalid dimensions for plot, width = "+G+", height = "+I}}function g(aC){if(aC.width!=G){aC.width=G}if(aC.height!=I){aC.height=I}var aB=aC.getContext("2d");aB.restore();aB.save()}function X(){var aC,aB=av.children("canvas.base"),aD=av.children("canvas.overlay");if(aB.length==0||aD==0){av.html("");av.css({padding:0});if(av.css("position")=="static"){av.css("position","relative")}B();az=j(true,"base");ad=j(false,"overlay");aC=false}else{az=aB.get(0);ad=aD.get(0);aC=true}H=az.getContext("2d");A=ad.getContext("2d");y=c([ad,az]);if(aC){av.data("plot").shutdown();aq.resize();A.clearRect(0,0,G,I);y.unbind();av.children().not([az,ad]).remove()}av.data("plot",aq)}function ah(){if(O.grid.hoverable){y.mousemove(aa);y.mouseleave(l)}if(O.grid.clickable){y.click(R)}an(ak.bindEvents,[y])}function ag(){if(M){clearTimeout(M)}y.unbind("mousemove",aa);y.unbind("mouseleave",l);y.unbind("click",R);an(ak.shutdown,[y])}function r(aG){function aC(aH){return aH}var aF,aB,aD=aG.options.transform||aC,aE=aG.options.inverseTransform;if(aG.direction=="x"){aF=aG.scale=h/Math.abs(aD(aG.max)-aD(aG.min));aB=Math.min(aD(aG.max),aD(aG.min))}else{aF=aG.scale=w/Math.abs(aD(aG.max)-aD(aG.min));aF=-aF;aB=Math.max(aD(aG.max),aD(aG.min))}if(aD==aC){aG.p2c=function(aH){return(aH-aB)*aF}}else{aG.p2c=function(aH){return(aD(aH)-aB)*aF}}if(!aE){aG.c2p=function(aH){return aB+aH/aF}}else{aG.c2p=function(aH){return aE(aB+aH/aF)}}}function L(aD){var aB=aD.options,aF,aJ=aD.ticks||[],aI=[],aE,aK=aB.labelWidth,aG=aB.labelHeight,aC;function aH(aM,aL){return c('<div style="position:absolute;top:-10000px;'+aL+'font-size:smaller"><div class="'+aD.direction+"Axis "+aD.direction+aD.n+'Axis">'+aM.join("")+"</div></div>").appendTo(av)}if(aD.direction=="x"){if(aK==null){aK=Math.floor(G/(aJ.length>0?aJ.length:1))}if(aG==null){aI=[];for(aF=0;aF<aJ.length;++aF){aE=aJ[aF].label;if(aE){aI.push('<div class="tickLabel" style="float:left;width:'+aK+'px">'+aE+"</div>")}}if(aI.length>0){aI.push('<div style="clear:left"></div>');aC=aH(aI,"width:10000px;");aG=aC.height();aC.remove()}}}else{if(aK==null||aG==null){for(aF=0;aF<aJ.length;++aF){aE=aJ[aF].label;if(aE){aI.push('<div class="tickLabel">'+aE+"</div>")}}if(aI.length>0){aC=aH(aI,"");if(aK==null){aK=aC.children().width()}if(aG==null){aG=aC.find("div.tickLabel").height()}aC.remove()}}}if(aK==null){aK=0}if(aG==null){aG=0}aD.labelWidth=aK;aD.labelHeight=aG}function au(aD){var aC=aD.labelWidth,aL=aD.labelHeight,aH=aD.options.position,aF=aD.options.tickLength,aG=O.grid.axisMargin,aJ=O.grid.labelMargin,aK=aD.direction=="x"?p:aw,aE;var aB=c.grep(aK,function(aN){return aN&&aN.options.position==aH&&aN.reserveSpace});if(c.inArray(aD,aB)==aB.length-1){aG=0}if(aF==null){aF="full"}var aI=c.grep(aK,function(aN){return aN&&aN.reserveSpace});var aM=c.inArray(aD,aI)==0;if(!aM&&aF=="full"){aF=5}if(!isNaN(+aF)){aJ+=+aF}if(aD.direction=="x"){aL+=aJ;if(aH=="bottom"){q.bottom+=aL+aG;aD.box={top:I-q.bottom,height:aL}}else{aD.box={top:q.top+aG,height:aL};q.top+=aL+aG}}else{aC+=aJ;if(aH=="left"){aD.box={left:q.left+aG,width:aC};q.left+=aC+aG}else{q.right+=aC+aG;aD.box={left:G-q.right,width:aC}}}aD.position=aH;aD.tickLength=aF;aD.box.padding=aJ;aD.innermost=aM}function U(aB){if(aB.direction=="x"){aB.box.left=q.left;aB.box.width=h}else{aB.box.top=q.top;aB.box.height=w}}function t(){var aC,aE=m();c.each(aE,function(aF,aG){aG.show=aG.options.show;if(aG.show==null){aG.show=aG.used}aG.reserveSpace=aG.show||aG.options.reserveSpace;n(aG)});allocatedAxes=c.grep(aE,function(aF){return aF.reserveSpace});q.left=q.right=q.top=q.bottom=0;if(O.grid.show){c.each(allocatedAxes,function(aF,aG){S(aG);P(aG);ap(aG,aG.ticks);L(aG)});for(aC=allocatedAxes.length-1;aC>=0;--aC){au(allocatedAxes[aC])}var aD=O.grid.minBorderMargin;if(aD==null){aD=0;for(aC=0;aC<Q.length;++aC){aD=Math.max(aD,Q[aC].points.radius+Q[aC].points.lineWidth/2)}}for(var aB in q){q[aB]+=O.grid.borderWidth;q[aB]=Math.max(aD,q[aB])}}h=G-q.left-q.right;w=I-q.bottom-q.top;c.each(aE,function(aF,aG){r(aG)});if(O.grid.show){c.each(allocatedAxes,function(aF,aG){U(aG)});k()}o()}function n(aE){var aF=aE.options,aD=+(aF.min!=null?aF.min:aE.datamin),aB=+(aF.max!=null?aF.max:aE.datamax),aH=aB-aD;if(aH==0){var aC=aB==0?1:0.01;if(aF.min==null){aD-=aC}if(aF.max==null||aF.min!=null){aB+=aC}}else{var aG=aF.autoscaleMargin;if(aG!=null){if(aF.min==null){aD-=aH*aG;if(aD<0&&aE.datamin!=null&&aE.datamin>=0){aD=0}}if(aF.max==null){aB+=aH*aG;if(aB>0&&aE.datamax!=null&&aE.datamax<=0){aB=0}}}}aE.min=aD;aE.max=aB}function S(aG){var aM=aG.options;var aH;if(typeof aM.ticks=="number"&&aM.ticks>0){aH=aM.ticks}else{aH=0.3*Math.sqrt(aG.direction=="x"?G:I)}var aT=(aG.max-aG.min)/aH,aO,aB,aN,aR,aS,aQ,aI;if(aM.mode=="time"){var aJ={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aK=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var aC=0;if(aM.minTickSize!=null){if(typeof aM.tickSize=="number"){aC=aM.tickSize}else{aC=aM.minTickSize[0]*aJ[aM.minTickSize[1]]}}for(var aS=0;aS<aK.length-1;++aS){if(aT<(aK[aS][0]*aJ[aK[aS][1]]+aK[aS+1][0]*aJ[aK[aS+1][1]])/2&&aK[aS][0]*aJ[aK[aS][1]]>=aC){break}}aO=aK[aS][0];aN=aK[aS][1];if(aN=="year"){aQ=Math.pow(10,Math.floor(Math.log(aT/aJ.year)/Math.LN10));aI=(aT/aJ.year)/aQ;if(aI<1.5){aO=1}else{if(aI<3){aO=2}else{if(aI<7.5){aO=5}else{aO=10}}}aO*=aQ}aG.tickSize=aM.tickSize||[aO,aN];aB=function(aX){var a2=[],a0=aX.tickSize[0],a3=aX.tickSize[1],a1=new Date(aX.min);var aW=a0*aJ[a3];if(a3=="second"){a1.setUTCSeconds(a(a1.getUTCSeconds(),a0))}if(a3=="minute"){a1.setUTCMinutes(a(a1.getUTCMinutes(),a0))}if(a3=="hour"){a1.setUTCHours(a(a1.getUTCHours(),a0))}if(a3=="month"){a1.setUTCMonth(a(a1.getUTCMonth(),a0))}if(a3=="year"){a1.setUTCFullYear(a(a1.getUTCFullYear(),a0))}a1.setUTCMilliseconds(0);if(aW>=aJ.minute){a1.setUTCSeconds(0)}if(aW>=aJ.hour){a1.setUTCMinutes(0)}if(aW>=aJ.day){a1.setUTCHours(0)}if(aW>=aJ.day*4){a1.setUTCDate(1)}if(aW>=aJ.year){a1.setUTCMonth(0)}var a5=0,a4=Number.NaN,aY;do{aY=a4;a4=a1.getTime();a2.push(a4);if(a3=="month"){if(a0<1){a1.setUTCDate(1);var aV=a1.getTime();a1.setUTCMonth(a1.getUTCMonth()+1);var aZ=a1.getTime();a1.setTime(a4+a5*aJ.hour+(aZ-aV)*a0);a5=a1.getUTCHours();a1.setUTCHours(0)}else{a1.setUTCMonth(a1.getUTCMonth()+a0)}}else{if(a3=="year"){a1.setUTCFullYear(a1.getUTCFullYear()+a0)}else{a1.setTime(a4+aW)}}}while(a4<aX.max&&a4!=aY);return a2};aR=function(aV,aY){var a0=new Date(aV);if(aM.timeformat!=null){return c.plot.formatDate(a0,aM.timeformat,aM.monthNames)}var aW=aY.tickSize[0]*aJ[aY.tickSize[1]];var aX=aY.max-aY.min;var aZ=(aM.twelveHourClock)?" %p":"";if(aW<aJ.minute){fmt="%h:%M:%S"+aZ}else{if(aW<aJ.day){if(aX<2*aJ.day){fmt="%h:%M"+aZ}else{fmt="%b %d %h:%M"+aZ}}else{if(aW<aJ.month){fmt="%b %d"}else{if(aW<aJ.year){if(aX<aJ.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(a0,fmt,aM.monthNames)}}else{var aU=aM.tickDecimals;var aP=-Math.floor(Math.log(aT)/Math.LN10);if(aU!=null&&aP>aU){aP=aU}aQ=Math.pow(10,-aP);aI=aT/aQ;if(aI<1.5){aO=1}else{if(aI<3){aO=2;if(aI>2.25&&(aU==null||aP+1<=aU)){aO=2.5;++aP}}else{if(aI<7.5){aO=5}else{aO=10}}}aO*=aQ;if(aM.minTickSize!=null&&aO<aM.minTickSize){aO=aM.minTickSize}aG.tickDecimals=Math.max(0,aU!=null?aU:aP);aG.tickSize=aM.tickSize||aO;aB=function(aX){var aZ=[];var a0=a(aX.min,aX.tickSize),aW=0,aV=Number.NaN,aY;do{aY=aV;aV=a0+aW*aX.tickSize;aZ.push(aV);++aW}while(aV<aX.max&&aV!=aY);return aZ};aR=function(aV,aW){return aV.toFixed(aW.tickDecimals)}}if(aM.alignTicksWithAxis!=null){var aF=(aG.direction=="x"?p:aw)[aM.alignTicksWithAxis-1];if(aF&&aF.used&&aF!=aG){var aL=aB(aG);if(aL.length>0){if(aM.min==null){aG.min=Math.min(aG.min,aL[0])}if(aM.max==null&&aL.length>1){aG.max=Math.max(aG.max,aL[aL.length-1])}}aB=function(aX){var aY=[],aV,aW;for(aW=0;aW<aF.ticks.length;++aW){aV=(aF.ticks[aW].v-aF.min)/(aF.max-aF.min);aV=aX.min+aV*(aX.max-aX.min);aY.push(aV)}return aY};if(aG.mode!="time"&&aM.tickDecimals==null){var aE=Math.max(0,-Math.floor(Math.log(aT)/Math.LN10)+1),aD=aB(aG);if(!(aD.length>1&&/\..*0$/.test((aD[1]-aD[0]).toFixed(aE)))){aG.tickDecimals=aE}}}}aG.tickGenerator=aB;if(c.isFunction(aM.tickFormatter)){aG.tickFormatter=function(aV,aW){return""+aM.tickFormatter(aV,aW)}}else{aG.tickFormatter=aR}}function P(aF){var aH=aF.options.ticks,aG=[];if(aH==null||(typeof aH=="number"&&aH>0)){aG=aF.tickGenerator(aF)}else{if(aH){if(c.isFunction(aH)){aG=aH({min:aF.min,max:aF.max})}else{aG=aH}}}var aE,aB;aF.ticks=[];for(aE=0;aE<aG.length;++aE){var aC=null;var aD=aG[aE];if(typeof aD=="object"){aB=+aD[0];if(aD.length>1){aC=aD[1]}}else{aB=+aD}if(aC==null){aC=aF.tickFormatter(aB,aF)}if(!isNaN(aB)){aF.ticks.push({v:aB,label:aC})}}}function ap(aB,aC){if(aB.options.autoscaleMargin&&aC.length>0){if(aB.options.min==null){aB.min=Math.min(aB.min,aC[0].v)}if(aB.options.max==null&&aC.length>1){aB.max=Math.max(aB.max,aC[aC.length-1].v)}}}function W(){H.clearRect(0,0,G,I);var aC=O.grid;if(aC.show&&aC.backgroundColor){N()}if(aC.show&&!aC.aboveData){ac()}for(var aB=0;aB<Q.length;++aB){an(ak.drawSeries,[H,Q[aB]]);d(Q[aB])}an(ak.draw,[H]);if(aC.show&&aC.aboveData){ac()}}function D(aB,aI){var aE,aH,aG,aD,aF=m();for(i=0;i<aF.length;++i){aE=aF[i];if(aE.direction==aI){aD=aI+aE.n+"axis";if(!aB[aD]&&aE.n==1){aD=aI+"axis"}if(aB[aD]){aH=aB[aD].from;aG=aB[aD].to;break}}}if(!aB[aD]){aE=aI=="x"?p[0]:aw[0];aH=aB[aI+"1"];aG=aB[aI+"2"]}if(aH!=null&&aG!=null&&aH>aG){var aC=aH;aH=aG;aG=aC}return{from:aH,to:aG,axis:aE}}function N(){H.save();H.translate(q.left,q.top);H.fillStyle=am(O.grid.backgroundColor,w,0,"rgba(255, 255, 255, 0)");H.fillRect(0,0,h,w);H.restore()}function ac(){var aF;H.save();H.translate(q.left,q.top);var aH=O.grid.markings;if(aH){if(c.isFunction(aH)){var aK=aq.getAxes();aK.xmin=aK.xaxis.min;aK.xmax=aK.xaxis.max;aK.ymin=aK.yaxis.min;aK.ymax=aK.yaxis.max;aH=aH(aK)}for(aF=0;aF<aH.length;++aF){var aD=aH[aF],aC=D(aD,"x"),aI=D(aD,"y");if(aC.from==null){aC.from=aC.axis.min}if(aC.to==null){aC.to=aC.axis.max}if(aI.from==null){aI.from=aI.axis.min}if(aI.to==null){aI.to=aI.axis.max}if(aC.to<aC.axis.min||aC.from>aC.axis.max||aI.to<aI.axis.min||aI.from>aI.axis.max){continue}aC.from=Math.max(aC.from,aC.axis.min);aC.to=Math.min(aC.to,aC.axis.max);aI.from=Math.max(aI.from,aI.axis.min);aI.to=Math.min(aI.to,aI.axis.max);if(aC.from==aC.to&&aI.from==aI.to){continue}aC.from=aC.axis.p2c(aC.from);aC.to=aC.axis.p2c(aC.to);aI.from=aI.axis.p2c(aI.from);aI.to=aI.axis.p2c(aI.to);if(aC.from==aC.to||aI.from==aI.to){H.beginPath();H.strokeStyle=aD.color||O.grid.markingsColor;H.lineWidth=aD.lineWidth||O.grid.markingsLineWidth;H.moveTo(aC.from,aI.from);H.lineTo(aC.to,aI.to);H.stroke()}else{H.fillStyle=aD.color||O.grid.markingsColor;H.fillRect(aC.from,aI.to,aC.to-aC.from,aI.from-aI.to)}}}var aK=m(),aM=O.grid.borderWidth;for(var aE=0;aE<aK.length;++aE){var aB=aK[aE],aG=aB.box,aQ=aB.tickLength,aN,aL,aP,aJ;if(!aB.show||aB.ticks.length==0){continue}H.strokeStyle=aB.options.tickColor||c.color.parse(aB.options.color).scale("a",0.22).toString();H.lineWidth=1;if(aB.direction=="x"){aN=0;if(aQ=="full"){aL=(aB.position=="top"?0:w)}else{aL=aG.top-q.top+(aB.position=="top"?aG.height:0)}}else{aL=0;if(aQ=="full"){aN=(aB.position=="left"?0:h)}else{aN=aG.left-q.left+(aB.position=="left"?aG.width:0)}}if(!aB.innermost){H.beginPath();aP=aJ=0;if(aB.direction=="x"){aP=h}else{aJ=w}if(H.lineWidth==1){aN=Math.floor(aN)+0.5;aL=Math.floor(aL)+0.5}H.moveTo(aN,aL);H.lineTo(aN+aP,aL+aJ);H.stroke()}H.beginPath();for(aF=0;aF<aB.ticks.length;++aF){var aO=aB.ticks[aF].v;aP=aJ=0;if(aO<aB.min||aO>aB.max||(aQ=="full"&&aM>0&&(aO==aB.min||aO==aB.max))){continue}if(aB.direction=="x"){aN=aB.p2c(aO);aJ=aQ=="full"?-w:aQ;if(aB.position=="top"){aJ=-aJ}}else{aL=aB.p2c(aO);aP=aQ=="full"?-h:aQ;if(aB.position=="left"){aP=-aP}}if(H.lineWidth==1){if(aB.direction=="x"){aN=Math.floor(aN)+0.5}else{aL=Math.floor(aL)+0.5}}H.moveTo(aN,aL);H.lineTo(aN+aP,aL+aJ)}H.stroke()}if(aM){H.lineWidth=aM;H.strokeStyle=O.grid.borderColor;H.strokeRect(-aM/2,-aM/2,h+aM,w+aM)}H.restore()}function k(){av.find(".tickLabels").remove();var aG=['<div class="tickLabels" style="font-size:smaller">'];var aJ=m();for(var aD=0;aD<aJ.length;++aD){var aC=aJ[aD],aF=aC.box;if(!aC.show){continue}aG.push('<div class="'+aC.direction+"Axis "+aC.direction+aC.n+'Axis" style="color:'+aC.options.color+'">');for(var aE=0;aE<aC.ticks.length;++aE){var aH=aC.ticks[aE];if(!aH.label||aH.v<aC.min||aH.v>aC.max){continue}var aK={},aI;if(aC.direction=="x"){aI="center";aK.left=Math.round(q.left+aC.p2c(aH.v)-aC.labelWidth/2);if(aC.position=="bottom"){aK.top=aF.top+aF.padding}else{aK.bottom=I-(aF.top+aF.height-aF.padding)}}else{aK.top=Math.round(q.top+aC.p2c(aH.v)-aC.labelHeight/2);if(aC.position=="left"){aI="right"}else{aK.left=aF.left+aF.padding;aI="left"}}aK.width=aC.labelWidth;var aB=["position:absolute","text-align:"+aI];for(var aL in aK){aB.push(aL+":"+aK[aL]+"px")}aG.push('<div class="tickLabel" style="'+aB.join(";")+'">'+aH.label+"</div>")}aG.push("</div>")}aG.push("</div>");av.append(aG.join(""))}function d(aB){if(aB.lines.show){at(aB)}if(aB.bars.show){e(aB)}if(aB.points.show){ao(aB)}}function at(aE){function aD(aP,aQ,aI,aU,aT){var aV=aP.points,aJ=aP.pointsize,aN=null,aM=null;H.beginPath();for(var aO=aJ;aO<aV.length;aO+=aJ){var aL=aV[aO-aJ],aS=aV[aO-aJ+1],aK=aV[aO],aR=aV[aO+1];if(aL==null||aK==null){continue}if(aS<=aR&&aS<aT.min){if(aR<aT.min){continue}aL=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.min}else{if(aR<=aS&&aR<aT.min){if(aS<aT.min){continue}aK=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.min}}if(aS>=aR&&aS>aT.max){if(aR>aT.max){continue}aL=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.max}else{if(aR>=aS&&aR>aT.max){if(aS>aT.max){continue}aK=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.max}}if(aL<=aK&&aL<aU.min){if(aK<aU.min){continue}aS=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.min}else{if(aK<=aL&&aK<aU.min){if(aL<aU.min){continue}aR=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.min}}if(aL>=aK&&aL>aU.max){if(aK>aU.max){continue}aS=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.max}else{if(aK>=aL&&aK>aU.max){if(aL>aU.max){continue}aR=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.max}}if(aL!=aN||aS!=aM){H.moveTo(aU.p2c(aL)+aQ,aT.p2c(aS)+aI)}aN=aK;aM=aR;H.lineTo(aU.p2c(aK)+aQ,aT.p2c(aR)+aI)}H.stroke()}function aF(aI,aQ,aP){var aW=aI.points,aV=aI.pointsize,aN=Math.min(Math.max(0,aP.min),aP.max),aX=0,aU,aT=false,aM=1,aL=0,aR=0;while(true){if(aV>0&&aX>aW.length+aV){break}aX+=aV;var aZ=aW[aX-aV],aK=aW[aX-aV+aM],aY=aW[aX],aJ=aW[aX+aM];if(aT){if(aV>0&&aZ!=null&&aY==null){aR=aX;aV=-aV;aM=2;continue}if(aV<0&&aX==aL+aV){H.fill();aT=false;aV=-aV;aM=1;aX=aL=aR+aV;continue}}if(aZ==null||aY==null){continue}if(aZ<=aY&&aZ<aQ.min){if(aY<aQ.min){continue}aK=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.min}else{if(aY<=aZ&&aY<aQ.min){if(aZ<aQ.min){continue}aJ=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.min}}if(aZ>=aY&&aZ>aQ.max){if(aY>aQ.max){continue}aK=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.max}else{if(aY>=aZ&&aY>aQ.max){if(aZ>aQ.max){continue}aJ=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.max}}if(!aT){H.beginPath();H.moveTo(aQ.p2c(aZ),aP.p2c(aN));aT=true}if(aK>=aP.max&&aJ>=aP.max){H.lineTo(aQ.p2c(aZ),aP.p2c(aP.max));H.lineTo(aQ.p2c(aY),aP.p2c(aP.max));continue}else{if(aK<=aP.min&&aJ<=aP.min){H.lineTo(aQ.p2c(aZ),aP.p2c(aP.min));H.lineTo(aQ.p2c(aY),aP.p2c(aP.min));continue}}var aO=aZ,aS=aY;if(aK<=aJ&&aK<aP.min&&aJ>=aP.min){aZ=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.min}else{if(aJ<=aK&&aJ<aP.min&&aK>=aP.min){aY=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.min}}if(aK>=aJ&&aK>aP.max&&aJ<=aP.max){aZ=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.max}else{if(aJ>=aK&&aJ>aP.max&&aK<=aP.max){aY=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.max}}if(aZ!=aO){H.lineTo(aQ.p2c(aO),aP.p2c(aK))}H.lineTo(aQ.p2c(aZ),aP.p2c(aK));H.lineTo(aQ.p2c(aY),aP.p2c(aJ));if(aY!=aS){H.lineTo(aQ.p2c(aY),aP.p2c(aJ));H.lineTo(aQ.p2c(aS),aP.p2c(aJ))}}}H.save();H.translate(q.left,q.top);H.lineJoin="round";var aG=aE.lines.lineWidth,aB=aE.shadowSize;if(aG>0&&aB>0){H.lineWidth=aB;H.strokeStyle="rgba(0,0,0,0.1)";var aH=Math.PI/18;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/2),Math.cos(aH)*(aG/2+aB/2),aE.xaxis,aE.yaxis);H.lineWidth=aB/2;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/4),Math.cos(aH)*(aG/2+aB/4),aE.xaxis,aE.yaxis)}H.lineWidth=aG;H.strokeStyle=aE.color;var aC=ae(aE.lines,aE.color,0,w);if(aC){H.fillStyle=aC;aF(aE.datapoints,aE.xaxis,aE.yaxis)}if(aG>0){aD(aE.datapoints,0,0,aE.xaxis,aE.yaxis)}H.restore()}function ao(aE){function aH(aN,aM,aU,aK,aS,aT,aQ,aJ){var aR=aN.points,aI=aN.pointsize;for(var aL=0;aL<aR.length;aL+=aI){var aP=aR[aL],aO=aR[aL+1];if(aP==null||aP<aT.min||aP>aT.max||aO<aQ.min||aO>aQ.max){continue}H.beginPath();aP=aT.p2c(aP);aO=aQ.p2c(aO)+aK;if(aJ=="circle"){H.arc(aP,aO,aM,0,aS?Math.PI:Math.PI*2,false)}else{aJ(H,aP,aO,aM,aS)}H.closePath();if(aU){H.fillStyle=aU;H.fill()}H.stroke()}}H.save();H.translate(q.left,q.top);var aG=aE.points.lineWidth,aC=aE.shadowSize,aB=aE.points.radius,aF=aE.points.symbol;if(aG>0&&aC>0){var aD=aC/2;H.lineWidth=aD;H.strokeStyle="rgba(0,0,0,0.1)";aH(aE.datapoints,aB,null,aD+aD/2,true,aE.xaxis,aE.yaxis,aF);H.strokeStyle="rgba(0,0,0,0.2)";aH(aE.datapoints,aB,null,aD/2,true,aE.xaxis,aE.yaxis,aF)}H.lineWidth=aG;H.strokeStyle=aE.color;aH(aE.datapoints,aB,ae(aE.points,aE.color),0,false,aE.xaxis,aE.yaxis,aF);H.restore()}function E(aN,aM,aV,aI,aQ,aF,aD,aL,aK,aU,aR,aC){var aE,aT,aJ,aP,aG,aB,aO,aH,aS;if(aR){aH=aB=aO=true;aG=false;aE=aV;aT=aN;aP=aM+aI;aJ=aM+aQ;if(aT<aE){aS=aT;aT=aE;aE=aS;aG=true;aB=false}}else{aG=aB=aO=true;aH=false;aE=aN+aI;aT=aN+aQ;aJ=aV;aP=aM;if(aP<aJ){aS=aP;aP=aJ;aJ=aS;aH=true;aO=false}}if(aT<aL.min||aE>aL.max||aP<aK.min||aJ>aK.max){return}if(aE<aL.min){aE=aL.min;aG=false}if(aT>aL.max){aT=aL.max;aB=false}if(aJ<aK.min){aJ=aK.min;aH=false}if(aP>aK.max){aP=aK.max;aO=false}aE=aL.p2c(aE);aJ=aK.p2c(aJ);aT=aL.p2c(aT);aP=aK.p2c(aP);if(aD){aU.beginPath();aU.moveTo(aE,aJ);aU.lineTo(aE,aP);aU.lineTo(aT,aP);aU.lineTo(aT,aJ);aU.fillStyle=aD(aJ,aP);aU.fill()}if(aC>0&&(aG||aB||aO||aH)){aU.beginPath();aU.moveTo(aE,aJ+aF);if(aG){aU.lineTo(aE,aP+aF)}else{aU.moveTo(aE,aP+aF)}if(aO){aU.lineTo(aT,aP+aF)}else{aU.moveTo(aT,aP+aF)}if(aB){aU.lineTo(aT,aJ+aF)}else{aU.moveTo(aT,aJ+aF)}if(aH){aU.lineTo(aE,aJ+aF)}else{aU.moveTo(aE,aJ+aF)}aU.stroke()}}function e(aD){function aC(aJ,aI,aL,aG,aK,aN,aM){var aO=aJ.points,aF=aJ.pointsize;for(var aH=0;aH<aO.length;aH+=aF){if(aO[aH]==null){continue}E(aO[aH],aO[aH+1],aO[aH+2],aI,aL,aG,aK,aN,aM,H,aD.bars.horizontal,aD.bars.lineWidth)}}H.save();H.translate(q.left,q.top);H.lineWidth=aD.bars.lineWidth;H.strokeStyle=aD.color;var aB=aD.bars.barLeft;var aE=aD.bars.fill?function(aF,aG){return ae(aD.bars,aD.color,aF,aG)}:null;aC(aD.datapoints,aB,aB+aD.bars.barWidth,0,aE,aD.xaxis,aD.yaxis);H.restore()}function ae(aD,aB,aC,aF){var aE=aD.fill;if(!aE){return null}if(aD.fillColor){return am(aD.fillColor,aC,aF,aB)}var aG=c.color.parse(aB);aG.a=typeof aE=="number"?aE:0.4;aG.normalize();return aG.toString()}function o(){av.find(".legend").remove();if(!O.legend.show){return}var aH=[],aF=false,aN=O.legend.labelFormatter,aM,aJ;for(var aE=0;aE<Q.length;++aE){aM=Q[aE];aJ=aM.label;if(!aJ){continue}if(aE%O.legend.noColumns==0){if(aF){aH.push("</tr>")}aH.push("<tr>");aF=true}if(aN){aJ=aN(aJ,aM)}aH.push('<td class="legendColorBox"><div style="border:1px solid '+O.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aM.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aJ+"</td>")}if(aF){aH.push("</tr>")}if(aH.length==0){return}var aL='<table style="font-size:smaller;color:'+O.grid.color+'">'+aH.join("")+"</table>";if(O.legend.container!=null){c(O.legend.container).html(aL)}else{var aI="",aC=O.legend.position,aD=O.legend.margin;if(aD[0]==null){aD=[aD,aD]}if(aC.charAt(0)=="n"){aI+="top:"+(aD[1]+q.top)+"px;"}else{if(aC.charAt(0)=="s"){aI+="bottom:"+(aD[1]+q.bottom)+"px;"}}if(aC.charAt(1)=="e"){aI+="right:"+(aD[0]+q.right)+"px;"}else{if(aC.charAt(1)=="w"){aI+="left:"+(aD[0]+q.left)+"px;"}}var aK=c('<div class="legend">'+aL.replace('style="','style="position:absolute;'+aI+";")+"</div>").appendTo(av);if(O.legend.backgroundOpacity!=0){var aG=O.legend.backgroundColor;if(aG==null){aG=O.grid.backgroundColor;if(aG&&typeof aG=="string"){aG=c.color.parse(aG)}else{aG=c.color.extract(aK,"background-color")}aG.a=1;aG=aG.toString()}var aB=aK.children();c('<div style="position:absolute;width:'+aB.width()+"px;height:"+aB.height()+"px;"+aI+"background-color:"+aG+';"> </div>').prependTo(aK).css("opacity",O.legend.backgroundOpacity)}}}var ab=[],M=null;function K(aI,aG,aD){var aO=O.grid.mouseActiveRadius,a0=aO*aO+1,aY=null,aR=false,aW,aU;for(aW=Q.length-1;aW>=0;--aW){if(!aD(Q[aW])){continue}var aP=Q[aW],aH=aP.xaxis,aF=aP.yaxis,aV=aP.datapoints.points,aT=aP.datapoints.pointsize,aQ=aH.c2p(aI),aN=aF.c2p(aG),aC=aO/aH.scale,aB=aO/aF.scale;if(aH.options.inverseTransform){aC=Number.MAX_VALUE}if(aF.options.inverseTransform){aB=Number.MAX_VALUE}if(aP.lines.show||aP.points.show){for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1];if(aK==null){continue}if(aK-aQ>aC||aK-aQ<-aC||aJ-aN>aB||aJ-aN<-aB){continue}var aM=Math.abs(aH.p2c(aK)-aI),aL=Math.abs(aF.p2c(aJ)-aG),aS=aM*aM+aL*aL;if(aS<a0){a0=aS;aY=[aW,aU/aT]}}}if(aP.bars.show&&!aY){var aE=aP.bars.barLeft,aX=aE+aP.bars.barWidth;for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1],aZ=aV[aU+2];if(aK==null){continue}if(Q[aW].bars.horizontal?(aQ<=Math.max(aZ,aK)&&aQ>=Math.min(aZ,aK)&&aN>=aJ+aE&&aN<=aJ+aX):(aQ>=aK+aE&&aQ<=aK+aX&&aN>=Math.min(aZ,aJ)&&aN<=Math.max(aZ,aJ))){aY=[aW,aU/aT]}}}}if(aY){aW=aY[0];aU=aY[1];aT=Q[aW].datapoints.pointsize;return{datapoint:Q[aW].datapoints.points.slice(aU*aT,(aU+1)*aT),dataIndex:aU,series:Q[aW],seriesIndex:aW}}return null}function aa(aB){if(O.grid.hoverable){u("plothover",aB,function(aC){return aC.hoverable!=false})}}function l(aB){if(O.grid.hoverable){u("plothover",aB,function(aC){return false})}}function R(aB){u("plotclick",aB,function(aC){return aC.clickable!=false})}function u(aC,aB,aD){var aE=y.offset(),aH=aB.pageX-aE.left-q.left,aF=aB.pageY-aE.top-q.top,aJ=C({left:aH,top:aF});aJ.pageX=aB.pageX;aJ.pageY=aB.pageY;var aK=K(aH,aF,aD);if(aK){aK.pageX=parseInt(aK.series.xaxis.p2c(aK.datapoint[0])+aE.left+q.left);aK.pageY=parseInt(aK.series.yaxis.p2c(aK.datapoint[1])+aE.top+q.top)}if(O.grid.autoHighlight){for(var aG=0;aG<ab.length;++aG){var aI=ab[aG];if(aI.auto==aC&&!(aK&&aI.series==aK.series&&aI.point[0]==aK.datapoint[0]&&aI.point[1]==aK.datapoint[1])){T(aI.series,aI.point)}}if(aK){x(aK.series,aK.datapoint,aC)}}av.trigger(aC,[aJ,aK])}function f(){if(!M){M=setTimeout(s,30)}}function s(){M=null;A.save();A.clearRect(0,0,G,I);A.translate(q.left,q.top);var aC,aB;for(aC=0;aC<ab.length;++aC){aB=ab[aC];if(aB.series.bars.show){v(aB.series,aB.point)}else{ay(aB.series,aB.point)}}A.restore();an(ak.drawOverlay,[A])}function x(aD,aB,aF){if(typeof aD=="number"){aD=Q[aD]}if(typeof aB=="number"){var aE=aD.datapoints.pointsize;aB=aD.datapoints.points.slice(aE*aB,aE*(aB+1))}var aC=al(aD,aB);if(aC==-1){ab.push({series:aD,point:aB,auto:aF});f()}else{if(!aF){ab[aC].auto=false}}}function T(aD,aB){if(aD==null&&aB==null){ab=[];f()}if(typeof aD=="number"){aD=Q[aD]}if(typeof aB=="number"){aB=aD.data[aB]}var aC=al(aD,aB);if(aC!=-1){ab.splice(aC,1);f()}}function al(aD,aE){for(var aB=0;aB<ab.length;++aB){var aC=ab[aB];if(aC.series==aD&&aC.point[0]==aE[0]&&aC.point[1]==aE[1]){return aB}}return -1}function ay(aE,aD){var aC=aD[0],aI=aD[1],aH=aE.xaxis,aG=aE.yaxis;if(aC<aH.min||aC>aH.max||aI<aG.min||aI>aG.max){return}var aF=aE.points.radius+aE.points.lineWidth/2;A.lineWidth=aF;A.strokeStyle=c.color.parse(aE.color).scale("a",0.5).toString();var aB=1.5*aF,aC=aH.p2c(aC),aI=aG.p2c(aI);A.beginPath();if(aE.points.symbol=="circle"){A.arc(aC,aI,aB,0,2*Math.PI,false)}else{aE.points.symbol(A,aC,aI,aB,false)}A.closePath();A.stroke()}function v(aE,aB){A.lineWidth=aE.bars.lineWidth;A.strokeStyle=c.color.parse(aE.color).scale("a",0.5).toString();var aD=c.color.parse(aE.color).scale("a",0.5).toString();var aC=aE.bars.barLeft;E(aB[0],aB[1],aB[2]||0,aC,aC+aE.bars.barWidth,0,function(){return aD},aE.xaxis,aE.yaxis,A,aE.bars.horizontal,aE.bars.lineWidth)}function am(aJ,aB,aH,aC){if(typeof aJ=="string"){return aJ}else{var aI=H.createLinearGradient(0,aH,0,aB);for(var aE=0,aD=aJ.colors.length;aE<aD;++aE){var aF=aJ.colors[aE];if(typeof aF!="string"){var aG=c.color.parse(aC);if(aF.brightness!=null){aG=aG.scale("rgb",aF.brightness)}if(aF.opacity!=null){aG.a*=aF.opacity}aF=aG.toString()}aI.addColorStop(aE/(aD-1),aF)}return aI}}}c.plot=function(g,e,d){var f=new b(c(g),e,d,c.plot.plugins);return f};c.plot.version="0.7";c.plot.plugins=[];c.plot.formatDate=function(l,f,h){var o=function(d){d=""+d;return d.length==1?"0"+d:d};var e=[];var p=false,j=false;var n=l.getUTCHours();var k=n<12;if(h==null){h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(n>12){n=n-12}else{if(n==0){n=12}}}for(var g=0;g<f.length;++g){var m=f.charAt(g);if(p){switch(m){case"h":m=""+n;break;case"H":m=o(n);break;case"M":m=o(l.getUTCMinutes());break;case"S":m=o(l.getUTCSeconds());break;case"d":m=""+l.getUTCDate();break;case"m":m=""+(l.getUTCMonth()+1);break;case"y":m=""+l.getUTCFullYear();break;case"b":m=""+h[l.getUTCMonth()];break;case"p":m=(k)?("am"):("pm");break;case"P":m=(k)?("AM"):("PM");break;case"0":m="";j=true;break}if(m&&j){m=o(m);j=false}e.push(m);if(!j){p=false}}else{if(m=="%"){p=true}else{e.push(m)}}}return e.join("")};function a(e,d){return d*Math.floor(e/d)}})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.fillbetween.js' */
(function(b){var a={series:{fillBetween:null}};function c(f){function d(j,h){var g;for(g=0;g<h.length;++g){if(h[g].id==j.fillBetween){return h[g]}}if(typeof j.fillBetween=="number"){g=j.fillBetween;if(g<0||g>=h.length){return null}return h[g]}return null}function e(B,u,g){if(u.fillBetween==null){return}var p=d(u,B.getData());if(!p){return}var y=g.pointsize,E=g.points,h=p.datapoints.pointsize,x=p.datapoints.points,r=[],w,v,k,G,F,q,t=u.lines.show,o=y>2&&g.format[2].y,n=t&&u.lines.steps,D=true,C=0,A=0,z;while(true){if(C>=E.length){break}z=r.length;if(E[C]==null){for(m=0;m<y;++m){r.push(E[C+m])}C+=y}else{if(A>=x.length){if(!t){for(m=0;m<y;++m){r.push(E[C+m])}}C+=y}else{if(x[A]==null){for(m=0;m<y;++m){r.push(null)}D=true;A+=h}else{w=E[C];v=E[C+1];G=x[A];F=x[A+1];q=0;if(w==G){for(m=0;m<y;++m){r.push(E[C+m])}q=F;C+=y;A+=h}else{if(w>G){if(t&&C>0&&E[C-y]!=null){k=v+(E[C-y+1]-v)*(G-w)/(E[C-y]-w);r.push(G);r.push(k);for(m=2;m<y;++m){r.push(E[C+m])}q=F}A+=h}else{if(D&&t){C+=y;continue}for(m=0;m<y;++m){r.push(E[C+m])}if(t&&A>0&&x[A-h]!=null){q=F+(x[A-h+1]-F)*(w-G)/(x[A-h]-G)}C+=y}}D=false;if(z!=r.length&&o){r[z+2]=q}}}}if(n&&z!=r.length&&z>0&&r[z]!=null&&r[z]!=r[z-y]&&r[z+1]!=r[z-y+1]){for(m=0;m<y;++m){r[z+y+m]=r[z+m]}r[z+1]=r[z-y+1]}}g.points=r}f.hooks.processDatapoints.push(e)}b.plot.plugins.push({init:c,options:a,name:"fillbetween",version:"1.0"})})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.stack.js' */
(function(b){var a={series:{stack:null}};function c(f){function d(k,j){var h=null;for(var g=0;g<j.length;++g){if(k==j[g]){break}if(j[g].stack==k.stack){h=j[g]}}return h}function e(C,v,g){if(v.stack==null){return}var p=d(v,C.getData());if(!p){return}var z=g.pointsize,F=g.points,h=p.datapoints.pointsize,y=p.datapoints.points,t=[],x,w,k,J,I,r,u=v.lines.show,G=v.bars.horizontal,o=z>2&&(G?g.format[2].x:g.format[2].y),n=u&&v.lines.steps,E=true,q=G?1:0,H=G?0:1,D=0,B=0,A;while(true){if(D>=F.length){break}A=t.length;if(F[D]==null){for(m=0;m<z;++m){t.push(F[D+m])}D+=z}else{if(B>=y.length){if(!u){for(m=0;m<z;++m){t.push(F[D+m])}}D+=z}else{if(y[B]==null){for(m=0;m<z;++m){t.push(null)}E=true;B+=h}else{x=F[D+q];w=F[D+H];J=y[B+q];I=y[B+H];r=0;if(x==J){for(m=0;m<z;++m){t.push(F[D+m])}t[A+H]+=I;r=I;D+=z;B+=h}else{if(x>J){if(u&&D>0&&F[D-z]!=null){k=w+(F[D-z+H]-w)*(J-x)/(F[D-z+q]-x);t.push(J);t.push(k+I);for(m=2;m<z;++m){t.push(F[D+m])}r=I}B+=h}else{if(E&&u){D+=z;continue}for(m=0;m<z;++m){t.push(F[D+m])}if(u&&B>0&&y[B-h]!=null){r=I+(y[B-h+H]-I)*(x-J)/(y[B-h+q]-J)}t[A+H]+=r;D+=z}}E=false;if(A!=t.length&&o){t[A+2]+=r}}}}if(n&&A!=t.length&&A>0&&t[A]!=null&&t[A]!=t[A-z]&&t[A+1]!=t[A-z+1]){for(m=0;m<z;++m){t[A+z+m]=t[A+m]}t[A+1]=t[A-z+1]}}g.points=t}f.hooks.processDatapoints.push(e)}b.plot.plugins.push({init:c,options:a,name:"stack",version:"1.2"})})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.selection.js' */
(function(a){function b(k){var p={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var m={};var r=null;function e(s){if(p.active){l(s);k.getPlaceholder().trigger("plotselecting",[g()])}}function n(s){if(s.which!=1){return}document.body.focus();if(document.onselectstart!==undefined&&m.onselectstart==null){m.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&m.ondrag==null){m.ondrag=document.ondrag;document.ondrag=function(){return false}}d(p.first,s);p.active=true;r=function(t){j(t)};a(document).one("mouseup",r)}function j(s){r=null;if(document.onselectstart!==undefined){document.onselectstart=m.onselectstart}if(document.ondrag!==undefined){document.ondrag=m.ondrag}p.active=false;l(s);if(f()){i()}else{k.getPlaceholder().trigger("plotunselected",[]);k.getPlaceholder().trigger("plotselecting",[null])}return false}function g(){if(!f()){return null}var u={},t=p.first,s=p.second;a.each(k.getAxes(),function(v,w){if(w.used){var y=w.c2p(t[w.direction]),x=w.c2p(s[w.direction]);u[v]={from:Math.min(y,x),to:Math.max(y,x)}}});return u}function i(){var s=g();k.getPlaceholder().trigger("plotselected",[s]);if(s.xaxis&&s.yaxis){k.getPlaceholder().trigger("selected",[{x1:s.xaxis.from,y1:s.yaxis.from,x2:s.xaxis.to,y2:s.yaxis.to}])}}function h(t,u,s){return u<t?t:(u>s?s:u)}function d(w,t){var v=k.getOptions();var u=k.getPlaceholder().offset();var s=k.getPlotOffset();w.x=h(0,t.pageX-u.left-s.left,k.width());w.y=h(0,t.pageY-u.top-s.top,k.height());if(v.selection.mode=="y"){w.x=w==p.first?0:k.width()}if(v.selection.mode=="x"){w.y=w==p.first?0:k.height()}}function l(s){if(s.pageX==null){return}d(p.second,s);if(f()){p.show=true;k.triggerRedrawOverlay()}else{q(true)}}function q(s){if(p.show){p.show=false;k.triggerRedrawOverlay();if(!s){k.getPlaceholder().trigger("plotunselected",[])}}}function c(s,w){var t,y,z,A,x=k.getAxes();for(var u in x){t=x[u];if(t.direction==w){A=w+t.n+"axis";if(!s[A]&&t.n==1){A=w+"axis"}if(s[A]){y=s[A].from;z=s[A].to;break}}}if(!s[A]){t=w=="x"?k.getXAxes()[0]:k.getYAxes()[0];y=s[w+"1"];z=s[w+"2"]}if(y!=null&&z!=null&&y>z){var v=y;y=z;z=v}return{from:y,to:z,axis:t}}function o(t,s){var v,u,w=k.getOptions();if(w.selection.mode=="y"){p.first.x=0;p.second.x=k.width()}else{u=c(t,"x");p.first.x=u.axis.p2c(u.from);p.second.x=u.axis.p2c(u.to)}if(w.selection.mode=="x"){p.first.y=0;p.second.y=k.height()}else{u=c(t,"y");p.first.y=u.axis.p2c(u.from);p.second.y=u.axis.p2c(u.to)}p.show=true;k.triggerRedrawOverlay();if(!s&&f()){i()}}function f(){var s=5;return Math.abs(p.second.x-p.first.x)>=s&&Math.abs(p.second.y-p.first.y)>=s}k.clearSelection=q;k.setSelection=o;k.getSelection=g;k.hooks.bindEvents.push(function(t,s){var u=t.getOptions();if(u.selection.mode!=null){s.mousemove(e);s.mousedown(n)}});k.hooks.drawOverlay.push(function(v,D){if(p.show&&f()){var t=v.getPlotOffset();var s=v.getOptions();D.save();D.translate(t.left,t.top);var z=a.color.parse(s.selection.color);D.strokeStyle=z.scale("a",0.8).toString();D.lineWidth=1;D.lineJoin="round";D.fillStyle=z.scale("a",0.4).toString();var B=Math.min(p.first.x,p.second.x),A=Math.min(p.first.y,p.second.y),C=Math.abs(p.second.x-p.first.x),u=Math.abs(p.second.y-p.first.y);D.fillRect(B,A,C,u);D.strokeRect(B,A,C,u);D.restore()}});k.hooks.shutdown.push(function(t,s){s.unbind("mousemove",e);s.unbind("mousedown",n);if(r){a(document).unbind("mouseup",r)}})}a.plot.plugins.push({init:b,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})})(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.mouseenterexit.js' */
(function(b){var a={mouseEnterExitEvents:false};function c(d){d.hooks.bindEvents.push(function(g,f){var h=function(i){if(!g.getOptions().mouseEnterExitEvents){return}if(!g.mouseEntered){g.mouseEntered=true;GH.log("triggering flotMouseEnter",GH.Logger.Contexts.ui);g.getPlaceholder().trigger("flotMouseEnter",g)}};var e=function(i){if(!g.getOptions().mouseEnterExitEvents){return}if(g.mouseEntered){g.mouseEntered=false;GH.log("triggering flotMouseLeave",GH.Logger.Contexts.ui);g.getPlaceholder().trigger("flotMouseLeave",g)}};f.mousemove(h);f.mouseleave(e)})}AJS.$.plot.plugins.push({init:c,options:a,name:"gh-mouseenterexit-events",version:"1.0"})})(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.multi.js' */
(function(b){function c(h){var d=false;var f=[];var e=0;function j(n,k,l,m){if(k.bars.show){f.push(k)}}function i(q,o,p){if(o.bars.show&&o.bars.barLeft==undefined){if(e==0){for(var m=0;m<f.length;m++){e+=f[m].bars.barWidth}}var n=0;for(var l=0;l<f.length;l++){s=f[l];if(s==o){break}n+=s.bars.barWidth}o.bars.barLeft=n-(e/2)}}function g(l,k){if(k.multiplebars){d=k.multiplebars;f=[];e=0;l.hooks.processRawData.push(j);l.hooks.processDatapoints.push(i)}}h.hooks.processOptions.push(g)}var a={multiplebars:false};b.plot.plugins.push({init:c,options:a,name:"multiplebars",version:"0.1"})})(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.js' */
if(!GH.Components){GH.Components={}}GH.Components.QuickFilters=function(a){this.stateParamName=a};GH.Components.QuickFilters.events=new GH.Events();(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Components.QuickFilters.analytics=new a("gh.rapidboard.quickFilters")})();GH.Components.QuickFilters.prototype.stateParamName="activeQuickFilters";GH.Components.QuickFilters.prototype.rapidViewConfig={};GH.Components.QuickFilters.prototype.setRapidViewConfig=function(a){this.rapidViewConfig=a;this.validateActiveFilters()};GH.Components.QuickFilters.prototype.getActiveQuickFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])};GH.Components.QuickFilters.prototype.setActiveQuickFilters=function(a){GH.BoardState.setPerViewValue(this.stateParamName,a)};GH.Components.QuickFilters.prototype.validateActiveFilters=function validateActiveFilters(){var c=this.getActiveQuickFilters();var b=this;var a=_.filter(c,function(d){return _.find(b.rapidViewConfig.quickFilters,function(e){return d==e.id})});if(c.length!=a.length){this.setActiveQuickFilters(a);GH.RapidBoard.State.pushState()}};GH.Components.QuickFilters.prototype.getQuickFilters=function(){var a=this.getActiveQuickFilters();return _.map(this.rapidViewConfig.quickFilters,function(b){b.isActive=_.contains(a,b.id);return b})};GH.Components.QuickFilters.prototype.getInitiallyExpanded=function(){return GH.RapidBoard.State.getQuickFiltersExpanded()};GH.Components.QuickFilters.prototype.toggleInitiallyExpanded=function(){var a=!GH.RapidBoard.State.getQuickFiltersExpanded();GH.RapidBoard.State.setQuickFiltersExpanded(a)};GH.Components.QuickFilters.prototype.renderQuickFilters=function(g){var c=this.getQuickFilters();var e=GH.tpl.component.quickfilter.renderQuickFilters({quickFilters:c,canEdit:this.rapidViewConfig.canEdit,initiallyExpanded:this.getInitiallyExpanded(),thisMode:g.mode});var f=AJS.$(e);var d=this;var b=f.find("#js-quickfilters-label");GH.Tooltip.tipsify({selector:b,gravity:"w",className:"ghx-tipsy-left"});var h="#js-"+g.mode+"-quickfilters-trigger";f.find(".js-quickfilter-button").click(function(j){var i=AJS.$(this);d.toggleQuickFilter(j,i)});var a=this.toggleInitiallyExpanded;f.find(h).click(function(){a()});f.delegate(h,"aui-expander-expanded aui-expander-collapsed",GH.RapidBoard.ViewController.handleResizeEvent);return f};GH.Components.QuickFilters.prototype.toggleQuickFilter=function(b,a){b.preventDefault();GH.Components.QuickFilters.events.trigger("before:toggle");var c=parseInt(a.attr("data-filter-id"),10);this.toggleActiveQuickFilter(c);a.toggleClass("ghx-active");AJS.$(this).trigger("quickFilterChange");GH.Components.QuickFilters.analytics.trigger("toggle","activeFilterCount",this.getActiveQuickFilters().length)};GH.Components.QuickFilters.prototype.toggleActiveQuickFilter=function toggleActiveQuickFilter(d){if(d){var c=false;var e=this.getActiveQuickFilters();for(var b=0,a=e.length;b<a;b++){if(e[b]==d){e.splice(b,1);c=true;break}}if(!c){e.push(d)}this.setActiveQuickFilters(e);GH.RapidBoard.State.pushState()}};GH.Components.QuickFilters.prototype.clearFilters=function clearFilters(){var a=this.getActiveQuickFilters();if(a.length==0){return false}else{this.setActiveQuickFilters([]);AJS.$(".ghx-controls-filters .ghx-active").removeClass("ghx-active");return true}};GH.Components.QuickFilters.prototype.quickExpanderLayout=function quickExpander(e){var c="#js-"+e.mode+"-quickfilters";var a=AJS.$(c);var g=AJS.$(a).find("dt");var d=a.find(".ghx-quickfilter-trigger");var b=d.outerWidth();var f=d.height()+parseInt(g.css("marginBottom"),10)+1;d.css({display:"none"});a.css({"padding-right":""});if(a[0]&&a[0].scrollHeight>f){d.css({display:""});if(!a.attr("aria-expanded")||a.attr("aria-expanded")=="false"){a.css({"padding-right":b})}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.soy' */
// This file was automatically generated from QuickFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.quickfilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.quickfilter == 'undefined') { GH.tpl.component.quickfilter = {}; }


GH.tpl.component.quickfilter.renderQuickFilters = function(opt_data, opt_ignored) {
  var output = '<dl class="ghx-controls-filters js-quickfilter-selector">';
  var modeExpanderId__soy4 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters';
  var modeExpanderTriggerId__soy8 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters-trigger';
  var param15 = '<dt id="js-quickfilters-label" class="ghx-cursor-help"' + ((opt_data.canEdit) ? 'data-tooltip="' + soy.$$escapeHtml("Use Quick Filters to view a subset of issues. Add more in the board configuration.") + '"' : 'data-tooltip="' + soy.$$escapeHtml("Use Quick Filters to view a subset of issues. Board owners can add more.") + '"') + '>' + soy.$$escapeHtml("Quick Filters") + ':</dt>';
  var quickFilterList29 = opt_data.quickFilters;
  var quickFilterListLen29 = quickFilterList29.length;
  for (var quickFilterIndex29 = 0; quickFilterIndex29 < quickFilterListLen29; quickFilterIndex29++) {
    var quickFilterData29 = quickFilterList29[quickFilterIndex29];
    param15 += '<dd><a role="button" href="#" class="js-quickfilter-button ' + ((quickFilterIndex29 == 0) ? 'first' : '') + ' ' + ((quickFilterIndex29 == quickFilterListLen29 - 1) ? 'last' : '') + ' ' + ((quickFilterData29.isActive) ? ' ghx-active' : '') + '" title="' + ((quickFilterData29.description == '') ? soy.$$escapeHtml(quickFilterData29.query) : soy.$$escapeHtml(quickFilterData29.description)) + '" data-filter-id="' + soy.$$escapeHtml(quickFilterData29.id) + '">' + soy.$$escapeHtml(quickFilterData29.name) + '</a></dd>';
  }
  param15 += '<dd class="ghx-quickfilter-trigger">' + aui.expander.trigger({id: modeExpanderTriggerId__soy8, contentId: modeExpanderId__soy4, tag: 'a', content: opt_data.initiallyExpanded ? "\u2026 Show fewer" : "\u2026 Show more", replaceText: opt_data.initiallyExpanded ? "\u2026 Show more" : "\u2026 Show fewer"}) + '</dd>';
  output += aui.expander.content({id: modeExpanderId__soy4, extraClasses: ['ghx-quick-content'], initiallyExpanded: opt_data.initiallyExpanded, content: param15});
  output += '</dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.quickfilter.renderQuickFilters.soyTemplateName = 'GH.tpl.component.quickfilter.renderQuickFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ActiveSprintInlineEdit.js' */
if(!GH.Components){GH.Components={}}GH.Components.SPRINT_NAME_MAX_LENGTH=30;GH.Components.EVENT_SPRINT_UPDATED="sprintUpdated";GH.Components.ActiveSprintInlineEdit=function(a){this.getSprintById=a};GH.Components.ActiveSprintInlineEdit.prototype.rapidViewConfig={};GH.Components.ActiveSprintInlineEdit.prototype.setRapidViewConfig=function(a){this.rapidViewConfig=a};GH.Components.ActiveSprintInlineEdit.prototype.setSprintData=function(a){this.sprints=a||[]};GH.Components.ActiveSprintInlineEdit.prototype.getSprintById=function(a){return _.find(this.sprints,function(b){return b.id===a})};GH.Components.ActiveSprintInlineEdit.prototype.updateSprintData=function(c,b){for(var a=0;a<this.sprints.length;a++){if(this.sprints[a].id===c){this.sprints[a]=b}}};GH.Components.ActiveSprintInlineEdit.prototype.analytics=function(b,a){var c=require("jira-agile/rapid/analytics-tracker");new c("gh.edit.sprint.inlineedit.change").trigger(b,a)};GH.Components.ActiveSprintInlineEdit.prototype.createGetInlineEditDataFunction=function(){var a=this;return function(c,b){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var d=GH.RapidBoard.Util.InlineEditable.defaultFieldData(c);if(d.fieldName==="sprintName"){d.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH;d.cssClass="medium-field"}d.sprintId=parseInt(c.closest(".js-sprint-container").attr("data-sprint-id"),10);d.sprintData=_.clone(a.getSprintById(d.sprintId));return d}};GH.Components.ActiveSprintInlineEdit.prototype.submitSprintData=function(b){var a=this;var d=b.id;var c={name:b.name,startDate:b.startDate,endDate:b.endDate};GH.Validation.clearContextualErrors(".js-sprint-container[data-sprint-id="+d+"]");GH.Ajax.put({url:"/sprint/"+d,data:c,errorContextMap:{name:".js-sprint-container[data-sprint-id="+d+"] .ghx-name .js-editable-field",startDate:".js-sprint-container[data-sprint-id="+d+"] .ghx-dates > :last-child",endDate:".js-sprint-container[data-sprint-id="+d+"] .ghx-dates > :last-child",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(e){AJS.$(GH).trigger(GH.Components.EVENT_SPRINT_UPDATED,e.success)})};GH.Components.ActiveSprintInlineEdit.prototype.validateName=function(a){var b=a.editElement.val();if(!GH.Validation.notBlank(a.editElement,"Sprint name is required")){return false}if(!GH.Validation.maxLength(a.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))){return false}a.sprintData.name=b;a.newValue=b;return true};GH.Components.ActiveSprintInlineEdit.prototype.validateStartDate=function(a){var b=a.editElement.find("input").val();if(!GH.Validation.notBlank(a.editElement.find("input"),"You must specify a start date for the sprint.",AJS.$(".ghx-dates"))){return false}a.sprintData.startDate=b;a.newValue=b;return true};GH.Components.ActiveSprintInlineEdit.prototype.validateEndDate=function(a){var b=a.editElement.find("input").val();if(!GH.Validation.notBlank(a.editElement.find("input"),"You must specify an end date for the sprint.",AJS.$(".ghx-dates"))){return false}a.sprintData.endDate=b;a.newValue=b;return true};GH.Components.ActiveSprintInlineEdit.prototype.initializeInlineEdits=function(){var b=this;var c=new Calendar();var a=function(e){var g=_.clone(b.getSprintById(e.sprintId));if(!_.isEqual(g,e.sprintData)){b.submitSprintData(e.sprintData);var f=(g.state)?g.state.toLowerCase():"";b.analytics("update"+f,e.fieldName)}GH.RapidBoard.Util.InlineEditable.updateView(e)};var d=function(e){GH.Validation.clearContextualErrors(".js-sprint-container[data-sprint-id="+e.sprintId+"]");GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:this.validateName,save:a});GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),preEdit:d,renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:this.validateStartDate,save:a});GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),preEdit:d,renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:this.validateEndDate,save:a})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.js' */
if(!GH.Components){GH.Components={}}GH.Components.sprintFiltersInit=function(){GH.InlineDialog.registerInlineDialogHacks("sprintDialog",{disregardClickSelectors:[".calendar",".js-edit-sprintName-trigger",".js-edit-startDate-trigger",".js-edit-endDate-trigger"]})};GH.Components.SPRINT_NAME_MAX_LENGTH=30;GH.Components.SprintFilters=function(a){this.stateParamName=a};GH.Components.SprintFilters.prototype.stateParamName="workSprintFilters";GH.Components.SprintFilters.prototype.rapidViewConfig={};GH.Components.SprintFilters.prototype.setRapidViewConfig=function(a){this.rapidViewConfig=a};GH.Components.SprintFilters.prototype.getActiveSprintFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])};GH.Components.SprintFilters.prototype.setActiveSprintFilters=function(a){GH.BoardState.setPerViewValue(this.stateParamName,a)};GH.Components.SprintFilters.prototype.renderComponent=function(){return AJS.$(GH.tpl.component.sprintfilters.renderSprintSelector())};GH.Components.SprintFilters.prototype.setSprintData=function(a){this.sprints=a||[]};GH.Components.SprintFilters.prototype.getSprintData=function(){return this.sprints};GH.Components.SprintFilters.prototype.validateActiveSprints=function(){var a=this.getActiveSprintFilters();var b=[];_.each(a,function(c){if(this.getSprintById(c)){b.push(c)}},this);if(!_.isEqual(a,b)){this.setActiveSprintFilters(b);GH.RapidBoard.State.replaceState();AJS.$(this).trigger("sprintFilterChange")}};GH.Components.SprintFilters.prototype.hasSprints=function(a){return this.sprints.length>0};GH.Components.SprintFilters.prototype.getSprintById=function(a){return _.find(this.sprints,function(b){return b.id===a})};GH.Components.SprintFilters.prototype.updateSprintData=function(d,c){var a=false;if(this.sprints){for(var b=0;b<this.sprints.length;b++){if(this.sprints[b].id==d){this.sprints[b]=c;a=true}}}if(a){this.drawSprints()}};GH.Components.SprintFilters.prototype.drawSprints=function(){var e=this;var d=AJS.$(".ghx-controls-work .js-sprint-info");var g=this.getActiveSprintFilters();var c={};_.each(g,function(i){c[i]=true});d.html(GH.tpl.component.sprintfilters.renderSprints({sprints:this.sprints,activeSprintMap:c}));if(GH.RapidBoard.ViewController.shouldShowSubnavigator()){GH.RapidBoard.SubnavigatorController.render()}if(this.sprints.length>1){d.find(".js-toggle-sprint").click(function(j){var i=AJS.$(this);e.toggleActiveSprintFilterButton(j,i)})}if(GH.RapidBoard.ViewController.hasSideBar){var h=AJS.$("#ghx-modes-tools");if(this.hasSprints()){h.find(".ghx-sprint-meta").remove();var b=this.sprints.length===1?this.sprints[0].id:this.getActiveSprintFilters()[0];if(b){var a=this.getSprintById(b);var f=AJS.$(GH.tpl.component.sprintfilters.renderSprintMeta({sprint:a,noSprintClosePermissions:!a.canUpdateSprint}));f.find(".time").tooltip({html:true,title:function(){return GH.tpl.component.sprintfilters.renderSprintDatesTooltip({sprint:a})}});f.find(".complete-sprint-container").tooltip({html:true,title:"data-tooltip"});f.find(".js-complete-sprint").on("click",function(i){i.preventDefault();GH.Dialogs.CompleteSprintDialog.showDialog(GH.RapidBoard.State.getRapidViewId(),b)});h.prepend(f)}}}else{d.find(".js-sprint-trigger").click(function(j){var i=AJS.$(this);e.openSprintDialog(i)})}};GH.Components.SprintFilters.prototype.toggleActiveSprintFilterButton=function(c,b){c.preventDefault();var a=parseInt(b.parents(".js-sprintfilter").attr("data-sprint-id"),10);this.toggleActiveSprintFilter(a);AJS.$(this).trigger("sprintFilterChange")};GH.Components.SprintFilters.prototype.updateButtonStates=function(){var a=this.getActiveSprintFilters();AJS.$.each(AJS.$(".js-sprint-info").find(".js-sprintfilter"),function(d,e){var c=AJS.$(e);var b=parseInt(c.attr("data-sprint-id"),10);if(_.contains(a,b)){c.addClass("ghx-active")}else{c.removeClass("ghx-active")}})};GH.Components.SprintFilters.prototype.toggleActiveSprintFilter=function toggleActiveQuickFilter(b){var c=this.getActiveSprintFilters();var a=[];if(c.length===0||c[0]!==b){a.push(b)}this.setActiveSprintFilters(a);GH.RapidBoard.State.pushState()};GH.Components.SprintFilters.prototype.removeDialog=function(){GH.InlineDialog.remove("sprintDialog")};GH.Components.SprintFilters.prototype.openSprintDialog=function(c){this.removeDialog();var f=parseInt(c.parents(".js-sprintfilter").attr("data-sprint-id"),10);var e=this.getSprintById(f);this.analytics("open");var d={fadeTime:0,noBind:true,width:400,cacheContent:false,hideDelay:60000};var a=this;var b=GH.InlineDialog.create("sprintDialog",c,function(h,g,i){a.renderSprintDialog(h,e,i)},d);b.show()};GH.Components.SprintFilters.prototype.analytics=function(b,a){var c=require("jira-agile/rapid/analytics-tracker");new c("gh.edit.sprint.inlinedialog.work.change").trigger(b,a)};GH.Components.SprintFilters.prototype.renderSprintDialog=function(a,c,b){a.html(GH.tpl.component.sprintfilters.renderSprintDetails({sprint:c,canUpdateSprint:c.canUpdateSprint}));a.closest(".aui-inline-dialog").addClass("ghx-inline-dialog");a.parent().hide();b()};GH.Components.SprintFilters.prototype.createGetInlineEditDataFunction=function(){var a=this;return function(c,b){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var d=GH.RapidBoard.Util.InlineEditable.defaultFieldData(c);if(d.fieldName==="sprintName"){d.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH;d.cssClass="medium-field"}d.sprintId=parseInt(c.parents(".js-sprint-details").attr("data-sprint-id"),10);d.sprintData=_.clone(a.getSprintById(d.sprintId));d.sprintFiltersComponent=a;return d}};GH.Components.SprintFilters.prototype.submitSprintData=function(b){var a=this;var d=b.id;var c={name:b.name,startDate:b.startDate,endDate:b.endDate};GH.Ajax.put({url:"/sprint/"+d,data:c,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(e){a.updateSprintData(e.success.id,e.success)})};GH.Components.SprintFilters.prototype.initializeInlineEdits=function(){var b=this;var c=function(g){var h=g.editElement.val();if(!GH.Validation.notBlank(g.editElement,"Sprint name is required")){return false}if(!GH.Validation.maxLength(g.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))){return false}g.sprintData.name=h;g.newValue=h;return true};var d=function(g){var h=g.editElement.find("input").val();if(!GH.Validation.notBlank(g.editElement.find("input"),"You must specify an end date for the sprint.",g.editElement)){return false}g.sprintData.startDate=h;g.newValue=h;return true};var f=function(g){var h=g.editElement.find("input").val();if(!GH.Validation.notBlank(g.editElement.find("input"),"You must specify an end date for the sprint.",g.editElement)){return false}g.sprintData.endDate=h;g.newValue=h;return true};var a=function(g){var h=_.clone(b.getSprintById(g.sprintId));if(!_.isEqual(h,g.sprintData)){b.submitSprintData(g.sprintData);b.analytics("update",g.fieldName)}GH.RapidBoard.Util.InlineEditable.updateView(g)};var e=function(g){GH.Validation.clearContextualErrors(".ghx-sprint-active[data-sprint-id="+g.sprintId+"]");GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:c,save:a});GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:d,preEdit:e,save:a});GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:f,preEdit:e,save:a})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.soy' */
// This file was automatically generated from SprintFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintfilters == 'undefined') { GH.tpl.component.sprintfilters = {}; }


GH.tpl.component.sprintfilters.renderSprintSelector = function(opt_data, opt_ignored) {
  return '<dl id="ghx-controls-sprint" class="ghx-controls-filters ghx-controls-sprint js-sprint-info">' + GH.tpl.component.sprintfilters.renderNoneActive(null) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintSelector.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintSelector';
}


GH.tpl.component.sprintfilters.renderNoneActive = function(opt_data, opt_ignored) {
  return '<dt>' + soy.$$escapeHtml("Sprint") + ':</dt><dd><span class="ghx-fa">' + soy.$$escapeHtml("No active sprints") + '</span></dd>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderNoneActive.soyTemplateName = 'GH.tpl.component.sprintfilters.renderNoneActive';
}


GH.tpl.component.sprintfilters.renderSprints = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprints.length == 0) {
    output += GH.tpl.component.sprintfilters.renderNoneActive(null);
  } else {
    output += '<dt>' + ((opt_data.sprints.length < 2) ? soy.$$escapeHtml("Sprint") + ':' : soy.$$escapeHtml("Sprints") + ':') + '</dt>';
    var sprintList26 = opt_data.sprints;
    var sprintListLen26 = sprintList26.length;
    for (var sprintIndex26 = 0; sprintIndex26 < sprintListLen26; sprintIndex26++) {
      var sprintData26 = sprintList26[sprintIndex26];
      output += '<dd data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" class="ghx-sprint "><a data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" role="button" class="' + ((opt_data.activeSprintMap[sprintData26.id]) ? ' ghx-active' : '') + ((opt_data.sprints.length < 2) ? ' ghx-solo' : '') + ' js-sprintfilter "><span class="ghx-name js-toggle-sprint" role="button">' + soy.$$escapeHtml(sprintData26.name) + '</span><span class="ghx-trigger js-sprint-trigger" role="button"><span class="ghx-icon ghx-icon-drop"></span></span></a></dd>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprints.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprints';
}


GH.tpl.component.sprintfilters.renderSprintDetails = function(opt_data, opt_ignored) {
  return '<div class="js-sprint-details ghx-sprint-details ghx-inline-dialog-content" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml("Sprint Name") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprint.name, displayValue: opt_data.sprint.name}) + '</div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml("Start Date") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprint.startDate, displayValue: opt_data.sprint.startDate}) + '<span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml("End Date") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprint.endDate, displayValue: opt_data.sprint.endDate}) + '<span id="ghx-sprint-end-date-error"></span></div><div class="group"><div class="radio"><button id="ghx-complete-sprint" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"' + ((! opt_data.canUpdateSprint) ? ' disabled title="' + soy.$$escapeHtml("You must have the Manage Sprints permission to complete a sprint") + '"' : '') + ' class="aui-button">' + soy.$$escapeHtml("Complete Sprint\u2026") + '</button></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDetails.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDetails';
}


GH.tpl.component.sprintfilters.renderSprintMeta = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-meta" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><span class="time">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'time'}) + '<span class="days-left">' + soy.$$escapeHtml(AJS.format("{0} {0,choice,0#days|1#day|2#days} remaining",opt_data.sprint.daysRemaining)) + '</span></span><span class="complete-sprint-container"' + ((opt_data.noSprintClosePermissions) ? 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"' : 'data-tooltip=""') + '><a id="ghx-complete-sprint" class="js-complete-sprint ' + ((opt_data.noSprintClosePermissions) ? ' disabled' : '') + '"' + ((opt_data.noSprintClosePermissions) ? 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml("Complete Sprint") + '</a></span></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintMeta.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintMeta';
}


GH.tpl.component.sprintfilters.renderSprintDatesTooltip = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-dates"><p>' + soy.$$escapeHtml("Start Date") + ' <b>' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</b></p><p>' + soy.$$escapeHtml("Projected End Date") + ' <b>' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</b></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDatesTooltip.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDatesTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.js' */
if(!GH.Components){GH.Components={}}GH.Components.SearchFilter=function(a){this.searchQueryCallback=a;this.regexReserved=new RegExp("[.*+?|()\\[\\]{}\\\\]","g")};GH.Components.SearchFilter.prototype.getExpandedSearchFieldWidth=function(){var d=AJS.$("#ghx-backlog-search-input");var f=AJS.$("#js-quickfilters-label");var a=AJS.$("#js-plan-quickfilters").position().left;var c=d.position().left;var b=a+f.width();var e=b-c;return e};GH.Components.SearchFilter.prototype.render=function(){var c=GH.tpl.component.searchFilter.renderSearchBox();var b=AJS.$(c);var a=this;var d=b.find("#ghx-backlog-search-input");d.focus(function(){b.addClass("ghx-active");d.css({width:a.getExpandedSearchFieldWidth()});b.parent().addClass("ghx-search-active")});d.blur(function(){var e=AJS.$.trim(d.val());if(_.isEmpty(e)){setTimeout(function(){d.val("");b.removeClass("ghx-active");b.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small");d.css({width:""});b.parent().removeClass("ghx-search-active")},400)}});d.bind("keydown",function(e){if(e.keyCode==27){d.val("");d.blur();a.searchQuery()}});b.find(".js-search-trigger").click(function(){if(b.hasClass("ghx-active")){b.removeClass("ghx-active");d.css({width:""});b.parent().removeClass("ghx-search-active");b.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small");d.val("");a.searchQuery()}else{b.addClass("ghx-active");d.css({width:a.getExpandedSearchFieldWidth()});b.parent().addClass("ghx-search-active");d.focus()}});d.keyup(function(e){if(e.keyCode==13){d.blur();return}if(d.val()!==""){b.find(".aui-iconfont-search-small").removeClass("aui-iconfont-search-small").addClass("aui-iconfont-remove")}else{b.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small")}a.searchQuery()});b.submit(function(e){e.preventDefault()});return b};GH.Components.SearchFilter.prototype.clearSearchBox=function(){var a=AJS.$("#ghx-backlog-search");a.removeClass("ghx-active");a.parent().removeClass("ghx-search-active");a.find(".ghx-search").val("").css({width:""})};GH.Components.SearchFilter.prototype._queryToRegex=function(a){var b;if(_.isEmpty(a)){b=".*"}else{b=_.map(a.split(" "),function(c){return"(?=.*("+c+"))"}).join("")}GH.Logger.log("Executing search "+b,GH.Logger.Contexts.ui);return new RegExp(b,"i")};GH.Components.SearchFilter.prototype.clearLastSearch=function(){this.lastSearch=""};GH.Components.SearchFilter.prototype.stopEdit=function(a){var b=a.find("#ghx-backlog-search-input");b.blur()};GH.Components.SearchFilter.prototype.searchQuery=function(){GH.Logger.timeStart("GH.Components.SearchFilter.searchQuery");var b=AJS.$.trim(AJS.$("#ghx-backlog-search-input").val());if(b===this.lastSearch){return}this.lastSearch=b;if(b===""){this.searchQueryCallback(null)}else{var a;try{a=this._queryToRegex(b);this.searchQueryCallback(a)}catch(c){GH.Logger.log("Regex search threw exception",GH.Logger.Contexts.ui);a=this._queryToRegex(b.replace(this.regexReserved,"\\$&"));this.searchQueryCallback(a)}}GH.Logger.timeStop("GH.Components.SearchFilter.searchQuery")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.soy' */
// This file was automatically generated from SearchFilter.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.searchFilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.searchFilter == 'undefined') { GH.tpl.component.searchFilter = {}; }


GH.tpl.component.searchFilter.renderSearchBox = function(opt_data, opt_ignored) {
  return '<form id="ghx-backlog-search" class="aui"><div class="ghx-backlog-search"><input class="text ghx-search" type="text" id="ghx-backlog-search-input"><span class="js-search-trigger ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small"></span></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.component.searchFilter.renderSearchBox.soyTemplateName = 'GH.tpl.component.searchFilter.renderSearchBox';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/PresentationMode.js' */
GH.PresentationMode={};GH.PresentationMode.NORMAL_MODE="normal";GH.PresentationMode.COMPACT_MODE="compact";GH.PresentationMode.PROJECTOR_MODE="projector";GH.PresentationMode.allModes=[GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE,GH.PresentationMode.PROJECTOR_MODE];GH.PresentationMode.mode=GH.PresentationMode.NORMAL_MODE;GH.PresentationMode.enabled=false;GH.PresentationMode.init=function(){var a=GH.PresentationMode.getStoredMode();this.mode=GH.PresentationMode.validateMode(a);this.enabled=true;this._updateBodyClasses()};GH.PresentationMode.isHeaderHidden=function(){return this.mode===GH.PresentationMode.COMPACT_MODE||this.mode===GH.PresentationMode.PROJECTOR_MODE};GH.PresentationMode.isNormalMode=function(){return this.mode===GH.PresentationMode.NORMAL_MODE};GH.PresentationMode.isProjectorMode=function(){return this.mode===GH.PresentationMode.PROJECTOR_MODE};GH.PresentationMode.toggleNormalAndCompact=function(){GH.PresentationMode.iterateThroughPresentationModes([GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE])};GH.PresentationMode.validateMode=function(a){if(!_.contains(GH.PresentationMode.allModes,a)){return GH.PresentationMode.NORMAL_MODE}return a};GH.PresentationMode.setPresentationMode=function(a){if(!GH.PresentationMode.enabled){return}a=GH.PresentationMode.validateMode(a);this.mode=a;GH.PresentationMode.setStoredMode(a);this._updateUI()};GH.PresentationMode.iterateThroughPresentationModes=function(a){var b=_.indexOf(a,this.mode);b++;b=b%a.length;GH.PresentationMode.setPresentationMode(a[b])};GH.PresentationMode.render=function(b,a){AJS.$(a).append(GH.tpl.presentationmode.renderPresentationButton({expand:b}));GH.PresentationMode._registerClickHandler();GH.PresentationMode.tipsify()};GH.PresentationMode._registerClickHandler=function(){var a=this;AJS.$(".js-compact-toggle").unbind("click.presentationMode").bind("click.presentationMode",function(){a.toggleNormalAndCompact()})};GH.PresentationMode._updateUI=function(){AJS.$("body").click();this._updateBodyClasses();GH.RapidBoard.ViewController.handleResizeEvent()};GH.PresentationMode._updateBodyClasses=function(){var a=AJS.$("body");if(this.isHeaderHidden()){a.addClass("ghx-header-compact")}else{a.removeClass("ghx-header-compact")}if(this.isProjectorMode()){a.addClass("ghx-contrast-high")}else{a.removeClass("ghx-contrast-high")}};GH.PresentationMode.getStoredMode=function(){return GH.storage.get("gh.presentation.mode",true)};GH.PresentationMode.setStoredMode=function(a){GH.storage.put("gh.presentation.mode",a,true)};GH.PresentationMode.tipsify=function(){GH.Tooltip.tipsify({selector:".js-compact-toggle",gravity:"e"})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/PresentationMode.soy' */
// This file was automatically generated from PresentationMode.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.presentationmode.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.presentationmode == 'undefined') { GH.tpl.presentationmode = {}; }


GH.tpl.presentationmode.renderPresentationButton = function(opt_data, opt_ignored) {
  var output = '';
  var text__soy3 = '' + ((opt_data.expand == true) ? soy.$$escapeHtml("Show the header ( Z )") : soy.$$escapeHtml("Hide the header ( Z )"));
  var icon__soy9 = '' + ((opt_data.expand == true) ? 'ghx-iconfont aui-icon-small aui-iconfont-arrows-down' : 'ghx-iconfont aui-icon-small aui-iconfont-arrows-up');
  output += aui.buttons.button({extraAttributes: {'data-tooltip': text__soy3}, extraClasses: ['ghx-compact-toggle js-compact-toggle'], text: '', iconClass: icon__soy9, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.presentationmode.renderPresentationButton.soyTemplateName = 'GH.tpl.presentationmode.renderPresentationButton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.js' */
GH.ViewActions={};GH.ViewActions.PLAN_MODE="plan";GH.ViewActions.WORK_MODE="work";GH.ViewActions.REPORT_MODE="report";GH.ViewActions.currentViewId=undefined;GH.ViewActions.currentViewName=undefined;GH.ViewActions.currentMode="work";AJS.$(function initEvents(){GH.Events(GH.ViewActions);GH.ViewActions.on("boardToolsRendered",GH.ViewActions.afterBoardToolsLoaded)});GH.ViewActions.processData=function(a){return function(c){var b=false;if(c){GH.ViewActions.currentViewId=c.id;GH.ViewActions.currentViewName=c.name;GH.ViewActions.canEdit=c.canEdit;b=c.canEdit}a();GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,b)}};GH.ViewActions.initViewActions=GH.ViewActions.processData(function(){AJS.$("#ghx-view-presentation").empty();GH.PresentationMode.render(false,"#ghx-view-presentation")});GH.ViewActions.refreshBoardTools=function(){function a(g){function b(j){return j.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1")}var f=b(g.id);var d=f+"-button";var i=f+"-content";function c(j){j[0].bind("showLayer",_.once(function(){var k=AJS.$(GH.tpl.board.x.renderSectionContent(g));AJS.$("#"+i).html(k);GH.ViewActions.trigger("boardToolsRendered",{sectionId:f,dropdown:j})}))}try{var h=GH.ViewActions.registerDropdown(d,i);c(h)}catch(e){console.error("Error rendering dropdown for section"+g.id+":"+e.message)}}AJS.$("#ghx-view-pluggable").css("visibility","hidden");if(GH.ViewActions.currentViewId){GH.Ajax.get({url:"/xboard/toolSections",data:{mode:GH.ViewActions.mode,rapidViewId:GH.ViewActions.currentViewId,selectedProjectKey:GH.RapidBoard.projectKey},deferErrorHandling:false}).done(function(b){var c=GH.tpl.board.x.renderToolSections(b);AJS.$("#ghx-view-pluggable").html(c);_.each(b.sections,function(d){a(d)});AJS.$("#ghx-view-pluggable").css("visibility","visible")})}};GH.ViewActions.registerDropdown=function(a,c){var b=AJS.$("#"+a);b.click(_.wrap(function(){AJS.$(window).resize()},_.defer));return AJS.Dropdown.create({trigger:b,content:AJS.$("#"+c),alignment:AJS.RIGHT,width:"auto"})};GH.ViewActions.renderOnConfiguration=GH.ViewActions.processData(function(){AJS.$("#ghx-modes-tools").append(GH.tpl.viewactions.renderActions());GH.ViewActions.createdDropdownOnConfigurationPage()});GH.ViewActions.renderOnManage=GH.ViewActions.processData(function(){AJS.$("#ghx-modes-tools").html(GH.tpl.viewactions.renderManageViewActions())});GH.ViewActions.setView=function(c,b,a){AJS.$("#ghx-modes-tools").find(".aui-button.js-view-action-create").attr("disabled","disabled");if(c){AJS.$(".js-view-action-configure").removeClass("disabled")}if(a){AJS.$(".js-view-action-delete").removeClass("disabled")}if(GH.UserData.hasUser()&&GH.UserData.userConfig.canCreateBoard&&(GH.UserData.userConfig.canCreateProject||GH.UserData.userConfig.hasProjectsAccessible||GH.UserData.userConfig.hasFiltersAccessible)){AJS.$(".js-view-action-create, .js-view-action-copy").removeClass("disabled");AJS.$("#ghx-modes-tools").find(".aui-button.js-view-action-create").removeAttr("disabled")}};GH.ViewActions.setMode=function(a){if(a!==GH.ViewActions.mode){GH.ViewActions.mode=a;GH.ViewActions.refreshBoardTools()}};GH.ViewActions.adjustButtonsToMode=function(e){var d=AJS.$(".js-view-actions-plan");var c=AJS.$(".js-view-actions-work");var a=AJS.$(".js-view-action-create").parent();var b=AJS.$(".js-view-actions-print");d.hide();c.hide();b.hide();a.addClass("aui-last");switch(e){case GH.ViewActions.PLAN_MODE:a.removeClass("aui-last");d.show();b.show().find("a").removeClass("disabled");break;case GH.ViewActions.WORK_MODE:a.removeClass("aui-last");c.find(".js-view-action-toggle-detail-view").removeClass("disabled");c.show();b.show().find("a").removeClass("disabled");break;case GH.ViewActions.REPORT_MODE:break;default:}};GH.ViewActions.setSwimlanes=function(a){var b=AJS.$(".js-view-actions-work");if(a){b.find(".js-swimlane-action").removeClass("disabled")}else{b.find(".js-swimlane-action").addClass("disabled")}};GH.ViewActions.setVersionsPanelVisible=function(b){var a=AJS.$(".js-view-action-toggle-releases-column");if(b){a.text("Hide versions panel")}else{a.text("Show versions panel")}};GH.ViewActions.setEpicsPanelVisible=function(b){var a=AJS.$(".js-view-action-toggle-epics-column");if(b){a.text("Hide epics panel")}else{a.text("Show epics panel")}};GH.ViewActions.setEpicLozengesVisible=function(b){var a=AJS.$(".js-view-action-toggle-epics-lozenge");if(b){a.text("Hide epic labels")}else{a.text("Show epic labels")}};GH.ViewActions.setDetailViewVisible=function(b){var a=AJS.$(".js-view-action-toggle-detail-view");if(b){a.text("Hide detail view")}else{a.text("Show detail view")}};GH.ViewActions.createdDropdownOnConfigurationPage=function(){AJS.$("#js-view-actions").after(GH.tpl.viewactions.renderConfigurationViewActions());AJS.$("#board-tools-section-content").hide();var a=GH.ViewActions.registerDropdown("js-view-actions","board-tools-section-content");GH.ViewActions.bindBoardToolsClickEvents(a)};GH.ViewActions.afterBoardToolsLoaded=function(a){if(a.sectionId==="board-tools-section"){GH.ViewActions.bindBoardToolsClickEvents(a.dropdown);AJS.$(a.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowDetailIfIssueSelected);AJS.$(a.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowEpicLozenge);GH.ViewActions.enableShowDetailIfIssueSelected();GH.ViewActions.enableShowEpicLozenge();GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,GH.ViewActions.canEdit);GH.ViewActions.adjustButtonsToMode(GH.ViewActions.mode);GH.PlanView.updateViewActions()}};GH.ViewActions.bindBoardToolsClickEvents=function(a){AJS.$("#board-tools-section-content .aui-list-item a").bind("click",function(b){var c=AJS.$(this);if(c.hasClass("disabled")){b.stopPropagation();return false}AJS.$(a).hide()});AJS.$("#board-tools-section-content .js-view-action-delete").bind("click",function(b){GH.ViewActions.actionDelete();b.preventDefault()});AJS.$("#board-tools-section-content .js-view-action-copy").bind("click",function(b){GH.ViewActions.actionCopy();b.preventDefault()});AJS.$("#board-tools-section-content .js-view-action-toggle-detail-view").bind("click",function(b){if(GH.WorkController.isActive()){GH.WorkController.toggleDetailsView()}else{if(GH.PlanController.isActive()){GH.PlanController.toggleDetailsView()}}b.preventDefault()});AJS.$("#board-tools-section-content .js-view-action-print-cards").bind("click",function(b){GH.ViewActions.printCards();b.preventDefault()})};GH.ViewActions.actionDelete=function(){if(!GH.ViewActions.currentViewId){return}GH.RapidBoard.DeleteDialog.showDeleteDialog(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName)};GH.ViewActions.actionCopy=function(b,a){if(!b){b=GH.ViewActions.currentViewId;a=GH.ViewActions.currentViewName}GH.RapidBoard.copyRapidViewAndGotoConfiguration(b,a)};GH.ViewActions.printCards=function(){if(!GH.ViewActions.currentViewId){return}GH.RapidBoard.printCardsInRapidBoard()};GH.ViewActions.enableShowDetailIfIssueSelected=function(){if(GH.WorkController.isActive()){var a=AJS.$(".js-view-actions-work");GH.ViewActions.setDetailViewVisible(GH.WorkController.isDetailsViewOpened());if(GH.WorkSelectionController.getSelectedIssueKey()){a.find(".js-view-action-toggle-detail-view").removeClass("disabled")}else{a.find(".js-view-action-toggle-detail-view").addClass("disabled")}}else{if(GH.PlanController.isActive()){GH.ViewActions.setDetailViewVisible(GH.PlanController.isDetailsViewOpened())}}};GH.ViewActions.enableShowEpicLozenge=function(){GH.ViewActions.setEpicLozengesVisible(GH.RapidBoard.State.getEpicShownOnRapidBoard())};GH.ViewActions.toggleEpicsShowOnRapidBoard=function(){if(GH.RapidBoard.State.getEpicShownOnRapidBoard()){GH.RapidBoard.State.setEpicShownOnRapidBoard(false);GH.ViewActions.setEpicLozengesVisible(false)}else{GH.RapidBoard.State.setEpicShownOnRapidBoard(true);GH.ViewActions.setEpicLozengesVisible(true)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.soy' */
// This file was automatically generated from ViewActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewactions == 'undefined') { GH.tpl.viewactions = {}; }


GH.tpl.viewactions.renderActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'js-view-actions', extraClasses: ['ghx-actions-tools', 'ghx-dropdown-trigger'], text: "Board"});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderActions.soyTemplateName = 'GH.tpl.viewactions.renderActions';
}


GH.tpl.viewactions.renderManageViewActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: ['js-view-action-create'], text: "Create board"});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderManageViewActions.soyTemplateName = 'GH.tpl.viewactions.renderManageViewActions';
}


GH.tpl.viewactions.renderConfigurationViewActions = function(opt_data, opt_ignored) {
  return '<div class="aui-list" id="board-tools-section-content"><ul class="aui-list-section aui-first"><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-copy disabled">' + soy.$$escapeHtml("Copy") + '</a></li><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-delete disabled">' + soy.$$escapeHtml("Delete") + '</a></li></ul><ul class="aui-list-section aui-last"><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-create disabled">' + soy.$$escapeHtml("Create board") + '</a></li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderConfigurationViewActions.soyTemplateName = 'GH.tpl.viewactions.renderConfigurationViewActions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.js' */
GH.StatusCategoryPicker=(function(){var b=4;var g={width:250,itemAttrDisplayed:"label",errorMessage:"",removeOnUnSelect:false,statusCategories:[],selectedStatusCategoryId:b};function a(i){var h={statusCategoryPicker:null,options:_.defaults({},i,g)};c(h);f(h);return e(h)}function c(h){h.options.element.html(GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions({statusCategories:h.options.statusCategories,selectedStatusCategoryId:h.options.selectedStatusCategoryId}))}function f(h){h.statusCategoryPicker=AJS.SingleSelect.extend({_hasIcon:function(){return true},setSelection:function(i){AJS.SingleSelect.fn.setSelection.call(this,i);this.$container.find(".fake-ss-icon").remove();this.$container.append(d(i).css({position:"absolute",left:"6px",top:"50%",marginTop:"-8px",boxSizing:"border-box"}).addClass("fake-ss-icon aui-ss-entity-icon"))},setSelectionByValue:function(i){var j=_.find(this.suggestionsHandler.model.getAllDescriptors(),function(k){return k.properties.value==i});if(j){this.setSelection(j)}},disableWithValue:function(i){this.setSelectionByValue(i);this.disable()},enableWithValueIfDisabled:function(i){if(this.disabled){this.enable();this.setSelectionByValue(i)}}});h.statusCategoryPicker.fn._renders.entityIcon=function(i){return AJS.$()}}function d(j){var h=_.omit(AJS.$.extend({},j.model().data()),"descriptor");var i=AJS.$(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:j.label(),statusCategory:h},isCompact:true}));i.removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip");return i}function e(j){var h=new j.statusCategoryPicker(j.options);var i=h.listController._renders.suggestion;h.listController._renders.suggestion=function(l){var k=i.apply(this,arguments);k.find("a").prepend("&nbsp;").prepend(d(l));return k};return h}return{build:a,defaultStatusCategoryId:b}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.soy' */
// This file was automatically generated from StatusCategoryPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.statuscategorypicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.statuscategorypicker == 'undefined') { GH.tpl.component.statuscategorypicker = {}; }


GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions = function(opt_data, opt_ignored) {
  var output = '';
  var statusCategoryList3 = opt_data.statusCategories;
  var statusCategoryListLen3 = statusCategoryList3.length;
  for (var statusCategoryIndex3 = 0; statusCategoryIndex3 < statusCategoryListLen3; statusCategoryIndex3++) {
    var statusCategoryData3 = statusCategoryList3[statusCategoryIndex3];
    output += '<option value="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-self="' + soy.$$escapeHtml(statusCategoryData3.self) + '" data-id="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-key="' + soy.$$escapeHtml(statusCategoryData3.key) + '" data-color-name="' + soy.$$escapeHtml(statusCategoryData3.colorName) + '"' + ((opt_data.selectedStatusCategoryId == statusCategoryData3.id) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(statusCategoryData3.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions.soyTemplateName = 'GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/FancyBox.js' */
GH.DetailFancyBox={};GH.DetailFancyBox.initFancyBox=function(){GH.DetailFancyBox.initFancyBoxForClass("a.gallery")};GH.DetailFancyBox.initFancyBoxForClass=function(e){var d=function(){jQuery(e).fancybox.close()};var c=function(){return jQuery.os.linux&&jQuery.browser.mozilla};var a=true;if(c()){a=false}var b={imageScale:true,centerOnScroll:false,overlayShow:a,callbackOnStart:function(){jQuery("#header").css("zIndex","-1");if(a){jQuery("body").addClass("fancybox-show")}},callbackOnShow:function(){jQuery(document).click(function(){d()})},onComplete:function(){var j=AJS.$("#fancybox-title");var f=AJS.$("#fancybox-title-main").outerWidth();var g=AJS.$("#fancybox-title-left").outerWidth();var i=AJS.$("#fancybox-title-right").outerWidth();j.width(f+g+i+5);var h=AJS.$("#fancybox-inner").width();j.css("marginLeft",-(j.width()/2)+(h/2));j.css("bottom",j.outerHeight(true)*-1)},callbackOnClose:function(){jQuery("#header").css("zIndex","");if(a){jQuery("body").removeClass("fancybox-show")}jQuery(document).unbind("click",d);if(jQuery.browser.safari){var f=AJS.$(window).scrollTop();AJS.$(window).scrollTop(10+5*(f==10)).scrollTop(f)}}};if(AJS.$.browser.msie){b.transitionIn="none";b.transitionOut="none"}jQuery(e).fancybox(b)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/TimeTrackingInlineDialog.js' */
GH.TimeTrackingInlineDialog={};GH.TimeTrackingInlineDialog.model={shouldCloseLater:undefined,isOpen:false,dialog:null};GH.TimeTrackingInlineDialog.setDialog=function(a){GH.TimeTrackingInlineDialog.model.dialog=a};GH.TimeTrackingInlineDialog.getDialog=function(){return GH.TimeTrackingInlineDialog.model.dialog};GH.TimeTrackingInlineDialog.setIsOpen=function(a){GH.TimeTrackingInlineDialog.model.isOpen=a};GH.TimeTrackingInlineDialog.getIsOpen=function(){return GH.TimeTrackingInlineDialog.model.isOpen};GH.TimeTrackingInlineDialog.setShouldCloseLater=function(a){GH.TimeTrackingInlineDialog.model.shouldCloseLater=a};GH.TimeTrackingInlineDialog.getShouldCloseLater=function(){return GH.TimeTrackingInlineDialog.model.shouldCloseLater};GH.TimeTrackingInlineDialog.init=function(){AJS.$(document).delegate("dd.ghx-fieldname-aggregatetimeestimate","click",GH.TimeTrackingInlineDialog.show);GH.InlineDialog.registerInlineDialogHacks("detailview-timetracking",{validateClickToCloseFn:GH.TimeTrackingInlineDialog.shouldCloseDialogHandler})};GH.TimeTrackingInlineDialog.show=function(b){if(GH.TimeTrackingInlineDialog.getIsOpen()){return}var c={initCallback:function(){GH.TimeTrackingInlineDialog.setIsOpen(true)},hideCallback:function(){GH.TimeTrackingInlineDialog.setIsOpen(false);GH.InlineDialog.remove("detailview-timetracking");GH.TimeTrackingInlineDialog.setDialog(null);GH.TimeTrackingInlineDialog.setShouldCloseLater(false);GH.TimeTrackingInlineDialog.setIsOpen(false)},hideDelay:60000,fadeTime:0,noBind:true};var a=GH.InlineDialog.create("detailview-timetracking","dd.ghx-fieldname-aggregatetimeestimate",GH.TimeTrackingInlineDialog.renderDialog,c);GH.TimeTrackingInlineDialog.setDialog(a);GH.TimeTrackingInlineDialog.setShouldCloseLater(false);a.show()};GH.TimeTrackingInlineDialog.renderDialog=function(c,b,e){var a=AJS.$(GH.tpl.detailview.renderTimeTrackingInlineDialog());GH.DetailsFieldRenderer.renderTimeTrackingDialogFields(GH.DetailsModel.viewData,a);c.html(a);var d=c.find(".js-subs-remaining dd");d.addClass("ghx-clickable").click(function(){GH.DetailsView.setTab("ghx-tab-subtasks");var f=GH.TimeTrackingInlineDialog.shouldCloseDialogHandler();if(f){GH.TimeTrackingInlineDialog.getDialog().hide()}});e()};GH.TimeTrackingInlineDialog.shouldCloseDialogHandler=function(b){var a=GH.DetailsFieldEdit.getEditingCount()===0;if(!a){GH.TimeTrackingInlineDialog.setShouldCloseLater(true)}return a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsModel.js' */
GH.DetailsModel={};GH.DetailsModel.TAB_SECTIONS={details:["details","people","dates"],description:["description"]};GH.DetailsModel.FIELD_SECTION_PRESETS={assignee:"people",created:"dates",components:"details",description:"description",fixVersions:"details",issuekey:"header",labels:"details",reporter:"people",summary:"header",status:"details",updated:"dates",versions:"details",votes:"people"};GH.DetailsModel.fieldErrorSelectors={};GH.DetailsModel.fieldCategories={timetracking:["timeestimate","timeoriginalestimate","aggregatetimeestimate","aggregatetimeestimate_subtasks"]};GH.DetailsModel.issueIdToKeyCache={};GH.DetailsModel.getIssueKeyForId=function(a){return GH.DetailsModel.issueIdToKeyCache[a]||false};GH.DetailsModel.viewData=null;GH.DetailsModel.clearViewData=function(){GH.DetailsModel.viewData=null};GH.DetailsModel.setViewData=function(a){GH.DetailsModel.issueIdToKeyCache[a.id]=a.key;GH.DetailsModel.processFields(a);GH.DetailsModel.applyOperationUrlPatches(a);GH.DetailsModel.escapeCommentsRestriction(a.comments);GH.DetailsModel.filterIssueOperations(a);GH.DetailsModel.viewData=a};GH.DetailsModel.setViewDataForField=function(b,c){var a=GH.DetailsModel.viewData;var d;for(d=0;d<a.fields.length;d++){if(a.fields[d].id==b){a.fields[d]=c;break}}};GH.DetailsModel.getViewField=function(a){return _.find(GH.DetailsModel.viewData.fields,function(b){return b.id==a})};GH.DetailsModel.isFieldInCategory=function(c,b){var a=GH.DetailsModel.fieldCategories[b];if(!_.isUndefined(a)){return _.any(a,function(d){return d==c})}return false};GH.DetailsModel.isFieldInSection=function(c,a){var b=GH.DetailsModel.fieldSections[a];if(!_.isUndefined(b)){return _.any(b,function(d){return d===c})}return false};GH.DetailsModel.getPrimaryEstimateStatisticField=function(){if(GH.DetailsModel.fieldSections.estimate.length===0){return false}return GH.DetailsModel.getFieldsForSection("estimate")[0]};GH.DetailsModel.getPrimaryTrackingStatisticField=function(){if(GH.DetailsModel.fieldSections.tracking.length===0){return false}var a=GH.DetailsModel.getFieldsForSection("tracking");return a[0]};GH.DetailsModel.getSecondaryTrackingStatisticFields=function(){if(GH.DetailsModel.fieldSections.tracking.length<2){return[]}var a=GH.DetailsModel.getFieldsForSection("tracking");return a.slice(1)};GH.DetailsModel.getFieldsForSection=function(b){var a=GH.DetailsModel.fieldSections[b];if(_.isUndefined(a)){return[]}return _.map(a,function(c){return GH.DetailsModel.getViewField(c)})};GH.DetailsModel.getErrorSelectorForField=function(a){return GH.DetailsModel.fieldErrorSelectors[a]||false};GH.DetailsModel.processFields=function(b){GH.DetailsModel.fieldSections={header:[],estimate:[],tracking:[],details:[],people:[],dates:[],links:[],description:[]};var e=b.primaryStatisticFieldId||"";var h=b.trackingStatisticFieldId||"";var d=[],c=false;_.forEach(b.fields,function(k){if(k.id===e){GH.DetailsModel.fieldSections.estimate.push(k.id)}else{if(k.id===h){d.push(k.id)}else{if(k.id==="aggregatetimeestimate"||k.id==="aggregatetimeestimate_subtasks"){d.push(k.id);c=true}else{var j=GH.DetailsModel.FIELD_SECTION_PRESETS[k.id];j=j||k.category||"details";GH.DetailsModel.fieldSections[j].push(k.id)}}}});var i;if(d.length>0&&c){i=function(j){return j=="aggregatetimeestimate"}}else{if(d.length>0){i=function(j){return j==h}}}if(!_.isUndefined(i)){var g=_.find(d,i);var f=_.reject(d,i);var a=[];a.push(g);if(c){a=a.concat(f)}GH.DetailsModel.fieldSections.tracking=a}};GH.DetailsModel.applyOperationUrlPatches=function(a){var c=GH.RapidBoard.getCurrentPageReturnUrl();var b=AJS.$("#atlassian-token").attr("content");if(a.operations){_.each(a.operations.sections,function(d){_.each(d.operations,function(e){e.url=GH.DetailsModel.patchIssueOperationUrl(e.url,c,b);e.label=GH.DetailsModel.patchRankOperationName(e.styleClass,e.label)})})}};GH.DetailsModel.patchRankOperationName=function(a,b){if(a=="issueaction-greenhopper-rank-top-operation"){return "Send to Top"}else{if(a=="issueaction-greenhopper-rank-bottom-operation"){return "Send to Bottom"}else{return b}}};GH.DetailsModel.issueIdReplacementRegex=/\?id=\d+/;GH.DetailsModel.patchIssueOperationUrl=function(b,e,c){var a="";if(b.indexOf("#")!==-1){a=b.substring(b.indexOf("#"));b=b.substring(0,b.indexOf("#"))}b+=(b.indexOf("?")<0)?"?":"&";b+="returnUrl="+e;var d="atl_token="+c;if(b.indexOf(d)<0){b=b.replace("atl_token=",d)}if(b.indexOf("WorkflowUIDispatcher.jspa")>-1){b=b.replace(GH.DetailsModel.issueIdReplacementRegex,"?id={0}")}return b+a};GH.DetailsModel.escapeCommentsRestriction=function(b){for(var a=0;a<b.length;a++){var c=b[a].restrictedTo;if(c){b[a].restrictedTo=AJS.escapeHTML(String(c))}}};GH.DetailsModel.filterIssueOperations=function(a){var c=["view-voters","greenhopper-planningboard-operation","greenhopper-taskboard-operation","attach-screenshot","toggle-issue/detailswatch-issue","manage-watchers","move-issue","edit-labels","issue-to-subtask","clone-issue","toggle-vote-issue","greenhopper-rapidboard-operation"];var d=["opsbar-transitions"];var h=[];_.each(a.operations.sections,function(k){var i=_.find(d,function(l){return l==k.groupId});if(i){return}var j=_.reject(k.operations,function(l){var m=_.find(c,function(n){return n==l.id});return _.isString(m)});if(j.length>0){h.push({operations:j})}});for(var b=0,g,f;b<h.length;b++){var e=h[b];if(!_.isUndefined(g)){if(e.operations.length==1){if(_.isUndefined(f)&&g.operations.length==1){f=g}if(!_.isUndefined(f)){f.operations=f.operations.concat(e.operations);e.operations=[]}}else{if(e.operations.length>1){f=undefined}}}g=e}h=_.reject(h,function(i){return i.operations.length===0});a.operations.filteredSections=h;if(GH.DetailsView.rapidViewConfig.sprintSupportEnabled&&a.editable&&a.sprint&&!a.isSubtask){GH.DetailsModel.addRemoveFromSprintOperation(a.operations)}GH.DetailsModel.addFlagOperation(a.operations,!a.flagged)};GH.DetailsModel.addRemoveFromSprintOperation=function(a){a.filteredSections.push({operations:[{id:"removeIssueFromSprint",label:"Remove from Sprint",styleClass:"issueaction-remove-issue-from-sprint js-remove-issue-from-sprint",title:"Removes this issue from the current sprint",url:""}]});return a};GH.DetailsModel.addFlagOperation=function(b,a){if(a){b.filteredSections.push({operations:[{id:"flagIssue",label:"Add flag",styleClass:"issueaction-flag js-flag-issue",title:"Add flag",url:""},{id:"flagIssueAndComment",label:"Add flag and comment",styleClass:"issueaction-flag-and-comment js-flag-issue-and-comment",title:"Add flag and comment",url:""}]})}else{b.filteredSections.push({operations:[{id:"unflagIssue",label:"Remove flag",styleClass:"issueaction-unflag js-unflag-issue",title:"Remove flag",url:""},{id:"unflagIssueAndComment",label:"Remove flag and add comment",styleClass:"issueaction-unflag-and-comment js-unflag-issue-and-comment",title:"Remove flag and add comment",url:""}]})}};GH.DetailsModel.hasIssueOperation=function(a){return _.find(GH.DetailsModel.viewData.operations.sections,function(b){return _.find(b.operations,function(c){return c.id==a})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.js' */
GH.DetailsView=new GH.Events();GH.DetailsView.MORE_COMMENTS_COUNT=5;GH.DetailsView.minWidth=400;GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED="GH.DetailView.updated";GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED="GH.DetailView.closed";GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED="GH.DetailView.update.started";GH.DetailsView.selectedIssueKey=undefined;GH.DetailsView.rapidViewId=undefined;GH.DetailsView.rapidViewConfig=undefined;GH.DetailsView.containerSelector=undefined;GH.DetailsView.TAB_SUBTASKS="ghx-tab-subtasks";GH.DetailsView.scrollTrackingInterval=undefined;GH.DetailsView.$lastSectionSpacer=undefined;GH.DetailsView.opts={canClose:true,showActionsCog:true,showSubtaskTab:true,showLogWorkTrigger:false,updateSizeHandler:function(){}};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.DetailsView.analytics=new a("gh.issueaction.issuedetail")})();GH.DetailsView.triggerAnalyticsOpenDetailView=function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open"});GH.DetailsView.analytics.openDetailViewTime=Date.now()};GH.DetailsView.triggerAnalyticsCloseDetailView=function(){var b=GH.DetailsView.analytics.openDetailViewTime;var a=Date.now();if(!b||a-b>3000){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.close"})}else{AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.dismiss"})}GH.DetailsView.analytics.openDetailViewTime=null};GH.DetailsView.triggerAnalyticsEventForAction=function(b,a){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail."+b,data:a})};GH.DetailsView.init=function(){AJS.$(document).bind("tabSelect",GH.DetailsView.handleTabSelection);AJS.$(GH).bind("issueUpdated",GH.DetailsView.handleIssueUpdated);AJS.$(document).delegate(".js-detailclose","click",function(a){if(GH.DetailsView.closeHandler){GH.DetailsView.closeHandler(a);GH.DetailsView.triggerAnalyticsCloseDetailView()}});GH.TimeTrackingInlineDialog.init();GH.DetailsFieldEdit.init()};GH.DetailsView.getMode=function(){return GH.RapidBoard.ViewController.getMode()};GH.DetailsView.setContainerSelector=function(a){GH.DetailsView.containerSelector=a};GH.DetailsView.setOptions=function(a){GH.DetailsView.opts=a;GH.DetailsView.closeHandler=GH.DetailsView.opts.closeHandler};GH.DetailsView.getContainer=function(){if(!GH.DetailsView.containerSelector){GH.log("tried to get container of DetailsView before selector was set");return AJS.$()}return AJS.$(GH.DetailsView.containerSelector)};GH.DetailsView._getContentContainer=function(){return GH.DetailsView.getContainer().find(".ghx-detail-contents")};GH.DetailsView._getIssueElement=function(){return GH.DetailsView.getContainer().find(".ghx-detail-issue")};GH.DetailsView._setIssueElement=function(b){var a=GH.DetailsView._getIssueElement();if(a.length){a.replaceWith(b)}else{GH.DetailsView._getContentContainer().prepend(b)}};GH.DetailsView.setRapidViewId=function(a){GH.DetailsView.rapidViewId=a};GH.DetailsView.setRapidViewConfig=function(a){GH.DetailsView.rapidViewConfig=a;if(GH.DetailsView.opts.showLogWorkTrigger){GH.DetailsView.opts.showLogWorkTrigger=!_.isUndefined(a.trackingStatistic)&&a.trackingStatistic.isEnabled}};GH.DetailsView.setSelectedIssueKey=function(a){GH.DetailsView.selectedIssueKey=a};GH.DetailsView.clearSelectedIssueKey=function(){GH.DetailsView.selectedIssueKey=undefined};GH.DetailsView.show=function(){GH.DetailsFieldEdit.completeEdits();GH.DetailsModel.clearViewData();var a=GH.DetailsView.getContainer();if(a.find("#ghx-detail-contents").length===0){var b=GH.tpl.detailview.renderIssueDetailsSkeleton();a.empty().append(b);a.width(GH.DetailsView.getWidth());GH.DetailsView.triggerAnalyticsOpenDetailView()}if(!GH.DetailsView.selectedIssueKey){GH.DetailsView._getIssueElement().remove();return}GH.DetailsView.trigger("before:render");GH.DetailsView.load();GH.RapidBoard.ViewController.handleResizeEvent()};GH.DetailsView.getWidth=function(){var d=GH.RapidBoard.State.getDetailViewWidth();var b=AJS.$("#ghx-backlog").width()+AJS.$("#ghx-detail-view").width();var a=d*b;var c=Math.max(a,GH.DetailsView.minWidth);return Math.min(GH.DetailsView.getMaxWidth(),c)};GH.DetailsView.hide=function(){if(GH.DetailsView.currentPromise&&GH.DetailsView.currentPromise.abort){GH.DetailsView.currentPromise.abort()}GH.DetailsFieldEdit.completeEdits();GH.DetailsView.getContainer().empty();AJS.$("#gh").removeClass("js-ghx-detail-loading");AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED);GH.RapidBoard.ViewController.handleResizeEvent()};GH.DetailsView.resizeLastSectionSpacer=function(){var f=AJS.$("#js-detail-nav-content");var a=f.find(".ghx-detail-section");var c;var b=0;c=f.data("$lastSectionSpacer");if(c){b=c.height()}var h=f.height();var g=a.last();var d=g.height()-b;if(h>d){if(!c){f.data("$lastSectionSpacer",c=AJS.$("<div>",{css:{clear:"both"}}).appendTo(g))}var e=!AJS.$.browser.msie?40:0;c.height(h-d-e)}};GH.DetailsView.initScrollTracking=function(){var h=AJS.$("#js-detail-nav-content");var i=AJS.$(".ghx-detail-nav-menu");var a=i.find(".ghx-detail-nav-item");var g=h.find(".ghx-detail-section");var c=true;var d=function(){if(c){c=false;var n;if(h.length>0&&h[0].scrollHeight-h.scrollTop()===h.height()){n=g[g.length-1]}else{for(var l=0;l<g.length;l++){var m=g.eq(l);if(m.position().top+m.height()>0){n=m[0];break}}}if(n){k(n.id)}}};var f=_.debounce(function(l){GH.DetailsView.triggerAnalyticsEventForAction("scroll",{sectionId:l})},150);var k=function(l){var m=a.filter(".ghx-selected");if(m.find("a").attr("href")!=="#"+l){f(l)}m.removeClass("ghx-selected");a.find("a").filter(function(){return this.hash==="#"+l}).closest(".ghx-detail-nav-item").addClass("ghx-selected");GH.DetailsView.setStoredTabId(l)};var b=function(m,l){var n=document.getElementById(m);if(n){e();k(n.id);h.animate({scrollTop:h.scrollTop()+AJS.$(n).position().top},l?"fast":0,function(){setTimeout(j,0)})}};var j=function(){h.bind({"scroll.scrollTracking":function(){c=true}});GH.DetailsView.scrollTrackingInterval=setInterval(function(){d()},40)};var e=function(){clearInterval(GH.DetailsView.scrollTrackingInterval);h.unbind("scroll.scrollTracking")};j();b(GH.DetailsView.getStoredTabId());i.delegate("a",{"click.scrollTracking":function(l){l.preventDefault();var m=this.hash.replace("#","");b(m,true);AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.go.to.section",data:{sectionId:m}})}})};GH.DetailsView.updateSize=function(){GH.DetailsView.opts.updateSizeHandler();GH.DetailsView.resizeLastSectionSpacer();GH.DetailsView.getContainer().width(GH.DetailsView.getWidth());GH.BacklogView.checkBacklogWidth();AJS.$("#ghx-detail-view").resizable("option","maxWidth",GH.DetailsView.getMaxWidth())};GH.DetailsView.getFixedElement=function(){return{element:GH.DetailsView.getContainer(),resizeCallback:GH.DetailsView.updateSize}};GH.DetailsView.reload=function(){var a=GH.DetailsFieldEdit.model;if(!a||!a.getEditingCount()){GH.DetailsView.show()}};GH.DetailsView.load=function(){AJS.$("#gh").addClass("js-ghx-detail-loading");GH.DetailsView.loadContent(GH.DetailsView.renderDetails)};GH.DetailsView.loadContent=function(a){GH.DetailsView.showSpinner();GH.DetailsView.currentPromise=GH.Ajax.get({url:"/xboard/issue/details.json",data:{rapidViewId:GH.DetailsView.rapidViewId,issueIdOrKey:GH.DetailsView.selectedIssueKey,loadSubtasks:GH.DetailsView.opts.showSubtaskTab}},"detailView");GH.DetailsView.currentPromise.done(function(b){if(b.key!=GH.DetailsView.selectedIssueKey){return}GH.DetailsModel.setViewData(b);if(!_.isUndefined(a)){a()}GH.DetailsView.currentPromise=undefined;GH.DetailsView.makeResizable();GH.BacklogView.checkBacklogWidth()}).always(function(){GH.DetailsView.hideSpinner()})};GH.DetailsView.showSpinner=function(){AJS.$(".ghx-detail-view-blanket").show().spin("large")};GH.DetailsView.hideSpinner=function(){AJS.$(".ghx-detail-view-blanket").hide().spin(false)};GH.DetailsView.getMaxWidth=function(){return Math.max(GH.DetailsView.minWidth,(AJS.$("#ghx-backlog").width()+AJS.$("#ghx-detail-view").width())/2)};GH.DetailsView.makeResizable=function(){AJS.$("#ghx-detail-view").resizable("destroy");AJS.$("#ghx-detail-view").resizable({handles:{w:AJS.$("#js-sizer")},resize:GH.BacklogView.checkBacklogWidth,stop:GH.DetailsView.storeWidth,maxWidth:GH.DetailsView.getMaxWidth(),minWidth:GH.DetailsView.minWidth});GH.Tooltip.tipsify({selector:"#js-sizer",gravity:"e"})};GH.DetailsView.storeWidth=function(){var d=AJS.$("#ghx-detail-view").width();var c=AJS.$("#ghx-backlog").width();var f=d<=GH.DetailsView.minWidth?0:(d/(d+c));GH.RapidBoard.State.setDetailViewWidth(f);var b=function(g){return g>=GH.DetailsView.minWidth&&g<=500};var e=function(g){return g>500&&g<=600};var a=function(g){return g>600};GH.DetailsView.triggerAnalyticsEventForAction("resize",{targetWidth:b(d)?"small":e(d)?"medium":a(d)?"large":""})};GH.DetailsView.renderDetails=function(){AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED);var b=GH.DetailsModel.viewData;var a=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:b,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));GH.DetailsFieldRenderer.renderFields(b,a,GH.DetailsView.opts);GH.DetailsView.registerAllListeners(a);GH.DetailsView._setIssueElement(a);if(b.issueLinks.linkingEnabled){GH.DetailsIssueLinks.loadRemoteLinks(b.issueLinks)}if(!_.isEmpty(b.attachments.imageAttachments)){GH.DetailFancyBox.initFancyBox()}GH.DetailsView.updateSize();AJS.$(".js-epic-remove").find(".aui-icon-close").addClass("aui-icon aui-icon-small aui-iconfont-remove-label ghx-iconfont");AJS.$("#gh").removeClass("js-ghx-detail-loading");GH.DetailsView.initScrollTracking();GH.DetailsView.trigger("after:render");JIRA.trigger(GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED,{issueId:b.id,issueKey:b.key,rapidViewId:GH.DetailsView.rapidViewId,mode:GH.DetailsView.getMode()})};GH.DetailsView.registerAllListeners=function(b){if(b.find("#ghx-detail-head .aui-list").length>0){var a=AJS.Dropdown.create({trigger:b.find("#ghx-detail-head .ghx-actions"),content:b.find("#ghx-detail-head .aui-list"),alignment:AJS.RIGHT});function c(){AJS.$(a).each(function(d,e){e.hide();if(e.layerController.$content){e.layerController.$content.remove()}});AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,c);AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,c)}AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,c);AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,c)}b.find("#ghx-more-actions").click(function(d){d.preventDefault();GH.IssueOperationShortcuts.showOperationsDialog()});b.find(".js-issueaction-container-cog .js-issueaction").click(function(d){var f=AJS.$(d.currentTarget).attr("id");GH.DetailsView.analytics.trigger(f)});b.find(".js-create-comment").click(function(d){d.preventDefault();GH.IssueOperationShortcuts.commentSelectedIssue()});b.find(".js-create-attachment").click(function(d){d.preventDefault();GH.IssueOperationShortcuts.attachFilesSelectedIssue()});b.find(".js-create-subtask").click(function(d){d.preventDefault();GH.IssueOperationShortcuts.createSubtask()});b.find(".js-edit-subtask").click(function(d){d.preventDefault();if(!GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))){return}GH.IssueOperationShortcuts.editSelectedIssue()});b.find(".js-delete-subtask").click(function(d){d.preventDefault();if(!GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))){return}GH.IssueOperationShortcuts.deleteSelectedIssue()});b.find(".js-link-issue").click(function(d){d.preventDefault();GH.IssueOperationShortcuts.linkSelectedIssue()});b.find(".js-remove-issue-from-sprint").click(function(g){g.preventDefault();var f=GH.DetailsModel.viewData;if(!f){return}var d=f.key;GH.IssueActions.removeIssuesFromSprint(GH.DetailsView.rapidViewId,d)});b.find(".js-flag-issue").click(function(d){d.preventDefault();GH.DetailsView.flagCurrentIssue(true,false)});b.find(".js-flag-issue-and-comment").click(function(d){d.preventDefault();GH.DetailsView.flagCurrentIssue(true,true)});b.find(".js-unflag-issue").click(function(d){d.preventDefault();GH.DetailsView.flagCurrentIssue(false,false)});b.find(".js-unflag-issue-and-comment").click(function(d){d.preventDefault();GH.DetailsView.flagCurrentIssue(false,true)});GH.DetailsView.registerHeaderFieldsListeners(b);b.find("#ghx-detail-head .ghx-actions").click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.more.actions"})})};GH.DetailsView.registerHeaderFieldsListeners=function(a){a.find(".js-log-work").click(function(b){b.preventDefault();GH.IssueOperationShortcuts.logWorkOnSelectedIssue()})};GH.DetailsView.setSubtaskIssueOverwrite=function(b){var d=b.parents(".js-subtask-issue");var a=d.attr("data-issue-key");var c=parseInt(d.attr("data-issue-id"),10);if(a&&c){GH.IssueOperationShortcuts.setOverrideSelectedIssue({id:c,key:a});return true}else{return false}};GH.DetailsView.getNumDisplayedComments=function(){return AJS.$("#ghx-detail-comments .ghx-comment").length};GH.DetailsView.handleTabSelection=function(b,c){if(c.pane.parents("#ghx-detail-nav").length===0){return}var a=c.pane.attr("id");GH.DetailsView.setStoredTabId(a)};GH.DetailsView.setTab=function(a){var b=AJS.$("a[href=#"+a+"]");if(b.length>0){AJS.tabs.change(b)}};GH.DetailsView.getStoredTabId=function(){return GH.storage.get("gh.detailViewWork",true)||null};GH.DetailsView.setStoredTabId=function(a){GH.storage.put("gh.detailViewWork",a,true)};GH.DetailsView.handleIssueUpdated=function(a,c){GH.log(a.type+" from source "+c.source+" handled",GH.Logger.Contexts.event);var d=GH.DetailsModel.getIssueKeyForId(c.issueId);if(!d){GH.log("Unable to find key for updated issue id "+c.issueId+". Ignoring update",GH.Logger.Contexts.event);return}if(d!==GH.DetailsView.selectedIssueKey){return}if(!_.isUndefined(c.fieldId)){var b=GH.DetailsModel.isFieldInSection(c.fieldId,"estimate")||GH.DetailsModel.isFieldInCategory(c.fieldId,"timetracking");if(b){GH.DetailsView.loadContent(function(){GH.DetailsView.handleHeaderChangeIssueUpdate(c.issueId)})}}};GH.DetailsView.handleHeaderChangeIssueUpdate=function(b){GH.DetailsView.renderDetailsHeader();if(GH.TimeTrackingInlineDialog.getShouldCloseLater()){GH.TimeTrackingInlineDialog.getDialog().hide()}else{if(GH.TimeTrackingInlineDialog.getIsOpen()){GH.TimeTrackingInlineDialog.getDialog().show()}}if(GH.DetailsFieldEdit.getEditingCount()>0){var a=GH.DetailsFieldEdit.getEditingFieldIds()[0];if(GH.DetailsModel.isFieldInSection(a,"estimate")||GH.DetailsModel.isFieldInSection(a,"tracking")||GH.DetailsModel.isFieldInSection(a,"header")){GH.DetailsFieldEdit.discardEdits();GH.DetailsFieldEdit.editField(b,a)}}};GH.DetailsView.renderDetailsHeader=function(){var b=GH.DetailsModel.viewData;var a=AJS.$("#ghx-detail-issue");GH.DetailsFieldRenderer.renderDetailsHeaderFields(b,a,GH.DetailsView.opts);GH.DetailsView.registerHeaderFieldsListeners(a);GH.DetailsView.updateSize();AJS.$("#gh").removeClass("js-ghx-detail-loading")};GH.DetailsView.hasCurrentError=function(){var a=AJS.$("#ghx-detail-issue");return(a.find(".ghx-error").text().length>0)};GH.DetailsView.flagCurrentIssue=function(a,d){function e(){AJS.$(GH).trigger("issueUpdated",{issueId:c.id,source:"detailView"});GH.DetailsView.reload()}var c=GH.DetailsModel.viewData;if(c){if(d){GH.IssueFlagAndCommentAction.execute(c.key,a,e)}else{GH.IssueActions.flag(c.key,a).done(e)}}var b;if(a){b=d?"gh.issue.ctx.menu.action.flag.with.comment":"gh.issue.ctx.menu.action.flag";AJS.trigger("analytics",{name:b,data:{selectedIssueCount:1}})}else{b=d?"gh.issue.ctx.menu.action.unflag.with.comment":"gh.issue.ctx.menu.action.unflag";AJS.trigger("analytics",{name:b,data:{selectedIssueCount:1}})}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.soy' */
// This file was automatically generated from DetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }


GH.tpl.detailview.renderIssueDetailsSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-contents" class="ghx-detail-contents"><div class="ghx-detail-view-blanket"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsSkeleton.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsSkeleton';
}


GH.tpl.detailview.renderIssueDetails = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-detail-issue" class="ghx-detail-issue" data-issueid="' + soy.$$escapeHtml(opt_data.issueDetails.id) + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '"><div id="ghx-detail-head" class="ghx-detail-head js-issue-fields"><div class="ghx-controls">';
  if (opt_data.showActionsCog) {
    var tooltip__soy12 = '' + soy.$$escapeHtml("Actions (Type . to access issue actions)");
    output += aui.buttons.button({extraAttributes: {title: tooltip__soy12}, extraClasses: ['ghx-actions', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconText: tooltip__soy12, iconType: 'aui'}) + GH.tpl.detailview.renderIssueOperationsForCog(opt_data);
  }
  output += ((opt_data.canClose) ? '<div class="ghx-detail-close js-detailclose" title="' + soy.$$escapeHtml("Close detail ( T )") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close detail ( T )") + '</span></div>' : '') + '</div><div class="ghx-group"><span class="ghx-project-avatar"><img src="' + soy.$$escapeHtml(opt_data.issueDetails.projectAvatarUrl) + '" title="' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '" /></span><span id="js-sizer" class="ghx-sizer ui-resizable-handle ui-resizable-w" data-tooltip="' + soy.$$escapeHtml("Resize Detail View") + '"><span class="ghx-icon ghx-icon-sizer"></span></span><div class="ghx-key-group"><div class="ghx-project">' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '</div><div class="ghx-key js-view-in-jira"></div></div><div class="ghx-detail-summary"></div></div>' + GH.tpl.detailview.renderStatisticGroup(null) + '</div><div id="ghx-detail-nav" class="ghx-detail-nav js-issue-fields"></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetails.soyTemplateName = 'GH.tpl.detailview.renderIssueDetails';
}


GH.tpl.detailview.renderStatisticGroup = function(opt_data, opt_ignored) {
  return '<div class="ghx-statistic-group"><div class="ghx-detail-statistic ghx-estimate js-estimate"></div><div class="ghx-remaining-group"><div class="ghx-detail-statistic ghx-remaining js-remaining"></div>' + GH.tpl.detailview.renderLogWorkTrigger(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderStatisticGroup.soyTemplateName = 'GH.tpl.detailview.renderStatisticGroup';
}


GH.tpl.detailview.renderLogWorkTrigger = function(opt_data, opt_ignored) {
  return '<dl id="ghx-log-work-container"><dt class="ghx-detail-term"></dt><dd class="ghx-detail-description"><a role="button" class="ghx-trigger js-log-work">' + soy.$$escapeHtml("Log Work") + '</a></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderLogWorkTrigger.soyTemplateName = 'GH.tpl.detailview.renderLogWorkTrigger';
}


GH.tpl.detailview.renderIssueOperationsForCog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list hidden js-issueaction-container-cog" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">';
  var sectionList53 = opt_data.issueDetails.operations.filteredSections;
  var sectionListLen53 = sectionList53.length;
  for (var sectionIndex53 = 0; sectionIndex53 < sectionListLen53; sectionIndex53++) {
    var sectionData53 = sectionList53[sectionIndex53];
    output += '<ul class="aui-list-section ' + ((sectionIndex53 == 0) ? 'aui-first' : '') + '">';
    var operationList59 = sectionData53.operations;
    var operationListLen59 = operationList59.length;
    for (var operationIndex59 = 0; operationIndex59 < operationListLen59; operationIndex59++) {
      var operationData59 = operationList59[operationIndex59];
      output += '<li class="aui-list-item"><a id="' + soy.$$escapeHtml(operationData59.id) + '" title="' + soy.$$escapeHtml(operationData59.title) + '" class="aui-list-item-link js-issueaction ' + soy.$$escapeHtml(operationData59.styleClass) + '" href="' + soy.$$escapeHtml(operationData59.url) + '" >' + soy.$$escapeHtml(operationData59.label) + '</a></li>';
    }
    output += '</ul>';
  }
  output += '<ul class="aui-list-section aui-last"><li class="aui-list-item"><a id="ghx-more-actions" title="' + soy.$$escapeHtml("More Actions\u2026") + '" class="aui-list-item-link js-issueaction" href="#" >' + soy.$$escapeHtml("More Actions\u2026") + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueOperationsForCog.soyTemplateName = 'GH.tpl.detailview.renderIssueOperationsForCog';
}


GH.tpl.detailview.renderTabMenu = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-detail-nav-menu"><ul>';
  var tabList81 = opt_data.tabs;
  var tabListLen81 = tabList81.length;
  for (var tabIndex81 = 0; tabIndex81 < tabListLen81; tabIndex81++) {
    var tabData81 = tabList81[tabIndex81];
    output += '<li class="ghx-detail-nav-item"><a href="#ghx-tab-' + soy.$$escapeHtml(tabData81.id) + '" title="' + ((tabData81.toolTip) ? soy.$$escapeHtml(tabData81.toolTip) : soy.$$escapeHtml(tabData81.title)) + '">' + ((tabData81.thirdPartyTab) ? (tabData81.iconFont) ? '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(tabData81.iconFont) + '">' + soy.$$escapeHtml(tabData81.title) + '</span>' : '<span class="ghx-icon ghx-icon-thirdparty" style="background-image:url(\'' + soy.$$escapeHtml(tabData81.iconURL) + '\');">' + soy.$$escapeHtml(tabData81.title) + '</span>' : '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(tabData81.iconFont) + '">' + soy.$$escapeHtml(tabData81.title) + '</span>') + ((tabData81.hasTitleCount) ? '<b>' + soy.$$escapeHtml(tabData81.titleCount) + '</b>' : '') + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabMenu.soyTemplateName = 'GH.tpl.detailview.renderTabMenu';
}


GH.tpl.detailview.renderTabs = function(opt_data, opt_ignored) {
  var output = '<div id="js-detail-nav-content" class="ghx-detail-nav-content">';
  var tabList122 = opt_data.tabs;
  var tabListLen122 = tabList122.length;
  for (var tabIndex122 = 0; tabIndex122 < tabListLen122; tabIndex122++) {
    var tabData122 = tabList122[tabIndex122];
    output += '<div id="ghx-tab-' + soy.$$escapeHtml(tabData122.id) + '" class="ghx-detail-section"></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabs.soyTemplateName = 'GH.tpl.detailview.renderTabs';
}


GH.tpl.detailview.renderTabSection = function(opt_data, opt_ignored) {
  return '<div class="ghx-tab-section">' + ((opt_data.renderTitle) ? '<h4>' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="ghx-tab-section-content"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabSection.soyTemplateName = 'GH.tpl.detailview.renderTabSection';
}


GH.tpl.detailview.renderTabTitle = function(opt_data, opt_ignored) {
  return '<div class="ghx-header"><h3>' + soy.$$escapeHtml(opt_data.tabTitle) + '</h3></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabTitle.soyTemplateName = 'GH.tpl.detailview.renderTabTitle';
}


GH.tpl.detailview.renderFieldStructure = function(opt_data, opt_ignored) {
  return '<dl class="ghx-detail-list"><dt class="ghx-detail-term ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '" title="' + ((opt_data.field.tooltip) ? soy.$$escapeHtml(opt_data.field.tooltip) : soy.$$escapeHtml(opt_data.field.label)) + '">' + soy.$$escapeHtml(opt_data.field.label) + ':</dt><dd class="ghx-detail-description ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + ((opt_data.issueDetails.editable && opt_data.field.editable) ? ' js-editable-field ghx-editable' : '') + '"' + ((opt_data.issueDetails.editable && opt_data.field.editable) ? 'tabindex="0"' : '') + ' data-field-id="' + soy.$$escapeHtml(opt_data.field.id) + '" title="' + ((opt_data.field.tooltip) ? soy.$$escapeHtml(opt_data.field.tooltip) : soy.$$escapeHtml(opt_data.field.label)) + '" ></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldStructure.soyTemplateName = 'GH.tpl.detailview.renderFieldStructure';
}


GH.tpl.detailview.renderCommentsStructure = function(opt_data, opt_ignored) {
  return ((opt_data.canCreateComment) ? '<div class="ghx-controls"><button class="aui-button js-create-comment">' + soy.$$escapeHtml("Comment") + '</button></div>' : '') + '<div class="ghx-container">' + ((opt_data.totalComments > 0) ? GH.tpl.detailview.renderComments(opt_data) : GH.tpl.detailview.renderCommentsEmpty(null)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderCommentsStructure.soyTemplateName = 'GH.tpl.detailview.renderCommentsStructure';
}


GH.tpl.detailview.renderComments = function(opt_data, opt_ignored) {
  var output = '';
  var commentList188 = opt_data.comments;
  var commentListLen188 = commentList188.length;
  for (var commentIndex188 = 0; commentIndex188 < commentListLen188; commentIndex188++) {
    var commentData188 = commentList188[commentIndex188];
    output += '<div id="comment-' + soy.$$escapeHtml(commentData188.id) + '" class="ghx-comment twixi-block expanded"><div class="twixi-wrap actionContainer"><div class="action-details">' + ((commentData188.author == null) ? '<span class="user-hover user-avatar" style="background-image:url(' + soy.$$escapeHtml(commentData188.avatarUrl) + ');">' + soy.$$escapeHtml(commentData188.authorName) + '</span>' : '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(commentData188.author) + '" id="commentauthor_' + soy.$$escapeHtml(commentData188.id) + '_verbose" rel="' + soy.$$escapeHtml(commentData188.author) + '" class="user-hover user-avatar">' + ((commentData188.avatarUrl) ? '<img src="' + soy.$$escapeHtml(commentData188.avatarUrl) + '" alt="" />' : '') + soy.$$escapeHtml(commentData188.authorName) + '</a>') + ' ' + soy.$$escapeHtml("added a comment") + ' - <span class="commentdate_' + soy.$$escapeHtml(commentData188.id) + '_verbose subText">' + GH.tpl.detailview.renderDate({value: commentData188.dateTime, displayValue: commentData188.dateTimeDisplay}) + '</span>' + ((commentData188.restrictedTo) ? ' - <span class="icon icon-locked"></span><span class="subText">' + soy.$$filterNoAutoescape(AJS.format("Restricted to \x3cstrong\x3e{0}\x3c/strong\x3e",commentData188.restrictedTo)) + '</span>' : '') + '</div><div class="action-body">' + GH.tpl.detailview.renderHtmlView({field: commentData188}) + '</div></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderComments.soyTemplateName = 'GH.tpl.detailview.renderComments';
}


GH.tpl.detailview.renderCommentsEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no comments") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderCommentsEmpty.soyTemplateName = 'GH.tpl.detailview.renderCommentsEmpty';
}


GH.tpl.detailview.renderIssueLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '" title="' + soy.$$escapeHtml("View this issue in JIRA") + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueLink.soyTemplateName = 'GH.tpl.detailview.renderIssueLink';
}


GH.tpl.detailview.renderTextView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + ((opt_data.field.type == 'number') ? '&nbsp;' : soy.$$escapeHtml("None")) + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextView.soyTemplateName = 'GH.tpl.detailview.renderTextView';
}


GH.tpl.detailview.renderTextEstimateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + soy.$$escapeHtml("Unestimated") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEstimateView.soyTemplateName = 'GH.tpl.detailview.renderTextEstimateView';
}


GH.tpl.detailview.renderHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderHtmlView.soyTemplateName = 'GH.tpl.detailview.renderHtmlView';
}


GH.tpl.detailview.renderDescriptionHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml("There is no description content") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDescriptionHtmlView.soyTemplateName = 'GH.tpl.detailview.renderDescriptionHtmlView';
}


GH.tpl.detailview.renderDateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? GH.tpl.detailview.renderDate({value: opt_data.field.text, displayValue: opt_data.field.html}) : '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDateView.soyTemplateName = 'GH.tpl.detailview.renderDateView';
}


GH.tpl.detailview.renderTextareaEdit = function(opt_data, opt_ignored) {
  return '<span class="ghx-spinner" style="display:none"></span><textarea rows="' + soy.$$escapeHtml(opt_data.numRows) + '" cols="40"></textarea><div class="js-fielderrors ghx-error"></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextareaEdit.soyTemplateName = 'GH.tpl.detailview.renderTextareaEdit';
}


GH.tpl.detailview.renderTextEdit = function(opt_data, opt_ignored) {
  return '<span class="ghx-spinner" style="display:none"></span><input class="text short-field" type="text"/><div class="js-fielderrors ghx-error"></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEdit.soyTemplateName = 'GH.tpl.detailview.renderTextEdit';
}


GH.tpl.detailview.fieldUpdateSuccess = function(opt_data, opt_ignored) {
  return 'Field updated successfully';
};
if (goog.DEBUG) {
  GH.tpl.detailview.fieldUpdateSuccess.soyTemplateName = 'GH.tpl.detailview.fieldUpdateSuccess';
}


GH.tpl.detailview.fieldUpdateFailure = function(opt_data, opt_ignored) {
  return 'Updating field value failed';
};
if (goog.DEBUG) {
  GH.tpl.detailview.fieldUpdateFailure.soyTemplateName = 'GH.tpl.detailview.fieldUpdateFailure';
}


GH.tpl.detailview.renderDate = function(opt_data, opt_ignored) {
  return '<span class="date user-tz"><time datetime="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</time></span>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDate.soyTemplateName = 'GH.tpl.detailview.renderDate';
}


GH.tpl.detailview.renderFieldErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList317 = opt_data.errors;
  var errorListLen317 = errorList317.length;
  for (var errorIndex317 = 0; errorIndex317 < errorListLen317; errorIndex317++) {
    var errorData317 = errorList317[errorIndex317];
    output += ((! (errorIndex317 == 0)) ? '<br/>' : '') + soy.$$escapeHtml(errorData317.message);
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldErrors.soyTemplateName = 'GH.tpl.detailview.renderFieldErrors';
}


GH.tpl.detailview.renderAttachments = function(opt_data, opt_ignored) {
  return ((opt_data.canCreateAttachment) ? '<div class="ghx-controls"><button class="aui-button js-create-attachment ghx-attach">' + soy.$$escapeHtml("Attach Files") + '</button></div>' : '') + '<div class="ghx-container">' + ((opt_data.attachments.totalCount == 0) ? GH.tpl.detailview.renderAttachmentsEmpty(null) : ((opt_data.attachments.fileAttachments.length > 0) ? GH.tpl.detailview.renderFileAttachments({fileAttachments: opt_data.attachments.fileAttachments}) : '') + ((opt_data.attachments.imageAttachments.length > 0) ? GH.tpl.detailview.renderImageAttachments({imageAttachments: opt_data.attachments.imageAttachments}) : '')) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAttachments.soyTemplateName = 'GH.tpl.detailview.renderAttachments';
}


GH.tpl.detailview.renderAttachmentsEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no attachments") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAttachmentsEmpty.soyTemplateName = 'GH.tpl.detailview.renderAttachmentsEmpty';
}


GH.tpl.detailview.renderFileAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="file_attachments" class="item-attachments">';
  var fileAttachmentList349 = opt_data.fileAttachments;
  var fileAttachmentListLen349 = fileAttachmentList349.length;
  for (var fileAttachmentIndex349 = 0; fileAttachmentIndex349 < fileAttachmentListLen349; fileAttachmentIndex349++) {
    var fileAttachmentData349 = fileAttachmentList349[fileAttachmentIndex349];
    output += '<li class="attachment-content' + ((! fileAttachmentData349.latest) ? ' earlier-version' : '') + '">' + ((fileAttachmentData349.expanded) ? GH.tpl.detailview.renderFileAttachmentExpandable({fileAttachment: fileAttachmentData349}) : GH.tpl.detailview.renderFileAttachmentConcise({fileAttachment: fileAttachmentData349})) + '</li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFileAttachments.soyTemplateName = 'GH.tpl.detailview.renderFileAttachments';
}


GH.tpl.detailview.renderFileAttachmentExpandable = function(opt_data, opt_ignored) {
  var output = '<div class="twixi-block collapsed"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon twixi-opened"><span>' + soy.$$escapeHtml("Hide") + '</span></span></a>' + GH.tpl.detailview.renderFileAttachmentThumb(opt_data) + '<dl>' + GH.tpl.detailview.renderAttachmentInfo({attachment: opt_data.fileAttachment}) + '<dd class="zip-contents"><ol>';
  var zipEntryList375 = opt_data.fileAttachment.zipContents.entries;
  var zipEntryListLen375 = zipEntryList375.length;
  for (var zipEntryIndex375 = 0; zipEntryIndex375 < zipEntryListLen375; zipEntryIndex375++) {
    var zipEntryData375 = zipEntryList375[zipEntryIndex375];
    output += '<li><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(zipEntryData375.url) + '">' + GH.tpl.detailview.renderAttachmentIcon({icon: zipEntryData375.icon}) + '</a></div><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(zipEntryData375.url) + '" title="' + soy.$$escapeHtml(zipEntryData375.name) + '">' + soy.$$escapeHtml(zipEntryData375.abbreviatedName) + '</a><span class="attachment-size">' + soy.$$escapeHtml(zipEntryData375.filesize) + '</span></li>';
  }
  output += '</ol><span class="zip-contents-trailer">' + ((opt_data.fileAttachment.zipContents.moreAvailable) ? soy.$$escapeHtml(AJS.format("Showing {0} of {1} items",opt_data.fileAttachment.zipContents.maxShown,opt_data.fileAttachment.zipContents.totalNumEntries)) : '') + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.fileAttachment.url) + '">' + soy.$$escapeHtml("Download Zip") + '</a></span></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon twixi-closed"><span>' + soy.$$escapeHtml("Show") + '</span></span></a>' + GH.tpl.detailview.renderFileAttachmentConcise(opt_data) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFileAttachmentExpandable.soyTemplateName = 'GH.tpl.detailview.renderFileAttachmentExpandable';
}


GH.tpl.detailview.renderFileAttachmentConcise = function(opt_data, opt_ignored) {
  return GH.tpl.detailview.renderFileAttachmentThumb(opt_data) + '<dl>' + GH.tpl.detailview.renderAttachmentInfo({attachment: opt_data.fileAttachment}) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFileAttachmentConcise.soyTemplateName = 'GH.tpl.detailview.renderFileAttachmentConcise';
}


GH.tpl.detailview.renderFileAttachmentThumb = function(opt_data, opt_ignored) {
  return '<div class="attachment-thumb"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.fileAttachment.url) + '">' + GH.tpl.detailview.renderAttachmentIcon({icon: opt_data.fileAttachment.icon}) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFileAttachmentThumb.soyTemplateName = 'GH.tpl.detailview.renderFileAttachmentThumb';
}


GH.tpl.detailview.renderAttachmentInfo = function(opt_data, opt_ignored) {
  return '<dl><dt class="attachment-title"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.attachment.url) + '" title="' + ((opt_data.attachment.latest) ? soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(opt_data.attachment.createdFormatted) + ' - ' + soy.$$escapeHtml(opt_data.attachment.displayAuthor) + '">' + soy.$$escapeHtml(opt_data.attachment.filename) + '</a></dt><dd class="attachment-date">' + soy.$$escapeHtml(opt_data.attachment.createdFormatted) + '</dd><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.attachment.filesize) + '</dd><dd class="attachment-author">' + soy.$$escapeHtml(opt_data.attachment.displayAuthor) + '</dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAttachmentInfo.soyTemplateName = 'GH.tpl.detailview.renderAttachmentInfo';
}


GH.tpl.detailview.renderAttachmentIcon = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.icon.url) + '" height="16" width="16" border="0" alt="' + soy.$$escapeHtml(opt_data.icon.alt) + '">';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAttachmentIcon.soyTemplateName = 'GH.tpl.detailview.renderAttachmentIcon';
}


GH.tpl.detailview.renderImageAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="attachment_thumbnails" class="item-attachments">';
  var imageAttachmentList453 = opt_data.imageAttachments;
  var imageAttachmentListLen453 = imageAttachmentList453.length;
  for (var imageAttachmentIndex453 = 0; imageAttachmentIndex453 < imageAttachmentListLen453; imageAttachmentIndex453++) {
    var imageAttachmentData453 = imageAttachmentList453[imageAttachmentIndex453];
    output += '<li class="attachment-content"><div class="attachment-thumb"><a class="gallery" rel="gallery" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData453.url) + '" title="' + soy.$$escapeHtml(imageAttachmentData453.filename) + ' -' + ((imageAttachmentData453.latest) ? soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(imageAttachmentData453.createdFormatted) + ' - ' + soy.$$escapeHtml(imageAttachmentData453.displayAuthor) + '"><img src="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData453.thumbnail.url) + '" width="' + soy.$$escapeHtml(imageAttachmentData453.thumbnail.width) + '" height="' + soy.$$escapeHtml(imageAttachmentData453.thumbnail.height) + '" alt="" /></a></div><dl ' + ((! imageAttachmentData453.latest) ? 'class="earlier-version"' : '') + '><dt><span class="blender"></span><a class="attachment-title" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData453.url) + '" title="' + soy.$$escapeHtml(imageAttachmentData453.filename) + ' -' + ((imageAttachmentData453.latest) ? ' ' + soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(imageAttachmentData453.createdFormatted) + ' - ' + soy.$$escapeHtml(imageAttachmentData453.displayAuthor) + '">' + soy.$$escapeHtml(imageAttachmentData453.filename) + '</a></dt><dd class="attachment-size">' + soy.$$escapeHtml(imageAttachmentData453.filesize) + '</dd><dd class="attachment-date">' + soy.$$escapeHtml(imageAttachmentData453.createdFormatted) + '</dd></dl></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderImageAttachments.soyTemplateName = 'GH.tpl.detailview.renderImageAttachments';
}


GH.tpl.detailview.renderSubtasks = function(opt_data, opt_ignored) {
  var output = ((opt_data.canCreateSubtask) ? '<div class="ghx-controls"><button class="aui-button js-create-subtask">' + soy.$$escapeHtml("Create Sub-Task") + '</button></div>' : '') + '<div class="ghx-container">';
  if (opt_data.filteredSubtaskCount > 0 && opt_data.subtasks.length == 0) {
    output += GH.tpl.rapid.notification.renderAuiMessage({type: 'info', message: opt_data.filteredSubtaskMessage, messageHtml: true, icon: true});
  } else if (opt_data.subtasks.length == 0 && opt_data.filteredSubtaskCount == 0) {
    output += GH.tpl.detailview.renderSubtasksEmpty(null);
  } else if (opt_data.subtasks.length > 0) {
    output += '<table class="aui"><thead><tr><th id="sub-avatar"></th><th id="sub-key" class="ghx-nowrap">' + soy.$$escapeHtml("Issue Key") + '</th><th id="sub-summary">' + soy.$$escapeHtml("Summary") + '</th><th id="sub-status" class="' + ((! opt_data.statusCategoriesAvailable) ? 'ghx-center' : '') + '">' + soy.$$escapeHtml("Status") + '</th>' + ((opt_data.showTrackingField) ? '<th id="sub-estimate" class="ghx-center"><abbr title="' + soy.$$escapeHtml("Remaining") + '">' + soy.$$escapeHtml("Rem.") + '</abbr></th>' : '') + ((opt_data.showActionsColumn) ? '<th id="sub-actions" class="ghx-center">' + soy.$$escapeHtml("Actions") + '</th>' : '') + '</tr></thead><tbody>';
    var issueList542 = opt_data.subtasks;
    var issueListLen542 = issueList542.length;
    for (var issueIndex542 = 0; issueIndex542 < issueListLen542; issueIndex542++) {
      var issueData542 = issueList542[issueIndex542];
      output += '<tr class="js-subtask-issue' + ((issueData542.done) ? ' ghx-done' : '') + '" data-issue-key="' + soy.$$escapeHtml(issueData542.key) + '" data-issue-id="' + soy.$$escapeHtml(issueData542.id) + '"><td headers="sub-avatar">' + ((issueData542.assignee) ? '<div class="ghx-sub-avatar"><img src="' + soy.$$escapeHtml(issueData542.assignee.avatar) + '"' + ((issueData542.assignee.name) ? 'alt="' + soy.$$escapeHtml(issueData542.assignee.name) + '" title="' + soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(issueData542.assignee.name) + '"' : 'alt=""') + '></div>' : '') + '</td><td headers="sub-key" class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData542.key) + '" title="' + soy.$$escapeHtml("View this issue in JIRA") + '" class="js-detailview ghx-key">' + soy.$$escapeHtml(issueData542.key) + '</a></td><td headers="sub-summary"><div class="ghx-summary" title="' + soy.$$escapeHtml(issueData542.summary) + '">' + soy.$$escapeHtml(issueData542.summary) + '</div></td><td headers="sub-status" class="ghx-status ' + ((! issueData542.status.statusCategory) ? 'ghx-center' : '') + '">' + GH.tpl.status.renderIcon({status: issueData542.status, maxWidth: 'short'}) + '</td>' + ((opt_data.showTrackingField) ? '<td headers="sub-estimate" class="ghx-estimate ghx-right ghx-nowrap">' + GH.tpl.detailview.renderTextView({field: issueData542.trackingField}) + '</td>' : '') + ((opt_data.showActionsColumn) ? '<td headers="sub-actions" class="ghx-nowrap ghx-actions ghx-center"><ul class="menu">' + ((issueData542.canEdit) ? '<li><a class="js-edit-subtask" title="' + soy.$$escapeHtml("Edit") + '"><span class="ghx-icon ghx-icon-edit">' + soy.$$escapeHtml("Edit") + '</span></a></li>' : '') + ((issueData542.canDelete) ? '<li><a class="js-delete-subtask" title="' + soy.$$escapeHtml("Delete") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove">' + soy.$$escapeHtml("Delete") + '</span></a></li>' : '') + '</ul></td>' : '') + '</tr>';
    }
    output += ((opt_data.showTrackingField && opt_data.trackingFieldSum) ? '<tr><td colspan="4" /><td headers="sub-estimate" class="ghx-estimate-sum ghx-right ghx-nowrap">&Sigma; ' + soy.$$escapeHtml(opt_data.trackingFieldSum) + '</td>' + ((opt_data.showActionsColumn) ? '<td />' : '') + '</tr>' : '') + ((opt_data.filteredSubtaskCount > 0) ? '<tr><td colspan="5">' + GH.tpl.rapid.notification.renderAuiMessage({type: 'info', message: opt_data.filteredSubtaskMessage, messageHtml: true, icon: true}) + '</td></tr>' : '') + '</tbody></table>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasks.soyTemplateName = 'GH.tpl.detailview.renderSubtasks';
}


GH.tpl.detailview.renderSubtasksEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no sub-tasks") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasksEmpty.soyTemplateName = 'GH.tpl.detailview.renderSubtasksEmpty';
}


GH.tpl.detailview.renderTimeTrackingInlineDialog = function(opt_data, opt_ignored) {
  return '<div id="ghx-timetracking-inline-dialog-contents" class="js-issue-fields ghx-timetracking-inline-dialog-contents"><dl class="ghx-parent-remaining js-parent-remaining"></dl><dl class="js-subs-remaining"></dl><div class="ghx-error"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTimeTrackingInlineDialog.soyTemplateName = 'GH.tpl.detailview.renderTimeTrackingInlineDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsIssueLinks.soy' */
// This file was automatically generated from DetailsIssueLinks.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.issuelinks.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }
if (typeof GH.tpl.detailview.issuelinks == 'undefined') { GH.tpl.detailview.issuelinks = {}; }


GH.tpl.detailview.issuelinks.renderIssueLinks = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-container ghx-issue-links">' + ((opt_data.canLink) ? '<div class="ghx-controls"><button class="js-link-issue aui-button">' + soy.$$escapeHtml("Add Link") + '</button></div>' : '') + ((opt_data.issueLinkTypeEntries.length == 0) ? '<div class="ghx-container"><p class="ghx-fa">' + soy.$$escapeHtml("There are no linked issues") + '</p></div>' : '');
  var issueLinkTypeEntryList14 = opt_data.issueLinkTypeEntries;
  var issueLinkTypeEntryListLen14 = issueLinkTypeEntryList14.length;
  for (var issueLinkTypeEntryIndex14 = 0; issueLinkTypeEntryIndex14 < issueLinkTypeEntryListLen14; issueLinkTypeEntryIndex14++) {
    var issueLinkTypeEntryData14 = issueLinkTypeEntryList14[issueLinkTypeEntryIndex14];
    output += '<dl class="links-list"><dt title="' + soy.$$escapeHtml(issueLinkTypeEntryData14.relationship) + '">' + soy.$$escapeHtml(issueLinkTypeEntryData14.relationship) + '</dt>';
    var issueLinkEntryList20 = issueLinkTypeEntryData14.issueLinkEntries;
    var issueLinkEntryListLen20 = issueLinkEntryList20.length;
    for (var issueLinkEntryIndex20 = 0; issueLinkEntryIndex20 < issueLinkEntryListLen20; issueLinkEntryIndex20++) {
      var issueLinkEntryData20 = issueLinkEntryList20[issueLinkEntryIndex20];
      output += '<dd id="' + soy.$$escapeHtml(issueLinkEntryData20.htmlElementId) + '"' + ((issueLinkEntryData20.remote) ? ' class="remote-link"' : '') + '><div class="link-content">' + ((issueLinkEntryData20.remote) ? soy.$$filterNoAutoescape(issueLinkEntryData20.html) : GH.tpl.detailview.issuelinks.renderLocalLink({issueLinkEntry: issueLinkEntryData20})) + '</div></dd>';
    }
    output += '</dl>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderIssueLinks.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderIssueLinks';
}


GH.tpl.detailview.issuelinks.renderIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url) ? '<img src="' + soy.$$escapeHtml(opt_data.url) + '" width="16" height="16"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.alt) ? ' alt="' + soy.$$escapeHtml(opt_data.alt) + '"' : '') + ' />' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderIcon.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderIcon';
}


GH.tpl.detailview.issuelinks.renderLocalLink = function(opt_data, opt_ignored) {
  return '<p>' + GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.linkIcon.url, title: opt_data.issueLinkEntry.linkIcon.alt, alt: opt_data.issueLinkEntry.linkIcon.alt}) + '<span title="' + soy.$$escapeHtml(opt_data.issueLinkEntry.tooltip) + '"><a href="' + soy.$$escapeHtml(opt_data.issueLinkEntry.url) + '" class="link-title' + ((opt_data.issueLinkEntry.resolved) ? ' resolution' : '') + '">' + soy.$$escapeHtml(opt_data.issueLinkEntry.title) + '</a><span class="link-summary">' + ((opt_data.issueLinkEntry.summary) ? soy.$$escapeHtml(opt_data.issueLinkEntry.summary) : '') + '</span></span></p>' + ((opt_data.issueLinkEntry.priorityIcon || opt_data.issueLinkEntry.statusIcon) ? '<ul class="link-snapshot">' + ((opt_data.issueLinkEntry.priorityIcon) ? '<li class="priority">' + GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.priorityIcon.url, title: opt_data.issueLinkEntry.priorityIcon.alt, alt: opt_data.issueLinkEntry.priorityIcon.alt}) + '</li>' : '') + ((opt_data.issueLinkEntry.statusIcon) ? '<li class="status">' + ((opt_data.issueLinkEntry.statusIconLink) ? '<a href="' + soy.$$escapeHtml(opt_data.issueLinkEntry.statusIconLink) + '">' : '') + ((opt_data.issueLinkEntry.status) ? GH.tpl.status.renderIcon({status: opt_data.issueLinkEntry.status, maxWidth: 'short'}) : GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.statusIcon.url, title: opt_data.issueLinkEntry.statusIcon.alt, alt: opt_data.issueLinkEntry.statusIcon.alt})) + ((opt_data.issueLinkEntry.statusIconLink) ? '</a>' : '') + '</li>' : '') + '</ul>' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderLocalLink.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderLocalLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsIssueLinks.js' */
GH.DetailsIssueLinks={};GH.DetailsIssueLinks.updateRemoteLink=function(a){var b=a.htmlElementId;JIRA.SmartAjax.makeRequest({error:function(d,f,e){AJS.$("#"+b+" div.link-content .link-loading").removeClass("link-loading").addClass("link-loading-failed").html("Failed to load");var c=a.defaultLinkIcon;AJS.$("#"+b+" div.link-content .link-throbber").html("<img src='"+c+"' width='16' height='16' title='' alt='' />")},success:function(c){AJS.$("#"+b+" div.link-content").html(c)},url:GH.Ajax.CONTEXT_PATH+"/rest/viewIssue/1/remoteIssueLink/render/"+a.id})};GH.DetailsIssueLinks.loadRemoteLinks=function(a){_.each(a.issueLinkTypeEntries,function(b){_.each(b.issueLinkEntries,function(c){if(c.requiresAsyncLoading){GH.DetailsIssueLinks.updateRemoteLink(c)}})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldRenderer.js' */
GH.DetailsFieldRenderer={};GH.DetailsFieldRenderer.renderFields=function(d,p,m){GH.DetailsFieldRenderer.renderDetailsHeaderFields(d,p,m);var n=[{fieldsSelector:"details"},{fieldsSelector:"people",title:"People"},{fieldsSelector:"dates",title:"Dates"}];var c=_.reduce(n,function(r,s){var q=GH.DetailsModel.getFieldsForSection(s.fieldsSelector);if(q.length>0){r.push({title:s.title,fields:q})}return r},[]);if(d.issueLinks.linkingEnabled){c.push({title:"Issue Links",issueLinks:d.issueLinks})}var f=p.find("#ghx-detail-nav");var g=p;var b=GH.DetailsModel.getViewField("description");var h=_.isUndefined(b);var e=!h&&!!b.html;var j=[];if(c.length>0){j.push({id:"details",title:"Details",sections:c,viewData:d,iconFont:"info"})}j.push({id:"description",title:"Description",sections:[{fields:GH.DetailsModel.getFieldsForSection("description")}],hasContent:e,viewData:d,iconFont:"details"});j.push({id:"comments",title:"Comments",titleCount:d.comments?d.comments.length:0,hasTitleCount:true,comments:true,canCreateComment:d.canCreateComment,viewData:d,iconFont:"comment"});j.push({id:"attachments",title:"Attachments",titleCount:d.attachments.totalCount,hasTitleCount:true,attachments:d.attachments,canCreateAttachment:GH.DetailsModel.hasIssueOperation("attach-file"),iconFont:"attachment"});if(h){delete j[1];j=_.compact(j)}if(d.subtasks){var k=!!_.find(d.subtasks,function(q){return q.canEdit||q.canDelete});var a=!_.isUndefined(d.trackingStatisticFieldId);var l;if(a){var i=GH.DetailsModel.getViewField("aggregatetimeestimate_subtasks");if(i){l=i.html}}j.push({id:"subtasks",title:"Sub-Tasks",titleCount:d.subtasks.length,hasTitleCount:true,subtasks:d.subtasks,canCreateSubtask:GH.DetailsModel.hasIssueOperation("create-subtask"),showActionsColumn:k,showTrackingField:a,trackingFieldSum:l,filteredSubtaskCount:d.subtasks?d.totalSubtaskCount-d.subtasks.length:0,parentIssueKey:d.key,iconFont:"jira-completed-task"})}if(d.tabs&&d.tabs.thirdPartyTabs&&d.tabs.thirdPartyTabs.length>0){var o=d.tabs.thirdPartyTabs;_.each(o,function(q){if(q.iconURL||q.iconFont){j.push({id:q.providerKey.replace(/\./g,"-").replace(/:/g,"-"),title:q.label,titleCount:q.titleCount,toolTip:q.toolTip,hasTitleCount:!_.isUndefined(q.titleCount),thirdPartyTab:true,html:q.html,iconURL:q.iconURL,iconFont:q.iconFont})}})}GH.DetailsFieldRenderer.renderTabs(d,g,f,j)};GH.DetailsFieldRenderer.renderDetailsHeaderFields=function(c,m,l){var k=GH.DetailsModel.getViewField("issuekey");var d=GH.DetailsModel.getViewField("summary");var e=GH.DetailsModel.getPrimaryEstimateStatisticField();var f=GH.DetailsModel.getPrimaryTrackingStatisticField();var b=GH.DetailsModel.getSecondaryTrackingStatisticFields();var i=m.find("#ghx-detail-head");var h=i.find(".ghx-key");var g=GH.DetailsFieldRenderer.renderField(c,k);h.empty();h.append(g);GH.DetailsFieldRenderer.renderJiraLink(c,k,i);var a=GH.DetailsFieldRenderer.renderField(c,d);i.find(".ghx-detail-summary").empty().append(a);GH.DetailsFieldRenderer.renderPrimaryStatistics(c,e,f,i);var j=l.showLogWorkTrigger&&GH.DetailsModel.hasIssueOperation("log-work");GH.DetailsFieldRenderer.renderLogWorkTrigger(c,i,j)};GH.DetailsFieldRenderer.renderTabs=function(d,c,f,e){var a=AJS.$(GH.tpl.detailview.renderTabs({tabs:e}));var b=AJS.$(GH.tpl.detailview.renderTabMenu({tabs:e}));c.append(b);f.append(a);_.each(e,function(h){var g=a.find("#ghx-tab-"+h.id);if(h.sections){GH.DetailsFieldRenderer.renderSections(h,g)}else{if(h.comments){GH.DetailsFieldRenderer.renderComments(h,g)}else{if(h.attachments){GH.DetailsFieldRenderer.renderAttachments(h,g)}else{if(h.subtasks){GH.DetailsFieldRenderer.renderSubtasks(h,g)}else{if(h.thirdPartyTab){GH.DetailsFieldRenderer.renderThirdPartyTab(h,g)}}}}}})};GH.DetailsFieldRenderer.renderSections=function(c,a){var b=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:c.title}));a.append(b);_.each(c.sections,function(d){GH.DetailsFieldRenderer.renderSection(a,d,c.viewData)})};GH.DetailsFieldRenderer.renderComments=function(c,a){var b=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:c.title}));a.append(b);a.append(AJS.$(GH.tpl.detailview.renderCommentsStructure({comments:c.viewData.comments,totalComments:c.viewData.totalComments,canCreateComment:c.canCreateComment})))};GH.DetailsFieldRenderer.renderAttachments=function(c,a){var b=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:c.title}));a.append(b);a.append(AJS.$(GH.tpl.detailview.renderAttachments({attachments:c.attachments,canCreateAttachment:c.canCreateAttachment})))};GH.DetailsFieldRenderer.renderSubtasks=function(c,a){var e="";if(c.filteredSubtaskCount>0){e=AJS.format("{0,choice,0#{1}0 sub-tasks{2} are|1#{1}1 sub-task{2} is|1\u003c{1}{0,number} sub-tasks{2} are} being filtered by the board\'\'s {3}Saved Filter{2}",c.filteredSubtaskCount,'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+c.parentIssueKey+'#view-subtasks">',"</a>",'<a href="'+GH.Ajax.CONTEXT_PATH+"/secure/RapidView.jspa?tab=filter&rapidView="+GH.RapidViewConfig.currentData.data.id+'">')}var f=_.first(c.subtasks);var d=f&&f.status.statusCategory;var b=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:c.title}));a.append(b);a.append(AJS.$(GH.tpl.detailview.renderSubtasks({subtasks:c.subtasks,canCreateSubtask:c.canCreateSubtask,showActionsColumn:c.showActionsColumn,showTrackingField:c.showTrackingField,trackingFieldSum:c.trackingFieldSum,filteredSubtaskCount:c.filteredSubtaskCount,filteredSubtaskMessage:e,statusCategoriesAvailable:d})))};GH.DetailsFieldRenderer.renderThirdPartyTab=function(c,a){var b=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:c.title}));a.append(b);a.append(AJS.$(c.html))};GH.DetailsFieldRenderer.renderSection=function(d,f,b){var c=AJS.$(GH.tpl.detailview.renderTabSection({renderTitle:!_.isUndefined(f.title),title:f.title}));var e;if(f.fields){if(f.fields.length===0){return}e=c.find(".ghx-tab-section-content");_.each(f.fields,function(h){var g=GH.DetailsFieldRenderer.renderField(b,h);e.append(g)});d.append(c)}else{if(f.issueLinks){e=c.find(".ghx-tab-section-content");var a=GH.tpl.detailview.issuelinks.renderIssueLinks({issueLinkTypeEntries:f.issueLinks.issueLinkTypeEntries,canLink:f.issueLinks.canLink});e.replaceWith(a);d.append(c)}}};GH.DetailsFieldRenderer.renderField=function(a,d){var b=AJS.$(GH.tpl.detailview.renderFieldStructure({issueDetails:a,field:d}));var c=GH.DetailsFieldRenderer.renderFieldContent(d);b.find("dd").html(c);return b};GH.DetailsFieldRenderer.renderFieldBasic=function(a,c){var b=GH.DetailsFieldRenderer.renderFieldContent(c);return b};GH.DetailsFieldRenderer.renderPrimaryStatistics=function(b,c,f,d){var a=d.find(".ghx-statistic-group");var e=function(g,h,j){if(g){var l=_.extend({},g,{tooltip:g.label,label:h});var i=GH.DetailsFieldRenderer.renderField(b,l);var k=a.find(".js-"+j);k.empty().append(i);if(_.isUndefined(g.text)){k.addClass("ghx-empty")}else{k.removeClass("ghx-empty")}}else{a.find(".js-"+j).remove()}};if(!c&&!f){a.empty()}else{e(c,"Estimate","estimate");if(!f){a.find(".ghx-remaining-group").remove()}else{e(f,"Remaining","remaining")}}};GH.DetailsFieldRenderer.renderTimeTrackingDialogFields=function(b,e){var d=GH.DetailsModel.getSecondaryTrackingStatisticFields();var f=_.find(d,function(h){return h.id=="timeestimate"});f=_.extend({},f,{label:"Parent"});var a=_.find(d,function(h){return h.id=="aggregatetimeestimate_subtasks"});var g=GH.DetailsFieldRenderer.renderField(b,f);var c=GH.DetailsFieldRenderer.renderField(b,a);e.find(".js-parent-remaining").empty().append(g);e.find(".js-subs-remaining").empty().append(c);if(_.isUndefined(f.text)){e.find("dt.ghx-fieldname-timeestimate").parent("dl").addClass("ghx-empty")}else{e.find("dt.ghx-fieldname-timeestimate").parent("dl").removeClass("ghx-empty")}};GH.DetailsFieldRenderer.renderLogWorkTrigger=function(a,d,b){var c=d.find("#ghx-log-work-container");if(b){c.css({display:""})}else{c.css({display:"none"})}};GH.DetailsFieldRenderer.renderJiraLink=function(a,e,d){var c=d.find(".js-view-in-jira");var b=GH.tpl.detailview.renderIssueLink({issueKey:e.text});c.find("dd").html(b);c.click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.full.issue"})})};GH.DetailsFieldRenderer.renderFieldContent=function(b){var a;if(b.id=="description"){a=GH.tpl.detailview.renderDescriptionHtmlView({field:b});return a}if(b.id===GH.RapidViewConfig.currentData.data.estimationStatistic.fieldId){a=GH.tpl.detailview.renderTextEstimateView({field:b});return a}if(b.id===GH.RapidViewConfig.currentData.data.trackingStatistic.fieldId){a=GH.tpl.detailview.renderTextEstimateView({field:b});return a}if(b.id==="aggregatetimeestimate"&&"timeestimate"===GH.RapidViewConfig.currentData.data.trackingStatistic.fieldId){a=GH.tpl.detailview.renderTextEstimateView({field:b});return a}switch(b.renderer){case"html":a=GH.tpl.detailview.renderHtmlView({field:b});break;case"date":a=GH.tpl.detailview.renderDateView({field:b});break;case"epiclink":a=GH.tpl.field.epicLink.renderEpicLink({field:b,removableIfAllowed:true});break;case"status":a=GH.tpl.status.renderText({status:b.statusEntry});break;case"text":default:a=GH.tpl.detailview.renderTextView({field:b});break}return a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEdit.js' */
GH.DetailsFieldEdit={};GH.DetailsFieldEdit.model=false;GH.DetailsFieldEdit.init=function(){AJS.$(document).delegate(".js-issue-fields .js-editable-field","click",GH.DetailsFieldEdit.handleDetailsFieldClick);AJS.$(document).delegate(".js-epic-remove .aui-icon-close","click",GH.DetailsFieldEdit.handleRemoveEpicClick)};GH.DetailsFieldEdit.completeEdits=function(){var a=GH.DetailsFieldEdit.model;GH.DetailsFieldEdit.model=false;if(a){a.completeEdits()}};GH.DetailsFieldEdit.discardEdits=function(){var a=GH.DetailsFieldEdit.model;GH.DetailsFieldEdit.model=false;if(a){a.discardEdits()}};GH.DetailsFieldEdit.reset=function(){GH.DetailsFieldEdit.discardEdits()};GH.DetailsFieldEdit.getEditingCount=function(){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getEditingCount()||0};GH.DetailsFieldEdit.getEditingFieldIds=function(){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getEditingFieldIds()||[]};GH.DetailsFieldEdit.isEditing=function(a){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.isEditing(a)||false};GH.DetailsFieldEdit.handleRemoveEpicClick=function(c){var b=AJS.$(this).closest(".js-epic-remove").attr("data-epickey");var a=AJS.$("#ghx-detail-issue").attr("data-issuekey");AJS.$(this).parents("dd").prev().andSelf().remove();GH.EpicController.removeIssuesFromAssociatedEpics([a])};GH.DetailsFieldEdit.handleDetailsFieldClick=function(d){var c=AJS.$(this);var b=c.closest("dd.js-editable-field");if(b.length<1){return}if(AJS.$(d.target).is("a")){return}var a=b.attr("data-field-id");var e=parseInt(AJS.$("#ghx-detail-issue").attr("data-issueid"),10);GH.DetailsFieldEdit.editField(e,a);d.preventDefault()};GH.DetailsFieldEdit.editRelativeField=function(e,h){var b=e.model;var f=e.fieldData.id;if(!GH.DetailsFieldEdit.model||GH.DetailsFieldEdit.model.getIssueId()!=b.getIssueId()){return}var g=b.getIssueId();var d=b.getFieldInTabOrder();var a=null;var c;for(c=0;c<d.length;c++){if(d[c].id===f){a=c;break}}if(_.isNull(a)){return false}if(h>0){for(c=a+1;c<d.length;c++){if(d[c]&&d[c].editable&&GH.DetailsFieldEdit.isFieldVisible(d[c])){GH.DetailsFieldEdit.editField(g,d[c].id);return true}}}else{for(c=a-1;c>=0;c--){if(d[c]&&d[c].editable&&GH.DetailsFieldEdit.isFieldVisible(d[c])){GH.DetailsFieldEdit.editField(g,d[c].id);return true}}}return false};GH.DetailsFieldEdit.isFieldVisible=function(a){return AJS.$('dd[data-field-id="'+a.id+'"]').is(":visible")};GH.DetailsFieldEdit.editField=function(d,a){if(!GH.DetailsModel.viewData||GH.DetailsModel.viewData.id!=d){return}var b=GH.DetailsFieldEdit.model;if(b.issueId!=d){b=GH.DetailsFieldEdit.model=false}if(b&&b.isEditing(a)){var c=b.getEditInfo(a);if(c){GH.DetailsFieldEdit.focusFieldEditor(c);return}}if(b&&b.getEditingCount()>0){GH.DetailsFieldEdit.startFieldEdit(b,a);return}if(!b||!b.isLoading){GH.DetailsFieldEdit.model=b=new GH.DetailsFieldEditModel(d)}GH.DetailsFieldEdit.loadEditData(b,a)};GH.DetailsFieldEdit.loadEditData=function(a,b){a.fieldToEditUponCompletion=b;if(a.isLoading){return}a.isLoading=true;GH.Ajax.get({url:"/xboard/issue/edit-data.json",data:{issueIdOrKey:a.getIssueId(),rapidViewId:GH.RapidViewConfig.currentData.id}},"loadEditData").done(function(c){a.isLoading=false;a.setEditData(c);var d=a.fieldToEditUponCompletion;delete a.fieldToEditUponCompletion;GH.DetailsFieldEdit.startFieldEdit(a,d)})};GH.DetailsFieldEdit.handleFieldUpdateSuccess=function(d,e){var a=d.fieldData.id;var f=d.model.getIssueId();var b=e.view;if(GH.DetailsModel.viewData&&GH.DetailsModel.viewData.id==f){GH.DetailsModel.setViewDataForField(a,b);GH.DetailsFieldRenderer.updateFieldViewAndCloseEdit(d,b);d.model.updateEditDataForField(a,e.edit)}else{var c=GH.tpl.detailview.fieldUpdateSuccess();GH.Notification.showSuccess(c)}GH.log("issueUpdated triggered",GH.Logger.Contexts.ui);AJS.$(GH).trigger("issueUpdated",{issueId:f,source:"detailView",fieldId:a})};GH.DetailsFieldEdit.handleFieldUpdateFailure=function(e,a,c){var b=e.model;if(GH.DetailsModel.viewData&&GH.DetailsModel.viewData.id==b.getIssueId()&&b.isEditing(a)){if(c.errors){GH.DetailsFieldEdit.showFieldErrors(e,c.contextId,c.errors)}}else{var d=GH.tpl.detailview.fieldUpdateFailure();GH.Notification.showWarning(d)}};GH.DetailsFieldEdit.startFieldEdit=function(c,b){var e=c.getFieldEditData(b);if(!e){return}var d={};d.model=c;d.fieldData=e;d.enabled=true;var a=AJS.$("dd.ghx-fieldname-"+b);if(a.length<1){return}d.viewDd=a;d.editDd=GH.DetailsFieldEdit.createEditDD(e);switch(e.type){case"textarea":var f=b!="description";d.editor=new GH.DetailsFieldTextArea(f);break;case"number":case"text":d.editor=new GH.DetailsFieldTextInput();break}if(d.editor){c.addEditInfo(d);d.editor.startEdit(d)}};GH.DetailsFieldEdit.createEditDD=function(a){var b=AJS.$("<dd></dd>");b.addClass("ghx-fieldtype-"+a.type).addClass("ghx-fieldname-"+a.id).addClass("js-editing ghx-editing").attr({"data-field-id":a.id});return b};GH.DetailsFieldEdit.showEdit=function(a){a.viewDd.hide().after(a.editDd)};GH.DetailsFieldEdit.focusFieldEditor=function(a){a.editor.focus(a)};GH.DetailsFieldEdit.hideEdit=function(a){a.editDd.remove();a.viewDd.show();if(a.fieldData.errorSelector){AJS.$(a.fieldData.errorSelector).empty()}a.model.removeEditInfo(a)};GH.DetailsFieldEdit.showFieldErrors=function(b,a,c){if(GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getIssueId()==b.model.getIssueId()){b.editor.setErrors(b,c);b.editor.returnToEdit(b)}else{AJS.log("Unable to find field for id "+a);GH.Notification.showErrors({errors:c})}};GH.DetailsFieldRenderer.updateFieldViewAndCloseEdit=function(b,a){var c=GH.DetailsFieldRenderer.renderFieldContent(a);b.viewDd.html(c);GH.DetailsFieldEdit.hideEdit(b);if(b.fieldData.id=="summary"){AJS.$("#ghx-detail-issue").scrollTop(0);GH.DetailsView.updateSize()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEditModel.js' */
GH.DetailsFieldEditModel=function(a){this.issueId=a;this.isLoading=false;this.editData=false;this.editInfos=[]};GH.DetailsFieldEditModel.prototype.getIssueId=function(){return this.issueId};GH.DetailsFieldEditModel.prototype.setEditData=function(a){this.editData=a;_.each(a.fields,function(c){var b=GH.DetailsModel.getErrorSelectorForField(c.id);if(b){c.errorSelector=b}})};GH.DetailsFieldEditModel.prototype.getFieldEditData=function(a){var b=false;for(var c=0;c<this.editData.fields.length;c++){if(this.editData.fields[c].id==a){b=this.editData.fields[c];break}}return b};GH.DetailsFieldEditModel.prototype.getFieldInTabOrder=function(){var a=this.editData.fields;var c=[];var b=[];_.each(a,function(d){if(d.id=="summary"){b.push(d);c[d.id]=true}});_.each(a,function(d){if(d.id.indexOf("customfield_")===0){b.push(d);c[d.id]=true}});_.each(a,function(d){if(!c[d.id]){b.push(d);c[d.id]=true}});return b};GH.DetailsFieldEditModel.prototype.getEditingCount=function(){return this.editInfos.length};GH.DetailsFieldEditModel.prototype.getEditingFieldIds=function(){if(this.getEditingCount()===0){return[]}return _.map(this.editInfos,function(a){return a.fieldData.id})};GH.DetailsFieldEditModel.prototype.isEditing=function(a){return this.getEditInfo(a)!==false};GH.DetailsFieldEditModel.prototype.getEditInfo=function(a){for(var b=0;b<this.editInfos.length;b++){if(this.editInfos[b].fieldData.id==a){return this.editInfos[b]}}return false};GH.DetailsFieldEditModel.prototype.addEditInfo=function(a){this.editInfos.push(a)};GH.DetailsFieldEditModel.prototype.removeEditInfo=function(a){this.editInfos=_.filter(this.editInfos,function(b){return b.fieldData.id!=a.fieldData.id})};GH.DetailsFieldEditModel.prototype.clearEditData=function(){this.editInfos=[]};GH.DetailsFieldEditModel.prototype.updateEditDataForField=function(a,b){var c=this.editData;if(c){for(i=0;i<c.fields.length;i++){if(c.fields[i].id==a){c.fields[i]=b;break}}}};GH.DetailsFieldEditModel.prototype.completeEdits=function(){_.each(this.editInfos,function(a){a.editor.submitChanges(a)})};GH.DetailsFieldEditModel.prototype.discardEdits=function(){_.each(this.editInfos,function(a){a.enabled=false})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEditControls.js' */
GH.DetailsFieldEditControl=function(){};GH.DetailsFieldEditControl.events=new GH.Events();(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.DetailsFieldEditControl.Analytics=new a("gh.issuedetail","inlineedit")})();GH.DetailsFieldEditControl.prototype={generateControl:function(a){throw"Unimplemented method"},keydownHandler:function(c,b){var a=this;if(c.keyCode==27){c.stopPropagation();a.cancelEdit(b)}else{if(c.keyCode==13){c.preventDefault();b.editControl.blur()}else{if(c.keyCode==9){var e=c.shiftKey?-1:1;var d=GH.DetailsFieldEdit.editRelativeField(b,e);if(d){}}}}},startEdit:function(d){var c=this;var a=c.generateControl(d);var b="";if(!_.isUndefined(d.fieldData.value)){b=d.fieldData.value}else{if(!_.isUndefined(d.fieldData.text)){b=d.fieldData.text}}a.val(b);a.bind("blur focusout",function(){c.submitChanges(d)});a.keydown(function(e){c.keydownHandler(e,d)});GH.DetailsFieldEdit.showEdit(d);c.focus(d);d.enabled=true},cancelEdit:function(a){if(!a.enabled){return}a.enabled=false;a.editControl.unbind("blur");GH.DetailsFieldEdit.hideEdit(a)},submitChanges:function(c){var a=this;if(!c.enabled){return}c.enabled=false;var d=c.editControl.val();if(d==c.fieldData.text){c.enabled=true;a.cancelEdit(c);return}GH.DetailsFieldEditControl.events.trigger("before:inlineedit");c.editControl.unbind("blur").attr("disabled","disabled");c.editDd.find(".ghx-spinner").show();var b={};b[c.fieldData.id]=function(e){GH.DetailsFieldEdit.handleFieldUpdateFailure(c,c.fieldData.id,e)};GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:c.model.getIssueId(),fieldId:c.fieldData.id,newValue:d},errorContextMap:b}).done(function(e){GH.DetailsFieldEdit.handleFieldUpdateSuccess(c,e.success);GH.DetailsFieldEditControl.events.trigger("after:inlineedit");GH.DetailsFieldEditControl.Analytics.trigger("fieldId: "+c.fieldData.id)}).fail(function(e){c.editor.returnToEdit(c)});AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:c.fieldData.id}})},setErrors:function(b,c){var a=GH.tpl.detailview.renderFieldErrors({errors:c});if(b.fieldData.errorSelector){AJS.$(b.fieldData.errorSelector).html(a)}else{b.editDd.find(".js-fielderrors").html(a)}},returnToEdit:function(b){var a=this;b.editControl.blur(function(){a.submitChanges(b)});b.editDd.find(".ghx-spinner").hide();b.editControl.removeAttr("disabled");if(b.model.getEditingCount()==1){a.focus(b)}b.enabled=true},focus:function(b){var a=function(){b.editControl.focus();if(b.fieldData.type=="number"){b.editControl.select()}};setTimeout(a,0)}};GH.DetailsFieldTextArea=function(a){this.doesReturnSubmit=_.isUndefined(a)?true:a};GH.DetailsFieldTextArea.prototype=new GH.DetailsFieldEditControl();GH.DetailsFieldTextArea.prototype.generateControl=function(b){var d=b.fieldData.id=="summary"?6:10;var c=GH.tpl.detailview.renderTextareaEdit({numRows:d});b.editDd.html(c);var a=b.editDd.find("textarea");b.editControl=a;return a};GH.DetailsFieldTextArea.prototype.keydownHandler=function(c,b){var a=this;if(c.keyCode==27){c.stopPropagation();a.cancelEdit(b)}else{if(a.doesReturnSubmit&&c.keyCode==13){c.preventDefault();b.editControl.blur()}else{if(c.keyCode==9){var e=c.shiftKey?-1:1;var d=GH.DetailsFieldEdit.editRelativeField(b,e);if(d){}}}}};GH.DetailsFieldTextInput=function(){};GH.DetailsFieldTextInput.prototype=new GH.DetailsFieldEditControl();GH.DetailsFieldTextInput.prototype.generateControl=function(a){var b=GH.tpl.detailview.renderTextEdit({field:a.fieldData});a.editDd.html(b);var c=a.editDd.find("input");a.editControl=c;return c};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicConfig.js' */
GH.EpicConfig={};GH.EpicConfig.epicConfig=undefined;GH.EpicConfig.setEpicConfig=function(a){GH.EpicConfig.epicConfig=a};GH.EpicConfig.getStoryIssueTypeId=function(){return GH.EpicConfig.epicConfig.storyIssueTypeId};GH.EpicConfig.getStoryIssueTypeName=function(){return GH.EpicConfig.epicConfig.storyIssueTypeName};GH.EpicConfig.getEpicIssueTypeId=function(){return GH.EpicConfig.epicConfig.epicIssueTypeId};GH.EpicConfig.getEpicIssueTypeName=function(){return GH.EpicConfig.epicConfig.epicIssueTypeName};GH.EpicConfig.getEpicLabelFieldId=function(){return GH.EpicConfig.epicConfig.epicLabelFieldId};GH.EpicConfig.getEpicStatusFieldId=function(){return GH.EpicConfig.epicConfig.epicStatusFieldId};GH.EpicConfig.getEpicStatusDoneValueId=function(){return GH.EpicConfig.epicConfig.epicStatusDoneValueId};GH.EpicConfig.getEpicLinkFieldName=function(){return GH.EpicConfig.epicConfig.epicLinkFieldName};GH.EpicConfig.getEpicLinkFieldId=function(){return GH.EpicConfig.epicConfig.epicLinkFieldId};GH.EpicConfig.canMarkEpicAsDone=function(){return !_.isUndefined(GH.EpicConfig.epicConfig.epicStatusDoneValueId)};GH.EpicConfig.getEpicColorFieldId=function(){return GH.EpicConfig.epicConfig.epicColorFieldId};GH.EpicConfig.getEpicNameString=function(b,a){return b||"unlabelled"+"-"+a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintConfig.js' */
define("jira-agile/rapid/ui/plan/sprint-config",[],function(){var a={};a.sprintConfig=undefined;a.setSprintConfig=function(b){a.sprintConfig=b};a.getSprintConfig=function(){return a.sprintConfig};a.getSprintFieldId=function(){return a.getSprintConfig().sprintFieldId};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicController.js' */
GH.EpicController={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.EpicController.analytics=new a("gh.rapidboard.epics");GH.EpicController.analytics2=new a("gh.rapidboard.epics","epicCount","")})();GH.EpicController.model=undefined;GH.EpicController.init=function(){AJS.$(GH).bind("issueCreated",GH.EpicController.handleIssueCreated);GH.EpicController.model=new GH.EpicModel();GH.EpicView.init()};GH.EpicController.getFilteredEpicKey=function(){return GH.BoardState.getPerViewValue("planSelectedEpic",null)};GH.EpicController.setFilteredEpicKey=function(a){GH.BoardState.setPerViewValue("planSelectedEpic",a)};GH.EpicController.getEpicModel=function(){return GH.EpicController.model};GH.EpicController.setEpicData=function(a){GH.EpicController.model.setData(a)};GH.EpicController.validateSelectedEpic=function(){var b=GH.EpicController.getEpicModel().getEpicList();var a=GH.EpicController.getFilteredEpicKey();var c=GH.PlanIssueListFiltering.isNoneEpicFilterKey(a)&&b.getNumVisibleIssues()>0||b.isIssueValid(a);if(!c){GH.EpicController.setFilteredEpicKey(undefined);GH.RapidBoard.UrlState.replaceState()}};GH.EpicController.registerEpicsCount=function(a){GH.EpicController.triggerEpicCount(a.epics.length)};GH.EpicController.triggerEpicCount=_.once(function(a){GH.EpicController.analytics2.trigger(a)});GH.EpicController.reorderEpics=function(b,a,c){GH.EpicController.model.getEpicList().reorderIssues(b,a,c)};GH.EpicController.handleIssueCreated=function(a,b){if(!GH.AnalyticsEnabled){return}var c=GH.EpicConfig.getEpicLabelFieldId();if(!_.isString(c)||c.length===0){return}_.each(b.issues,function(d){GH.Ajax.get({bareUrl:GH.Ajax.CONTEXT_PATH+"/rest/api/2/issue/"+d.issueKey+"?fields=issuetype,"+c},"getEpicLabelLength").done(function(e){if(e.fields.issuetype.name!=="Epic"){return}var f=e.fields[c]||"";GH.EpicController.analytics.trigger("epicLabelLength","length",f.length)})})};GH.EpicController.addIssuesToEpic=function(c,a){var b=[];_.each(a,function(d){var e=GH.BacklogModel.getIssueData(d);if(e&&e.typeId!==GH.EpicConfig.getEpicIssueTypeId()){e.epic=c;b.push(e)}});GH.EpicController.addIssuesToEpicOnServer(c,a).done(function(d){GH.Notification.showSuccess("Selection successfully added to the epic");_.each(b,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})});if(GH.PlanController.isActive()){GH.BacklogController.updateEpicData();GH.PlanController.reloadDetailView()}GH.EpicController.analytics.trigger("addIssues","issueCount",a.length)}).fail(function(){GH.BacklogController.loadData()})};GH.EpicController.addIssuesToEpicOnServer=function(b,a){var c={ignoreEpics:true,issueKeys:a};return GH.Ajax.put({url:"/epics/"+b+"/add",data:c})};GH.EpicController.removeIssuesFromAssociatedEpics=function(a){var b=[];if(GH.PlanController.isActive()){b=GH.BacklogModel.removeEpicFromIssues(a);if(b.length===0){return}}else{if(GH.WorkController.isActive()){b=GH.GridDataController.getModel().removeEpicFromIssues(a);if(b.length===0){return}}}var c={issueKeys:a};GH.Ajax.put({url:"/epics/remove",data:c}).done(function(d){GH.Notification.showSuccess("Selection successfully removed from the epic");if(!_.isEmpty(b)){_.each(b,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})})}if(GH.PlanController.isActive()){GH.BacklogController.updateEpicData();GH.PlanController.reloadDetailView()}else{if(GH.WorkController.isActive()){GH.WorkController.reloadDetailView();if(GH.GridDataController.getModel().getSwimlaneStrategy()=="epic"){GH.WorkController.reload()}}}GH.EpicController.analytics.trigger("removeIssues","issueCount",a.length)})};GH.EpicController.updateEpicAsDone=function(a){var b=GH.EpicController.updateEpicField(a,GH.EpicConfig.getEpicStatusFieldId(),GH.EpicConfig.getEpicStatusDoneValueId());b.done(function(){GH.EpicController.analytics.trigger("markEpicAsDone");GH.EpicView.showEpicMarkedAsDoneMessage();if(GH.EpicController.getFilteredEpicKey()===a){GH.EpicController.setFilteredEpicKey(null);GH.BacklogController.updateEpicFiltering(false);GH.RapidBoard.State.replaceState()}GH.BacklogController.updateEpicData()})};GH.EpicController.updateEpicField=function(c,b,d,a,e){return GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:c,fieldId:b,newValue:d}}).done(a).fail(e)};GH.EpicController.applyVersionFiltering=function(){if(GH.VersionController.hasFilteredVersion()){var b=GH.BacklogModel.getEpicsFilteredForVersion(GH.VersionController.getFilteredVersionId());var a=GH.EpicController.getFilteredEpicKey();if(_.contains(b.filtered,a)){GH.EpicView.deselectAllEpics();GH.EpicController.setFilteredEpicKey(null);GH.BacklogController.updateEpicFiltering(false);GH.RapidBoard.State.pushState()}GH.EpicView.setFilteredStyle(b.filtered)}else{GH.EpicController.clearVersionFiltering()}};GH.EpicController.clearVersionFiltering=function(){GH.EpicView.clearFilteredStyle()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicModel.js' */
GH.EpicModel=function(){this.epicsList=undefined;this.canEditEpics=false;this.supportsPages=false};GH.EpicModel.prototype.setData=function(a){if(!a){return}this.canEditEpics=!!a.canEditEpics;this.supportsPages=!!a.supportsPages;var b=a.epics||[];_.each(b,GH.EpicModel.prototype._epicPreprocessFn);this.epicsList=new GH.IssueListModel("epics",b,GH.VersionController.getVersionModel())};GH.EpicModel.prototype._epicPreprocessFn=function(a){a.originalEpicLabel=a.epicLabel||"";a.epicLabel=GH.EpicConfig.getEpicNameString(a.epicLabel,a.key)};GH.EpicModel.prototype.getEpicList=function(){return this.epicsList};GH.EpicModel.prototype.canUserEditEpics=function(){return this.canEditEpics};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.js' */
GH.EpicView={};GH.EpicView.init=function(){GH.EpicView.initializeInlineEdits();AJS.$(document).delegate(".js-change-epic-color","click",GH.EpicView.changeEpicColor);AJS.$(document).delegate(".js-mark-epic-done","click",GH.EpicView.handleMarkEpicAsDone)};GH.EpicView.colors=["ghx-label-1","ghx-label-2","ghx-label-3","ghx-label-4","ghx-label-5","ghx-label-6","ghx-label-7","ghx-label-8","ghx-label-9"];GH.EpicView.opts={canClose:true};GH.EpicView.dropdowns=[];GH.EpicView.show=function(){var a=AJS.$("#ghx-epic-column");a.html(GH.tpl.epic.renderShell({isEpicPanelExpanded:GH.PlanController.isEpicsColumnVisible(),canCreateIssue:GH.UserData.userConfig.canCreateIssue}));GH.EpicView.renderEpics();GH.EpicQuickCreate.registerCreateEpicDialog()};GH.EpicView.hide=function(){AJS.$("#ghx-epic-column").empty()};GH.EpicView.updateEpics=function(){GH.EpicView.renderEpics();GH.PlanDragAndDrop.initializeClassificationDnD()};GH.EpicView.renderEpics=function(){var g=GH.EpicController.getEpicModel();var f=AJS.$("#ghx-epic-column");var a=f.find(".ghx-classification-scrollview");var e={};var b=g.getEpicList();var h=GH.EpicController.getFilteredEpicKey();_.each(b.getAllIssues(),function(i){e[i.key]=GH.EpicView.getTwixieState(i.key)=="open";i.epicStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,i.epicStats.doneEstimate);i.epicStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,i.epicStats.totalEstimate);i.epicStats.isIssueCountStatistic=GH.BacklogModel.estimationStatistic.typeId==="issueCount";i.epicStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name});var c={epicKeys:b.getVisibleRankables(),epics:b.getAllIssues(),isEpicExpandedByKey:e,selectedEpicKey:h,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(h),isAllSelected:!h,canEditEpics:g.canUserEditEpics(),canMarkAsDone:GH.EpicConfig.canMarkEpicAsDone(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,colors:GH.EpicView.colors,showPages:GH.BacklogModel.supportsPages()};a.html(GH.tpl.epic.renderEpics(c));GH.PlanView.updateFixedElementPositioning();f.find(".ghx-classification-item").click(function(i){if(AJS.$(i.target).closest(".js-epic-actions, .js-create-epic-issue, .js-editing-field, .js-epic-details-toggle, .js-epic-key-link, .js-view-entity-pages").length){return}GH.EpicView.toggleFiltering(AJS.$(this))});f.find(".js-epic-details-toggle").click(GH.EpicView.toggleEpicDisplay);f.find(".js-epic-name").click(function(i){i.preventDefault()});var d=AJS.$(".js-epic-actions");_.each(d,function(i){var l="#"+AJS.$(i).attr("id").replace(/^dd-trigger-/,"dd-content-");var j=AJS.$(l);var k=AJS.Dropdown.create({trigger:i,content:j,alignment:AJS.LEFT});AJS.$(k).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()});GH.EpicView.dropdowns.push(k)});f.find(".js-create-epic-issue").click(GH.EpicView.showCreateIssueAssociatedWithEpicDialog);f.find(".js-view-entity-pages").each(function(){var i=AJS.$(this);var j=i.closest(".ghx-classification-item").attr("data-epic-key");GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,GH.LinkedPagesController.PLAN,j,i)});GH.EpicView.dropdowns=_.flatten(GH.EpicView.dropdowns);GH.EpicController.applyVersionFiltering()};GH.EpicView.showCreateIssueAssociatedWithEpicDialog=function(f){f.preventDefault();var c=AJS.$(this).parents(".ghx-classification-item").attr("data-epic-key");var g=AJS.$(this).parents(".ghx-classification-item").find("[data-fieldname='epicLabel']").text();GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var e=GH.EpicQuickCreate.createCreateStoryForm();e.bind("contentRefreshed",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).unbind("QuickCreateIssue.validationError");AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(i,h){h.setSelection(new AJS.ItemDescriptor({value:"key:"+c,label:g}));setTimeout(function(){h.disable()},0);AJS.$(document).bind("QuickCreateIssue.validationError",function(j){h.disable()})})});var a=function(h){return GH.EpicController.addIssuesToEpicOnServer(c,_.pluck(h,"issueKey"))};var b="addToEpicCallback";GH.BacklogController.registerIssueCreatedCallback(b,a);var d=e.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog"});d.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).unbind("QuickCreateIssue.validationError");GH.BacklogController.unregisterIssueCreatedCallback(b)});d.show()};GH.EpicView.hideDropdown=function(){_.each(GH.EpicView.dropdowns,function(a){a.hide()})};GH.EpicView.toggleFiltering=function(a){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();GH.EpicView.deselectAllEpics();var b=a.attr("data-epic-key"),c;if(GH.EpicController.getFilteredEpicKey()===b){c=null}else{c=b;AJS.$("#ghx-epic-column").find(".ghx-classification-all").removeClass("ghx-selected");a.addClass("ghx-selected")}GH.EpicController.setFilteredEpicKey(c);GH.BacklogController.updateEpicFiltering(false);GH.RapidBoard.State.pushState()};GH.EpicView.deselectAllEpics=function(){var a=AJS.$("#ghx-epic-column");var b=a.find(".ghx-classification-item");b.removeClass("ghx-selected");a.find(".ghx-classification-all").addClass("ghx-selected")};GH.EpicView.updateEpicStats=function(){var a=AJS.$("#ghx-epic-column");AJS.$.each(a.find(".ghx-classification-item"),function(d,e){var b=AJS.$(e);var c=b.attr("data-epic-key")})};GH.EpicView.setTwixieState=function(a,c){var b="epicTwix-"+a;GH.BoardState.setPerViewValue(b,c)};GH.EpicView.getTwixieState=function(a){var b="epicTwix-"+a;return GH.BoardState.getPerViewValue(b,"closed")};GH.EpicView.toggleEpicDisplay=function(c){var b=AJS.$(this);var a=b.parents(".ghx-classification-item");GH.EpicView.toggleEpicDisplayByElementWithAnimation(a)};GH.EpicView.toggleEpicDisplayByElement=function(b){var a=b.attr("data-epic-key");if(b.hasClass("ghx-open")){b.removeClass("ghx-open").addClass("ghx-closed");GH.EpicView.setTwixieState(a,"closed")}else{if(b.hasClass("ghx-closed")){b.removeClass("ghx-closed").addClass("ghx-open");GH.EpicView.setTwixieState(a,"open")}}};GH.EpicView.toggleEpicDisplayByElementWithAnimation=function(b){var a=b.attr("data-epic-key");var c=b.find(".ghx-expanded");if(b.hasClass("ghx-open")){GH.RapidBoard.Animation.animateHeight(c,160,0).done(function(){b.removeClass("ghx-open").addClass("ghx-closed");GH.EpicView.setTwixieState(a,"closed")})}else{if(b.hasClass("ghx-closed")){b.removeClass("ghx-closed").addClass("ghx-open");GH.RapidBoard.Animation.animateHeight(c,0,160).done(function(){GH.EpicView.setTwixieState(a,"open")})}}};GH.EpicView.initializeInlineEdits=function(){var b=function(e){var f=e.editElement.val();if(!GH.Validation.notBlank(e.editElement,"Epic Name is required")){return false}e.newValue=f;return true};var a=function(e){GH.EpicView.updateEpicLabel(e.epicKey,e.newValue);GH.RapidBoard.Util.InlineEditable.updateView(e)};var d=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var f=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);if(f.fieldName==="epicLabel"){f.maxLength=30}f.epicKey=e.parents(".ghx-classification-item").attr("data-epic-key");return f};var c=function(f){var e=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key");return AJS.$('.ghx-classification-item[data-epic-key="'+e+'"]').find(".js-edit-epicLabel-trigger")};GH.RapidBoard.Util.InlineEditable.register(".js-edit-epic-label",{getViewElement:c,getData:d,validate:b,save:a,renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits})};GH.EpicView.updateEpicLabel=function(e,c){var a=GH.EpicConfig.getEpicLabelFieldId();var g=GH.EpicController.getEpicModel().getEpicList();var d=g.getIssueData(e);var i=d.epicLabel;var b=d.originalEpicLabel;d.epicLabel=c;d.originalEpicLabel=c;g.updateIssue(d);GH.BacklogView.draw();var h=function(){GH.PlanController.reloadDetailView()};var f=function(){d.epicLabel=i;d.originalEpicLabel=b;g.updateIssue(d);GH.EpicView.renderEpics();GH.BacklogView.draw()};GH.EpicController.updateEpicField(e,a,c,h,f)};GH.EpicView.changeEpicColor=function(c){var b=AJS.$(this);var d=b.attr("data-color-id");var a=b.parents(".js-epic-actions-list").attr("data-epic-key");if(d&&a){GH.EpicView.updateEpicColor(a,d)}};GH.EpicView.updateEpicColor=function(c,g){var f=GH.EpicConfig.getEpicColorFieldId();var b=GH.EpicController.getEpicModel().getEpicList();var d=b.getIssueData(c);var e=d.epicColor;d.epicColor=g;b.updateIssue(d);GH.EpicView.renderEpics();GH.BacklogView.draw();var a=function(){GH.PlanController.reloadDetailView()};var h=function(){d.epicColor=e;b.updateIssue(d);GH.EpicView.renderEpics();GH.BacklogView.draw()};GH.EpicController.updateEpicField(c,f,g,a,h)};GH.EpicView.scrollToBottom=function(){var a=AJS.$(".ghx-epic-column .ghx-classification-scrollview");a.scrollTop(a[0].scrollHeight)};GH.EpicView.handleMarkEpicAsDone=function(a){if(!GH.EpicConfig.canMarkEpicAsDone()){return}GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var d=AJS.$(this);var c=d.parents(".js-epic-actions-list").attr("data-epic-key");var k=GH.EpicController.getEpicModel().getEpicList();var b=k.getIssueData(c);var e=b.epicLabel;var j=b.epicStats.notDone;var g=function(){GH.EpicController.updateEpicAsDone(c)};var f="Mark as Done";var h=GH.tpl.epic.renderMarkEpicAsDoneDialog({epicName:AJS.escapeHTML(String(e)),epicKey:c,numIncompleteIssues:j,rapidView:GH.RapidBoard.State.getRapidViewId()});var i=GH.ConfirmDialog.create("ghx-mark-epic-done-dialog",{width:450,header:f,content:h,contentEscaping:false,onConfirmFn:g});i.show();i.updateHeight()};GH.EpicView.showEpicMarkedAsDoneMessage=function(){GH.Notification.showSuccess("Epic has been marked as Done")};GH.EpicView.setFilteredStyle=function(a){var c=AJS.$("#ghx-epic-column");var b=c.find(".ghx-classification-item").removeClass("ghx-filtered");b.each(function(d,f){var e=AJS.$(f);if(_.contains(a,e.attr("data-epic-key"))){e.addClass("ghx-filtered")}})};GH.EpicView.clearFilteredStyle=function(){var a=AJS.$("#ghx-epic-column");a.find(".ghx-classification-item").removeClass("ghx-filtered")};GH.EpicView.showEpicPagesUpdatedMessage=function(c,a,b){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:b.options.issueMsg,issueId:c,issueKey:a})};GH.EpicView.renderNewEpics=function(b){var a=AJS.$("#ghx-epic-column");_.each(b,function(d){var c=a.find('.ghx-classification-item[data-epic-key="'+d.issueKey+'"]');if(!c.hasClass("ghx-open")){GH.EpicView.toggleEpicDisplayByElement(c)}GH.RapidBoard.Animation.animateHeight(c,0,200,GH.RapidBoard.Animation.LONG_DURATION)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.soy' */
// This file was automatically generated from EpicView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epic.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epic == 'undefined') { GH.tpl.epic = {}; }


GH.tpl.epic.renderShell = function(opt_data, opt_ignored) {
  return '' + GH.tpl.epic.renderEpicPanel(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.epic.renderShell.soyTemplateName = 'GH.tpl.epic.renderShell';
}


GH.tpl.epic.renderEpicPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-epic'], text: "Create epic"}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-epic-toggle" title="' + soy.$$escapeHtml("Hide epics panel") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml("Epics") + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPanel.soyTemplateName = 'GH.tpl.epic.renderEpicPanel';
}


GH.tpl.epic.renderEpics = function(opt_data, opt_ignored) {
  var output = GH.tpl.epic.renderAllEpics(opt_data) + '<div class="ghx-classification-cards">';
  var epicKeyList22 = opt_data.epicKeys;
  var epicKeyListLen22 = epicKeyList22.length;
  for (var epicKeyIndex22 = 0; epicKeyIndex22 < epicKeyListLen22; epicKeyIndex22++) {
    var epicKeyData22 = epicKeyList22[epicKeyIndex22];
    output += GH.tpl.epic.renderEpic({issue: opt_data.epics[epicKeyData22], isEpicExpanded: opt_data.isEpicExpandedByKey[epicKeyData22], isEpicSelected: opt_data.selectedEpicKey == epicKeyData22, canEditEpics: opt_data.canEditEpics, canMarkAsDone: opt_data.canMarkAsDone, canCreateIssue: opt_data.canCreateIssue, colors: opt_data.colors, showPages: opt_data.showPages});
  }
  output += '</div>' + ((opt_data.epicKeys.length > 0) ? GH.tpl.epic.renderEpicPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpics.soyTemplateName = 'GH.tpl.epic.renderEpics';
}


GH.tpl.epic.renderEpic = function(opt_data, opt_ignored) {
  return '<div class="js-sortable ghx-classification-item' + ((opt_data.isEpicExpanded) ? ' ghx-open' : ' ghx-closed') + ((opt_data.isEpicSelected) ? ' ghx-selected' : '') + '" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" ><div class="ghx-inner"><div class="ghx-expander js-epic-details-toggle" title="' + soy.$$escapeHtml("Hide/show epic information") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'epicLabel', fieldValue: opt_data.issue.originalEpicLabel, displayValue: opt_data.issue.epicLabel}) + '</span><span id="dd-trigger-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-swatch js-epic-actions ' + soy.$$escapeHtml(opt_data.issue.epicColor) + '"></span></h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="aui-list ghx-href-fix-list js-epic-actions-list" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + ((opt_data.canEditEpics) ? '<h5>' + soy.$$escapeHtml("Color") + '</h5><ul class="aui-list-section aui-first"><li class="aui-list-item ghx-epic-palette">' + GH.tpl.epic.renderEpicPalette(opt_data) + '</li></ul>' : '') + '<ul class="aui-list-section aui-last">' + ((opt_data.canEditEpics) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-epic-label">' + soy.$$escapeHtml("Edit name") + '</a></li>' : '') + '<li class="aui-list-item">' + GH.tpl.epic.renderEpicIssueLink({issueKey: opt_data.issue.key}) + '</li>' + ((opt_data.canEditEpics && opt_data.canMarkAsDone) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-mark-epic-done">' + soy.$$escapeHtml("Mark as Done") + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary"><a role="button" class="js-epic-key-link" title="' + soy.$$escapeHtml("View epic details") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> ' + soy.$$escapeHtml(opt_data.issue.summary) + '</div><div class="aui-group js-epic-issues-count"><div class="aui-item">' + soy.$$escapeHtml("Issues") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Completed") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.done}) + '</div></div>' + ((! opt_data.issue.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.issue.epicStats.estimateStatisticName}, text: opt_data.issue.epicStats.estimateTotal}) + '</div></div><div class="aui-group">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraAttributes: {title: "Create and assign an issue to this epic"}, extraClasses: ['aui-button-link', 'js-create-epic-issue'], text: "Create issue in epic"}) : '') + ((opt_data.showPages) ? '<div>' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.issue.linkedPagesCount, title: "Create and view pages linked to this epic"}) + '</div>' : '') + '</div></div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format("{0} ({1} {2} {3} {4})",AJS.format("{0}% of {1} done",opt_data.issue.epicStats.percentageCompleted,opt_data.issue.epicStats.isIssueCountStatistic ? "issues" : "estimated work"),opt_data.issue.epicStats.estimateDone,"of",opt_data.issue.epicStats.estimateTotal,opt_data.issue.epicStats.isIssueCountStatistic ? '' : opt_data.issue.epicStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.issue.epicStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpic.soyTemplateName = 'GH.tpl.epic.renderEpic';
}


GH.tpl.epic.renderAllEpics = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all ' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml("All issues") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderAllEpics.soyTemplateName = 'GH.tpl.epic.renderAllEpics';
}


GH.tpl.epic.renderEpicPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-epic-key="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml("Issues without epics") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPending.soyTemplateName = 'GH.tpl.epic.renderEpicPending';
}


GH.tpl.epic.renderEpicIssueLink = function(opt_data, opt_ignored) {
  return '<a role="button" class="aui-list-item-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml("View epic details") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicIssueLink.soyTemplateName = 'GH.tpl.epic.renderEpicIssueLink';
}


GH.tpl.epic.renderEpicPalette = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-swatches">';
  var colorList173 = opt_data.colors;
  var colorListLen173 = colorList173.length;
  for (var colorIndex173 = 0; colorIndex173 < colorListLen173; colorIndex173++) {
    var colorData173 = colorList173[colorIndex173];
    output += '<li class="ghx-swatch js-change-epic-color ' + soy.$$escapeHtml(colorData173) + '" data-color-id="' + soy.$$escapeHtml(colorData173) + '">e</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPalette.soyTemplateName = 'GH.tpl.epic.renderEpicPalette';
}


GH.tpl.epic.renderMarkEpicAsDoneDialog = function(opt_data, opt_ignored) {
  return ((opt_data.numIncompleteIssues > 0) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'warning', icon: true, messageHtml: true, message: '' + soy.$$escapeHtml(AJS.format("{0,choice,1#1 issue is|1\x3c{0,number} issues are} not yet completed in this epic",opt_data.numIncompleteIssues))}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("The epic {0}{1}{2} will be marked as Done. It will no longer be displayed in the Epics panel of the Backlog, but can be viewed in the {3}Epic Report{4}.",'<b>',opt_data.epicName,'</b>','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView + '&view=reporting&chart=epicReport&epic=' + opt_data.epicKey + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderMarkEpicAsDoneDialog.soyTemplateName = 'GH.tpl.epic.renderMarkEpicAsDoneDialog';
}


GH.tpl.epic.getEpicNameString = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$escapeHtml(opt_data.epicLabel) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameString.soyTemplateName = 'GH.tpl.epic.getEpicNameString';
}


GH.tpl.epic.getEpicNameStringNoAutoescape = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$filterNoAutoescape(opt_data.epicLabel) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameStringNoAutoescape.soyTemplateName = 'GH.tpl.epic.getEpicNameStringNoAutoescape';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicQuickCreate.js' */
GH.EpicQuickCreate={};GH.EpicQuickCreate.quickCreateReset=true;GH.EpicQuickCreate.createModel=function(){GH.EpicQuickCreate.Model=JIRA.Forms.CreateIssueModel.extend({getActiveFieldIds:function(){var a=this,b=jQuery.Deferred(),d=[];var c=[];c.push("summary");c.push(GH.EpicConfig.getEpicLabelFieldId());jQuery.each(c,function(f,e){d.push(e)});a.getRequiredFields().done(function(e){jQuery.each(e,function(g,f){if(jQuery.inArray(f.id,d)===-1){d.push(f.id)}});b.resolve(d)});return b.promise()},getUseConfigurableForm:function(){var a=jQuery.Deferred();a.resolve(true);return a.promise()},setUseConfigurableForm:function(){}})};GH.EpicQuickCreate.resetQuickCreate=function(){if(!GH.EpicQuickCreate.quickCreateReset){GH.EpicQuickCreate.quickCreateReset=true;GH.EpicQuickCreate.storeQuickCreateDefaults(GH.EpicQuickCreate.createFormPreferences)}};GH.EpicQuickCreate.rememberQuickCreateDefaults=function(){if(GH.EpicQuickCreate.quickCreateReset){GH.EpicQuickCreate.quickCreateReset=false;var a=function(b){GH.EpicQuickCreate.createFormPreferences=b};GH.EpicQuickCreate.loadQuickCreateDefaults().done(a)}};GH.EpicQuickCreate.storeQuickCreateDefaults=function(a){return GH.Ajax.put({url:"/userData/quickEditDefaults",data:a})};GH.EpicQuickCreate.loadQuickCreateDefaults=function(){return GH.Ajax.get({url:"/userData/quickEditDefaults"},"quickEditDefaults")};GH.EpicQuickCreate.createCreateEpicForm=function(a){a=a||{};return new JIRA.Forms.Container(function(){a.globalEventNamespaces=a.globalEventNamespaces||["QuickCreateEpic"];var e=AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),b=new GH.EpicQuickCreate.Model({projectId:a.pid,issueType:a.issueType}),d=new JIRA.Forms.ConfigurableCreateIssueForm({model:b,title:e,globalEventNamespaces:a.globalEventNamespaces}),c=new JIRA.Forms.UnconfigurableCreateIssueForm({model:b,title:e,globalEventNamespaces:a.globalEventNamespaces});return{globalEventNamespaces:a.globalEventNamespaces,model:b,errorHandler:new JIRA.Forms.CreateIssueError(),configurableForm:d,unconfigurableForm:c}})};AJS.$(GH).bind("issueCreated",function(b,c){var a=function(d){GH.UserData.quickCreateDefaultIssueTypeId=d.issueTypeId};GH.EpicQuickCreate.loadQuickCreateDefaults().done(a)});GH.EpicQuickCreate.createCreateStoryForm=function(){var a=GH.UserData.quickCreateDefaultIssueTypeId;if(a===GH.EpicConfig.getEpicIssueTypeId()){a=GH.EpicConfig.getStoryIssueTypeId()}return JIRA.Forms.createCreateIssueForm({issueType:a})};GH.EpicQuickCreate.registerCreateEpicDialog=function(){if(JIRA&&JIRA.Forms&&JIRA.Forms.CreateIssueModel){GH.EpicQuickCreate.createModel();var a=AJS.$("#ghx-epic-column");a.find(".js-create-epic").each(function(){var c=GH.EpicQuickCreate.createCreateEpicForm({issueType:GH.EpicConfig.getEpicIssueTypeId()});var b=c.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),trigger:this,id:"create-epic-issue-dialog"});b.bind("Dialog.show",GH.EpicQuickCreate.rememberQuickCreateDefaults);b.bind("Dialog.hide",GH.EpicQuickCreate.resetQuickCreate)})}else{GH.log("Tried to initialise Epic Quick Create but JIRA CreateIssueModel was not loaded")}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkSelectionController.js' */
GH.WorkSelectionController={};GH.WorkSelectionController.OPT_NO_SCROLL={scrollToView:false};GH.WorkSelectionController.selectionDataModel={};GH.WorkSelectionController.selectionManager=undefined;GH.WorkSelectionController.init=function(){GH.WorkSelectionController.initSelectionManager();AJS.$(document).delegate("#ghx-pool .js-issue","click",GH.WorkSelectionController.handleIssueClick);AJS.$(document).delegate("#ghx-pool .js-issue","focus",GH.WorkSelectionController.handleFocus);AJS.$(document).delegate("#ghx-pool .js-issue","contextmenu",GH.WorkSelectionController.handleIssueContextMenu);AJS.$(document).delegate(".ghx-swimlane-header","click",GH.WorkSelectionController.handleSwimlaneClick);AJS.$(document).delegate(".ghx-swimlane-header","focus",GH.WorkSelectionController.handleFocus);AJS.$(document).delegate(".ghx-swimlane-header","contextmenu",GH.WorkSelectionController.handleSwimlaneContextMenu)};GH.WorkSelectionController.initSelectionManager=function(){GH.WorkSelectionController.selectionDataModel={isIssueValid:function(a){return GH.GridDataController.getModel().isIssueValid(a)},getIssueIndex:function(a){return GH.GridDataController.getModel().getIssueIndexByKey(a)},canAddToSelection:function(b,a){return GH.WorkSelectionController.canAddToSelection(b,a)},getIssueRange:function(b,a){return GH.RankingModel.getRankableIssuesRange(b,a)}};GH.WorkSelectionController.selectionManager=new GH.IssueSelectionManager(GH.WorkSelectionController.selectionDataModel,"work.selectedIssues")};GH.WorkSelectionController.validateCurrentSelection=function validateCurrentSelection(){var a=GH.WorkSelectionController.selectionManager.validateCurrentSelection();if(a){if(!GH.WorkSelectionController.selectionManager.hasSelection()&&GH.WorkController.isDetailsViewOpened()){GH.RapidBoard.State.setWorkViewDetailsViewOpened(false)}GH.RapidBoard.State.replaceState();GH.WorkSelectionController.updateUIAndState()}};GH.WorkSelectionController.gotoIssue=function(a){if(!a){return}var b=GH.WorkSelectionController.getSelectedIssueKey();if(a!=b){GH.WorkSelectionController.selectIssue(a)}else{var c=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+a+'"]');if(c.length===0){c=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+a+"']")}if(c.length!==0){GH.WorkSelectionController._scrollToView(c)}}};GH.WorkSelectionController.focusOnIssue=function(a){var b=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+a+'"]');if(b.length===0){b=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+a+"']")}if(b.length!==0){b.focus()}};GH.WorkSelectionController.selectIssue=function(a,c){var b={pushState:true,scrollToView:true};c=_.extend(b,c);GH.WorkSelectionController.selectionManager.selectIssue(a);if(c.pushState){GH.RapidBoard.State.pushState()}if(!c.dontUpdateUI){GH.WorkSelectionController._updateSelectionUI(c.scrollToView?a:null)}};GH.WorkSelectionController.handleSwimlaneClick=function(e){if(AJS.$(e.target).parents().andSelf().is(".js-expander")){return}var a=GH.WorkSelectionController.getIssueKey(AJS.$(this));if(a){GH.WorkSelectionController.handleIssueClick.call(this,e)}else{var c=parseInt(AJS.$(this).attr("data-swimlane-id"),10);var b=GH.GridDataController.getModel();var f=b.getSwimlaneById(c);var d=b.getColumns();_.find(d,function(g){a=b.getIssueKeyForColumnAtIndex(f.id,g.id,0);return !!a});if(a){GH.WorkSelectionController.selectIssue(a)}}};GH.WorkSelectionController.handleIssueClick=function(c){var a=GH.WorkSelectionController.getIssueKey(AJS.$(this));var b=AJS.$(c.target).hasClass("js-key-link");var d=!GH.MouseUtils.openInSameTab(c);if(b&&d){return true}c.preventDefault();GH.WorkSelectionController.handleIssueSelectionEvent(c,a,true)};GH.WorkSelectionController.handleSwimlaneContextMenu=function(c){var a=AJS.$(c.target).closest(".ghx-swimlane-header").attr("data-issue-key");if(a){var b=GH.WorkSelectionController.isInSelection(a);if(!b){GH.WorkSelectionController.handleSwimlaneClick.call(this,c)}GH.WorkContextMenuController.showContextMenuAt(c,{swimlane:true})}};GH.WorkSelectionController.handleIssueContextMenu=function(c){var a=GH.WorkSelectionController.getIssueKey(AJS.$(this));var b=GH.WorkSelectionController.isInSelection(a);if(!b){GH.WorkSelectionController.selectIssue(a)}GH.WorkContextMenuController.showContextMenuAt(c,{})};GH.WorkSelectionController.handleIssueSelectionEvent=function(f,c,b){var a=GH.MouseUtils.getMetaKeys(f);var e=GH.WorkSelectionController.selectionManager.handleIssueClick(a,c);var d=GH.IssueSelectionManager.getMultiSelectType(a);if(d){b=false}if(e){GH.WorkSelectionController._updateSelectionUI(c);if(b&&GH.WorkSelectionController.selectionManager.hasSelection()&&!GH.WorkController.isDetailsViewOpened()){GH.WorkController.openDetailsView(c)}else{GH.RapidBoard.State.pushState()}}};GH.WorkSelectionController.handleFocus=function(c){var a=GH.WorkSelectionController.getIssueKey(AJS.$(this));var b=GH.WorkSelectionController.isInSelection(a);if(!b){GH.WorkSelectionController.handleIssueSelectionEvent(c,a,false)}};GH.WorkSelectionController.updateUIAndState=function(){GH.WorkSelectionController._updateSelectionUI();GH.RapidBoard.State.pushState()};GH.WorkSelectionController._updateSelectionUI=function(c){var d=null;AJS.$(".js-issue, .ghx-swimlane-header, #ghx-swimname").removeClass("ghx-selected ghx-selected-primary").each(function(g,h){var f=AJS.$(h);var e=f.attr("data-issue-key");if(!e){return}if(GH.WorkSelectionController.isInSelection(e)){f.addClass("ghx-selected");if(e==b){f.addClass("ghx-selected-primary")}}if(c!=null&&e==c){d=f}});if(d&&!d.hasClass("ghx-swimlane-header")){GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(c)}if(d){GH.WorkSelectionController._scrollToView(d)}var a=GH.WorkSelectionController.getSelectedIssueKey();var b=GH.GridDataController.getModel().isIssueValid(a)?a:undefined;GH.log("issueSelected triggered",GH.Logger.Contexts.ui);AJS.$(GH).trigger("issueSelected",b)};GH.WorkSelectionController._scrollToView=function(e){var b=AJS.$("#ghx-pool");var d=AJS.$("#ghx-column-header-group");var c=d[0].getBoundingClientRect();var a=b[0].getBoundingClientRect();var f=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(b,{top:c.bottom,bottom:a.bottom},f)};GH.WorkSelectionController.ensureIssueSelected=function(b,a){if(!GH.WorkSelectionController.selectionManager.isInSelection(a)){if(GH.WorkSelectionController.canAddToSelection(GH.WorkSelectionController.getSelectedIssueKeys(),a)){GH.WorkSelectionController.handleIssueSelectionEvent(b,a)}else{GH.WorkSelectionController.selectIssue(a,GH.WorkSelectionController.OPT_NO_SCROLL)}}};GH.WorkSelectionController.getSelectedIssueKeys=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKeys()};GH.WorkSelectionController.getSelectedIssueKey=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKey()};GH.WorkSelectionController.isInSelection=function(a){return GH.WorkSelectionController.selectionManager.isInSelection(a)};GH.WorkSelectionController.setIssueFromUrlState=function(a){GH.WorkSelectionController.selectionManager.selectIssue(a)};GH.WorkSelectionController.getSelectedIssuesInOrder=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssuesInOrder()};GH.WorkSelectionController.canAddToSelection=function(c,a){if(_.isEmpty(c)){return true}var b=_.first(c);return GH.RankingModel.canIssuesBeRankedTogether(b,a)};GH.WorkSelectionController.getIssueId=function(a){return a.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-id")};GH.WorkSelectionController.getIssueKey=function(a){return a.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-key")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/BoardHeader.js' */
GH.RapidBoard.BoardHeader={};GH.RapidBoard.BoardHeader.init=function(){GH.RapidBoard.BoardHeader._originalPageTitle=document.title};GH.RapidBoard.BoardHeader.update=function(a){GH.RapidBoard.BoardHeader.updateHeader(a);GH.RapidBoard.BoardHeader.updatePageTitle(a)};GH.RapidBoard.BoardHeader.updateHeader=function(d){if(!d.id&&!d.invalidView){AJS.$("#ghx-view-selector").html(GH.tpl.boardheader.renderSimpleHeader({name:"No boards are currently available."}))}else{var c=!!d.id;var b=c?d.name:"Boards";var a=c?d.id:false;AJS.$("#ghx-view-selector").html(GH.tpl.boardheader.renderBoardHeader({name:b,viewId:a}))}};GH.RapidBoard.BoardHeader.updatePageTitle=function(a){if(a&&a.name){document.title=a.name+" - "+GH.RapidBoard.BoardHeader._originalPageTitle}else{document.title=GH.RapidBoard.BoardHeader._originalPageTitle}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/BoardHeader.soy' */
// This file was automatically generated from BoardHeader.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.boardheader.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.boardheader == 'undefined') { GH.tpl.boardheader = {}; }


GH.tpl.boardheader.renderSimpleHeader = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.boardheader.renderSimpleHeader.soyTemplateName = 'GH.tpl.boardheader.renderSimpleHeader';
}


GH.tpl.boardheader.renderBoardHeader = function(opt_data, opt_ignored) {
  return '<h2 id="ghx-board-name" ' + ((opt_data.viewId) ? 'data-view-id="' + soy.$$escapeHtml(opt_data.viewId) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.boardheader.renderBoardHeader.soyTemplateName = 'GH.tpl.boardheader.renderBoardHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.js' */
GH.RapidBoard.ViewController=new GH.Events();(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.ViewController.analytics=new a("gh.assignedWork.tooltip")})();GH.RapidBoard.ViewController.hasSideBar=false;GH.RapidBoard.ViewController.hasSubnavigator=false;GH.RapidBoard.ViewController.shouldShowSubnavigator=function(){return GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.hasSubnavigator};GH.RapidBoard.ViewController.init=function(){GH.RapidBoard.ViewController.hasSideBar=AJS.sidebar&&AJS.Meta.get("sidebar-enabled");GH.RapidBoard.ViewController.hasSubnavigator=JIRA.Projects&&typeof JIRA.Projects.Subnavigator==="function";GH.Dialog.registerDialog(".js-view-find",GH.Dialog.FindView.openFindExistingViewDialog);AJS.$("#ghx-rabid,#ghx-view-modes,#ghx-notify").css({display:"none"});AJS.$("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar());GH.Tooltip.tipsify({selector:".ghx-avatar-img[data-tooltip]",context:document,html:true,className:"ghx-tipsy-left ghx-avatar-tipsy"}).on("show",function(c){if(c.$element.closest(".ghx-assigned-work-stats").length){GH.RapidBoard.ViewController.analytics.trigger("show")}});var b=GH.Tooltip.tipsify({selector:".js-issue:not(.ui-sortable-helper) .ghx-extra-field",context:document,html:true,className:"ghx-extra-field-tipsy ghx-tipsy-left"});b.on("show",a);function a(d){var c=d.$tip;var f=c.children(".tipsy-inner").get(0);if(f.scrollHeight>f.clientHeight){c.addClass("ghx-extra-field-tipsy-truncated")}}GH.RapidBoard.ViewController.sidebarController=new GH.RapidBoard.SidebarController();GH.RapidBoard.ViewController.initModes(GH.RapidBoard.ViewController.hasSideBar);AJS.$(GH).bind(GH.RapidBoard.UrlState.HISTORY_CHANGED,GH.RapidBoard.ViewController.updateModeUrls);GH.IssueOperationShortcuts.init();GH.DetailsView.init();GH.PresentationMode.init();AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.RapidBoard.ViewController.handleResizeEvent);AJS.$(document).on("aui-message-close",GH.RapidBoard.ViewController.handleResizeEvent);AJS.$(window).on("confluence.header-resized",GH.RapidBoard.ViewController.handleResizeEvent);GH.RapidBoard.ViewController.handleResizeEvent();AJS.$(document).on("click",".manage-sprint-permission-help",function(c){c.preventDefault();window.open({"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Managing+project+permissions","isLocal":false}.url,"_blank")})};GH.RapidBoard.ViewController.initModes=function(a){if(!a){AJS.$("#ghx-view-modes").html(GH.tpl.viewcontroller.renderModes());GH.Tooltip.tipsify({selector:"#plan-toggle"});GH.Tooltip.tipsify({selector:"#work-toggle"});GH.Tooltip.tipsify({selector:"#report-toggle"});AJS.$("#plan-toggle,#work-toggle,#report-toggle").bind("click",function(b){if(!GH.MouseUtils.openInSameTab(b)){return}b.preventDefault();if(AJS.$(this).is(":disabled")){return}if(AJS.$(this).hasClass("active")){return}var d=AJS.$(this).attr("id");var c=d.substring(0,d.length-"-toggle".length);GH.RapidBoard.ViewController.setMode(c)})}else{GH.RapidBoard.ViewController.sidebarController.interceptSidebarItems();GH.RapidBoard.ViewController.sidebarController.reactToSidebarSizeChange()}};GH.RapidBoard.ViewController.update=function(a){GH.Notification.clear();GH.SprintRetrospectiveView.clearDialog();if(a.invalidView){GH.RapidBoard.ViewController.showInvalidViewError();AJS.$("#ghx-rabid,#ghx-view-modes").css({display:"none"});AJS.$("#ghx-notify").css({display:""})}else{if(a.id){GH.RapidBoard.ViewController.showRapidView(a);AJS.$("#ghx-rabid,#ghx-view-modes").css({display:""});AJS.$("#ghx-notify").css({display:"none"}).empty()}else{GH.RapidBoard.ViewController.welcome();AJS.$("#ghx-rabid,#ghx-view-modes").css({display:"none"});AJS.$("#ghx-notify").css({display:""})}}};GH.RapidBoard.ViewController.showInvalidViewError=function(){var a=[{message:"The requested board cannot be viewed because it either does not exist or you do not have permission to view it."}];if(GH.UserData.hasUser()){a.push({message:AJS.format("Select an existing board from the board dropdown, {0}search for an existing board{1} or {2}create a new board{3}.",'<a class="js-view-find">',"</a>",'<a class="js-view-action-create">',"</a>")})}else{a.push({message:AJS.format("This board may be visible if you {0}log in{1}.",'<a href="'+GH.Navigation.getLoginUrl()+'">',"</a>")})}AJS.$("#ghx-notify").html(GH.tpl.viewcontroller.renderErrors({errors:a}))};GH.RapidBoard.ViewController.welcome=function(){if(GH.UserData.hasUser()){AJS.$("#ghx-notify").html(GH.tpl.board.x.renderNoViews({}))}else{AJS.$("#ghx-notify").html(GH.tpl.board.x.renderNoViewsAnonymous({loginUrl:GH.Navigation.getLoginUrl()}))}};GH.RapidBoard.ViewController.showRapidView=function(a){AJS.$("#ghx-errors").empty();GH.RapidBoard.ViewController.updateModeUrls();GH.RapidBoard.ViewController.updateTabSelector(a);GH.PlanController.setRapidView(a);GH.WorkController.setRapidView(a);GH.ReportController.setRapidView(a);GH.RapidBoard.ViewController.setMode(GH.RapidBoard.ViewController.getMode(),true);GH.PersistentMessages.WelcomeMessage.renderMessage();GH.PersistentMessages.CreateViewMessage.renderMessage()};GH.RapidBoard.ViewController.validModes={plan:true,work:true,report:true};GH.RapidBoard.ViewController.displayedMode=undefined;GH.RapidBoard.ViewController.planModeEnabled=false;GH.RapidBoard.ViewController.updateTabSelector=function(b){var a=b.sprintSupportEnabled;var c=GH.RapidBoard.ViewController.getTabLabels(a);AJS.$("#plan-toggle").attr({"data-tooltip":c.plan.tooltip,disabled:!a}).text(c.plan.label);AJS.$("#work-toggle").attr({"data-tooltip":c.work.tooltip}).text(c.work.label);GH.RapidBoard.ViewController.planModeEnabled=a};GH.RapidBoard.ViewController.getTabLabels=function(a){return{plan:{label:a?"Backlog":"Backlog",tooltip:a?"Backlog ( 1 )":"The Backlog is not currently available on Kanban boards"},work:{label:a?"Active sprints":"Kanban board",tooltip:a?"Active sprints ( 2 )":"Kanban Board ( 2 )"}}};GH.RapidBoard.ViewController.getMode=function(){return GH.RapidBoard.State.getMode()};GH.RapidBoard.ViewController.setMode=function setMode(b,a){a=!!a;GH.SprintRetrospectiveView.clearDialog();if(!GH.RapidBoard.ViewController.validModes[b]){return}if(!GH.RapidBoard.ViewController.planModeEnabled){if(b==="plan"){b="work"}}if(GH.RapidBoard.ViewController.displayedMode!==b){GH.RapidBoard.ViewController.trigger("before:navigate",{mode:b});GH.RapidBoard.State.setMode(b);GH.RapidBoard.ViewController.updateSelector();GH.Notification.clearBoardUpdatedMessage();GH.LinkedPagesController.hideCurrentDialog();if(GH.RapidBoard.ViewController.hasSideBar){GH.RapidBoard.ViewController.sidebarController.setSidebarState(b);if(!a){GH.RapidBoard.ViewController.sidebarController.updateBadges()}}switch(b){case"plan":GH.PlanController.init();GH.WorkController.hide();GH.ReportController.hide();AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide();AJS.$("#ghx-report,#ghx-controls-report").hide();AJS.$("#ghx-plan,#ghx-controls-plan").show();GH.PlanController.show();break;case"report":GH.ReportController.init();GH.PlanController.hide();GH.WorkController.hide();AJS.$("#ghx-plan,#ghx-controls-plan").hide();AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide();AJS.$("#ghx-report,#ghx-controls-report").show();GH.ReportController.show();break;case"work":default:GH.WorkController.init();GH.PlanController.hide();GH.ReportController.hide();AJS.$("#ghx-plan,#ghx-controls-plan").hide();AJS.$("#ghx-report,#ghx-controls-report").hide();AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").show();GH.WorkController.show();break}if(a){GH.RapidBoard.State.replaceState()}else{GH.RapidBoard.State.pushState()}}};GH.RapidBoard.ViewController.preload=function(a){switch(GH.RapidBoard.ViewController.getMode()){case"plan":break;case"report":break;default:GH.WorkController.preload(a);break}};GH.RapidBoard.ViewController.updateSelector=function(){AJS.$(".js-mode-selector .aui-button").removeClass("active");var a=GH.RapidBoard.State.getMode();AJS.$("#"+a+"-toggle").addClass("active")};GH.RapidBoard.ViewController.viewByMode={work:"detail",plan:"planning",report:"reporting"};GH.RapidBoard.ViewController.updateModeUrls=function(){var a=GH.RapidBoard.State.getRapidViewId();_.forEach(GH.RapidBoard.ViewController.validModes,function(d,c){var b=GH.RapidBoard.getRapidBoardPageUrl(a,GH.RapidBoard.ViewController.viewByMode[c]);AJS.$("#"+c+"-toggle").attr("href",b)})};GH.RapidBoard.ViewController.updateContentContainer=function(){GH.RapidBoard.ViewController.handleResizeEvent()};GH.RapidBoard.ViewController.handleResizeEvent=function(){GH.RapidBoard.ViewController.updateContentAreaHeight();GH.PlanView.updateFixedElementPositioning();GH.WorkView.updateFixedElementPositioning();if(GH.RapidBoard.ViewController.hasSideBar){AJS.sidebar(".aui-sidebar").reflow()}};GH.RapidBoard.ViewController.updateContentAreaHeight=function(){var b=GH.RapidBoard.ViewController.contentContainers();if(b.size()){var a=GH.Layout.getWindowHeight()-2;var c=b.offset();if(c&&c.top){a-=c.top}b.css({height:a})}};GH.RapidBoard.ViewController.contentContainers=function(){var a=AJS.$("#ghx-work, #ghx-plan, #ghx-report, #ghx-plan-group");return a.filter(function(){return this.style.display!=="none"})};GH.RapidBoard.ViewController.collectPrintablePlanIssues=function(){return GH.PlanController.collectPrintableIssues()};GH.RapidBoard.ViewController.collectPrintableWorkIssues=function(){return GH.WorkController.collectPrintableIssues()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/SidebarController.js' */
GH.RapidBoard.SidebarController=(function(i,b){function f(){}var a={"com.pyxis.greenhopper.jira:project-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:global-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:global-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:global-sidebar-report":"report","com.atlassian.jira.jira-projects-plugin:report-page":"report"};var g={plan:["com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum"],work:["com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban"],report:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report"]};function e(j){return j.find("a.aui-nav-item").attr("href").indexOf("RapidBoard.jspa")>-1}function d(k,j){switch(k){case"plan":case"work":return true;case"report":return e(j);default:return false}}function h(){return JIRA.API&&JIRA.API.Sidebar}function c(){return JIRA.Projects&&JIRA.Projects.Sidebar&&JIRA.Projects.Sidebar.FeatureDiscovery}f.prototype={constructor:f,interceptSidebarItems:function(){if(!h()){return}var j=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel");if(!j){return}j.on("before:navigate",function(k){var l=a[k.emitter.id];if(d(l,k.emitter.$el)){b.setMode(l);k.preventDefault()}})},setSidebarState:function(l){if(!h()){return}var j=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel");if(!j){return}var k=g[l];if(!k){return}i.any(k,function(n){var m=j.getItem(n);if(m){m.select();return true}})},reactToSidebarSizeChange:function(){if(!h()){return}var j=JIRA.API.Sidebar.getAUISidebar();j.on("collapse-end expand-end",function(){GH.Layout.fireDelayedWindowResize()})},updateBadges:function(){if(!h()||!c()){return}JIRA.Projects.Sidebar.FeatureDiscovery.updateBadges()}};return f}(_,GH.RapidBoard.ViewController));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.soy' */
// This file was automatically generated from ViewController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewcontroller == 'undefined') { GH.tpl.viewcontroller = {}; }


GH.tpl.viewcontroller.renderModes = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({id: 'ghx-modes', extraClasses: ['ghx-modes', 'js-mode-selector'], content: '' + aui.buttons.button({id: 'plan-toggle', tagName: 'a', text: "Backlog", extraAttributes: {'data-tooltip': "Backlog ( 1 )"}}) + aui.buttons.button({id: 'work-toggle', tagName: 'a', text: "Active sprints", extraAttributes: {'data-tooltip': "Active sprints ( 2 )"}}) + aui.buttons.button({id: 'report-toggle', tagName: 'a', text: "Reports", extraAttributes: {'data-tooltip': "Reports ( 3 )"}})});
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderModes.soyTemplateName = 'GH.tpl.viewcontroller.renderModes';
}


GH.tpl.viewcontroller.renderOperationsBar = function(opt_data, opt_ignored) {
  return '<div id="ghx-controls"><div id="ghx-controls-plan" class="ghx-controls-plan ghx-controls-list"></div><div id="ghx-controls-work" class="ghx-controls-work ghx-controls-list"></div><div id="ghx-controls-report" class="ghx-controls-report"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderOperationsBar.soyTemplateName = 'GH.tpl.viewcontroller.renderOperationsBar';
}


GH.tpl.viewcontroller.renderErrors = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message error"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml("There was an error loading this page") + '</strong></p><ul>';
  var errorList28 = opt_data.errors;
  var errorListLen28 = errorList28.length;
  for (var errorIndex28 = 0; errorIndex28 < errorListLen28; errorIndex28++) {
    var errorData28 = errorList28[errorIndex28];
    output += '<li>' + soy.$$filterNoAutoescape(errorData28.message) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderErrors.soyTemplateName = 'GH.tpl.viewcontroller.renderErrors';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataController.js' */
GH.GridDataController={};GH.GridDataController.model=undefined;GH.GridDataController.swimlaneStrategy="custom";GH.GridDataController.statistics={};GH.GridDataController.canRelease=false;GH.GridDataController.hasDataChanged=function(b){var a=GH.GridDataController.calculateGridDataModel(b);if(GH.GridDataController.model){return GH.GridDataController.model.isModelDifferent(a)}else{return true}};GH.GridDataController.setData=function(b){GH.GridDataController.statistics=b.statistics;GH.GridDataController.canRelease=b.issuesData.canRelease;GH.RankingModel.setOrderData(b.orderData);GH.GridDataController.hasBulkChangePermission=b.issuesData.hasBulkChangePermission;var a=GH.GridDataController.calculateGridDataModel(b);GH.GridDataController.model=a};GH.GridDataController.calculateGridDataModel=function(f){var e=GH.GridSwimlanesData.calculateSwimlanesData(f.issuesData,f.swimlanesData);var c=[];var g={};_.each(f.issuesData.issues,function(k){c.push(k.key);g[k.key]=k});_.each(f.issuesData.missingParents,function(k){g[k.key]=k});var a=GH.GridColumnsData.calculateColumnsData(f.issuesData,f.columnsData,f.statistics);var d=a.columns;var j=a.columnIssueMapping;var i={};i.anyColumnBusted=a.anyColumnBusted;var h=[];var b={};_.each(e.swimlanes,function(k){b[k.id]=k.issueKeys;delete k.issueKeys;h.push(k)});i.swimlanesType=e.type;return new GH.GridDataModel(d,j,h,b,g,c,i,f.swimlanesData.swimlaneStrategy)};GH.GridDataController.getStatistics=function(){return GH.GridDataController.statistics};GH.GridDataController.getModel=function(){return GH.GridDataController.model};GH.GridDataController.hasBustedColumns=function(){return GH.GridDataController.model.data.variables.anyColumnBusted};GH.GridDataController.getSwimlanesType=function(){return GH.GridDataController.model.data.variables.swimlanesType};GH.GridDataController.collectPrintableIssues=function(){var b=GH.GridDataController.getModel();var a=[];_.each(b.getSwimlanes(),function(c){_.each(b.getColumns(),function(e){var d=b.getCells()[c.id][e.id];if(d){a.push.apply(a,d)}})});return _.map(a,function(c){return b.getIssues()[c]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/RankingModel.js' */
GH.RankingModel={};GH.RankingModel.orderData={rankable:false,rankCustomFieldId:undefined};GH.RankingModel.setOrderData=function(a){GH.RankingModel.orderData=a};GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable};GH.RankingModel.canUserRank=function(){if(!GH.RankingModel.orderData.rankable){return false}var a=false;_.each(GH.RankingModel.orderData.canRankPerProject,function(b){a=a||b.canRank});return a};GH.RankingModel.canUserRankIssue=function(a){if(!GH.RankingModel.isRankable()){return false}var b=a.substr(0,a.indexOf("-"));var c=false;_.each(GH.RankingModel.orderData.canRankPerProject,function(d){if(d.projectKey==b){c=d.canRank}});return c};GH.RankingModel.getRankCustomFieldId=function(){return GH.RankingModel.isRankable()?GH.RankingModel.orderData.rankCustomFieldId:null};GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable};GH.RankingModel.getFirstRankableIssueKeyInColumn=function(e){var d=GH.GridDataController.getModel();var a=d._getIssuePositionAndDataByKey(e);if(a.isSwimlane){return false}var c=d.getIssuesDataForCell(a.swimlaneId,a.columnId);var f=!!a.issue.parentKey;var b=_.find(c,function(g){return(!f||GH.RankingModel.canIssuesBeRankedTogether(g.key,e))});if(b){if(!f){return b.parentKey?b.parentKey:b.key}else{return b.key}}return false};GH.RankingModel.getLastRankableIssueKeyInColumn=function(e){var c=GH.GridDataController.getModel();var a=c._getIssuePositionAndDataByKey(e);if(a.isSwimlane){return false}var b=c.getIssuesDataForCell(a.swimlaneId,a.columnId);var f=!!a.issue.parentKey;var d=false;_.each(b,function(g){if(!f){d=g.parentKey?g.parentKey:g.key}else{if(GH.RankingModel.canIssuesBeRankedTogether(g.key,e)){d=g.key}}});return d};GH.RankingModel.canIssuesBeRankedTogether=function(c,b){var a=GH.GridDataController.getModel();var e=a._getIssuePositionAndDataByKey(c);var d=a._getIssuePositionAndDataByKey(b);if(!e||!d){return false}if(e.isSwimlane||d.isSwimlane){return false}if(e.swimlaneId!=d.swimlaneId){return false}if(e.columnId!=d.columnId){return false}if(!e.issue.parentKey&&!d.issue.parentKey){return true}if(e.issue.parentKey==d.issue.parentKey){return true}return false};GH.RankingModel.getRankableIssuesRange=function(a,k){if(!GH.RankingModel.canIssuesBeRankedTogether(a,k)){return[]}var e=GH.GridDataController.getModel();if(a==k){return[a]}var b=e._getIssuePositionAndDataByKey(a);var g=e._getIssuePositionAndDataByKey(k);if(b.isSwimlane||g.isSwimlane){return[]}var l=[];l.push(a);var f=e.getIssuesDataForCell(b.swimlaneId,b.columnId);var j=b.issueIndex;var c=g.issueIndex;var d;var h;if(c>j){for(d=j+1;d<=c;d++){h=f[d];if(GH.RankingModel.canIssuesBeRankedTogether(a,h.key)){l.push(h.key)}}}else{for(d=j-1;d>=c;d--){h=f[d];if(GH.RankingModel.canIssuesBeRankedTogether(a,h.key)){l.push(h.key)}}}return l};GH.RankingModel.getBestFitSelectionAfterRank=function(b){var a=GH.RankingModel.getNextIssueAfterSendToBottom(b);if(!a){a=GH.RankingModel.getPreviousIssueAfterSendToBottom(b)}return a};GH.RankingModel.getNextIssueAfterSendToBottom=function(c){var a=_.last(c);var b=GH.GridDataController.getModel();var d=b.getNextIssueKey(a);if(!d){return false}var f=b.getIssueDataByKey(a);var e=b.getIssueDataByKey(d);if(f.parentKey){return d}while(e.parentKey&&e.parentKey==a){d=b.getNextIssueKey(d);if(!d){return false}e=b.getIssueDataByKey(d)}return d};GH.RankingModel.getPreviousIssueAfterSendToBottom=function(d){var b=_.first(d);var c=GH.GridDataController.getModel();var a=c.getPreviousIssueKey(b);if(!a){return false}var f=c.getIssueDataByKey(b);var e=c.getIssueDataByKey(a);if(f.parentKey){return a}while(e.parentKey){a=c.getPreviousIssueKey(a);if(!a){return false}e=c.getIssueDataByKey(a)}return a};GH.RankingModel.reorderIssues=function(g,j,c){var d=GH.GridDataController.getModel();g=GH.RankingModel.getParentAndChildrenKeys(g);var i;var a=d.getOrder();if(c){i=_.indexOf(a,c)}else{i=_.indexOf(a,j);i++;if(GH.RankingModel.isRankable()){while(i<a.length){var f=d.getIssueDataByKey(a[i]);if(f&&f.parentKey===j){i++}else{break}}}}var b=a.slice(0,i);var h=a.slice(i);b=GH.RankingModel.withoutArray(b,g);h=GH.RankingModel.withoutArray(h,g);var e=_.flatten([b,g,h]);d.updateOrder(e)};GH.RankingModel.getParentAndChildrenKeys=function(b){var c=GH.GridDataController.getModel();var a=c.getOrder();var d=[];_.each(b,function(h){d.push(h);var f=c.getIssueDataByKey(h);if(!f){return}if(f.parentKey){return}var e=_.indexOf(a,h);if(e<0){return}for(var g=e+1;g<a.length;g++){var j=c.getIssueDataByKey(a[g]);if(j.parentKey==f.key){d.push(j.key)}else{break}}});return d};GH.RankingModel.withoutArray=function(d,c){var e=d;_.each(c,function(a){e=_.without(e,a)});return e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataModel.js' */
GH.GridDataModel=function(c,i,g,a,e,b,h,f){var d=this.data={};d.columns=c;d.columnIssueMapping=i;d.swimlanes=g;d.swimlaneIssueMapping=a;d.issues=e;d.order=b;d.variables=h;d.swimlaneStrategy=f;this.buildCache();this.preprocessIssues()};GH.GridDataModel.prototype.isModelDifferent=function(a){if(!_.isEqual(this.data.order,a.data.order)){GH.log("GridDataModel comparison: The order differs");return true}if(!_.isEqual(this.data.issues,a.data.issues)){GH.log("GridDataModel comparison: The issues details differ");return true}if(!_.isEqual(this.data.swimlaneIssueMapping,a.data.swimlaneIssueMapping)){GH.log("GridDataModel comparison: The swimlanes differ");return true}if(!_.isEqual(this.data.columnIssueMapping,a.data.columnIssueMapping)){GH.log("GridDataModel comparison: The columns differ");return true}GH.log("GridDataModel comparison: Everything is equal");return false};GH.GridDataModel.prototype.buildCache=function(){var c=this.data;var b=this.cache={};b.bySwimlaneThenColumn=[];var a=this;_.each(c.swimlanes,function(d){var e=c.swimlaneIssueMapping[d.id];b.bySwimlaneThenColumn[d.id]=[];_.each(c.columns,function(h){var g=c.columnIssueMapping[h.id];var f=a.fastIntersect(g,e);f=a.fastIntersect(c.order,f);b.bySwimlaneThenColumn[d.id][h.id]=f})})};GH.GridDataModel.prototype.fastIntersect=function(l,k){var e=l.length;var c=k.length;var h=l.slice(0).sort();var o=k.slice(0).sort();var n=[];var d=0,g=0;while(d<e&&g<c){var m=h[d];var j=o.indexOf(m,g);if(j>-1){n.push(m);g=j+1}d++}var p=[];for(var f=0;f<e;f++){if(n.indexOf(l[f])>-1){p.push(l[f])}}return p};GH.GridDataModel.prototype.preprocessIssues=function(){var a=this;_.each(this.data.issues,function(b){a.preprocessIssue(b)})};GH.GridDataModel.prototype.preprocessIssue=function(a){this.computeTimeInColumnForIssue(a);GH.ExtraFieldsHelper.prepareExtraFields(a.extraFields)};GH.GridDataModel.prototype.computeTimeInColumnForIssue=function(b){var a=86400000;if(b.timeInColumn){b.timeInColumn.days=Math.floor((b.timeInColumn.durationPreviously+new Date().getTime()-b.timeInColumn.enteredStatus)/a)}};GH.GridDataModel.prototype.updateIssueData=function(a){this.preprocessIssue(a);this.data.issues[a.key]=a};GH.GridDataModel.prototype.updateOrder=function(a){this.data.order=a;this.buildCache()};GH.GridDataModel.prototype.getGroupData=function(){var a=[];var b=this;_.each(b.data.swimlanes,function(d){_.each(b.data.columns,function(e){a.push(b.getIssuesDataForCell(d.id,e.id))})});var c=GH.IssueListUtil.calculateGroupData(a);c.drawFakeParents=!this.isParentChildStrategy();return c};GH.GridDataModel.prototype.getIssuesDataForCell=function(c,d){var b=this.cache.bySwimlaneThenColumn[c];if(!b){return false}var a=b[d];if(!a){return false}return this.getIssueDataByKeys(a)};GH.GridDataModel.prototype.getIssueDataByKeys=function(a){var b=[];var c=this.data.issues;_.each(a,function(d){var e=c[d];if(e){b.push(e)}});return b};GH.GridDataModel.prototype.getCells=function(){return this.cache.bySwimlaneThenColumn};GH.GridDataModel.prototype.getIssues=function(){return this.data.issues};GH.GridDataModel.prototype.getColumns=function(){return this.data.columns};GH.GridDataModel.prototype.getSwimlanes=function(){return this.data.swimlanes};GH.GridDataModel.prototype.getOrder=function(){return this.data.order};GH.GridDataModel.prototype.getSwimlaneById=function(a){return _.find(this.data.swimlanes,function(b){return b.id==a})};GH.GridDataModel.prototype.getColumnById=function(a){return _.find(this.data.columns,function(b){return b.id==a})};GH.GridDataModel.prototype.getSwimlaneIdByIssueKey=function(a){var b=false;_.each(this.data.swimlaneIssueMapping,function(d,c){if(_.indexOf(d,a)>-1){b=parseInt(c,10)}});return b};GH.GridDataModel.prototype.getColumnIdByIssueKey=function(a){var b=false;_.each(this.data.columnIssueMapping,function(c,d){if(_.indexOf(c,a)>-1){b=parseInt(d,10)}});return b};GH.GridDataModel.prototype.getIssueDataByKey=function(a){return this.data.issues[a]};GH.GridDataModel.prototype.getIssueIdForKey=function(a){var b=this.getIssueDataByKey(a);return b?b.id:false};GH.GridDataModel.prototype.isIssueValid=function(a){return this.data.issues[a]?true:false};GH.GridDataModel.prototype.hasSwimlanes=function(){var a=this;var b=a.isParentChildStrategy();return _.any(a.getSwimlanes(),function(c){return(b||a.getSwimlaneIssueCount(c.id)>0)&&!c.defaultSwimlane})};GH.GridDataModel.prototype.getSwimlaneIssueCount=function(a){return this.data.swimlaneIssueMapping[a].length};GH.GridDataModel.prototype.getColumnIssueCount=function(a){return this.data.columnIssueMapping[a].length};GH.GridDataModel.prototype.isParentChildStrategy=function(){return this.data.variables.swimlanesType=="parentChild"};GH.GridDataModel.prototype.getParentSwimlaneByIssueKey=function(a){if(!this.isParentChildStrategy()){return false}return _.find(this.data.swimlanes,function(b){if(b.parentKey==a){return true}})||false};GH.GridDataModel.prototype._getIssuePositionAndDataByKey=function(b){var c=this.data.issues[b];if(!c){return false}var g=false;if(this.isParentChildStrategy()){_.each(this.data.swimlanes,function(h){if(h.parentKey==b){g=h}})}if(g){return{isSwimlane:true,swimlaneId:g.id,columnId:_.first(this.getColumns()).id,issueIndex:-1,issue:c}}var e=this.getSwimlaneIdByIssueKey(b);if(!e){return false}var f=this.getColumnIdByIssueKey(b);var d=-1;if(e&&f){var a=this.cache.bySwimlaneThenColumn[e][f];d=_.indexOf(a,b)}return{swimlaneId:e,columnId:f,issueIndex:d,issue:c}};GH.GridDataModel.prototype.getIssueIndexByKey=function(a){var b=this._getIssuePositionAndDataByKey(a);return b?b.issueIndex:false};GH.GridDataModel.prototype.getNextIssueKey=function(a,e){var g=this._getIssuePositionAndDataByKey(a);if(!g){return false}if(e){g.columnId=e}var c=this;var d=c.getCells();var b=false;var f=false;_.find(c.getSwimlanes(),function(j){var i;if(j.id==g.swimlaneId){b=true;i=g.issueIndex+1}else{if(!b){return false}if(j.parentKey){f=j.parentKey;return true}else{i=0}}var h=c.hasSwimlanes();if(h&&GH.RapidBoard.State.isSwimlaneCollapsed(j.id)){return false}f=d[j.id][g.columnId][i];return !!f});return f||false};GH.GridDataModel.prototype.getPreviousIssueKey=function(b,f){var h=this._getIssuePositionAndDataByKey(b);if(!h){return false}if(f){h.columnId=f}var d=this;var e=d.getCells();var c=false;var a=false;var g=d.getSwimlanes().slice(0).reverse();_.find(g,function(j){if(j.id!=h.swimlaneId&&!c){return false}c=true;if(j.id==h.swimlaneId){if(j.parentKey==b){return false}if(h.issueIndex==0&&j.parentKey){a=j.parentKey;return true}else{a=e[j.id][h.columnId][h.issueIndex-1];return !!a}}var i=d.hasSwimlanes()&&GH.RapidBoard.State.isSwimlaneCollapsed(j.id);if(!i&&e[j.id][h.columnId].length>0){a=_.last(e[j.id][h.columnId]);return !!a}else{if(j.parentKey){a=j.parentKey;return true}else{return false}}});return a||false};GH.GridDataModel.prototype.getIssueKeyForColumnAtIndex=function(b,d,c){var a=this.cache.bySwimlaneThenColumn[b][d];if(_.isEmpty(a)){return false}if(c<0){return a[0]}else{if(c>=a.length){return _.last(a)}else{return a[c]}}};GH.GridDataModel.prototype.getFirstIssueKey=function(){var c=this.getSwimlanes();var d=this.getColumns();var b=this.getCells();var a=this.hasSwimlanes();var e=false;_.find(d,function(f){_.find(c,function(h){if(a&&GH.RapidBoard.State.isSwimlaneCollapsed(h.id)){return false}var g=b[h.id][f.id];if(_.isEmpty(g)){return false}e=_.first(g);return true});return e});return e};GH.GridDataModel.prototype.getLastIssueKey=function(){var e=this.getSwimlanes().slice().reverse();var d=this.getColumns();var c=this.getCells();var b=this.hasSwimlanes();var a=false;_.find(d,function(f){_.find(e,function(h){if(b&&GH.RapidBoard.State.isSwimlaneCollapsed(h.id)){return false}var g=c[h.id][f.id];if(_.isEmpty(g)){return false}a=_.last(g);return true});return a});return a};GH.GridDataModel.prototype.getIssueKeyInPreviousColumn=function(b,d){var e=this._getIssuePositionAndDataByKey(b);if(!e){return false}if(e.isSwimlane){return false}var c=this._getPreviousColumn(e.columnId);while(c){var a=this.getIssueKeyForColumnAtIndex(e.swimlaneId,c.id,d);if(a){return a}c=this._getPreviousColumn(c.id)}return false};GH.GridDataModel.prototype._getPreviousColumn=function(c){var b=this.getColumns();for(var a=b.length-1;a>0;a--){if(b[a].id==c){return b[a-1]}}return false};GH.GridDataModel.prototype.getIssueKeyInNextColumn=function(a,b){var d=this._getIssuePositionAndDataByKey(a);if(!d){return false}if(d.isSwimlane){return false}var e=this._getNextColumn(d.columnId);while(e){var c=this.getIssueKeyForColumnAtIndex(d.swimlaneId,e.id,b);if(c){return c}e=this._getNextColumn(e.id)}return false};GH.GridDataModel.prototype._getNextColumn=function(c){var b=this.getColumns();for(var a=0;a<b.length-1;a++){if(b[a].id==c){return b[a+1]}}return false};GH.GridDataModel.prototype.getIssuePositionByKey=function(a){var b=this._getIssuePositionAndDataByKey(a);if(!b){return undefined}return{swimlaneId:b.swimlaneId,columnId:b.columnId,position:b.issueIndex}};GH.GridDataModel.prototype.getIssueKeyAtPosition=function(h){if(!h||h.swimlaneId===undefined||h.columnId===undefined||h.position===undefined){return undefined}var b,c,f,a;var g=this.getSwimlanes();for(var e=0,d=g.length;e<d;e++){if(g[e].id==h.swimlaneId){b=g[e];if(e+1<d){a=g[e+1]}break}}if(!b){return undefined}c=this.getColumnById(h.columnId);if(!c){return undefined}var j=this.cache.bySwimlaneThenColumn[h.swimlaneId][h.columnId];f=j[h.position];if(f){return f}else{if(a){return this.getIssueKeyAtPosition({swimlaneId:a.id,columnId:h.columnId,position:0})}else{return _.last(j)}}};GH.GridDataModel.prototype.moveIssueToColumn=function(b,c,d){var a=this.data.columnIssueMapping;if(!a[c]){return false}if(!a[d]){return}a[c]=_.without(a[c],b);a[d].push(b);this.buildCache()};GH.GridDataModel.prototype.removeEpicFromIssues=function(a){var b=[];var c=this.getIssueDataByKeys(a);_.each(c,function(d){if(d.epic){delete d.epic;b.push(d)}});return b};GH.GridDataModel.prototype.getSwimlaneStrategy=function(){return this.data.swimlaneStrategy};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridSwimlanesData.js' */
GH.GridSwimlanesData={};GH.GridSwimlanesData.calculateSwimlanesData=function(c,a){var b=[];switch(a.swimlaneStrategy){case"parentChild":b=GH.GridSwimlanesData.calculateParentChildSwimlanes(c,a.parentSwimlanesData);break;case"assignee":b=GH.GridSwimlanesData.calculateAssigneeSwimlanes(c,false);break;case"assigneeUnassignedFirst":b=GH.GridSwimlanesData.calculateAssigneeSwimlanes(c,true);break;case"custom":b=GH.GridSwimlanesData.calculateCustomSwimlanes(c,a.customSwimlanesData);break;case"epic":b=GH.GridSwimlanesData.calculateEpicSwimlanes(c,a.epicSwimlanesData);break;case"none":default:b=GH.GridSwimlanesData.calculateNoneSwimlanes(c);break}return{type:a.swimlaneStrategy,swimlanes:b,rapidViewId:a.rapidViewId}};GH.GridSwimlanesData.calculateCustomSwimlanes=function(d,a){var c=d.issues;var b=a.swimlanes;GH.GridSwimlanesData.calculateSwimlaneIssueKeys(c,b);return b};GH.GridSwimlanesData.calculateSwimlaneIssueKeys=function(b,a){var c;_.each(a,function(d){d.issueKeys=[];if(!_.isEmpty(d.issueIds)){if(!c){c={};_.each(b,function(e){c[e.id]=e.key})}_.each(d.issueIds,function(e){d.issueKeys.push(c[e])})}})};GH.GridSwimlanesData.calculateParentChildSwimlanes=function(h,g){var c={};_.each(h.missingParents,function(m){c[m.id]=m});var b=g.parentIssueIds;var d=[];var k={};_.each(h.issues,function(m){if(m.parentId){d.push(m.parentId);if(!k[m.parentId]){k[m.parentId]=[]}k[m.parentId].push(m.key)}else{d.push(m.id);c[m.id]=m}});d=_.uniq(d,true);var a=_.intersection(d,b);var f=1;var l=[];_.each(a,function(q){var n=k[q]||[];var m=c[q];var p=_.contains(g.doneCandidates,q);var o={id:f++,name:m.key,description:m.summary,defaultSwimlane:false,parentKey:m.key,query:"",issueKeys:n,parentOutOfSync:p};if(p){GH.WorkController.analytics.trigger("movetodonebutton.shown")}l.push(o)});var j=_.filter(d,function(m){return !_.include(b,m)});var e=[];_.each(j,function(n){var m=c[n];e.push(m.key)});var i={id:f++,name:"Other Issues",description:"",defaultSwimlane:true,query:"",issueKeys:e};l.push(i);return l};GH.GridSwimlanesData.calculateAssigneeSwimlanes=function(f,d){var g={};var c=[];_.each(f.issues,function(h){if(h.assignee){if(!g[h.assignee]){g[h.assignee]=[]}g[h.assignee].push(h)}else{c.push(h.key)}});var b=1;var a=[];_.each(g,function(i){var h=i[0].assigneeName;var j={id:b++,name:h,lName:h.toLowerCase(),description:h,defaultSwimlane:false,query:"",issueKeys:_.map(i,function(k){return k.key})};a.push(j)});a.sort(function(i,h){return i.lName==h.lName?0:i.lName<h.lName?-1:1});if(!_.isEmpty(c)){var e={id:b++,name:"Unassigned",description:"",defaultSwimlane:false,query:"",issueKeys:c};if(d){a.splice(0,0,e)}else{a.push(e)}}return a};GH.GridSwimlanesData.calculateEpicSwimlanes=function(e,c){var a={};var h=[];var f={};var d=[];_.each(e.issues,function(j){if(j.epic){if(!a[j.epic]){a[j.epic]=[]}a[j.epic].push(j.key);f[j.key]=j.epic}else{if(j.parentKey){d.push(j)}else{if(j.typeId!==GH.EpicConfig.getEpicIssueTypeId()){h.push(j.key)}}}});_.each(d,function(k){var j=f[k.parentKey];if(j){a[j].push(k.key)}else{h.push(k.key)}});var i=[];var b=1;_.each(c.epics,function(j){var l=GH.EpicConfig.getEpicNameString(c.epicNames[j],j);var k={id:b++,name:l,lName:l.toLowerCase(),description:l,defaultSwimlane:false,query:"",issueKeys:a[j]?a[j]:[]};i.push(k)});if(!_.isEmpty(h)){var g={id:b++,name:"Issues without epics",description:"",defaultSwimlane:true,query:"",issueKeys:h};i.push(g)}return i};GH.GridSwimlanesData.calculateNoneSwimlanes=function(b){var a={id:1,name:"None",description:"None",defaultSwimlane:true,query:"",issueKeys:_.map(b.issues,function(c){return c.key})};return[a]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridColumnsData.js' */
GH.GridColumnsData={};GH.GridColumnsData.calculateColumnsData=function(g,f,e){var c=f.columns;var b=GH.GridColumnsData.computeBusted(c,e);var a=GH.GridColumnsData.getColumnIssueMapping(g,c);var d={columns:c,columnIssueMapping:a,anyColumnBusted:b};return d};GH.GridColumnsData.getColumnIssueMapping=function(d,b){var a={};var e={};var c={};_.each(b,function(f){a[f.id]=[];c[f.id]={visible:0,total:f.statisticsFieldValue||0};_.each(f.statusIds,function(g){e[g]=f.id})});_.each(d.issues,function(f){var g=e[f.statusId];a[g].push(f.key);if(f.columnStatistic&&f.columnStatistic.statFieldValue){c[g].visible+=f.columnStatistic.statFieldValue.value}});_.each(b,function(f){f.stats=c[f.id]});return a};GH.GridColumnsData.computeBusted=function(b,c){if(!c.fieldConfigured){return false}var a=false;_.each(b,function(d){d.minBusted=(typeof d.min!="undefined")&&d.min>d.statisticsFieldValue;d.maxBusted=(typeof d.max!="undefined")&&d.max<d.statisticsFieldValue;a=a||d.minBusted||d.maxBusted});return a};GH.GridColumnsData.getColumnIdForStatus=function(b,a){var c=_.find(b,function(d){return _.find(d.statusIds,function(e){if(e==a){return true}})});return c?c.id:false};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/IssueListUtil.js' */
GH.IssueListUtil={};GH.IssueListUtil.calculateGroupData=function(b){var a={fakeParents:{},beginGroups:{},endGroups:{}};_.each(b,function(c){GH.IssueListUtil._calculateGroupData(a,c)});return a};GH.IssueListUtil._calculateGroupData=function(c,a){var d=null,b=null;_.each(a,function(e){if(e.parentId){if(!d){if(b&&b.id==e.parentId){c.beginGroups[b.id]=true}else{c.fakeParents[e.id]=true}c.beginGroups[e.id]=true}else{if(d.parentId!=e.parentId){c.endGroups[d.id]=true;c.beginGroups[e.id]=true;c.fakeParents[e.id]=true}}d=e}else{if(d){c.endGroups[d.id]=true;d=null}}b=e})};GH.IssueListUtil.buildDisplayIssueKey=function(a,d){if(d.availableWidth==null||!d.approxCharacterWidth){return a}var g="\u2026";var h=a.split("-");var f=h[0];var c=h[1];var b=Math.floor(d.availableWidth/d.approxCharacterWidth);if(b<a.length){var e=b-c.length-2;if(e<0){return g}f=f.substr(0,e);return f+g+"-"+c}else{return a}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/JiraBridge.js' */
JIRA.IssueNavigator.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.getSelectedIssueKey()};JIRA.IssueNavigator.getSelectedIssueId=function(){return GH.IssueOperationShortcuts.getSelectedIssueId()};JIRA.Issue.getIssueId=JIRA.IssueNavigator.getSelectedIssueId;JIRA.Issue.getIssueKey=JIRA.IssueNavigator.getSelectedIssueKey;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-IssueDialogUtil.js' */
JIRA.Dialogs.getDefaultAjaxOptions=function(){var b=JIRA.IssueNavigator.getSelectedIssueId();var a=this.options.url||this.$activeTrigger.attr("href")||this.$activeTrigger.data("url");if(/id=\{0\}/.test(a)){if(!b){return false}else{a=a.replace(/(id=\{0\})/,"id="+b)}}return{data:{decorator:"dialog",inline:"true"},url:a}};JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit=function(){var b=JIRA.IssueNavigator.getSelectedIssueId();var a=JIRA.IssueNavigator.getSelectedIssueKey();JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey});this.issueId=null;this.issueKey=null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-IssueActionsDialog.js' */
define("jira-agile/dialog/issue-actions",["jira/ajs/select/queryable-dropdown-select","jira/dialog/dialog","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jquery"],function(i,f,g,h,a,b,d){var c=JIRA.IssueNavigator;var e=JIRA.Issue;return f.extend({_getDefaultOptions:function(){return d.extend(this._super(),{cached:false,id:"issue-actions-dialog",widthClass:"small"})},_setContent:function(j,l){if(j){this._super(j,l)}else{this._super(d(["<form id='issue-actions-dialog-form' class='aui ajs-dirty-warning-exempt'>","<div class='form-body'>","<div id='issueactions-suggestions' class='aui-list' />","<div class='description'>","Begin typing for available operations or press down to see all","</div>","</div>","</form>"].join("")),true)}if(f.current===this){var k=new b.FocusConfiguration();k.context=this.get$popup()[0];k.parentElementSelectors=[".form-body"];b.pushConfiguration(k);b.triggerFocus()}},_formatActionsResponse:function(m){function l(r){var p=window.location.href;var q=p;if(/selectedIssueId=[0-9]*/.test(p)){q=q.replace(/selectedIssueId=[0-9]*/g,"selectedIssueId="+r)}else{if(c.isNavigator()){if(/\?/.test(p)){q=q+"&"}else{q=q+"?"}q=q+"selectedIssueId="+r}}return encodeURIComponent(q)}function j(p){return GH.RapidBoard.getCurrentPageReturnUrl()}function o(p){var q=new g({label:"Workflow"});d(p).each(function(){q.addItem(new h({href:contextPath+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+this.action+"&atl_token="+m.atlToken+"&returnUrl="+j(m.key),label:this.name,styleClass:"issueaction-workflow-transition"}))});return q}function k(q){var p=new g({label:"Actions"});d(q).each(function(){var u=j(m.key);var s=this.name;if(GH.DetailsModel&&GH.DetailsModel.patchRankOperationName){s=GH.DetailsModel.patchRankOperationName(this.styleClass,this.name)}var t=(this.url.indexOf("?")===-1)?"?":"&";var r=this.url+t+"returnUrl="+u;p.addItem(new h({href:r,label:s,styleClass:this.styleClass}))});return p}var n=[];if(m){if(m.actions&&m.actions.length!==0){n.push(o(m.actions))}if(m.operations&&m.operations.length!==0){n.push(k(m.operations))}}return n},decorateContent:function(){var k=this;var j=c.getSelectedIssueKey();var l=e.getIssueId()||c.getSelectedIssueId();if(j){this.addHeading("Operations"+": <span>"+j+"</span>")}else{this.addHeading("Operations")}this.queryControl=new i({id:"issueactions",element:this.$content.find("#issueactions-suggestions"),ajaxOptions:{minQueryLength:1,dataType:"json",url:AJS.format(contextPath+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",l,atl_token()),formatResponse:this._formatActionsResponse},showDropdownButton:true,loadOnInit:true});this.queryControl._handleServerError=function(n){var o=a.buildSimpleErrorContent(n);var m=n.status===401?"warning":"error";k._setContent(d('<div class="ajaxerror"><div class="aui-message '+m+'"><p>'+o+"</p></div></div>"),false);k._addCloseLink()};this.timeoutId=undefined;this._addCloseLink()},_addCloseLink:function(){var j=this;var m;var l;var k;l=d('<div class="buttons-container form-footer"></div>').appendTo(this.get$popupContent());k=d('<div class="buttons"/>').appendTo(l);m=d("<a href='#' class='cancel' id='aui-dialog-close'>"+"Close"+"</a>");m.appendTo(k,this.get$popupContent()).click(function(n){j.hide();n.preventDefault()});this.get$popupContent().append(l)},hide:function(j){if(this._super(j)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-LinkIssueDialog.js' */
GH.LinkIssueDialog={};GH.LinkIssueDialog.create=function(){function c(f,g){var e=false;jQuery.each(g,function(j,h){if(h.id===f){h.isSelected=true;e=true;return false}});if(!e){g[0].isSelected=true}return g}function d(f){var e=jQuery.Deferred();JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+f,complete:function(h,i,g){if(g.successful){e.resolve(g.data)}else{e.reject(JIRA.SmartAjax.buildDialogErrorContent(g))}}});return e.promise()}function a(g){var f=jQuery.Deferred(),e=JIRA.Dialogs.getDefaultAjaxOptions.call(g);e.complete=function(i,j,h){if(h.successful){f.resolve(h.data)}else{f.reject(JIRA.SmartAjax.buildDialogErrorContent(h))}};JIRA.SmartAjax.makeRequest(e);return f.promise()}function b(e){return e.$activeTrigger.attr("id")}return function(g,f,e,h){e=e||JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit;return new GH.FormDialog({id:"link-issue-dialog",trigger:g,onSuccessfulSubmit:e,issueMsg:"thanks_issue_linked",widthClass:"large",stacked:true,content:function(j){var i=this,k=h||JIRA.Issue.getIssueId()||JIRA.IssueNavigator.getSelectedIssueId();a(i).done(function(l){d(k).done(function(n){var m=f||b(i);n=c(m,n);j(JIRA.Templates.LinkIssue.dialog({linkTypes:n,tabContent:l}));jQuery.each(n,function(q,o){var p;if(o.isSelected===true){p="[name='"+o.focusedFieldName+"']";if(jQuery(p).length===0){p="#"+o.id}i._focusFirstField(p)}})}).fail(function(m){j(m)})}).fail(function(l){j(l)})},formatSubmitResponseContent:function(i){this.get$popupContent().find(".dialog-pane").html(i);return this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-InitDialogs.js' */
AJS.$(function(){require(["jira/dialog/dialog-register","jira-agile/dialog/issue-actions","jira-agile/dialog/labels-dialog","jira/dialog/screenshot-window","jira/dialog/form-dialog","jira/dialog/dialog","jquery"],function(a,j,g,i,c,h,e){var d=JIRA.IssueNavigator;var f=JIRA.Issue;var l;for(var b in a){if(a.hasOwnProperty(b)){l=a[b];if(l._unassignEvents&&l.options.trigger){l._unassignEvents("trigger",l.options.trigger)}}}e(document).undelegate("a.issueaction-workflow-transition","click");e("a.issueaction-attach-screenshot").die("click");a.keyboardShortcuts=new c({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var m=this.get$popupContent();e("a.submit-link",m).click(function(n){n.preventDefault();e("form",m).submit()})}});a.deleteIssueLink=new c({type:"ajax",id:"delete-issue-link-dialog",trigger:"#linkingmodule a.icon-delete",ajaxOptions:a.getDefaultAjaxOptions});if(document.getElementById("dashboard")){a.deleteDashboard=new c({type:"ajax"});e(document).delegate("#delete_dashboard","click",function(m){m.stopPropagation();m.preventDefault();a.deleteDashboard.$activeTrigger=e("#delete_dashboard");a.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:a.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"});a.deleteDashboard.show()})}else{a.assignToMe=new GH.FormDialog({id:"assign-to-me-link-handler",trigger:"a.issueaction-assign-to-me",ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned"});a.linkIssue=GH.LinkIssueDialog.create("a.issueaction-link-issue");a.deleteIssue=new GH.FormDialog({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.cloneIssue=new GH.FormDialog({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.assignIssue=new GH.FormDialog({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.logWork=new GH.FormDialog({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow();var m=this.get$popupContent()}});a.attachFile=new GH.FormDialog({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.attachScreenshotDialog=new GH.FormDialog({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.attachScreenshot=new i({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"});a.comment=new GH.FormDialog({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.editLabels=new g({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",labelsProvider:k,onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}});a.issueActions=new j();AJS.namespace("jira.app.issueActionsPopup",null,a.issueActions);e(document).delegate("a.issueaction-workflow-transition","click",function(n){n.preventDefault();var o=/action=(\d+)/.exec(this.href.slice(this.href.indexOf("?")));if(o){var p="workflow-transition-"+o[1]+"-dialog";var m=e(this);if(!a[p]){a[p]=new GH.FormDialog({id:p,url:m.attr("href"),transitionActionId:o[1],trigger:'a[href*="'+o[0]+'"].issueaction-workflow-transition',widthClass:"large",handleRedirect:true,ajaxOptions:a.getDefaultAjaxOptions,onSuccessfulSubmit:a.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){AJS.tabs.setup()}});a[p].show()}}});e.each(a,function(m,n){if(n instanceof h){e(n).bind("beforeShow",function(){if(m!=="keyboardShortcuts"){return d.isRowSelected()||f.getIssueId()!==undefined}})}})}function k(m){}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/KeyboardShortcuts.js' */
GH.Shortcut={focusBoardSearch:function(){},newIssue:function(){AJS.$("#create_link").click()},toggleBox:function(){},editIssuePriority:function(){},projector:function(){GH.PresentationMode.iterateThroughPresentationModes(GH.PresentationMode.allModes)},viewIssue:function(){GH.IssueOperationShortcuts.viewSelectedIssue()},editIssue:function(){GH.IssueOperationShortcuts.editSelectedIssue()},assignIssue:function(){GH.IssueOperationShortcuts.assignSelectedIssue()},assignIssueToMe:function(){GH.IssueOperationShortcuts.assignSelectedIssueToMe()},commentIssue:function(){GH.IssueOperationShortcuts.commentSelectedIssue()},editIssueLabels:function(){GH.IssueOperationShortcuts.editSelectedIssueLabels()},showOperationsDialog:function(){GH.IssueOperationShortcuts.showOperationsDialog()},sendToTop:function(a){if(GH.WorkController.isActive()){GH.WorkKBShortcuts.sendToTop(a)}else{if(GH.PlanController.isActive()){GH.PlanKBShortcuts.sendToTop(a)}}},sendToBottom:function(a){if(GH.WorkController.isActive()){GH.WorkKBShortcuts.sendToBottom(a)}else{if(GH.PlanController.isActive()){GH.PlanKBShortcuts.sendToBottom(a)}}},nextIssue:function(){if(GH.WorkController.isActive()){GH.WorkKBNavigation.selectNextIssue()}else{if(GH.PlanController.isActive()){GH.BacklogSelectionController.selectNextIssue()}}},previousIssue:function(){if(GH.WorkController.isActive()){GH.WorkKBNavigation.selectPreviousIssue()}else{if(GH.PlanController.isActive()){GH.BacklogSelectionController.selectPreviousIssue()}}},nextBox:function(){if(GH.WorkController.isActive()){GH.WorkKBNavigation.selectNextColumn()}},previousBox:function(){if(GH.WorkController.isActive()){GH.WorkKBNavigation.selectPreviousColumn()}},toggleSwimlanes:function(){if(GH.WorkController.isActive()){GH.WorkKBNavigation.toggleSwimlanes()}},planMode:function(){GH.RapidBoard.ViewController.setMode("plan")},workMode:function(){GH.RapidBoard.ViewController.setMode("work")},reportMode:function(){GH.RapidBoard.ViewController.setMode("report")},toggleIssue:function(){if(GH.WorkController.isActive()){GH.WorkController.toggleDetailsView()}else{if(GH.PlanController.isActive()){GH.PlanController.toggleDetailsView()}}}};AJS.$(document).bind("keydown");;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueOperationShortcuts.js' */
GH.IssueOperationShortcuts={};GH.IssueOperationShortcuts.overrideSelectedIssue=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.IssueOperationShortcuts.analytics=function(b){return new a("gh.issueaction."+b)}})();GH.IssueOperationShortcuts.init=function(){GH.IssueOperationShortcuts.bindEnter();AJS.$(document).delegate(".js-issueaction-container-dot .js-issueaction","click",function(a){var b=AJS.$(a.currentTarget).attr("id");GH.IssueOperationShortcuts.trackKeyboardShortcuts(b)});AJS.$(document).delegate("#issueactions-suggestions a.aui-list-item-link","click",function(b){var a=AJS.$(b.currentTarget).attr("class");if(a.indexOf("issueaction-")>=0){var c=a.replace(/.*issueaction-([a-z0-9_-]+).*/,"$1");GH.IssueOperationShortcuts.trackDotDialogAction(c)}});AJS.bind("remove.dialog",function(){GH.IssueOperationShortcuts.bindEnter()})};GH.IssueOperationShortcuts.bindEnter=function(){AJS.$(document).bind("keydown",function(b){if(b.keyCode=="13"){var a=b.target;if(a===undefined||a.nodeName==="HTML"||a.nodeName==="BODY"||a==document){GH.IssueOperationShortcuts.viewSelectedIssue()}}})};GH.IssueOperationShortcuts.setOverrideSelectedIssue=function(a){GH.IssueOperationShortcuts.overrideSelectedIssue=a};GH.IssueOperationShortcuts.clearOverrideSelectedIssue=function(){GH.IssueOperationShortcuts.overrideSelectedIssue=undefined};GH.IssueOperationShortcuts.isOverrideSelectedIssueActive=function(){return !!GH.IssueOperationShortcuts.overrideSelectedIssue};GH.IssueOperationShortcuts.getSelectedIssueKey=function(){if(GH.IssueOperationShortcuts.overrideSelectedIssue){return GH.IssueOperationShortcuts.overrideSelectedIssue.key}else{if(GH.WorkController.isActive()){return GH.WorkSelectionController.getSelectedIssueKey()}else{if(GH.PlanController.isActive()){return GH.BacklogSelectionController.getSelectedIssueKey()}}}};GH.IssueOperationShortcuts.getSelectedIssueId=function(){if(GH.IssueOperationShortcuts.overrideSelectedIssue){return GH.IssueOperationShortcuts.overrideSelectedIssue.id}else{if(GH.WorkController.isActive()){var a=GH.WorkSelectionController.getSelectedIssueKey();if(a){return GH.GridDataController.getModel().getIssueIdForKey(a)}}else{if(GH.PlanController.isActive()){var a=GH.BacklogSelectionController.getSelectedIssueKey();if(a){return GH.BacklogModel.getIssueIdForKey(a)}}}}};GH.IssueOperationShortcuts.viewSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){GH.IssueOperationShortcuts.trackKeyboardShortcuts("open-issue");var b=GH.Ajax.CONTEXT_PATH+"/browse/"+a;window.location.href=b}};GH.IssueOperationShortcuts.editSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueId();if(a){AJS.$("a.issueaction-edit-issue").trigger("click")}};GH.IssueOperationShortcuts.assignSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-assign-issue").trigger("click")}};GH.IssueOperationShortcuts.assignSelectedIssueToMe=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-assign-to-me").trigger("click")}};GH.IssueOperationShortcuts.commentSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-comment-issue").trigger("click")}};GH.IssueOperationShortcuts.attachFilesSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-attach-file").trigger("click")}};GH.IssueOperationShortcuts.editSelectedIssueLabels=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-edit-labels").trigger("click")}};GH.IssueOperationShortcuts.deleteSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueId();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-delete-issue").trigger("click")}};GH.IssueOperationShortcuts.linkSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueId();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-link-issue").trigger("click")}};GH.IssueOperationShortcuts.createSubtask=function(){var d=AJS.$("#atlassian-token").attr("content");var b=GH.Ajax.CONTEXT_PATH+"/secure/CreateSubTaskIssue!default.jspa?parentIssueId={0}&atl_token="+d+"&returnUrl=";var c='<a href="'+b+'" class="issueaction-create-subtask" style="display:none"></a>';var a=AJS.$(c);AJS.$("#gh").append(a);a.click();a.remove()};GH.IssueOperationShortcuts.logWorkOnSelectedIssue=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(a){AJS.$(".js-issueaction-container-dot a.issueaction-log-work").trigger("click")}};GH.IssueOperationShortcuts.showOperationsDialog=function(){var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(!a){return}JIRA.Dialogs.issueActions.show()};GH.IssueOperationShortcuts.trackKeyboardShortcuts=function(a){GH.IssueOperationShortcuts.analytics("keyboardshortcuts").trigger(a)};GH.IssueOperationShortcuts.trackDotDialogAction=function(a){GH.IssueOperationShortcuts.analytics("dotdialog").trigger(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBShortcuts.js' */
GH.WorkKBShortcuts={};GH.WorkKBShortcuts.sendToTop=function(a){GH.WorkRanking.sendToTop(a)};GH.WorkKBShortcuts.sendToBottom=function(a){GH.WorkRanking.sendToBottom(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBNavigation.js' */
GH.WorkKBNavigation={};GH.WorkKBNavigation.currentIndex=0;GH.WorkKBNavigation.currentColumn=0;GH.WorkKBNavigation.currentSwimlane=0;GH.WorkKBNavigation.columnChange=false;GH.WorkKBNavigation.init=function(){AJS.$(GH).bind("issueSelected",function(b,a){GH.log(b.type+" handled",GH.Logger.Contexts.ui);GH.WorkKBNavigation.adaptCurrentPosition(a)})};GH.WorkKBNavigation.initCurrentPosition=function(){var a=GH.WorkSelectionController.getSelectedIssueKey();if(a){GH.WorkKBNavigation.setCurrentPosition(a,true,false)}else{GH.WorkKBNavigation.resetCurrentPosition()}};GH.WorkKBNavigation.adaptCurrentPosition=function(a){if(GH.WorkKBNavigation.columnChange){GH.WorkKBNavigation.columnChange=false;GH.WorkKBNavigation.setCurrentPosition(a,false,true)}else{GH.WorkKBNavigation.setCurrentPosition(a,false,false)}};GH.WorkKBNavigation.setCurrentPosition=function(a,b,d){if(a){var c=GH.GridDataController.getModel()._getIssuePositionAndDataByKey(a);if(c){if(!d){GH.WorkKBNavigation.currentIndex=c.issueIndex}if(b||!c.isSwimlane){GH.WorkKBNavigation.currentColumn=c.columnId}GH.WorkKBNavigation.currentSwimlane=c.swimlaneId;return}}GH.WorkKBNavigation.resetCurrentPosition()};GH.WorkKBNavigation.resetCurrentPosition=function(){GH.WorkKBNavigation.currentIndex=0;GH.WorkKBNavigation.currentColumn=0;GH.WorkKBNavigation.currentSwimlane=0};GH.WorkKBNavigation.selectNextIssue=function(){if(!GH.WorkController.isActive()){return}var a=GH.WorkSelectionController.getSelectedIssueKey();var b=GH.GridDataController.getModel();if(!a){var d=b.getFirstIssueKey();if(d){GH.WorkSelectionController.focusOnIssue(d)}}else{if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(a)){var c=b.getNextIssueKey(a,GH.WorkKBNavigation.currentColumn);if(c){GH.WorkSelectionController.focusOnIssue(c)}}}};GH.WorkKBNavigation.selectPreviousIssue=function(){if(!GH.WorkController.isActive()){return}var a=GH.WorkSelectionController.getSelectedIssueKey();var c=GH.GridDataController.getModel();if(!a){var b=c.getLastIssueKey();if(b){GH.WorkSelectionController.focusOnIssue(b)}}else{if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(a)){var d=c.getPreviousIssueKey(a,GH.WorkKBNavigation.currentColumn);if(d){GH.WorkSelectionController.focusOnIssue(d)}}}};GH.WorkKBNavigation.selectNextColumn=function(){if(!GH.WorkController.isActive()){return}var b=GH.WorkSelectionController.getSelectedIssueKey();if(!b){GH.WorkKBNavigation.selectNextIssue();return}var c=GH.GridDataController.getModel();var d=c.isIssueValid(b);if(!d){GH.WorkKBNavigation.selectNextIssue();return}if(GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(b)){return}var a=c.getIssueKeyInNextColumn(b,GH.WorkKBNavigation.currentIndex);if(a){GH.WorkKBNavigation.columnChange=true;GH.WorkSelectionController.focusOnIssue(a)}};GH.WorkKBNavigation.selectPreviousColumn=function(){if(!GH.WorkController.isActive()){return}var b=GH.WorkSelectionController.getSelectedIssueKey();if(!b){GH.WorkKBNavigation.selectNextIssue();return}var c=GH.GridDataController.getModel();var d=c.isIssueValid(b);if(!d){GH.WorkKBNavigation.selectNextIssue();return}if(GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(b)){return}var a=c.getIssueKeyInPreviousColumn(b,GH.WorkKBNavigation.currentIndex);if(a){GH.WorkKBNavigation.columnChange=true;GH.WorkSelectionController.focusOnIssue(a)}};GH.WorkKBNavigation.toggleSwimlanes=function(){GH.SwimlaneView.toggleAllSwimlanes()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.js' */
GH.WorkDragAndDrop=new GH.Events();GH.WorkDragAndDrop.currentDragElement=null;GH.WorkDragAndDrop.cancel=false;GH.WorkDragAndDrop.enabled=false;GH.WorkDragAndDrop.skipNextRank=false;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.WorkDragAndDrop.analytics={dragAndDrop:new a("gh.rapidboard.work.dragAndDrop"),ranking:new a("gh.rapidboard.rankissues"),transitioning:new a("gh.rapidboard.transitionissues")}})();GH.WorkDragAndDrop.init=function(){GH.WorkDragAndDrop.enabled=true};GH.WorkDragAndDrop.initDraggables=function(a){if(GH.WorkDragAndDrop.enabled){setTimeout(function(){GH.WorkDragAndDrop._registerDraggables(a)},0)}};GH.WorkDragAndDrop._registerDraggables=function(a){var b=GH.RankingModel.canUserRank();a.find(".ghx-columns").each(function(c,e){var d=AJS.$(e);if(b){d.find(".ghx-column").sortable({revert:0,zIndex:3000,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop,items:".js-parent-drag",cancel:".js-fake-parent, .ghx-parent-group > .ghx-subtask-group",update:GH.WorkDragAndDrop.updateIssueHandler}).find(".ghx-subtask-group").sortable({revert:0,zIndex:3000,start:function(g,h){GH.WorkDragAndDrop.issueDragStart.apply(this,[g,h]);var f=AJS.$(h.item).parent();if(f.children().length>2){f.addClass("ghx-contain")}},stop:function(f,g){GH.WorkDragAndDrop.issueDragStop.apply(this,[f,g]);AJS.$(g.item).parent().removeClass("ghx-contain")},items:".ghx-issue-subtask",update:GH.WorkDragAndDrop.updateIssueHandler})}else{GH.WorkDragAndDrop._initIssueCardsDraggable(d.find(".js-issue"),d)}})};GH.WorkDragAndDrop.registerSingleCardDraggable=function(b){var a=GH.RankingModel.canUserRank();if(!a){$container=b.closest(".ghx-columns");GH.WorkDragAndDrop._initIssueCardsDraggable(b,$container)}};GH.WorkDragAndDrop._initIssueCardsDraggable=function(a,b){a.draggable({revert:true,revertDuration:0,zIndex:3000,containment:b,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop})};GH.WorkDragAndDrop.updateIssueHandler=function(c,d){if(GH.WorkDragAndDrop.skipNextRank){AJS.$(this).sortable("cancel");return}if(GH.WorkDragAndDrop.cancel){return}var f=AJS.$(d.item);var a=GH.WorkSelectionController.getSelectedIssuesInOrder();var e=GH.WorkSelectionController.getIssueKey(f.prev(".js-issue, .ghx-parent-group"));var b=GH.WorkSelectionController.getIssueKey(f.next(".js-issue, .ghx-parent-group"));GH.WorkDragAndDrop.analytics.ranking.trigger("dragAndDrop",a.length);GH.WorkRanking.rankIssues(a,e,b)};GH.WorkDragAndDrop.issueDragStart=function(e,f){GH.WorkDragAndDrop.cancel=false;GH.WorkDragAndDrop.skipNextRank=false;GH.WorkContextMenuController.hideContextMenu();var g=f.item?true:false;var d=g?AJS.$(f.item):AJS.$(this);AJS.$(f.placeholder).height(d.height());var b=AJS.$(this);AJS.$(document).bind("keydown.dragAndDrop",function(i){if(i.keyCode==27){GH.WorkDragAndDrop.cancel=true;g?b.sortable("cancel"):b.draggable("cancel");GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("cancel")}});GH.WorkDragAndDrop.currentDragElement=d;var h=GH.WorkSelectionController.getIssueId(d);var a=GH.WorkSelectionController.getIssueKey(d);GH.WorkSelectionController.ensureIssueSelected(e,a);GH.WorkDragAndDrop.droppablesReady=false;AJS.$(".ghx-column").droppable("destroy");var c=GH.WorkSelectionController.getSelectedIssueKeys();if(c.length==1){GH.WorkDragAndDrop.initDropZoneOverlay(d);GH.WorkDragAndDrop.queryPossibleTransitions(h,a)}if(c.length>1){if(d.hasClass("ghx-parent-group")){d.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(c.length)}else{d.addClass("ghx-move-main").find(".ghx-move-count > b").text(c.length)}}GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("start","issueCount",c.length)};GH.WorkDragAndDrop.issueDragStop=function(d,e){AJS.$(document).unbind("keydown.dragAndDrop");var c=e.item?AJS.$(e.item):AJS.$(this);if(c.hasClass("ghx-parent-group")){c.children(".js-issue").removeClass("ghx-move-main")}else{c.removeClass("ghx-move-main")}GH.WorkDragAndDrop.destroyDropZoneOverlay();GH.WorkDragAndDrop.cleanTransitionClasses();GH.WorkDragAndDrop.currentDragElement=null;if(!GH.WorkDragAndDrop.cancel&&!GH.RankingModel.isRankable()){var b=Math.abs(e.position.left);var a=Math.abs(e.position.top);if(b<35&&a>50){GH.WorkDragAndDrop.showNotRankableWarning()}}GH.WorkDragAndDrop.droppablesReady=false;GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("complete")};GH.WorkDragAndDrop.showNotRankableWarning=function(){var c=GH.RapidBoard.getRapidViewConfigurationUrl(GH.WorkController.rapidViewData.id,"filter");var b='<a href="'+c+'">';var e="</a>";var d=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",b,e);GH.Notification.showWarning(d)};GH.WorkDragAndDrop.issueDropped=function(c,e){if(GH.WorkDragAndDrop.cancel){return}GH.WorkDragAndDrop.trigger("before:issueDropRender");var a=e.draggable;var f=AJS.$(this);var g=GH.WorkSelectionController.getIssueId(AJS.$(this));var b=f.attr("target-transition-id");var d=parseInt(f.attr("target-transition-status"),10);GH.WorkDragAndDrop.executeWorkflowTransition(g,b,d);GH.WorkDragAndDrop.analytics.transitioning.trigger("dragAndDrop");GH.WorkDragAndDrop.skipNextRank=true};GH.WorkDragAndDrop.queryPossibleTransitions=function(b,a){GH.Ajax.get({url:"/xboard/issue/transitions.json",data:{issueId:b}},"queryPossibleTransitions").done(function(c){GH.WorkDragAndDrop.initDropZones(a,c)})};GH.WorkDragAndDrop.dropzoneOverlay=null;GH.WorkDragAndDrop.initDropZoneOverlay=function(b){var d=GH.GridDataController.getModel();var e=d.getColumns();var c=parseInt(b.closest(".ghx-column").attr("data-column-id"),10);var a=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay({columns:e,sourceColumnId:c}));GH.WorkDragAndDrop.dropzoneOverlay=a;var f=b.closest(".ghx-swimlane");f.addClass("ghx-drag-in-progress");f.append(a);GH.WorkDragAndDrop.positionDropZoneOverlay();AJS.$("#ghx-pool").bind("scroll.overlayResizer",GH.WorkDragAndDrop.positionDropZoneOverlay)};GH.WorkDragAndDrop.positionDropZoneOverlay=function(){var o=AJS.$(".ghx-zone-overlay");var l=o.prev(".ghx-columns");var h=AJS.$("#ghx-pool");var j=h.scrollTop();var b=l.position().top;var i=(b+j);var c=h.children(".ghx-swimlane").first().children(".ghx-columns").position();var f=c.top+j;var e=b-f;if(e<0){i=i-e}var m=l.height();var p=m;var a=AJS.$(window).height();var n=a-h.offset().top-i+j;if(p>n){p=n}var k=b+m+j;var g=k-i;if(p>g){p=g}var d=p<1?"hidden":"";o.css({top:i,height:p,visibility:d})};GH.WorkDragAndDrop.initDropZones=function(b,e){var c=GH.WorkDragAndDrop.currentDragElement;if(!c||GH.WorkSelectionController.getIssueKey(c)!=b||!GH.WorkDragAndDrop.dropzoneOverlay){return}var d=GH.GridDataController.getModel();var a=AJS.$(".ghx-column-headers");var f=GH.WorkDragAndDrop.dropzoneOverlay.find(".ghx-zone-table");f.each(function(g,h){var m=AJS.$(h);var k=m.data("column-id");var i=d.getColumnById(k);if(!i){return}var l=GH.WorkDragAndDrop.getTransitionsForColumn(e,i);if(_.isEmpty(l)){return}var j=a.children(".ghx-column[data-id="+k+"]");m.addClass("ghx-target-option");j.addClass("ghx-target-option");GH.WorkDragAndDrop.setupDropZonesForColumn(m,j,l)});GH.WorkDragAndDrop.forceDroppablesReload()};GH.WorkDragAndDrop.getTransitionsForColumn=function(e,d){var c=[];for(var a=0;a<e.transitions.length;a++){for(var b=0;b<d.statusIds.length;b++){if(d.statusIds[b]==e.transitions[a].targetStatus){c.push(e.transitions[a])}}}return c};GH.WorkDragAndDrop.setupDropZonesForColumn=function(d,b,c){_.each(c,function(f){var e=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZone({transition:f,singleTransition:c.length==1}));d.append(e)});var a={accept:".js-issue, .ghx-parent-group",hoverClass:"ghx-target-hover",over:function(){d.addClass("ghx-target-hover");b.addClass("ghx-target-hover")},out:function(){if(d.find(".ghx-drop-zone.ghx-target-hover").length<1){d.removeClass("ghx-target-hover");b.removeClass("ghx-target-hover")}},tolerance:"pointer",drop:GH.WorkDragAndDrop.issueDropped};d.children().droppable(a)};GH.WorkDragAndDrop.destroyDropZoneOverlay=function(){if(GH.WorkDragAndDrop.dropzoneOverlay){GH.WorkDragAndDrop.dropzoneOverlay.remove();GH.WorkDragAndDrop.dropzoneOverlay=null;AJS.$("#ghx-pool").unbind("scroll.overlayResizer")}};GH.WorkDragAndDrop.cleanTransitionClasses=function(){AJS.$(".ghx-column").removeClass("ghx-target-option").removeClass("ghx-target-hover");AJS.$(".ghx-swimlane").removeClass("ghx-drag-in-progress")};GH.WorkDragAndDrop.forceDroppablesReload=function(){var b=AJS.$.ui.ddmanager;var a=b.current;if(a){b.prepareOffsets(a,null);b.drag(a,null)}GH.WorkDragAndDrop.droppablesReady=true};GH.WorkDragAndDrop.executeWorkflowTransition=function(g,a,f){GH.WorkDragAndDrop.transitionTargetStatus=f;var e=AJS.$("#atlassian-token").attr("content");var c=GH.Ajax.CONTEXT_PATH+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+a+"&atl_token="+e+"&returnUrl=";var d='<a href="'+c+'" class="issueaction-workflow-transition" style="display:none"></a>';var b=AJS.$(d);AJS.$("#gh").append(b);b.click();b.remove()};GH.WorkDragAndDrop.transitionTargetStatus=undefined;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.soy' */
// This file was automatically generated from WorkDragAndDrop.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.workdraganddrop.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.workdraganddrop == 'undefined') { GH.tpl.rapid.workdraganddrop = {}; }


GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-zone-overlay"><div class="ghx-zone-overlay-table">';
  var columnList4 = opt_data.columns;
  var columnListLen4 = columnList4.length;
  for (var columnIndex4 = 0; columnIndex4 < columnListLen4; columnIndex4++) {
    var columnData4 = columnList4[columnIndex4];
    output += (columnData4.id == opt_data.sourceColumnId) ? '<div class="ghx-zone-overlay-column ghx-empty"></div>' : '<div class="ghx-zone-overlay-column"><div class="ghx-zone-table" data-column-id="' + soy.$$escapeHtml(columnData4.id) + '"></div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay';
}


GH.tpl.rapid.workdraganddrop.renderDropZone = function(opt_data, opt_ignored) {
  return '<div class="ghx-zone-row" target-transition-id="' + soy.$$escapeHtml(opt_data.transition.id) + '" target-transition-status="' + soy.$$escapeHtml(opt_data.transition.targetStatus) + '"><div class="ghx-zone-cell">' + ((! opt_data.singleTransition) ? '<h2>' + soy.$$escapeHtml(opt_data.transition.name) + '</h2>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZone';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/RankController.js' */
GH.RankController={};GH.RankController.rankIssues=function(c,b,e,g,d){d=d||{};var f={issueKeys:b,customFieldId:c};var h;if(g){h="after";if(_.isNumber(g)){f.rankAfterRankable={type:"sprintmarker",id:g}}else{f.rankAfterKey=g}}else{h="before";if(_.isNumber(e)){f.rankBeforeRankable={type:"sprintmarker",id:e}}else{if(e){f.rankBeforeKey=e}else{return AJS.$.Deferred().resolve().promise()}}}var a=_.extend(d,{url:"/api/rank/"+h,data:f});return GH.Ajax.put(a).promise()};GH.RankController.rankEpics=function(c,f,b,e,d){if(!e&&!b){return AJS.$.Deferred().resolve().promise()}var g={rankCustomFieldId:c};if(e){g.rankAfterEpic=e}else{g.rankBeforeEpic=b}var a=_.extend(d||{},{bareUrl:GH.Ajax.buildPublicRestUrl("epic/"+f+"/rank"),data:g});return GH.Ajax.put(a).promise()};GH.RankController.sprintRankIssues=function(c,b,h,e,g,d){d=d||{};var f={idOrKeys:b,customFieldId:c};if(h){f.sprintId=h;f.addToBacklog=false}else{f.sprintId=null;f.addToBacklog=true}if(e){f.idOrKeyBefore=e}if(g){f.idOrKeyAfter=g}var a=_.extend(d,{url:"/sprint/rank",data:f});return GH.Ajax.put(a).promise()};GH.RankController.getErrorRankResultFromResponse=function(a){return a.isSuccess()&&_.find(a.success.rankableChanges,function(b){return b.errors&&b.errors.length>0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkRanking.js' */
GH.WorkRanking={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.WorkRanking.analytics=new a("gh.rapidboard.rankissues")})();GH.WorkRanking.sendToTop=function(e){if(!GH.WorkController.isActive()){return}var a=GH.WorkSelectionController.getSelectedIssueKey();if(!a){return}if(!GH.RankingModel.canUserRankIssue(a)){return}var d=GH.RankingModel.getFirstRankableIssueKeyInColumn(a);if(!d){return}var f=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToTop"+(e?e:""),f.length);var c=GH.RankingModel.getBestFitSelectionAfterRank(f);var b=function(){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")};GH.WorkRanking.rankIssues(f,null,d,b);if(c){GH.WorkSelectionController.gotoIssue(c)}};GH.WorkRanking.sendToBottom=function(e){if(!GH.WorkController.isActive()){return}var a=GH.WorkSelectionController.getSelectedIssueKey();if(!a){return}if(!GH.RankingModel.canUserRankIssue(a)){return}var b=GH.RankingModel.getLastRankableIssueKeyInColumn(a);if(!b){return}var f=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToBottom"+(e?e:""),f.length);var d=GH.RankingModel.getBestFitSelectionAfterRank(f);var c=function(){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")};GH.WorkRanking.rankIssues(f,b,null,c);if(d){GH.WorkSelectionController.gotoIssue(d)}};GH.WorkRanking.rankIssues=function(a,c,e,b){GH.RankingModel.reorderIssues(a,c,e);GH.SwimlaneView.rerenderCellOfIssue(e||c);var d={issueKeys:a,rankAfterKey:c,rankBeforeKey:e,customFieldId:GH.RankingModel.getRankCustomFieldId()};var f=function(g){var h=GH.RankController.getErrorRankResultFromResponse(g);if(h){GH.Notification.showWarning(h.errors[0]);GH.WorkController.reload()}else{if(_.isFunction(b)){b(g)}}};GH.Ajax.put({url:"/rank",data:d}).done(f).fail(GH.WorkController.reload)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/WindowActivityNotifier.js' */
(function(d,c,a){function b(){a(this);this._bindFocusBlur()}b.prototype={_bindFocusBlur:function(){var g=this;var f=false;var i=c.debounce(function(j){if(f){return}if(j){g.trigger("focus")}else{g.trigger("blur")}},200);var e=c.partial(i,true);var h=c.partial(i,false);d(window).on({focus:e,blur:h,unload:function(){f=true;g.trigger("unload")}})}};GH.WindowActivityNotifier=b;GH.windowActivityNotifier=new b()})(AJS.$,_,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/DurationsTimer.js' */
(function(b,a){function c(d){a(this);this._durations=d.slice();this._accumulatedDuration=0;if(d.length){b.on("focus",this.start,this).on("blur",this.pause,this).on("unload",this.pause,this);this.start()}}c.prototype={start:function(){if(this._timeout){return this}var d=this._durations[0]-this._accumulatedDuration;if(d<0){this._tick();return this}var e=this;this._timeoutStart=new Date();this._timeout=setTimeout(function(){e._clearTimeout();e._accumulatedDuration+=new Date()-e._timeoutStart;e._tick()},d);return this},pause:function(){if(this._timeout){this._clearTimeout();this._accumulatedDuration+=new Date()-this._timeoutStart}return this},destroy:function(){this._clearTimeout();b.off(this);return this},_tick:function(){this.trigger("tick",this._durations[0]);this._durations.shift();if(this._durations.length){this.start()}else{this.destroy()}},_clearTimeout:function(){if(this._timeout){clearTimeout(this._timeout);this._timeout=null}}};GH.DurationsTimer=c})(GH.windowActivityNotifier,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/Poller.js' */
GH.Poller=(function(j){var i=30000;var e={};var b=false;function c(){if(b){return}GH.log("onBlur: Disabling polling",GH.Logger.Contexts.refresh);b=true;_.each(e,h)}function g(){if(!b){return}GH.log("onFocus: Enabling polling",GH.Logger.Contexts.refresh);b=false;_.each(e,d)}function h(k){if(k.timeout!=null){clearTimeout(k.timeout);k.timeout=null}}function a(k,m){if(!k&&m.timeout==null){return}GH.log("Checking updates for: "+m.id,GH.Logger.Contexts.refresh);var l=_.partial(f,m);var n=m.handler.call(m.context,k);if(n&&n.done){n.done(l);return}l()}function f(k){k.timeout=setTimeout(_.partial(a,false,k),k.interval)}var d=_.partial(a,true);return{init:function(){j.on("focus",g).on("blur",c).on("unload",c)},addPoller:function(o,k,m,l){if(typeof k==="function"){l=m;m=k;k=i}this.removePoller(o);GH.log("Adding poller: "+o,GH.Logger.Contexts.refresh);var n={id:o,interval:k,handler:m,context:l};e[o]=n;if(!b){f(n)}},removePoller:function(l){var k=e[l];if(k){GH.log("Removing poller: "+l,GH.Logger.Contexts.refresh);h(k);delete e[l]}}}})(GH.windowActivityNotifier);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueActions.js' */
define("jira-agile/rapid/ui/plan/issue-actions",["require"],function(d){var j=d("underscore");var f=d("jquery");var i=d("jira-agile/rapid/global-events");var a=d("jira-agile/rapid/analytics-tracker");var h=d("jira-agile/rapid/ui/plan/issue-move-controller");var b;var g;var c;i.on("pre-initialization",function(){b=d("jira-agile/rapid/ui/plan/backlog-selection-controller");g=d("jira-agile/rapid/ui/plan/backlog-controller");c=d("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var e={};e.Analytics={};e.Analytics.removeFromSprint=new a("gh.sprint.issue.remove");e.removeIssuesFromSprint=function(l,k){if(!j.isArray(k)){k=[k]}GH.Ajax.get({url:"/sprint/rank/"+l+"/remove",data:{issues:k}},"removeIssuesFromActiveSprintsCheck").done(function(n){var m=h.confirmMove(n);m.done(e.removeIssuesFromCurrentSprints)})};e.removeIssuesFromCurrentSprints=function(l){var k=h.getAllIssueKeys(l);return GH.Ajax.put({url:"/sprint/rank/"+l.rapidViewId+"/remove",data:{rapidViewId:g.rapidViewData.id,idOrKeys:k}}).done(function(m){var o=m.success;var n=h.getAllIssueKeys(o);if(n.length===1){e._updateSelectionModel(n)}e.showSprintRankSuccessMessage(o);f(GH).trigger("issuesRemovedFromSprint",{issueKeys:n});e.Analytics.removeFromSprint.trigger("remove","removedIssuesCount",n.length)})};e.showSprintRankSuccessMessage=function(k){if(h.isOnlyRankOperation(k)){return}if(h.isRankBetweenFutureAndBacklog(k)){return}GH.Notification.showSuccess("Selection successfully moved.")};e._createIssueKeysLinkHtml=function(k){if(!j.isArray(k)){k=[k]}var l=j.map(k,function(m){return'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+m+'">'+AJS.escapeHTML(String(m))+"</a>"});return l.join(", ")};e.sendIssuesToSprint=function(l,k){var m=j.last(k.getIssueList().getOrder());return c.sprintRankIssues(l,k.getId(),m,null)};e.sendIssuesToTopOfBacklog=function(k,m){var l=j.first(m.getIssueList().getOrder());c.sprintRankIssues(k,null,null,l)};e.sendIssuesToBottomOfBacklog=function(k,m){var l=j.last(m.getIssueList().getOrder());c.sprintRankIssues(k,null,l,null)};e.flag=function(m,l,n,k){if(!j.isArray(m)){m=[m]}return GH.Ajax.post({url:"/xboard/issue/flag/flag.json",data:{issueKeys:m,flag:l,comment:n,commentVisibility:k}}).done(function(o){if(j.has(o.success,"errorMessages")){GH.Notification.showWarnings(j.map(o.success.errorMessages,function(p){return{autoHideDelay:10000,message:p,noAutoescape:true}}),{showTitle:true})}})};e.viewInIssueNavigator=function(k){var l=GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+(encodeURIComponent(k.join(",")));location.href=l};e.viewInExcel=function(k){var l=GH.Ajax.CONTEXT_PATH+"/sr/jira.issueviews:searchrequest-excel-all-fields/temp/SearchRequest.xls?jqlQuery=key+in+"+(encodeURIComponent("("+k.join(","))+")")+"&tempMax=1000";if(l.length>2000){GH.Notification.showErrors({errors:[{message:"You have too many issues selected to export to Excel. Please select fewer issues and try again."}]})}else{location.href=l}};e.bulkChange=function(k){var l=GH.Ajax.CONTEXT_PATH+"/secure/GHBulkChange.jspa?issueKeys="+(encodeURIComponent(k.join(",")));location.href=l};e._updateSelectionModel=function(k){b.selectionManager.selectIssue(k[0]);b.selectionManager._addSelectedIssueKeys(k)};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/FlagAndAddCommentDialog.soy' */
// This file was automatically generated from FlagAndAddCommentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialog.flagandcomment.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialog == 'undefined') { GH.tpl.dialog = {}; }
if (typeof GH.tpl.dialog.flagandcomment == 'undefined') { GH.tpl.dialog.flagandcomment = {}; }


GH.tpl.dialog.flagandcomment.dialogHeader = function(opt_data, opt_ignored) {
  return '<div class="flag-and-add-comment-header"><div class="flag-and-add-comment-summary"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag"></span>' + ((opt_data.isAdd) ? soy.$$escapeHtml(AJS.format("Add flag to {0}",opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format("Remove flag from {0}",opt_data.issueKeys))) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.dialogHeader.soyTemplateName = 'GH.tpl.dialog.flagandcomment.dialogHeader';
}


GH.tpl.dialog.flagandcomment.comment = function(opt_data, opt_ignored) {
  return ((opt_data.isAdd) ? '(flag) ' + soy.$$escapeHtml("Flag added") : '(flagoff) ' + soy.$$escapeHtml("Flag removed")) + '\n\n' + soy.$$escapeHtml(opt_data.content);
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.comment.soyTemplateName = 'GH.tpl.dialog.flagandcomment.comment';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueFlagAndCommentAction.js' */
define("jira-agile/rapid/ui/plan/issue-flag-and-comment-action",["jira/dialog/form-dialog","jira/dialog/dialog-util","jquery","underscore"],function(b,e,d,f){function g(l,k,j){return function(r){r.preventDefault();var p=this;var q=d("#flag-and-add-comment-dialog").find(".jira-dialog-content form .comment-input");var n=q.find("textarea").val().trim();var s=n?GH.tpl.dialog.flagandcomment.comment({isAdd:k,content:n}):"";var o=q.find(".security-level select option:selected").val();var m=o?o:"";GH.IssueActions.flag(l,k,s,m).always(function(){p.hide()}).done(j)}}function h(k,j){return j?AJS.format("Add flag and comment: {0} {0,choice,1#issue|1\u003cissues}",k.length):AJS.format("Remove flag and add comment: {0} {0,choice,1#issue|1\u003cissues}",k.length)}function a(k,j){return function(){var o=d("#flag-and-add-comment-dialog");o.find(".jira-dialog-heading > h2").html(h(k,j)).removeAttr("title");var m=o.find(".jira-dialog-content");m.prepend(GH.tpl.dialog.flagandcomment.dialogHeader({isAdd:j,issueKeys:k.join(", ")}));var l=m.find("form");l.addClass("ajs-dirty-warning-exempt");var n=o.find(".form-footer");n.find("p").remove();n.find('.aui-button[type="submit"]').addClass("aui-button-primary")}}function i(l,k,j){var m=new b({id:"flag-and-add-comment-dialog",url:AJS.contextPath()+"/secure/GHBulkCommentDialog.jspa?issueKeys="+encodeURIComponent(l.join(",")),submitHandler:g(l,k,j),handleRedirect:true,ajaxOptions:e.getDefaultAjaxOptions,isIssueDialog:true,widthClass:"large"});m.onContentReady(a(l,k));return m}var c={};c.execute=function(l,k,j){if(!f.isArray(l)){l=[l]}i(l,k,j).show()};return c});AJS.namespace("GH.IssueFlagAndCommentAction.execute",null,require("jira-agile/rapid/ui/plan/issue-flag-and-comment-action").execute);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.js' */
GH.ContextMenu=function(a){this.actionGroups=a.actionGroups;this.dropdown=null};GH.ContextMenu.menuSelector="#gh-ctx-menu";GH.ContextMenu.contentSelector="#gh-ctx-menu-content";GH.ContextMenu.triggerSelector="#gh-ctx-menu-trigger";GH.ContextMenu.prototype._executeContextAction=function(b){var a=this._findActionById(b);a.actionFn()};GH.ContextMenu.prototype._findActionById=function(b){var a=[];_.each(this.actionGroups,function(c){a=a.concat(c.actions)});return _.find(a,function(c){return c.id===b})};GH.ContextMenu.prototype.showAt=function(d){if(_.isUndefined(d)||_.isNull(d)){AJS.log("Cannot show the issue context menu: expected an event object to be passed");return}this._initDropdown();var a=d.pageX;var e=d.pageY;var c=AJS.$(GH.ContextMenu.contentSelector);var b=c.height();if(!GH.Util.UI.isVisibleY(e+b)){e-=b}this._positionDropdownAt(a,e);this.dropdown.show()};GH.ContextMenu.prototype._positionDropdownAt=function(b,a){AJS.$(GH.ContextMenu.triggerSelector).offset({left:b,top:a})};GH.ContextMenu.prototype._initDropdown=function(){AJS.$("#gh-ctx-menu").remove();var d=GH.tpl.contextmenu.renderContextMenu({ctxActionGroups:this.actionGroups});AJS.$("#gh").append(d);var a=this;var b=AJS.$(GH.ContextMenu.contentSelector);b.click(function(i){var h=AJS.$(i.target).closest(".js-context-menu-action");var g=h.attr("data-ctx-action");if(_.isUndefined(g)||g===false){return}a._executeContextAction(g);i.preventDefault()});var e={content:b,trigger:AJS.$(GH.ContextMenu.triggerSelector),alignment:AJS.LEFT};this.dropdown=AJS.Dropdown.create(e)[0];var c=this.dropdown.layerController._validateClickToClose;var f=function(g){if(g.button===2){return false}if(!c){return true}return c.apply(this,arguments)};this.dropdown.layerController._validateClickToClose=f};GH.ContextMenu.prototype.hide=function(){if(this.dropdown){this.dropdown.hide()}AJS.$(GH.ContextMenu.menuSelector).remove();AJS.$(GH.ContextMenu.contentSelector).remove();AJS.$(GH.ContextMenu.triggerSelector).remove();AJS.$(GH.ContextMenu.triggerSelector+"_drop").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.soy' */
// This file was automatically generated from ContextMenu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.contextmenu.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.contextmenu == 'undefined') { GH.tpl.contextmenu = {}; }


GH.tpl.contextmenu.renderContextMenu = function(opt_data, opt_ignored) {
  var output = '<div id="gh-ctx-menu" class="aui-dd-parent"><div id="gh-ctx-menu-trigger" class="aui-dd-trigger" style="width:1px; height:1px; position:absolute;"></div><div id="gh-ctx-menu-content" class="aui-list">';
  var ctxActionGroupList4 = opt_data.ctxActionGroups;
  var ctxActionGroupListLen4 = ctxActionGroupList4.length;
  for (var ctxActionGroupIndex4 = 0; ctxActionGroupIndex4 < ctxActionGroupListLen4; ctxActionGroupIndex4++) {
    var ctxActionGroupData4 = ctxActionGroupList4[ctxActionGroupIndex4];
    output += GH.tpl.contextmenu.renderContextActionGroup({ctxActionGroup: ctxActionGroupData4, isLast: ctxActionGroupIndex4 == ctxActionGroupListLen4 - 1});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextMenu.soyTemplateName = 'GH.tpl.contextmenu.renderContextMenu';
}


GH.tpl.contextmenu.renderContextActionGroup = function(opt_data, opt_ignored) {
  var output = ((opt_data.ctxActionGroup.label) ? '<h5>' + soy.$$escapeHtml(opt_data.ctxActionGroup.label) + '</h5>' : '') + '<ul class="aui-list-section aui-first ' + ((opt_data.isLast) ? 'aui-last' : '') + '">';
  var ctxActionList21 = opt_data.ctxActionGroup.actions;
  var ctxActionListLen21 = ctxActionList21.length;
  for (var ctxActionIndex21 = 0; ctxActionIndex21 < ctxActionListLen21; ctxActionIndex21++) {
    var ctxActionData21 = ctxActionList21[ctxActionIndex21];
    output += GH.tpl.contextmenu.renderContextAction({ctxAction: ctxActionData21});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextActionGroup.soyTemplateName = 'GH.tpl.contextmenu.renderContextActionGroup';
}


GH.tpl.contextmenu.renderContextAction = function(opt_data, opt_ignored) {
  var output = '<li id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '-container" class="aui-list-item"><a  data-ctx-action="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" class="aui-list-item-link js-context-menu-action" title="' + soy.$$escapeHtml(opt_data.ctxAction.label) + '" href="#" >' + soy.$$escapeHtml(opt_data.ctxAction.label);
  if (opt_data.ctxAction.shortcut) {
    output += '<span class="ghx-shortcut">';
    var keyList40 = opt_data.ctxAction.shortcut.keys;
    var keyListLen40 = keyList40.length;
    for (var keyIndex40 = 0; keyIndex40 < keyListLen40; keyIndex40++) {
      var keyData40 = keyList40[keyIndex40];
      output += (keyIndex40 == 0) ? soy.$$escapeHtml(keyData40) : '<span class="ghx-separator">' + soy.$$escapeHtml(opt_data.ctxAction.shortcut.separator) + '</span><span class="ghx-monospace">' + soy.$$escapeHtml(keyData40) + '</span>';
    }
    output += '</span>';
  }
  output += '</a></li>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextAction.soyTemplateName = 'GH.tpl.contextmenu.renderContextAction';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanContextMenuController.js' */
define("jira-agile/rapid/ui/plan/plan-context-menu-controller",["require"],function(c){var k=c("underscore");var g=c("jquery");var j=c("jira-agile/rapid/global-events");var b=c("jira-agile/rapid/analytics-tracker");var i=c("jira-agile/rapid/ui/plan/backlog-model");var e=c("jira-agile/rapid/ui/plan/issue-actions");var d=c("jira-agile/rapid/ui/print/card-printing-controller");var f;var a;j.on("pre-initialization",function(){f=c("jira-agile/rapid/ui/plan/backlog-controller");a=c("jira-agile/rapid/ui/plan/backlog-selection-controller")});var h={};h.ctxMenu=null;h.Analytics={};h.Analytics.show=new b("gh.issue.ctx.menu.show");h.Analytics.action=new b("gh.issue.ctx.menu.action");h.resolveContext=function(){var r=a.getSelectedIssuesInOrder();var n=i.findModelWithIssue(k.first(r));if(!n){return}var q=i.getSprintModels();var s=i.getBacklogModel2();var o=i.hasBulkChangePermission;var p=k.chain(n.getIssueList().getAllIssues()).pick(r).values().value();var m={selectedIssues:r,sprintModels:q,backlogModel2:s,currentModel:n,flaggedIssuesCount:k.where(p,{flagged:true}).length,hasBulkChangePermission:o};return m};h.showContextMenuAt=function(n){h.hideContextMenu();if(g(n.target).closest("a").length>0){return}var m=h.resolveContext();var o={actionGroups:h.resolveActionsForContext(m)};h.ctxMenu=new GH.ContextMenu(o);h.ctxMenu.showAt(n);n.preventDefault();g(GH.ContextMenu.menuSelector).focus();h.Analytics.show.trigger(m.type,"selectedIssuesCount",m.selectedIssues.length)};h.resolveActionsForContext=function(t){var o=[];var s=[];k.each(t.sprintModels,function(v){if(v.getId()===t.currentModel.getId()){return}var w=v.isActiveSprint()?"send to active sprint":"send to future sprint";s.push({id:"ghx-issue-ctx-action-send-to-sprint-"+v.getSprintId(),name:w,label:v.getSprintData().name,actionFn:function(){e.sendIssuesToSprint(t.selectedIssues,v).done(function(){h.Analytics.action.trigger(w,"selectedIssuesCount",t.selectedIssues.length)})}})});s.push({id:"ghx-issue-ctx-action-send-top-backlog",name:"send to top of backlog",label:"Top of Backlog",actionFn:function(){e.sendIssuesToTopOfBacklog(t.selectedIssues,t.backlogModel2);h.Analytics.action.trigger(this.name,"selectedIssuesCount",t.selectedIssues.length)}});s.push({id:"ghx-issue-ctx-action-send-bottom-backlog",name:"send to bottom of backlog",label:"Bottom of Backlog",actionFn:function(){e.sendIssuesToBottomOfBacklog(t.selectedIssues,t.backlogModel2);h.Analytics.action.trigger(this.name,"selectedIssuesCount",t.selectedIssues.length)}});if(i.isRankable()){o.push({label:"Send to",actions:s})}var r={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",actionFn:function(){e.viewInIssueNavigator(t.selectedIssues);h.Analytics.action.trigger(this.name,"selectedIssuesCount",t.selectedIssues.length)}};var n={id:"ghx-issue-ctx-action-view-in-excel",name:"view in excel",label:"View in Excel",actionFn:function(){e.viewInExcel(t.selectedIssues);h.Analytics.action.trigger(this.name,"selectedIssuesCount",t.selectedIssues.length)}};var u={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){e.bulkChange(t.selectedIssues);h.Analytics.action.trigger(this.name,"selectedIssuesCount",t.selectedIssues.length)}};var q;var p;if(t.flaggedIssuesCount!==t.selectedIssues.length){q={id:"ghx-issue-ctx-action-flag-toggle",name:"flag",label:"Add flag",actionFn:function(){e.flag(t.selectedIssues,true).done(function(){f.loadData()});AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:t.selectedIssues.length}})}};p={id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag and comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(t.selectedIssues,true,GH.BacklogController.loadData);AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag.with.comment",data:{selectedIssueCount:t.selectedIssues.length}})}}}else{q={id:"ghx-issue-ctx-action-unflag",name:"unflag",label:"Remove flag",actionFn:function(){e.flag(t.selectedIssues,false).done(function(){f.loadData()});AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:t.selectedIssues.length}})}};p={id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag and add comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(t.selectedIssues,false,GH.BacklogController.loadData);AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag.with.comment",data:{selectedIssueCount:t.selectedIssues.length}})}}}o.push({actions:[q,p]});o.push({actions:[r,n]});if(t.hasBulkChangePermission){o.push({actions:[u]})}if(t.selectedIssues.length>0){var m={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",t.selectedIssues.length),actionFn:function(){d.printSelectedIssues(l(t.selectedIssues))}};o.push({actions:[m]})}return o};function l(n){var q=i.getSprintModels();var m=[];var o=function(s){var r=null;k.find(q,function(t){r=t.getIssueList().getAllIssues()[s];return !!r});return r||null};var p=function(s){var r=i.getBacklogModel2().getIssueList();return r.getAllIssues()[s]};k.each(n,function(s){var r=o(s)||p(s);if(r){m.push(r)}});return{issues:m,epics:f.getEpicMap(),viewMode:"plan",boardType:"scrum"}}h.hideContextMenu=function(){if(h.ctxMenu!=null){h.ctxMenu.hide();h.ctxMenu=null}};return h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkContextMenuController.js' */
GH.WorkContextMenuController={};GH.WorkContextMenuController.ctxMenu=null;GH.WorkContextMenuController.Analytics={};(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.WorkContextMenuController.Analytics.show=new a("gh.issue.ctx.menu.show");GH.WorkContextMenuController.Analytics.action=new a("gh.issue.ctx.menu.action")})();GH.WorkContextMenuController.showContextMenuAt=function(c,b){GH.WorkContextMenuController.hideContextMenu();if(AJS.$(c.target).closest("a").length>0){return}var a=GH.WorkContextMenuController.resolveContext(b);var d={actionGroups:GH.WorkContextMenuController.resolveActionsForContext(a)};GH.WorkContextMenuController.ctxMenu=new GH.ContextMenu(d);GH.WorkContextMenuController.ctxMenu.showAt(c);c.preventDefault();AJS.$(GH.ContextMenu.menuSelector).focus();GH.WorkContextMenuController.Analytics.show.trigger(a.type,"selectedIssuesCount",a.selectedIssues.length)};GH.WorkContextMenuController.resolveContext=function(c){var e=GH.WorkSelectionController.getSelectedIssuesInOrder();var a=_.extend({selectedIssues:e},c);a.type=GH.WorkControls.getBoardType();var d=false;var b=GH.GridDataController.getModel().getIssueDataByKeys(e);a.flaggedIssuesCount=_.where(b,{flagged:true}).length;_.every(b,function(f){if(f.parentId){d=true;return false}return true});a.hasSubtasks=d;a.hasBulkChangePermission=GH.GridDataController.hasBulkChangePermission;return a};GH.WorkContextMenuController.resolveActionsForContext=function(l){function k(o,p,n){return function(){if(!p){GH.WorkController.reload()}else{var q=GH.GridDataController.getModel().getIssueDataByKeys(q);_.each(q,function(r){r.flagged=n;if(n){AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+r.key+"']").addClass("ghx-flagged")}else{AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+r.key+"']").removeClass("ghx-flagged")}})}}}var c=[];var i=AJS.$(".ghx-swimlane-header").length>1;var f=GH.WorkContextMenuController.getSendToTopAction(l,i?"Top of Swimlane":"Top of Column");var d=GH.WorkContextMenuController.getSendToBottomAction(l,i?"Bottom of Swimlane":"Bottom of Column");c.push({label:"Send to",actions:[f,d]});if(l.type==="scrum"&&!l.hasSubtasks&&!l.swimlane){var j={id:"ghx-issue-ctx-action-remove-from-sprint",name:"remove from sprint",label:"Remove from Sprint",actionFn:function(){GH.IssueActions.removeIssuesFromSprint(GH.WorkController.rapidViewData.id,l.selectedIssues);GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",l.selectedIssues.length)}};c.push({actions:[j]})}var e;var b;if(l.flaggedIssuesCount!==l.selectedIssues.length){e={id:"ghx-issue-ctx-action-flag-toggle",name:"flag",label:"Add flag",actionFn:function(){GH.IssueActions.flag(l.selectedIssues,true).done(k(l.selectedIssues,l.swimlane,true));AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:l.selectedIssues.length}})}};b={id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag and comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(l.selectedIssues,true,k(l.selectedIssues,l.swimlane,true));AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag.with.comment",data:{selectedIssueCount:l.selectedIssues.length}})}}}else{e={id:"ghx-issue-ctx-action-unflag",name:"unflag",label:"Remove flag",actionFn:function(){GH.IssueActions.flag(l.selectedIssues,false).done(k(l.selectedIssues,l.swimlane,false));AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:l.selectedIssues.length}})}};b={id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag and add comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(l.selectedIssues,false,k(l.selectedIssues,l.swimlane,false));AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag.with.comment",data:{selectedIssueCount:l.selectedIssues.length}})}}}c.push({actions:[e,b]});if(!l.swimlane){var h={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",actionFn:function(){GH.IssueActions.viewInIssueNavigator(l.selectedIssues);GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",l.selectedIssues.length)}};c.push({actions:[h]});var m={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){GH.IssueActions.bulkChange(l.selectedIssues);GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",l.selectedIssues.length)}};if(l.hasBulkChangePermission){c.push({actions:[m]})}}var g=function(o){var n=_.map(o,function(p){return GH.GridDataController.getModel().getIssues()[p]});return{issues:n,viewMode:"work",boardType:GH.WorkControls.getBoardType()}};if(l.selectedIssues.length>0){var a={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",l.selectedIssues.length),actionFn:function(){var n=require("jira-agile/rapid/ui/print/card-printing-controller");n.printSelectedIssues(g(l.selectedIssues))}};c.push({actions:[a]})}return c};GH.WorkContextMenuController.getSendToTopAction=function(a,b){return{id:"ghx-issue-ctx-action-send-top",name:"send to top of swimlane",label:b,actionFn:function(){GH.WorkRanking.sendToTop("WorkContextMenu")}}};GH.WorkContextMenuController.getSendToBottomAction=function(a,b){return{id:"ghx-issue-ctx-action-send-bottom",name:"send to bottom of swimlane",label:b,actionFn:function(){GH.WorkRanking.sendToBottom("WorkContextMenu")}}};GH.WorkContextMenuController.hideContextMenu=function(){if(GH.WorkContextMenuController.ctxMenu!=null){GH.WorkContextMenuController.ctxMenu.hide();GH.WorkContextMenuController.ctxMenu=null}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardState.js' */
GH.RapidBoard.State={};GH.RapidBoard.State.data={};GH.RapidBoard.State.setDataValue=function(a,b){if(_.isUndefined(b)||_.isNull(b)){delete GH.RapidBoard.State.data[a]}else{GH.RapidBoard.State.data[a]=b}};GH.RapidBoard.State.getDataValue=function(a){return GH.RapidBoard.State.data[a]};GH.RapidBoard.State.getMode=function(){return GH.RapidBoard.State.getDataValue("mode")||"work"};GH.RapidBoard.State.getStoredMode=function(){return GH.storage.get("gh.mode")||"work"};GH.RapidBoard.State.setMode=function(a){GH.RapidBoard.State.setDataValue("mode",a);GH.storage.put("gh.mode",a)};GH.RapidBoard.State.getLastCardPrintingSize=function(){return GH.storage.get("gh.card.printing.size")||"small"};GH.RapidBoard.State.setLastCardPrintingSize=function(a){GH.storage.put("gh.card.printing.size",a)};GH.RapidBoard.State.getProjectKey=function(){return GH.RapidBoard.State.getDataValue("projectKey")||undefined};GH.RapidBoard.State.setProjectKey=function(a){GH.RapidBoard.State.setDataValue("projectKey",a)};GH.RapidBoard.State.isDetailsViewOpened=function(){return GH.RapidBoard.State.getDataValue("detailViewWork")||false};GH.RapidBoard.State.isDetailsViewPlanOpened=function(){return GH.RapidBoard.State.getBoardSetting(null,"detailViewPlan",true)||false};GH.RapidBoard.State.getStoredDetailViewOpened=function(){return GH.storage.get("gh.detailViewWork")||false};GH.RapidBoard.State.setWorkViewDetailsViewOpened=function(a){GH.RapidBoard.State.setDataValue("detailViewWork",a||false);GH.storage.put("gh.detailViewWork",a||false)};GH.RapidBoard.State.setPlanViewDetailsViewOpened=function(a){GH.RapidBoard.State.setBoardSetting("detailViewPlan",a||false)};GH.RapidBoard.State.setEpicShownOnRapidBoard=function(a){GH.storage.put("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId(),a)};GH.RapidBoard.State.getEpicShownOnRapidBoard=function(){var a=GH.storage.get("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId());if(_.isNull(a)){return true}return a};GH.RapidBoard.State.setNonWorkingDaysShown=function(a,b){GH.storage.put("gh.nonWorkingDaysShown."+a,b)};GH.RapidBoard.State.getNonWorkingDaysShown=function(a){var b=GH.storage.get("gh.nonWorkingDaysShown."+a);if(_.isNull(b)){return true}return b};GH.RapidBoard.State.setQuickFiltersExpanded=function(a){GH.storage.put("gh.quickFiltersExpanded",a)};GH.RapidBoard.State.getQuickFiltersExpanded=function(){var a=GH.storage.get("gh.quickFiltersExpanded");if(_.isNull(a)){return false}return a};GH.RapidBoard.State.setDetailViewWidth=function(a){GH.storage.put("gh.detailViewWidth",a)};GH.RapidBoard.State.getDetailViewWidth=function(){var a=GH.storage.get("gh.detailViewWidth");if(_.isNull(a)){return 0}return a};GH.RapidBoard.State.getCycleTimeCalculationType=function(){var a=GH.RapidBoard.State.getDataValue("cycleTimeCalculationType");if(_.isUndefined(a)){a=GH.storage.get("gh.cycleTimeCalculationType");if(_.isNull(a)){GH.RapidBoard.State.setCycleTimeCalculationType(GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL);return GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL}}return a};GH.RapidBoard.State.setCycleTimeCalculationType=function(a){GH.RapidBoard.State.setDataValue("cycleTimeCalculationType",a);GH.storage.put("gh.cycleTimeCalculationType",a)};GH.RapidBoard.State.getStoredChartIntroState=function(){return GH.storage.get("gh.charts.intro")!==false};GH.RapidBoard.State.setChartIntroState=function(a){GH.storage.put("gh.charts.intro",a)};GH.RapidBoard.State.isChartViewOpened=function(){return GH.RapidBoard.State.getMode()=="report"};GH.RapidBoard.State.getRapidViewId=function(){var a=GH.RapidBoard.State.getDataValue("rapidViewId");if(_.isUndefined(a)){a=GH.RapidBoard.State.getMostRecentRapidViewId()}return a};GH.RapidBoard.State.getRapidViewIdWithInfo=function(){var a={};a.viewId=GH.RapidBoard.State.getDataValue("rapidViewId");a.fromLocalStorage=false;if(_.isUndefined(a.viewId)){a.viewId=GH.RapidBoard.State.getMostRecentRapidViewId();a.fromLocalStorage=true}return a};GH.RapidBoard.State.getMostRecentRapidViewId=function(){return GH.storage.get("gh.latestRapidViewId")};GH.RapidBoard.State.setRapidViewId=function(b){var a=GH.RapidBoard.State.data;GH.RapidBoard.State.setDataValue("rapidViewId",b);GH.storage.put("gh.latestRapidViewId",b)};GH.RapidBoard.State.getSelectedIssueKey=function(){return GH.RapidBoard.State.getDataValue("selectedIssueKey")||null};GH.RapidBoard.State.getStoredSelectedIssueKey=function(){return GH.storage.get("gh.selectedIssueKey")||null};GH.RapidBoard.State.setSelectedIssueKey=function(a){GH.RapidBoard.State.setDataValue("selectedIssueKey",a);GH.storage.put("gh.selectedIssueKey",a)};GH.RapidBoard.State.setChartType=function(b){var a=GH.RapidBoard.State.getBoardSettings();if(_.isUndefined(b)||_.isNull(b)){delete a.chartType}else{a.chartType=b}GH.RapidBoard.State.setBoardSettings(a)};GH.RapidBoard.State.getChartType=function(){return GH.RapidBoard.State.getBoardSettings()["chartType"]||""};GH.RapidBoard.State.getRetrospectiveSprintId=function(){return GH.RapidBoard.State.getBoardSettings()["retrospectiveSprintId"]||false};GH.RapidBoard.State.setRetrospectiveSprintId=function(a){return GH.RapidBoard.State.setBoardSetting("retrospectiveSprintId",a)};GH.RapidBoard.State.setTimeFrame=function(b){var a=GH.RapidBoard.State.getBoardSettings();if(_.isUndefined(b)||_.isNull(b)){delete a.timeFrame}else{a.timeFrame=b}GH.RapidBoard.State.setBoardSettings(a)};GH.RapidBoard.State.getTimeFrame=function(){var a=GH.RapidBoard.State.getBoardSettings()["timeFrame"];if(_.isUndefined(a)||_.isNull(a)){return 7}else{return a}};GH.RapidBoard.State.getBoardSettings=function(b){if(_.isUndefined(b)||_.isNull(b)){b=GH.RapidBoard.State.getRapidViewId()}var c=b||"00000";var a=GH.RapidBoard.State.getDataValue("boardSettings."+c)||GH.storage.get("gh.boardSettings."+c);if(!a){a={};GH.RapidBoard.State.setDataValue("boardSettings."+c,a)}return a||{}};GH.RapidBoard.State.setBoardSettings=function(a){var b=GH.RapidBoard.State.getRapidViewId();if(!b){return}GH.RapidBoard.State.setDataValue("boardSettings."+b,a);GH.storage.put("gh.boardSettings."+b,a)};GH.RapidBoard.State.isSwimlaneCollapsed=function(b){var a=GH.RapidBoard.State.getBoardSettings()["collapsedSwimlanes"]||[];return a.indexOf(b)>-1};GH.RapidBoard.State.setSwimlaneCollapsed=function(c,e){var d=GH.RapidBoard.State.getBoardSettings();var b=d.collapsedSwimlanes||[];if(e){if(b.indexOf(c)<0){b.push(c);d.collapsedSwimlanes=b}}else{var a=b.indexOf(c);if(a<0){return}b.splice(a,1);if(b.length>0){d.collapsedSwimlanes=b}else{delete d.collapsedSwimlanes}}GH.RapidBoard.State.setBoardSettings(d)};GH.RapidBoard.State.getBoardSetting=function(d,b,a){var c=GH.RapidBoard.State.getBoardSettings(d)[b];if(c!==undefined){return c}return a};GH.RapidBoard.State.setBoardSetting=function(a,c){var b=GH.RapidBoard.State.getBoardSettings();if(c!==undefined){b[a]=c}else{delete b[a]}GH.RapidBoard.State.setBoardSettings(b)};GH.RapidBoard.State.getNumberArrayBoardSetting=function(d,b,a){var c=GH.RapidBoard.State.getBoardSettings(d)[b]||a;if(!_.isArray(c)){AJS.log("Property is not of type array, returning an empty array: "+b);return[]}_.each(c,function(e){if(!_.isNumber(e)){AJS.log("Warning: Property value is not of type number: "+e)}});return c};GH.RapidBoard.State.setNumberArrayBoardSetting=function(a,c){var b=GH.RapidBoard.State.getBoardSettings();if(c!==undefined){if(!_.isArray(c)){AJS.log("Property is not of type array, returning an empty array: "+a);return}_.each(c,function(d){if(!_.isNumber(d)){AJS.log("Warning: Property value is not of type number: "+d)}});b[a]=c}else{delete b[a]}GH.RapidBoard.State.setBoardSettings(b)};GH.BoardState={};GH.BoardState.setGlobalValue=function(a,b){GH.RapidBoard.State.setDataValue(a,b);GH.storage.put("gh."+a,b)};GH.BoardState.getGlobalValue=function(b,a){return GH.RapidBoard.State.getDataValue(b)||GH.storage.get("gh."+b)||a};GH.BoardState.setPerViewValue=function(a,b){GH.RapidBoard.State.setBoardSetting(a,b)};GH.BoardState.getPerViewValue=function(b,a){return GH.RapidBoard.State.getBoardSetting(null,b,a)};GH.RapidBoard.State.pushState=function(){GH.log("GH.RapidBoard.State.pushState",GH.Logger.Contexts.state);GH.RapidBoard.UrlState.pushState()};GH.RapidBoard.State.replaceState=function(){GH.log("GH.RapidBoard.State.replaceState",GH.Logger.Contexts.state);GH.RapidBoard.UrlState.replaceState()};GH.RapidBoard.State.initializeState=function initializeState(){GH.RapidBoard.State.setSelectedIssueKey(GH.RapidBoard.State.getStoredSelectedIssueKey());GH.RapidBoard.State.setWorkViewDetailsViewOpened(GH.RapidBoard.State.getStoredDetailViewOpened());GH.RapidBoard.State.setMode(GH.RapidBoard.State.getStoredMode());GH.RapidBoard.State.setChartIntroState(GH.RapidBoard.State.getStoredChartIntroState());GH.RapidBoard.UrlState.setHandlers([GH.RapidBoardUrlState,GH.PlanUrlState,GH.WorkUrlState,GH.ReportUrlState]);if(GH.RapidBoard.UrlState.hasUrlState()){GH.RapidBoard.UrlState.loadState()}GH.RapidBoard.UrlState.replaceState();GH.RapidBoard.UrlState.init()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/card-printing.soy' */
// This file was automatically generated from card-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.print.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.print == 'undefined') { GH.tpl.rapid.print = {}; }


GH.tpl.rapid.print.printCardScreen = function(opt_data, opt_ignored) {
  var output = '';
  var hasIssue__soy3 = opt_data.issues && opt_data.issues.length > 0;
  output += '<div id="ghx-print-toolbar">' + ((hasIssue__soy3) ? '<div class="ghx-print-toolbar-left ghx-print-toolbar-item"><span class="ghx-print-toolbar-label">' + soy.$$escapeHtml("Card size") + '</span><span class="ghx-print-card-size-trigger"> </span><span class="ghx-print-card-size-options"> </span><span class="ghx-print-filter-label ghx-print-toolbar-label">' + soy.$$escapeHtml("Select") + '</span><span class="ghx-print-filter-trigger"> </span><span class="ghx-print-filter-options"> </span></div><div class="ghx-print-toolbar-right ghx-print-toolbar-item"><span id="ghx-print-toolbar-issue-count" ' + ((opt_data.warnIssueCount) ? 'class="warning"' : '') + '>' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",opt_data.issues.length)) + '</span><button id="ghx-print-card-print-btn" class="aui-button aui-button-primary">' + soy.$$escapeHtml("Print") + '</button></div>' : '') + '</div><div class="ghx-print-content-sizing ghx-print-' + soy.$$escapeHtml(opt_data.cardSize) + '">' + GH.tpl.rapid.print.printCardPageContent(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardScreen.soyTemplateName = 'GH.tpl.rapid.print.printCardScreen';
}


GH.tpl.rapid.print.printCardPageContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issues && opt_data.issues.length > 0) ? GH.tpl.rapid.print.printCards(opt_data) : '<div class="aui-message aui-message-warning">' + soy.$$escapeHtml("There is no issue to print") + '</div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardPageContent.soyTemplateName = 'GH.tpl.rapid.print.printCardPageContent';
}


GH.tpl.rapid.print.printCards = function(opt_data, opt_ignored) {
  var output = '';
  var issueList40 = opt_data.issues;
  var issueListLen40 = issueList40.length;
  for (var issueIndex40 = 0; issueIndex40 < issueListLen40; issueIndex40++) {
    var issueData40 = issueList40[issueIndex40];
    output += '<div class="ghx-card ' + ((issueData40.cardPrintingCategory) ? soy.$$escapeHtml(issueData40.cardPrintingCategory) : '') + '">' + GH.tpl.rapid.print.printOneCard({issue: issueData40, epics: opt_data.epics, showEpic: opt_data.showEpic}) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCards.soyTemplateName = 'GH.tpl.rapid.print.printCards';
}


GH.tpl.rapid.print.printOneCard = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-content">' + GH.tpl.rapid.print.printCardHeaderRow(opt_data) + '<div class="ghx-card-summary">' + soy.$$escapeHtml(opt_data.issue.summary) + '<span class="ellipsis">&#133;</span><span class="obscurer"> </span></div>' + GH.tpl.rapid.print.printCardExtraFields(opt_data) + GH.tpl.rapid.print.printCardFooterRow(opt_data) + '</div><div class="ghx-card-color" ' + ((opt_data.issue.color != null) ? 'style="border-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printOneCard.soyTemplateName = 'GH.tpl.rapid.print.printOneCard';
}


GH.tpl.rapid.print.printCardHeaderRow = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-header">' + ((opt_data.issue.typeUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></div>' : '') + ((opt_data.issue.flagged) ? '<div class="ghx-card-icon"><div class="aui-icon aui-icon-small aui-iconfont-flag"></div></div>' : (opt_data.issue.priorityUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></div>' : '') + '<div class="ghx-card-key">' + soy.$$escapeHtml(opt_data.issue.key) + '</div><div class="ghx-row-end">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, drawAvatarTextBorder: true}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardHeaderRow.soyTemplateName = 'GH.tpl.rapid.print.printCardHeaderRow';
}


GH.tpl.rapid.print.printCardExtraFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-card-extra-fields">';
    var extraFieldList97 = opt_data.issue.extraFields;
    var extraFieldListLen97 = extraFieldList97.length;
    for (var extraFieldIndex97 = 0; extraFieldIndex97 < extraFieldListLen97; extraFieldIndex97++) {
      var extraFieldData97 = extraFieldList97[extraFieldIndex97];
      output += '<div class="ghx-card-xfield-row"><div class="ghx-card-xfield-label">' + soy.$$escapeHtml(extraFieldData97.label) + '</div><div class="ghx-card-xfield-value">' + ((extraFieldData97.renderedContent) ? (extraFieldData97.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(extraFieldData97.renderedContent) : soy.$$escapeHtml(extraFieldData97.renderedContent) : soy.$$escapeHtml("None")) + '</div></div>';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardExtraFields.soyTemplateName = 'GH.tpl.rapid.print.printCardExtraFields';
}


GH.tpl.rapid.print.printCardFooterRow = function(opt_data, opt_ignored) {
  var output = '';
  var epic__soy115 = opt_data.epics && opt_data.issue.epic ? opt_data.epics[opt_data.issue.epic] : opt_data.issue.epicField;
  var hasVersion__soy116 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0;
  var hasEpic__soy117 = opt_data.showEpic && epic__soy115;
  var estimation__soy118 = opt_data.issue.estimateStatistic;
  var hasEstimate__soy119 = estimation__soy118 && estimation__soy118.statFieldId != 'issueCount' && estimation__soy118.statFieldValue && estimation__soy118.statFieldValue.text;
  output += '<div class="ghx-card-footer">';
  if (hasVersion__soy116) {
    var lozengeWidthClass__soy123 = hasEpic__soy117 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasEpic__soy117 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ghx-card-version ' + soy.$$escapeHtml(lozengeWidthClass__soy123) + '">' + ((opt_data.issue.fixVersionsUI.versions.length > 1) ? soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml("Versions") : soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions[0].name)) + '</span>';
  }
  if (hasEpic__soy117) {
    var lozengeWidthClass__soy137 = hasVersion__soy116 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasVersion__soy116 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ' + soy.$$escapeHtml(epic__soy115.epicColor) + ' ' + soy.$$escapeHtml(lozengeWidthClass__soy137) + '">' + ((epic__soy115.epicLabel) ? soy.$$escapeHtml(epic__soy115.epicLabel) : (epic__soy115.text) ? soy.$$escapeHtml(epic__soy115.text) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.issue.epicField.epicKey)) + '</span>';
  }
  if (hasEstimate__soy119) {
    var estimateWidthClass__soy155 = hasVersion__soy116 && hasEpic__soy117 ? 'ghx-card-estimate-3' : hasVersion__soy116 || hasEpic__soy117 ? 'ghx-card-estimate-2' : 'ghx-card-estimate-1';
    output += '<div class="ghx-row-end"><div class="aui-badge ghx-card-estimate ' + soy.$$escapeHtml(estimateWidthClass__soy155) + '">' + soy.$$escapeHtml(estimation__soy118.statFieldValue.text) + '</div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardFooterRow.soyTemplateName = 'GH.tpl.rapid.print.printCardFooterRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingAnalytic.js' */
define("jira-agile/rapid/ui/print/card-printing-analytic",["jquery"],function(e){var c=GH.RapidBoard.State;function d(g){this.context=g}d.prototype.registerForPrintEvent=function(){if(window.matchMedia){var g=window.matchMedia("print");g.addListener(e.proxy(function(h){if(!h.matches){b(this.context)}},this))}window.onafterprint=e.proxy(function(){b(this.context)},this)};d.takeNoteSelectedFilterId=function(g){var h=isNaN(g)?g:"sprint";e("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type",h)};function b(g){var h=g.actionContext;g.AJS.trigger("analytics",{name:f({triggeredFrom:h.triggeredFrom,boardType:h.boardType,viewMode:h.viewMode,cardSize:c.getLastCardPrintingSize()}),data:{issueCount:(e(".ghx-card").length-e(".ghx-card-filtered-out").length)}})}function f(g){return["gh.cardprinting.",g.triggeredFrom,".",g.boardType,".",g.viewMode,".",g.cardSize,".",a()].join("")}function a(){var g=e("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type");return g?g:"notApplicable"}return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingView.js' */
define("jira-agile/rapid/ui/print/card-printing-view",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-analytic"],function(m,g,l){var i=400;var k=GH.RapidBoard.State;var d={showPrintScreen:function(o){j(o)},initPrintScreen:function(){var o=window.opener.cardPrintingContext;window.opener.cardPrintingContext=undefined;c();h(o.filterItems,o.selectedItem);b(o)}};function j(r){var o=GH.tpl.rapid.print.printCardScreen(g.extend({},r,{showEpic:k.getEpicShownOnRapidBoard(),cardSize:k.getLastCardPrintingSize(),warnIssueCount:a(m.size(r.issues))}));var p=e();window.cardPrintingContext={filterItems:r.filterItems,selectedItem:r.selectedItem,actionContext:r.actionContext,AJS:AJS};var q=window.open();q.document.write([f(),"<html>","<head>",p,"</head>",'<body id="jira" class="ghx-print-card-body">',o,'<script type="text/javascript">','   var CardPrintingView = require("jira-agile/rapid/ui/print/card-printing-view");',"   CardPrintingView.initPrintScreen();","   if (window.stop) {","       window.stop();","       }","<\/script>","</body></html>"].join(""));q.document.close()}function e(){var o=[];g("head").children().each(function(p,q){if(g(q).is("title, style, base, link, meta, script, noscript")){o.push(g(q)[0].outerHTML)}});return o.join("")}function f(){var o=document.doctype;return["<!DOCTYPE ",o.name,(o.publicId?' PUBLIC "'+o.publicId+'"':""),(!o.publicId&&o.systemId?" SYSTEM":""),(o.systemId?' "'+o.systemId+'"':""),">"].join("")}function a(o){return o>=i}function c(){var o=[{id:"small",label:"Small"},{id:"medium",label:"Medium"},{id:"large",label:"Large"}];var p=new JIRA.Projects.Subnavigator({id:"ghx-print-card-size-dropdown",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-options",itemGroups:o,selectedItem:k.getLastCardPrintingSize(),hideSelectedItem:true});p.show();p.on("itemSelected",function(r){r.preventDefault();var q=r.item.id;g(".ghx-print-content-sizing").removeClass().addClass("ghx-print-content-sizing ghx-print-"+q);k.setLastCardPrintingSize(q)})}function b(p){g("#ghx-print-toolbar").on("click","#ghx-print-card-print-btn",function(){window.print()});g("#ghx-print-toolbar-issue-count").tooltip({title:function(){if(g("#ghx-print-toolbar-issue-count").hasClass("warning")){return "Too many issues? If not, go ahead and print them!"}return""}});var o=new l({actionContext:p.actionContext,AJS:p.AJS});o.registerForPrintEvent()}function h(o,p){if(!m.isEmpty(o)){var q=new JIRA.Projects.Subnavigator({id:"ghx-print-filter-cbx",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-filter-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-filter-options",itemGroups:o,selectedItem:p,hideSelectedItem:true});q.show();l.takeNoteSelectedFilterId(p);q.on("itemSelected",function(u){u.preventDefault();g(".ghx-card").addClass("ghx-card-filtered-out");var s=u.item.id;var r=".sprint-"+s;if(s==="backlog"){r=".backlog"}else{if(s==="all"){r=".ghx-card"}}var t=g(r);t.removeClass("ghx-card-filtered-out");n(t.length);l.takeNoteSelectedFilterId(s)})}else{g("#ghx-print-toolbar").find(".ghx-print-filter-label").css("display","none")}}function n(p){g("#ghx-print-toolbar").find(".ghx-print-toolbar-item").css("display",!p?"none":"");if(p){var o=g("#ghx-print-toolbar-issue-count");o.empty().append(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",p));if(a(p)){o.addClass("warning")}else{o.removeClass("warning")}}}return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingController.js' */
define("jira-agile/rapid/ui/print/card-printing-controller",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-view"],function(h,f,e){var d="all";var g="backlog";var c={printSelectedIssues:function(j){e.showPrintScreen({issues:j.issues,epics:j.epics,actionContext:{triggeredFrom:"contextMenu",viewMode:j.viewMode,boardType:j.boardType}})},printBoardPlanView:function(j){e.showPrintScreen({issues:a(j),filterItems:b(j),selectedItem:d,epics:j.epics,actionContext:{triggeredFrom:"boardMenu",viewMode:j.viewMode,boardType:j.boardType}})},printBoardWorkView:function(j){e.showPrintScreen({issues:j.issues,actionContext:{triggeredFrom:"boardMenu",viewMode:j.viewMode,boardType:j.boardType}})}};function a(k){var j=[];h.each(k.sprintIssues,function(l){j.push.apply(j,i("sprint-"+l.sprintId,l.issues))});j.push.apply(j,i("backlog",k.backlogIssues));return j}function i(k,j){return h.map(j,function(l){return h.extend({cardPrintingCategory:k},l)})}function b(m){var l=[];var k=h.filter(m.sprintIssues,function(n){return h.size(n.issues)>0});var j=h.map(k,function(n){return{id:n.sprintId.toString(),label:n.sprintName}});if((h.size(j)>1)||((h.size(j)===1)&&!h.isEmpty(m.backlogIssues))){l.push([{id:g,label:"Backlog"},{id:d,label:"All issues"}]);l.push(j)}return l}return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.AssignedWorkDialog",null,require("jira-agile/rapid/ui/plan/assigned-work-dialog"));AJS.namespace("GH.BacklogController",null,require("jira-agile/rapid/ui/plan/backlog-controller"));AJS.namespace("GH.BacklogModel",null,require("jira-agile/rapid/ui/plan/backlog-model"));AJS.namespace("GH.BacklogModel2",null,require("jira-agile/rapid/ui/plan/backlog-model2"));AJS.namespace("GH.BacklogSelectionController",null,require("jira-agile/rapid/ui/plan/backlog-selection-controller"));AJS.namespace("GH.BacklogStatistics",null,require("jira-agile/rapid/ui/plan/backlog-statistics"));AJS.namespace("GH.BacklogView",null,require("jira-agile/rapid/ui/plan/BacklogView"));AJS.namespace("GH.IssueActions",null,require("jira-agile/rapid/ui/plan/issue-actions"));AJS.namespace("GH.IssueListModel",null,require("jira-agile/rapid/ui/plan/issue-list-model"));AJS.namespace("GH.IssueMoveController",null,require("jira-agile/rapid/ui/plan/issue-move-controller"));AJS.namespace("GH.PlanContextMenuController",null,require("jira-agile/rapid/ui/plan/plan-context-menu-controller"));AJS.namespace("GH.PlanController",null,require("jira-agile/rapid/ui/plan/plan-controller"));AJS.namespace("GH.PlanControls",null,require("jira-agile/rapid/ui/plan/plan-controls"));AJS.namespace("GH.PlanDragAndDrop",null,require("jira-agile/rapid/ui/plan/plan-drag-and-drop"));AJS.namespace("GH.PlanIssueListFiltering",null,require("jira-agile/rapid/ui/plan/plan-issue-list-filtering"));AJS.namespace("GH.PlanIssueListView",null,require("jira-agile/rapid/ui/plan/plan-issue-list-view"));AJS.namespace("GH.PlanKBShortcuts",null,require("jira-agile/rapid/ui/plan/plan-kb-shortcuts"));AJS.namespace("GH.PlanRankController",null,require("jira-agile/rapid/ui/plan/plan-rank-controller"));AJS.namespace("GH.PlanUrlState",null,require("jira-agile/rapid/ui/plan/plan-url-state"));AJS.namespace("GH.PlanView",null,require("jira-agile/rapid/ui/plan/plan-view"));AJS.namespace("GH.SprintBacklogController",null,require("jira-agile/rapid/ui/plan/sprint-backlog-controller"));AJS.namespace("GH.SprintBacklogView",null,require("jira-agile/rapid/ui/plan/sprint-backlog-view"));AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config"));AJS.namespace("GH.SprintController",null,require("jira-agile/rapid/ui/plan/sprint-controller"));AJS.namespace("GH.SprintModel",null,require("jira-agile/rapid/ui/plan/sprint-model"));AJS.namespace("GH.SprintView",null,require("jira-agile/rapid/ui/plan/sprint-view"));AJS.namespace("GH.BurndownChartController",null,require("jira-agile/rapid/ui/chart/burndown-chart-controller"));AJS.namespace("GH.BurndownChartModel",null,require("jira-agile/rapid/ui/chart/burndown-chart-model"));AJS.namespace("GH.BurndownChartView",null,require("jira-agile/rapid/ui/chart/burndown-chart-view"));AJS.namespace("GH.BurndownRate",null,require("jira-agile/rapid/ui/chart/burndown-rate"));AJS.namespace("GH.BurndownReportChartController",null,require("jira-agile/rapid/ui/chart/burndown-report-chart-controller"));AJS.namespace("GH.BurndownTableProducer",null,require("jira-agile/rapid/ui/chart/burndown-table-producer"));AJS.namespace("GH.BurndownTimelineProducer",null,require("jira-agile/rapid/ui/chart/burndown-timeline-producer"));AJS.namespace("GH.CFD.Data",null,require("jira-agile/rapid/ui/chart/cfd-data"));AJS.namespace("GH.CFDController",null,require("jira-agile/rapid/ui/chart/cfd-controller"));AJS.namespace("GH.CFDView",null,require("jira-agile/rapid/ui/chart/cfd-view"));AJS.namespace("GH.ChangeEvent",null,require("jira-agile/rapid/ui/chart/change-event"));AJS.namespace("GH.ChangesReportModel",null,require("jira-agile/rapid/ui/chart/changes-report-model"));AJS.namespace("GH.Chart",null,require("jira-agile/rapid/ui/chart/chart"));AJS.namespace("GH.ChartColors",null,require("jira-agile/rapid/ui/chart/chart-colors"));AJS.namespace("GH.ChartController",null,require("jira-agile/rapid/ui/chart/chart-controller"));AJS.namespace("GH.ChartView",null,require("jira-agile/rapid/ui/chart/chart-view"));AJS.namespace("GH.NonWorkingDaysUtils",null,require("jira-agile/rapid/ui/chart/non-working-days-util"));AJS.namespace("GH.ReleaseDatePredictor",null,require("jira-agile/rapid/ui/chart/release-date-predictor"));AJS.namespace("GH.ReportController",null,require("jira-agile/rapid/ui/chart/report-controller"));AJS.namespace("GH.Reports.ControlChartController",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"));AJS.namespace("GH.Reports.ControlChartDataService",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service"));AJS.namespace("GH.Reports.ControlChartView",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view"));AJS.namespace("GH.Reports.EpicBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service"));AJS.namespace("GH.Reports.EpicBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service"));AJS.namespace("GH.Reports.EpicBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller"));AJS.namespace("GH.Reports.EpicBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view"));AJS.namespace("GH.Reports.ReleaseBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service"));AJS.namespace("GH.Reports.ReleaseBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service"));AJS.namespace("GH.Reports.ReleaseBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller"));AJS.namespace("GH.Reports.ReleaseBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view"));AJS.namespace("GH.Reports.SprintBurnupReportView",null,require("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-view"));AJS.namespace("GH.Reports.SprintBurnupReportController",null,require("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-report-controller"));AJS.namespace("GH.Reports.SprintBurnupChartDataService",null,require("jira-agile/rapid/ui/chart/v2/sprintburnup/sprint-burnup-chart-data-service"));AJS.namespace("GH.VersionReport",null,require("jira-agile/rapid/ui/chart/version-report"));AJS.namespace("GH.VersionReportController",null,require("jira-agile/rapid/ui/chart/version-report-controller"));AJS.namespace("GH.VersionReportModel",null,require("jira-agile/rapid/ui/chart/version-report-model"));AJS.namespace("GH.VersionReportView",null,require("jira-agile/rapid/ui/chart/version-report-view"));AJS.namespace("GH.EstimatePicker",null,require("jira-agile/rapid/ui/component/estimate-picker"));AJS.namespace("GH.ChartPicker",null,require("jira-agile/rapid/ui/component/chart-picker"));AJS.namespace("GH.SprintActions",null,require("jira-agile/rapid/ui/component/sprintactions/sprint-actions"));GH.sprintActions=new GH.SprintActions();AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-initialiser', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser.js' */
define("jira/inline-issue-create/agile/initialiser",["jquery","underscore","jira/inline-issue-create/util","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/inline-bootstrap","jira/inline-issue-create/agile/widget-group","jira/inline-issue-create/agile/entities/issue-types","jira/inline-issue-create/agile/views/description","jira/inline-issue-create/views/default-trigger","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/backlog-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/sprint-backlog-view","jira-agile/rapid/ui/plan/sprint-view","jira-agile/rapid/ui/plan/plan-controls","exports"],function(k,H,n,F,D,B,m,p,z,v,s,a,j,C,A,b){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.inline.issue.create.disable")){return}var h=z.extend({serializeData:function r(){return{cssClass:"iic-agile-plan"}}});var o=F.Model.extend({namedAttributes:{id:"string",translatedName:"string"}});var f=F.Collection.extend({model:o});var t=new f();var g=D.extend({issueTypesCollectionType:m});var l=new g();var u=new B({TriggerView:h,inlineBootstrap:l,widgetOptions:{descriptionView:p},createdCallback:function G(K,L){if(L!=="backlog"){K.setOverrides({Sprint:L})}K.descriptionView.currentSectionId=""+L;K.descriptionView.allSections=t;K.listenTo(K.descriptionView.allSections,"refreshed",function J(){this.render()});K.descriptionView.on("selected",function I(N){var M=k(N);var O=M.data("section-id");u.activateWidget(u.getWidget(O).widget)})}});function q(){var K=H.filter(A.quickfilters.getQuickFilters(),function I(L){return L.isActive});var J=H.map(K,function(L){return L.query});u.setFilterJQLs(J)}function y(){q();t.reset();l.fireWhenInitialized(function(){if(l.getHasCreateIssuePermission()){if(l.getHasScheduleIssuePermission()){a.getFutureSprintModels().forEach(function I(J){t.add(new o({id:""+J.sprintData.id,translatedName:J.sprintData.name}))})}t.add(new o({id:"backlog",translatedName:"Backlog"}))}});t.trigger("refreshed")}var E=k.Deferred();function i(K){if(!K||K.model.getLockState()===K.model.constants.STATE_LOCK_PERM_INACTIVE){return false}if(E.state()==="pending"){return false}var I=a.getBacklogModel2().getIssueList();var J=GH.BacklogStatistics.getIssueListStats(I,false);return(J.totalCount===0&&a.getSprintModels().length===0)}function c(){q();l.fireWhenInitialized(function(){E.then(function I(){if(l.getHasCreateIssuePermission()){var K=u.getWidget("backlog");K.render(k("#ghx-content-group .ghx-backlog-group .js-issue-list"));if(i(K.widget)){var J=K.widget.model;if(J.getIssueTypes()){J.setSelectedIssueType(J.getIssueTypes().at(0))}u.activateWidget(K.widget)}}})});JIRA.trace("inline.create.backlog.rendered")}var e;function w(){if(e!==GH.RapidBoard.State.getRapidViewId()){e=GH.RapidBoard.State.getRapidViewId();JIRA.trace("inline.create.boardjql.fetching");GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId()},deferErrorHandling:true},"rapidBoardJQL").done(function I(J){var K=J.filterConfig.query;u.setBoardJQL(K);JIRA.trace("inline.create.boardjql.fetched")})}}function x(I,K){q();if(!K.isActiveSprint()){var L=K.getSprintData().id;l.fireWhenInitialized(function J(){if(l.getHasCreateIssuePermission()&&l.getHasScheduleIssuePermission()){u.getWidget(L).render(I.find(".ghx-issues"))}})}}var d=H.once(function(){n.after(a,"setData",function J(){E.resolve();y()});n.after(a,"updateDataForSprint",y);n.after(C,"renderAllSprints",y);n.after(j,"renderBacklog",c);n.after(A.quickfilters,"setActiveQuickFilters",q);n.after(j,"updateBacklog",c);n.after(s,"updateEpicFiltering",c);n.after(s,"updateVersionFiltering",c);n.after(C,"_renderSprintContent",x);var I=a.getSprintModels();w();c();I.forEach(function(K){var L=k('.js-sprint-container[data-sprint-id="'+K.getSprintId()+'"]');x(L,K)})});b.init=H.once(function(){if(v.isActive()){d()}else{n.after(v,"initializePlanMode",d)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-init', location = '/inline-issue-create/widgets/agile-plan/init-agile-plan-inline-issue-create.js' */
require(["jira/inline-issue-create/agile/initialiser"],function(a){a.init()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-browser-metrics', location = 'includes/js/browser-metrics/BrowserMetrics.js' */
(function(){var c=true;var b=window["browser-metrics"]||{start:function(){},end:function(){}};GH.RapidBoard.ViewController.on("before:navigate",function(d){switch(d.mode){case"plan":b.start({key:"jira.agile.plan",isInitial:c,ready:".js-marker-backlog-header"});break;case"report":b.start({key:"jira.agile.report",isInitial:c,ready:"#ghx-chart-header-primary"});break;case"work":b.start({key:"jira.agile.work",isInitial:c,ready:"#ghx-work .ghx-issue, #ghx-work .ghx-sad-columns"});break}c=false});function a(e,g,d,h,f){e.on(g,function(){b.start({key:f,isInitial:false});d.on(h,function(){b.end({key:f})})})}a(GH.WorkDragAndDrop,"before:issueDropRender",GH.WorkController,"after:render","jira.board.work.transition.issue");a(GH.Components.QuickFilters.events,"before:toggle",GH.WorkController,"after:render","jira.agile.quickfilter.toggle");a(GH.DetailsFieldEditControl.events,"before:inlineedit",GH.DetailsFieldEditControl.events,"after:inlineedit","jira.agile.issuedetail.inlineedit");a(GH.DetailsView,"before:render",GH.DetailsView,"after:render","jira.agile.issuedetail.show")})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.js' */
(function(d,i,g,f,h,k){function a(){var n=g.getBacklogModel2();var l=n.getIssueList();var m={issueListStats:f.getIssueListStats(l,false),sprintModels:g.getSprintModels(),canCreateIssue:g.canCreateIssue(),canManageSprints:g.canManageSprints(),sprintIssueListStats:[],numActiveSprints:0,numFutureSprints:0};i.each(m.sprintModels,function(o){m.sprintIssueListStats.push(h.calculateSprintIssueListStats(o,o.getIssueList()));if(o.sprintData.state==="ACTIVE"){m.numActiveSprints++}if(o.sprintData.state==="FUTURE"){m.numFutureSprints++}});return m}function e(l){var n=d(".ghx-onboarding-fillyourbacklog-group");var m=d(".ghx-backlog-group .ghx-helper");if(l.issueListStats.totalCount<3&&l.sprintModels.length===0&&l.canCreateIssue){n.html(GH.tpl.planonboarding.renderFillYourBacklogMessage());m.hide()}else{if(l.issueListStats.totalCount===0||l.issueListStats.visibleCount===0){m.show();n.empty()}else{m.hide();n.empty()}}}function c(p){var o,l,m,n;if(p.canManageSprints&&p.numActiveSprints===0){m=i.first(p.sprintModels);n=i.first(p.sprintIssueListStats);if(m&&n){if(m.sprintData.state==="FUTURE"&&n.totalCount===0){o=d(".js-sprint-container");l=o.filter("[data-sprint-id="+m.sprintData.id+"]").find(".ghx-helper");l.html(GH.tpl.planonboarding.renderPlanYourSprintMessage())}}}}var b=function(){k(this)};b.prototype.updateStartSprint=function(n){d(".js-sprint-start").removeClass("aui-button-primary");if(n.canManageSprints&&n.numActiveSprints===0){var l=i.find(n.sprintModels,function(o,p){return(o.sprintData.state==="FUTURE"&&n.sprintIssueListStats[p].totalCount>0)});if(l){var m=".js-sprint-container[data-sprint-id="+l.sprintData.id+"] .js-sprint-start";d(m).addClass("aui-button-primary")}}};b.prototype.renderOnboarding=function(){var l=a();e(l);c(l);this.updateCreateSprint(l);this.updateStartSprint(l);this.refresh()};b.prototype.refresh=function(){this.trigger("refresh")};function j(l){return l.canManageSprints&&l.numFutureSprints===0&&l.numActiveSprints===0&&l.issueListStats.totalCount>=3}b.prototype.updateCreateSprint=function(l){var m=d(".js-add-sprint");if(j(l)){m.addClass("aui-button-primary")}else{m.removeClass("aui-button-primary")}};GH.PlanOnboarding=b;GH.planOnboarding=new b()}(AJS.$,_,GH.BacklogModel,GH.BacklogStatistics,GH.SprintView,GH.Events));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.soy' */
// This file was automatically generated from PlanOnboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planonboarding.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planonboarding == 'undefined') { GH.tpl.planonboarding = {}; }


GH.tpl.planonboarding.renderFillYourBacklogMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog ghx-onboarding-container"><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml("Fill your backlog with issues") + '</h5><p>' + soy.$$escapeHtml("This is your team backlog. Create and estimate new issues, and prioritize the backlog using drag and drop.") + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderFillYourBacklogMessage.soyTemplateName = 'GH.tpl.planonboarding.renderFillYourBacklogMessage';
}


GH.tpl.planonboarding.renderPlanYourSprintMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-planyoursprint ghx-onboarding-container"><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml("Plan your sprint") + '</h5><p>' + soy.$$escapeHtml("This is a sprint. Plan a sprint by dragging issues here.") + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderPlanYourSprintMessage.soyTemplateName = 'GH.tpl.planonboarding.renderPlanYourSprintMessage';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator");JIRA.Projects.Subnavigator=JIRA.Projects.Libs.Marionette.Controller.extend({_shouldShow:function(){return !this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.options.changeViewText){var a=this.model.getAllItems().length;return a>1}else{return true}},_sanitizeItems:function(){var a=this.options.itemGroups;if(a&&a[0]){if(!_.isArray(a[0])){return[a]}}return a},_buildModel:function(){this.model=new JIRA.Projects.Subnavigator.Entities.Items({itemGroups:this._sanitizeItems()});this.model.selectItem(this.options.selectedItem);this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model});this.titleView.setElement(AJS.$(this.options.titlePlaceholder))},_buildTriggerView:function(){if(this.options.changeViewText){this.triggerView=new JIRA.Projects.Subnavigator.Views.StaticTrigger({model:this.model,id:this.options.id,label:this.options.changeViewText})}else{this.triggerView=new JIRA.Projects.Subnavigator.Views.Trigger({model:this.model,id:this.options.id})}this.triggerView.setElement(AJS.$(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new JIRA.Projects.Subnavigator.Views.Content({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem});this.contentView.setElement(AJS.$(this.options.contentPlaceholder));this.listenTo(this.contentView,"click",function(a){this.contentView.$el.on({"aui-dropdown2-hide":_.bind(function(){this.model.selectItem(a);var c=this.model.get("selectedItem");var b=this.triggerPreventable("itemSelected",{item:c});if(b.isPrevented){return}if(c.link){require("jira/util/browser").reloadViaWindowLocation(c.link)}},this)})})},initialize:function(){this._buildModel();if(this._shouldShow()){this._buildTriggerView();this._buildContentView();if(this.options.titlePlaceholder){this._buildTitleView()}}},show:function(){if(this._shouldShow()){if(this._shouldShowTriggerView()){this.triggerView.render();this.contentView.render()}if(this.titleView){this.titleView.render()}}},selectItem:function(a){if(this._shouldShow()){this.model.selectItem(a)}}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="subnav-section">';
    var itemList18 = opt_data.items;
    var itemListLen18 = itemList18.length;
    for (var itemIndex18 = 0; itemIndex18 < itemListLen18; itemIndex18++) {
      var itemData18 = itemList18[itemIndex18];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData18});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + ' ' + ((opt_data.item.selected) ? ' class="aui-nav-selected"' : '') + '><a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + ((opt_data.item.link) ? soy.$$escapeHtml(opt_data.item.link) : '#') + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button aui-button-link aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="menu" aria-haspopup="true">' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator.Views.Content");JIRA.Projects.Subnavigator.Views.Content=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600;this.hideSelectedItem=this.options.hideSelectedItem===false},_hideTooltips:function(){clearTimeout(this.tooltipTimer);AJS.$(".tipsy").remove()},events:{"click a":function(b){b.preventDefault();this._hideTooltips();var a=AJS.$(b.target).attr("data-item-id");this.trigger("click",a)},"mouseenter @ui.item":function(a){this._hideTooltips();this.tooltipTimer=setTimeout(function(){AJS.$(a.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var a=this.model.get("selectedItem");var c=this.model.get("itemGroups");var b=this.hideSelectedItem;if(a){c=_.map(c,function(d){if(b){return _.map(d,function(f){var e=_.clone(f);if(e.id===a.id){e.selected=true}return e})}else{return _.reject(d,function(e){return e.id===a.id})}})}return{itemGroups:c,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this._hideTooltips();AJS.$(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger");JIRA.Projects.Subnavigator.Views.Trigger=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate()}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger");JIRA.Projects.Subnavigator.Views.StaticTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({serializeData:function(){return{label:this.options.label,renderAsButton:true,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this.$el.removeClass("subnav-trigger")}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator.Views.Title");JIRA.Projects.Subnavigator.Views.Title=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.title,serializeData:function(){var a=this.model.get("selectedItem");return{title:a.label}}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
(function(){AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items");JIRA.Projects.Subnavigator.Entities.Items=Backbone.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return _.isEmpty(this.getAllItems())},selectItem:function(b){var a=this.getAllItems();this.set("selectedItem",_.find(a,function(c){return c.id===b})||_.first(a))},getAllItems:function(){return _.flatten(this.get("itemGroups"))}})}());;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.soy' */
// This file was automatically generated from SubnavigatorController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.subnavigator.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.subnavigator == 'undefined') { GH.tpl.subnavigator = {}; }


GH.tpl.subnavigator.header = function(opt_data, opt_ignored) {
  return '<h1><span id="ghx-board-name" class="subnav-page-header">' + soy.$$escapeHtml(opt_data.headerText) + '</span></h1>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.header.soyTemplateName = 'GH.tpl.subnavigator.header';
}


GH.tpl.subnavigator.subnavigator = function(opt_data, opt_ignored) {
  return '<span class="subnav-container"><span id="subnav-title"></span><span id="subnav-trigger"></span><span id="subnav-opts"></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.subnavigator.soyTemplateName = 'GH.tpl.subnavigator.subnavigator';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/PlanSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider");define("jira-agile/subnavigator/plan-subnavigator-context-provider",["underscore","jira-agile/rapid/ui/plan/plan-controls"],function(b,a){var d={id:0,label:"Backlog"};var c={hasSubnavigator:function(){return true},header:function(){return a.rapidViewConfig.name},itemList:function(){return[d]},onLoad:function(){},selectedItem:function(){return d.id},getChangeViewText:function(){return"_"},analyticEvent:function(){}};return c});AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider",null,require("jira-agile/subnavigator/plan-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/WorkSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider");define("jira-agile/subnavigator/work-subnavigator-context-provider",["jquery","underscore","jira-agile/rapid/work/work-controls"],function(g,b,a){var c="all";var f="sprintFilterChange";var e={id:0,label:"Kanban board"};var d={id:0,label:"Active sprints"};var h={hasSubnavigator:function(){return true},header:function(){return a.rapidViewConfig.name},itemList:function(){if(this._isKanban()){return[e]}var i=b.map(this._getSprints(),function(j){return{id:j.id.toString(),label:j.name}});if(i.length===0){return[d]}else{if(i.length===1){return i}}return[i,[{id:c,label:"All sprints"}]]},onLoad:function(){},selectedItem:function(){if(this._isKanban()){return e.id}var j=a.sprintfilters.getActiveSprintFilters()[0];if(j){return j.toString()}var i=this._getSprints().length;if(i===0){return d.id}else{if(i===1){return a.sprintfilters.getSprintData()[0].id.toString()}}return c},selectionHandler:function(i){var j=(i===c)?a.sprintfilters.getActiveSprintFilters()[0]:parseInt(i,10);a.sprintfilters.toggleActiveSprintFilter(j);g(a.sprintfilters).trigger(f)},getChangeViewText:function(){return "Switch sprint"},analyticEvent:function(j,i){return{name:"jira.project.sidebar.sprint.select",data:{sprintId:j,initialLoad:i}}},_getSprints:function(){return a.sprintfilters.getSprintData()},_isKanban:function(){return !a.rapidViewConfig.sprintSupportEnabled}};return h});AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider",null,require("jira-agile/subnavigator/work-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/ReportSubnavigatorContextProvider.js' */
define("jira-agile/subnavigator/report-subnavigator-context-provider",["underscore","jira/util/browser","jira-agile/rapid/ui/chart/report-controller"],function(a,d,b){var c={selectionHandler:function(f){if(f==="com.atlassian.jira.jira-projects-plugin:report-page"){var e=AJS.contextPath()+"/projects/"+JIRA.API.Projects.getCurrentProjectKey()+"?selectedItem="+f;d.reloadViaWindowLocation(e)}else{b.selectChart(f);this._storeLastViewedReportLink(f)}},header:function(){return b.rapidViewConfig.name},hasSubnavigator:function(){return true},itemList:function(){var e=a.map(b.getApplicableCharts(),function(f){return{id:f.id,label:f.name,description:f.tooltip}});if(JIRA.API.Sidebar.isProjectSidebar()){return[e,[{id:"com.atlassian.jira.jira-projects-plugin:report-page",label:"All reports",description:"Show the reports overview page, which lists all available reports"}]]}else{return e}},onLoad:function(){var e=this.selectedItem();this._storeLastViewedReportLink(e)},selectedItem:function(){return b.getSelectedChart()},getChangeViewText:function(){return "Switch report"},analyticEvent:function(f,e){return{name:"jira.project.sidebar.report.select",data:{reportId:f,initialLoad:e}}},_storeLastViewedReportLink:function(g){if(JIRA.API.Sidebar.isProjectSidebar()&&JIRA.Projects.Sidebar.Reports){var h=b.rapidViewData.id;var e=JIRA.API.Projects.getCurrentProjectKey();var f=AJS.contextPath()+"/secure/RapidBoard.jspa?rapidView="+h+"&projectKey="+e+"&view=reporting&chart="+g+"&useStoredSettings=true";JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(f)}}};return c});AJS.namespace("GH.RapidBoard.ReportSubnavigatorContextProvider",null,require("jira-agile/subnavigator/report-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.js' */
AJS.namespace("GH.RapidBoard.SubnavigatorController");GH.RapidBoard.SubnavigatorController=(function(f,e,c,d,b){var a={contextProviders:{plan:f,work:e,report:c},render:function(){this._getContextProvider().onLoad();this.setHeader();this.renderSubnavigator()},setHeader:function(){AJS.$("#ghx-view-selector").children().remove();AJS.$("#ghx-view-selector").html(d.header({headerText:this._getContextProvider().header()}))},renderSubnavigator:function(){var h=this._getContextProvider();if(!h.hasSubnavigator()){return}this.createSubnavigatorPlaceholders();var j=JIRA.Projects.Subnavigator;var g=this._getSubnavSettings(j,h);var i=new j(g);i.on("itemSelected",function(k){k.preventDefault();h.selectionHandler(k.item.id);AJS.trigger("analyticsEvent",h.analyticEvent(k.item.id,false))});i.show();AJS.trigger("analyticsEvent",h.analyticEvent(h.selectedItem(),true))},createSubnavigatorPlaceholders:function(){AJS.$("#ghx-view-selector h1").append(d.subnavigator())},_getContextProvider:function(){var g=b.getMode();return this.contextProviders[g]},_getSubnavSettings:function(j,i){var h={id:b.getMode(),triggerPlaceholder:"#subnav-trigger",contentPlaceholder:"#subnav-opts",itemGroups:i.itemList(),selectedItem:i.selectedItem()};var g=j.prototype._shouldShowTriggerView!==undefined;if(g){h.titlePlaceholder="#subnav-title";h.hideSelectedItem=true;h.changeViewText=i.getChangeViewText()}return h}};return a}(GH.RapidBoard.PlanSubnavigatorContextProvider,GH.RapidBoard.WorkSubnavigatorContextProvider,GH.RapidBoard.ReportSubnavigatorContextProvider,GH.tpl.subnavigator,GH.RapidBoard.State));;
;
/* module-key = 'com.pyxis.greenhopper.jira:sidebar', location = 'includes/js/sidebar/create-board.js' */
AJS.$(function(){AJS.$("body").on("click",".js-create-board",function(a){a.preventDefault();GH.UserData.userConfig={canCreateProject:false,hasProjectsAccessible:true,hasFiltersAccessible:true};GH.StartWizardView.startWizard()})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperones.js' */
define("jira-agile/onboarding/chaperones/plan-chaperones",["jquery","underscore"],function(d,a){var e=function(f){this.chaperones=[{id:"create-sprint",title:"Create a sprint",bodyHtml:"You now have some issues in your backlog. Create a sprint to start working on them.",anchorSelector:".js-add-sprint.aui-button-primary"},{id:"start-sprint",title:"Start your sprint",bodyHtml:"Click this button when you are ready to start the sprint.",anchorSelector:".js-sprint-start.aui-button-primary"}];f.on("refresh",c,this)};function c(){a.each(this.chaperones,function(f){if(typeof f.helptip!=="undefined"){f.helptip.refresh()}else{if(d(f.anchorSelector).length){this._initChaperone(f)}}},this)}function b(){return AJS.Meta.getBoolean("onboarding-has-completed-first-use-flow")}e.prototype._initChaperone=function(f){if(AJS.HelpTip&&b()){if(typeof f.helptip==="undefined"){f.helptip=new AJS.HelpTip({id:"onboarding-"+f.id,title:f.title,bodyHtml:f.bodyHtml,anchor:f.anchorSelector,showCloseButton:true});f.helptip.show({force:true});d(document).on("click.planChaperone",f.anchorSelector,a.bind(function(){this._dismissChaperone(f)},this))}}};e.prototype._dismissChaperone=function(f){if(typeof f.helptip!=="undefined"){f.helptip.dismiss("dismissed");delete f.helptip;d(document).off("click.planChaperone",f.anchorSelector)}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperonesInit.js' */
require(["jira-agile/onboarding/chaperones/plan-chaperones"],function(a){new a(GH.planOnboarding)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml("Application Links") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml("Shortcuts") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}}) + '<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ' + soy.$$escapeHtml(false) + '<\/script>';
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true">' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(e,c){c.AppSwitcher=function(f){var h=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var g="unified.usermanagement";var i=this;this.$dropdown=null;f=e.extend({dropdownContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=e(f.dropdownContents)}return this.$dropdown};this.updateDropdown=function(j){e(function(){i.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:j,showAdminLink:c.environment.isUserAdmin,adminLink:h}));i.bindAnalyticsHandlers();if(c.environment.isAppSuggestionAvailable===true){i.handleSuggestionApps(j)}})};this.bindAnalyticsHandlers=function(){e(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});e("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});e("#app-switcher .nav-link").on("click",function(){var l="custom";var m=e(this).find("a");var k=m.attr("href");var j=window.location.hostname;if(k.indexOf(j+"/wiki")>-1){l="confluence"}else{if(k.indexOf(j+"/build")>-1){l="bamboo"}else{if(k.indexOf(j)>-1){l="jira"}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:l}})});e(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(c.environment.isSiteAdminUser===true)&&AJS.DarkFeatures.isEnabled(g)};this.handleSuggestionApps=function(m){var n=_.map(m,function(o){return o.applicationType.toLowerCase()});var k=e("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");k.html(navlinks.templates.appswitcher_old.suggestionApps);var l=k.find(".suggestion-apps");var j=false;_.each(a,function(o){if(!_.contains(n,o.appName)){j=true;l.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:o,isBillingSystemEnabled:i.isBillingSystemEnabled()}))}});if(!j){return}e("#app-switcher").append(k);e(".app-discovery-suggestion-app").click(function(){var p=e(this).find("a");var o;if(c.environment.isSiteAdminUser){o="appswitcher.discovery.siteadmin.select.inproduct."}else{o="appswitcher.discovery.user.select."}o=o+p.attr("id").toLowerCase();AJS.trigger("analytics",{name:o})});e(".app-discovery-suggestion-app").hover(function(){e(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});e(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});d(b,"true");k.remove()})};this.showError=function(){e(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});i.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(i.retryLoading,i))})};this.retryLoading=function(j){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();j&&j.stopPropagation()};this.getLinks()};var b="key-no-thanks";var a=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var d=function(f,g){e.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:f,value:g})})};if(c.onInit){c.onInit()}}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape("Configure\x26hellip;") + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default'}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}}) + '<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.environment = ' + soy.$$escapeHtml({}) + ';<\/script>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy92 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy92) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy92) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml("Try other Atlassian apps") + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml("Don\x27t show this again") + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    var hasItems__soy4 = sectionData3.items && sectionData3.items.length > 0;
    output += '<div class="aui-dropdown2-section">' + ((hasItems__soy4 && sectionData3.label) ? '<strong>' + soy.$$escapeHtml(sectionData3.label) + '</strong>' : '') + '<ul class=\'aui-list-truncate\'' + ((sectionData3.id) ? ' id="' + soy.$$escapeHtml(sectionData3.id) + '"' : '') + ((sectionData3.style) ? ' class="' + soy.$$escapeHtml(sectionData3.style) + '"' : '') + '>';
    if (hasItems__soy4) {
      var itemList25 = sectionData3.items;
      var itemListLen25 = itemList25.length;
      for (var itemIndex25 = 0; itemIndex25 < itemListLen25; itemIndex25++) {
        var itemData25 = itemList25[itemIndex25];
        output += JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData25);
      }
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.style) ? ' class="' + soy.$$escapeHtml(opt_data.style) + '"' : '') + '><a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList66 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen66 = keyList66.length;
    for (var keyIndex66 = 0; keyIndex66 < keyListLen66; keyIndex66++) {
      var keyData66 = keyList66[keyIndex66];
      output += (keyData66 != 'class') ? ' ' + soy.$$escapeHtml(keyData66) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData66]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-dropdown2.js' */
require(["jira/ajs/ajax/smart-ajax","jquery"],function(SmartAjax,$){$(function(){$("nav.aui-header a.aui-dropdown2-trigger").each(function(){var $trigger=$(this);var $dropdown=$("#"+$trigger.attr("aria-owns"));var ajaxKey=$dropdown.data("aui-dropdown2-ajax-key");$dropdown.bind("aui-dropdown2-show",function(event,options){$dropdown.trigger("aui-dropdown2-show-before");if(ajaxKey){$dropdown.empty();$dropdown.addClass("aui-dropdown2-loading");SmartAjax.makeRequest({url:AJS.contextPath()+"/rest/api/1.0/menus/"+ajaxKey,data:{inAdminMode:AJS.Meta.getBoolean("in-admin-mode")},dataType:"json",cache:false,success:function(data){$dropdown.removeClass("aui-dropdown2-loading");$dropdown.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(data));if(options&&options.selectFirst){$dropdown.find("a:not(.disabled)").filter(":first").addClass("active")}$dropdown.trigger("aui-dropdown2-show-after")}})}else{$dropdown.trigger("aui-dropdown2-show-after")}})})})});;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feedback-issue-collector', location = '/static/page/sidebar/ancillary/feedback/issue-collector.js' */
(function(f){var e=require("jira/loading/loading");var h=false;var a=d;function d(){if(h){return}b();window.ATL_JQ_PAGE_PROPS={triggerFunction:function(i){a=i;_.defer(function(){c(true);i()})}};f.ajax({url:"https://jira.atlassian.com/s/d41d8cd98f00b204e9800998ecf8427e/en_UK-3tj2he/6322/131/1.4.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=55320d27",type:"get",cache:true,timeout:10000,dataType:"script"}).fail(function(i){c();JIRA.Messages.showErrorMsg(JIRA.SmartAjax.buildSimpleErrorContent(i),{closeable:true})})}function b(){h=true;AJS.dim();e.showLoadingIndicator()}function c(i){h=false;if(i){AJS.dim.$dim.css("transition","none")}AJS.undim();if(i&&AJS.dim.$dim){AJS.dim.$dim.css("transition","")}e.hideLoadingIndicator()}var g=WRM.data.claim("com.atlassian.jira.jira-projects-plugin:feedback-issue-collector.data");if(g&&g.isFeedbackButtonEnabled){f(function(){JIRA.API.getSidebar().done(function(m){var o=m.getAUISidebar();var j=m.getGroup("jira-projects-ancillary-group");if(j===undefined){return}var l=j.getItem("com.atlassian.jira.jira-projects-plugin:sidebar-feedback-link")||j.getItem("com.pyxis.greenhopper.jira:sidebar-feedback-link");var k=l.ui.link;k.data("custom-tooltip","We\'d love to hear your thoughts on JIRA.");var i={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){return f(this).data("custom-tooltip")}};function n(r){var q=f(r);q.tipsy(i).tipsy("show");var s=q.data("tipsy")&&q.data("tipsy").$tip;s.css({opacity:""}).addClass("tooltip-shown")}function p(s,r){var q=f(s);var t=q.data("tipsy")&&q.data("tipsy").$tip;if(t){t.on("transitionend",function(){q.tipsy("hide")});t.removeClass("tooltip-shown");if(r){t.remove();q.removeData("tipsy")}}}o.on("expand-end collapse-end",function(){p(k,true)});k.on("mouseenter focus",function(q){n(q.currentTarget)});k.on("click blur mouseleave",function(q){p(q.currentTarget)});l.on("before:select",function(q){q.preventDefault()})})});f(document).on("click",".jira-projects-feedback-collector",function(i){i.preventDefault();a()})}})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
AJS.$(function(a){a(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(b){b.preventDefault();AJS.navigation(a(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml("Project shortcuts") + '</div>' + ((opt_data.canManage) ? '<p class="project-shortcuts-group__description' + ((opt_data.numberOfShortcuts > 0) ? ' hidden' : '') + '">' + soy.$$escapeHtml("Add a link to useful information for your whole team to see.") + '</p>' : '') + '<ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList24 = opt_data.shortcuts;
      var shortcutListLen24 = shortcutList24.length;
      for (var shortcutIndex24 = 0; shortcutIndex24 < shortcutListLen24; shortcutIndex24++) {
        var shortcutData24 = shortcutList24[shortcutIndex24];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData24.id, name: shortcutData24.name, url: shortcutData24.url, icon: shortcutData24.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml("Add link") + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<a href="#project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>' + soy.$$escapeHtml("Actions") + '</span></a><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml("Edit") + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml("Delete") + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy83 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy83]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy83].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, id: 'project-shortcuts-url-' + opt_data.action, labelContent: "Web address", placeholderText: "e.g. http://www.atlassian.com", extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({forField: 'project-shortcuts-name-' + opt_data.action, content: "Label"}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: "e.g. Atlassian website", extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList136 = opt_data.iconsList;
  var iconListLen136 = iconList136.length;
  for (var iconIndex136 = 0; iconIndex136 < iconListLen136; iconIndex136++) {
    var iconData136 = iconList136[iconIndex136];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData136.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData136.className) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml("Add link") + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit">' + soy.$$escapeHtml("Add") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Edit link") + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Save") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Delete shortcut") + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml("Are you sure you want to delete this shortcut?") + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Delete") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/aui-sidebar-overrides.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.SidebarOverrides");JIRA.Projects.Sidebar.ProjectShortcuts.SidebarOverrides.init=function(){var a=AJS.sidebar(".aui-sidebar").submenus;a.moveSubmenuToInlineDialog=function(b){this.$placeholderSubmenu=b.clone(true);this.inlineDialog.find(".aui-navgroup-inner").append(this.$placeholderSubmenu);return this};a.restoreSubmenu=function(){delete this.$placeholderSubmenu;return this}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var c=[];var a={};var b=false;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(d){c=d||c;a={};_.each(d,function(e){a[e.name]=e})},getIconsList:function(){return c},getIconsMap:function(){return a},getAllIconsClasses:function(){return _.reduce(c,function(d,e){return d+e.className+" "},"")},getIconFromName:function(d){if(this.getIconsMap()[d]){return this.getIconsMap()[d]}if(this.getIconsList()[0]){return this.getIconsList()[0]}return{}},setWithIcons:function(d){b=d},isWithIcons:function(){return b}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut");function b(d){var f;try{f=JSON.parse(d.responseText)}catch(g){f={message:"We couldnt complete the action as there seems to be a communication issue."}}return f}JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:""},initialize:function(e,d){if(!d||!d.projectKey){throw"Project key is required"}this.projectKey=d.projectKey},urlRoot:function c(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function a(){this.unset("id");this.set("url",this.defaults.url);this.set("name",this.defaults.name);this.set("icon",this.defaults.icon)},save:function(){if(this.saving==true){return}this.saving=true;var e=this;e.trigger("save:start");var h=this.isNew()?"create":"update";this.sync(h,e).always(function d(){e.saving=false;e.trigger("save:finish")}).done(function f(i){e.set(i,{silent:true});JIRA.trace("jira.projects.shortcuts."+h+".success");e.trigger("save:success")}).fail(function g(i){var j=b(i);JIRA.trace("jira.projects.shortcuts."+h+".fail");e.trigger("save:failure",j)})},destroy:function(){if(this.saving==true){return}this.saving=true;var e=this;e.trigger("remove:start");var d=Backbone.Model.prototype.destroy.apply(this,arguments);d.always(function(){e.saving=false;e.trigger("remove:finish")}).done(function f(){e.trigger("remove:success")}).fail(function g(h){var i=b(h);e.trigger("remove:failure",i)});return d}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors");JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function a(e,d){var c=d.model;this.listenTo(c,"save:failure remove:failure",function b(f){this.set({urlError:f.errors&&f.errors.url,nameError:f.errors&&f.errors.name,iconError:f.errors&&f.errors.icon,generalError:(f.message||(f.errorMessages&&f.errorMessages.length>0))?f.message||f.errorMessages[0]:undefined})});this.listenTo(c,"save:success remove:success",this.clear)}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts");JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(b,a){this.projectKey=a.projectKey}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
(function(b){var h="projectShortcutsIconsId";var a="active aui-dropdown2-active";function k(l,p){var o=5;var r=l.ui.iconList.find(".active");var q=l.ui.iconList.find("li").size();var n;switch(p.keyCode){case AJS.keyCode.LEFT:n=-1;break;case AJS.keyCode.RIGHT:n=1;break;case AJS.keyCode.DOWN:n=o;break;case AJS.keyCode.UP:n=-o;break;default:n=0}var m=r.closest("li").index()+n;if(m<0||m>=q){m+=q;m%=q}r.removeClass(a);l.ui.icon.eq(m).addClass(a)}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function i(){var m=this._modelIcon();var l=this.ui.iconPicker.children();l.removeClass(this.iconFactory.getAllIconsClasses());l.addClass(m.className);this.ui.iconPicker.data(h,m.name)},"save:start":function j(){this.ui.iconPicker.attr("aria-disabled",true)},"save:finish":function g(){this.ui.iconPicker.attr("aria-disabled",false)}},events:{"keydown @ui.iconPicker":function e(l){if(!this.isPickerActive()){return}switch(l.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:k(this,l);l.stopPropagation();l.preventDefault();this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker();l.stopPropagation();l.preventDefault();break}}},initialize:function(l){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons;this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var l=this;this.ui.icon.on("click",function m(){var n=b(this).data(h);l.analytics.iconChangeConfirmed(l.model,n);l.analyticsOldIconId="";l.analyticsIconClicked=true;l.model.set("icon",n);l.ui.iconPicker.focus()});this.ui.iconList.on("aui-dropdown2-show",function(){l.ui.iconPicker.focus();l.analyticsIconClicked=false;l.analytics.iconPickerOpened(l.model)});this.ui.iconList.on("aui-dropdown2-hide",function(){l.analytics.iconPickerClosed(l.model,l.analyticsIconClicked)});this.analyticsOldIconId="";this.ui.iconList.on("aui-dropdown2-item-selected",function(n){var o=AJS.$(this).find(".active").data(h);if(l.analyticsOldIconId&&l.analyticsOldIconId!==o){l.analytics.iconChanged(l.model,o,l.analyticsOldIconId)}l.analyticsOldIconId=o});this.ui.iconPicker.data(h,this.model.get("icon"))},hideIconPicker:function(){if(this.isPickerActive()){this.ui.iconPicker.trigger("aui-button-invoke")}},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function c(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function f(){this.model.set("icon",this.ui.iconPicker.data(h)||"")},focus:function d(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
(function(g){function d(r){r.preventDefault();this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl();if(this.iconPickerContent){this.iconPickerContent.onFormSubmit()}this.model.set("url",this.ui.url.val());this.model.set("name",this.ui.name.val());this.model.save()}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function p(r){r.preventDefault();this.model.clear();this.setNameAutomagically=true;this.errorModel.clear();this.trigger("cancel")},"click @ui.submit":d,"submit @ui.form":d,"blur @ui.url":function q(){this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function i(){this.model.set("url",this.ui.url.val());this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function c(){this.setNameAutomagically=false;this.model.set("name",this.ui.name.val())},"keydown @ui.name":function a(r){if(!this.iconPickerContent){return}if(r.shiftKey&&r.keyCode===AJS.keyCode.TAB){r.preventDefault();this.iconPickerContent.focus()}},"keydown @ui.url":function a(r){if(!this.iconPickerContent){return}if(!r.shiftKey&&r.keyCode===AJS.keyCode.TAB){r.preventDefault();this.iconPickerContent.focus()}}},modelEvents:{"save:start":function n(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"save:finish":function m(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"})},"save:failure":function l(){this.render();if(this.errorModel.get("generalError")){var r=require("aui/flag");r({type:"error",title:"We couldn\'t save the link for you",close:"auto",body:this.errorModel.get("generalError")})}if(this.errorModel.get("nameError")){this.ui.name.focus()}if(this.errorModel.get("urlError")){this.ui.url.focus()}return this},"save:success":function b(){this.setNameAutomagically=true}},initialize:function f(s){this.errorModel=s.errorModel;var r=this.model.get("name");this.setNameAutomagically=(r.length==0);this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function k(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){if(this.iconFactory.isWithIcons()){this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this});this.getRegion("iconPicker").show(this.iconPickerContent)}else{delete this.iconPickerContent}},hideIconPicker:function(){if(!this.iconPickerContent){return}this.iconPickerContent.hideIconPicker()},setName:function j(r){this.ui.name.val(r);this.model.set("name",r)},setUrl:function e(r){this.ui.url.val(r);this.model.set("url",r)},ensureProtocolPrefix:function o(){var r=this.ui.url.val().trim();if(r.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(r)){this.setUrl("http://"+r)}},tryToAutomagicallyDeriveNameFromUrl:function h(){var s=this.ui.url.val().trim();if(this.setNameAutomagically){if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(s)){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(s);this.setName(r[3])}else{this.setName(s)}}}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
(function(d){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function a(){_.bindAll(this,"toggleDropdown");this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function b(){this.trigger("click:link",this.model)}},onRender:function(){var e=this;this.unwrapTemplate();var i=d(window);var h=d(".aui-sidebar-body");this.ui.edit.on("click",function g(k){k.preventDefault();e.ui.trigger.blur();var j=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:e.model});e.trigger("edit:open",e.model);e.listenToOnce(j,"dialog:close",function l(m){e.trigger("edit:close",e.model,m)})});this.ui.del.on("click",function f(j){j.preventDefault();e.ui.trigger.blur();var k=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:e.model})});this.ui.dropdown.on({"aui-dropdown2-show":function(){e.$el.addClass("aui-nav-selected");h.one("scroll",e.toggleDropdown);i.one("scroll",e.toggleDropdown);e.ui.trigger.focus()},"aui-dropdown2-hide":function(){e.$el.removeClass("aui-nav-selected");h.off("scroll",e.toggleDropdown);i.off("scroll",e.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:true,isWithIcon:this.iconFactory.isWithIcons()});if(this.iconFactory.isWithIcons()){e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})}return e},toggleDropdown:function c(){this.ui.trigger.trigger("aui-button-invoke")}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
(function(e){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function d(){if(this.collection.length==0&&this.lastCollectionLength!=0||this.collection.length!=0&&this.lastCollectionLength==0){this.lastCollectionLength=this.collection.length;this.ui.description.toggleClass("hidden",this.collection.length>0);this.$el.toggleClass("project-shortcuts-group_empty",this.collection.length==0)}}},initialize:function a(){var g=this;AJS.sidebar(".aui-sidebar").on("collapse-start",function h(){g.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")});this.lastCollectionLength=this.collection.length},attachElContent:function(g){var h=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:g});JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,h);this.$el=e(h.getElement());return this},onRender:function f(){var h=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group").getItem("project-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(h,"dialog:open",function i(){this.trigger("add:open")});this.listenTo(h,"dialog:close",function g(j){this.trigger("add:close",j)})},serializeData:function b(){return{canManage:true,numberOfShortcuts:this.collection.length}},attachBuffer:function(h,g){this.ui.itemsContainer.prepend(g)},onAddChild:function c(g){this.ui.add.parent().before(g.$el)}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
(function(g){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function f(i){i.preventDefault();this.dialog.hide()},"click @ui.submit":function d(i){i.preventDefault();this.model.destroy({wait:true})}},modelEvents:{"remove:start":function c(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"remove:finish":function e(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"});this.dialog.hide();JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function b(j){if(j.message||(j.errorMessages&&j.errorMessages.length>0)){var i=require("aui/flag");i({type:"error",title:"We couldn\'t delete the link for you",close:"auto",body:j.message||j.errorMessages[0]})}}},initialize:function a(){this.render();this.$el.appendTo("body");this.dialog=AJS.dialog2(this.$el);this.dialog.show();var i=this;this.dialog.on("hide",function(){_.defer(function(){i.destroy()})})},onRender:function h(){this.unwrapTemplate()}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
(function(b){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(f){var d=this;_.bindAll(this,"hide");this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(f.model.toJSON(),{projectKey:f.model.projectKey||f.model.collection.projectKey});this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(undefined,{model:this.model});this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent({model:this.model,errorModel:this.errorModel});this.analyticsSave=false;this.view.render();var c=b(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(c);this.dialog=AJS.dialog2(c);this.dialog.show();this.view.ui.url.focus();this._onResizeWindow=function(){d.hideIconPicker()};b(window).on("resize",this._onResizeWindow);this.listenTo(this.view,"cancel",this.hide);this.listenTo(this.model,"save:success",function g(){this.analyticsSave=true;this.hide();f.model.set(d.model.toJSON())});this.dialog.on("hide",function e(){d.trigger("dialog:close",d.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function a(){this.dialog.hide();b(window).off("resize",this._onResizeWindow)}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
(function(c){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(o){_.bindAll(this,"hide","refresh","focusForm");var n=this;this.analyticsSave=false;this.sidebarItem=o.sidebarItem;this.projectKey=o.projectKey;this.collection=o.collection;this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey});this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model});this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel});this.view.render();var g=c(window);var i=c(document);var m=c(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(r,q,t){n.sidebarItem.$el.addClass("aui-nav-selected");n.view.render();n.view.$el.appendTo(r);n.view.ui.url.focus();g.on("scroll.project-shortcuts",function s(){n.refresh()});m.on("scroll.project-shortcuts",function p(){n.hide()});i.on("showLayer",n.focusForm);g.on("resize",n.refresh);t();return false},{gravity:"w",autoWidth:true,initCallback:function f(){n.trigger("dialog:open");n.analyticsSave=false},hideCallback:function h(){n.sidebarItem.$el.removeClass("aui-nav-selected");n.sidebarItem.ui.link.blur();g.off("scroll.project-shortcuts");m.off("scroll.project-shortcuts");i.off("showLayer",n.focusForm);n.trigger("dialog:close",n.analyticsSave)},persistent:true,closeOnTriggerClick:true,offsetY:function j(p,s){var r=s.target.height();var q=p.height()/2;return q-r-10},arrowOffsetY:function k(p,s){var r=s.target.height()/2;var q=p.height()/2;return -q+22+r}});this.listenTo(this.view,"render",this.refresh);this.listenTo(this.view,"cancel",this.hideAndRender);this.listenTo(this.model,"save:success",function l(){var p=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear();this.collection.add(p);this.analyticsSave=true;this.hide()});this.listenTo(this.sidebarItem,"before:select",function(p){p.preventDefault()});AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide);c(".project-shortcuts-group").on("click","li",this.hide)},hide:function a(){this.view.hideIconPicker();this.dialog.hide()},refresh:function b(){this.view.hideIconPicker();this.dialog.refresh()},hideAndRender:function e(){this.hide()},focusForm:function d(){this.view.ui.url.focus()}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var b="a.project-shortcuts-group__link";var a=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(c){this.projectId=c},initShortcutClick:function(g,f){var e=AJS.sidebar(f);var d=AJS.$(g);var c=this;d.on("click",b,function(j){var i=d.find(b);var h=AJS.$(this);AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:{shortcutId:h.data("shortcutId"),shortcutPosition:h.closest("li").index()+1,shortcutIconName:a?h.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:i.size(),isWithIcons:a,isSidebarCollapsed:e.isCollapsed(),projectId:c.projectId}})})},initDialogActions:function(d){var c=this;d.on("childview:edit:open",function(e,g){var f=g.collection.indexOf(g)+1;AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isWithIcons:a,shortcutId:g.get("id"),shortcutPosition:f,shortcutCount:g.collection.size(),projectId:c.projectId}})});d.on("childview:edit:close",function(e,g,h){var f=g.collection.indexOf(g)+1;AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isWithIcons:a,isSave:h,shortcutId:g.get("id"),shortcutPosition:f,shortcutCount:g.collection.size(),projectId:c.projectId}})});d.on("add:open",function(){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{isWithIcons:a,projectId:c.projectId}})});d.on("add:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isWithIcons:a,isSave:e,projectId:c.projectId}})})},iconChanged:function(c,e,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.changed",data:{iconName:e,oldIconName:d,shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconChangeConfirmed:function(c,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.confirmed",data:{oldIconName:c.get("icon"),iconName:d,shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconPickerOpened:function(c){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.picker.opened",data:{shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconPickerClosed:function(c,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.picker.closed",data:{shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,isSave:d,projectId:this.projectId}})}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
AJS.$(function(a){JIRA.API.getSidebar().done(function(){var c=WRM.data.claim("com.atlassian.jira.projects.shortcuts:project-id");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initialize(c);if(WRM.data.claim("com.atlassian.jira.projects.shortcuts:can-manage")){JIRA.Projects.Sidebar.ProjectShortcuts.SidebarOverrides.init();var e=WRM.data.claim("com.atlassian.jira.projects.shortcuts:with-icons");if(e){JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.initialize(WRM.data.claim("com.atlassian.jira.projects.shortcuts:icons-list"))}JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.setWithIcons(e);var b=JIRA.API.Projects.getCurrentProjectKey();var d=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts(WRM.data.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:b});var f=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.List({collection:d,targetGroup:"project-shortcuts-group"});f.render();JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initDialogActions(f)}JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initShortcutClick(".project-shortcuts-list",".aui-sidebar")})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:summary-page-assets', location = '/page/project/summary/main.js' */
AJS.$(function(b){b(".most-active-help").tooltip({aria:true});b(".project-meta-most-active .user-hover").mouseenter(function a(){AJS.trigger("analyticsEvent",{name:"jira.projects.mostactive.hovered",data:{index:b(".project-meta-most-active .user-hover").index(this)}})})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(p){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(q,l){p.call({_:q,Backbone:l});var r=l.PageableCollection.noConflict();r.VERSION="2.0.2";return r}})})(function(){var p=function(k,l){function n(a,b){if(!k.isNumber(a)||k.isNaN(a)||!k.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a}function p(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,arguments),d()}catch(a){throw a;
}finally{c.callback=e}}}else d()}var m=k.extend,u=k.omit,v=k.clone,s=k.each,q=k.pick,r=k.contains,E=k.isEmpty,F=k.pairs,H=k.invert,A=k.isArray,B=k.isFunction,I=k.isObject,y=k.keys,z=k.isUndefined,w=Math.ceil,J=Math.floor,G=Math.max,C=l.Collection.prototype,K=/[\s'"]/g,M=/[<>\s'"]/g,L=l.PageableCollection=l.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",
totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){C.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||x.mode,c=m({},x.queryParams,this.queryParams,b.queryParams||{});c.directions=m({},x.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=m({},x.state,this.state,b.state||{});c.currentPage=null==c.currentPage?c.firstPage:c.currentPage;
A(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,m({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,m({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=v(this.state)},_makeFullCollection:function(a,
b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],z(c[h])||(g[h]=c[h]);g=new (l.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;s(y(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=v(a.state),o=g.firstPage,i=g.pageSize,j=(0===o?g.currentPage:g.currentPage-1)*i,t=j+i;if("add"==d){var k,
l,q,D,f=f||{};e==b?(l=b.indexOf(c),l>=j&&l<t&&(D=a,k=q=l-j)):(k=a.indexOf(c),D=b,q=!z(f.at)?f.at+j:j+k);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(D){D.add(c,m({},f||{},{at:q}));var r=k>=i?c:!z(f.at)&&q<t&&a.length>i?a.at(i):null;r&&p(e,d,function(){a.remove(r,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(k=g.totalPages=w(g.totalRecords/i),g.lastPage=0===o?k-1:k||o,g.currentPage>k&&(g.currentPage=g.lastPage)):(g.totalRecords=null,
g.totalPages=null);a.state=a._checkState(g);var n,o=f.index;e==a?((n=b.at(t))?p(a,d,function(){a.push(n,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(j-i,t-i),m({},f,{parse:!1})),b.remove(c)):o>=j&&o<t&&((n=b.at(t-1))&&p(a,d,function(){a.push(n,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(j-i,t-i),m({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,j),i=b.models.slice(j+a.models.length),b.reset(g.concat(a.models).concat(i),
f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(j,t),m({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(j,t),m({},f,{parse:!1})));s(y(h),function(d){var c=h[d];s([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,e=a.pageSize,f=a.currentPage,h=a.firstPage,
g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=n(c,"totalRecords");e=n(e,"pageSize");f=n(f,"currentPage");h=n(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=w(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=n(a,"pageSize"),b=b||{first:!1},d=this.state,c=w(d.totalRecords/a),e=c?G(d.firstPage,J(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(m({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,u(b,["first"]))},switchMode:function(a,b){if(!r(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?v(this._initState):this._checkState(m({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);s(["add","remove","reset","sort"],function(a){f[a]=h=k.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(s(y(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var o=this.links={},i=d.firstPage,j=w(d.totalRecords/d.pageSize),i=0===i?G(0,j-1):j||i,d=d.firstPage;d<=i;d++)o[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(u(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,o=e.pageSize,i=a;switch(a){case "first":i=f;break;
case "prev":i=h-1;break;case "next":i=h+1;break;case "last":i=g;break;default:i=n(a,"index")}this.state=this._checkState(m({},e,{currentPage:i}));b.from=h;b.to=i;e=(0===f?i:i-1)*o;c=c&&c.length?c.models.slice(e,e+o):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,u(b,"fetch")),this;"infinite"==d&&(b.url=this.links[i]);return this.fetch(u(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=n(a),d=J(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,o){var i=c.links,j=c.parseLinks(a,m({xhr:o},d));j.first&&(i[c.state.firstPage]=j.first);j.prev&&(i[f-1]=j.prev);j.next&&(i[f+1]=j.next);e&&e(a,b,o)}}return(C.sync||l.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
s(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(M,""),a=a.slice(1);s(a,function(a){var c=a.split("="),a=c[0].replace(K,""),c=c[1].replace(K,"");"rel"==a&&r(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,v(this.queryParams),v(this.state),b);d&&(this.state=this._checkState(m({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&I(a[0])&&A(a[1])){var c=v(d),e=a[0];s(F(u(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!z(d)&&!k.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*H(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&I(a[0])&&A(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";B(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,k,i={},j=decodeURIComponent,l=h.split("&"),n=0,r=l.length;n<r;n++)g=l[n].split("="),
h=g[0],g=g[1]||!0,h=j(h),g=j(g),k=i[h],A(k)?k.push(g):i[h]=k?[k,g]:g;m(c,i);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?q(this.queryParams,"sortKey","order"):u(q(this.queryParams,y(x.queryParams)),"directions");n=F(h);e=v(this);for(f=0;f<n.length;f++)i=n[f],l=i[0],j=i[1],j=B(j)?j.call(e):j,null!=b[l]&&null!=j&&(c[j]=b[l]);b.sortKey&&b.order?(f=B(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(u(this.queryParams,y(x.queryParams)));
for(f=0;f<b.length;f++)i=b[f],j=i[1],j=B(j)?j.call(e):j,null!=j&&(c[i[0]]=j);if("server"!=d){var p=this,s=this.fullCollection,w=a.success;a.success=function(b,c,e){e=e||{};z(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,m({at:s.length},m(e,{parse:false})));p.trigger("reset",p,e)}w&&w(b,c,e)};return C.fetch.call(this,m({},a,{silent:!0}))}return C.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),k;1===b&&(k=h,h=g,g=k);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=m({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),x=L.prototype;return L},q=this._,l=this.Backbone;if("object"==typeof exports)module.exports=p(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],p);else if("undefined"!==typeof q&&"undefined"!==typeof l){var r=l.PageableCollection,H=p(q,l);l.PageableCollection.noConflict=function(){l.PageableCollection=r;return H}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:backbone-paginator', location = '/sidebar/lib/backbone.paginator.adapter.js' */
define("jira/projects/libs/backbone.paginator",["backbone","underscore","atlassian/libs/factories/backbone.paginator-2.0.2"],function(c,a,b){return b(a,c)});AJS.namespace("Backbone.PageableCollection",null,require("jira/projects/libs/backbone.paginator"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.AbstractList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.AbstractList == 'undefined') { JIRA.Projects.AbstractList = {}; }
if (typeof JIRA.Projects.AbstractList.Templates == 'undefined') { JIRA.Projects.AbstractList.Templates = {}; }


JIRA.Projects.AbstractList.Templates.pagination = function(opt_data, opt_ignored) {
  var output = '<ol data-total="' + soy.$$escapeHtml(opt_data.totalPages) + '" class="aui-nav aui-nav-pagination' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '">';
  if (opt_data.firstPage < opt_data.lastPage) {
    output += '<li class="aui-nav-previous"><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + ((opt_data.currentPage == opt_data.firstPage) ? '0' : soy.$$escapeHtml(opt_data.currentPage - 1)) + '" ' + ((opt_data.currentPage == opt_data.firstPage) ? 'aria-disabled="true"' : 'data-page="' + ((opt_data.currentPage == opt_data.firstPage) ? '0' : soy.$$escapeHtml(opt_data.currentPage - 1)) + '"') + '>' + soy.$$escapeHtml("Previous") + '</a></li>';
    var pageInit36 = opt_data.firstPage;
    var pageLimit36 = opt_data.lastPage + 1;
    for (var page36 = pageInit36; page36 < pageLimit36; page36++) {
      output += (page36 == opt_data.currentPage) ? '<li class="aui-nav-page aui-nav-selected">' + soy.$$escapeHtml(page36) + '</li>' : '<li><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + soy.$$escapeHtml(page36) + '" data-page="' + soy.$$escapeHtml(page36) + '">' + soy.$$escapeHtml(page36) + '</a></li>';
    }
    output += '<li class="aui-nav-next"><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + ((opt_data.currentPage == opt_data.lastPage) ? soy.$$escapeHtml(opt_data.lastPage) : soy.$$escapeHtml(opt_data.currentPage + 1)) + '"' + ((opt_data.currentPage == opt_data.lastPage) ? 'aria-disabled="true"' : 'data-page="' + ((opt_data.currentPage == opt_data.lastPage) ? soy.$$escapeHtml(opt_data.lastPage) : soy.$$escapeHtml(opt_data.currentPage + 1)) + '"') + '>' + soy.$$escapeHtml("Next") + '</a></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.pagination.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.pagination';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/queryStringParam.js' */
(function(){function a(c,g,b){b=b||window.location;if(!c){return}var f=b.search.substr(1).split("&");if(g){f=f.concat(b.hash.substr(1).split("&"))}for(var d=f.length-1;d>=0;d--){var e=f[d].split("=");if(e.length!=2){continue}if(c===e[0]){return decodeURIComponent(e[1].replace(/\+/g," "))}}}AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils");JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam=a})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/NavigationUtils.js' */
(function(){var c=require("atlassian/libs/uri-1.14.1");AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils");JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported=!!history.pushState;JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot=function d(){return(JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported)?"":JIRA.Projects.AbstractList.NavigationUtils.getRoot()};JIRA.Projects.AbstractList.NavigationUtils.getRoot=function d(){return document.location.pathname+"?selectedItem="+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("selectedItem")};JIRA.Projects.AbstractList.NavigationUtils.navigate=function b(e){if(JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported){e=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+e}Backbone.history.navigate(e)};JIRA.Projects.AbstractList.NavigationUtils.append=function a(e,g){var f=new c(location.href);f=f.addSearch(e,g);history.replaceState(null,"",f.href())}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/FilterModel.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.FilterModel");JIRA.Projects.AbstractList.FilterModel=Backbone.Model.extend({filterAttributes:[],initialize:function a(e){this.pageableCollection=e.pageableCollection;delete this.attributes.pageableCollection},filterCollection:function d(){var e=this.pageableCollection.originalCollection;this.pageableCollection.fullCollection.reset(e);this.pageableCollection.getPage("first")},navigate:function c(){JIRA.Projects.AbstractList.NavigationUtils.navigate(this.getFilterQueryStringParams());this.trigger("navigate")},getFilterQueryStringParams:function b(){var e=this.filterAttributes.reduce(function(f,g){var h=this.get(g);if(h){return f+"&"+encodeURIComponent(g)+"="+encodeURIComponent(h)}return f}.bind(this),"");if(!JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported){e=e.substr(1)}return e}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/ItemModel.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.ItemModel");JIRA.Projects.AbstractList.ItemModel=Backbone.Model.extend({})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/Layout.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.Layout");JIRA.Projects.AbstractList.Layout=JIRA.Projects.Libs.Marionette.LayoutView.extend({onRender:function a(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/PageableItemCollection.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.PageableItemCollection");JIRA.Projects.AbstractList.PageableItemCollection=Backbone.PageableCollection.extend({model:JIRA.Projects.AbstractList.ItemModel,initialize:function a(b){this.originalCollection=b}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/PaginationView.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.PaginationView");JIRA.Projects.AbstractList.PaginationView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.AbstractList.Templates.pagination,ui:{page:"li a"},events:{"click @ui.page":"clickPage"},collectionEvents:{reset:"render"},modelEvents:{change:"render"},onRender:function b(){this.unwrapTemplate()},serializeData:function(){var c=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+this.model.getFilterQueryStringParams();var d=_.extend({url:c},this.collection.state);d.firstPage=Math.max(d.currentPage-5,d.firstPage);d.totalPages=d.lastPage;d.lastPage=Math.min(d.currentPage+5,d.lastPage);return d},clickPage:function a(d){d.preventDefault();var c=+AJS.$(d.target).attr("data-page");if(c){JIRA.Projects.AbstractList.NavigationUtils.navigate(this.model.getFilterQueryStringParams()+"&page="+c);this.collection.getPage(c);this.trigger("navigate",c)}}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/Router.js' */
(function(){AJS.namespace("JIRA.Projects.AbstractList.Router");JIRA.Projects.AbstractList.Router=Backbone.Router.extend({initialize:function(){this.route(/(.*)/,"any")},any:function a(){}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Release.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Release == 'undefined') { JIRA.Projects.Release = {}; }
if (typeof JIRA.Projects.Release.Templates == 'undefined') { JIRA.Projects.Release.Templates = {}; }


JIRA.Projects.Release.Templates.page = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + JIRA.Projects.Release.Templates.whatsnew(opt_data) + aui.page.pageHeader({content: '<h1>' + soy.$$escapeHtml(opt_data.releaseTitle) + '</h1>' + ((opt_data.adminLink) ? aui.page.pageHeaderActions({content: '' + aui.buttons.button({text: "Manage Versions", href: soy.$$escapeHtml("") + '/' + soy.$$escapeHtml(opt_data.adminLink)})}) : ''), extraClasses: 'aui-page-header-fixed'}) + '<div id="release-page"><div id="filter-container"></div>' + aui.page.pagePanelContent({content: '<div id="content-container"></div><div id="pagination-container"></div>', extraClasses: 'aui-page-panel-content-no-table'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.page.soyTemplateName = 'JIRA.Projects.Release.Templates.page';
}


JIRA.Projects.Release.Templates.whatsnew = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.learnMoreURL) ? '<div class="whats-new-container"><div class="whats-new"><div class="logo"></div><h2>' + soy.$$escapeHtml("Get the status of a version at a glance or go deeper") + '</h2><p>' + soy.$$escapeHtml("These are the versions in your project. Hover over the progress bar for a summary or click a version to see the complete status, including the issues, development data, and potential problems.") + '</p><p><a href="' + soy.$$escapeHtml(opt_data.learnMoreURL) + '" title="' + soy.$$escapeHtml(opt_data.learnMoreTitle) + '">' + soy.$$escapeHtml("Learn more") + '</a></p></div></div>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.whatsnew.soyTemplateName = 'JIRA.Projects.Release.Templates.whatsnew';
}


JIRA.Projects.Release.Templates.filter = function(opt_data, opt_ignored) {
  var output = '';
  var isReleasedPressed__soy43 = opt_data.status == 'all' || opt_data.status == 'released';
  var isUnreleasedPressed__soy44 = opt_data.status == 'all' || opt_data.status == 'unreleased';
  output += '<form id="version-filter" class="version-filter aui ajs-dirty-warning-exempt"><div class="version-filter-text-container"><div class="version-filter-search-container ' + ((opt_data.contains) ? 'version-filter-search-opened' : '') + '"><input type="text" id="version-filter-text" class="version-filter-text text" value="' + soy.$$escapeHtml(opt_data.contains) + '" /><span class="aui-icon aui-icon-small aui-iconfont-search-small"></span></div><div class="version-filter-status-text" title="' + soy.$$escapeHtml("Use Quick Filters to view a subset of versions.") + '">' + soy.$$escapeHtml("Quick filters:") + '</div></div><div class="version-filter-status-container">' + JIRA.Projects.Release.Templates.button({buttonName: 'released', isPressed: isReleasedPressed__soy43, text: "Released"}) + JIRA.Projects.Release.Templates.button({buttonName: 'unreleased', isPressed: isUnreleasedPressed__soy44, text: "Unreleased"}) + '</div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.filter.soyTemplateName = 'JIRA.Projects.Release.Templates.filter';
}


JIRA.Projects.Release.Templates.button = function(opt_data, opt_ignored) {
  return '<a class="version-filter-status-' + soy.$$escapeHtml(opt_data.buttonName) + ' version-filter-status-button ' + ((opt_data.isPressed) ? 'version-filter-status-pressed' : '') + '" href="#" data-version-type="' + soy.$$escapeHtml(opt_data.buttonName) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.button.soyTemplateName = 'JIRA.Projects.Release.Templates.button';
}


JIRA.Projects.Release.Templates.table = function(opt_data, opt_ignored) {
  return '' + aui.table({extraClasses: 'versions-table', theadContent: '<tr><th>' + soy.$$escapeHtml("Version") + '</th><th>' + soy.$$escapeHtml("Status") + '</th><th>' + soy.$$escapeHtml("Progress") + '</th><th class="versions-table__date">' + soy.$$escapeHtml("Start date") + '</th><th class="versions-table__date">' + soy.$$escapeHtml("Release date") + '</th><th>' + soy.$$escapeHtml("Description") + '</th></tr>', content: '', cssClass: 'versions-table', id: 'versions-table'});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.table.soyTemplateName = 'JIRA.Projects.Release.Templates.table';
}


JIRA.Projects.Release.Templates.row = function(opt_data, opt_ignored) {
  return '<tr><td class="versions-table__name">' + ((opt_data.url) ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : soy.$$escapeHtml(opt_data.name)) + '</td><td class="versions-table__status">' + ((opt_data.released) ? aui.lozenges.lozenge({text: "Released", type: 'success', isSubtle: true}) : aui.lozenges.lozenge({text: "Unreleased", type: 'current', isSubtle: true})) + '</td><td class="versions-table__progress">' + JIRA.Projects.Release.Templates.status(opt_data.status) + '</td><td class="versions-table__date">' + JIRA.Projects.Release.Templates.date(opt_data.startDate) + '</td><td class="versions-table__date">' + JIRA.Projects.Release.Templates.date(opt_data.releaseDate) + '</td><td class="versions-table__description">' + soy.$$escapeHtml(opt_data.description) + '</td></tr>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.row.soyTemplateName = 'JIRA.Projects.Release.Templates.row';
}


JIRA.Projects.Release.Templates.emptyRow = function(opt_data, opt_ignored) {
  return '<tr class="versions-table__row-empty"><td colspan="6"><div class="jira-adbox jira-adbox-medium no-results"><h3>' + soy.$$escapeHtml("No versions were found that match your search") + '</h3><p class="no-results-hint">' + soy.$$escapeHtml("Try modifying your filter criteria.") + '</p></div></td></tr>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.emptyRow.soyTemplateName = 'JIRA.Projects.Release.Templates.emptyRow';
}


JIRA.Projects.Release.Templates.status = function(opt_data, opt_ignored) {
  var output = '';
  var totalCount__soy137 = opt_data.unmapped.count + opt_data.toDo.count + opt_data.inProgress.count + opt_data.complete.count;
  output += '<div class="progressbar-container">' + ((totalCount__soy137) ? '<div class="progressbar progressbar_full">' + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.complete, totalCount: totalCount__soy137, type: 'complete', name: "Done"}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.inProgress, totalCount: totalCount__soy137, type: 'in-progress', name: "In Progress"}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.toDo, totalCount: totalCount__soy137, type: 'to-do', name: "To Do"}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.unmapped, totalCount: totalCount__soy137, type: 'undefined', name: "No Category"}) + '</div>' : soy.$$escapeHtml("No issues")) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.status.soyTemplateName = 'JIRA.Projects.Release.Templates.status';
}


JIRA.Projects.Release.Templates.progressBarEntry = function(opt_data, opt_ignored) {
  var output = '';
  var percentage__soy167 = opt_data.entry.count / opt_data.totalCount * 100;
  output += (percentage__soy167) ? '<div class="progressbar__entry progressbar__entry progressbar__entry progressbar__entry_' + soy.$$escapeHtml(opt_data.type) + '" data-type="' + soy.$$escapeHtml(opt_data.type) + '" data-title="' + soy.$$escapeHtml(opt_data.name) + '" data-count="' + soy.$$escapeHtml(opt_data.entry.count) + '" data-url="' + soy.$$escapeHtml(opt_data.entry.jqlUrl) + '" style="width: ' + soy.$$escapeHtml(percentage__soy167) + '%"></div>' : '';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.progressBarEntry.soyTemplateName = 'JIRA.Projects.Release.Templates.progressBarEntry';
}


JIRA.Projects.Release.Templates.progressBarDialog = function(opt_data, opt_ignored) {
  var output = '<div class="progress-statuses">' + soy.$$escapeHtml("Version") + ': ' + soy.$$escapeHtml(opt_data.name) + '<br />' + soy.$$escapeHtml(AJS.format("{0,choice,0#{0} issues|1#{0} issue|1\x3c{0} issues} in total",opt_data.totalCount)) + '<br /><table class="progress-statuses__table"><tbody>';
  var entryList191 = opt_data.entries;
  var entryListLen191 = entryList191.length;
  for (var entryIndex191 = 0; entryIndex191 < entryListLen191; entryIndex191++) {
    var entryData191 = entryList191[entryIndex191];
    output += '<tr><td>' + soy.$$escapeHtml(entryData191.name) + '</td><td><a href="' + soy.$$escapeHtml(entryData191.url) + '">' + aui.badges.badge({text: entryData191.count, extraClasses: 'progress-statuses__table__badge progress-statuses__table__badge_' + soy.$$escapeHtml(entryData191.type)}) + '</a></td></tr>';
  }
  output += '</tbody><tfoot><td colspan="2"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml("All issues") + '</a></td></tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.progressBarDialog.soyTemplateName = 'JIRA.Projects.Release.Templates.progressBarDialog';
}


JIRA.Projects.Release.Templates.date = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.formatted) ? '<time class="date" datetime="' + soy.$$escapeHtml(opt_data.iso) + '">' + soy.$$escapeHtml(opt_data.formatted) + '</time>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.date.soyTemplateName = 'JIRA.Projects.Release.Templates.date';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/FilterModel.js' */
(function(){AJS.namespace("JIRA.Projects.Release.FilterModel");JIRA.Projects.Release.FilterModel=JIRA.Projects.AbstractList.FilterModel.extend({filterAttributes:["status","contains"],defaults:{status:"unreleased",contains:""},initialize:function a(c){JIRA.Projects.AbstractList.FilterModel.prototype.initialize.call(this,c);this.on("change:status change:contains",this.filterCollection);this.on("change:status change:contains",this.navigate)},filterCollection:function b(){var c=this.get("status")||"no-filter";var d=this.pageableCollection.originalCollection;if(c!=="all"&&c!=="no-filter"){d=d.filter(function f(h){return((c==="released"&&h.released)||(c==="unreleased"&&!h.released))})}var e=(this.get("contains")||"").toLowerCase();if(e!==""){d=d.filter(function g(h){return(h.name.toLowerCase().indexOf(e)>-1||h.description.toLowerCase().indexOf(e)>-1||h.startDate.formatted.toLowerCase().indexOf(e)>-1||h.releaseDate.formatted.toLowerCase().indexOf(e)>-1)})}this.pageableCollection.fullCollection.reset(d);this.pageableCollection.getPage("first")}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/FilterView.js' */
define("jira/projects/page/release/view/filter",["jira/projects/libs/marionette","underscore"],function(e,h){var i=JIRA.Projects.Release.Templates;var d=h.bind(JIRA.trace,JIRA);var f={CONTAINS_OPENED:"version-filter-search-opened",STATUS_PRESSED:"version-filter-status-pressed"};return e.ItemView.extend({template:i.filter,ui:{form:"form",unreleased:".version-filter-status-unreleased",released:".version-filter-status-released",contains:".text",quickFilter:".version-filter-status-text",searchContainer:".version-filter-search-container"},events:{"submit @ui.form":function b(j){j.preventDefault()},"input @ui.contains":"inputContains","change @ui.contains":"inputContains","click @ui.released":"clickStatusReleased","click @ui.unreleased":"clickStatusUnreleased","focus @ui.contains":function(){this.ui.searchContainer.addClass(f.CONTAINS_OPENED)},"blur @ui.contains":function(){if(this._isContainsEmpty()){this.ui.searchContainer.removeClass(f.CONTAINS_OPENED)}}},modelEvents:{"change:status":function a(){var k=this._getReleased();var j=this._getUnreleased();var m=this.ui.released.hasClass(f.STATUS_PRESSED);var l=this.ui.unreleased.hasClass(f.STATUS_PRESSED);if(k&&!m){this.ui.released.addClass(f.STATUS_PRESSED)}if(!k&&m){this.ui.released.removeClass(f.STATUS_PRESSED)}if(j&&!l){this.ui.unreleased.addClass(f.STATUS_PRESSED)}if(!j&&l){this.ui.unreleased.removeClass(f.STATUS_PRESSED)}d("project.release.status.changed")}},onRender:function(){this.ui.quickFilter.tooltip({gravity:"w"})},clickStatusReleased:function(j){this._clickStatus(j,!this._getReleased(),this._getUnreleased())},clickStatusUnreleased:function(j){this._clickStatus(j,this._getReleased(),!this._getUnreleased())},_clickStatus:function(l,k,j){l.preventDefault();this.model.set("status",this._getCurrentStatus(k,j))},_isContainsEmpty:function(){return h.isEmpty(this.ui.contains.val())},searchContainerResize:function(){if(!this._isContainsEmpty()){this.ui.searchContainer.addClass(f.CONTAINS_OPENED)}else{if(!this.ui.contains.is(":focus")){this.ui.searchContainer.removeClass(f.CONTAINS_OPENED)}}},_inputContains:h.debounce(function g(k){var j=this.ui.contains.val();this.model.set("contains",j)},100),inputContains:function g(j){this.searchContainerResize();this._inputContains()},_getReleased:function(){var j=this.model.get("status");return j==="all"||j==="released"},_getUnreleased:function(){var j=this.model.get("status");return j==="all"||j==="unreleased"},_getCurrentStatus:function c(k,j){if(k&&j){return"all"}else{if(j){return"unreleased"}else{if(k){return"released"}else{return"no-filter"}}}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/EmptyItemView.js' */
(function(){AJS.namespace("JIRA.Projects.Release");JIRA.Projects.Release.EmptyItemView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Release.Templates.emptyRow,onRender:function a(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ItemView.js' */
(function(b){AJS.namespace("JIRA.Projects.Release.ItemView");JIRA.Projects.Release.ItemView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Release.Templates.row,ui:{progressbar:".progressbar"},onRender:function c(){this.unwrapTemplate();this.initializeProgressDialog()},initializeProgressDialog:function a(){var d=this;var e=AJS.InlineDialog(this.ui.progressbar,"version-progress-"+this.cid,function(k,j,m){var h=AJS.$(j);var g=h.closest("tr");var l=g.find("td:first-child a");var f=[];var i=0;h.find(".progressbar__entry").each(function(o,p){var n=b(p);var q=+n.attr("data-count");i+=+q;f.push({name:n.attr("data-title"),type:n.attr("data-type"),url:n.attr("data-url"),count:q})});k.html(JIRA.Projects.Release.Templates.progressBarDialog({name:l.text(),url:l.attr("href"),totalCount:i,entries:f}));m();e.refresh();return false},{gravity:"w",autoWidth:true,onHover:true,hideDelay:500});e.on("click","a",function(){d.trigger("progressDialogClicked")})}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ItemCollectionView.js' */
(function(){AJS.namespace("JIRA.Projects.Release.ItemCollectionView");JIRA.Projects.Release.ItemCollectionView=JIRA.Projects.Libs.Marionette.CompositeView.extend({childView:JIRA.Projects.Release.ItemView,childViewContainer:"tbody",emptyView:JIRA.Projects.Release.EmptyItemView,template:JIRA.Projects.Release.Templates.table})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ReleasePageApp.js' */
define("jira/projects/page/release/release-page-app",["jira/projects/libs/marionette","jira/api/projects","jira/projects/page/release/view/filter","jira/data/local-storage","wrm/data","backbone"],function(h,e,f,a,d,g){var c=new h.Application();function b(){return e.getCurrentProjectId()!==undefined}c.on("start",function(q){if(!b()){return}var n=e.getCurrentProjectId();var j="jira-projects:release-page-status-"+n;var p=q.container;var m=d.claim("com.atlassian.jira.projects.page.release:versions");function k(s){try{a.setItem(j,s)}catch(r){console.warn(r)}}c.pageableItems=new JIRA.Projects.AbstractList.PageableItemCollection(m,{mode:"client",state:{pageSize:(m.length>50)?25:50,currentPage:1}});c.filter=new JIRA.Projects.Release.FilterModel({pageableCollection:c.pageableItems,status:"unreleased",contains:""});c.filter.filterCollection();c.filter.on("change:status",function(s,r){k(r)});c.layout=new JIRA.Projects.AbstractList.Layout({model:c.filter,el:p,regions:{filter:"#filter-container",main:"#content-container",pagination:"#pagination-container"}});c.layout.filter.show(new f({model:c.filter}));c.layout.main.show(new JIRA.Projects.Release.ItemCollectionView({collection:c.pageableItems}));c.layout.pagination.show(new JIRA.Projects.AbstractList.PaginationView({collection:c.pageableItems,model:c.filter}));c.router=new JIRA.Projects.AbstractList.Router();c.router.on("route:any",function(){var r=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",true)||"unreleased";var s=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",true)||"";var t=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",true)||1;c.filter.set("status",r,{silent:true});k(r);c.filter.set("contains",s,{silent:true});c.filter.filterCollection();c.pageableItems.getPage(t);c.layout.filter.currentView.render()});function l(){c.trigger("navigate")}c.layout.pagination.currentView.on("navigate",l);c.filter.on("navigate",l);c.router.on("route:any",l);c.layout.main.currentView.on("childview:progressDialogClicked",function(){c.trigger("progressDialogClicked")});try{var i=a.getItem(j);if(!JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",true)&&b()&&!!i){c.filter.set("status",i,{silent:true});JIRA.Projects.AbstractList.NavigationUtils.append("status",i)}}catch(o){console.warn(o)}if(g.history&&g.History&&!g.History.started){g.history.start({root:JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot(),pushState:JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported})}});return c});AJS.namespace("JIRA.Projects.Release.App",null,require("jira/projects/page/release/release-page-app"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/Analytics.js' */
(function(){AJS.namespace("JIRA.Projects.Release.Analytics");JIRA.Projects.Release.Analytics=JIRA.Projects.Libs.Marionette.Controller.extend({progressDialogClick:function(){AJS.trigger("analyticsEvent",{name:"jira.projects.release.progress.dialog.click"})},navigate:function a(){var b=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",true)||"unreleased";var c=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",true)||"";var d=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",true)||1;AJS.trigger("analyticsEvent",{name:"jira.projects.release.navigate",data:{status:b,containsLength:c.length,page:d}})}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/release-page-init.js' */
require(["jquery","jira/projects/page/release/release-page-app"],function(b,c){var a=new JIRA.Projects.Release.Analytics();c.on("navigate",a.navigate);c.on("progressDialogClicked",a.progressDialogClick);b(function(){var d=b("#release-page");if(d.length){c.start({container:d})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Components.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Components == 'undefined') { JIRA.Projects.Components = {}; }
if (typeof JIRA.Projects.Components.Templates == 'undefined') { JIRA.Projects.Components.Templates = {}; }


JIRA.Projects.Components.Templates.page = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return aui.page.pageHeader({content: '<h1>' + soy.$$escapeHtml("Components") + '</h1>' + ((opt_data.adminLink) ? aui.page.pageHeaderActions({content: '' + aui.buttons.button({text: "Manage components", href: soy.$$escapeHtml("") + '/' + soy.$$escapeHtml(opt_data.adminLink), id: 'add_component'})}) : ''), extraClasses: 'aui-page-header-fixed'}) + '<div id="components-page"><div id="filter-container"></div>' + aui.page.pagePanelContent({content: '<div id="content-container"></div><div id="pagination-container"></div>', extraClasses: 'aui-page-panel-content-no-table'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Components.Templates.page.soyTemplateName = 'JIRA.Projects.Components.Templates.page';
}


JIRA.Projects.Components.Templates.table = function(opt_data, opt_ignored) {
  return '' + aui.table({extraClasses: 'components-table', theadContent: '<tr><th>' + soy.$$escapeHtml("Component") + '</th><th>' + soy.$$escapeHtml("Issues") + '</th><th>' + soy.$$escapeHtml("Lead") + '</th><th>' + soy.$$escapeHtml("Description") + '</th></tr>', content: '', cssClass: 'components-table', id: 'components-table'});
};
if (goog.DEBUG) {
  JIRA.Projects.Components.Templates.table.soyTemplateName = 'JIRA.Projects.Components.Templates.table';
}


JIRA.Projects.Components.Templates.row = function(opt_data, opt_ignored) {
  return '<tr><td class="components-table__name"><a href="' + soy.$$escapeHtml(opt_data.issuesUrl) + '">' + soy.$$escapeHtml(opt_data.name) + '</a></td><td class="components-table__issues-count"><a href="' + soy.$$escapeHtml(opt_data.issuesUrl) + '">' + soy.$$escapeHtml(AJS.format("{0,choice,0#{0} Issues|1#{0} Issue|1\x3c{0} Issues}",opt_data.issuesCount)) + '</a></td><td class="components-table__lead">' + soy.$$filterNoAutoescape(opt_data.leadUserProfileLinkHtml) + '</td><td class="components-table__description">' + ((opt_data.description) ? soy.$$escapeHtml(opt_data.description) : '') + '</td></tr>';
};
if (goog.DEBUG) {
  JIRA.Projects.Components.Templates.row.soyTemplateName = 'JIRA.Projects.Components.Templates.row';
}


JIRA.Projects.Components.Templates.emptyRow = function(opt_data, opt_ignored) {
  return '<tr class="components-table__row-empty"><td colspan="6"><div class="jira-adbox jira-adbox-medium no-results"><h3>' + soy.$$escapeHtml("No components were found that match your search") + '</h3><p class="no-results-hint">' + soy.$$escapeHtml("Try modifying your filter criteria.") + '</p></div></td></tr>';
};
if (goog.DEBUG) {
  JIRA.Projects.Components.Templates.emptyRow.soyTemplateName = 'JIRA.Projects.Components.Templates.emptyRow';
}


JIRA.Projects.Components.Templates.filter = function(opt_data, opt_ignored) {
  return '<form id="component-filter" class="component-filter aui ajs-dirty-warning-exempt"><div class="component-filter-text-container"><input type="text" id="component-filter-text" placeholder="' + soy.$$escapeHtml("Contains text...") + '" class="component-filter-text text" value="' + soy.$$escapeHtml(opt_data.contains) + '" /><span class="aui-icon aui-icon-small aui-iconfont-search-small"></span></div></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Components.Templates.filter.soyTemplateName = 'JIRA.Projects.Components.Templates.filter';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/FilterModel.js' */
(function(){AJS.namespace("JIRA.Projects.Components.FilterModel");JIRA.Projects.Components.FilterModel=JIRA.Projects.AbstractList.FilterModel.extend({filterAttributes:["contains"],defaults:{contains:""},initialize:function a(c){JIRA.Projects.AbstractList.FilterModel.prototype.initialize.call(this,c);this.on("change:contains",this.filterCollection);this.on("change:contains",this.navigate)},filterCollection:function b(){var c=this.pageableCollection.originalCollection;var d=(this.get("contains")||"").toLowerCase();if(d!==""){c=c.filter(function e(f){return((f.name&&f.name.toLowerCase().indexOf(d)>-1)||(f.description&&f.description.toLowerCase().indexOf(d)>-1)||(f.leadUserDisplayName&&f.leadUserDisplayName.toLowerCase().indexOf(d)>-1))})}this.pageableCollection.fullCollection.reset(c);this.pageableCollection.getPage("first")}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/FilterView.js' */
(function(){AJS.namespace("JIRA.Projects.Components.FilterView");JIRA.Projects.Components.FilterView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Components.Templates.filter,ui:{form:"form",contains:".text"},events:{"submit @ui.form":"formSubmit","input @ui.contains":"inputContains","change @ui.contains":"inputContains"},formSubmit:function b(c){c.preventDefault()},inputContains:_.debounce(function a(d){var c=this.ui.contains.val();this.model.set("contains",c)},300)})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/EmptyItemView.js' */
(function(){AJS.namespace("JIRA.Projects.Components.EmptyItemView");JIRA.Projects.Components.EmptyItemView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Components.Templates.emptyRow,onRender:function a(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/ItemView.js' */
(function(){AJS.namespace("JIRA.Projects.Components.ItemView");JIRA.Projects.Components.ItemView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Components.Templates.row,onRender:function a(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/ItemCollectionView.js' */
(function(){AJS.namespace("JIRA.Projects.Components.ItemCollectionView");JIRA.Projects.Components.ItemCollectionView=JIRA.Projects.Libs.Marionette.CompositeView.extend({childView:JIRA.Projects.Components.ItemView,childViewContainer:"tbody",emptyView:JIRA.Projects.Components.EmptyItemView,template:JIRA.Projects.Components.Templates.table})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/ComponentsPageApp.js' */
(function componentsPage(){AJS.namespace("JIRA.Projects.Components.App");var a=JIRA.Projects.Components.App=new JIRA.Projects.Libs.Marionette.Application();a.on("start",function(b){var c=b.container;var d=WRM.data.claim("com.atlassian.jira.projects.page.components:components");a.pageableItems=new JIRA.Projects.AbstractList.PageableItemCollection(d,{mode:"client",state:{pageSize:(d.length>50)?25:50,currentPage:1}});a.filter=new JIRA.Projects.Components.FilterModel({pageableCollection:a.pageableItems,contains:""});a.filter.filterCollection();a.layout=new JIRA.Projects.AbstractList.Layout({model:a.filter,el:c,regions:{filter:"#filter-container",main:"#content-container",pagination:"#pagination-container"}});a.layout.filter.show(new JIRA.Projects.Components.FilterView({model:a.filter}));a.layout.main.show(new JIRA.Projects.Components.ItemCollectionView({collection:a.pageableItems}));a.layout.pagination.show(new JIRA.Projects.AbstractList.PaginationView({collection:a.pageableItems,model:a.filter}));a.router=new JIRA.Projects.AbstractList.Router();a.router.on("route:any",function(){var f=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",true)||"";var g=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",true)||1;a.filter.set("contains",f,{silent:true});a.filter.filterCollection();a.pageableItems.getPage(g);a.layout.filter.currentView.render()});function e(){a.trigger("navigate")}a.layout.pagination.currentView.on("navigate",e);a.filter.on("navigate",e);a.router.on("route:any",e);if(Backbone.history&&Backbone.History&&!Backbone.History.started){Backbone.history.start({root:JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot(),pushState:JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported})}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/Analytics.js' */
(function(){AJS.namespace("JIRA.Projects.Components.Analytics");JIRA.Projects.Components.Analytics=JIRA.Projects.Libs.Marionette.Controller.extend({navigate:function a(){var b=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",true)||"";var c=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",true)||1;AJS.trigger("analyticsEvent",{name:"jira.projects.components.navigate",data:{containsLength:b.length,page:c}})}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:components-page-assets', location = '/page/project/components/components-page-init.js' */
(function componentsPage(b){var a=new JIRA.Projects.Components.Analytics();JIRA.Projects.Components.App.on("navigate",a.navigate);b(function(){var c=b("#components-page");if(c.length){JIRA.Projects.Components.App.start({container:c})}})}(AJS.$));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
(function reportsPageAnalytics(a){AJS.namespace("JIRA.Projects.Report");JIRA.Projects.Report.Analytics=function(){a(".reports .reports__list__report").on("click",function(c){var b=a(this);AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:b.attr("data-report-key"),category:b.closest("ul").attr("data-category-key"),listPosition:b.closest("li").prevAll().length+1}})})};a(JIRA.Projects.Report.Analytics)}(AJS.$));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Reports");JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(b){if(JIRA.API.Sidebar.isProjectSidebar()){var a=this._createLastViewedReportKey();require("jira/data/local-storage").setItem(a,b);this._setReportsItemLink(b)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(){if(JIRA.API.Sidebar.isProjectSidebar()){var a=this._createLastViewedReportKey();var b=require("jira/data/local-storage").getItem(a);if(b){this._setReportsItemLink(b)}}JIRA.trace("jira.projects.sidebar.reports.link.restored")},_createLastViewedReportKey:function(){var b=JIRA.API.Sidebar.getSelectedScopeFilterId();var a=JIRA.API.Projects.getCurrentProjectKey();var c="last.viewed.report."+a;if(b){c+="."+b}return c},_setReportsItemLink:function(a){JIRA.API.Sidebar.setReportsItemLink(a)}}}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
AJS.$(function(){JIRA.API.getSidebar().done(function(){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster.js' */
(function(u){var v,B={},A={16:false,18:false,17:false,91:false},r="all",e={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},f={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},a=function(k){return f[k]||k.toUpperCase().charCodeAt(0)},x=[];for(v=1;v<20;v++){f["f"+v]=111+v}function h(F,E){var k=F.length;while(k--){if(F[k]===E){return k}}return -1}function y(E,k){if(E.length!=k.length){return false}for(var F=0;F<E.length;F++){if(E[F]!==k[F]){return false}}return true}var q={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function i(k){for(v in A){A[v]=k[q[v]]}}function C(J){var G,I,E,F,K,H;G=J.keyCode;if(h(x,G)==-1){x.push(G)}if(G==93||G==224){G=91}if(G in A){A[G]=true;for(E in e){if(e[E]==G){g[E]=true}}return}i(J);if(!g.filter.call(this,J)){return}if(!(G in B)){return}H=n();for(F=0;F<B[G].length;F++){I=B[G][F];if(I.scope==H||I.scope=="all"){K=I.mods.length>0;for(E in A){if((!A[E]&&h(I.mods,+E)>-1)||(A[E]&&h(I.mods,+E)==-1)){K=false}}if((I.mods.length==0&&!A[16]&&!A[18]&&!A[17]&&!A[91])||K){if(I.method(J,I)===false){if(J.preventDefault){J.preventDefault()}else{J.returnValue=false}if(J.stopPropagation){J.stopPropagation()}if(J.cancelBubble){J.cancelBubble=true}}}}}}function d(H){var G=H.keyCode,E,F=h(x,G);if(F>=0){x.splice(F,1)}if(G==93||G==224){G=91}if(G in A){A[G]=false;for(E in e){if(e[E]==G){g[E]=false}}}}function j(){for(v in A){A[v]=false}for(v in e){g[v]=false}}function g(E,F,I){var H,G;H=b(E);if(I===undefined){I=F;F="all"}for(var k=0;k<H.length;k++){G=[];E=H[k].split("+");if(E.length>1){G=w(E);E=[E[E.length-1]]}E=E[0];E=a(E);if(!(E in B)){B[E]=[]}B[E].push({shortcut:H[k],scope:F,method:I,key:H[k],mods:G})}}function z(G,H){var k,J,I=[],F,E,K;k=b(G);for(E=0;E<k.length;E++){J=k[E].split("+");if(J.length>1){I=w(J);G=J[J.length-1]}G=a(G);if(H===undefined){H=n()}if(!B[G]){return}for(F in B[G]){K=B[G][F];if(K.scope===H&&y(K.mods,I)){B[G][F]={}}}}}function c(k){if(typeof(k)=="string"){k=a(k)}return h(x,k)!=-1}function p(){return x.slice(0)}function l(E){var k=(E.target||E.srcElement).tagName;return !(k=="INPUT"||k=="SELECT"||k=="TEXTAREA")}for(v in e){g[v]=false}function m(k){r=k||"all"}function n(){return r||"all"}function s(G){var F,k,E;for(F in B){k=B[F];for(E=0;E<k.length;){if(k[E].scope===G){k.splice(E,1)}else{E++}}}}function b(k){var E;k=k.replace(/\s/g,"");E=k.split(",");if((E[E.length-1])==""){E[E.length-2]+=","}return E}function w(E){var F=E.slice(0,E.length-1);for(var k=0;k<F.length;k++){F[k]=e[F[k]]}return F}function t(k,E,F){if(k.addEventListener){k.addEventListener(E,F,false)}else{if(k.attachEvent){k.attachEvent("on"+E,function(){F(window.event)})}}}t(document,"keydown",function(k){C(k)});t(document,"keyup",d);t(window,"focus",j);var o=u.key;function D(){var E=u.key;u.key=o;return E}u.key=g;u.key.setScope=m;u.key.getScope=n;u.key.deleteScope=s;u.key.filter=l;u.key.isPressed=c;u.key.getPressedKeyCodes=p;u.key.noConflict=D;u.key.unbind=z;if(typeof module!=="undefined"){module.exports=key}})(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/amd-wrappers.js' */
define("wiki-edit/aui",function(){return AJS});define("wiki-edit/JIRA",function(){return JIRA});define("wiki-edit/keymaster",["wiki-edit/aui"],function(a){if(a.Meta.get("keyboard-shortcuts-enabled")===false){return function b(){}}return key.noConflict()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/templates/wiki-editor.soy' */
// This file was automatically generated from wiki-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Plugins.WikiEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Plugins == 'undefined') { JIRA.Templates.Plugins = {}; }
if (typeof JIRA.Templates.Plugins.WikiEditor == 'undefined') { JIRA.Templates.Plugins.WikiEditor = {}; }


JIRA.Templates.Plugins.WikiEditor.renderEditor = function(opt_data, opt_ignored) {
  var output = '<div id="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="' + soy.$$escapeHtml("Paragraph") + '">' + soy.$$escapeHtml("Paragraph") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="' + soy.$$escapeHtml("Heading 1") + '">' + soy.$$escapeHtml("Heading 1") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="' + soy.$$escapeHtml("Heading 2") + '">' + soy.$$escapeHtml("Heading 2") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="' + soy.$$escapeHtml("Heading 3") + '">' + soy.$$escapeHtml("Heading 3") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="' + soy.$$escapeHtml("Heading 4") + '">' + soy.$$escapeHtml("Heading 4") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="' + soy.$$escapeHtml("Heading 5") + '">' + soy.$$escapeHtml("Heading 5") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="' + soy.$$escapeHtml("Heading 6") + '">' + soy.$$escapeHtml("Heading 6") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="' + soy.$$escapeHtml("Preformatted") + '">' + soy.$$escapeHtml("Preformatted") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="' + soy.$$escapeHtml("Paragraph quote") + '">' + soy.$$escapeHtml("Paragraph quote") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="' + soy.$$escapeHtml("Block quote") + '">' + soy.$$escapeHtml("Block quote") + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="' + soy.$$escapeHtml("Strikethrough") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+S)">' + soy.$$escapeHtml("Strikethrough") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">' + soy.$$escapeHtml("Superscript") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">' + soy.$$escapeHtml("Subscript") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">' + soy.$$escapeHtml("Citation") + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="' + soy.$$escapeHtml("External link") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)">' + soy.$$escapeHtml("External link") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">' + soy.$$escapeHtml("Mail link") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">' + soy.$$escapeHtml("Anchor link") + '</a></li>' + ((! opt_data.attachmentM2FeatureFlag) ? '<li><a href="#" class="wiki-edit-operation" data-operation="link-attachment">' + soy.$$escapeHtml("Attachment link") + '</a></li>' : '') + '</ul></div>' + ((! opt_data.attachmentM2FeatureFlag) ? '<div class="aui-dropdown2-section wiki-edit-insert-link"><strong>' + soy.$$escapeHtml("Attachment link") + '</strong><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div>' : '') + '</div>' + ((! opt_data.attachmentM2FeatureFlag) ? '<div id="wiki-edit-dropdown2-image-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-image"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="image" title="' + soy.$$escapeHtml("External image") + '">' + soy.$$escapeHtml("External image") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="image-attachment">' + soy.$$escapeHtml("Attached image") + '</a></li></ul></div><div class="aui-dropdown2-section wiki-edit-insert-image"><strong>' + soy.$$escapeHtml("Attached image") + '</strong><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div></div>' : '<div id="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;' + soy.$$escapeHtml("Browse") + '</a></li></ul></div></div>') + '<div id="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker" data-container="wiki-edit-color-picker-buttons-' + soy.$$escapeHtml(opt_data.editorId) + '">';
  var colors__soy108 = ['333333', '707070', 'cccccc', '205081', '59afe1', '14892c', '8eb021', 'd04437', 'f79232', 'f6c342', '654982', 'f691b2'];
  output += '<div class="aui-dropdown2-section"><ul>';
  var colorList110 = colors__soy108;
  var colorListLen110 = colorList110.length;
  for (var colorIndex110 = 0; colorIndex110 < colorListLen110; colorIndex110++) {
    var colorData110 = colorList110[colorIndex110];
    output += '<li><a href="#" style="background-color: #' + soy.$$escapeHtml(colorData110) + '" data-operation="color" data-color="#' + soy.$$escapeHtml(colorData110) + '">&nbsp;</a></li>';
  }
  output += '</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker" data-container="wiki-edit-icon-picker-buttons-' + soy.$$escapeHtml(opt_data.editorId) + '"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/smile.gif" alt="' + soy.$$escapeHtml("smile") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/sad.gif" alt="' + soy.$$escapeHtml("sad") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/tongue.gif" alt="' + soy.$$escapeHtml("tongue") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/biggrin.gif" alt="' + soy.$$escapeHtml("biggrin") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/wink.gif" alt="' + soy.$$escapeHtml("wink") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_up.gif" alt="' + soy.$$escapeHtml("thumbs up") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_down.gif" alt="' + soy.$$escapeHtml("thumbs down") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/information.gif" alt="' + soy.$$escapeHtml("information") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/check.gif" alt="' + soy.$$escapeHtml("check") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/error.gif" alt="' + soy.$$escapeHtml("error") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/warning.gif" alt="' + soy.$$escapeHtml("warning") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/add.gif" alt="' + soy.$$escapeHtml("add") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/forbidden.gif" alt="' + soy.$$escapeHtml("forbidden") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/help_16.gif" alt="' + soy.$$escapeHtml("help") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb_on.gif" alt="' + soy.$$escapeHtml("lightbulb on") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb.gif" alt="' + soy.$$escapeHtml("lightbulb") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml("star yellow") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_red.gif" alt="' + soy.$$escapeHtml("star red") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_green.gif" alt="' + soy.$$escapeHtml("star green") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_blue.gif" alt="' + soy.$$escapeHtml("star blue") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml("star yellow") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag.gif" alt="' + soy.$$escapeHtml("flag") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag_grey.gif" alt="' + soy.$$escapeHtml("flag off") + '" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">' + soy.$$escapeHtml("User mention") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">' + soy.$$escapeHtml("Table") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">' + soy.$$escapeHtml("Code") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">' + soy.$$escapeHtml("Preformatted") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">' + soy.$$escapeHtml("Panel") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">' + soy.$$escapeHtml("Horizontal ruler") + '</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">' + soy.$$escapeHtml("Speech recognition") + '</a></li></ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-' + soy.$$escapeHtml(opt_data.editorId) + '"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '">' + soy.$$escapeHtml("Style") + '</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="' + soy.$$escapeHtml("Bold") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">' + soy.$$escapeHtml("Bold") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="' + soy.$$escapeHtml("Italic") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">' + soy.$$escapeHtml("Italic") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="' + soy.$$escapeHtml("Underline") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">' + soy.$$escapeHtml("Underline") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="' + soy.$$escapeHtml("Text color") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">' + soy.$$escapeHtml("Text color") + '</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" title="' + soy.$$escapeHtml("More colors") + '"><span>' + soy.$$escapeHtml("More colors") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("More") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">' + soy.$$escapeHtml("More") + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Link") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml("Link") + '</span></a>' + ((! opt_data.attachmentM2FeatureFlag) ? '<a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-image-picker-trigger" aria-owns="wiki-edit-dropdown2-image-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-image-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Image") + '"><span class="aui-icon aui-icon-small aui-iconfont-image">' + soy.$$escapeHtml("Image") + '</span></a>' : '<a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Attachment") + '"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">' + soy.$$escapeHtml("Attachment") + '</span></a>') + '</div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="' + soy.$$escapeHtml("Bullet list") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">' + soy.$$escapeHtml("Bullet list") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="' + soy.$$escapeHtml("Numbered list") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">' + soy.$$escapeHtml("Numbered list") + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Icons") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">' + soy.$$escapeHtml("Icons") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Other") + '"><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml("Other") + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="' + soy.$$escapeHtml("Toggle visibility") + '"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderEditor.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderEditor';
}


JIRA.Templates.Plugins.WikiEditor.renderListItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" ' + soy.$$escapeHtml(opt_data.attachmentType ? 'data-attachment-type=' + opt_data.attachmentType : '') + '>' + ((opt_data.attachmentM2FeatureFlagEnabled) ? '<span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small ' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) : 'aui-iconfont-file-txt') + '" title="' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) : 'File') + '"></span>&nbsp;&nbsp;' : '') + '<span class="wiki-edit-attachment-name">' + soy.$$escapeHtml(opt_data.text) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderListItem.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderListItem';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/Analytics.js' */
define("wiki-edit/analytics",["wiki-edit/aui"],function(b){var c=(b.Analytics&&b.Analytics.triggerPrivacyPolicySafeEvent)?(function c(d,e){b.Analytics.triggerPrivacyPolicySafeEvent("jira.wikieditor."+d,e||{})}):(function c(d,e){b.trigger("analytics",{name:"jira.wikieditor."+d,data:e||{}})});function a(e){var d;var g=0;if(!e){return""}for(var f=0;f<e.length;f+=1){d=e.charCodeAt(f);g=((g*32)-g)+d;g|=0}return g}return{trigger:c,hashCode:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(a){if(this.isNavigation(a)){return"navigating"}else{if(this.isDeleting(a)){return"deleting"}else{if(this.isReturn(a)){return"newline"}else{if(this.isEscape(a)){return"escape"}else{if(this.isTyping(a)){return"typing"}}}}}},isNavigation:function(a){return(a>=33&&a<=40)||(a>=63232&&a<=63235)},isDeleting:function(a){return(a==8||a==46||a==127)},isReturn:function(a){return(a==13)},isEscape:function(a){return(a==27)},isTyping:function(a){return(a>47&&a<58)||(a>95&&a<112)||(a>64&&a<91)||(a>185&&a<193)||(a>218&&a<223)||a==32||a==13}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoManager.js' */
define("wiki-edit/UndoManager",function(){var a=function(){this._undoStack=[];this._redoStack=[];this._current=undefined};a.prototype.MAX_STACK=1000;a.prototype.updateCurrent=function(c,b){if(c!=this._current){this._current=c;if(!b){this._redoStack.length=0}}};a.prototype.push=function(b){this._redoStack.length=0;if(!this._undoStack.length||!_.isEqual(b,this._undoStack[this._undoStack.length-1])){this._undoStack.push(b);this._current=b}if(this._undoStack.length>this.MAX_STACK){this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK)}};a.prototype.undo=function(){if(!this.canUndo()){return}var b;do{b=this._undoStack.pop()}while(_.isEqual(b,this._current)&&this.canUndo());this._redoStack.push(this._current);this._current=b;return b};a.prototype.redo=function(){if(!this.canRedo()){return}var b=this._redoStack.pop();this._undoStack.push(this._current);this._current=b;return b};a.prototype.canUndo=function(){return !!this._undoStack.length};a.prototype.canRedo=function(){return !!this._redoStack.length};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(h,a,e){var g="cut-paste";var f="";function c(i,j){if(j===g||f!=j){if(f!="newline"){i.recordHistoryItem()}f=j}}function d(i,k){if(i.undoManager["can"+k[0].toUpperCase()+k.substring(1)]()){var j=i.undoManager[k]();i.element.value=j.value;i.element.selectionStart=j.selectionStart;i.element.selectionEnd=j.selectionEnd}}var b=function b(k){this.element=k;this.$el=e(k);this.undoManager=new h();this.undoManager.updateCurrent(this.getValue());this.undoManager.push(this.getValue());var l=(function j(n){var m=n.keyCode;var o=String.fromCharCode(m);if(m){if(!n.ctrlKey&&!n.metaKey){this.undoManager.updateCurrent(this.getValue());c(this,a.getActionType(m))}else{if((n.ctrlKey||n.metaKey)&&!n.altKey){switch(o.toLowerCase()){case"y":this.undoManager.updateCurrent(this.getValue(),true);this.redo();n.preventDefault();break;case"z":this.undoManager.updateCurrent(this.getValue(),true);if(!n.shiftKey){this.undo()}else{this.redo()}n.preventDefault();break}}}}else{this.undoManager.updateCurrent(this.getValue());c(this,"other")}}).bind(this);this.$el.on("keydown",l);this.$el.on("paste cut",function i(){this.undoManager.updateCurrent(this.getValue());c(this,g)}.bind(this))};b.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}};b.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())};b.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())};b.prototype.undo=function(){c(this,"undo");d(this,"undo");this.element.scrollTop=this.element.scrollHeight};b.prototype.redo=function(){d(this,"redo");this.element.scrollTop=this.element.scrollHeight};return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var a=function(b){this.el=b};a.prototype.NEW_LINE_TOKEN="\n";a.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}};a.prototype.setSelection=function(c,b){if(arguments.length===1){b=c}this.el.selectionStart=c;this.el.selectionEnd=b};a.prototype.replaceSelectionWith=function(d,c){var e=this.el.selectionStart;var b=this.el.value;this.el.value=b.substring(0,this.el.selectionStart)+d+b.substring(this.el.selectionEnd,b.length);this.el.selectionEnd=e+d.length;this.el.selectionStart=(c)?e:this.el.selectionEnd};a.prototype.wrapSelectionWith=function(e,f,h){if(arguments.length<3){h=""}if(arguments.length===1){f=e}var d=this.getSelection();var g=this.el.value;if(g.substring(d.start-e.length,d.start)===e&&g.substring(d.end,d.end+f.length)===f){return}var c=g.substring(d.start,d.end);if(c.length==0){c=h}this.el.value=g.substring(0,d.start)+e+c+f+g.substring(d.end,g.length);var b=d.start+e.length;this.setSelection(b,b+c.length)};a.prototype._getSelectedLines=function(){var f=this.el.value;var c=this.getSelection();var e=f.substring(0,c.start).split(this.NEW_LINE_TOKEN).length-1;var d=e+f.substring(c.start,c.end).split(this.NEW_LINE_TOKEN).length-1;var b=f.split(this.NEW_LINE_TOKEN);return{lines:b,start:e,end:d}};a.prototype.getLineAtCursor=function(){var b=this._getSelectedLines();return b.lines[b.end]};a.prototype.getFirstLineMatch=function(d){var b=this._getSelectedLines();var c=b.lines[b.start].match(d);if(c){return c[0]}};a.prototype.areSelectedLinesPrefixed=function(c){var b=this._getSelectedLines();var d;for(d=b.start;d<=b.end;d++){if(b.lines[d].indexOf(c)==0){return true}}return false};a.prototype.prefixSelectedLines=function(f){var e=this.getSelection();var b=this._getSelectedLines();var h;var c=0;var g=true;for(h=b.start;h<=b.end;h++){if(b.lines[h].indexOf(f)==0){if(h==b.start){g=false}continue}c+=1;b.lines[h]=f+b.lines[h]}this.el.value=b.lines.join(this.NEW_LINE_TOKEN);var d=f.length*c;this.setSelection(e.start+((g)?f.length:0),e.end+d)};a.prototype.unprefixSelectedLines=function(f){var e=this.getSelection();var b=this._getSelectedLines();var h;var g=false;var c=0;for(h=b.start;h<=b.end;h++){if(b.lines[h].indexOf(f)==0){c+=1;b.lines[h]=b.lines[h].substring(f.length);if(h==b.start){g=true}}}this.el.value=b.lines.join(this.NEW_LINE_TOKEN);var d=f.length*c;this.setSelection(e.start-((g)?f.length:0),e.end-d)};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(b,a){return{init:function(){a.filter=function(e){var c=e.target||e.srcElement||false;var d;if(c&&(" "+c.className+" ").indexOf(" wiki-textfield ")>-1){d=b(c).data("wikiEditor");if(d){a.setScope(d.id);return true}}return false}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEnabledTextarea.js' */
define("wiki-edit/WikiEnabledTextarea",["wiki-edit/TextareaManipulator","wiki-edit/UndoableTextarea","wiki-edit/keymaster","wiki-edit/keymaster-setup","featureflags/feature-manager","wiki-edit/SpeechRecognition","jquery"],function(b,a,f,n,i,k,c){n.init();var h=0;var e=/^[#\*]+ /;var m=function(p){this.el=p;this.$el=c(p);if(this.$el.data("wikiEditor")){return this.$el.data("wikiEditor")}this.id="wikiEdit"+h;h+=1;this.manipulationEngine=new b(this.el);this.undoRedoEl=new a(p);var q=this;f("enter",q.id,function o(t){var r=q.manipulationEngine.getSelection();var s=q.manipulationEngine.getFirstLineMatch(e);if(s){if(r.length==0&&q.manipulationEngine.getLineAtCursor()===s){q.manipulationEngine.unprefixSelectedLines(s)}else{q.manipulationEngine.replaceSelectionWith("\n"+s)}t.preventDefault()}});this.$el.data("wikiEditor",this)};var g={bold:["*","*","strong text"],italic:["_","_","emphasized text"],underline:["+","+","underlined text"],"delete":["-","-","deleted text"],superscript:["^","^","superscript text"],subscript:["~","~","subscript text"],monospace:["{{","}}","monospaced text"],cite:["??","??","citation"],"block-quote":["{quote}","{quote}","quoted text"],color:["{color:$1}","{color}","colored text","red"],link:["[","]","link title"+"|http://example.com"],"link-anchor":["[#","]","anchor"],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@","","Mention someone by typing their name..."],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n","*no* further _formatting_ is done here"],panel:["\n{panel:title="+"My title"+"}\n","\n{panel}\n","Some text with a title"],table:["\n||"+"Heading"+" 1||"+"Heading"+" 2||\n|","|"+"Col"+" A2|\n","Col"+" A1"]};for(var j in g){m.prototype[j]=(function(o,p){var q=0;if(o.length>3){q=o.length-3}return function(){var u=o[0];var v=o[1];var w=o[2];var r;for(r=1;r<=q;r++){u=u.replace("$"+r,arguments[r-1]||o[2+r]);v=v.replace("$"+r,arguments[r-1]||o[2+r])}var t=this.el.value;var s=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem();if(t.substring(s.start-u.length,s.start)===u&&t.substring(s.end,s.end+v.length)===v){this.el.value=t.substring(0,s.start-u.length)+t.substring(s.start,s.end)+t.substring(s.end+v.length,t.length);this.manipulationEngine.setSelection(s.start-u.length,s.end-u.length)}else{this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,u,v,w)}this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(g[j],j)}var d={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(var j in d){m.prototype[j]=(function(o){return function(){this.undoRedoEl.recordHistoryItem();for(var p in d){if(this.manipulationEngine.areSelectedLinesPrefixed(d[p])){this.manipulationEngine.unprefixSelectedLines(d[p])}}this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,o);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(d[j])}var l={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(var j in l){m.prototype[j]=(function(o){var q=0;var p;if(_.isArray(o)){q=o.length-1;p=o.slice(1);o=o[0]}return function(){var s;var r=o;for(s=1;s<=q;s++){r=o.replace("$"+s,arguments[s-1]||p[s-1])}this.undoRedoEl.recordHistoryItem();this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,r,false);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(l[j])}m.prototype.speech=function(){k.start(this)};return m});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditor.js' */
define("wiki-edit/WikiEditor",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/JIRA","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","jira/util/events","featureflags/feature-manager"],function(l,c,j,a,i,d,m,e,g){var k="Ctrl";if(navigator.platform.indexOf("Mac")!=-1){k=""}var h=function(){return g.isFeatureEnabled("jira.unified.attachments.m2")};var b=function(n){return n.match(/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i)?"image":"file"};var f=function(o,p,n){if(h()){if(n=="image"){if(p.match(/\.gif$/i)){o["image-attachment-full"](p)}else{o["image-attachment"](p)}d.trigger("operation.attachment.image")}else{o["link-attachment"](p);d.trigger("operation.attachment.link")}}else{o["image-attachment"](p);d.trigger("operation.attachment.image")}};return{create:function(r){if(typeof r.selectionStart=="undefined"){return}var x=c(r);if(x.data("wikiEditor")){return}var n=new l(r);this.wikiEditor=n;var q=c(a.Templates.Plugins.WikiEditor.renderEditor({editorId:n.id,controlKey:k,attachmentM2FeatureFlag:h()}));var H=q.filter(".wiki-edit-toolbar");if("webkitSpeechRecognition" in window){q.find(".wiki-edit-speech-item").removeClass("hidden")}x.parent().before(q);var w=x.closest(".jira-dialog").length>0||x.closest("form#issue-create").length>0;var v=x.closest("#create-issue-dialog").length>0;var E=c("#issue-content").length>0;var o=x.closest("#addcomment").length>0;var L=q.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");var J;if(w){J="Dialog.beforeHide"}else{J=a.Events.BEFORE_INLINE_EDIT_CANCEL}L.each(function(){var R=c(this);var Q={aria:true,hideOnClick:true,hoverable:false};if(R.parent().is("li")){Q.gravity="w"}R.tooltip(Q)});var N=function(){L.each(function(){c(this).tooltip("hide")})};a.bind(J,N);var y=false;var P=q.filter(".aui-dropdown2");P.on({"aui-dropdown2-show":function(){y=true;x.focus()},"aui-dropdown2-hide":function(){y=false;N()}});x.on("keydown",function I(R){if(y&&R.keyCode===AJS.keyCode.ESCAPE){if(w){a.one("Dialog.beforeHide",function(S){S.preventDefault()})}else{if(E&&!o){a.one(a.Events.BEFORE_INLINE_EDIT_CANCEL,function Q(S){S.preventDefault()})}}}});var t=q.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment");var u=t.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment");var p=t.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");p.on("click","a",function(R){R.preventDefault();var Q=c(this).attr("data-attachment-type");if(typeof Q==="undefined"){Q="file"}var S=c(this).find(".wiki-edit-attachment-name").text();f(n,S,Q)});t.on("aui-dropdown2-show",function(){var Q=[];if(w){c(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(S,R){Q.push(R)})}if(!v&&E){c("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(S,R){Q.push(R)})}p.empty();u.addClass("hidden");if((w||E)&&Q.length){u.removeClass("hidden");c(Q).each(function(){var Y=c(this).is("span.upload-progress-bar__file-name")?c(this).text():c(this).find("a.attachment-title, .attachment-title a").first().text();var R=c(this).attr("data-attachment-type");if(R===undefined){R=b(Y)}var T=m.defaultAttachmentTypeIcon;var U=c(this).attr("data-downloadurl");if(U===undefined){U=c(this).find("[data-downloadurl]").attr("data-downloadurl")}if(U!==undefined&&typeof U==="string"){var S=U.split(":");if(S.length>0){var X=S[0];T=m.translateMimeTypeToAttachmentTypeIcon(X)}}else{if(Y!==undefined&&typeof Y==="string"){var V=Y.match(/\.(\w{1,5})$/i);if(V&&V.length>1){var W=V[1];T=m.translateFileExtensionToAttachmentTypeIcon(W)}}}if(!h()&&R!=="image"){return}p.append(c(a.Templates.Plugins.WikiEditor.renderListItem({text:Y,attachmentType:R,attachmentTypeIcon:T,attachmentM2FeatureFlagEnabled:h()})))})}});if(m.compareVersion(AJS.version,"5.8.0")<0){t.on("aui-dropdown2-item-selected",function M(){var Q=c(this).find(".aui-dropdown2-active");if(typeof Q!=="object"){return}var U=Q.closest("div");if(typeof U!=="object"){return}var S=U.offset().top;var V=S+U.height();var R=Q.offset().top;var T=R+Q.height();if(R<S){U.scrollTop(U.scrollTop()-(S-R))}if(T>V){U.scrollTop(U.scrollTop()+(T-V))}})}if(!h()){var K=q.filter(".wiki-edit-dropdown-link");var F=K.find(".wiki-edit-insert-link");var s=K.find(".wiki-edit-operation[data-operation=link-attachment]");var O=K.find(".wiki-edit-insert-link ul");O.on("click","a",function(Q){Q.preventDefault();n["link-attachment"](c(this).text());d.trigger("operation.attachment.link")});K.on("aui-dropdown2-show",function(){var R=c();if(!v&&E){R=R.add("#attachment_thumbnails .attachment-title, #file_attachments .attachment-title a")}if(w){R=R.add(".upload-progress-bar:not(.upload-progress-bar__upload-error) .upload-progress-bar__thumbnail + .upload-progress-bar__file-name")}var Q=j.uniq(R,false,function S(T){return c(T).text().trim()});O.empty();F.addClass("hidden");s.removeClass("hidden");if((w||E)&&Q.length){F.removeClass("hidden");s.addClass("hidden");Q.forEach(function(T){O.append(c(a.Templates.Plugins.WikiEditor.renderListItem({text:c(T).text().trim(),attachmentM2FeatureFlagEnabled:h()})))})}})}q.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(Q){Q.preventDefault()});q.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var R=c(this);var Q=function(S){if(!S){return}S.preventDefault&&S.preventDefault();x.focus();n[R.data("operation")]();d.trigger("operation",{name:R.data("operation"),nameHash:d.hashCode(R.data("operation")),trigger:S.type});d.trigger("operation."+R.data("operation"),{trigger:S.type})};R.click(Q);if(R.data("shortcut")){i(R.data("shortcut"),n.id,Q)}});q.find(".wiki-edit-operation-color").each(function(){var R=c(this);var Q=function(S){if(!S){return}S.preventDefault&&S.preventDefault();x.focus();n[R.data("operation")](R.data("color"));d.trigger("operation",{name:R.data("operation"),nameHash:d.hashCode(R.data("operation")),trigger:S.type});d.trigger("operation."+R.data("operation"),{trigger:S.type})};R.click(Q);if(R.data("shortcut")){i(R.data("shortcut"),n.id,Q)}});var G=(window.localStorage.getItem("jira.wikieditor.last.color"))?window.localStorage.getItem("jira.wikieditor.last.color"):"red";var B=q.find(".wiki-edit-operation-color");B.data("color",G);var A=H.find(".wiki-edit-color-indicator");A.css("background-color",G);q.filter(".wiki-edit-color-picker").on("click","a",function(R){R.preventDefault();x.focus();var Q=c(this).data("color");n.color(Q);d.trigger("operation",{name:"color"});d.trigger("operation.color.picked",{color:Q});B.data("color",Q);A.css("background-color",Q);window.localStorage.setItem("jira.wikieditor.last.color",Q)});var D=q.find(".wiki-edit-visible-toggle");var C=(localStorage.getItem("jira.wikieditor.visibility"+r.name+"."+r.id)==="true")?true:false;if(C){D.addClass("active");H.addClass("wiki-edit-toolbar-compact")}function z(Q){Q.preventDefault();Q.stopPropagation();C=!C;D.toggleClass("active",C);H.toggleClass("wiki-edit-toolbar-compact",C);localStorage.setItem("jira.wikieditor.visibility"+r.name+"."+r.id,(C)?"true":"false");d.trigger((C)?"hide":"show")}D.on("click",z);H.parent().on("click",".wiki-edit-toolbar-compact",z);c(document).on("showWikiPreview",function(R,Q){if(c(Q).find(r).length){H.addClass("hidden")}});c(document).on("showWikiInput",function(R,Q){if(c(Q).find(r).length){H.removeClass("hidden")}})},initBrowseLink:function(r){var u=this.wikiEditor;if(h()){var B=c(r);var y=B.parent().siblings().find(".wiki-attachment-browse");var w=c("#dnd-metadata-webpanel").data("can-attach");var q=B.closest(".jira-dialog").length>0||B.closest("form#issue-create").length>0;if(q){var v=["#create-issue-dialog:visible","#create-subtask-dialog:visible","#edit-issue-dialog:visible","#create-linked-issue-dialog:visible"];var z=c(v.join(","));var p=z.length>0;w=c(".jira-dialog fieldset span:contains('Attachment')").length>0;if(!p){z=B.closest(".dialog-can-receive-files:visible");p=z.length>0;w=z.data("can-attach")}var s=z.data("insert-markup-on-browse")}var t=B.parent().siblings().find(".wiki-edit-attachment-picker-trigger");if(w&&(q?p:true)){y.closest("div").removeClass("hidden");t.removeClass("hidden");if(!y.data("initialised")){y.on("click",function(D){D.preventDefault();var C=c('<input type="file" multiple />');C.change(function(H){var G=C[0].files;if(q){var F=c.Event("drop");F.dataTransfer={files:G};z.find(".issue-drop-zone__target").trigger(F)}else{e.trigger("attachmentForPageReceived",{files:G,isWikiTextfieldFocused:true})}if(q?s:true){for(var E=0;E<G.length;E++){var I=G[E].name;f(u,I,b(I))}}});C.click();d.trigger("attachment.dropdown.button.clicked.browse")});y.data("initialised",true)}}else{y.closest("div").addClass("hidden");var o=c("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content");var x=o.length>0;var A=q&&p&&(z.attr("id")==="create-issue-dialog"||z.attr("id")==="create-subtask-dialog");var n=x&&!A;if(!n){t.addClass("hidden")}}}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditorUtil.js' */
define("wiki-edit/WikiEditorUtil",["jquery","underscore"],function(e,c){var d={cssClass:"aui-iconfont-devtools-file",title:""};var b={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"};var a={pdf:"PDF File",gif:"GIF File",png:"PNG File",jpeg:"JPEG File",jpg:"JPEG File",xml:"XML File",html:"HTML File",htm:"HTML File",txt:"Text File",zip:"Zip Archive",gz:"GZip Archive",doc:"Microsoft Word",docx:"Microsoft Word",xls:"Microsoft Excel",xlsx:"Microsoft Excel",xlsm:"Microsoft Excel",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",java:"Java Source File",jar:"Java Archive File",war:"Java Archive File"};return{defaultAttachmentTypeIcon:d,translateMimeTypeToAttachmentTypeIcon:function(f){return{cssClass:JIRA.Templates.ViewIssue.matchFileClass({mimetype:f}),title:JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:f})}},translateFileExtensionToAttachmentTypeIcon:function(i){var f=c.clone(d);if(typeof i!=="string"){return f}i=i.toLowerCase();i=i.replace(/^\.+/,"");var g=b[i];if(typeof g==="string"){f.cssClass=g}var h=a[i];if(typeof h==="string"){f.title=h}return f},compareVersion:function(j,i){var h=j.split(".");var g=i.split(".");var f=NaN;e(h).each(function(m,n){if(m>=g.length){return false}var l=Number(n);var k=Number(g[m]);if(isNaN(l)||isNaN(k)){f=NaN;return false}if(l<k){f=-1;return false}else{if(l>k){f=1;return false}}f=0});if(f==0&&h.length!=g.length){return(h.length>g.length)?1:-1}return f}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/SpeechRecognition.js' */
define("wiki-edit/SpeechRecognition",["jquery","aui/flag"],function(d,c){function a(e){return e&&e[0]&&e[0].isFinal}function b(e){return e&&e[0]&&e[0][0]&&e[0][0].transcript||""}return{start:function(g){var e=this;var f=new webkitSpeechRecognition();f.continuous=false;f.interimResults=true;f.lang=AJS.Meta.get("user-locale").replace("_","-");f.stop();f.start();f.onstart=function(){e.showTimedMessage({title:"You can start speaking now :)"},"info",10);e.selectionStart=g.manipulationEngine.getSelection().start};f.onresult=function(i){e.dismissCurrentMessage();var k=a(i.results);var h=b(i.results);h=h.charAt(0).toUpperCase()+h.slice(1);if(k){g.undoRedoEl.recordHistoryItem()}g.manipulationEngine.replaceSelectionWith.call(g.manipulationEngine,h,false);var j=e.selectionStart+h.length;if(k){g.manipulationEngine.setSelection(j);g.undoRedoEl.recordHistoryItem();g.$el.trigger("input");f.stop()}else{g.manipulationEngine.setSelection(e.selectionStart,j)}};f.onerror=function(i){f.stop();var h={title:"Sorry, I can\'t hear you :(",body:""};switch(i.error){case"not-allowed":h.title="Speech recognition is currently disabled";h.body="Click the camera icon in the browser\'s address bar to enable it.";break;case"network":h.title="No internet connection";h.body="You need a working internet connection to use speech recognition.";break;case"no-speech":h.title="Sorry, I couldn\'t hear anything :(";h.body="Is your microphone working and unmuted?";break;case"aborted":return}e.showTimedMessage(h,"warning",5)};f.onend=function(){f.stop()}},showTimedMessage:function(e,g,f){this.dismissCurrentMessage();this.speakFlag=c({type:g,title:e.title,body:e.body,persistent:true});clearTimeout(this.flagTimer);this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),f*1000)},dismissCurrentMessage:function(){if(this.speakFlag&&this.speakFlag.close){this.speakFlag.close();this.speakFlag=null}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = '/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = '/js/wiki-editor-init.js' */
require(["wiki-edit/WikiEditor","wiki-edit/JIRA","wiki-edit/skate","jquery","underscore"],function(f,d,c,g,e){function b(i){var j=(this instanceof Element)?this:i;var h=function(k){f.create(k);f.initBrowseLink(k);k.wikiEnabled=true};if(j.wikiEnabled===false){if(g(j).is(":hidden")){e.defer(h,j)}else{h(j)}}}function a(){return{type:c.type.CLASSNAME,attached:b,prototype:{wikiEnabled:false}}}c("wiki-textfield",a());c("wiki-enabled-textfield",a());g(function(){if(g("#gh").length>0){d.Dialogs.comment.options.width=810;d.Dialogs.assignIssue.options.width=810;d.Dialogs.attachFile.options.width=810;d.Dialogs.logWork.options.width=810;d.Dialogs.logWork.options.width=810}})});;