;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-exception', location = 'includes/js/rapid/Exception.js' */
if(typeof GH==="undefined"){window.GH={}}GH.Exception={};GH.Exception.errorPattern=/(com\.atlassian|com\.pyxis|jira\.webresources|batch|shortcuts\.js|RapidBoard\.jspa|RapidView\.jspa|ManageRapidViews\.jspa)/;GH.Exception.isMessageExpanded=false;GH.Exception.errorCount=0;GH.Exception.exceptionView=false;GH.Exception.handleJsException=function(a,c,n,b,i){var d=window.console||{log:function(){}};var g=n;if(arguments.length>3){g+=":"+b}d.log("An exception has occurred in "+c+" at "+g+" --- "+a);GH.Exception.errorCount++;var j=null;if(arguments.length>4){if(i&&i.stack){j=i.stack.split("\n")}}if(!GH.Exception.errorPattern.test(c)){d.log("Ignoring file : "+c);return}var e={title:"An error occurred",details:{Exception:a,Resource:c,Line:n},stackTrace:j};if(arguments.length>3){e.details.Column=b}var m=document.getElementById("ghx-errors");if(!GH.Exception.exceptionView){GH.Exception.exceptionView=GH.Exception.buildExceptionView(e)}else{var l=GH.Exception.buildExceptionMessage(e.details);GH.Exception.exceptionView.msgView.setAttribute("style","display:block;");GH.Exception.exceptionView.detailList.appendChild(l);GH.Exception.exceptionView.titleView.getElementsByTagName("span")[1].innerHTML="("+GH.Exception.errorCount+")"}if(!m||m.innerHTML===""){var f=GH.Exception.exceptionView.msgView;var k=document.createElement("div");k.setAttribute("class","ghx-exception");k.appendChild(f);var h=m;if(!h){h=document.createElement("div");h.setAttribute("class","ghx-exception-wrapper");document.body.appendChild(h)}h.appendChild(k)}if(m){m.scrollTop=100000}AJS.$(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE);return !AJS.Meta.get("dev-mode")};GH.Exception.buildExceptionView=function(c){var k=document.createElement("div");k.setAttribute("class","aui-message aui-message-error error closeable");var f=document.createElement("p");f.setAttribute("class","title");f.innerHTML='<span class="aui-icon icon-error"></span>'+c.title;var j=document.createElement("a");j.setAttribute("class","ghx-more");j.innerHTML="Details&hellip;";f.appendChild(j);k.appendChild(f);var b=document.createElement("div");b.setAttribute("style","display: none;");j.onclick=function(i){if(GH.Exception.isMessageExpanded){b.setAttribute("style","display: none;");j.innerHTML="Details&hellip;";GH.Exception.isMessageExpanded=false}else{b.setAttribute("style","position: relative;");j.innerHTML="Hide&hellip;";GH.Exception.isMessageExpanded=true}};var s=document.createElement("p");s.innerHTML='Please try refreshing the page, or contact your administrator / <a href="http://support.atlassian.com">Atlassian Support</a> if the problem continues.';b.appendChild(s);var h=document.createElement("div");var e=c.details;var m=document.createElement("h4");m.innerHTML="Details";h.appendChild(m);var q=document.createElement("ol");h.appendChild(q);var o=GH.Exception.buildExceptionMessage(e);q.appendChild(o);b.appendChild(h);var r=document.createElement("h4");r.innerHTML="Environment";b.appendChild(r);var t=document.createElement("div");t.innerHTML=navigator.userAgent;b.appendChild(t);var g=c.stackTrace;if(g){var n=document.createElement("h3");n.innerHTML="Stack trace";b.appendChild(n);var a=document.createElement("ul");for(var p=0;p<g.length;p++){var l=document.createElement("li");l.innerHTML=g[p];a.appendChild(l)}b.appendChild(a)}var d=document.createElement("a");d.innerHTML='<span class="aui-icon icon-close" title="Close"></span>';f.appendChild(d);d.onclick=function(i){k.setAttribute("style","display:none;");q.innerHTML="";AJS.$(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE)};k.appendChild(b);return{msgView:k,detailList:q,titleView:f}};GH.Exception.buildExceptionMessage=function(a){var e=document.createElement("li");var c=document.createElement("ul");e.appendChild(c);for(var b in a){var d=document.createElement("li");d.innerHTML=b+": "+a[b];c.appendChild(d)}return e};window.onerror=GH.Exception.handleJsException;;